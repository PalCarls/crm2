'use strict';const a38_0xaf55aa=a38_0x2c52;(function(_0x172c8e,_0x37be53){const _0x243560=a38_0x2c52,_0x480b46=_0x172c8e();while(!![]){try{const _0x138c45=-parseInt(_0x243560(0x1eb))/0x1*(parseInt(_0x243560(0x1e6))/0x2)+-parseInt(_0x243560(0x1f2))/0x3+parseInt(_0x243560(0x1d7))/0x4+-parseInt(_0x243560(0x1e0))/0x5+-parseInt(_0x243560(0x1f0))/0x6+parseInt(_0x243560(0x1d4))/0x7*(-parseInt(_0x243560(0x1d3))/0x8)+-parseInt(_0x243560(0x1ec))/0x9*(-parseInt(_0x243560(0x1e4))/0xa);if(_0x138c45===_0x37be53)break;else _0x480b46['push'](_0x480b46['shift']());}catch(_0x320256){_0x480b46['push'](_0x480b46['shift']());}}}(a38_0x16c9,0x42bd9));var __importDefault=this&&this[a38_0xaf55aa(0x1dc)]||function(_0x369a3f){const _0x700f0e=a38_0xaf55aa;return _0x369a3f&&_0x369a3f[_0x700f0e(0x1ea)]?_0x369a3f:{'default':_0x369a3f};};Object[a38_0xaf55aa(0x1de)](exports,a38_0xaf55aa(0x1ea),{'value':!![]}),exports[a38_0xaf55aa(0x1dd)]=exports[a38_0xaf55aa(0x1f1)]=void 0x0;const Whatsapp_1=__importDefault(require('../models/Whatsapp')),facebookMessageListener_1=require(a38_0xaf55aa(0x1e2)),index=async(_0x4a5ccf,_0x4d1add)=>{const _0x562aab=a38_0xaf55aa,_0x32979c=process[_0x562aab(0x1f6)]['VERIFY_TOKEN']||_0x562aab(0x1d9),_0x14fd22=_0x4a5ccf[_0x562aab(0x1f5)][_0x562aab(0x1f4)],_0xf6f854=_0x4a5ccf[_0x562aab(0x1f5)][_0x562aab(0x1e9)],_0x503cfd=_0x4a5ccf[_0x562aab(0x1f5)][_0x562aab(0x1d5)];if(_0x14fd22&&_0xf6f854){if(_0x14fd22===_0x562aab(0x1e5)&&_0xf6f854===_0x32979c)return _0x4d1add['status'](0xc8)['send'](_0x503cfd);}return _0x4d1add[_0x562aab(0x1d6)](0x193)[_0x562aab(0x1e3)]({'message':_0x562aab(0x1db)});};exports[a38_0xaf55aa(0x1f1)]=index;function a38_0x16c9(){const _0xd6a71=['object','instagram','messaging','2429232RdXQrc','index','184332ZSRfkm','page','hub.mode','query','env','8cVGgzw','3159065AFopCv','hub.challenge','status','1644340QQyKpN','entry','whaticket','facebook','Forbidden','__importDefault','webHook','defineProperty','forEach','2374310FBPeSY','EVENT_RECEIVED','../services/FacebookServices/facebookMessageListener','json','978940qMxybQ','subscribe','10066Ykcrik','default','companyId','hub.verify_token','__esModule','23UCprDX','126fwbuMF'];a38_0x16c9=function(){return _0xd6a71;};return a38_0x16c9();}const webHook=async(_0x9e3405,_0x1d7c49)=>{const _0x3f0d04=a38_0xaf55aa;try{const {body:_0x13bfa1}=_0x9e3405;if(_0x13bfa1[_0x3f0d04(0x1ed)]===_0x3f0d04(0x1f3)||_0x13bfa1[_0x3f0d04(0x1ed)]===_0x3f0d04(0x1ee)){let _0xb24834;return _0x13bfa1[_0x3f0d04(0x1ed)]==='page'?_0xb24834=_0x3f0d04(0x1da):_0xb24834=_0x3f0d04(0x1ee),_0x13bfa1[_0x3f0d04(0x1d8)]?.[_0x3f0d04(0x1df)](async _0x28f9ef=>{const _0x51e7f8=_0x3f0d04,_0x2a58b6=await Whatsapp_1[_0x51e7f8(0x1e7)]['findOne']({'where':{'facebookPageUserId':_0x28f9ef['id'],'channel':_0xb24834}});_0x2a58b6&&_0x28f9ef[_0x51e7f8(0x1ef)]?.[_0x51e7f8(0x1df)](_0x403dda=>{const _0x30aefd=_0x51e7f8;(0x0,facebookMessageListener_1['handleMessage'])(_0x2a58b6,_0x403dda,_0xb24834,_0x2a58b6[_0x30aefd(0x1e8)]);});}),_0x1d7c49[_0x3f0d04(0x1d6)](0xc8)[_0x3f0d04(0x1e3)]({'message':_0x3f0d04(0x1e1)});}return _0x1d7c49[_0x3f0d04(0x1d6)](0x194)[_0x3f0d04(0x1e3)]({'message':_0x13bfa1});}catch(_0x30bef6){return _0x1d7c49[_0x3f0d04(0x1d6)](0x1f4)[_0x3f0d04(0x1e3)]({'message':_0x30bef6});}};function a38_0x2c52(_0x37fc63,_0xc202bf){const _0x16c9fe=a38_0x16c9();return a38_0x2c52=function(_0x2c527a,_0xa45edc){_0x2c527a=_0x2c527a-0x1d3;let _0x500073=_0x16c9fe[_0x2c527a];return _0x500073;},a38_0x2c52(_0x37fc63,_0xc202bf);}exports[a38_0xaf55aa(0x1dd)]=webHook;