'use strict';const a29_0x2840e4=a29_0x20fa;(function(_0x48309d,_0x4f63ff){const _0x3789d1=a29_0x20fa,_0x1fa80b=_0x48309d();while(!![]){try{const _0xe2b7f1=parseInt(_0x3789d1(0x1a8))/0x1+parseInt(_0x3789d1(0x1a9))/0x2*(parseInt(_0x3789d1(0x193))/0x3)+parseInt(_0x3789d1(0x1a1))/0x4+parseInt(_0x3789d1(0x1ae))/0x5+parseInt(_0x3789d1(0x1a0))/0x6*(parseInt(_0x3789d1(0x19c))/0x7)+parseInt(_0x3789d1(0x1a6))/0x8*(-parseInt(_0x3789d1(0x18f))/0x9)+-parseInt(_0x3789d1(0x1ac))/0xa*(parseInt(_0x3789d1(0x199))/0xb);if(_0xe2b7f1===_0x4f63ff)break;else _0x1fa80b['push'](_0x1fa80b['shift']());}catch(_0x3299b6){_0x1fa80b['push'](_0x1fa80b['shift']());}}}(a29_0x30e3,0x25b49));var __importDefault=this&&this[a29_0x2840e4(0x196)]||function(_0x17dd82){const _0x2223d0=a29_0x2840e4;return _0x17dd82&&_0x17dd82[_0x2223d0(0x1af)]?_0x17dd82:{'default':_0x17dd82};};Object[a29_0x2840e4(0x1a5)](exports,a29_0x2840e4(0x1af),{'value':!![]}),exports[a29_0x2840e4(0x195)]=exports['me']=exports[a29_0x2840e4(0x19b)]=exports[a29_0x2840e4(0x1a7)]=void 0x0;function a29_0x30e3(){const _0x2e1e13=['SendRefreshToken','companyId','defineProperty','203088gkjibU','store','53533jDkLqQ','242326fhzXRg','../errors/AppError','cookies','40ZFYjNm','send','1360085okIdjY','__esModule','body','getIO','email','../helpers/SendRefreshToken','18tmBiFK','user','findByPk','../libs/socket','3hmIvDk','emit','remove','__importDefault','default','-auth','1380291mMypPG','../models/User','update','118223IJcorm','json','ERR_SESSION_EXPIRED','status','42soDDXB','568804HCrRIC','clearCookie'];a29_0x30e3=function(){return _0x2e1e13;};return a29_0x30e3();}const AppError_1=__importDefault(require(a29_0x2840e4(0x1aa))),socket_1=require(a29_0x2840e4(0x192)),AuthUserService_1=__importDefault(require('../services/UserServices/AuthUserService')),SendRefreshToken_1=require(a29_0x2840e4(0x18e)),RefreshTokenService_1=require('../services/AuthServices/RefreshTokenService'),FindUserFromToken_1=__importDefault(require('../services/AuthServices/FindUserFromToken')),User_1=__importDefault(require(a29_0x2840e4(0x19a))),store=async(_0x41b137,_0x45b6d0)=>{const _0x39ad18=a29_0x2840e4,{email:_0x23b720,password:_0x4288fc}=_0x41b137[_0x39ad18(0x1b0)],{token:_0x3e0910,serializedUser:_0x190922,refreshToken:_0x28d713}=await(0x0,AuthUserService_1[_0x39ad18(0x197)])({'email':_0x23b720,'password':_0x4288fc});(0x0,SendRefreshToken_1[_0x39ad18(0x1a3)])(_0x45b6d0,_0x28d713);const _0x2084f5=(0x0,socket_1[_0x39ad18(0x1b1)])();return _0x2084f5[_0x39ad18(0x194)]('company-'+_0x190922[_0x39ad18(0x1a4)]+_0x39ad18(0x198),{'action':_0x39ad18(0x19b),'user':{'id':_0x190922['id'],'email':_0x190922[_0x39ad18(0x18d)],'companyId':_0x190922[_0x39ad18(0x1a4)]}}),_0x45b6d0[_0x39ad18(0x19f)](0xc8)[_0x39ad18(0x19d)]({'token':_0x3e0910,'user':_0x190922});};exports[a29_0x2840e4(0x1a7)]=store;const update=async(_0x414de2,_0x931722)=>{const _0x2d6577=a29_0x2840e4,_0x5ab648=_0x414de2[_0x2d6577(0x1ab)]['jrt'];if(!_0x5ab648)throw new AppError_1[(_0x2d6577(0x197))](_0x2d6577(0x19e),0x191);const {user:_0x36bb20,newToken:_0x16484b,refreshToken:_0x450207}=await(0x0,RefreshTokenService_1['RefreshTokenService'])(_0x931722,_0x5ab648);return(0x0,SendRefreshToken_1['SendRefreshToken'])(_0x931722,_0x450207),_0x931722['json']({'token':_0x16484b,'user':_0x36bb20});};function a29_0x20fa(_0xea4724,_0x34894b){const _0x30e35c=a29_0x30e3();return a29_0x20fa=function(_0x20fabc,_0x34da55){_0x20fabc=_0x20fabc-0x18d;let _0x3c44ef=_0x30e35c[_0x20fabc];return _0x3c44ef;},a29_0x20fa(_0xea4724,_0x34894b);}exports[a29_0x2840e4(0x19b)]=update;const me=async(_0x33fc9f,_0x37eca6)=>{const _0x433a6b=a29_0x2840e4,_0x8bd141=_0x33fc9f[_0x433a6b(0x1ab)]['jrt'],_0x27098d=await(0x0,FindUserFromToken_1[_0x433a6b(0x197)])(_0x8bd141),{id:_0x363911,profile:_0x2e6528,super:_0x2d9c8f}=_0x27098d;if(!_0x8bd141)throw new AppError_1['default']('ERR_SESSION_EXPIRED',0x191);return _0x37eca6[_0x433a6b(0x19d)]({'id':_0x363911,'profile':_0x2e6528,'super':_0x2d9c8f});};exports['me']=me;const remove=async(_0x2024b6,_0x392e56)=>{const _0x16d0a0=a29_0x2840e4,{id:_0x1b39ce}=_0x2024b6[_0x16d0a0(0x190)],_0x2fed0f=await User_1[_0x16d0a0(0x197)][_0x16d0a0(0x191)](_0x1b39ce);return await _0x2fed0f[_0x16d0a0(0x19b)]({'online':![]}),_0x392e56[_0x16d0a0(0x1a2)]('jrt'),_0x392e56[_0x16d0a0(0x1ad)]();};exports['remove']=remove;