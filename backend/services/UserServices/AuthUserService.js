'use strict';const a528_0x10e65c=a528_0x4e0b;function a528_0x2eb6(){const _0x2018be=['../../helpers/SerializeUser','1204150kIYpNG','endWork','../../models/Company','../../helpers/CreateTokens','checkPassword','getMinutes','companyId','createAccessToken','8001FjMPCo','95xsShpz','createRefreshToken','ERR_INVALID_CREDENTIALS','2784472ofghcD','split','ERR_OUT_OF_HOURS','3416DlIYJA','1149756KfjIOM','queues','default','1350QGPBzF','4370Lrbpwp','MASTER_KEY','getHours','231524BdOSEn','4654842eqdyXB','findOne','__importDefault','findByPk','../../models/Setting'];a528_0x2eb6=function(){return _0x2018be;};return a528_0x2eb6();}(function(_0x15bdb3,_0x12d375){const _0x4188f1=a528_0x4e0b,_0x5d7d31=_0x15bdb3();while(!![]){try{const _0x3e2fe8=parseInt(_0x4188f1(0x185))/0x1+-parseInt(_0x4188f1(0x195))/0x2+-parseInt(_0x4188f1(0x17f))/0x3+-parseInt(_0x4188f1(0x17e))/0x4*(-parseInt(_0x4188f1(0x18e))/0x5)+-parseInt(_0x4188f1(0x17a))/0x6*(parseInt(_0x4188f1(0x194))/0x7)+parseInt(_0x4188f1(0x191))/0x8+-parseInt(_0x4188f1(0x18d))/0x9*(-parseInt(_0x4188f1(0x17b))/0xa);if(_0x3e2fe8===_0x12d375)break;else _0x5d7d31['push'](_0x5d7d31['shift']());}catch(_0x2821f4){_0x5d7d31['push'](_0x5d7d31['shift']());}}}(a528_0x2eb6,0xc4535));function a528_0x4e0b(_0x500df6,_0x44b052){const _0x2eb6f8=a528_0x2eb6();return a528_0x4e0b=function(_0x4e0b5c,_0x16f7ea){_0x4e0b5c=_0x4e0b5c-0x179;let _0x2423bf=_0x2eb6f8[_0x4e0b5c];return _0x2423bf;},a528_0x4e0b(_0x500df6,_0x44b052);}var __importDefault=this&&this[a528_0x10e65c(0x181)]||function(_0x434c9c){return _0x434c9c&&_0x434c9c['__esModule']?_0x434c9c:{'default':_0x434c9c};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const User_1=__importDefault(require('../../models/User')),AppError_1=__importDefault(require('../../errors/AppError')),CreateTokens_1=require(a528_0x10e65c(0x188)),SerializeUser_1=require(a528_0x10e65c(0x184)),Company_1=__importDefault(require(a528_0x10e65c(0x187))),Setting_1=__importDefault(require(a528_0x10e65c(0x183))),AuthUserService=async({email:_0x4a73a7,password:_0x2d43b2})=>{const _0x5aeaea=a528_0x10e65c,_0x46748f=await User_1[_0x5aeaea(0x179)][_0x5aeaea(0x180)]({'where':{'email':_0x4a73a7},'include':[_0x5aeaea(0x196),{'model':Company_1[_0x5aeaea(0x179)],'include':[{'model':Setting_1[_0x5aeaea(0x179)]}]}]});if(!_0x46748f)throw new AppError_1[(_0x5aeaea(0x179))]('ERR_INVALID_CREDENTIALS',0x191);const _0x15a055=new Date(),_0xa9216e=_0x15a055[_0x5aeaea(0x17d)]()*0x3c*0x3c,_0xe021d2=_0x15a055[_0x5aeaea(0x18a)]()*0x3c,_0x2d55d4=_0xa9216e+_0xe021d2,_0x5154c6=_0x46748f['startWork'],_0x20d26f=Number(_0x5154c6['split'](':')[0x0])*0x3c*0x3c,_0x211697=Number(_0x5154c6[_0x5aeaea(0x192)](':')[0x1])*0x3c,_0x28d99b=_0x20d26f+_0x211697,_0x4fe299=_0x46748f[_0x5aeaea(0x186)],_0x222a7d=Number(_0x4fe299[_0x5aeaea(0x192)](':')[0x0])*0x3c*0x3c,_0x475a01=Number(_0x4fe299[_0x5aeaea(0x192)](':')[0x1])*0x3c,_0x27418d=_0x222a7d+_0x475a01;if(_0x2d55d4<_0x28d99b||_0x2d55d4>_0x27418d)throw new AppError_1[(_0x5aeaea(0x179))](_0x5aeaea(0x193),0x191);if(_0x2d43b2===process['env'][_0x5aeaea(0x17c)]){}else{if(await _0x46748f[_0x5aeaea(0x189)](_0x2d43b2)){const _0x5e8cc8=await Company_1[_0x5aeaea(0x179)][_0x5aeaea(0x182)](_0x46748f?.[_0x5aeaea(0x18b)]);await _0x5e8cc8['update']({'lastLogin':new Date()});}else throw new AppError_1[(_0x5aeaea(0x179))](_0x5aeaea(0x190),0x191);}const _0x4cf49d=(0x0,CreateTokens_1[_0x5aeaea(0x18c)])(_0x46748f),_0x51fba2=(0x0,CreateTokens_1[_0x5aeaea(0x18f)])(_0x46748f),_0x66722=await(0x0,SerializeUser_1['SerializeUser'])(_0x46748f);return{'serializedUser':_0x66722,'token':_0x4cf49d,'refreshToken':_0x51fba2};};exports[a528_0x10e65c(0x179)]=AuthUserService;