'use strict';const a560_0x2d2538=a560_0x4e68;function a560_0x4e68(_0x11a662,_0x185673){const _0x3c0bcf=a560_0x3c0b();return a560_0x4e68=function(_0x4e68ee,_0x571a41){_0x4e68ee=_0x4e68ee-0x129;let _0xffe018=_0x3c0bcf[_0x4e68ee];return _0xffe018;},a560_0x4e68(_0x11a662,_0x185673);}function a560_0x3c0b(){const _0xf9ac36=['224wRaBhf','shape','configurable','../../models/Whatsapp','23526fKPjxm','568980IQOCPc','./AssociateWhatsappQueue','__importDefault','update','5IUVEcz','611148VJGLXk','56830QRerYh','writable','8887lnPlmb','77670JfIRqO','prototype','ERR_WAPP_GREETING_REQUIRED','getOwnPropertyDescriptor','not','default','defineProperty','__importStar','sequelize','min','validate','../../errors/AppError','./ShowWhatsAppService','create','string','16cGWnde','boolean','972652LsNFur','__esModule','length','yup','91KlgVLW','object','findOne','154fluWaO'];a560_0x3c0b=function(){return _0xf9ac36;};return a560_0x3c0b();}(function(_0x3d606d,_0x59ce64){const _0x3aad81=a560_0x4e68,_0x205788=_0x3d606d();while(!![]){try{const _0x4baafe=-parseInt(_0x3aad81(0x14a))/0x1*(parseInt(_0x3aad81(0x133))/0x2)+-parseInt(_0x3aad81(0x142))/0x3+parseInt(_0x3aad81(0x135))/0x4*(parseInt(_0x3aad81(0x146))/0x5)+-parseInt(_0x3aad81(0x141))/0x6*(-parseInt(_0x3aad81(0x139))/0x7)+-parseInt(_0x3aad81(0x13d))/0x8*(-parseInt(_0x3aad81(0x14b))/0x9)+-parseInt(_0x3aad81(0x148))/0xa*(parseInt(_0x3aad81(0x13c))/0xb)+-parseInt(_0x3aad81(0x147))/0xc;if(_0x4baafe===_0x59ce64)break;else _0x205788['push'](_0x205788['shift']());}catch(_0x53cc7c){_0x205788['push'](_0x205788['shift']());}}}(a560_0x3c0b,0x23491));var __createBinding=this&&this['__createBinding']||(Object[a560_0x2d2538(0x131)]?function(_0x5e973f,_0x54da82,_0x152d79,_0x33f15f){const _0x431744=a560_0x2d2538;if(_0x33f15f===undefined)_0x33f15f=_0x152d79;var _0x2ba48=Object[_0x431744(0x14e)](_0x54da82,_0x152d79);(!_0x2ba48||('get'in _0x2ba48?!_0x54da82['__esModule']:_0x2ba48[_0x431744(0x149)]||_0x2ba48[_0x431744(0x13f)]))&&(_0x2ba48={'enumerable':!![],'get':function(){return _0x54da82[_0x152d79];}}),Object[_0x431744(0x12a)](_0x5e973f,_0x33f15f,_0x2ba48);}:function(_0x32ece2,_0x10778e,_0x110d96,_0x360314){if(_0x360314===undefined)_0x360314=_0x110d96;_0x32ece2[_0x360314]=_0x10778e[_0x110d96];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a560_0x2d2538(0x131)]?function(_0x5d3b4e,_0x77998f){const _0x4bf2ae=a560_0x2d2538;Object['defineProperty'](_0x5d3b4e,_0x4bf2ae(0x129),{'enumerable':!![],'value':_0x77998f});}:function(_0xe7e35,_0x195d7e){_0xe7e35['default']=_0x195d7e;}),__importStar=this&&this[a560_0x2d2538(0x12b)]||function(_0x29b212){const _0x597cfa=a560_0x2d2538;if(_0x29b212&&_0x29b212[_0x597cfa(0x136)])return _0x29b212;var _0x4cc353={};if(_0x29b212!=null){for(var _0x432594 in _0x29b212)if(_0x432594!==_0x597cfa(0x129)&&Object[_0x597cfa(0x14c)]['hasOwnProperty']['call'](_0x29b212,_0x432594))__createBinding(_0x4cc353,_0x29b212,_0x432594);}return __setModuleDefault(_0x4cc353,_0x29b212),_0x4cc353;},__importDefault=this&&this[a560_0x2d2538(0x144)]||function(_0x4c934c){return _0x4c934c&&_0x4c934c['__esModule']?_0x4c934c:{'default':_0x4c934c};};Object[a560_0x2d2538(0x12a)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a560_0x2d2538(0x138))),sequelize_1=require(a560_0x2d2538(0x12c)),AppError_1=__importDefault(require(a560_0x2d2538(0x12f))),Whatsapp_1=__importDefault(require(a560_0x2d2538(0x140))),ShowWhatsAppService_1=__importDefault(require(a560_0x2d2538(0x130))),AssociateWhatsappQueue_1=__importDefault(require(a560_0x2d2538(0x143))),UpdateWhatsAppService=async({whatsappData:_0x1f7353,whatsappId:_0x52fda9,companyId:_0x2d1375})=>{const _0x4c5661=a560_0x2d2538,_0x57a128=Yup[_0x4c5661(0x13a)]()[_0x4c5661(0x13e)]({'name':Yup['string']()[_0x4c5661(0x12d)](0x2),'status':Yup[_0x4c5661(0x132)](),'isDefault':Yup[_0x4c5661(0x134)]()}),{name:_0x510787,status:_0x29d6a4,isDefault:_0x114237,session:_0x236886,greetingMessage:_0x5220f9,complationMessage:_0x53eec2,outOfHoursMessage:_0x2e7828,queueIds:queueIds=[],token:_0x587b65,maxUseBotQueues:_0x1a9888,timeUseBotQueues:_0x5adf77,expiresTicket:_0x379a2c,allowGroup:_0x467ae9,timeSendQueue:_0x1fb7e6,sendIdQueue:_0x409e10,timeInactiveMessage:_0x1524b5,inactiveMessage:_0x181bd8,ratingMessage:_0x33acc9,maxUseBotQueuesNPS:_0x3a0b66,expiresTicketNPS:_0x374e98,whenExpiresTicket:_0x2065f5,expiresInactiveMessage:_0x4204cf,groupAsTicket:_0x265317,importOldMessages:_0x4947df,importRecentMessages:_0x3fd356,closedTicketsPostImported:_0x1245f7,importOldMessagesGroups:_0x501415,timeCreateNewTicket:_0x380883}=_0x1f7353;try{await _0x57a128[_0x4c5661(0x12e)]({'name':_0x510787,'status':_0x29d6a4,'isDefault':_0x114237});}catch(_0x4dd277){throw new AppError_1[(_0x4c5661(0x129))](_0x4dd277['message']);}if(queueIds[_0x4c5661(0x137)]>0x1&&!_0x5220f9)throw new AppError_1[(_0x4c5661(0x129))](_0x4c5661(0x14d));let _0x5c2152=null;_0x114237&&(_0x5c2152=await Whatsapp_1[_0x4c5661(0x129)][_0x4c5661(0x13b)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x4c5661(0x14f)]]:_0x52fda9},'companyId':_0x2d1375}}),_0x5c2152&&await _0x5c2152[_0x4c5661(0x145)]({'isDefault':![]}));const _0x165730=await(0x0,ShowWhatsAppService_1[_0x4c5661(0x129)])(_0x52fda9,_0x2d1375);return await _0x165730[_0x4c5661(0x145)]({'name':_0x510787,'status':_0x29d6a4,'session':_0x236886,'greetingMessage':_0x5220f9,'complationMessage':_0x53eec2,'outOfHoursMessage':_0x2e7828,'isDefault':_0x114237,'companyId':_0x2d1375,'token':_0x587b65,'maxUseBotQueues':_0x1a9888,'timeUseBotQueues':_0x5adf77,'expiresTicket':_0x379a2c,'allowGroup':_0x467ae9,'timeSendQueue':_0x1fb7e6,'sendIdQueue':_0x409e10,'timeInactiveMessage':_0x1524b5,'inactiveMessage':_0x181bd8,'ratingMessage':_0x33acc9,'maxUseBotQueuesNPS':_0x3a0b66,'expiresTicketNPS':_0x374e98,'whenExpiresTicket':_0x2065f5,'expiresInactiveMessage':_0x4204cf,'groupAsTicket':_0x265317,'importOldMessages':_0x4947df,'importRecentMessages':_0x3fd356,'closedTicketsPostImported':_0x1245f7,'importOldMessagesGroups':_0x501415,'timeCreateNewTicket':_0x380883}),await(0x0,AssociateWhatsappQueue_1[_0x4c5661(0x129)])(_0x165730,queueIds),{'whatsapp':_0x165730,'oldDefaultWhatsapp':_0x5c2152};};exports[a560_0x2d2538(0x129)]=UpdateWhatsAppService;