'use strict';const a456_0x379f3d=a456_0x2c47;function a456_0x2c47(_0x442411,_0xd1cca9){const _0x1656c4=a456_0x1656();return a456_0x2c47=function(_0x2c4788,_0x574de4){_0x2c4788=_0x2c4788-0x19c;let _0x289443=_0x1656c4[_0x2c4788];return _0x289443;},a456_0x2c47(_0x442411,_0xd1cca9);}(function(_0x5ee394,_0x421ce4){const _0x33977f=a456_0x2c47,_0x37994b=_0x5ee394();while(!![]){try{const _0x24cc2e=parseInt(_0x33977f(0x1b7))/0x1*(parseInt(_0x33977f(0x1ae))/0x2)+-parseInt(_0x33977f(0x1a4))/0x3+-parseInt(_0x33977f(0x19d))/0x4*(-parseInt(_0x33977f(0x1b8))/0x5)+parseInt(_0x33977f(0x19f))/0x6+-parseInt(_0x33977f(0x1b5))/0x7+parseInt(_0x33977f(0x1a7))/0x8+-parseInt(_0x33977f(0x19c))/0x9;if(_0x24cc2e===_0x421ce4)break;else _0x37994b['push'](_0x37994b['shift']());}catch(_0x33dc19){_0x37994b['push'](_0x37994b['shift']());}}}(a456_0x1656,0x84680));var __importDefault=this&&this[a456_0x379f3d(0x1b9)]||function(_0x9979a){const _0x458871=a456_0x379f3d;return _0x9979a&&_0x9979a[_0x458871(0x1a5)]?_0x9979a:{'default':_0x9979a};};Object[a456_0x379f3d(0x1ab)](exports,a456_0x379f3d(0x1a5),{'value':!![]});const AppError_1=__importDefault(require(a456_0x379f3d(0x1a2))),Message_1=__importDefault(require(a456_0x379f3d(0x1ba))),Ticket_1=__importDefault(require(a456_0x379f3d(0x1b1))),ShowTicketService_1=__importDefault(require(a456_0x379f3d(0x1af))),sequelize_1=require(a456_0x379f3d(0x1a1)),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x4b9a50,companyId:_0x40f64e,queues:queues=[],user:_0x35d7d2})=>{const _0x36ae5c=a456_0x379f3d,_0x41d5c3=await(0x0,ShowTicketService_1['default'])(_0x4b9a50,_0x40f64e);if(!_0x41d5c3)throw new AppError_1[(_0x36ae5c(0x1a3))]('ERR_NO_TICKET_FOUND',0x194);const _0x112232=0x14,_0x740f17=_0x112232*(+pageNumber-0x1),{count:_0x11a81c,rows:_0x388e3d}=await Message_1[_0x36ae5c(0x1a3)][_0x36ae5c(0x1b3)]({'limit':_0x112232,'include':[_0x36ae5c(0x1ac),{'model':Message_1[_0x36ae5c(0x1a3)],'as':_0x36ae5c(0x19e),'include':[_0x36ae5c(0x1ac)]},{'model':Ticket_1[_0x36ae5c(0x1a3)],'where':{'contactId':_0x41d5c3['contactId'],'whatsappId':_0x41d5c3[_0x36ae5c(0x1b4)],'isGroup':_0x41d5c3[_0x36ae5c(0x1a9)],'queueId':_0x35d7d2[_0x36ae5c(0x1a0)]===_0x36ae5c(0x1b2)||_0x35d7d2['allTicket']===_0x36ae5c(0x1b6)?{[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}}:{[sequelize_1['Op']['in']]:queues}},'required':!![],'include':[_0x36ae5c(0x1aa)]}],'offset':_0x740f17,'order':[[_0x36ae5c(0x1ad),_0x36ae5c(0x1a8)]]}),_0x36ba09=_0x11a81c>_0x740f17+_0x388e3d[_0x36ae5c(0x1b0)];return{'messages':_0x388e3d[_0x36ae5c(0x1a6)](),'ticket':_0x41d5c3,'count':_0x11a81c,'hasMore':_0x36ba09};};function a456_0x1656(){const _0x24463c=['createdAt','48LPKrhK','../TicketServices/ShowTicketService','length','../../models/Ticket','admin','findAndCountAll','whatsappId','2091173QRQUjZ','enable','3373KSKJRj','244535RbJieJ','__importDefault','../../models/Message','7983792pBzvTV','52reLrzC','quotedMsg','4198494HvNFCV','profile','sequelize','../../errors/AppError','default','1106976UaFGOB','__esModule','reverse','5445304MWPKvX','DESC','isGroup','queue','defineProperty','contact'];a456_0x1656=function(){return _0x24463c;};return a456_0x1656();}exports['default']=ListMessagesService;