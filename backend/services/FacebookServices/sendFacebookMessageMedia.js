'use strict';const a434_0x4c2bca=a434_0x4afa;function a434_0x1b3b(){const _0x31b1d1=['1442528JoZFrj','537977qDbTNf','124043SuNbvZ','sendAttachmentFromUrl','12MYtZVh','whatsapp','2274978mFlLUy','BACKEND_URL','mimetype','7UBqbZI','contact','typeAttachment','filename','image','6IQbCTt','verifyMessage','3816RGATyE','file','default','96810AOUZbS','__esModule','8070XwSfzA','facebookUserToken','ERR_SENDING_FACEBOOK_MSG','update','video','includes','defineProperty','audio','../../errors/AppError','number','companyId','env','./facebookMessageListener','5890dfwUBI','688tTWcis'];a434_0x1b3b=function(){return _0x31b1d1;};return a434_0x1b3b();}(function(_0x16248a,_0x18c2cc){const _0x25f713=a434_0x4afa,_0x14f464=_0x16248a();while(!![]){try{const _0x54d29e=parseInt(_0x25f713(0x1aa))/0x1+-parseInt(_0x25f713(0x1bb))/0x2*(parseInt(_0x25f713(0x1b6))/0x3)+parseInt(_0x25f713(0x1a7))/0x4*(parseInt(_0x25f713(0x1bd))/0x5)+parseInt(_0x25f713(0x1ae))/0x6*(parseInt(_0x25f713(0x1b1))/0x7)+-parseInt(_0x25f713(0x1a8))/0x8+parseInt(_0x25f713(0x1b8))/0x9*(-parseInt(_0x25f713(0x1a6))/0xa)+-parseInt(_0x25f713(0x1a9))/0xb*(parseInt(_0x25f713(0x1ac))/0xc);if(_0x54d29e===_0x18c2cc)break;else _0x14f464['push'](_0x14f464['shift']());}catch(_0x5dc534){_0x14f464['push'](_0x14f464['shift']());}}}(a434_0x1b3b,0x320f5));var __importDefault=this&&this['__importDefault']||function(_0x35f1f0){const _0x9810e5=a434_0x4afa;return _0x35f1f0&&_0x35f1f0[_0x9810e5(0x1bc)]?_0x35f1f0:{'default':_0x35f1f0};};Object[a434_0x4c2bca(0x19f)](exports,a434_0x4c2bca(0x1bc),{'value':!![]}),exports[a434_0x4c2bca(0x1b3)]=void 0x0;const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require(a434_0x4c2bca(0x1a1))),graphAPI_1=require('./graphAPI'),facebookMessageListener_1=require(a434_0x4c2bca(0x1a5)),typeAttachment=_0x5de18a=>{const _0x37c227=a434_0x4c2bca;if(_0x5de18a[_0x37c227(0x1b0)][_0x37c227(0x19e)](_0x37c227(0x1b5)))return _0x37c227(0x1b5);if(_0x5de18a[_0x37c227(0x1b0)][_0x37c227(0x19e)](_0x37c227(0x1c1)))return'video';if(_0x5de18a[_0x37c227(0x1b0)][_0x37c227(0x19e)](_0x37c227(0x1a0)))return'audio';return _0x37c227(0x1b9);};exports[a434_0x4c2bca(0x1b3)]=typeAttachment;function a434_0x4afa(_0xca0c1,_0x4ad3f9){const _0x1b3bfc=a434_0x1b3b();return a434_0x4afa=function(_0x4afafc,_0x2a207e){_0x4afafc=_0x4afafc-0x19e;let _0x58b6ac=_0x1b3bfc[_0x4afafc];return _0x58b6ac;},a434_0x4afa(_0xca0c1,_0x4ad3f9);}const sendFacebookMessageMedia=async({media:_0x2bc29f,url:_0x9beb54,ticket:_0x2fa78c,body:_0x107476})=>{const _0x3bfa87=a434_0x4c2bca;try{const _0x429c9a=(0x0,exports['typeAttachment'])(_0x2bc29f),_0x49e671=await(0x0,graphAPI_1[_0x3bfa87(0x1ab)])(_0x2fa78c[_0x3bfa87(0x1b2)][_0x3bfa87(0x1a2)],process[_0x3bfa87(0x1a4)][_0x3bfa87(0x1af)]+'/public/company'+_0x2fa78c[_0x3bfa87(0x1a3)]+'/'+_0x2bc29f[_0x3bfa87(0x1b4)],_0x429c9a,_0x2fa78c[_0x3bfa87(0x1ad)][_0x3bfa87(0x1be)]);return await _0x2fa78c[_0x3bfa87(0x1c0)]({'lastMessage':_0x107476||_0x2bc29f['filename']}),fs_1[_0x3bfa87(0x1ba)]['unlinkSync'](_0x2bc29f['path']),await(0x0,facebookMessageListener_1[_0x3bfa87(0x1b7)])(_0x49e671,_0x107476||_0x2bc29f[_0x3bfa87(0x1b4)],_0x2fa78c,_0x2fa78c['contact']),_0x49e671;}catch(_0x25553d){throw new AppError_1['default'](_0x3bfa87(0x1bf));}};exports[a434_0x4c2bca(0x1ba)]=sendFacebookMessageMedia;