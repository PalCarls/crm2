'use strict';const a545_0x5412bb=a545_0xd146;function a545_0xd146(_0x12e2b7,_0x2f8da5){const _0x5ebab3=a545_0x5eba();return a545_0xd146=function(_0xd146f9,_0x32044d){_0xd146f9=_0xd146f9-0xfc;let _0x51b34f=_0x5ebab3[_0xd146f9];return _0x51b34f;},a545_0xd146(_0x12e2b7,_0x2f8da5);}(function(_0x58a112,_0x40b5e7){const _0x2d7ee8=a545_0xd146,_0x1f5be1=_0x58a112();while(!![]){try{const _0x4c9c87=-parseInt(_0x2d7ee8(0x105))/0x1+-parseInt(_0x2d7ee8(0x11c))/0x2+parseInt(_0x2d7ee8(0x101))/0x3+-parseInt(_0x2d7ee8(0xfd))/0x4+parseInt(_0x2d7ee8(0x119))/0x5+-parseInt(_0x2d7ee8(0x110))/0x6+-parseInt(_0x2d7ee8(0x124))/0x7*(-parseInt(_0x2d7ee8(0x11d))/0x8);if(_0x4c9c87===_0x40b5e7)break;else _0x1f5be1['push'](_0x1f5be1['shift']());}catch(_0x19eab3){_0x1f5be1['push'](_0x1f5be1['shift']());}}}(a545_0x5eba,0xabee2));function a545_0x5eba(){const _0x2b47ff=['create','isNil','dataJson','44926RlYEwe','name','sendMessage','TEL;type=CELL;waid=','delay','split','ERR_SENDING_WAPP_MSG','../../models/Contact','3216252mOWLKT','replace','hasOwnProperty','key','3962733QPuuaM','default','findByPk','lodash','234165UalaMi','g.us','__setModuleDefault','update','contactId','defineProperty','log','isGroup','get','getOwnPropertyDescriptor','__importDefault','8396376CkrlsM','@whiskeysockets/baileys','captureException','../../helpers/GetTicketWbot','extendedTextMessage','message','../../errors/AppError','includes','number','1990015PocGas','prototype','../../models/Message','1556876gmxEry','2744WsyKMQ','remoteJid','__importStar','__esModule'];a545_0x5eba=function(){return _0x2b47ff;};return a545_0x5eba();}var __createBinding=this&&this['__createBinding']||(Object[a545_0x5412bb(0x121)]?function(_0x3e55f3,_0x1e7214,_0x5e9b24,_0x369b2b){const _0x255cdd=a545_0x5412bb;if(_0x369b2b===undefined)_0x369b2b=_0x5e9b24;var _0x14c497=Object[_0x255cdd(0x10e)](_0x1e7214,_0x5e9b24);(!_0x14c497||(_0x255cdd(0x10d)in _0x14c497?!_0x1e7214[_0x255cdd(0x120)]:_0x14c497['writable']||_0x14c497['configurable']))&&(_0x14c497={'enumerable':!![],'get':function(){return _0x1e7214[_0x5e9b24];}}),Object[_0x255cdd(0x10a)](_0x3e55f3,_0x369b2b,_0x14c497);}:function(_0x2401a8,_0x47bf10,_0x55045c,_0x20e417){if(_0x20e417===undefined)_0x20e417=_0x55045c;_0x2401a8[_0x20e417]=_0x47bf10[_0x55045c];}),__setModuleDefault=this&&this[a545_0x5412bb(0x107)]||(Object[a545_0x5412bb(0x121)]?function(_0x33bdbb,_0x5d9b0c){const _0x422f11=a545_0x5412bb;Object[_0x422f11(0x10a)](_0x33bdbb,_0x422f11(0x102),{'enumerable':!![],'value':_0x5d9b0c});}:function(_0x4cf28d,_0x43d448){const _0x40ada4=a545_0x5412bb;_0x4cf28d[_0x40ada4(0x102)]=_0x43d448;}),__importStar=this&&this[a545_0x5412bb(0x11f)]||function(_0x531e55){const _0xdf5241=a545_0x5412bb;if(_0x531e55&&_0x531e55['__esModule'])return _0x531e55;var _0x19c2ce={};if(_0x531e55!=null){for(var _0x4e3183 in _0x531e55)if(_0x4e3183!=='default'&&Object[_0xdf5241(0x11a)][_0xdf5241(0xff)]['call'](_0x531e55,_0x4e3183))__createBinding(_0x19c2ce,_0x531e55,_0x4e3183);}return __setModuleDefault(_0x19c2ce,_0x531e55),_0x19c2ce;},__importDefault=this&&this[a545_0x5412bb(0x10f)]||function(_0x1483b0){return _0x1483b0&&_0x1483b0['__esModule']?_0x1483b0:{'default':_0x1483b0};};Object[a545_0x5412bb(0x10a)](exports,a545_0x5412bb(0x120),{'value':!![]});const baileys_1=require(a545_0x5412bb(0x111)),Sentry=__importStar(require('@sentry/node')),AppError_1=__importDefault(require(a545_0x5412bb(0x116))),GetTicketWbot_1=__importDefault(require(a545_0x5412bb(0x113))),Message_1=__importDefault(require(a545_0x5412bb(0x11b))),Contact_1=__importDefault(require(a545_0x5412bb(0xfc))),lodash_1=require(a545_0x5412bb(0x104)),Mustache_1=__importDefault(require('../../helpers/Mustache')),SendWhatsAppMessage=async({body:_0x5d0718,ticket:_0x40be78,quotedMsg:_0x53120a,msdelay:_0x22cd86,isPrivate:_0xd9a8fb,vCard:_0x27f59})=>{const _0x27c270=a545_0x5412bb;let _0xb6a38={};const _0x4b6871=await(0x0,GetTicketWbot_1['default'])(_0x40be78),_0x3d4f15=await Contact_1[_0x27c270(0x102)][_0x27c270(0x103)](_0x40be78[_0x27c270(0x109)]);let _0x3bf95f;_0x3d4f15['remoteJid']&&_0x3d4f15['remoteJid']!==''&&_0x3d4f15[_0x27c270(0x11e)][_0x27c270(0x117)]('@')?_0x3bf95f=_0x3d4f15[_0x27c270(0x11e)]:_0x3bf95f=_0x3d4f15[_0x27c270(0x118)]+'@'+(_0x40be78[_0x27c270(0x10c)]?_0x27c270(0x106):'s.whatsapp.net');if(_0x53120a){const _0x76ae31=await Message_1['default']['findOne']({'where':{'id':_0x53120a['id']}});if(_0x76ae31){const _0x3279f1=JSON['parse'](_0x76ae31[_0x27c270(0x123)]);_0xb6a38={'quoted':{'key':_0x3279f1[_0x27c270(0x100)],'message':{'extendedTextMessage':_0x3279f1[_0x27c270(0x115)][_0x27c270(0x114)]}}};}}if(!(0x0,lodash_1[_0x27c270(0x122)])(_0x27f59)){const _0x170f08=_0x27f59[_0x27c270(0x118)],_0x15bf2a=_0x27f59[_0x27c270(0x125)][_0x27c270(0x129)]('\x20')[0x0],_0x39befc=String(_0x27f59[_0x27c270(0x125)])[_0x27c270(0xfe)](_0x27f59[_0x27c270(0x125)][_0x27c270(0x129)]('\x20')[0x0],''),_0x18c5ab='BEGIN:VCARD\x0a'+'VERSION:3.0\x0a'+('N:'+_0x39befc+';'+_0x15bf2a+';;;\x0a')+('FN:'+_0x27f59[_0x27c270(0x125)]+'\x0a')+(_0x27c270(0x127)+_0x170f08+':+'+_0x170f08+'\x0a')+'END:VCARD';console[_0x27c270(0x10b)](_0x18c5ab);try{await(0x0,baileys_1[_0x27c270(0x128)])(_0x22cd86);const _0x248a51=await _0x4b6871[_0x27c270(0x126)](_0x3bf95f,{'contacts':{'displayName':''+_0x27f59[_0x27c270(0x125)],'contacts':[{'vcard':_0x18c5ab}]}});return await _0x40be78['update']({'lastMessage':(0x0,Mustache_1[_0x27c270(0x102)])(_0x18c5ab,_0x40be78),'imported':null}),_0x248a51;}catch(_0x211766){Sentry[_0x27c270(0x112)](_0x211766),console['log'](_0x211766);throw new AppError_1['default'](_0x27c270(0x12a));}};try{await(0x0,baileys_1[_0x27c270(0x128)])(_0x22cd86);const _0x2cddd1=await _0x4b6871[_0x27c270(0x126)](_0x3bf95f,{'text':(0x0,Mustache_1[_0x27c270(0x102)])(_0xd9a8fb?'‚Äç'+_0x5d0718:_0x5d0718,_0x40be78)},{..._0xb6a38});return await _0x40be78[_0x27c270(0x108)]({'lastMessage':(0x0,Mustache_1[_0x27c270(0x102)])(_0x5d0718,_0x40be78),'imported':null}),_0x2cddd1;}catch(_0x4cae1f){Sentry[_0x27c270(0x112)](_0x4cae1f),console[_0x27c270(0x10b)](_0x4cae1f);throw new AppError_1[(_0x27c270(0x102))]('ERR_SENDING_WAPP_MSG');}};exports[a545_0x5412bb(0x102)]=SendWhatsAppMessage;