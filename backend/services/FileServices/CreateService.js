'use strict';const a435_0x58abe4=a435_0x33fe;function a435_0x5e59(){const _0x38f5a5=['writable','length','__esModule','46jzNPRq','13278LOfHzP','../../models/Files','9121AjFVdj','default','validate','yup','Check-unique-name','230AGtEfr','getOwnPropertyDescriptor','../../models/FilesOptions','defineProperty','ERR_RATING_NAME_ALREADY_EXISTS','hasOwnProperty','shape','findOne','123055FUgAHH','2734908DIhWFy','call','string','min','test','message','get','311344SnOUSg','13804650NksjZl','1551072HQANwJ','prototype','__setModuleDefault','414xZXQNz','create','required','__createBinding','1432JXagTA'];a435_0x5e59=function(){return _0x38f5a5;};return a435_0x5e59();}(function(_0x4007be,_0x1e19f7){const _0x6d7613=a435_0x33fe,_0x40e7c1=_0x4007be();while(!![]){try{const _0x5d6258=parseInt(_0x6d7613(0x180))/0x1*(-parseInt(_0x6d7613(0x17f))/0x2)+parseInt(_0x6d7613(0x190))/0x3+-parseInt(_0x6d7613(0x199))/0x4+-parseInt(_0x6d7613(0x18f))/0x5*(parseInt(_0x6d7613(0x19c))/0x6)+-parseInt(_0x6d7613(0x182))/0x7*(-parseInt(_0x6d7613(0x1a0))/0x8)+parseInt(_0x6d7613(0x198))/0x9+parseInt(_0x6d7613(0x187))/0xa*(parseInt(_0x6d7613(0x197))/0xb);if(_0x5d6258===_0x1e19f7)break;else _0x40e7c1['push'](_0x40e7c1['shift']());}catch(_0x15634e){_0x40e7c1['push'](_0x40e7c1['shift']());}}}(a435_0x5e59,0xe519a));function a435_0x33fe(_0x208681,_0x2b608b){const _0x5e59fa=a435_0x5e59();return a435_0x33fe=function(_0x33fe38,_0x82cabb){_0x33fe38=_0x33fe38-0x17e;let _0x106118=_0x5e59fa[_0x33fe38];return _0x106118;},a435_0x33fe(_0x208681,_0x2b608b);}var __createBinding=this&&this[a435_0x58abe4(0x19f)]||(Object[a435_0x58abe4(0x19d)]?function(_0x991118,_0x304335,_0x2af89d,_0x3ae9d1){const _0x4262b0=a435_0x58abe4;if(_0x3ae9d1===undefined)_0x3ae9d1=_0x2af89d;var _0x3bdb4e=Object[_0x4262b0(0x188)](_0x304335,_0x2af89d);(!_0x3bdb4e||(_0x4262b0(0x196)in _0x3bdb4e?!_0x304335['__esModule']:_0x3bdb4e[_0x4262b0(0x1a1)]||_0x3bdb4e['configurable']))&&(_0x3bdb4e={'enumerable':!![],'get':function(){return _0x304335[_0x2af89d];}}),Object['defineProperty'](_0x991118,_0x3ae9d1,_0x3bdb4e);}:function(_0x56117e,_0x5bc1cf,_0x32c945,_0x48715f){if(_0x48715f===undefined)_0x48715f=_0x32c945;_0x56117e[_0x48715f]=_0x5bc1cf[_0x32c945];}),__setModuleDefault=this&&this[a435_0x58abe4(0x19b)]||(Object[a435_0x58abe4(0x19d)]?function(_0x15501f,_0x52c303){const _0x228d76=a435_0x58abe4;Object[_0x228d76(0x18a)](_0x15501f,'default',{'enumerable':!![],'value':_0x52c303});}:function(_0x277051,_0x4ec366){const _0x237779=a435_0x58abe4;_0x277051[_0x237779(0x183)]=_0x4ec366;}),__importStar=this&&this['__importStar']||function(_0x54650f){const _0x4f7133=a435_0x58abe4;if(_0x54650f&&_0x54650f[_0x4f7133(0x17e)])return _0x54650f;var _0x233b8e={};if(_0x54650f!=null){for(var _0xb8d8fc in _0x54650f)if(_0xb8d8fc!==_0x4f7133(0x183)&&Object[_0x4f7133(0x19a)][_0x4f7133(0x18c)][_0x4f7133(0x191)](_0x54650f,_0xb8d8fc))__createBinding(_0x233b8e,_0x54650f,_0xb8d8fc);}return __setModuleDefault(_0x233b8e,_0x54650f),_0x233b8e;},__importDefault=this&&this['__importDefault']||function(_0x21535c){const _0x3a299e=a435_0x58abe4;return _0x21535c&&_0x21535c[_0x3a299e(0x17e)]?_0x21535c:{'default':_0x21535c};};Object[a435_0x58abe4(0x18a)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a435_0x58abe4(0x185))),AppError_1=__importDefault(require('../../errors/AppError')),Files_1=__importDefault(require(a435_0x58abe4(0x181))),FilesOptions_1=__importDefault(require(a435_0x58abe4(0x189))),ShowService_1=__importDefault(require('./ShowService')),CreateService=async({name:_0xbaae17,message:_0x2111b2,companyId:_0x281ed3,options:_0x7b5434})=>{const _0x253453=a435_0x58abe4,_0x405ad8=Yup['object']()[_0x253453(0x18d)]({'name':Yup[_0x253453(0x192)]()[_0x253453(0x19e)]()[_0x253453(0x193)](0x3)[_0x253453(0x194)](_0x253453(0x186),_0x253453(0x18b),async _0x2715bc=>{const _0x42a50e=_0x253453;if(_0x2715bc){const _0x4b2e9f=await Files_1[_0x42a50e(0x183)][_0x42a50e(0x18e)]({'where':{'name':_0x2715bc,'companyId':_0x281ed3}});return!_0x4b2e9f;}return![];})});try{await _0x405ad8[_0x253453(0x184)]({'name':_0xbaae17});}catch(_0x5daa70){throw new AppError_1[(_0x253453(0x183))](_0x5daa70[_0x253453(0x195)]);}let _0x1f15d5=await Files_1[_0x253453(0x183)][_0x253453(0x19d)]({'name':_0xbaae17,'message':_0x2111b2,'companyId':_0x281ed3});return _0x7b5434&&_0x7b5434[_0x253453(0x1a2)]>0x0&&await Promise['all'](_0x7b5434['map'](async _0x45852f=>{const _0x2e8439=_0x253453;await FilesOptions_1[_0x2e8439(0x183)]['upsert']({..._0x45852f,'fileId':_0x1f15d5['id']});})),_0x1f15d5=await(0x0,ShowService_1[_0x253453(0x183)])(_0x1f15d5['id'],_0x281ed3),_0x1f15d5;};exports['default']=CreateService;