'use strict';function a441_0x219b(){const _0x312714=['findIndex','__importDefault','get','all','map','172442rQAgnO','__setModuleDefault','../../errors/AppError','configurable','5318748QNiJSq','1925816HWHeVM','upsert','name','__importStar','7moJNdp','object','message','78942LxDHnM','string','yup','__createBinding','../../models/FilesOptions','getOwnPropertyDescriptor','create','defineProperty','shape','writable','update','5750608sOnMAN','./ShowService','290vinLHh','367430wwpysZ','default','reload','__esModule','2082195oOExuE','options','prototype','hasOwnProperty'];a441_0x219b=function(){return _0x312714;};return a441_0x219b();}const a441_0x5eff7f=a441_0x330c;(function(_0x3ce4b2,_0x5a03e7){const _0xe32595=a441_0x330c,_0x5a09e0=_0x3ce4b2();while(!![]){try{const _0x27638e=-parseInt(_0xe32595(0x1b8))/0x1+-parseInt(_0xe32595(0x1ab))/0x2+-parseInt(_0xe32595(0x1af))/0x3+-parseInt(_0xe32595(0x1bd))/0x4+parseInt(_0xe32595(0x1aa))/0x5*(parseInt(_0xe32595(0x1c4))/0x6)+-parseInt(_0xe32595(0x1c1))/0x7*(-parseInt(_0xe32595(0x1a8))/0x8)+parseInt(_0xe32595(0x1bc))/0x9;if(_0x27638e===_0x5a03e7)break;else _0x5a09e0['push'](_0x5a09e0['shift']());}catch(_0x43ff7e){_0x5a09e0['push'](_0x5a09e0['shift']());}}}(a441_0x219b,0x8422c));var __createBinding=this&&this[a441_0x5eff7f(0x1a0)]||(Object['create']?function(_0x21825e,_0x439e0e,_0x4c8e08,_0x561429){const _0x539610=a441_0x5eff7f;if(_0x561429===undefined)_0x561429=_0x4c8e08;var _0xb16977=Object[_0x539610(0x1a2)](_0x439e0e,_0x4c8e08);(!_0xb16977||(_0x539610(0x1b5)in _0xb16977?!_0x439e0e['__esModule']:_0xb16977[_0x539610(0x1a6)]||_0xb16977[_0x539610(0x1bb)]))&&(_0xb16977={'enumerable':!![],'get':function(){return _0x439e0e[_0x4c8e08];}}),Object[_0x539610(0x1a4)](_0x21825e,_0x561429,_0xb16977);}:function(_0x361208,_0x60770f,_0x2d9246,_0x476f89){if(_0x476f89===undefined)_0x476f89=_0x2d9246;_0x361208[_0x476f89]=_0x60770f[_0x2d9246];}),__setModuleDefault=this&&this[a441_0x5eff7f(0x1b9)]||(Object[a441_0x5eff7f(0x1a3)]?function(_0x5884a0,_0x349f38){const _0x2b0d53=a441_0x5eff7f;Object[_0x2b0d53(0x1a4)](_0x5884a0,_0x2b0d53(0x1ac),{'enumerable':!![],'value':_0x349f38});}:function(_0x395e2d,_0x5b1b20){const _0x2a78eb=a441_0x5eff7f;_0x395e2d[_0x2a78eb(0x1ac)]=_0x5b1b20;}),__importStar=this&&this[a441_0x5eff7f(0x1c0)]||function(_0x3d3c47){const _0x1b180a=a441_0x5eff7f;if(_0x3d3c47&&_0x3d3c47[_0x1b180a(0x1ae)])return _0x3d3c47;var _0x20e51c={};if(_0x3d3c47!=null){for(var _0x3db2ff in _0x3d3c47)if(_0x3db2ff!==_0x1b180a(0x1ac)&&Object[_0x1b180a(0x1b1)][_0x1b180a(0x1b2)]['call'](_0x3d3c47,_0x3db2ff))__createBinding(_0x20e51c,_0x3d3c47,_0x3db2ff);}return __setModuleDefault(_0x20e51c,_0x3d3c47),_0x20e51c;},__importDefault=this&&this[a441_0x5eff7f(0x1b4)]||function(_0x5ebdc1){const _0x24f185=a441_0x5eff7f;return _0x5ebdc1&&_0x5ebdc1[_0x24f185(0x1ae)]?_0x5ebdc1:{'default':_0x5ebdc1};};function a441_0x330c(_0x1998de,_0x2e79dd){const _0x219bbf=a441_0x219b();return a441_0x330c=function(_0x330c7c,_0x223ba5){_0x330c7c=_0x330c7c-0x1a0;let _0x319d26=_0x219bbf[_0x330c7c];return _0x319d26;},a441_0x330c(_0x1998de,_0x2e79dd);}Object[a441_0x5eff7f(0x1a4)](exports,a441_0x5eff7f(0x1ae),{'value':!![]});const Yup=__importStar(require(a441_0x5eff7f(0x1c6))),AppError_1=__importDefault(require(a441_0x5eff7f(0x1ba))),FilesOptions_1=__importDefault(require(a441_0x5eff7f(0x1a1))),ShowService_1=__importDefault(require(a441_0x5eff7f(0x1a9))),UpdateService=async({fileData:_0x3a6253,id:_0x3f7eff,companyId:_0x46a383})=>{const _0x395872=a441_0x5eff7f,_0x4a81f3=await(0x0,ShowService_1['default'])(_0x3f7eff,_0x46a383),_0x1a3e03=Yup[_0x395872(0x1c2)]()[_0x395872(0x1a5)]({'name':Yup[_0x395872(0x1c5)]()['min'](0x3)}),{name:_0x5c3a8c,message:_0x417d8a,options:_0x1d2397}=_0x3a6253;try{await _0x1a3e03['validate']({'name':_0x5c3a8c});}catch(_0x193544){throw new AppError_1[(_0x395872(0x1ac))](_0x193544[_0x395872(0x1c3)]);}return _0x1d2397&&(await Promise[_0x395872(0x1b6)](_0x1d2397[_0x395872(0x1b7)](async _0x5b8eb8=>{const _0x2d7d0b=_0x395872;await FilesOptions_1[_0x2d7d0b(0x1ac)][_0x2d7d0b(0x1be)]({..._0x5b8eb8,'fileId':_0x4a81f3['id']});})),await Promise[_0x395872(0x1b6)](_0x4a81f3[_0x395872(0x1b0)][_0x395872(0x1b7)](async _0x542847=>{const _0x4c67bd=_0x395872,_0x2bcc57=_0x1d2397[_0x4c67bd(0x1b3)](_0x2bf2ed=>_0x2bf2ed['id']===_0x542847['id']);_0x2bcc57===-0x1&&await FilesOptions_1[_0x4c67bd(0x1ac)]['destroy']({'where':{'id':_0x542847['id']}});}))),await _0x4a81f3[_0x395872(0x1a7)]({'name':_0x5c3a8c,'message':_0x417d8a}),await _0x4a81f3[_0x395872(0x1ad)]({'attributes':['id',_0x395872(0x1bf),_0x395872(0x1c3),'companyId'],'include':[_0x395872(0x1b0)]}),_0x4a81f3;};exports[a441_0x5eff7f(0x1ac)]=UpdateService;