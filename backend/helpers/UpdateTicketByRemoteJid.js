'use strict';const a252_0x32e23e=a252_0x5edd;(function(_0x18b911,_0x567ce0){const _0x377745=a252_0x5edd,_0x2f12fe=_0x18b911();while(!![]){try{const _0x8e20bf=-parseInt(_0x377745(0x1c6))/0x1+parseInt(_0x377745(0x1e6))/0x2*(-parseInt(_0x377745(0x1e9))/0x3)+-parseInt(_0x377745(0x1e2))/0x4*(parseInt(_0x377745(0x1eb))/0x5)+parseInt(_0x377745(0x1c8))/0x6*(parseInt(_0x377745(0x1ca))/0x7)+-parseInt(_0x377745(0x1d3))/0x8*(-parseInt(_0x377745(0x1c9))/0x9)+-parseInt(_0x377745(0x1dd))/0xa*(-parseInt(_0x377745(0x1c5))/0xb)+parseInt(_0x377745(0x1ed))/0xc*(parseInt(_0x377745(0x1de))/0xd);if(_0x8e20bf===_0x567ce0)break;else _0x2f12fe['push'](_0x2f12fe['shift']());}catch(_0x3d6f7d){_0x2f12fe['push'](_0x2f12fe['shift']());}}}(a252_0xf08b,0x410ca));var __importDefault=this&&this['__importDefault']||function(_0x533be0){const _0x36b40f=a252_0x5edd;return _0x533be0&&_0x533be0[_0x36b40f(0x1da)]?_0x533be0:{'default':_0x533be0};};Object[a252_0x32e23e(0x1d8)](exports,a252_0x32e23e(0x1da),{'value':!![]}),exports[a252_0x32e23e(0x1ea)]=void 0x0;function a252_0xf08b(){const _0xaa7d8a=['../models/Queue','4904zJzizW','color','forEach','findAndCountAll','default','defineProperty','log','__esModule','queue','../models/User','10WbLlzL','26533VZkiOO','createdAt','sequelize','number','752PAkYhw','../libs/socket','status','contact','1036340cfNdyR','whatsapp','findOne','3IyIqyH','updateTicketByRemoteJid','6470xawTYA','DESC','5436CjobBo','toString','-ticket','1600291vexDYy','394021bStsme','companyId','336156BuVEFL','1053VtnISq','35KTOZxs','tags','update','name','extraInfo','../models/Message','company-','user'];a252_0xf08b=function(){return _0xaa7d8a;};return a252_0xf08b();}function a252_0x5edd(_0x19d463,_0x49d7e6){const _0xf08b47=a252_0xf08b();return a252_0x5edd=function(_0x5eddfe,_0x23df48){_0x5eddfe=_0x5eddfe-0x1c3;let _0x4e7858=_0xf08b47[_0x5eddfe];return _0x4e7858;},a252_0x5edd(_0x19d463,_0x49d7e6);}const Message_1=__importDefault(require(a252_0x32e23e(0x1cf))),Ticket_1=__importDefault(require('../models/Ticket')),sequelize_1=require(a252_0x32e23e(0x1e0)),socket_1=require(a252_0x32e23e(0x1e3)),Contact_1=__importDefault(require('../models/Contact')),User_1=__importDefault(require(a252_0x32e23e(0x1dc))),Queue_1=__importDefault(require(a252_0x32e23e(0x1d2))),Whatsapp_1=__importDefault(require('../models/Whatsapp')),Tag_1=__importDefault(require('../models/Tag')),updateTicketByRemoteJid=async(_0x270f9b,_0x34440f,_0x2fb73c,_0x242535,_0x462e31)=>{const _0x5b84d1=a252_0x32e23e,{rows:_0x5975b8}=await Message_1[_0x5b84d1(0x1d7)][_0x5b84d1(0x1d6)]({'limit':0x1,'order':[[_0x5b84d1(0x1df),_0x5b84d1(0x1ec)]],'where':{'remoteJid':{[sequelize_1['Op']['like']]:'%'+_0x270f9b+'%'}}});console[_0x5b84d1(0x1d9)](_0x5975b8),_0x5975b8[_0x5b84d1(0x1d5)](async _0x5dcd5f=>{const _0xa1f997=_0x5b84d1;let _0x44ac5d=_0x5dcd5f['ticketId'],_0x1d16f6=await Ticket_1['default'][_0xa1f997(0x1e8)]({'where':{'id':_0x44ac5d},'include':[{'model':Contact_1[_0xa1f997(0x1d7)],'as':_0xa1f997(0x1e5),'attributes':['id','name',_0xa1f997(0x1e1),'profilePicUrl'],'include':[_0xa1f997(0x1ce)]},{'model':User_1[_0xa1f997(0x1d7)],'as':'user','attributes':['id','name']},{'model':Queue_1['default'],'as':_0xa1f997(0x1db),'attributes':['id',_0xa1f997(0x1cd),_0xa1f997(0x1d4)]},{'model':Whatsapp_1[_0xa1f997(0x1d7)],'as':_0xa1f997(0x1e7),'attributes':[_0xa1f997(0x1cd)]},{'model':Tag_1[_0xa1f997(0x1d7)],'as':_0xa1f997(0x1cb),'attributes':['id',_0xa1f997(0x1cd),'color']}]});const _0x36684d=_0x1d16f6[_0xa1f997(0x1e4)],_0x18bf82=_0x1d16f6[_0xa1f997(0x1d1)]?.['id'];await _0x1d16f6[_0xa1f997(0x1cc)]({'status':_0x242535,'queueId':_0x34440f,'userId':_0x2fb73c,'unreadMessages':_0x462e31});const _0x336136=(0x0,socket_1['getIO'])();_0x336136['to'](_0x1d16f6['id'][_0xa1f997(0x1c3)]())['emit'](_0xa1f997(0x1d0)+_0x1d16f6[_0xa1f997(0x1c7)]+_0xa1f997(0x1c4),{'action':_0xa1f997(0x1cc),'ticket':_0x1d16f6});});return;};exports['updateTicketByRemoteJid']=updateTicketByRemoteJid;