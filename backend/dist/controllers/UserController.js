'use strict';const a36_0x2ec927=a36_0x3e0c;(function(_0x566723,_0x1ec1d3){const _0x36a5cc=a36_0x3e0c,_0x1e83ca=_0x566723();while(!![]){try{const _0x258ec2=parseInt(_0x36a5cc(0x139))/0x1+parseInt(_0x36a5cc(0x15a))/0x2+parseInt(_0x36a5cc(0x135))/0x3*(-parseInt(_0x36a5cc(0x172))/0x4)+parseInt(_0x36a5cc(0x138))/0x5*(-parseInt(_0x36a5cc(0x13b))/0x6)+-parseInt(_0x36a5cc(0x12d))/0x7+-parseInt(_0x36a5cc(0x16e))/0x8+parseInt(_0x36a5cc(0x146))/0x9;if(_0x258ec2===_0x1ec1d3)break;else _0x1e83ca['push'](_0x1e83ca['shift']());}catch(_0x21f0ab){_0x1e83ca['push'](_0x1e83ca['shift']());}}}(a36_0x15a8,0xaa080));var __importDefault=this&&this[a36_0x2ec927(0x150)]||function(_0x9629aa){const _0x48dcf0=a36_0x2ec927;return _0x9629aa&&_0x9629aa[_0x48dcf0(0x157)]?_0x9629aa:{'default':_0x9629aa};};Object['defineProperty'](exports,a36_0x2ec927(0x157),{'value':!![]}),exports[a36_0x2ec927(0x148)]=exports[a36_0x2ec927(0x16f)]=exports[a36_0x2ec927(0x129)]=exports['update']=exports['show']=exports[a36_0x2ec927(0x16b)]=exports[a36_0x2ec927(0x178)]=void 0x0;const socket_1=require(a36_0x2ec927(0x13c)),lodash_1=require(a36_0x2ec927(0x16a)),CheckSettings_1=__importDefault(require('../helpers/CheckSettings')),AppError_1=__importDefault(require(a36_0x2ec927(0x12b))),CreateUserService_1=__importDefault(require(a36_0x2ec927(0x154))),ListUsersService_1=__importDefault(require(a36_0x2ec927(0x149))),UpdateUserService_1=__importDefault(require(a36_0x2ec927(0x12e))),ShowUserService_1=__importDefault(require('../services/UserServices/ShowUserService')),DeleteUserService_1=__importDefault(require('../services/UserServices/DeleteUserService')),SimpleListService_1=__importDefault(require('../services/UserServices/SimpleListService')),CreateCompanyService_1=__importDefault(require(a36_0x2ec927(0x144))),SendMail_1=require(a36_0x2ec927(0x142)),useDate_1=require(a36_0x2ec927(0x134)),ShowCompanyService_1=__importDefault(require(a36_0x2ec927(0x12c))),wbot_1=require(a36_0x2ec927(0x132)),FindCompaniesWhatsappService_1=__importDefault(require(a36_0x2ec927(0x153))),User_1=__importDefault(require(a36_0x2ec927(0x159))),lodash_2=require('lodash'),index=async(_0x51a83b,_0x5ef129)=>{const _0x506de9=a36_0x2ec927,{searchParam:_0x448498,pageNumber:_0x347eb7}=_0x51a83b['query'],{companyId:_0x30219d,profile:_0x23bfc2}=_0x51a83b['user'],{users:_0x148dee,count:_0x1b6a7d,hasMore:_0x183a7b}=await(0x0,ListUsersService_1[_0x506de9(0x165)])({'searchParam':_0x448498,'pageNumber':_0x347eb7,'companyId':_0x30219d,'profile':_0x23bfc2});return _0x5ef129[_0x506de9(0x15e)]({'users':_0x148dee,'count':_0x1b6a7d,'hasMore':_0x183a7b});};exports[a36_0x2ec927(0x178)]=index;const store=async(_0x3a8603,_0x10f32e)=>{const _0x58352d=a36_0x2ec927,{email:_0x5db2dd,password:_0x3268eb,name:_0x1e3819,phone:_0x141896,profile:_0x810143,companyId:_0x5474c7,queueIds:_0x4771fe,companyName:_0x5b0da7,planId:_0x10bde3,startWork:_0x13dd48,endWork:_0x1e198d,whatsappId:_0x492683,allTicket:_0xbc7730,defaultTheme:_0x2858e7,defaultMenu:_0x4c7c6c,allowGroup:_0x595be3}=_0x3a8603[_0x58352d(0x14f)];let _0x25c583=null;const {dateToClient:_0xf4be3}=(0x0,useDate_1[_0x58352d(0x14b)])();if(_0x3a8603['user']!==undefined){const {companyId:_0x52289b}=_0x3a8603[_0x58352d(0x173)];_0x25c583=_0x52289b;}if(_0x3a8603['url']===_0x58352d(0x140)&&await(0x0,CheckSettings_1[_0x58352d(0x165)])(_0x58352d(0x152))===_0x58352d(0x143))throw new AppError_1['default'](_0x58352d(0x13f),0x193);else{if(_0x3a8603['url']!==_0x58352d(0x140)&&_0x3a8603[_0x58352d(0x173)][_0x58352d(0x156)]!==_0x58352d(0x162))throw new AppError_1[(_0x58352d(0x165))](_0x58352d(0x161),0x193);}if(process['env'][_0x58352d(0x163)]==='ON')throw new AppError_1[(_0x58352d(0x165))](_0x58352d(0x161),0x193);const _0x5f8fb3=_0x5474c7||_0x25c583;if(!_0x5f8fb3){const _0x3d2aca=new Date();_0x3d2aca[_0x58352d(0x175)](_0x3d2aca[_0x58352d(0x169)]()+0x3);const _0x5c1132=_0x3d2aca['toISOString']()[_0x58352d(0x164)]('T')[0x0],_0x15fe0d={'name':_0x5b0da7,'email':_0x5db2dd,'phone':_0x141896,'planId':_0x10bde3,'status':!![],'dueDate':_0x5c1132,'recurrence':'','document':'','paymentMethod':'','password':_0x3268eb,'companyUserName':_0x1e3819,'startWork':_0x13dd48,'endWork':_0x1e198d,'defaultTheme':'light','defaultMenu':_0x58352d(0x174),'allowGroup':![]},_0x116eed=await(0x0,CreateCompanyService_1[_0x58352d(0x165)])(_0x15fe0d);try{const _0x20304f={'to':_0x5db2dd,'subject':'Login\x20e\x20senha\x20da\x20Empresa\x20'+_0x5b0da7,'text':_0x58352d(0x168)+_0x1e3819+_0x58352d(0x158)+_0x5b0da7+'!<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20Segue\x20os\x20dados\x20da\x20sua\x20empresa:<br><br>Nome:\x20'+_0x5b0da7+_0x58352d(0x177)+_0x5db2dd+_0x58352d(0x179)+_0x3268eb+_0x58352d(0x147)+_0xf4be3(_0x5c1132)};await(0x0,SendMail_1[_0x58352d(0x12f)])(_0x20304f);}catch(_0x7d1913){console['log']('Não\x20consegui\x20enviar\x20o\x20email');}try{const _0x205175=await(0x0,ShowCompanyService_1[_0x58352d(0x165)])(0x1),_0xb206d1=await(0x0,FindCompaniesWhatsappService_1[_0x58352d(0x165)])(_0x205175['id']);if(_0xb206d1[_0x58352d(0x131)][0x0][_0x58352d(0x130)]===_0x58352d(0x12a)&&(_0x141896!==undefined||!(0x0,lodash_1[_0x58352d(0x16c)])(_0x141896)||!(0x0,lodash_1['isEmpty'])(_0x141896))){const _0x53b815=_0xb206d1[_0x58352d(0x131)][0x0]['id'],_0xeb6f21=(0x0,wbot_1['getWbot'])(_0x53b815),_0xcd82ec=_0x58352d(0x168)+_0x1e3819+',\x20este\x20é\x20uma\x20mensagem\x20sobre\x20o\x20cadastro\x20da\x20'+_0x5b0da7+'!\x0a\x0aSegue\x20os\x20dados\x20da\x20sua\x20empresa:\x0a\x0aNome:\x20'+_0x5b0da7+_0x58352d(0x14d)+_0x5db2dd+_0x58352d(0x13a)+_0x3268eb+_0x58352d(0x167)+_0xf4be3(_0x5c1132);await _0xeb6f21[_0x58352d(0x15b)]('55'+_0x141896+_0x58352d(0x151),{'text':_0xcd82ec});}}catch(_0x33f057){console[_0x58352d(0x17a)](_0x58352d(0x13d));}return _0x10f32e[_0x58352d(0x130)](0xc8)['json'](_0x116eed);}if(_0x5f8fb3){const _0x290436=await(0x0,CreateUserService_1[_0x58352d(0x165)])({'email':_0x5db2dd,'password':_0x3268eb,'name':_0x1e3819,'profile':_0x810143,'companyId':_0x5f8fb3,'queueIds':_0x4771fe,'startWork':_0x13dd48,'endWork':_0x1e198d,'whatsappId':_0x492683,'allTicket':_0xbc7730,'defaultTheme':_0x2858e7,'defaultMenu':_0x4c7c6c,'allowGroup':_0x595be3}),_0x4c601f=(0x0,socket_1[_0x58352d(0x13e)])();return _0x4c601f[_0x58352d(0x15c)](_0x58352d(0x136)+_0x25c583+_0x58352d(0x160),{'action':_0x58352d(0x141),'user':_0x290436}),_0x10f32e['status'](0xc8)[_0x58352d(0x15e)](_0x290436);}};exports[a36_0x2ec927(0x16b)]=store;const show=async(_0x5a317e,_0x30643b)=>{const _0x51f4a7=a36_0x2ec927,{userId:_0x46a476}=_0x5a317e['params'],_0xafc9dd=await(0x0,ShowUserService_1[_0x51f4a7(0x165)])(_0x46a476);return _0x30643b['status'](0xc8)[_0x51f4a7(0x15e)](_0xafc9dd);};exports[a36_0x2ec927(0x133)]=show;const update=async(_0x4899c8,_0x4a2f6b)=>{const _0x4da947=a36_0x2ec927;if(process[_0x4da947(0x15d)][_0x4da947(0x163)]==='ON')throw new AppError_1[(_0x4da947(0x165))](_0x4da947(0x161),0x193);const {id:_0x17ec20,companyId:_0x5ba537}=_0x4899c8[_0x4da947(0x173)],{userId:_0x3dbe31}=_0x4899c8['params'],_0x5692ea=_0x4899c8['body'],_0x27742b=await(0x0,UpdateUserService_1['default'])({'userData':_0x5692ea,'userId':_0x3dbe31,'companyId':_0x5ba537,'requestUserId':+_0x17ec20}),_0x4cb239=(0x0,socket_1[_0x4da947(0x13e)])();return _0x4cb239[_0x4da947(0x15c)](_0x4da947(0x136)+_0x5ba537+_0x4da947(0x160),{'action':_0x4da947(0x14a),'user':_0x27742b}),_0x4a2f6b[_0x4da947(0x130)](0xc8)[_0x4da947(0x15e)](_0x27742b);};function a36_0x3e0c(_0x462769,_0x5cbd10){const _0x15a811=a36_0x15a8();return a36_0x3e0c=function(_0x3e0c4c,_0x43b0e4){_0x3e0c4c=_0x3e0c4c-0x129;let _0x386bec=_0x15a811[_0x3e0c4c];return _0x386bec;},a36_0x3e0c(_0x462769,_0x5cbd10);}exports[a36_0x2ec927(0x14a)]=update;const remove=async(_0x3cdc49,_0x390c60)=>{const _0xcea307=a36_0x2ec927,{userId:_0x285058}=_0x3cdc49[_0xcea307(0x15f)],{companyId:_0x10fed1,id:_0x25b42a,profile:_0x6f78ba}=_0x3cdc49[_0xcea307(0x173)];if(_0x6f78ba!==_0xcea307(0x162))throw new AppError_1[(_0xcea307(0x165))](_0xcea307(0x161),0x193);if(process['env'][_0xcea307(0x163)]==='ON')throw new AppError_1['default'](_0xcea307(0x161),0x193);const _0x8ba812=await User_1[_0xcea307(0x165)][_0xcea307(0x137)]({'where':{'id':_0x285058}});if(_0x10fed1!==_0x8ba812[_0xcea307(0x14c)])return _0x390c60[_0xcea307(0x130)](0x190)[_0xcea307(0x15e)]({'error':'Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!'});else{await(0x0,DeleteUserService_1[_0xcea307(0x165)])(_0x285058,_0x10fed1);const _0x42298a=(0x0,socket_1['getIO'])();return _0x42298a['emit'](_0xcea307(0x136)+_0x10fed1+_0xcea307(0x160),{'action':'delete','userId':_0x285058}),_0x390c60[_0xcea307(0x130)](0xc8)[_0xcea307(0x15e)]({'message':_0xcea307(0x14e)});}};function a36_0x15a8(){const _0x34160b=['\x0aEmail:\x20','User\x20deleted','body','__importDefault','@s.whatsapp.net','userCreation','../services/CompanyService/FindCompaniesWhatsappService','../services/UserServices/CreateUserService','replace','profile','__esModule',',\x20este\x20é\x20um\x20email\x20sobre\x20o\x20cadastro\x20da\x20','../models/User','301548bRgQqo','sendMessage','emit','env','json','params','-user','ERR_NO_PERMISSION','admin','DEMO','split','default','files','\x0aData\x20Vencimento\x20Trial:\x20','Olá\x20','getDate','lodash','store','isNil','Imagem\x20atualizada','10640584NiGELD','list','save','findByPk','28GVRWaV','user','closed','setDate','query','<br>Email:\x20','index','<br>Senha:\x20','log','remove','CONNECTED','../errors/AppError','../services/CompanyService/ShowCompanyService','2472757wlgdXJ','../services/UserServices/UpdateUserService','SendMail','status','whatsapps','../libs/wbot','show','../utils/useDate','215889bQveRv','company-','findOne','1973165WWGLbD','45417sHpzVT','\x0aSenha:\x20','6bMKOpr','../libs/socket','Não\x20consegui\x20enviar\x20a\x20mensagem','getIO','ERR_USER_CREATION_DISABLED','/signup','create','../helpers/SendMail','disabled','../services/CompanyService/CreateCompanyService','profileImage','27737595Zwnyzs','<br>Data\x20Vencimento\x20Trial:\x20','mediaUpload','../services/UserServices/ListUsersService','update','useDate','companyId'];a36_0x15a8=function(){return _0x34160b;};return a36_0x15a8();}exports[a36_0x2ec927(0x129)]=remove;const list=async(_0x2878d5,_0x1b1988)=>{const _0x4034c6=a36_0x2ec927,{companyId:_0x569a36}=_0x2878d5[_0x4034c6(0x176)],{companyId:_0x358391}=_0x2878d5[_0x4034c6(0x173)],_0x2a2d5d=await(0x0,SimpleListService_1[_0x4034c6(0x165)])({'companyId':_0x569a36?+_0x569a36:_0x358391});return _0x1b1988[_0x4034c6(0x130)](0xc8)[_0x4034c6(0x15e)](_0x2a2d5d);};exports['list']=list;const mediaUpload=async(_0x199c5c,_0x105a0a)=>{const _0x1a998c=a36_0x2ec927,{userId:_0x1bdbd7}=_0x199c5c[_0x1a998c(0x15f)],_0x26022a=_0x199c5c[_0x1a998c(0x166)],_0x2816fb=(0x0,lodash_2['head'])(_0x26022a);try{const _0x31303e=await User_1[_0x1a998c(0x165)][_0x1a998c(0x171)](_0x1bdbd7);return _0x31303e[_0x1a998c(0x145)]=_0x2816fb['filename'][_0x1a998c(0x155)]('/','-'),await _0x31303e[_0x1a998c(0x170)](),_0x105a0a['status'](0xc8)[_0x1a998c(0x15e)]({'user':_0x31303e,'message':_0x1a998c(0x16d)});}catch(_0x567308){throw new AppError_1[(_0x1a998c(0x165))](_0x567308['message']);}};exports['mediaUpload']=mediaUpload;