'use strict';const a39_0x2ae9bd=a39_0x4ff5;(function(_0x4f9594,_0x43a133){const _0x2e807d=a39_0x4ff5,_0x324c77=_0x4f9594();while(!![]){try{const _0xd60658=parseInt(_0x2e807d(0xbc))/0x1*(-parseInt(_0x2e807d(0xb6))/0x2)+parseInt(_0x2e807d(0x7d))/0x3*(-parseInt(_0x2e807d(0x9a))/0x4)+-parseInt(_0x2e807d(0xcf))/0x5+-parseInt(_0x2e807d(0xc2))/0x6*(-parseInt(_0x2e807d(0x86))/0x7)+parseInt(_0x2e807d(0x87))/0x8+-parseInt(_0x2e807d(0xae))/0x9+-parseInt(_0x2e807d(0x95))/0xa*(-parseInt(_0x2e807d(0xd3))/0xb);if(_0xd60658===_0x43a133)break;else _0x324c77['push'](_0x324c77['shift']());}catch(_0x1b3706){_0x324c77['push'](_0x324c77['shift']());}}}(a39_0x7d25,0x3eda4));function a39_0x7d25(){const _0x53b318=['1645cEkDXr','2525640diNuYC','@s.whatsapp.net','../services/CompanyService/CreateCompanyService','Login\x20e\x20senha\x20da\x20Empresa\x20','../services/UserServices/SimpleListService','mediaUpload','store','company-','Imagem\x20atualizada','profileImage','isNil','sendMessage','Não\x20consegui\x20enviar\x20o\x20email','query','2510iIRadh','<br>Data\x20Vencimento\x20Trial:\x20','params','../services/UserServices/UpdateUserService','toggleChangeWidht','13060LDXdfj','emit','../services/UserServices/ListUsersService','defineProperty','getWbot','../services/CompanyService/FindCompaniesWhatsappService','user','../services/UserServices/CreateUserService','../helpers/CheckSettings','show','../libs/wbot','default',',\x20este\x20é\x20uma\x20mensagem\x20sobre\x20o\x20cadastro\x20da\x20','../errors/AppError','findByPk','../libs/socket','\x0aEmail:\x20','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','CONNECTED','update','277650BzxYjZ','<br>Senha:\x20','__importDefault','../helpers/SendMail','profile','lodash','\x0aSenha:\x20','whatsapps','656836fzfxPj','SendMail','!<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20Segue\x20os\x20dados\x20da\x20sua\x20empresa:<br><br>Nome:\x20','disabled','list','userCreation','1ZsLboa','ERR_NO_PERMISSION','enabled','../services/UserServices/DeleteUserService','!\x0a\x0aSegue\x20os\x20dados\x20da\x20sua\x20empresa:\x0a\x0aNome:\x20','isEmpty','5334UiwpiS','closed','Não\x20consegui\x20enviar\x20a\x20mensagem','toISOString','env','delete','head','body','Olá\x20','../services/CompanyService/ShowCompanyService','companyId','files','status','2349710EGvraC','/signup','<br>Email:\x20','DEMO','39369IAlAaQ','useDate','log','light','../models/User','../services/UserServices/ToggleChangeWidthService',',\x20este\x20é\x20um\x20email\x20sobre\x20o\x20cadastro\x20da\x20','getIO','309esrIZa','create','getDate','ERR_USER_CREATION_DISABLED','remove','json','-user','__esModule','index'];a39_0x7d25=function(){return _0x53b318;};return a39_0x7d25();}var __importDefault=this&&this[a39_0x2ae9bd(0xb0)]||function(_0x438195){return _0x438195&&_0x438195['__esModule']?_0x438195:{'default':_0x438195};};Object[a39_0x2ae9bd(0x9d)](exports,a39_0x2ae9bd(0x84),{'value':!![]}),exports['toggleChangeWidht']=exports['mediaUpload']=exports['list']=exports['remove']=exports[a39_0x2ae9bd(0xad)]=exports[a39_0x2ae9bd(0xa3)]=exports[a39_0x2ae9bd(0x8d)]=exports[a39_0x2ae9bd(0x85)]=void 0x0;const socket_1=require(a39_0x2ae9bd(0xa9)),lodash_1=require(a39_0x2ae9bd(0xb3)),CheckSettings_1=__importDefault(require(a39_0x2ae9bd(0xa2))),AppError_1=__importDefault(require(a39_0x2ae9bd(0xa7))),CreateUserService_1=__importDefault(require(a39_0x2ae9bd(0xa1))),ListUsersService_1=__importDefault(require(a39_0x2ae9bd(0x9c))),UpdateUserService_1=__importDefault(require(a39_0x2ae9bd(0x98))),ShowUserService_1=__importDefault(require('../services/UserServices/ShowUserService')),DeleteUserService_1=__importDefault(require(a39_0x2ae9bd(0xbf))),SimpleListService_1=__importDefault(require(a39_0x2ae9bd(0x8b))),CreateCompanyService_1=__importDefault(require(a39_0x2ae9bd(0x89))),SendMail_1=require(a39_0x2ae9bd(0xb1)),useDate_1=require('../utils/useDate'),ShowCompanyService_1=__importDefault(require(a39_0x2ae9bd(0xcb))),wbot_1=require(a39_0x2ae9bd(0xa4)),FindCompaniesWhatsappService_1=__importDefault(require(a39_0x2ae9bd(0x9f))),User_1=__importDefault(require(a39_0x2ae9bd(0xd7))),lodash_2=require(a39_0x2ae9bd(0xb3)),ToggleChangeWidthService_1=__importDefault(require(a39_0x2ae9bd(0xd8))),index=async(_0x5a3e83,_0x5f51ec)=>{const _0x5c7e92=a39_0x2ae9bd,{searchParam:_0x4750f5,pageNumber:_0x122dda}=_0x5a3e83[_0x5c7e92(0x94)],{companyId:_0x227c96,profile:_0x6aadc1}=_0x5a3e83[_0x5c7e92(0xa0)],{users:_0x401fd3,count:_0x14ae78,hasMore:_0x3f8475}=await(0x0,ListUsersService_1['default'])({'searchParam':_0x4750f5,'pageNumber':_0x122dda,'companyId':_0x227c96,'profile':_0x6aadc1});return _0x5f51ec[_0x5c7e92(0x82)]({'users':_0x401fd3,'count':_0x14ae78,'hasMore':_0x3f8475});};exports[a39_0x2ae9bd(0x85)]=index;const store=async(_0x194a42,_0x575397)=>{const _0x3493b8=a39_0x2ae9bd,{email:_0x53b9fa,password:_0x105b7a,name:_0xa54072,phone:_0x819eac,profile:_0x55a300,companyId:_0x3d4c1f,queueIds:_0x146fa7,companyName:_0x370609,planId:_0x235ea8,startWork:_0x127151,endWork:_0x20dcc2,whatsappId:_0x2cc332,allTicket:_0x167eb5,defaultTheme:_0xc3a256,defaultMenu:_0x2e375d,allowGroup:_0xba8189,allHistoric:_0x4e9c31,allUserChat:_0x3bb3e9,userClosePendingTicket:_0x291058,showDashboard:_0x265c9f,defaultTicketsManagerWidth:defaultTicketsManagerWidth=0x226}=_0x194a42[_0x3493b8(0xc9)];let _0xcd6641=null;const {dateToClient:_0x34bca0}=(0x0,useDate_1[_0x3493b8(0xd4)])();if(_0x194a42[_0x3493b8(0xa0)]!==undefined){const {companyId:_0x2046d9}=_0x194a42[_0x3493b8(0xa0)];_0xcd6641=_0x2046d9;}if(_0x194a42['url']===_0x3493b8(0xd0)&&await(0x0,CheckSettings_1['default'])(_0x3493b8(0xbb))===_0x3493b8(0xb9))throw new AppError_1[(_0x3493b8(0xa5))](_0x3493b8(0x80),0x193);else{if(_0x194a42['url']!==_0x3493b8(0xd0)&&_0x194a42[_0x3493b8(0xa0)][_0x3493b8(0xb2)]!=='admin')throw new AppError_1[(_0x3493b8(0xa5))](_0x3493b8(0xbd),0x193);}if(process[_0x3493b8(0xc6)]['DEMO']==='ON')throw new AppError_1[(_0x3493b8(0xa5))](_0x3493b8(0xbd),0x193);const _0x28af3e=_0x3d4c1f||_0xcd6641;if(!_0x28af3e){const _0x58d363=new Date();_0x58d363['setDate'](_0x58d363[_0x3493b8(0x7f)]()+0x3);const _0x25657e=_0x58d363[_0x3493b8(0xc5)]()['split']('T')[0x0],_0x165dfa={'name':_0x370609,'email':_0x53b9fa,'phone':_0x819eac,'planId':_0x235ea8,'status':!![],'dueDate':_0x25657e,'recurrence':'','document':'','paymentMethod':'','password':_0x105b7a,'companyUserName':_0xa54072,'startWork':_0x127151,'endWork':_0x20dcc2,'defaultTheme':_0x3493b8(0xd6),'defaultMenu':_0x3493b8(0xc3),'allowGroup':![],'allHistoric':![],'userClosePendingTicket':_0x3493b8(0xbe),'showDashboard':_0x3493b8(0xb9),'defaultTicketsManagerWidth':0x226},_0x42bf2a=await(0x0,CreateCompanyService_1[_0x3493b8(0xa5)])(_0x165dfa);try{const _0x34aa13={'to':_0x53b9fa,'subject':_0x3493b8(0x8a)+_0x370609,'text':_0x3493b8(0xca)+_0xa54072+_0x3493b8(0xd9)+_0x370609+_0x3493b8(0xb8)+_0x370609+_0x3493b8(0xd1)+_0x53b9fa+_0x3493b8(0xaf)+_0x105b7a+_0x3493b8(0x96)+_0x34bca0(_0x25657e)};await(0x0,SendMail_1[_0x3493b8(0xb7)])(_0x34aa13);}catch(_0x3481ee){console[_0x3493b8(0xd5)](_0x3493b8(0x93));}try{const _0x424d04=await(0x0,ShowCompanyService_1[_0x3493b8(0xa5)])(0x1),_0x237f30=await(0x0,FindCompaniesWhatsappService_1['default'])(_0x424d04['id']);if(_0x237f30[_0x3493b8(0xb5)][0x0]['status']===_0x3493b8(0xac)&&(_0x819eac!==undefined||!(0x0,lodash_1[_0x3493b8(0x91)])(_0x819eac)||!(0x0,lodash_1[_0x3493b8(0xc1)])(_0x819eac))){const _0x394d90=_0x237f30[_0x3493b8(0xb5)][0x0]['id'],_0xb76735=(0x0,wbot_1[_0x3493b8(0x9e)])(_0x394d90),_0x507337=_0x3493b8(0xca)+_0xa54072+_0x3493b8(0xa6)+_0x370609+_0x3493b8(0xc0)+_0x370609+_0x3493b8(0xaa)+_0x53b9fa+_0x3493b8(0xb4)+_0x105b7a+'\x0aData\x20Vencimento\x20Trial:\x20'+_0x34bca0(_0x25657e);await _0xb76735[_0x3493b8(0x92)]('55'+_0x819eac+_0x3493b8(0x88),{'text':_0x507337});}}catch(_0xc37a19){console[_0x3493b8(0xd5)](_0x3493b8(0xc4));}return _0x575397[_0x3493b8(0xce)](0xc8)[_0x3493b8(0x82)](_0x42bf2a);}if(_0x28af3e){const _0x1c926b=await(0x0,CreateUserService_1['default'])({'email':_0x53b9fa,'password':_0x105b7a,'name':_0xa54072,'profile':_0x55a300,'companyId':_0x28af3e,'queueIds':_0x146fa7,'startWork':_0x127151,'endWork':_0x20dcc2,'whatsappId':_0x2cc332,'allTicket':_0x167eb5,'defaultTheme':_0xc3a256,'defaultMenu':_0x2e375d,'allowGroup':_0xba8189,'allHistoric':_0x4e9c31,'allUserChat':_0x3bb3e9,'userClosePendingTicket':_0x291058,'showDashboard':_0x265c9f,'defaultTicketsManagerWidth':defaultTicketsManagerWidth}),_0x33615d=(0x0,socket_1['getIO'])();return _0x33615d[_0x3493b8(0x9b)](_0x3493b8(0x8e)+_0xcd6641+_0x3493b8(0x83),{'action':_0x3493b8(0x7e),'user':_0x1c926b}),_0x575397['status'](0xc8)[_0x3493b8(0x82)](_0x1c926b);}};exports[a39_0x2ae9bd(0x8d)]=store;const show=async(_0x3b71b0,_0x27f01f)=>{const _0x4d880a=a39_0x2ae9bd,{userId:_0x2f6661}=_0x3b71b0[_0x4d880a(0x97)],{companyId:_0x556c1f}=_0x3b71b0['user'],_0xc2afcf=await(0x0,ShowUserService_1[_0x4d880a(0xa5)])(_0x2f6661,_0x556c1f);return _0x27f01f['status'](0xc8)[_0x4d880a(0x82)](_0xc2afcf);};function a39_0x4ff5(_0x8f938b,_0x568ada){const _0x7d259d=a39_0x7d25();return a39_0x4ff5=function(_0x4ff536,_0x17e0b8){_0x4ff536=_0x4ff536-0x7c;let _0x139418=_0x7d259d[_0x4ff536];return _0x139418;},a39_0x4ff5(_0x8f938b,_0x568ada);}exports['show']=show;const update=async(_0x4399a2,_0x5a1ce2)=>{const _0x2a4cd1=a39_0x2ae9bd;if(process[_0x2a4cd1(0xc6)][_0x2a4cd1(0xd2)]==='ON')throw new AppError_1['default']('ERR_NO_PERMISSION',0x193);const {id:_0x286ee2,companyId:_0x4e0737}=_0x4399a2[_0x2a4cd1(0xa0)],{userId:_0x578a14}=_0x4399a2[_0x2a4cd1(0x97)],_0xe73cb2=_0x4399a2['body'],_0x4aae1f=await(0x0,UpdateUserService_1[_0x2a4cd1(0xa5)])({'userData':_0xe73cb2,'userId':_0x578a14,'companyId':_0x4e0737,'requestUserId':+_0x286ee2}),_0x486f7d=(0x0,socket_1['getIO'])();return _0x486f7d[_0x2a4cd1(0x9b)](_0x2a4cd1(0x8e)+_0x4e0737+_0x2a4cd1(0x83),{'action':_0x2a4cd1(0xad),'user':_0x4aae1f}),_0x5a1ce2[_0x2a4cd1(0xce)](0xc8)[_0x2a4cd1(0x82)](_0x4aae1f);};exports[a39_0x2ae9bd(0xad)]=update;const remove=async(_0x31fbae,_0x13c484)=>{const _0x312bd1=a39_0x2ae9bd,{userId:_0x2b1f6c}=_0x31fbae[_0x312bd1(0x97)],{companyId:_0x1a2d20,id:_0x59a5cc,profile:_0x36be61}=_0x31fbae[_0x312bd1(0xa0)];if(_0x36be61!=='admin')throw new AppError_1['default'](_0x312bd1(0xbd),0x193);if(process[_0x312bd1(0xc6)][_0x312bd1(0xd2)]==='ON')throw new AppError_1[(_0x312bd1(0xa5))]('ERR_NO_PERMISSION',0x193);const _0x169120=await User_1['default']['findOne']({'where':{'id':_0x2b1f6c}});if(_0x1a2d20!==_0x169120[_0x312bd1(0xcc)])return _0x13c484[_0x312bd1(0xce)](0x190)[_0x312bd1(0x82)]({'error':_0x312bd1(0xab)});else{await(0x0,DeleteUserService_1[_0x312bd1(0xa5)])(_0x2b1f6c,_0x1a2d20);const _0x2dc2db=(0x0,socket_1[_0x312bd1(0x7c)])();return _0x2dc2db[_0x312bd1(0x9b)](_0x312bd1(0x8e)+_0x1a2d20+_0x312bd1(0x83),{'action':_0x312bd1(0xc7),'userId':_0x2b1f6c}),_0x13c484[_0x312bd1(0xce)](0xc8)[_0x312bd1(0x82)]({'message':'User\x20deleted'});}};exports[a39_0x2ae9bd(0x81)]=remove;const list=async(_0x515c83,_0x2e5490)=>{const _0x9195ab=a39_0x2ae9bd,{companyId:_0x5f36e0}=_0x515c83['query'],{companyId:_0x486f14}=_0x515c83[_0x9195ab(0xa0)],_0x3adce1=await(0x0,SimpleListService_1['default'])({'companyId':_0x5f36e0?+_0x5f36e0:_0x486f14});return _0x2e5490[_0x9195ab(0xce)](0xc8)[_0x9195ab(0x82)](_0x3adce1);};exports[a39_0x2ae9bd(0xba)]=list;const mediaUpload=async(_0x20e630,_0x37dea9)=>{const _0x505c0a=a39_0x2ae9bd,{userId:_0x165a68}=_0x20e630['params'],_0xf5f26c=_0x20e630[_0x505c0a(0xcd)],_0x27bb19=(0x0,lodash_2[_0x505c0a(0xc8)])(_0xf5f26c);try{const _0x5bc9e1=await User_1[_0x505c0a(0xa5)][_0x505c0a(0xa8)](_0x165a68);return _0x5bc9e1[_0x505c0a(0x90)]=_0x27bb19['filename']['replace']('/','-'),await _0x5bc9e1['save'](),_0x37dea9['status'](0xc8)['json']({'user':_0x5bc9e1,'message':_0x505c0a(0x8f)});}catch(_0x3d60c1){throw new AppError_1['default'](_0x3d60c1['message']);}};exports[a39_0x2ae9bd(0x8c)]=mediaUpload;const toggleChangeWidht=async(_0x17b069,_0x3a9bf8)=>{const _0x4ace11=a39_0x2ae9bd;var {userId:_0x34183a}=_0x17b069['params'];const {defaultTicketsManagerWidth:_0x26b225}=_0x17b069[_0x4ace11(0xc9)],{companyId:_0x98dae8}=_0x17b069[_0x4ace11(0xa0)],_0x37c093=await(0x0,ToggleChangeWidthService_1[_0x4ace11(0xa5)])({'userId':_0x34183a,'defaultTicketsManagerWidth':_0x26b225}),_0x2d8848=(0x0,socket_1[_0x4ace11(0x7c)])();return _0x2d8848['emit'](_0x4ace11(0x8e)+_0x98dae8+_0x4ace11(0x83),{'action':_0x4ace11(0xad),'user':_0x37c093}),_0x3a9bf8['status'](0xc8)[_0x4ace11(0x82)](_0x37c093);};exports[a39_0x2ae9bd(0x99)]=toggleChangeWidht;