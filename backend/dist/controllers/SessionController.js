'use strict';const a30_0x40d4af=a30_0x8f05;(function(_0x8ff7a7,_0x36f2dd){const _0x5e8ad1=a30_0x8f05,_0x20f071=_0x8ff7a7();while(!![]){try{const _0x5f15ac=-parseInt(_0x5e8ad1(0x8f))/0x1+parseInt(_0x5e8ad1(0x91))/0x2+parseInt(_0x5e8ad1(0x9d))/0x3*(-parseInt(_0x5e8ad1(0x85))/0x4)+parseInt(_0x5e8ad1(0x9a))/0x5+-parseInt(_0x5e8ad1(0x8e))/0x6+parseInt(_0x5e8ad1(0x94))/0x7+-parseInt(_0x5e8ad1(0x86))/0x8*(-parseInt(_0x5e8ad1(0x88))/0x9);if(_0x5f15ac===_0x36f2dd)break;else _0x20f071['push'](_0x20f071['shift']());}catch(_0x356515){_0x20f071['push'](_0x20f071['shift']());}}}(a30_0x4d10,0x64ed1));function a30_0x8f05(_0x2c8c81,_0x1b133){const _0x4d10ee=a30_0x4d10();return a30_0x8f05=function(_0x8f05d9,_0x17e93c){_0x8f05d9=_0x8f05d9-0x81;let _0x2d00cf=_0x4d10ee[_0x8f05d9];return _0x2d00cf;},a30_0x8f05(_0x2c8c81,_0x1b133);}var __importDefault=this&&this[a30_0x40d4af(0x92)]||function(_0x7a7cd){const _0x37ef29=a30_0x40d4af;return _0x7a7cd&&_0x7a7cd[_0x37ef29(0xa0)]?_0x7a7cd:{'default':_0x7a7cd};};Object[a30_0x40d4af(0xa3)](exports,a30_0x40d4af(0xa0),{'value':!![]}),exports[a30_0x40d4af(0x84)]=exports['me']=exports[a30_0x40d4af(0x8d)]=exports[a30_0x40d4af(0x8a)]=void 0x0;const AppError_1=__importDefault(require('../errors/AppError')),socket_1=require('../libs/socket'),AuthUserService_1=__importDefault(require(a30_0x40d4af(0x97))),SendRefreshToken_1=require(a30_0x40d4af(0x9b)),RefreshTokenService_1=require(a30_0x40d4af(0x82)),FindUserFromToken_1=__importDefault(require(a30_0x40d4af(0x87))),User_1=__importDefault(require(a30_0x40d4af(0x99))),store=async(_0x5eadbd,_0x47917b)=>{const _0x13589e=a30_0x40d4af,{email:_0x40783c,password:_0x29fd66}=_0x5eadbd['body'],{token:_0x3f692a,serializedUser:_0x239f9f,refreshToken:_0x33d0f9}=await(0x0,AuthUserService_1[_0x13589e(0x9e)])({'email':_0x40783c,'password':_0x29fd66});(0x0,SendRefreshToken_1['SendRefreshToken'])(_0x47917b,_0x33d0f9);const _0x1f47a1=(0x0,socket_1[_0x13589e(0x81)])();return _0x1f47a1[_0x13589e(0xa1)](_0x13589e(0x95)+_0x239f9f[_0x13589e(0x83)]+_0x13589e(0x93),{'action':_0x13589e(0x8d),'user':{'id':_0x239f9f['id'],'email':_0x239f9f[_0x13589e(0x96)],'companyId':_0x239f9f[_0x13589e(0x83)]}}),_0x47917b['status'](0xc8)['json']({'token':_0x3f692a,'user':_0x239f9f});};exports[a30_0x40d4af(0x8a)]=store;const update=async(_0x1796c0,_0x449233)=>{const _0x5f3745=a30_0x40d4af,_0x2ba371=_0x1796c0[_0x5f3745(0x9c)][_0x5f3745(0x89)];if(!_0x2ba371)throw new AppError_1[(_0x5f3745(0x9e))](_0x5f3745(0x9f),0x191);const {user:_0x61b6ee,newToken:_0x43e5e9,refreshToken:_0x2282cb}=await(0x0,RefreshTokenService_1[_0x5f3745(0xa4)])(_0x449233,_0x2ba371);return(0x0,SendRefreshToken_1[_0x5f3745(0x90)])(_0x449233,_0x2282cb),_0x449233['json']({'token':_0x43e5e9,'user':_0x61b6ee});};function a30_0x4d10(){const _0x760b39=['../helpers/SendRefreshToken','cookies','9RRFvTH','default','ERR_SESSION_EXPIRED','__esModule','emit','clearCookie','defineProperty','RefreshTokenService','getIO','../services/AuthServices/RefreshTokenService','companyId','remove','76204bvYYAX','8BAwwVI','../services/AuthServices/FindUserFromToken','2773143KdeCZR','jrt','store','send','json','update','3654396HlpElo','756661oCFOsm','SendRefreshToken','1530732kCvvoX','__importDefault','-auth','4512039LOzHDt','company-','email','../services/UserServices/AuthUserService','user','../models/User','591015dgcpWu'];a30_0x4d10=function(){return _0x760b39;};return a30_0x4d10();}exports['update']=update;const me=async(_0xc33203,_0x21bea9)=>{const _0x4f1cc6=a30_0x40d4af,_0x47dea1=_0xc33203[_0x4f1cc6(0x9c)][_0x4f1cc6(0x89)],_0x13c328=await(0x0,FindUserFromToken_1[_0x4f1cc6(0x9e)])(_0x47dea1),{id:_0xb14b1f,profile:_0xeac293,super:_0x333674}=_0x13c328;if(!_0x47dea1)throw new AppError_1['default']('ERR_SESSION_EXPIRED',0x191);return _0x21bea9[_0x4f1cc6(0x8c)]({'id':_0xb14b1f,'profile':_0xeac293,'super':_0x333674});};exports['me']=me;const remove=async(_0x2701f2,_0x1054d8)=>{const _0x1e722c=a30_0x40d4af,{id:_0x4460d7}=_0x2701f2[_0x1e722c(0x98)],_0xf3255b=await User_1['default']['findByPk'](_0x4460d7);return await _0xf3255b['update']({'online':![]}),_0x1054d8[_0x1e722c(0xa2)](_0x1e722c(0x89)),_0x1054d8[_0x1e722c(0x8b)]();};exports[a30_0x40d4af(0x84)]=remove;