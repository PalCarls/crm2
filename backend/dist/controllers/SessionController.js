'use strict';const a31_0x23fbb2=a31_0x208e;(function(_0x5506c4,_0x27487b){const _0x304a6a=a31_0x208e,_0x3d1ac7=_0x5506c4();while(!![]){try{const _0x90b2e2=parseInt(_0x304a6a(0x153))/0x1*(-parseInt(_0x304a6a(0x165))/0x2)+-parseInt(_0x304a6a(0x161))/0x3*(parseInt(_0x304a6a(0x16c))/0x4)+parseInt(_0x304a6a(0x15f))/0x5*(parseInt(_0x304a6a(0x16d))/0x6)+parseInt(_0x304a6a(0x151))/0x7*(-parseInt(_0x304a6a(0x171))/0x8)+parseInt(_0x304a6a(0x15d))/0x9+parseInt(_0x304a6a(0x154))/0xa+parseInt(_0x304a6a(0x164))/0xb;if(_0x90b2e2===_0x27487b)break;else _0x3d1ac7['push'](_0x3d1ac7['shift']());}catch(_0x1358ef){_0x3d1ac7['push'](_0x3d1ac7['shift']());}}}(a31_0x1a0f,0xb6216));var __importDefault=this&&this[a31_0x23fbb2(0x166)]||function(_0x56134f){const _0x21ebdc=a31_0x23fbb2;return _0x56134f&&_0x56134f[_0x21ebdc(0x162)]?_0x56134f:{'default':_0x56134f};};Object[a31_0x23fbb2(0x155)](exports,a31_0x23fbb2(0x162),{'value':!![]}),exports[a31_0x23fbb2(0x16f)]=exports['me']=exports[a31_0x23fbb2(0x163)]=exports['store']=void 0x0;const AppError_1=__importDefault(require('../errors/AppError')),socket_1=require(a31_0x23fbb2(0x152)),AuthUserService_1=__importDefault(require(a31_0x23fbb2(0x159))),SendRefreshToken_1=require(a31_0x23fbb2(0x167)),RefreshTokenService_1=require(a31_0x23fbb2(0x15b)),FindUserFromToken_1=__importDefault(require(a31_0x23fbb2(0x16b))),User_1=__importDefault(require(a31_0x23fbb2(0x170))),store=async(_0xe08e10,_0x50296f)=>{const _0x17c7d1=a31_0x23fbb2,{email:_0xf0d88c,password:_0x4b1d20}=_0xe08e10['body'],{token:_0x9e656b,serializedUser:_0x46d6af,refreshToken:_0x3bd05f}=await(0x0,AuthUserService_1[_0x17c7d1(0x169)])({'email':_0xf0d88c,'password':_0x4b1d20});(0x0,SendRefreshToken_1['SendRefreshToken'])(_0x50296f,_0x3bd05f);const _0x5be0e5=(0x0,socket_1[_0x17c7d1(0x15c)])();return _0x5be0e5[_0x17c7d1(0x157)](_0x17c7d1(0x16e)+_0x46d6af[_0x17c7d1(0x15e)]+'-auth',{'action':_0x17c7d1(0x163),'user':{'id':_0x46d6af['id'],'email':_0x46d6af[_0x17c7d1(0x14e)],'companyId':_0x46d6af[_0x17c7d1(0x15e)]}}),_0x50296f[_0x17c7d1(0x160)](0xc8)['json']({'token':_0x9e656b,'user':_0x46d6af});};exports['store']=store;function a31_0x208e(_0x392404,_0x25bc00){const _0x1a0f43=a31_0x1a0f();return a31_0x208e=function(_0x208ef3,_0x31344c){_0x208ef3=_0x208ef3-0x14e;let _0x244598=_0x1a0f43[_0x208ef3];return _0x244598;},a31_0x208e(_0x392404,_0x25bc00);}const update=async(_0x1ae94b,_0x266f83)=>{const _0x16b11d=a31_0x23fbb2,_0x5ee2ff=_0x1ae94b['cookies'][_0x16b11d(0x156)];if(!_0x5ee2ff)throw new AppError_1[(_0x16b11d(0x169))](_0x16b11d(0x150),0x191);const {user:_0x5b4731,newToken:_0x58c589,refreshToken:_0x2b68e8}=await(0x0,RefreshTokenService_1[_0x16b11d(0x172)])(_0x266f83,_0x5ee2ff);return(0x0,SendRefreshToken_1[_0x16b11d(0x16a)])(_0x266f83,_0x2b68e8),_0x266f83[_0x16b11d(0x14f)]({'token':_0x58c589,'user':_0x5b4731});};exports[a31_0x23fbb2(0x163)]=update;const me=async(_0x244703,_0x54d760)=>{const _0x1d8946=a31_0x23fbb2,_0x19e619=_0x244703[_0x1d8946(0x158)][_0x1d8946(0x156)],_0x449682=await(0x0,FindUserFromToken_1[_0x1d8946(0x169)])(_0x19e619),{id:_0x534fe7,profile:_0x2b94d5,super:_0x4cd736}=_0x449682;if(!_0x19e619)throw new AppError_1[(_0x1d8946(0x169))]('ERR_SESSION_EXPIRED',0x191);return _0x54d760[_0x1d8946(0x14f)]({'id':_0x534fe7,'profile':_0x2b94d5,'super':_0x4cd736});};exports['me']=me;const remove=async(_0x247e91,_0x2c3a72)=>{const _0x84ef36=a31_0x23fbb2,{id:_0x594743}=_0x247e91['user'],_0x52fbe2=await User_1['default'][_0x84ef36(0x15a)](_0x594743);return await _0x52fbe2[_0x84ef36(0x163)]({'online':![]}),_0x2c3a72[_0x84ef36(0x168)](_0x84ef36(0x156)),_0x2c3a72['send']();};exports['remove']=remove;function a31_0x1a0f(){const _0xb96d3=['../models/User','8QSFoXo','RefreshTokenService','email','json','ERR_SESSION_EXPIRED','7899906fCybsd','../libs/socket','119169nHGVMF','7677690TuXePx','defineProperty','jrt','emit','cookies','../services/UserServices/AuthUserService','findByPk','../services/AuthServices/RefreshTokenService','getIO','5395536wtyRCu','companyId','15tCxGrp','status','300189AqqKIi','__esModule','update','13491610CZGhCa','2LhCRDU','__importDefault','../helpers/SendRefreshToken','clearCookie','default','SendRefreshToken','../services/AuthServices/FindUserFromToken','32mTIHhz','400908TqrAqG','company-','remove'];a31_0x1a0f=function(){return _0xb96d3;};return a31_0x1a0f();}