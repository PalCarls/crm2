'use strict';const a29_0xe6a6d=a29_0x5a1e;(function(_0x5be7ab,_0x3e9f8f){const _0x276d0b=a29_0x5a1e,_0xbaeecd=_0x5be7ab();while(!![]){try{const _0x18309e=-parseInt(_0x276d0b(0x148))/0x1+parseInt(_0x276d0b(0x152))/0x2+-parseInt(_0x276d0b(0x154))/0x3*(parseInt(_0x276d0b(0x14f))/0x4)+-parseInt(_0x276d0b(0x150))/0x5*(-parseInt(_0x276d0b(0x145))/0x6)+-parseInt(_0x276d0b(0x15a))/0x7+parseInt(_0x276d0b(0x151))/0x8+parseInt(_0x276d0b(0x155))/0x9*(parseInt(_0x276d0b(0x140))/0xa);if(_0x18309e===_0x3e9f8f)break;else _0xbaeecd['push'](_0xbaeecd['shift']());}catch(_0x1bf949){_0xbaeecd['push'](_0xbaeecd['shift']());}}}(a29_0x3fbd,0x8abc4));var __importDefault=this&&this[a29_0xe6a6d(0x138)]||function(_0x29d8c8){const _0x5377b4=a29_0xe6a6d;return _0x29d8c8&&_0x29d8c8[_0x5377b4(0x146)]?_0x29d8c8:{'default':_0x29d8c8};};Object[a29_0xe6a6d(0x14c)](exports,a29_0xe6a6d(0x146),{'value':!![]}),exports['remove']=exports['me']=exports[a29_0xe6a6d(0x14b)]=exports[a29_0xe6a6d(0x13e)]=void 0x0;const AppError_1=__importDefault(require('../errors/AppError')),socket_1=require(a29_0xe6a6d(0x13b)),AuthUserService_1=__importDefault(require(a29_0xe6a6d(0x14d))),SendRefreshToken_1=require('../helpers/SendRefreshToken'),RefreshTokenService_1=require(a29_0xe6a6d(0x135)),FindUserFromToken_1=__importDefault(require(a29_0xe6a6d(0x156))),User_1=__importDefault(require(a29_0xe6a6d(0x13d))),store=async(_0x460f78,_0x2b7782)=>{const _0x28c8ee=a29_0xe6a6d,{email:_0x398ff6,password:_0x212b6c}=_0x460f78['body'],{token:_0x429fdb,serializedUser:_0x419a76,refreshToken:_0x15047d}=await(0x0,AuthUserService_1['default'])({'email':_0x398ff6,'password':_0x212b6c});(0x0,SendRefreshToken_1[_0x28c8ee(0x149)])(_0x2b7782,_0x15047d);const _0x3f0301=(0x0,socket_1[_0x28c8ee(0x14a)])();return _0x3f0301[_0x28c8ee(0x153)](_0x28c8ee(0x144)+_0x419a76[_0x28c8ee(0x136)]+_0x28c8ee(0x13f),{'action':_0x28c8ee(0x14b),'user':{'id':_0x419a76['id'],'email':_0x419a76[_0x28c8ee(0x147)],'companyId':_0x419a76[_0x28c8ee(0x136)]}}),_0x2b7782[_0x28c8ee(0x142)](0xc8)[_0x28c8ee(0x137)]({'token':_0x429fdb,'user':_0x419a76});};exports[a29_0xe6a6d(0x13e)]=store;const update=async(_0x48bdf5,_0x5cea15)=>{const _0xb388a1=a29_0xe6a6d,_0x3784b8=_0x48bdf5[_0xb388a1(0x157)][_0xb388a1(0x13a)];if(!_0x3784b8)throw new AppError_1[(_0xb388a1(0x13c))](_0xb388a1(0x158),0x191);const {user:_0x2f89a3,newToken:_0x37fd5b,refreshToken:_0x39db27}=await(0x0,RefreshTokenService_1['RefreshTokenService'])(_0x5cea15,_0x3784b8);return(0x0,SendRefreshToken_1[_0xb388a1(0x149)])(_0x5cea15,_0x39db27),_0x5cea15[_0xb388a1(0x137)]({'token':_0x37fd5b,'user':_0x2f89a3});};function a29_0x3fbd(){const _0x280b77=['clearCookie','84VlRNHp','272665XuukLM','7505128BgWQLf','1916802CYnyAW','emit','143751ezUOYI','1476TiXJVP','../services/AuthServices/FindUserFromToken','cookies','ERR_SESSION_EXPIRED','send','1853460EwPPIs','../services/AuthServices/RefreshTokenService','companyId','json','__importDefault','user','jrt','../libs/socket','default','../models/User','store','-auth','18380OfaKDW','findByPk','status','remove','company-','6rcXWYM','__esModule','email','413210OaFqxr','SendRefreshToken','getIO','update','defineProperty','../services/UserServices/AuthUserService'];a29_0x3fbd=function(){return _0x280b77;};return a29_0x3fbd();}exports['update']=update;const me=async(_0x49eca0,_0x26a2ac)=>{const _0x31406a=a29_0xe6a6d,_0x2aa2b2=_0x49eca0[_0x31406a(0x157)][_0x31406a(0x13a)],_0x11eea2=await(0x0,FindUserFromToken_1[_0x31406a(0x13c)])(_0x2aa2b2),{id:_0x15cc73,profile:_0x136490,super:_0x3b8340}=_0x11eea2;if(!_0x2aa2b2)throw new AppError_1[(_0x31406a(0x13c))](_0x31406a(0x158),0x191);return _0x26a2ac[_0x31406a(0x137)]({'id':_0x15cc73,'profile':_0x136490,'super':_0x3b8340});};exports['me']=me;function a29_0x5a1e(_0x2d7379,_0x187614){const _0x3fbd64=a29_0x3fbd();return a29_0x5a1e=function(_0x5a1ef0,_0x517cdc){_0x5a1ef0=_0x5a1ef0-0x135;let _0x2545d1=_0x3fbd64[_0x5a1ef0];return _0x2545d1;},a29_0x5a1e(_0x2d7379,_0x187614);}const remove=async(_0x504b09,_0xafbe4c)=>{const _0x25e3bc=a29_0xe6a6d,{id:_0x371f5b}=_0x504b09[_0x25e3bc(0x139)],_0x44204e=await User_1[_0x25e3bc(0x13c)][_0x25e3bc(0x141)](_0x371f5b);return await _0x44204e[_0x25e3bc(0x14b)]({'online':![]}),_0xafbe4c[_0x25e3bc(0x14e)](_0x25e3bc(0x13a)),_0xafbe4c[_0x25e3bc(0x159)]();};exports[a29_0xe6a6d(0x143)]=remove;