<<<<<<< HEAD
'use strict';const a31_0xaa249a=a31_0x396e;(function(_0x411e1d,_0x3c57b6){const _0x2eb1ab=a31_0x396e,_0x1150ee=_0x411e1d();while(!![]){try{const _0x3e6454=-parseInt(_0x2eb1ab(0x19f))/0x1*(parseInt(_0x2eb1ab(0x181))/0x2)+parseInt(_0x2eb1ab(0x195))/0x3*(parseInt(_0x2eb1ab(0x197))/0x4)+-parseInt(_0x2eb1ab(0x185))/0x5*(parseInt(_0x2eb1ab(0x194))/0x6)+parseInt(_0x2eb1ab(0x17a))/0x7+-parseInt(_0x2eb1ab(0x17b))/0x8+-parseInt(_0x2eb1ab(0x18e))/0x9+-parseInt(_0x2eb1ab(0x18d))/0xa*(-parseInt(_0x2eb1ab(0x19e))/0xb);if(_0x3e6454===_0x3c57b6)break;else _0x1150ee['push'](_0x1150ee['shift']());}catch(_0x36c63a){_0x1150ee['push'](_0x1150ee['shift']());}}}(a31_0x1291,0x4ad6a));var __importDefault=this&&this[a31_0xaa249a(0x19c)]||function(_0x5ac53c){const _0x4730e0=a31_0xaa249a;return _0x5ac53c&&_0x5ac53c[_0x4730e0(0x190)]?_0x5ac53c:{'default':_0x5ac53c};};function a31_0x396e(_0xd7148b,_0x5eedd7){const _0x129106=a31_0x1291();return a31_0x396e=function(_0x396e4d,_0x2c7b9f){_0x396e4d=_0x396e4d-0x177;let _0x83efa7=_0x129106[_0x396e4d];return _0x83efa7;},a31_0x396e(_0xd7148b,_0x5eedd7);}Object[a31_0xaa249a(0x19a)](exports,a31_0xaa249a(0x190),{'value':!![]}),exports[a31_0xaa249a(0x17e)]=exports['me']=exports[a31_0xaa249a(0x18b)]=exports[a31_0xaa249a(0x18c)]=void 0x0;const AppError_1=__importDefault(require(a31_0xaa249a(0x182))),socket_1=require(a31_0xaa249a(0x19b)),AuthUserService_1=__importDefault(require(a31_0xaa249a(0x192))),SendRefreshToken_1=require(a31_0xaa249a(0x177)),RefreshTokenService_1=require(a31_0xaa249a(0x198)),FindUserFromToken_1=__importDefault(require(a31_0xaa249a(0x17c))),User_1=__importDefault(require(a31_0xaa249a(0x184))),store=async(_0x38ab28,_0x17f584)=>{const _0x22e400=a31_0xaa249a,{email:_0x39696b,password:_0x4c257a}=_0x38ab28[_0x22e400(0x18f)],{token:_0x47a6e4,serializedUser:_0x4fa400,refreshToken:_0x11193e}=await(0x0,AuthUserService_1[_0x22e400(0x18a)])({'email':_0x39696b,'password':_0x4c257a});(0x0,SendRefreshToken_1[_0x22e400(0x183)])(_0x17f584,_0x11193e);const _0x44378b=(0x0,socket_1[_0x22e400(0x196)])();return _0x44378b[_0x22e400(0x186)](_0x22e400(0x19d)+_0x4fa400[_0x22e400(0x189)]+'-auth',{'action':'update','user':{'id':_0x4fa400['id'],'email':_0x4fa400[_0x22e400(0x199)],'companyId':_0x4fa400['companyId']}}),_0x17f584[_0x22e400(0x178)](0xc8)[_0x22e400(0x188)]({'token':_0x47a6e4,'user':_0x4fa400});};exports[a31_0xaa249a(0x18c)]=store;const update=async(_0x429d59,_0x21c725)=>{const _0x35c9de=a31_0xaa249a,_0x1db0ce=_0x429d59[_0x35c9de(0x191)][_0x35c9de(0x179)];if(!_0x1db0ce)throw new AppError_1['default'](_0x35c9de(0x180),0x191);const {user:_0x284511,newToken:_0x70eae7,refreshToken:_0x52e599}=await(0x0,RefreshTokenService_1['RefreshTokenService'])(_0x21c725,_0x1db0ce);return(0x0,SendRefreshToken_1[_0x35c9de(0x183)])(_0x21c725,_0x52e599),_0x21c725[_0x35c9de(0x188)]({'token':_0x70eae7,'user':_0x284511});};exports[a31_0xaa249a(0x18b)]=update;const me=async(_0x4eff86,_0x156395)=>{const _0x125d4b=a31_0xaa249a,_0x29b309=_0x4eff86['cookies'][_0x125d4b(0x179)],_0x62ce0d=await(0x0,FindUserFromToken_1[_0x125d4b(0x18a)])(_0x29b309),{id:_0x5fb456,profile:_0x513efa,super:_0x51ec2e}=_0x62ce0d;if(!_0x29b309)throw new AppError_1[(_0x125d4b(0x18a))](_0x125d4b(0x180),0x191);return _0x156395[_0x125d4b(0x188)]({'id':_0x5fb456,'profile':_0x513efa,'super':_0x51ec2e});};exports['me']=me;const remove=async(_0x330d19,_0x4067c0)=>{const _0x121153=a31_0xaa249a,{id:_0x1cfd9e}=_0x330d19[_0x121153(0x187)],_0x15757e=await User_1[_0x121153(0x18a)][_0x121153(0x193)](_0x1cfd9e);return await _0x15757e[_0x121153(0x18b)]({'online':![]}),_0x4067c0[_0x121153(0x17f)](_0x121153(0x179)),_0x4067c0[_0x121153(0x17d)]();};exports[a31_0xaa249a(0x17e)]=remove;function a31_0x1291(){const _0xbdb7cf=['send','remove','clearCookie','ERR_SESSION_EXPIRED','2fUprbG','../errors/AppError','SendRefreshToken','../models/User','37945Sjeaia','emit','user','json','companyId','default','update','store','11573270pXvDyo','4580208pAGhIq','body','__esModule','cookies','../services/UserServices/AuthUserService','findByPk','432UZRHZj','3BGnExQ','getIO','71952vafYcg','../services/AuthServices/RefreshTokenService','email','defineProperty','../libs/socket','__importDefault','company-','11hvQZfP','44890DGswoR','../helpers/SendRefreshToken','status','jrt','2320003XljjUz','799968DkTlWH','../services/AuthServices/FindUserFromToken'];a31_0x1291=function(){return _0xbdb7cf;};return a31_0x1291();}
=======
'use strict';const a31_0x336e6c=a31_0x5ab9;(function(_0x5c3b3b,_0x32d6ad){const _0x38b147=a31_0x5ab9,_0x3d284b=_0x5c3b3b();while(!![]){try{const _0x3ff046=parseInt(_0x38b147(0x1e7))/0x1*(-parseInt(_0x38b147(0x1dc))/0x2)+parseInt(_0x38b147(0x1f0))/0x3+parseInt(_0x38b147(0x1da))/0x4*(-parseInt(_0x38b147(0x1f8))/0x5)+parseInt(_0x38b147(0x1e1))/0x6+parseInt(_0x38b147(0x1ec))/0x7+-parseInt(_0x38b147(0x1e2))/0x8+-parseInt(_0x38b147(0x1e6))/0x9;if(_0x3ff046===_0x32d6ad)break;else _0x3d284b['push'](_0x3d284b['shift']());}catch(_0x1f655c){_0x3d284b['push'](_0x3d284b['shift']());}}}(a31_0x520b,0xbddbe));function a31_0x520b(){const _0x15d110=['5551630YrmjgF','../models/User','store','../services/AuthServices/FindUserFromToken','4081356HtGkJc','update','send','__esModule','json','getIO','ERR_SESSION_EXPIRED','remove','602455CqUIWC','../services/AuthServices/RefreshTokenService','28mjJmLg','../errors/AppError','38FAAvdl','../libs/socket','jrt','company-','SendRefreshToken','1579014NAykjb','1037720Kfxghm','default','cookies','companyId','115632Mignml','34371XqXbRH','defineProperty','body','email','status'];a31_0x520b=function(){return _0x15d110;};return a31_0x520b();}var __importDefault=this&&this['__importDefault']||function(_0x46cb3b){const _0x552a95=a31_0x5ab9;return _0x46cb3b&&_0x46cb3b[_0x552a95(0x1f3)]?_0x46cb3b:{'default':_0x46cb3b};};function a31_0x5ab9(_0x573ead,_0x194adc){const _0x520b94=a31_0x520b();return a31_0x5ab9=function(_0x5ab9f3,_0x4094c4){_0x5ab9f3=_0x5ab9f3-0x1d9;let _0x1447d1=_0x520b94[_0x5ab9f3];return _0x1447d1;},a31_0x5ab9(_0x573ead,_0x194adc);}Object[a31_0x336e6c(0x1e8)](exports,'__esModule',{'value':!![]}),exports[a31_0x336e6c(0x1f7)]=exports['me']=exports[a31_0x336e6c(0x1f1)]=exports['store']=void 0x0;const AppError_1=__importDefault(require(a31_0x336e6c(0x1db))),socket_1=require(a31_0x336e6c(0x1dd)),AuthUserService_1=__importDefault(require('../services/UserServices/AuthUserService')),SendRefreshToken_1=require('../helpers/SendRefreshToken'),RefreshTokenService_1=require(a31_0x336e6c(0x1d9)),FindUserFromToken_1=__importDefault(require(a31_0x336e6c(0x1ef))),User_1=__importDefault(require(a31_0x336e6c(0x1ed))),store=async(_0x5b3013,_0x1870f7)=>{const _0x46b796=a31_0x336e6c,{email:_0x927b45,password:_0x5a517a}=_0x5b3013[_0x46b796(0x1e9)],{token:_0x54bf03,serializedUser:_0x18a619,refreshToken:_0x499fe4}=await(0x0,AuthUserService_1['default'])({'email':_0x927b45,'password':_0x5a517a});(0x0,SendRefreshToken_1[_0x46b796(0x1e0)])(_0x1870f7,_0x499fe4);const _0x30ad0c=(0x0,socket_1[_0x46b796(0x1f5)])();return _0x30ad0c['emit'](_0x46b796(0x1df)+_0x18a619[_0x46b796(0x1e5)]+'-auth',{'action':_0x46b796(0x1f1),'user':{'id':_0x18a619['id'],'email':_0x18a619[_0x46b796(0x1ea)],'companyId':_0x18a619[_0x46b796(0x1e5)]}}),_0x1870f7[_0x46b796(0x1eb)](0xc8)[_0x46b796(0x1f4)]({'token':_0x54bf03,'user':_0x18a619});};exports[a31_0x336e6c(0x1ee)]=store;const update=async(_0x463211,_0x1e8af6)=>{const _0x22e67b=a31_0x336e6c,_0x79a834=_0x463211[_0x22e67b(0x1e4)]['jrt'];if(!_0x79a834)throw new AppError_1[(_0x22e67b(0x1e3))](_0x22e67b(0x1f6),0x191);const {user:_0x204c94,newToken:_0x4ed9e3,refreshToken:_0x5af8c9}=await(0x0,RefreshTokenService_1['RefreshTokenService'])(_0x1e8af6,_0x79a834);return(0x0,SendRefreshToken_1[_0x22e67b(0x1e0)])(_0x1e8af6,_0x5af8c9),_0x1e8af6['json']({'token':_0x4ed9e3,'user':_0x204c94});};exports[a31_0x336e6c(0x1f1)]=update;const me=async(_0x48bd20,_0x2e3189)=>{const _0x57fdcb=a31_0x336e6c,_0x744718=_0x48bd20[_0x57fdcb(0x1e4)][_0x57fdcb(0x1de)],_0x266fed=await(0x0,FindUserFromToken_1[_0x57fdcb(0x1e3)])(_0x744718),{id:_0x2e0308,profile:_0xf1559f,super:_0x261117}=_0x266fed;if(!_0x744718)throw new AppError_1['default'](_0x57fdcb(0x1f6),0x191);return _0x2e3189[_0x57fdcb(0x1f4)]({'id':_0x2e0308,'profile':_0xf1559f,'super':_0x261117});};exports['me']=me;const remove=async(_0x2158ff,_0x553947)=>{const _0x264a13=a31_0x336e6c,{id:_0x1fff79}=_0x2158ff['user'],_0x2a0858=await User_1[_0x264a13(0x1e3)]['findByPk'](_0x1fff79);return await _0x2a0858[_0x264a13(0x1f1)]({'online':![]}),_0x553947['clearCookie'](_0x264a13(0x1de)),_0x553947[_0x264a13(0x1f2)]();};exports[a31_0x336e6c(0x1f7)]=remove;
>>>>>>> ab722bfbcf394d74dd0b99a984c0dcf6ffbcff7f
