'use strict';const a29_0x236177=a29_0x6c07;function a29_0x3a34(){const _0x2bfd80=['../services/AuthServices/RefreshTokenService','6645230LUZvHk','5631LupFSq','json','clearCookie','9816779niEfoa','findByPk','RefreshTokenService','cookies','getIO','send','jrt','11770880LdKMDw','user','defineProperty','6GXhrOX','../services/UserServices/AuthUserService','remove','__esModule','-auth','SendRefreshToken','1518oUpzUG','companyId','default','../models/User','../helpers/SendRefreshToken','update','__importDefault','16cdKLGq','3012057TfiiCO','1723420NMqqrK','1435124zTmLFO','../services/AuthServices/FindUserFromToken','store','../errors/AppError','ERR_SESSION_EXPIRED','../libs/socket','company-'];a29_0x3a34=function(){return _0x2bfd80;};return a29_0x3a34();}(function(_0xfa51d6,_0x396ec9){const _0x422053=a29_0x6c07,_0x49c08b=_0xfa51d6();while(!![]){try{const _0x5ea659=parseInt(_0x422053(0x13b))/0x1+-parseInt(_0x422053(0x132))/0x2*(-parseInt(_0x422053(0x11f))/0x3)+-parseInt(_0x422053(0x13c))/0x4+parseInt(_0x422053(0x11e))/0x5+-parseInt(_0x422053(0x12c))/0x6*(parseInt(_0x422053(0x122))/0x7)+-parseInt(_0x422053(0x139))/0x8*(parseInt(_0x422053(0x13a))/0x9)+-parseInt(_0x422053(0x129))/0xa;if(_0x5ea659===_0x396ec9)break;else _0x49c08b['push'](_0x49c08b['shift']());}catch(_0x48edfe){_0x49c08b['push'](_0x49c08b['shift']());}}}(a29_0x3a34,0xd4479));var __importDefault=this&&this[a29_0x236177(0x138)]||function(_0x79594f){const _0x5286b3=a29_0x236177;return _0x79594f&&_0x79594f[_0x5286b3(0x12f)]?_0x79594f:{'default':_0x79594f};};Object[a29_0x236177(0x12b)](exports,a29_0x236177(0x12f),{'value':!![]}),exports[a29_0x236177(0x12e)]=exports['me']=exports[a29_0x236177(0x137)]=exports[a29_0x236177(0x13e)]=void 0x0;const AppError_1=__importDefault(require(a29_0x236177(0x13f))),socket_1=require(a29_0x236177(0x141)),AuthUserService_1=__importDefault(require(a29_0x236177(0x12d))),SendRefreshToken_1=require(a29_0x236177(0x136)),RefreshTokenService_1=require(a29_0x236177(0x11d)),FindUserFromToken_1=__importDefault(require(a29_0x236177(0x13d))),User_1=__importDefault(require(a29_0x236177(0x135))),store=async(_0x20efa6,_0x3df4d3)=>{const _0x1288f6=a29_0x236177,{email:_0x2af09f,password:_0x356c0b}=_0x20efa6['body'],{token:_0x332993,serializedUser:_0x24d376,refreshToken:_0xd72f8b}=await(0x0,AuthUserService_1[_0x1288f6(0x134)])({'email':_0x2af09f,'password':_0x356c0b});(0x0,SendRefreshToken_1[_0x1288f6(0x131)])(_0x3df4d3,_0xd72f8b);const _0x2e2e84=(0x0,socket_1[_0x1288f6(0x126)])();return _0x2e2e84['emit'](_0x1288f6(0x11c)+_0x24d376[_0x1288f6(0x133)]+_0x1288f6(0x130),{'action':_0x1288f6(0x137),'user':{'id':_0x24d376['id'],'email':_0x24d376['email'],'companyId':_0x24d376['companyId']}}),_0x3df4d3['status'](0xc8)[_0x1288f6(0x120)]({'token':_0x332993,'user':_0x24d376});};function a29_0x6c07(_0x420c6d,_0x197f66){const _0x3a34f7=a29_0x3a34();return a29_0x6c07=function(_0x6c078b,_0x53a742){_0x6c078b=_0x6c078b-0x11c;let _0x3bfc74=_0x3a34f7[_0x6c078b];return _0x3bfc74;},a29_0x6c07(_0x420c6d,_0x197f66);}exports[a29_0x236177(0x13e)]=store;const update=async(_0x4d436e,_0x25edbe)=>{const _0x33d54e=a29_0x236177,_0x14e749=_0x4d436e[_0x33d54e(0x125)][_0x33d54e(0x128)];if(!_0x14e749)throw new AppError_1['default'](_0x33d54e(0x140),0x191);const {user:_0x4c5672,newToken:_0x1fd57b,refreshToken:_0x3aa0e4}=await(0x0,RefreshTokenService_1[_0x33d54e(0x124)])(_0x25edbe,_0x14e749);return(0x0,SendRefreshToken_1[_0x33d54e(0x131)])(_0x25edbe,_0x3aa0e4),_0x25edbe[_0x33d54e(0x120)]({'token':_0x1fd57b,'user':_0x4c5672});};exports['update']=update;const me=async(_0x4d0476,_0x5c0263)=>{const _0x6cdb9b=a29_0x236177,_0x614aa=_0x4d0476[_0x6cdb9b(0x125)][_0x6cdb9b(0x128)],_0x51769e=await(0x0,FindUserFromToken_1[_0x6cdb9b(0x134)])(_0x614aa),{id:_0x44bc71,profile:_0x4a3489,super:_0x244435}=_0x51769e;if(!_0x614aa)throw new AppError_1[(_0x6cdb9b(0x134))](_0x6cdb9b(0x140),0x191);return _0x5c0263['json']({'id':_0x44bc71,'profile':_0x4a3489,'super':_0x244435});};exports['me']=me;const remove=async(_0x189481,_0x2d8f7a)=>{const _0x5c5ade=a29_0x236177,{id:_0x45f8cc}=_0x189481[_0x5c5ade(0x12a)],_0x3a4a4f=await User_1['default'][_0x5c5ade(0x123)](_0x45f8cc);return await _0x3a4a4f[_0x5c5ade(0x137)]({'online':![]}),_0x2d8f7a[_0x5c5ade(0x121)](_0x5c5ade(0x128)),_0x2d8f7a[_0x5c5ade(0x127)]();};exports['remove']=remove;