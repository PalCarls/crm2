'use strict';const a31_0x336e6c=a31_0x5ab9;(function(_0x5c3b3b,_0x32d6ad){const _0x38b147=a31_0x5ab9,_0x3d284b=_0x5c3b3b();while(!![]){try{const _0x3ff046=parseInt(_0x38b147(0x1e7))/0x1*(-parseInt(_0x38b147(0x1dc))/0x2)+parseInt(_0x38b147(0x1f0))/0x3+parseInt(_0x38b147(0x1da))/0x4*(-parseInt(_0x38b147(0x1f8))/0x5)+parseInt(_0x38b147(0x1e1))/0x6+parseInt(_0x38b147(0x1ec))/0x7+-parseInt(_0x38b147(0x1e2))/0x8+-parseInt(_0x38b147(0x1e6))/0x9;if(_0x3ff046===_0x32d6ad)break;else _0x3d284b['push'](_0x3d284b['shift']());}catch(_0x1f655c){_0x3d284b['push'](_0x3d284b['shift']());}}}(a31_0x520b,0xbddbe));function a31_0x520b(){const _0x15d110=['5551630YrmjgF','../models/User','store','../services/AuthServices/FindUserFromToken','4081356HtGkJc','update','send','__esModule','json','getIO','ERR_SESSION_EXPIRED','remove','602455CqUIWC','../services/AuthServices/RefreshTokenService','28mjJmLg','../errors/AppError','38FAAvdl','../libs/socket','jrt','company-','SendRefreshToken','1579014NAykjb','1037720Kfxghm','default','cookies','companyId','115632Mignml','34371XqXbRH','defineProperty','body','email','status'];a31_0x520b=function(){return _0x15d110;};return a31_0x520b();}var __importDefault=this&&this['__importDefault']||function(_0x46cb3b){const _0x552a95=a31_0x5ab9;return _0x46cb3b&&_0x46cb3b[_0x552a95(0x1f3)]?_0x46cb3b:{'default':_0x46cb3b};};function a31_0x5ab9(_0x573ead,_0x194adc){const _0x520b94=a31_0x520b();return a31_0x5ab9=function(_0x5ab9f3,_0x4094c4){_0x5ab9f3=_0x5ab9f3-0x1d9;let _0x1447d1=_0x520b94[_0x5ab9f3];return _0x1447d1;},a31_0x5ab9(_0x573ead,_0x194adc);}Object[a31_0x336e6c(0x1e8)](exports,'__esModule',{'value':!![]}),exports[a31_0x336e6c(0x1f7)]=exports['me']=exports[a31_0x336e6c(0x1f1)]=exports['store']=void 0x0;const AppError_1=__importDefault(require(a31_0x336e6c(0x1db))),socket_1=require(a31_0x336e6c(0x1dd)),AuthUserService_1=__importDefault(require('../services/UserServices/AuthUserService')),SendRefreshToken_1=require('../helpers/SendRefreshToken'),RefreshTokenService_1=require(a31_0x336e6c(0x1d9)),FindUserFromToken_1=__importDefault(require(a31_0x336e6c(0x1ef))),User_1=__importDefault(require(a31_0x336e6c(0x1ed))),store=async(_0x5b3013,_0x1870f7)=>{const _0x46b796=a31_0x336e6c,{email:_0x927b45,password:_0x5a517a}=_0x5b3013[_0x46b796(0x1e9)],{token:_0x54bf03,serializedUser:_0x18a619,refreshToken:_0x499fe4}=await(0x0,AuthUserService_1['default'])({'email':_0x927b45,'password':_0x5a517a});(0x0,SendRefreshToken_1[_0x46b796(0x1e0)])(_0x1870f7,_0x499fe4);const _0x30ad0c=(0x0,socket_1[_0x46b796(0x1f5)])();return _0x30ad0c['emit'](_0x46b796(0x1df)+_0x18a619[_0x46b796(0x1e5)]+'-auth',{'action':_0x46b796(0x1f1),'user':{'id':_0x18a619['id'],'email':_0x18a619[_0x46b796(0x1ea)],'companyId':_0x18a619[_0x46b796(0x1e5)]}}),_0x1870f7[_0x46b796(0x1eb)](0xc8)[_0x46b796(0x1f4)]({'token':_0x54bf03,'user':_0x18a619});};exports[a31_0x336e6c(0x1ee)]=store;const update=async(_0x463211,_0x1e8af6)=>{const _0x22e67b=a31_0x336e6c,_0x79a834=_0x463211[_0x22e67b(0x1e4)]['jrt'];if(!_0x79a834)throw new AppError_1[(_0x22e67b(0x1e3))](_0x22e67b(0x1f6),0x191);const {user:_0x204c94,newToken:_0x4ed9e3,refreshToken:_0x5af8c9}=await(0x0,RefreshTokenService_1['RefreshTokenService'])(_0x1e8af6,_0x79a834);return(0x0,SendRefreshToken_1[_0x22e67b(0x1e0)])(_0x1e8af6,_0x5af8c9),_0x1e8af6['json']({'token':_0x4ed9e3,'user':_0x204c94});};exports[a31_0x336e6c(0x1f1)]=update;const me=async(_0x48bd20,_0x2e3189)=>{const _0x57fdcb=a31_0x336e6c,_0x744718=_0x48bd20[_0x57fdcb(0x1e4)][_0x57fdcb(0x1de)],_0x266fed=await(0x0,FindUserFromToken_1[_0x57fdcb(0x1e3)])(_0x744718),{id:_0x2e0308,profile:_0xf1559f,super:_0x261117}=_0x266fed;if(!_0x744718)throw new AppError_1['default'](_0x57fdcb(0x1f6),0x191);return _0x2e3189[_0x57fdcb(0x1f4)]({'id':_0x2e0308,'profile':_0xf1559f,'super':_0x261117});};exports['me']=me;const remove=async(_0x2158ff,_0x553947)=>{const _0x264a13=a31_0x336e6c,{id:_0x1fff79}=_0x2158ff['user'],_0x2a0858=await User_1[_0x264a13(0x1e3)]['findByPk'](_0x1fff79);return await _0x2a0858[_0x264a13(0x1f1)]({'online':![]}),_0x553947['clearCookie'](_0x264a13(0x1de)),_0x553947[_0x264a13(0x1f2)]();};exports[a31_0x336e6c(0x1f7)]=remove;