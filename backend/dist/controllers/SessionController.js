'use strict';const a29_0xcfc4b5=a29_0x33d9;(function(_0x13303c,_0x30d3e8){const _0x649089=a29_0x33d9,_0x297871=_0x13303c();while(!![]){try{const _0x63a303=parseInt(_0x649089(0x184))/0x1+-parseInt(_0x649089(0x18a))/0x2*(-parseInt(_0x649089(0x17b))/0x3)+parseInt(_0x649089(0x18c))/0x4+-parseInt(_0x649089(0x180))/0x5+-parseInt(_0x649089(0x18b))/0x6*(parseInt(_0x649089(0x174))/0x7)+parseInt(_0x649089(0x16a))/0x8+-parseInt(_0x649089(0x173))/0x9;if(_0x63a303===_0x30d3e8)break;else _0x297871['push'](_0x297871['shift']());}catch(_0x384aaa){_0x297871['push'](_0x297871['shift']());}}}(a29_0x2324,0x6ae5f));var __importDefault=this&&this[a29_0xcfc4b5(0x183)]||function(_0x124e28){return _0x124e28&&_0x124e28['__esModule']?_0x124e28:{'default':_0x124e28};};Object[a29_0xcfc4b5(0x16b)](exports,a29_0xcfc4b5(0x17a),{'value':!![]}),exports[a29_0xcfc4b5(0x172)]=exports['me']=exports[a29_0xcfc4b5(0x182)]=exports[a29_0xcfc4b5(0x176)]=void 0x0;const AppError_1=__importDefault(require(a29_0xcfc4b5(0x17d))),socket_1=require(a29_0xcfc4b5(0x16e)),AuthUserService_1=__importDefault(require(a29_0xcfc4b5(0x178))),SendRefreshToken_1=require('../helpers/SendRefreshToken'),RefreshTokenService_1=require(a29_0xcfc4b5(0x16c)),FindUserFromToken_1=__importDefault(require(a29_0xcfc4b5(0x185))),User_1=__importDefault(require(a29_0xcfc4b5(0x186))),store=async(_0x481e08,_0x14eccd)=>{const _0x434a36=a29_0xcfc4b5,{email:_0x1c005c,password:_0x396b7f}=_0x481e08[_0x434a36(0x17c)],{token:_0x4418d5,serializedUser:_0x5dc8e8,refreshToken:_0x50116b}=await(0x0,AuthUserService_1[_0x434a36(0x17f)])({'email':_0x1c005c,'password':_0x396b7f});(0x0,SendRefreshToken_1[_0x434a36(0x177)])(_0x14eccd,_0x50116b);const _0x46793f=(0x0,socket_1['getIO'])();return _0x46793f[_0x434a36(0x189)](_0x434a36(0x181)+_0x5dc8e8[_0x434a36(0x187)]+'-auth',{'action':'update','user':{'id':_0x5dc8e8['id'],'email':_0x5dc8e8['email'],'companyId':_0x5dc8e8[_0x434a36(0x187)]}}),_0x14eccd[_0x434a36(0x175)](0xc8)['json']({'token':_0x4418d5,'user':_0x5dc8e8});};exports['store']=store;const update=async(_0xc967f0,_0x1f540a)=>{const _0x3a0864=a29_0xcfc4b5,_0x44a0a1=_0xc967f0['cookies']['jrt'];if(!_0x44a0a1)throw new AppError_1[(_0x3a0864(0x17f))]('ERR_SESSION_EXPIRED',0x191);const {user:_0x22bbd4,newToken:_0xe18f1f,refreshToken:_0x1d2396}=await(0x0,RefreshTokenService_1[_0x3a0864(0x171)])(_0x1f540a,_0x44a0a1);return(0x0,SendRefreshToken_1[_0x3a0864(0x177)])(_0x1f540a,_0x1d2396),_0x1f540a[_0x3a0864(0x188)]({'token':_0xe18f1f,'user':_0x22bbd4});};function a29_0x2324(){const _0x2b00be=['17133QjOrow','body','../errors/AppError','findByPk','default','4113765ZeYqZT','company-','update','__importDefault','726027JDprly','../services/AuthServices/FindUserFromToken','../models/User','companyId','json','emit','272FOZFVU','30DPzhsi','295700HfjiDl','6014824doJtGa','defineProperty','../services/AuthServices/RefreshTokenService','clearCookie','../libs/socket','user','jrt','RefreshTokenService','remove','3824442kMaVJu','900137jGNfox','status','store','SendRefreshToken','../services/UserServices/AuthUserService','ERR_SESSION_EXPIRED','__esModule'];a29_0x2324=function(){return _0x2b00be;};return a29_0x2324();}exports[a29_0xcfc4b5(0x182)]=update;const me=async(_0x58005b,_0x53788d)=>{const _0x1717a0=a29_0xcfc4b5,_0x2ffdf9=_0x58005b['cookies'][_0x1717a0(0x170)],_0x25f4f7=await(0x0,FindUserFromToken_1[_0x1717a0(0x17f)])(_0x2ffdf9),{id:_0x3f12fb,profile:_0x1c3d34,super:_0x3bec77}=_0x25f4f7;if(!_0x2ffdf9)throw new AppError_1[(_0x1717a0(0x17f))](_0x1717a0(0x179),0x191);return _0x53788d[_0x1717a0(0x188)]({'id':_0x3f12fb,'profile':_0x1c3d34,'super':_0x3bec77});};function a29_0x33d9(_0x155109,_0x4f25e6){const _0x2324f8=a29_0x2324();return a29_0x33d9=function(_0x33d917,_0x5bdb88){_0x33d917=_0x33d917-0x16a;let _0x3f230e=_0x2324f8[_0x33d917];return _0x3f230e;},a29_0x33d9(_0x155109,_0x4f25e6);}exports['me']=me;const remove=async(_0x59a45f,_0x55a9e0)=>{const _0x14d407=a29_0xcfc4b5,{id:_0x5b4ef0}=_0x59a45f[_0x14d407(0x16f)],_0x2ed83a=await User_1[_0x14d407(0x17f)][_0x14d407(0x17e)](_0x5b4ef0);return await _0x2ed83a[_0x14d407(0x182)]({'online':![]}),_0x55a9e0[_0x14d407(0x16d)](_0x14d407(0x170)),_0x55a9e0['send']();};exports[a29_0xcfc4b5(0x172)]=remove;