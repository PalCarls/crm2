'use strict';const a31_0x19056b=a31_0xb42b;(function(_0xeaf52f,_0x21c674){const _0x4eda31=a31_0xb42b,_0x17a98c=_0xeaf52f();while(!![]){try{const _0x42d546=parseInt(_0x4eda31(0x196))/0x1+parseInt(_0x4eda31(0x192))/0x2*(parseInt(_0x4eda31(0x19e))/0x3)+parseInt(_0x4eda31(0x182))/0x4*(-parseInt(_0x4eda31(0x18c))/0x5)+parseInt(_0x4eda31(0x186))/0x6+-parseInt(_0x4eda31(0x18b))/0x7*(parseInt(_0x4eda31(0x18f))/0x8)+parseInt(_0x4eda31(0x188))/0x9+parseInt(_0x4eda31(0x183))/0xa*(-parseInt(_0x4eda31(0x179))/0xb);if(_0x42d546===_0x21c674)break;else _0x17a98c['push'](_0x17a98c['shift']());}catch(_0x3259cf){_0x17a98c['push'](_0x17a98c['shift']());}}}(a31_0x2ebe,0xd47a5));var __importDefault=this&&this[a31_0x19056b(0x199)]||function(_0x4c9114){const _0x3357db=a31_0x19056b;return _0x4c9114&&_0x4c9114[_0x3357db(0x17c)]?_0x4c9114:{'default':_0x4c9114};};Object['defineProperty'](exports,a31_0x19056b(0x17c),{'value':!![]}),exports[a31_0x19056b(0x17a)]=exports['me']=exports[a31_0x19056b(0x190)]=exports[a31_0x19056b(0x17e)]=void 0x0;const AppError_1=__importDefault(require('../errors/AppError')),socket_1=require(a31_0x19056b(0x189)),AuthUserService_1=__importDefault(require(a31_0x19056b(0x18a))),SendRefreshToken_1=require(a31_0x19056b(0x195)),RefreshTokenService_1=require(a31_0x19056b(0x17b)),FindUserFromToken_1=__importDefault(require(a31_0x19056b(0x191))),User_1=__importDefault(require(a31_0x19056b(0x17f))),store=async(_0x3a985b,_0x504519)=>{const _0x404abf=a31_0x19056b,{email:_0x4e517e,password:_0x388754}=_0x3a985b['body'],{token:_0x5942f9,serializedUser:_0x471d71,refreshToken:_0x49d5a7}=await(0x0,AuthUserService_1[_0x404abf(0x18d)])({'email':_0x4e517e,'password':_0x388754});(0x0,SendRefreshToken_1[_0x404abf(0x185)])(_0x504519,_0x49d5a7);const _0x346522=(0x0,socket_1[_0x404abf(0x17d)])();return _0x346522[_0x404abf(0x19a)](_0x404abf(0x181)+_0x471d71[_0x404abf(0x18e)]+_0x404abf(0x187),{'action':'update','user':{'id':_0x471d71['id'],'email':_0x471d71[_0x404abf(0x180)],'companyId':_0x471d71[_0x404abf(0x18e)]}}),_0x504519[_0x404abf(0x184)](0xc8)[_0x404abf(0x19b)]({'token':_0x5942f9,'user':_0x471d71});};exports[a31_0x19056b(0x17e)]=store;const update=async(_0x4d3c17,_0x264388)=>{const _0x144451=a31_0x19056b,_0x42f5e5=_0x4d3c17[_0x144451(0x193)][_0x144451(0x198)];if(!_0x42f5e5)throw new AppError_1[(_0x144451(0x18d))]('ERR_SESSION_EXPIRED',0x191);const {user:_0x3ac117,newToken:_0x57d740,refreshToken:_0x43b34f}=await(0x0,RefreshTokenService_1[_0x144451(0x19c)])(_0x264388,_0x42f5e5);return(0x0,SendRefreshToken_1[_0x144451(0x185)])(_0x264388,_0x43b34f),_0x264388[_0x144451(0x19b)]({'token':_0x57d740,'user':_0x3ac117});};exports['update']=update;function a31_0xb42b(_0x41ccfd,_0x4f1981){const _0x2ebe2c=a31_0x2ebe();return a31_0xb42b=function(_0xb42b89,_0x4e7995){_0xb42b89=_0xb42b89-0x178;let _0x55c5c4=_0x2ebe2c[_0xb42b89];return _0x55c5c4;},a31_0xb42b(_0x41ccfd,_0x4f1981);}const me=async(_0x5537fa,_0x96208b)=>{const _0x2f25aa=a31_0x19056b,_0x363375=_0x5537fa[_0x2f25aa(0x193)][_0x2f25aa(0x198)],_0x5eef10=await(0x0,FindUserFromToken_1[_0x2f25aa(0x18d)])(_0x363375),{id:_0x23f3a1,profile:_0x4cf723,super:_0x214f0c}=_0x5eef10;if(!_0x363375)throw new AppError_1[(_0x2f25aa(0x18d))](_0x2f25aa(0x194),0x191);return _0x96208b[_0x2f25aa(0x19b)]({'id':_0x23f3a1,'profile':_0x4cf723,'super':_0x214f0c});};exports['me']=me;function a31_0x2ebe(){const _0x14dd93=['../models/User','email','company-','931184fWRqIF','214660caYoJC','status','SendRefreshToken','5408718rGcXNc','-auth','15464574bZCTpp','../libs/socket','../services/UserServices/AuthUserService','91FRwBiE','15ugpfJZ','default','companyId','897544UhDeMl','update','../services/AuthServices/FindUserFromToken','2603558CVSjrh','cookies','ERR_SESSION_EXPIRED','../helpers/SendRefreshToken','973230fojFCi','findByPk','jrt','__importDefault','emit','json','RefreshTokenService','clearCookie','3biajsh','send','957ghpZHI','remove','../services/AuthServices/RefreshTokenService','__esModule','getIO','store'];a31_0x2ebe=function(){return _0x14dd93;};return a31_0x2ebe();}const remove=async(_0x520ac3,_0xdccb8b)=>{const _0x12c57b=a31_0x19056b,{id:_0xfc8919}=_0x520ac3['user'],_0x59ad10=await User_1[_0x12c57b(0x18d)][_0x12c57b(0x197)](_0xfc8919);return await _0x59ad10[_0x12c57b(0x190)]({'online':![]}),_0xdccb8b[_0x12c57b(0x19d)]('jrt'),_0xdccb8b[_0x12c57b(0x178)]();};exports[a31_0x19056b(0x17a)]=remove;