'use strict';const a30_0x40c84b=a30_0x592d;function a30_0x592d(_0x4c8dfa,_0x3ffcf4){const _0x36aae0=a30_0x36aa();return a30_0x592d=function(_0x592d83,_0xad72e6){_0x592d83=_0x592d83-0x1ee;let _0x33ce54=_0x36aae0[_0x592d83];return _0x33ce54;},a30_0x592d(_0x4c8dfa,_0x3ffcf4);}(function(_0x290d64,_0x3cbca0){const _0x232c79=a30_0x592d,_0x580051=_0x290d64();while(!![]){try{const _0x11acc0=-parseInt(_0x232c79(0x211))/0x1*(-parseInt(_0x232c79(0x1f5))/0x2)+parseInt(_0x232c79(0x1f9))/0x3*(parseInt(_0x232c79(0x1fb))/0x4)+-parseInt(_0x232c79(0x1fe))/0x5*(-parseInt(_0x232c79(0x1f4))/0x6)+parseInt(_0x232c79(0x1ff))/0x7+-parseInt(_0x232c79(0x1fc))/0x8*(parseInt(_0x232c79(0x209))/0x9)+-parseInt(_0x232c79(0x20e))/0xa*(-parseInt(_0x232c79(0x1f2))/0xb)+-parseInt(_0x232c79(0x213))/0xc;if(_0x11acc0===_0x3cbca0)break;else _0x580051['push'](_0x580051['shift']());}catch(_0xdab844){_0x580051['push'](_0x580051['shift']());}}}(a30_0x36aa,0xf30ca));var __importDefault=this&&this[a30_0x40c84b(0x1f7)]||function(_0x4c6425){return _0x4c6425&&_0x4c6425['__esModule']?_0x4c6425:{'default':_0x4c6425};};Object[a30_0x40c84b(0x204)](exports,a30_0x40c84b(0x200),{'value':!![]}),exports[a30_0x40c84b(0x208)]=exports['me']=exports[a30_0x40c84b(0x1f0)]=exports[a30_0x40c84b(0x1f3)]=void 0x0;const AppError_1=__importDefault(require(a30_0x40c84b(0x207))),socket_1=require(a30_0x40c84b(0x203)),AuthUserService_1=__importDefault(require(a30_0x40c84b(0x1ef))),SendRefreshToken_1=require(a30_0x40c84b(0x1f6)),RefreshTokenService_1=require(a30_0x40c84b(0x1fd)),FindUserFromToken_1=__importDefault(require(a30_0x40c84b(0x202))),User_1=__importDefault(require(a30_0x40c84b(0x20f))),store=async(_0x12dcf2,_0x58808e)=>{const _0x53b544=a30_0x40c84b,{email:_0x3faf3a,password:_0x52f122}=_0x12dcf2[_0x53b544(0x1ee)],{token:_0xab1d0f,serializedUser:_0xd6d556,refreshToken:_0x642eaf}=await(0x0,AuthUserService_1[_0x53b544(0x201)])({'email':_0x3faf3a,'password':_0x52f122});(0x0,SendRefreshToken_1['SendRefreshToken'])(_0x58808e,_0x642eaf);const _0x111043=(0x0,socket_1[_0x53b544(0x205)])();return _0x111043['emit'](_0x53b544(0x1fa)+_0xd6d556[_0x53b544(0x206)]+'-auth',{'action':_0x53b544(0x1f0),'user':{'id':_0xd6d556['id'],'email':_0xd6d556[_0x53b544(0x210)],'companyId':_0xd6d556[_0x53b544(0x206)]}}),_0x58808e[_0x53b544(0x20c)](0xc8)[_0x53b544(0x1f8)]({'token':_0xab1d0f,'user':_0xd6d556});};exports[a30_0x40c84b(0x1f3)]=store;const update=async(_0x2f552b,_0x3b1903)=>{const _0x216267=a30_0x40c84b,_0x5dc846=_0x2f552b[_0x216267(0x212)][_0x216267(0x20a)];if(!_0x5dc846)throw new AppError_1['default']('ERR_SESSION_EXPIRED',0x191);const {user:_0x28b468,newToken:_0x4d0e3c,refreshToken:_0x1e48c0}=await(0x0,RefreshTokenService_1[_0x216267(0x20b)])(_0x3b1903,_0x5dc846);return(0x0,SendRefreshToken_1[_0x216267(0x1f1)])(_0x3b1903,_0x1e48c0),_0x3b1903[_0x216267(0x1f8)]({'token':_0x4d0e3c,'user':_0x28b468});};exports[a30_0x40c84b(0x1f0)]=update;const me=async(_0x295e24,_0x399c73)=>{const _0x48175b=a30_0x40c84b,_0x4fe26c=_0x295e24['cookies']['jrt'],_0x20d702=await(0x0,FindUserFromToken_1[_0x48175b(0x201)])(_0x4fe26c),{id:_0x16bf16,profile:_0x398fcf,super:_0x49c608}=_0x20d702;if(!_0x4fe26c)throw new AppError_1['default']('ERR_SESSION_EXPIRED',0x191);return _0x399c73[_0x48175b(0x1f8)]({'id':_0x16bf16,'profile':_0x398fcf,'super':_0x49c608});};function a30_0x36aa(){const _0x490e7e=['__importDefault','json','183KiJYYZ','company-','18296IsOBrb','472HhLliB','../services/AuthServices/RefreshTokenService','19590tnhBpL','10219706dDmFxO','__esModule','default','../services/AuthServices/FindUserFromToken','../libs/socket','defineProperty','getIO','companyId','../errors/AppError','remove','165303xCBbFB','jrt','RefreshTokenService','status','user','5290LiSspN','../models/User','email','907723OMhkIY','cookies','21728088TRMdJL','body','../services/UserServices/AuthUserService','update','SendRefreshToken','15422FCEWUq','store','768yXMVEU','2YQRpVK','../helpers/SendRefreshToken'];a30_0x36aa=function(){return _0x490e7e;};return a30_0x36aa();}exports['me']=me;const remove=async(_0x592c6c,_0x4693a1)=>{const _0x3d9ab7=a30_0x40c84b,{id:_0x27f0c8}=_0x592c6c[_0x3d9ab7(0x20d)],_0x3a5727=await User_1[_0x3d9ab7(0x201)]['findByPk'](_0x27f0c8);return await _0x3a5727['update']({'online':![]}),_0x4693a1['clearCookie'](_0x3d9ab7(0x20a)),_0x4693a1['send']();};exports['remove']=remove;