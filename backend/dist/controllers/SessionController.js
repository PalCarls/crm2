'use strict';const a31_0x4adb54=a31_0x1cc1;(function(_0x1e2f07,_0xbe04d3){const _0xb5315f=a31_0x1cc1,_0x1159da=_0x1e2f07();while(!![]){try{const _0x9aff1c=parseInt(_0xb5315f(0x1a8))/0x1+-parseInt(_0xb5315f(0x1ad))/0x2+parseInt(_0xb5315f(0x191))/0x3*(parseInt(_0xb5315f(0x19e))/0x4)+-parseInt(_0xb5315f(0x192))/0x5*(-parseInt(_0xb5315f(0x1a3))/0x6)+-parseInt(_0xb5315f(0x19c))/0x7*(parseInt(_0xb5315f(0x1a0))/0x8)+-parseInt(_0xb5315f(0x197))/0x9+-parseInt(_0xb5315f(0x19d))/0xa;if(_0x9aff1c===_0xbe04d3)break;else _0x1159da['push'](_0x1159da['shift']());}catch(_0x3e2f48){_0x1159da['push'](_0x1159da['shift']());}}}(a31_0x3722,0x7947a));var __importDefault=this&&this[a31_0x4adb54(0x19b)]||function(_0x1832fb){const _0x484dc7=a31_0x4adb54;return _0x1832fb&&_0x1832fb[_0x484dc7(0x1a6)]?_0x1832fb:{'default':_0x1832fb};};Object[a31_0x4adb54(0x1b3)](exports,'__esModule',{'value':!![]}),exports['remove']=exports['me']=exports[a31_0x4adb54(0x195)]=exports[a31_0x4adb54(0x1af)]=void 0x0;const AppError_1=__importDefault(require(a31_0x4adb54(0x1a7))),socket_1=require('../libs/socket'),AuthUserService_1=__importDefault(require('../services/UserServices/AuthUserService')),SendRefreshToken_1=require('../helpers/SendRefreshToken'),RefreshTokenService_1=require(a31_0x4adb54(0x1ae)),FindUserFromToken_1=__importDefault(require('../services/AuthServices/FindUserFromToken')),User_1=__importDefault(require(a31_0x4adb54(0x193))),store=async(_0x5d29df,_0x585c49)=>{const _0x11108a=a31_0x4adb54,{email:_0x4db0a5,password:_0x5c949d}=_0x5d29df['body'],{token:_0x22118a,serializedUser:_0x5a0e09,refreshToken:_0x1b69a4}=await(0x0,AuthUserService_1[_0x11108a(0x199)])({'email':_0x4db0a5,'password':_0x5c949d});(0x0,SendRefreshToken_1['SendRefreshToken'])(_0x585c49,_0x1b69a4);const _0xf68ba2=(0x0,socket_1[_0x11108a(0x1a4)])();return _0xf68ba2[_0x11108a(0x1b1)](_0x11108a(0x196)+_0x5a0e09[_0x11108a(0x1b2)]+_0x11108a(0x1ac),{'action':_0x11108a(0x195),'user':{'id':_0x5a0e09['id'],'email':_0x5a0e09['email'],'companyId':_0x5a0e09['companyId']}}),_0x585c49[_0x11108a(0x1a9)](0xc8)['json']({'token':_0x22118a,'user':_0x5a0e09});};exports[a31_0x4adb54(0x1af)]=store;const update=async(_0x2c868f,_0x40d12f)=>{const _0x497952=a31_0x4adb54,_0x323131=_0x2c868f['cookies'][_0x497952(0x1a2)];if(!_0x323131)throw new AppError_1[(_0x497952(0x199))](_0x497952(0x198),0x191);const {user:_0x54f866,newToken:_0x26fcb3,refreshToken:_0xcfc842}=await(0x0,RefreshTokenService_1[_0x497952(0x1ab)])(_0x40d12f,_0x323131);return(0x0,SendRefreshToken_1[_0x497952(0x19f)])(_0x40d12f,_0xcfc842),_0x40d12f['json']({'token':_0x26fcb3,'user':_0x54f866});};exports['update']=update;const me=async(_0xa65358,_0xf0e0f9)=>{const _0x4e56c1=a31_0x4adb54,_0x2ab629=_0xa65358[_0x4e56c1(0x19a)]['jrt'],_0x16490b=await(0x0,FindUserFromToken_1['default'])(_0x2ab629),{id:_0x2a0ac0,profile:_0x462d74,super:_0xd62cb0}=_0x16490b;if(!_0x2ab629)throw new AppError_1[(_0x4e56c1(0x199))](_0x4e56c1(0x198),0x191);return _0xf0e0f9[_0x4e56c1(0x194)]({'id':_0x2a0ac0,'profile':_0x462d74,'super':_0xd62cb0});};function a31_0x1cc1(_0x351af8,_0x4d1033){const _0x37222c=a31_0x3722();return a31_0x1cc1=function(_0x1cc15d,_0x1b98ea){_0x1cc15d=_0x1cc15d-0x190;let _0x110f44=_0x37222c[_0x1cc15d];return _0x110f44;},a31_0x1cc1(_0x351af8,_0x4d1033);}exports['me']=me;function a31_0x3722(){const _0x4da338=['defineProperty','user','543DKKPrE','33940BHixhP','../models/User','json','update','company-','818280HldjSH','ERR_SESSION_EXPIRED','default','cookies','__importDefault','37009bGGzhY','8914680fMZTdt','21052Ducqtp','SendRefreshToken','272EuQxSA','remove','jrt','810hjfVBK','getIO','send','__esModule','../errors/AppError','261122iXOPvk','status','clearCookie','RefreshTokenService','-auth','942394peJCcM','../services/AuthServices/RefreshTokenService','store','findByPk','emit','companyId'];a31_0x3722=function(){return _0x4da338;};return a31_0x3722();}const remove=async(_0xbb5743,_0x425d0e)=>{const _0x124aa1=a31_0x4adb54,{id:_0x936454}=_0xbb5743[_0x124aa1(0x190)],_0x2121f0=await User_1['default'][_0x124aa1(0x1b0)](_0x936454);return await _0x2121f0[_0x124aa1(0x195)]({'online':![]}),_0x425d0e[_0x124aa1(0x1aa)](_0x124aa1(0x1a2)),_0x425d0e[_0x124aa1(0x1a5)]();};exports[a31_0x4adb54(0x1a1)]=remove;