'use strict';const a29_0x2d39bb=a29_0xef99;(function(_0x39a3fa,_0x1c1180){const _0x33db3b=a29_0xef99,_0x1b536d=_0x39a3fa();while(!![]){try{const _0x27de92=-parseInt(_0x33db3b(0x215))/0x1*(-parseInt(_0x33db3b(0x20f))/0x2)+-parseInt(_0x33db3b(0x1f4))/0x3*(parseInt(_0x33db3b(0x208))/0x4)+-parseInt(_0x33db3b(0x204))/0x5+parseInt(_0x33db3b(0x1f5))/0x6+-parseInt(_0x33db3b(0x200))/0x7*(parseInt(_0x33db3b(0x1ff))/0x8)+parseInt(_0x33db3b(0x213))/0x9+parseInt(_0x33db3b(0x1fb))/0xa;if(_0x27de92===_0x1c1180)break;else _0x1b536d['push'](_0x1b536d['shift']());}catch(_0x3d7325){_0x1b536d['push'](_0x1b536d['shift']());}}}(a29_0x46f6,0x8cf12));var __importDefault=this&&this['__importDefault']||function(_0x4ef3ff){const _0x5a9dcc=a29_0xef99;return _0x4ef3ff&&_0x4ef3ff[_0x5a9dcc(0x20a)]?_0x4ef3ff:{'default':_0x4ef3ff};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a29_0x2d39bb(0x1fe)]=exports['me']=exports[a29_0x2d39bb(0x20b)]=exports['store']=void 0x0;const AppError_1=__importDefault(require(a29_0x2d39bb(0x1fd))),socket_1=require(a29_0x2d39bb(0x205)),AuthUserService_1=__importDefault(require(a29_0x2d39bb(0x1f6))),SendRefreshToken_1=require(a29_0x2d39bb(0x209)),RefreshTokenService_1=require(a29_0x2d39bb(0x211)),FindUserFromToken_1=__importDefault(require(a29_0x2d39bb(0x201))),User_1=__importDefault(require(a29_0x2d39bb(0x1fc))),store=async(_0x41b840,_0x23443a)=>{const _0x4e1274=a29_0x2d39bb,{email:_0x282ea4,password:_0x27fd5a}=_0x41b840[_0x4e1274(0x206)],{token:_0x8e0b6,serializedUser:_0x332559,refreshToken:_0x515912}=await(0x0,AuthUserService_1[_0x4e1274(0x1f8)])({'email':_0x282ea4,'password':_0x27fd5a});(0x0,SendRefreshToken_1[_0x4e1274(0x1f9)])(_0x23443a,_0x515912);const _0x262a9c=(0x0,socket_1[_0x4e1274(0x212)])();return _0x262a9c['emit'](_0x4e1274(0x203)+_0x332559[_0x4e1274(0x20d)]+_0x4e1274(0x1fa),{'action':_0x4e1274(0x20b),'user':{'id':_0x332559['id'],'email':_0x332559[_0x4e1274(0x1f3)],'companyId':_0x332559['companyId']}}),_0x23443a['status'](0xc8)[_0x4e1274(0x20e)]({'token':_0x8e0b6,'user':_0x332559});};exports[a29_0x2d39bb(0x1f2)]=store;function a29_0x46f6(){const _0x255ad3=['ERR_SESSION_EXPIRED','company-','2963295kJtJNl','../libs/socket','body','send','4VrIKPW','../helpers/SendRefreshToken','__esModule','update','jrt','companyId','json','2398ANVyAE','cookies','../services/AuthServices/RefreshTokenService','getIO','1683144OGWwEk','clearCookie','727ispiUG','store','email','2289219MQOMRB','2981772mCAOOT','../services/UserServices/AuthUserService','findByPk','default','SendRefreshToken','-auth','5526380UjHMNq','../models/User','../errors/AppError','remove','200296KAiEVd','49LPhEhC','../services/AuthServices/FindUserFromToken'];a29_0x46f6=function(){return _0x255ad3;};return a29_0x46f6();}const update=async(_0x1c5a4c,_0x42524e)=>{const _0xf901e5=a29_0x2d39bb,_0x2e800a=_0x1c5a4c[_0xf901e5(0x210)][_0xf901e5(0x20c)];if(!_0x2e800a)throw new AppError_1['default'](_0xf901e5(0x202),0x191);const {user:_0x1be75f,newToken:_0xc03b46,refreshToken:_0x1b33b9}=await(0x0,RefreshTokenService_1['RefreshTokenService'])(_0x42524e,_0x2e800a);return(0x0,SendRefreshToken_1[_0xf901e5(0x1f9)])(_0x42524e,_0x1b33b9),_0x42524e['json']({'token':_0xc03b46,'user':_0x1be75f});};function a29_0xef99(_0x235fd4,_0x3e1a1a){const _0x46f6bf=a29_0x46f6();return a29_0xef99=function(_0xef9983,_0x176467){_0xef9983=_0xef9983-0x1f2;let _0x5937ee=_0x46f6bf[_0xef9983];return _0x5937ee;},a29_0xef99(_0x235fd4,_0x3e1a1a);}exports[a29_0x2d39bb(0x20b)]=update;const me=async(_0x2c294a,_0x14d6b4)=>{const _0x206ac8=a29_0x2d39bb,_0x25169b=_0x2c294a[_0x206ac8(0x210)][_0x206ac8(0x20c)],_0x5454d0=await(0x0,FindUserFromToken_1['default'])(_0x25169b),{id:_0x17672b,profile:_0xb22ffd,super:_0x24fb11}=_0x5454d0;if(!_0x25169b)throw new AppError_1[(_0x206ac8(0x1f8))]('ERR_SESSION_EXPIRED',0x191);return _0x14d6b4[_0x206ac8(0x20e)]({'id':_0x17672b,'profile':_0xb22ffd,'super':_0x24fb11});};exports['me']=me;const remove=async(_0x3d4d5f,_0x2ac0c6)=>{const _0xae4b51=a29_0x2d39bb,{id:_0x1a73cc}=_0x3d4d5f['user'],_0x39a30d=await User_1[_0xae4b51(0x1f8)][_0xae4b51(0x1f7)](_0x1a73cc);return await _0x39a30d[_0xae4b51(0x20b)]({'online':![]}),_0x2ac0c6[_0xae4b51(0x214)](_0xae4b51(0x20c)),_0x2ac0c6[_0xae4b51(0x207)]();};exports[a29_0x2d39bb(0x1fe)]=remove;