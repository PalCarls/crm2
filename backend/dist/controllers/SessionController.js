'use strict';const a30_0x4abe67=a30_0x1609;(function(_0x17794b,_0x319f6f){const _0x5c5691=a30_0x1609,_0x57b5d1=_0x17794b();while(!![]){try{const _0x3ee16=parseInt(_0x5c5691(0x1be))/0x1*(-parseInt(_0x5c5691(0x1ad))/0x2)+parseInt(_0x5c5691(0x1ba))/0x3+parseInt(_0x5c5691(0x1ae))/0x4+-parseInt(_0x5c5691(0x1b9))/0x5+-parseInt(_0x5c5691(0x1a8))/0x6+parseInt(_0x5c5691(0x1b6))/0x7*(parseInt(_0x5c5691(0x1b5))/0x8)+-parseInt(_0x5c5691(0x1c3))/0x9;if(_0x3ee16===_0x319f6f)break;else _0x57b5d1['push'](_0x57b5d1['shift']());}catch(_0x5c5285){_0x57b5d1['push'](_0x57b5d1['shift']());}}}(a30_0xb6b7,0x59113));function a30_0xb6b7(){const _0x9ff32c=['defineProperty','8ARByCl','4347658BFQoly','ERR_SESSION_EXPIRED','store','2303620cFoDQZ','2007972umBKBP','default','company-','findByPk','17DiMSNG','jrt','json','remove','companyId','1749384lJYXxi','send','../errors/AppError','body','status','user','__esModule','604314raOjhm','clearCookie','email','update','__importDefault','36044qqPIrn','546376HWojVr','SendRefreshToken','cookies','../services/AuthServices/FindUserFromToken','../models/User','../helpers/SendRefreshToken'];a30_0xb6b7=function(){return _0x9ff32c;};return a30_0xb6b7();}var __importDefault=this&&this[a30_0x4abe67(0x1ac)]||function(_0x407da0){const _0x44c389=a30_0x4abe67;return _0x407da0&&_0x407da0[_0x44c389(0x1a7)]?_0x407da0:{'default':_0x407da0};};Object[a30_0x4abe67(0x1b4)](exports,a30_0x4abe67(0x1a7),{'value':!![]}),exports[a30_0x4abe67(0x1c1)]=exports['me']=exports[a30_0x4abe67(0x1ab)]=exports[a30_0x4abe67(0x1b8)]=void 0x0;const AppError_1=__importDefault(require(a30_0x4abe67(0x1c5))),socket_1=require('../libs/socket'),AuthUserService_1=__importDefault(require('../services/UserServices/AuthUserService')),SendRefreshToken_1=require(a30_0x4abe67(0x1b3)),RefreshTokenService_1=require('../services/AuthServices/RefreshTokenService'),FindUserFromToken_1=__importDefault(require(a30_0x4abe67(0x1b1))),User_1=__importDefault(require(a30_0x4abe67(0x1b2))),store=async(_0x117608,_0x43f4d2)=>{const _0x3fe74f=a30_0x4abe67,{email:_0x137cec,password:_0x4c3f64}=_0x117608[_0x3fe74f(0x1c6)],{token:_0x3b8c52,serializedUser:_0x7e5d8f,refreshToken:_0x39b6b1}=await(0x0,AuthUserService_1['default'])({'email':_0x137cec,'password':_0x4c3f64});(0x0,SendRefreshToken_1[_0x3fe74f(0x1af)])(_0x43f4d2,_0x39b6b1);const _0x286377=(0x0,socket_1['getIO'])();return _0x286377['emit'](_0x3fe74f(0x1bc)+_0x7e5d8f[_0x3fe74f(0x1c2)]+'-auth',{'action':_0x3fe74f(0x1ab),'user':{'id':_0x7e5d8f['id'],'email':_0x7e5d8f[_0x3fe74f(0x1aa)],'companyId':_0x7e5d8f[_0x3fe74f(0x1c2)]}}),_0x43f4d2[_0x3fe74f(0x1a5)](0xc8)['json']({'token':_0x3b8c52,'user':_0x7e5d8f});};function a30_0x1609(_0x512a71,_0x548b44){const _0xb6b724=a30_0xb6b7();return a30_0x1609=function(_0x1609e7,_0x185556){_0x1609e7=_0x1609e7-0x1a5;let _0x5d5d28=_0xb6b724[_0x1609e7];return _0x5d5d28;},a30_0x1609(_0x512a71,_0x548b44);}exports['store']=store;const update=async(_0x289f22,_0x332f38)=>{const _0x389530=a30_0x4abe67,_0x51339a=_0x289f22[_0x389530(0x1b0)]['jrt'];if(!_0x51339a)throw new AppError_1[(_0x389530(0x1bb))](_0x389530(0x1b7),0x191);const {user:_0x2e4c54,newToken:_0xb49ec8,refreshToken:_0x56e683}=await(0x0,RefreshTokenService_1['RefreshTokenService'])(_0x332f38,_0x51339a);return(0x0,SendRefreshToken_1[_0x389530(0x1af)])(_0x332f38,_0x56e683),_0x332f38[_0x389530(0x1c0)]({'token':_0xb49ec8,'user':_0x2e4c54});};exports[a30_0x4abe67(0x1ab)]=update;const me=async(_0x1c1297,_0x15bceb)=>{const _0x4098db=a30_0x4abe67,_0x3f373e=_0x1c1297[_0x4098db(0x1b0)][_0x4098db(0x1bf)],_0x4e4848=await(0x0,FindUserFromToken_1[_0x4098db(0x1bb)])(_0x3f373e),{id:_0x751f9a,profile:_0x5e4e7b,super:_0x45d4b6}=_0x4e4848;if(!_0x3f373e)throw new AppError_1['default'](_0x4098db(0x1b7),0x191);return _0x15bceb['json']({'id':_0x751f9a,'profile':_0x5e4e7b,'super':_0x45d4b6});};exports['me']=me;const remove=async(_0xd8d6da,_0x3e53da)=>{const _0x220c8a=a30_0x4abe67,{id:_0x584e5f}=_0xd8d6da[_0x220c8a(0x1a6)],_0x530130=await User_1[_0x220c8a(0x1bb)][_0x220c8a(0x1bd)](_0x584e5f);return await _0x530130[_0x220c8a(0x1ab)]({'online':![]}),_0x3e53da[_0x220c8a(0x1a9)](_0x220c8a(0x1bf)),_0x3e53da[_0x220c8a(0x1c4)]();};exports[a30_0x4abe67(0x1c1)]=remove;