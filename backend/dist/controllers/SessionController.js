'use strict';const a31_0x2329fe=a31_0x37c9;(function(_0x9451af,_0x75db90){const _0x31b058=a31_0x37c9,_0x3c97d6=_0x9451af();while(!![]){try{const _0x5e3ae1=parseInt(_0x31b058(0x1fd))/0x1+-parseInt(_0x31b058(0x1f8))/0x2+-parseInt(_0x31b058(0x214))/0x3+parseInt(_0x31b058(0x1f7))/0x4*(-parseInt(_0x31b058(0x210))/0x5)+-parseInt(_0x31b058(0x1fa))/0x6+-parseInt(_0x31b058(0x213))/0x7+parseInt(_0x31b058(0x209))/0x8;if(_0x5e3ae1===_0x75db90)break;else _0x3c97d6['push'](_0x3c97d6['shift']());}catch(_0x330f5f){_0x3c97d6['push'](_0x3c97d6['shift']());}}}(a31_0xf921,0x98307));function a31_0xf921(){const _0x46d060=['../services/AuthServices/FindUserFromToken','emit','../errors/AppError','store','user','company-','4PHlfgY','124870RcMUiT','clearCookie','3053808bCqRzr','findByPk','status','226840aaSTgV','../services/AuthServices/RefreshTokenService','body','default','ERR_SESSION_EXPIRED','companyId','getIO','RefreshTokenService','__esModule','../models/User','jrt','remove','29913888NfAZSM','json','send','-auth','../libs/socket','__importDefault','defineProperty','5967635BGzLOk','email','update','8545334oFKxlL','1071051KkZglG','../services/UserServices/AuthUserService'];a31_0xf921=function(){return _0x46d060;};return a31_0xf921();}var __importDefault=this&&this[a31_0x2329fe(0x20e)]||function(_0x1c36d9){return _0x1c36d9&&_0x1c36d9['__esModule']?_0x1c36d9:{'default':_0x1c36d9};};Object[a31_0x2329fe(0x20f)](exports,a31_0x2329fe(0x205),{'value':!![]}),exports[a31_0x2329fe(0x208)]=exports['me']=exports['update']=exports[a31_0x2329fe(0x1f4)]=void 0x0;const AppError_1=__importDefault(require(a31_0x2329fe(0x1f3))),socket_1=require(a31_0x2329fe(0x20d)),AuthUserService_1=__importDefault(require(a31_0x2329fe(0x215))),SendRefreshToken_1=require('../helpers/SendRefreshToken'),RefreshTokenService_1=require(a31_0x2329fe(0x1fe)),FindUserFromToken_1=__importDefault(require(a31_0x2329fe(0x216))),User_1=__importDefault(require(a31_0x2329fe(0x206))),store=async(_0x183bfc,_0x18d5db)=>{const _0x135036=a31_0x2329fe,{email:_0x2e364b,password:_0x28b305}=_0x183bfc[_0x135036(0x1ff)],{token:_0x5a1efe,serializedUser:_0x49d3a2,refreshToken:_0x432ffd}=await(0x0,AuthUserService_1[_0x135036(0x200)])({'email':_0x2e364b,'password':_0x28b305});(0x0,SendRefreshToken_1['SendRefreshToken'])(_0x18d5db,_0x432ffd);const _0x523583=(0x0,socket_1[_0x135036(0x203)])();return _0x523583[_0x135036(0x1f2)](_0x135036(0x1f6)+_0x49d3a2[_0x135036(0x202)]+_0x135036(0x20c),{'action':_0x135036(0x212),'user':{'id':_0x49d3a2['id'],'email':_0x49d3a2[_0x135036(0x211)],'companyId':_0x49d3a2['companyId']}}),_0x18d5db[_0x135036(0x1fc)](0xc8)[_0x135036(0x20a)]({'token':_0x5a1efe,'user':_0x49d3a2});};exports['store']=store;function a31_0x37c9(_0x2efa7a,_0x4f93a1){const _0xf9212f=a31_0xf921();return a31_0x37c9=function(_0x37c99a,_0xd51593){_0x37c99a=_0x37c99a-0x1f2;let _0x1073b8=_0xf9212f[_0x37c99a];return _0x1073b8;},a31_0x37c9(_0x2efa7a,_0x4f93a1);}const update=async(_0x2da252,_0x292256)=>{const _0x527281=a31_0x2329fe,_0x1039cc=_0x2da252['cookies'][_0x527281(0x207)];if(!_0x1039cc)throw new AppError_1[(_0x527281(0x200))](_0x527281(0x201),0x191);const {user:_0x5b152e,newToken:_0x3ea640,refreshToken:_0x36bf5f}=await(0x0,RefreshTokenService_1[_0x527281(0x204)])(_0x292256,_0x1039cc);return(0x0,SendRefreshToken_1['SendRefreshToken'])(_0x292256,_0x36bf5f),_0x292256[_0x527281(0x20a)]({'token':_0x3ea640,'user':_0x5b152e});};exports[a31_0x2329fe(0x212)]=update;const me=async(_0x214b49,_0x5f3d00)=>{const _0x2f6605=a31_0x2329fe,_0x5dcb9f=_0x214b49['cookies']['jrt'],_0x3dbb43=await(0x0,FindUserFromToken_1['default'])(_0x5dcb9f),{id:_0x1994f6,profile:_0x195b8b,super:_0x1bccae}=_0x3dbb43;if(!_0x5dcb9f)throw new AppError_1[(_0x2f6605(0x200))]('ERR_SESSION_EXPIRED',0x191);return _0x5f3d00[_0x2f6605(0x20a)]({'id':_0x1994f6,'profile':_0x195b8b,'super':_0x1bccae});};exports['me']=me;const remove=async(_0xd5f544,_0x148ded)=>{const _0x124d69=a31_0x2329fe,{id:_0x21156f}=_0xd5f544[_0x124d69(0x1f5)],_0x1098f8=await User_1[_0x124d69(0x200)][_0x124d69(0x1fb)](_0x21156f);return await _0x1098f8[_0x124d69(0x212)]({'online':![]}),_0x148ded[_0x124d69(0x1f9)](_0x124d69(0x207)),_0x148ded[_0x124d69(0x20b)]();};exports[a31_0x2329fe(0x208)]=remove;