'use strict';const a14_0x14c065=a14_0x49e8;(function(_0x43d323,_0x4b3c07){const _0x6d8f57=a14_0x49e8,_0x37aca5=_0x43d323();while(!![]){try{const _0x5ac8d0=parseInt(_0x6d8f57(0xe9))/0x1+parseInt(_0x6d8f57(0x101))/0x2*(-parseInt(_0x6d8f57(0xfa))/0x3)+parseInt(_0x6d8f57(0xf5))/0x4+-parseInt(_0x6d8f57(0x10c))/0x5+-parseInt(_0x6d8f57(0xf8))/0x6+parseInt(_0x6d8f57(0x11a))/0x7*(parseInt(_0x6d8f57(0x106))/0x8)+-parseInt(_0x6d8f57(0xe6))/0x9;if(_0x5ac8d0===_0x4b3c07)break;else _0x37aca5['push'](_0x37aca5['shift']());}catch(_0x263858){_0x37aca5['push'](_0x37aca5['shift']());}}}(a14_0x2600,0x8a406));var __createBinding=this&&this['__createBinding']||(Object[a14_0x14c065(0xe8)]?function(_0x538e91,_0x240428,_0xf34e8,_0xdc4a2f){const _0x1b70de=a14_0x14c065;if(_0xdc4a2f===undefined)_0xdc4a2f=_0xf34e8;var _0x2550ce=Object[_0x1b70de(0x10a)](_0x240428,_0xf34e8);(!_0x2550ce||(_0x1b70de(0xf1)in _0x2550ce?!_0x240428[_0x1b70de(0xea)]:_0x2550ce[_0x1b70de(0x107)]||_0x2550ce[_0x1b70de(0x108)]))&&(_0x2550ce={'enumerable':!![],'get':function(){return _0x240428[_0xf34e8];}}),Object[_0x1b70de(0x117)](_0x538e91,_0xdc4a2f,_0x2550ce);}:function(_0x3a321a,_0xfaf48a,_0x2ab2c0,_0x22ebab){if(_0x22ebab===undefined)_0x22ebab=_0x2ab2c0;_0x3a321a[_0x22ebab]=_0xfaf48a[_0x2ab2c0];}),__setModuleDefault=this&&this[a14_0x14c065(0x119)]||(Object['create']?function(_0x514d9c,_0x59ab64){const _0x706461=a14_0x14c065;Object[_0x706461(0x117)](_0x514d9c,_0x706461(0x10b),{'enumerable':!![],'value':_0x59ab64});}:function(_0x50844a,_0x4c7cc3){_0x50844a['default']=_0x4c7cc3;}),__importStar=this&&this['__importStar']||function(_0x551a9d){const _0xe85cb7=a14_0x14c065;if(_0x551a9d&&_0x551a9d[_0xe85cb7(0xea)])return _0x551a9d;var _0x2ffe8f={};if(_0x551a9d!=null){for(var _0x1465e0 in _0x551a9d)if(_0x1465e0!==_0xe85cb7(0x10b)&&Object['prototype']['hasOwnProperty'][_0xe85cb7(0x112)](_0x551a9d,_0x1465e0))__createBinding(_0x2ffe8f,_0x551a9d,_0x1465e0);}return __setModuleDefault(_0x2ffe8f,_0x551a9d),_0x2ffe8f;},__importDefault=this&&this[a14_0x14c065(0x120)]||function(_0x50e1df){const _0x2b2995=a14_0x14c065;return _0x50e1df&&_0x50e1df[_0x2b2995(0xea)]?_0x50e1df:{'default':_0x50e1df};};Object[a14_0x14c065(0x117)](exports,'__esModule',{'value':!![]}),exports[a14_0x14c065(0xe7)]=exports['getContactProfileURL']=exports['upload']=exports[a14_0x14c065(0x123)]=exports[a14_0x14c065(0xff)]=exports[a14_0x14c065(0x11d)]=exports[a14_0x14c065(0x124)]=exports['update']=exports['show']=exports['store']=exports['getContact']=exports[a14_0x14c065(0x127)]=exports[a14_0x14c065(0xf2)]=void 0x0;const Yup=__importStar(require('yup')),socket_1=require(a14_0x14c065(0x122)),lodash_1=require('lodash'),ListContactsService_1=__importDefault(require(a14_0x14c065(0xef))),CreateContactService_1=__importDefault(require('../services/ContactServices/CreateContactService')),ShowContactService_1=__importDefault(require(a14_0x14c065(0xfc))),UpdateContactService_1=__importDefault(require(a14_0x14c065(0xfb))),DeleteContactService_1=__importDefault(require(a14_0x14c065(0x10d))),GetContactService_1=__importDefault(require('../services/ContactServices/GetContactService')),CheckNumber_1=__importDefault(require(a14_0x14c065(0x116))),CheckIsValidContact_1=__importDefault(require(a14_0x14c065(0xf4))),GetProfilePicUrl_1=__importDefault(require(a14_0x14c065(0x109))),AppError_1=__importDefault(require(a14_0x14c065(0xed))),SimpleListService_1=__importDefault(require(a14_0x14c065(0xf0))),ToggleAcceptAudioContactService_1=__importDefault(require('../services/ContactServices/ToggleAcceptAudioContactService')),BlockUnblockContactService_1=__importDefault(require(a14_0x14c065(0x103))),ImportContactsService_1=require(a14_0x14c065(0x105)),NumberSimpleListService_1=__importDefault(require('../services/ContactServices/NumberSimpleListService')),CreateOrUpdateContactServiceForImport_1=__importDefault(require('../services/ContactServices/CreateOrUpdateContactServiceForImport')),importXls=async(_0xabfe77,_0x2ad3b4)=>{const _0x531dbf=a14_0x14c065,{companyId:_0x39b74e}=_0xabfe77[_0x531dbf(0xec)],{number:_0x2b9368,name:_0x434fd8,email:_0x59bc38}=_0xabfe77[_0x531dbf(0x121)],_0x2877de=_0x2b9368['replace'](/[^\d.-]+/g,'');console['log']('simpleNumber>\x20',_0x2877de),console[_0x531dbf(0x100)]('name>\x20',_0x434fd8);const _0x471411=await(0x0,CheckNumber_1[_0x531dbf(0x10b)])(_0x2877de,_0x39b74e);console['log']('60',_0x471411);const _0x3e14e9=await(0x0,GetProfilePicUrl_1[_0x531dbf(0x10b)])(_0x471411,_0x39b74e),_0x4c494f={'name':''+_0x434fd8,'number':_0x471411,'profilePicUrl':_0x3e14e9,'isGroup':![],'email':_0x59bc38,'companyId':_0x39b74e},_0x25125e=await(0x0,CreateOrUpdateContactServiceForImport_1[_0x531dbf(0x10b)])(_0x4c494f),_0x319178=(0x0,socket_1[_0x531dbf(0xe2)])();return _0x319178[_0x531dbf(0xf3)]('company-'+_0x39b74e+'-contact',{'action':_0x531dbf(0xe8),'contact':_0x25125e}),_0x2ad3b4['status'](0xc8)[_0x531dbf(0xe3)](_0x25125e);};exports[a14_0x14c065(0xf2)]=importXls;const index=async(_0x4fbad4,_0x258587)=>{const _0x10c583=a14_0x14c065,{searchParam:_0x8b1491,pageNumber:_0x5f130e,contactTag:_0x4a8454}=_0x4fbad4[_0x10c583(0x10f)],{companyId:_0x16e320}=_0x4fbad4[_0x10c583(0xec)];let _0x1dbc4d=[];_0x4a8454&&(_0x1dbc4d=JSON['parse'](_0x4a8454));const {contacts:_0x357625,count:_0x2e2ef7,hasMore:_0x174cf4}=await(0x0,ListContactsService_1[_0x10c583(0x10b)])({'searchParam':_0x8b1491,'pageNumber':_0x5f130e,'companyId':_0x16e320,'tagsIds':_0x1dbc4d});return _0x258587[_0x10c583(0xe3)]({'contacts':_0x357625,'count':_0x2e2ef7,'hasMore':_0x174cf4});};exports[a14_0x14c065(0x127)]=index;const getContact=async(_0x525aed,_0x59ff70)=>{const _0x39a730=a14_0x14c065,{name:_0x22e41b,number:_0x35e863}=_0x525aed[_0x39a730(0x121)],{companyId:_0x26ef8e}=_0x525aed[_0x39a730(0xec)],_0x1d6b2d=await(0x0,GetContactService_1['default'])({'name':_0x22e41b,'number':_0x35e863,'companyId':_0x26ef8e});return _0x59ff70[_0x39a730(0x113)](0xc8)[_0x39a730(0xe3)](_0x1d6b2d);};function a14_0x49e8(_0x4ca194,_0x51fbaf){const _0x2600d6=a14_0x2600();return a14_0x49e8=function(_0x49e8e8,_0x1c8576){_0x49e8e8=_0x49e8e8-0xe2;let _0x55e308=_0x2600d6[_0x49e8e8];return _0x55e308;},a14_0x49e8(_0x4ca194,_0x51fbaf);}exports[a14_0x14c065(0x114)]=getContact;const store=async(_0x58d0b7,_0x1a93df)=>{const _0x5cd053=a14_0x14c065,{companyId:_0x1bddd0}=_0x58d0b7[_0x5cd053(0xec)],_0x4c2ffe=_0x58d0b7[_0x5cd053(0x121)],_0x597bc=_0x4c2ffe[_0x5cd053(0xf9)];_0x4c2ffe['number']=_0x4c2ffe['number'][_0x5cd053(0x128)]('-','')[_0x5cd053(0x128)]('\x20','');const _0x590ca8=Yup[_0x5cd053(0xfe)]()[_0x5cd053(0xee)]({'name':Yup[_0x5cd053(0xe4)]()[_0x5cd053(0xe5)](),'number':Yup[_0x5cd053(0xe4)]()[_0x5cd053(0xe5)]()[_0x5cd053(0xfd)](/^\d+$/,'Invalid\x20number\x20format.\x20Only\x20numbers\x20is\x20allowed.')});try{await _0x590ca8[_0x5cd053(0x10e)](_0x4c2ffe);}catch(_0x1cd599){throw new AppError_1['default'](_0x1cd599[_0x5cd053(0xf7)]);}const _0x112614=await(0x0,CheckNumber_1['default'])(_0x4c2ffe[_0x5cd053(0xf9)],_0x1bddd0),_0x4946bc=await(0x0,CreateContactService_1[_0x5cd053(0x10b)])({..._0x4c2ffe,'number':_0x112614,'companyId':_0x1bddd0}),_0x477b01=(0x0,socket_1[_0x5cd053(0xe2)])();return _0x477b01['emit'](_0x5cd053(0x115)+_0x1bddd0+_0x5cd053(0x11e),{'action':_0x5cd053(0xe8),'contact':_0x4946bc}),_0x1a93df['status'](0xc8)[_0x5cd053(0xe3)](_0x4946bc);};exports['store']=store;const show=async(_0x4d5e3c,_0x3d83cb)=>{const _0x3da014=a14_0x14c065,{contactId:_0x35be62}=_0x4d5e3c[_0x3da014(0x11c)],{companyId:_0x2a02d5}=_0x4d5e3c[_0x3da014(0xec)],_0x4d4c2e=await(0x0,ShowContactService_1[_0x3da014(0x10b)])(_0x35be62,_0x2a02d5);return _0x3d83cb['status'](0xc8)[_0x3da014(0xe3)](_0x4d4c2e);};exports['show']=show;const update=async(_0xe43b06,_0x419a82)=>{const _0x3fe3be=a14_0x14c065,_0xee3075=_0xe43b06[_0x3fe3be(0x121)],{companyId:_0x9d0b38}=_0xe43b06['user'],_0x3085be=Yup[_0x3fe3be(0xfe)]()[_0x3fe3be(0xee)]({'name':Yup['string'](),'number':Yup[_0x3fe3be(0xe4)]()[_0x3fe3be(0xfd)](/^\d+$/,'Invalid\x20number\x20format.\x20Only\x20numbers\x20is\x20allowed.')});try{await _0x3085be[_0x3fe3be(0x10e)](_0xee3075);}catch(_0x5af2a3){throw new AppError_1[(_0x3fe3be(0x10b))](_0x5af2a3[_0x3fe3be(0xf7)]);}await(0x0,CheckIsValidContact_1[_0x3fe3be(0x10b)])(_0xee3075[_0x3fe3be(0xf9)],_0x9d0b38);const _0xf28b9f=await(0x0,CheckNumber_1[_0x3fe3be(0x10b)])(_0xee3075[_0x3fe3be(0xf9)],_0x9d0b38),_0x36f578=_0xf28b9f;_0xee3075['number']=_0x36f578;const {contactId:_0x12598f}=_0xe43b06[_0x3fe3be(0x11c)],_0x5e4dcb=await(0x0,UpdateContactService_1['default'])({'contactData':_0xee3075,'contactId':_0x12598f,'companyId':_0x9d0b38}),_0x463403=(0x0,socket_1[_0x3fe3be(0xe2)])();return _0x463403['emit'](_0x3fe3be(0x115)+_0x9d0b38+_0x3fe3be(0x11e),{'action':_0x3fe3be(0xeb),'contact':_0x5e4dcb}),_0x419a82['status'](0xc8)['json'](_0x5e4dcb);};exports[a14_0x14c065(0xeb)]=update;const remove=async(_0x4d3e73,_0x170301)=>{const _0xbcb0fc=a14_0x14c065,{contactId:_0x31e942}=_0x4d3e73[_0xbcb0fc(0x11c)],{companyId:_0x5a977a}=_0x4d3e73[_0xbcb0fc(0xec)];await(0x0,ShowContactService_1[_0xbcb0fc(0x10b)])(_0x31e942,_0x5a977a),await(0x0,DeleteContactService_1[_0xbcb0fc(0x10b)])(_0x31e942);const _0xb55c55=(0x0,socket_1[_0xbcb0fc(0xe2)])();return _0xb55c55[_0xbcb0fc(0xf3)](_0xbcb0fc(0x115)+_0x5a977a+_0xbcb0fc(0x11e),{'action':_0xbcb0fc(0x111),'contactId':_0x31e942}),_0x170301[_0xbcb0fc(0x113)](0xc8)[_0xbcb0fc(0xe3)]({'message':_0xbcb0fc(0x126)});};exports[a14_0x14c065(0x124)]=remove;const list=async(_0xa884f8,_0x314864)=>{const _0x37c94f=a14_0x14c065,{name:_0x178bc5}=_0xa884f8[_0x37c94f(0x10f)],{companyId:_0x5a5901}=_0xa884f8[_0x37c94f(0xec)],_0x51e2aa=await(0x0,SimpleListService_1[_0x37c94f(0x10b)])({'name':_0x178bc5,'companyId':_0x5a5901});return _0x314864['json'](_0x51e2aa);};exports[a14_0x14c065(0x11d)]=list;const toggleAcceptAudio=async(_0x26d936,_0x36a26d)=>{const _0x290ea7=a14_0x14c065;var {contactId:_0x2fda49}=_0x26d936[_0x290ea7(0x11c)];const _0x5b77f0=await(0x0,ToggleAcceptAudioContactService_1[_0x290ea7(0x10b)])({'contactId':_0x2fda49}),_0x33566c=(0x0,socket_1[_0x290ea7(0xe2)])();return _0x33566c[_0x290ea7(0xf3)](_0x290ea7(0x102),{'action':_0x290ea7(0xeb),'contact':_0x5b77f0}),_0x36a26d[_0x290ea7(0x113)](0xc8)['json'](_0x5b77f0);};function a14_0x2600(){const _0x44ca92=['941682obIYZS','toString','params','list','-contact','length','__importDefault','body','../libs/socket','blockUnblock','remove','substr','Contact\x20deleted','index','replace','getIO','json','string','required','9158949CpqToV','getContactVcard','create','869842HPCjeT','__esModule','update','user','../errors/AppError','shape','../services/ContactServices/ListContactsService','../services/ContactServices/SimpleListService','get','importXls','emit','../services/WbotServices/CheckIsValidContact','1084424EjWDLu','@s.whatsapp.net','message','1550526QIrhdS','number','326577uoKKoX','../services/ContactServices/UpdateContactService','../services/ContactServices/ShowContactService','matches','object','toggleAcceptAudio','log','4iBPVld','contact','../services/ContactServices/BlockUnblockContactService','upload','../services/ContactServices/ImportContactsService','56pyivZm','writable','configurable','../services/WbotServices/GetProfilePicUrl','getOwnPropertyDescriptor','default','112760RlLwuC','../services/ContactServices/DeleteContactService','validate','query','reload','delete','call','status','getContact','company-','../services/WbotServices/CheckNumber','defineProperty','ImportContactsService','__setModuleDefault'];a14_0x2600=function(){return _0x44ca92;};return a14_0x2600();}exports['toggleAcceptAudio']=toggleAcceptAudio;const blockUnblock=async(_0x19a262,_0x5b3317)=>{const _0x30833c=a14_0x14c065;var {contactId:_0x3e6b9c}=_0x19a262['params'];const {companyId:_0x4d6a60}=_0x19a262[_0x30833c(0xec)],{active:_0x5d768b}=_0x19a262[_0x30833c(0x121)],_0x38c4b4=await(0x0,BlockUnblockContactService_1[_0x30833c(0x10b)])({'contactId':_0x3e6b9c,'companyId':_0x4d6a60,'active':_0x5d768b}),_0x18a9c7=(0x0,socket_1[_0x30833c(0xe2)])();return _0x18a9c7[_0x30833c(0xf3)](_0x30833c(0x102),{'action':_0x30833c(0xeb),'contact':_0x38c4b4}),_0x5b3317[_0x30833c(0x113)](0xc8)['json'](_0x38c4b4);};exports[a14_0x14c065(0x123)]=blockUnblock;const upload=async(_0x387e65,_0xfb56a2)=>{const _0x2b24af=a14_0x14c065,_0x1120b0=_0x387e65['files'],_0x774bb=(0x0,lodash_1['head'])(_0x1120b0),{companyId:_0x1cf5f5}=_0x387e65['user'],_0x4471d7=await(0x0,ImportContactsService_1[_0x2b24af(0x118)])(_0x1cf5f5,_0x774bb),_0x195d3c=(0x0,socket_1[_0x2b24af(0xe2)])();return _0x195d3c[_0x2b24af(0xf3)](_0x2b24af(0x115)+_0x1cf5f5+_0x2b24af(0x11e),{'action':_0x2b24af(0x110),'records':_0x4471d7}),_0xfb56a2['status'](0xc8)[_0x2b24af(0xe3)](_0x4471d7);};exports[a14_0x14c065(0x104)]=upload;const getContactProfileURL=async(_0x45ab03,_0x51804e)=>{const _0x1a8ce8=a14_0x14c065,{number:_0x4a849c}=_0x45ab03[_0x1a8ce8(0x11c)],{companyId:_0x54b8d9}=_0x45ab03[_0x1a8ce8(0xec)];if(_0x4a849c){const _0x59f12c=await(0x0,CheckNumber_1[_0x1a8ce8(0x10b)])(_0x4a849c,_0x54b8d9),_0x23af21=await(0x0,GetProfilePicUrl_1[_0x1a8ce8(0x10b)])(_0x59f12c,_0x54b8d9),_0x5dbe82=await(0x0,NumberSimpleListService_1[_0x1a8ce8(0x10b)])({'number':_0x59f12c,'companyId':_0x54b8d9});let _0xfcdf4b;return _0x5dbe82[_0x1a8ce8(0x11f)]>0x0?_0xfcdf4b={'contactId':_0x5dbe82[0x0]['id'],'profilePicUrl':_0x23af21}:_0xfcdf4b={'contactId':0x0,'profilePicUrl':_0x23af21},_0x51804e[_0x1a8ce8(0x113)](0xc8)[_0x1a8ce8(0xe3)](_0xfcdf4b);}};exports['getContactProfileURL']=getContactProfileURL;const getContactVcard=async(_0x5ec994,_0x325262)=>{const _0x11158f=a14_0x14c065,{name:_0x1e89b5,number:_0x27a4d9}=_0x5ec994[_0x11158f(0x10f)],{companyId:_0x44299c}=_0x5ec994['user'];let _0x54d2fc=_0x27a4d9;const _0x5bf628=_0x54d2fc[_0x11158f(0x11b)]()[_0x11158f(0x125)](0x0,0x2),_0x359bdf=_0x54d2fc[_0x11158f(0x11b)]()[_0x11158f(0x125)](0x2,0x2),_0x4c5465=_0x54d2fc[_0x11158f(0x11b)]()[_0x11158f(0x125)](-0x8,0x8);if(_0x359bdf<='30'&&_0x5bf628==='55')console[_0x11158f(0x100)]('menor\x2030'),_0x54d2fc=_0x5bf628+_0x359bdf+0x9+_0x4c5465+_0x11158f(0xf6);else _0x359bdf>'30'&&_0x5bf628==='55'?(console[_0x11158f(0x100)]('maior\x2030'),_0x54d2fc=_0x5bf628+_0x359bdf+_0x4c5465+'@s.whatsapp.net'):_0x54d2fc=_0x27a4d9+_0x11158f(0xf6);console[_0x11158f(0x100)](_0x54d2fc);const _0x41de30=await(0x0,GetContactService_1[_0x11158f(0x10b)])({'name':_0x1e89b5,'number':_0x27a4d9,'companyId':_0x44299c});return _0x325262['status'](0xc8)[_0x11158f(0xe3)](_0x41de30);};exports['getContactVcard']=getContactVcard;