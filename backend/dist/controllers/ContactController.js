'use strict';const a15_0x5c3a9e=a15_0x2f5c;(function(_0x4dc968,_0xa82d19){const _0x312017=a15_0x2f5c,_0xb47a63=_0x4dc968();while(!![]){try{const _0x3de1ed=-parseInt(_0x312017(0x12f))/0x1+-parseInt(_0x312017(0x129))/0x2+parseInt(_0x312017(0xeb))/0x3*(parseInt(_0x312017(0x118))/0x4)+parseInt(_0x312017(0x109))/0x5*(-parseInt(_0x312017(0xfb))/0x6)+-parseInt(_0x312017(0x115))/0x7+parseInt(_0x312017(0x10b))/0x8+parseInt(_0x312017(0xff))/0x9*(parseInt(_0x312017(0xfd))/0xa);if(_0x3de1ed===_0xa82d19)break;else _0xb47a63['push'](_0xb47a63['shift']());}catch(_0x1e6513){_0xb47a63['push'](_0xb47a63['shift']());}}}(a15_0xe0f6,0x1dcc9));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x405db3,_0x5c63ff,_0x217231,_0x599fa3){const _0xd0fdee=a15_0x2f5c;if(_0x599fa3===undefined)_0x599fa3=_0x217231;var _0x4489f3=Object['getOwnPropertyDescriptor'](_0x5c63ff,_0x217231);(!_0x4489f3||(_0xd0fdee(0xf7)in _0x4489f3?!_0x5c63ff[_0xd0fdee(0x104)]:_0x4489f3[_0xd0fdee(0x12c)]||_0x4489f3[_0xd0fdee(0x10d)]))&&(_0x4489f3={'enumerable':!![],'get':function(){return _0x5c63ff[_0x217231];}}),Object[_0xd0fdee(0x126)](_0x405db3,_0x599fa3,_0x4489f3);}:function(_0x22f0d9,_0x47e4b9,_0x38a518,_0x3fda03){if(_0x3fda03===undefined)_0x3fda03=_0x38a518;_0x22f0d9[_0x3fda03]=_0x47e4b9[_0x38a518];}),__setModuleDefault=this&&this[a15_0x5c3a9e(0x133)]||(Object[a15_0x5c3a9e(0x10c)]?function(_0xa36fc2,_0x26166a){const _0x2a6f62=a15_0x5c3a9e;Object[_0x2a6f62(0x126)](_0xa36fc2,_0x2a6f62(0xef),{'enumerable':!![],'value':_0x26166a});}:function(_0x53f9b7,_0x316978){_0x53f9b7['default']=_0x316978;}),__importStar=this&&this[a15_0x5c3a9e(0x11e)]||function(_0x222355){const _0x49b5cf=a15_0x5c3a9e;if(_0x222355&&_0x222355[_0x49b5cf(0x104)])return _0x222355;var _0x72d7f0={};if(_0x222355!=null){for(var _0x112538 in _0x222355)if(_0x112538!=='default'&&Object[_0x49b5cf(0x111)][_0x49b5cf(0xec)][_0x49b5cf(0x137)](_0x222355,_0x112538))__createBinding(_0x72d7f0,_0x222355,_0x112538);}return __setModuleDefault(_0x72d7f0,_0x222355),_0x72d7f0;},__importDefault=this&&this['__importDefault']||function(_0x38d425){const _0x14a8f1=a15_0x5c3a9e;return _0x38d425&&_0x38d425[_0x14a8f1(0x104)]?_0x38d425:{'default':_0x38d425};};Object[a15_0x5c3a9e(0x126)](exports,a15_0x5c3a9e(0x104),{'value':!![]}),exports[a15_0x5c3a9e(0x123)]=exports['toggleDisableBot']=exports[a15_0x5c3a9e(0x121)]=exports[a15_0x5c3a9e(0x108)]=exports[a15_0x5c3a9e(0x11f)]=exports['upload']=exports[a15_0x5c3a9e(0x136)]=exports[a15_0x5c3a9e(0xfa)]=exports['list']=exports[a15_0x5c3a9e(0x106)]=exports[a15_0x5c3a9e(0x13a)]=exports[a15_0x5c3a9e(0x128)]=exports[a15_0x5c3a9e(0x130)]=exports[a15_0x5c3a9e(0x10f)]=exports[a15_0x5c3a9e(0xe8)]=exports[a15_0x5c3a9e(0x120)]=void 0x0;const Yup=__importStar(require(a15_0x5c3a9e(0x10e))),socket_1=require(a15_0x5c3a9e(0xe7)),lodash_1=require('lodash'),ListContactsService_1=__importDefault(require('../services/ContactServices/ListContactsService')),CreateContactService_1=__importDefault(require('../services/ContactServices/CreateContactService')),ShowContactService_1=__importDefault(require(a15_0x5c3a9e(0x131))),UpdateContactService_1=__importDefault(require(a15_0x5c3a9e(0x12d))),DeleteContactService_1=__importDefault(require(a15_0x5c3a9e(0x116))),GetContactService_1=__importDefault(require(a15_0x5c3a9e(0x135))),CheckNumber_1=__importDefault(require(a15_0x5c3a9e(0xf1))),CheckIsValidContact_1=__importDefault(require('../services/WbotServices/CheckIsValidContact')),GetProfilePicUrl_1=__importDefault(require(a15_0x5c3a9e(0x138))),AppError_1=__importDefault(require(a15_0x5c3a9e(0xf2))),SimpleListService_1=__importDefault(require(a15_0x5c3a9e(0x105))),ToggleAcceptAudioContactService_1=__importDefault(require(a15_0x5c3a9e(0xf5))),BlockUnblockContactService_1=__importDefault(require(a15_0x5c3a9e(0x11a))),ImportContactsService_1=require('../services/ContactServices/ImportContactsService'),NumberSimpleListService_1=__importDefault(require('../services/ContactServices/NumberSimpleListService')),CreateOrUpdateContactServiceForImport_1=__importDefault(require(a15_0x5c3a9e(0xf0))),UpdateContactWalletsService_1=__importDefault(require(a15_0x5c3a9e(0x122))),FindContactTags_1=__importDefault(require('../services/ContactServices/FindContactTags')),ToggleDisableBotContactService_1=__importDefault(require(a15_0x5c3a9e(0x110))),importXls=async(_0x2d387a,_0x15f55f)=>{const _0x17f951=a15_0x5c3a9e,{companyId:_0x41afc4}=_0x2d387a['user'],{number:_0x554d93,name:_0x3c048b,email:_0x588644}=_0x2d387a['body'],_0x1746c7=_0x554d93['replace'](/[^\d.-]+/g,'');console[_0x17f951(0x117)](_0x17f951(0xf3),_0x1746c7),console[_0x17f951(0x117)](_0x17f951(0xf9),_0x3c048b);const _0x2cc5a2=await(0x0,CheckNumber_1[_0x17f951(0xef)])(_0x1746c7,_0x41afc4);console['log']('60',_0x2cc5a2);const _0x2494f6=await(0x0,GetProfilePicUrl_1['default'])(_0x2cc5a2,_0x41afc4),_0x5e08dc={'name':''+_0x3c048b,'number':_0x2cc5a2,'profilePicUrl':_0x2494f6,'isGroup':![],'email':_0x588644,'companyId':_0x41afc4},_0x544113=await(0x0,CreateOrUpdateContactServiceForImport_1[_0x17f951(0xef)])(_0x5e08dc),_0x4b1f70=(0x0,socket_1[_0x17f951(0x12b)])();return _0x4b1f70['emit'](_0x17f951(0x101)+_0x41afc4+_0x17f951(0x112),{'action':_0x17f951(0x10c),'contact':_0x544113}),_0x15f55f[_0x17f951(0xee)](0xc8)[_0x17f951(0x11c)](_0x544113);};exports[a15_0x5c3a9e(0x120)]=importXls;const index=async(_0x1f4831,_0x429a0d)=>{const _0x459c7d=a15_0x5c3a9e,{searchParam:_0x461264,pageNumber:_0xc16457,contactTag:_0xcde144,isGroup:_0x27e1b8}=_0x1f4831[_0x459c7d(0x127)],{companyId:_0x1fcb69}=_0x1f4831[_0x459c7d(0xe4)];let _0x48a4aa=[];_0xcde144&&(_0x48a4aa=JSON[_0x459c7d(0x107)](_0xcde144));const {contacts:_0x3aae95,count:_0x3d65a0,hasMore:_0xa6121d}=await(0x0,ListContactsService_1['default'])({'searchParam':_0x461264,'pageNumber':_0xc16457,'companyId':_0x1fcb69,'tagsIds':_0x48a4aa,'isGroup':_0x27e1b8});return _0x429a0d[_0x459c7d(0x11c)]({'contacts':_0x3aae95,'count':_0x3d65a0,'hasMore':_0xa6121d});};exports[a15_0x5c3a9e(0xe8)]=index;const getContact=async(_0x26c059,_0x57eb05)=>{const _0x1e2494=a15_0x5c3a9e,{name:_0x2c1ef6,number:_0x537cd0}=_0x26c059['body'],{companyId:_0x141aa4}=_0x26c059[_0x1e2494(0xe4)],_0x529447=await(0x0,GetContactService_1[_0x1e2494(0xef)])({'name':_0x2c1ef6,'number':_0x537cd0,'companyId':_0x141aa4});return _0x57eb05[_0x1e2494(0xee)](0xc8)[_0x1e2494(0x11c)](_0x529447);};exports['getContact']=getContact;const store=async(_0x558836,_0x9395e3)=>{const _0x3742d7=a15_0x5c3a9e,{companyId:_0x7fae7f}=_0x558836[_0x3742d7(0xe4)],_0x4035de=_0x558836[_0x3742d7(0xf4)],_0x21cfb7=_0x4035de[_0x3742d7(0x11b)];_0x4035de['number']=_0x4035de['number']['replace']('-','')[_0x3742d7(0x125)]('\x20','');const _0x427bf8=Yup['object']()[_0x3742d7(0x103)]({'name':Yup[_0x3742d7(0xe5)]()[_0x3742d7(0x11d)](),'number':Yup[_0x3742d7(0xe5)]()[_0x3742d7(0x11d)]()[_0x3742d7(0x132)](/^\d+$/,'Invalid\x20number\x20format.\x20Only\x20numbers\x20is\x20allowed.')});try{await _0x427bf8[_0x3742d7(0xf6)](_0x4035de);}catch(_0x338118){throw new AppError_1[(_0x3742d7(0xef))](_0x338118[_0x3742d7(0x10a)]);}const _0x4f0cae=await(0x0,CheckNumber_1[_0x3742d7(0xef)])(_0x4035de['number'],_0x7fae7f),_0x3cd3bd=await(0x0,CreateContactService_1[_0x3742d7(0xef)])({..._0x4035de,'number':_0x4f0cae,'companyId':_0x7fae7f}),_0x51c6ef=(0x0,socket_1['getIO'])();return _0x51c6ef[_0x3742d7(0x139)](_0x3742d7(0x101)+_0x7fae7f+_0x3742d7(0x112),{'action':'create','contact':_0x3cd3bd}),_0x9395e3[_0x3742d7(0xee)](0xc8)['json'](_0x3cd3bd);};exports[a15_0x5c3a9e(0x130)]=store;const show=async(_0x24ae42,_0x580d34)=>{const _0x3b6f74=a15_0x5c3a9e,{contactId:_0x4dc131}=_0x24ae42['params'],{companyId:_0x4f1435}=_0x24ae42['user'],_0x53bd99=await(0x0,ShowContactService_1[_0x3b6f74(0xef)])(_0x4dc131,_0x4f1435);return _0x580d34[_0x3b6f74(0xee)](0xc8)['json'](_0x53bd99);};exports[a15_0x5c3a9e(0x128)]=show;const update=async(_0x1f40b5,_0x59e7f4)=>{const _0x6d3638=a15_0x5c3a9e,_0x1579ec=_0x1f40b5[_0x6d3638(0xf4)],{companyId:_0x32d669}=_0x1f40b5['user'],_0x3e981a=Yup['object']()[_0x6d3638(0x103)]({'name':Yup[_0x6d3638(0xe5)](),'number':Yup[_0x6d3638(0xe5)]()[_0x6d3638(0x132)](/^\d+$/,_0x6d3638(0x102))});try{await _0x3e981a['validate'](_0x1579ec);}catch(_0x25cd23){throw new AppError_1[(_0x6d3638(0xef))](_0x25cd23['message']);}await(0x0,CheckIsValidContact_1[_0x6d3638(0xef)])(_0x1579ec[_0x6d3638(0x11b)],_0x32d669);const _0x4a4062=await(0x0,CheckNumber_1['default'])(_0x1579ec['number'],_0x32d669),_0x35a162=_0x4a4062;_0x1579ec[_0x6d3638(0x11b)]=_0x35a162;const {contactId:_0x45d08c}=_0x1f40b5[_0x6d3638(0x114)],_0x1eff2e=await(0x0,UpdateContactService_1[_0x6d3638(0xef)])({'contactData':_0x1579ec,'contactId':_0x45d08c,'companyId':_0x32d669}),_0x10da97=(0x0,socket_1['getIO'])();return _0x10da97['emit'](_0x6d3638(0x101)+_0x32d669+_0x6d3638(0x112),{'action':_0x6d3638(0x13a),'contact':_0x1eff2e}),_0x59e7f4[_0x6d3638(0xee)](0xc8)[_0x6d3638(0x11c)](_0x1eff2e);};exports['update']=update;const remove=async(_0x337fff,_0x2ef9e9)=>{const _0x4ce676=a15_0x5c3a9e,{contactId:_0x290e6b}=_0x337fff[_0x4ce676(0x114)],{companyId:_0x51502d}=_0x337fff[_0x4ce676(0xe4)];await(0x0,ShowContactService_1[_0x4ce676(0xef)])(_0x290e6b,_0x51502d),await(0x0,DeleteContactService_1[_0x4ce676(0xef)])(_0x290e6b);const _0x3ce817=(0x0,socket_1['getIO'])();return _0x3ce817['emit'](_0x4ce676(0x101)+_0x51502d+_0x4ce676(0x112),{'action':_0x4ce676(0xed),'contactId':_0x290e6b}),_0x2ef9e9[_0x4ce676(0xee)](0xc8)[_0x4ce676(0x11c)]({'message':_0x4ce676(0x12a)});};exports[a15_0x5c3a9e(0x106)]=remove;const list=async(_0x5e1278,_0x22c94c)=>{const _0x1ac123=a15_0x5c3a9e,{name:_0x21f6b1}=_0x5e1278[_0x1ac123(0x127)],{companyId:_0xe202e0}=_0x5e1278['user'],_0x20c723=await(0x0,SimpleListService_1[_0x1ac123(0xef)])({'name':_0x21f6b1,'companyId':_0xe202e0});return _0x22c94c['json'](_0x20c723);};exports[a15_0x5c3a9e(0x134)]=list;const toggleAcceptAudio=async(_0x14d7d7,_0x2f27ab)=>{const _0x548da0=a15_0x5c3a9e;var {contactId:_0x4ac96b}=_0x14d7d7[_0x548da0(0x114)];const {companyId:_0x15fc08}=_0x14d7d7[_0x548da0(0xe4)],_0x43d2fa=await(0x0,ToggleAcceptAudioContactService_1[_0x548da0(0xef)])({'contactId':_0x4ac96b}),_0x248740=(0x0,socket_1[_0x548da0(0x12b)])();return _0x248740['emit']('company-'+_0x15fc08+_0x548da0(0x112),{'action':'update','contact':_0x43d2fa}),_0x2f27ab[_0x548da0(0xee)](0xc8)[_0x548da0(0x11c)](_0x43d2fa);};exports[a15_0x5c3a9e(0xfa)]=toggleAcceptAudio;const blockUnblock=async(_0x564bab,_0x197406)=>{const _0x27951a=a15_0x5c3a9e;var {contactId:_0x4b457b}=_0x564bab[_0x27951a(0x114)];const {companyId:_0x4b7282}=_0x564bab[_0x27951a(0xe4)],{active:_0x4f80ed}=_0x564bab[_0x27951a(0xf4)],_0x125d27=await(0x0,BlockUnblockContactService_1[_0x27951a(0xef)])({'contactId':_0x4b457b,'companyId':_0x4b7282,'active':_0x4f80ed}),_0x53c3c3=(0x0,socket_1['getIO'])();return _0x53c3c3['emit'](_0x27951a(0x101)+_0x4b7282+'-contact',{'action':_0x27951a(0x13a),'contact':_0x125d27}),_0x197406[_0x27951a(0xee)](0xc8)['json'](_0x125d27);};exports[a15_0x5c3a9e(0x136)]=blockUnblock;const upload=async(_0x1d5629,_0x22f7f0)=>{const _0x54a83c=a15_0x5c3a9e,_0x10e8b7=_0x1d5629[_0x54a83c(0x12e)],_0x5f5ac7=(0x0,lodash_1['head'])(_0x10e8b7),{companyId:_0x1b2fdf}=_0x1d5629['user'],_0x1fe6e1=await(0x0,ImportContactsService_1[_0x54a83c(0xf8)])(_0x1b2fdf,_0x5f5ac7),_0x1e1c03=(0x0,socket_1[_0x54a83c(0x12b)])();return _0x1e1c03[_0x54a83c(0x139)](_0x54a83c(0x101)+_0x1b2fdf+'-contact',{'action':_0x54a83c(0x119),'records':_0x1fe6e1}),_0x22f7f0[_0x54a83c(0xee)](0xc8)['json'](_0x1fe6e1);};exports[a15_0x5c3a9e(0xea)]=upload;const getContactProfileURL=async(_0x47b57c,_0x139145)=>{const _0x5c4f5e=a15_0x5c3a9e,{number:_0x217128}=_0x47b57c['params'],{companyId:_0x5abb36}=_0x47b57c['user'];if(_0x217128){const _0x325319=await(0x0,CheckNumber_1['default'])(_0x217128,_0x5abb36),_0x51e572=await(0x0,GetProfilePicUrl_1[_0x5c4f5e(0xef)])(_0x325319,_0x5abb36),_0x481c77=await(0x0,NumberSimpleListService_1[_0x5c4f5e(0xef)])({'number':_0x325319,'companyId':_0x5abb36});let _0x41634b;return _0x481c77[_0x5c4f5e(0xfe)]>0x0?_0x41634b={'contactId':_0x481c77[0x0]['id'],'profilePicUrl':_0x51e572}:_0x41634b={'contactId':0x0,'profilePicUrl':_0x51e572},_0x139145['status'](0xc8)[_0x5c4f5e(0x11c)](_0x41634b);}};exports[a15_0x5c3a9e(0x11f)]=getContactProfileURL;const getContactVcard=async(_0x33c136,_0x1dd0a9)=>{const _0x114642=a15_0x5c3a9e,{name:_0x20798f,number:_0x59b40c}=_0x33c136[_0x114642(0x127)],{companyId:_0x2fb95d}=_0x33c136[_0x114642(0xe4)];let _0x453628=_0x59b40c;const _0x1c6c03=_0x453628['toString']()[_0x114642(0xe6)](0x0,0x2),_0x1004e1=_0x453628[_0x114642(0x100)]()[_0x114642(0xe6)](0x2,0x2),_0x54def3=_0x453628['toString']()[_0x114642(0xe6)](-0x8,0x8);if(_0x1004e1<='30'&&_0x1c6c03==='55')console[_0x114642(0x117)](_0x114642(0x113)),_0x453628=_0x1c6c03+_0x1004e1+0x9+_0x54def3+'@s.whatsapp.net';else _0x1004e1>'30'&&_0x1c6c03==='55'?(console[_0x114642(0x117)](_0x114642(0xfc)),_0x453628=_0x1c6c03+_0x1004e1+_0x54def3+'@s.whatsapp.net'):_0x453628=_0x59b40c+_0x114642(0x124);const _0x2150ee=await(0x0,GetContactService_1[_0x114642(0xef)])({'name':_0x20798f,'number':_0x59b40c,'companyId':_0x2fb95d});return _0x1dd0a9[_0x114642(0xee)](0xc8)[_0x114642(0x11c)](_0x2150ee);};exports[a15_0x5c3a9e(0x108)]=getContactVcard;function a15_0x2f5c(_0x7b2172,_0x1058b0){const _0xe0f6eb=a15_0xe0f6();return a15_0x2f5c=function(_0x2f5c4f,_0x37b2d0){_0x2f5c4f=_0x2f5c4f-0xe4;let _0x283325=_0xe0f6eb[_0x2f5c4f];return _0x283325;},a15_0x2f5c(_0x7b2172,_0x1058b0);}const getContactTags=async(_0x424fc3,_0x57a270)=>{const _0x330beb=a15_0x5c3a9e,{contactId:_0x4ce4a6}=_0x424fc3[_0x330beb(0x114)],_0x2ea41d=await(0x0,FindContactTags_1[_0x330beb(0xef)])({'contactId':_0x4ce4a6});let _0x162960=![];return _0x2ea41d[_0x330beb(0xfe)]>0x0&&(_0x162960=!![]),_0x57a270[_0x330beb(0xee)](0xc8)[_0x330beb(0x11c)]({'tags':_0x162960});};exports[a15_0x5c3a9e(0x121)]=getContactTags;const toggleDisableBot=async(_0x39e835,_0x3601cc)=>{const _0x443d9d=a15_0x5c3a9e;var {contactId:_0x319b65}=_0x39e835[_0x443d9d(0x114)];const {companyId:_0x167ca5}=_0x39e835[_0x443d9d(0xe4)],_0x407a1c=await(0x0,ToggleDisableBotContactService_1[_0x443d9d(0xef)])({'contactId':_0x319b65}),_0x57df69=(0x0,socket_1[_0x443d9d(0x12b)])();return _0x57df69[_0x443d9d(0x139)](_0x443d9d(0x101)+_0x167ca5+_0x443d9d(0x112),{'action':_0x443d9d(0x13a),'contact':_0x407a1c}),_0x3601cc[_0x443d9d(0xee)](0xc8)[_0x443d9d(0x11c)](_0x407a1c);};exports[a15_0x5c3a9e(0xe9)]=toggleDisableBot;const updateContactWallet=async(_0x1f57df,_0x301fce)=>{const _0x54e4d9=a15_0x5c3a9e,{wallets:_0x2d9b2a}=_0x1f57df['body'],{contactId:_0x940714}=_0x1f57df[_0x54e4d9(0x114)],{companyId:_0x3a98e2}=_0x1f57df[_0x54e4d9(0xe4)],_0x3bcc0b=await(0x0,UpdateContactWalletsService_1['default'])({'wallets':_0x2d9b2a,'contactId':_0x940714,'companyId':_0x3a98e2});return _0x301fce['status'](0xc8)[_0x54e4d9(0x11c)](_0x3bcc0b);};exports[a15_0x5c3a9e(0x123)]=updateContactWallet;function a15_0xe0f6(){const _0x10f81b=['maior\x2030','69710qALOMv','length','549iEPvuh','toString','company-','Invalid\x20number\x20format.\x20Only\x20numbers\x20is\x20allowed.','shape','__esModule','../services/ContactServices/SimpleListService','remove','parse','getContactVcard','1095210URVtwG','message','679456qgiMcE','create','configurable','yup','getContact','../services/ContactServices/ToggleDisableBotContactService','prototype','-contact','menor\x2030','params','958797yXbtpj','../services/ContactServices/DeleteContactService','log','480416PbpgIA','reload','../services/ContactServices/BlockUnblockContactService','number','json','required','__importStar','getContactProfileURL','importXls','getContactTags','../services/ContactServices/UpdateContactWalletsService','updateContactWallet','@s.whatsapp.net','replace','defineProperty','query','show','196404qTkQCd','Contact\x20deleted','getIO','writable','../services/ContactServices/UpdateContactService','files','174099WcvePY','store','../services/ContactServices/ShowContactService','matches','__setModuleDefault','list','../services/ContactServices/GetContactService','blockUnblock','call','../services/WbotServices/GetProfilePicUrl','emit','update','user','string','substr','../libs/socket','index','toggleDisableBot','upload','6pPgBex','hasOwnProperty','delete','status','default','../services/ContactServices/CreateOrUpdateContactServiceForImport','../services/WbotServices/CheckNumber','../errors/AppError','simpleNumber>\x20','body','../services/ContactServices/ToggleAcceptAudioContactService','validate','get','ImportContactsService','name>\x20','toggleAcceptAudio','6wcIDTT'];a15_0xe0f6=function(){return _0x10f81b;};return a15_0xe0f6();}