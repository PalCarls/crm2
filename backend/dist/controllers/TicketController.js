'use strict';const a33_0x385638=a33_0x2080;(function(_0x7fe580,_0x44c698){const _0x1566dc=a33_0x2080,_0x2b7111=_0x7fe580();while(!![]){try{const _0x95f7d2=-parseInt(_0x1566dc(0x17d))/0x1+parseInt(_0x1566dc(0x17e))/0x2+-parseInt(_0x1566dc(0x19b))/0x3+parseInt(_0x1566dc(0x192))/0x4*(parseInt(_0x1566dc(0x1aa))/0x5)+-parseInt(_0x1566dc(0x17c))/0x6+parseInt(_0x1566dc(0x19f))/0x7*(parseInt(_0x1566dc(0x177))/0x8)+-parseInt(_0x1566dc(0x188))/0x9;if(_0x95f7d2===_0x44c698)break;else _0x2b7111['push'](_0x2b7111['shift']());}catch(_0x46f50c){_0x2b7111['push'](_0x2b7111['shift']());}}}(a33_0x1573,0x29043));var __importDefault=this&&this[a33_0x385638(0x185)]||function(_0x5e81d3){const _0x3b4132=a33_0x385638;return _0x5e81d3&&_0x5e81d3[_0x3b4132(0x180)]?_0x5e81d3:{'default':_0x5e81d3};};Object[a33_0x385638(0x19a)](exports,'__esModule',{'value':!![]}),exports[a33_0x385638(0x17f)]=exports[a33_0x385638(0x179)]=exports['update']=exports['showFromUUID']=exports[a33_0x385638(0x18d)]=exports['store']=exports[a33_0x385638(0x19e)]=exports[a33_0x385638(0x190)]=void 0x0;const socket_1=require(a33_0x385638(0x186)),Ticket_1=__importDefault(require('../models/Ticket')),CreateTicketService_1=__importDefault(require(a33_0x385638(0x184))),DeleteTicketService_1=__importDefault(require(a33_0x385638(0x189))),ListTicketsService_1=__importDefault(require(a33_0x385638(0x1a6))),ShowTicketFromUUIDService_1=__importDefault(require(a33_0x385638(0x181))),ShowTicketService_1=__importDefault(require(a33_0x385638(0x19d))),UpdateTicketService_1=__importDefault(require(a33_0x385638(0x197))),ListTicketsServiceKanban_1=__importDefault(require(a33_0x385638(0x183))),index=async(_0x506e3b,_0x1e36a2)=>{const _0x47508b=a33_0x385638,{pageNumber:_0x882a57,status:_0x130f3d,date:_0x426879,dateStart:_0x5e6a99,dateEnd:_0x163ef,updatedAt:_0x404dd0,searchParam:_0x50b0b3,showAll:_0x59ce16,queueIds:_0x5db3fd,tags:_0x5d67a9,users:_0x3a497b,withUnreadMessages:_0x255c48,whatsapps:_0x4fee43,statusFilter:_0x45fcb0}=_0x506e3b[_0x47508b(0x1a0)],_0x1a4e69=_0x506e3b['user']['id'],{companyId:_0x2f7a28}=_0x506e3b[_0x47508b(0x178)];let _0xa2f922=[],_0x3ebc03=[],_0x9a0b08=[],_0x3a0f2d=[],_0x499141=[];_0x5db3fd&&(_0xa2f922=JSON[_0x47508b(0x1a1)](_0x5db3fd));_0x5d67a9&&(_0x3ebc03=JSON[_0x47508b(0x1a1)](_0x5d67a9));_0x3a497b&&(_0x9a0b08=JSON[_0x47508b(0x1a1)](_0x3a497b));_0x4fee43&&(_0x3a0f2d=JSON[_0x47508b(0x1a1)](_0x4fee43));_0x45fcb0&&(_0x499141=JSON[_0x47508b(0x1a1)](_0x45fcb0));const {tickets:_0x3de3d0,count:_0x14b715,hasMore:_0x552973}=await(0x0,ListTicketsService_1['default'])({'searchParam':_0x50b0b3,'tags':_0x3ebc03,'users':_0x9a0b08,'pageNumber':_0x882a57,'status':_0x130f3d,'date':_0x426879,'dateStart':_0x5e6a99,'dateEnd':_0x163ef,'updatedAt':_0x404dd0,'showAll':_0x59ce16,'userId':_0x1a4e69,'queueIds':_0xa2f922,'withUnreadMessages':_0x255c48,'whatsappIds':_0x3a0f2d,'statusFilters':_0x499141,'companyId':_0x2f7a28});return _0x1e36a2[_0x47508b(0x1a5)](0xc8)[_0x47508b(0x1a2)]({'tickets':_0x3de3d0,'count':_0x14b715,'hasMore':_0x552973});};exports[a33_0x385638(0x190)]=index;const kanban=async(_0x44f683,_0x52a07c)=>{const _0x4aae5a=a33_0x385638,{pageNumber:_0x49b5e1,status:_0x374732,date:_0x584e1a,updatedAt:_0x479927,searchParam:_0x8e38be,showAll:_0x414830,queueIds:_0x5ce69c,tags:_0x2f24ed,users:_0x3b3616,withUnreadMessages:_0x4961c6}=_0x44f683[_0x4aae5a(0x1a0)],_0x20063c=_0x44f683[_0x4aae5a(0x178)]['id'],{companyId:_0x457945}=_0x44f683[_0x4aae5a(0x178)];let _0x2f5ea5=[],_0x392d8b=[],_0x5992c7=[];_0x5ce69c&&(_0x2f5ea5=JSON[_0x4aae5a(0x1a1)](_0x5ce69c));_0x2f24ed&&(_0x392d8b=JSON['parse'](_0x2f24ed));_0x3b3616&&(_0x5992c7=JSON[_0x4aae5a(0x1a1)](_0x3b3616));const {tickets:_0x16d2f5,count:_0x4e1d4b,hasMore:_0x1784cd}=await(0x0,ListTicketsServiceKanban_1[_0x4aae5a(0x1a7)])({'searchParam':_0x8e38be,'tags':_0x392d8b,'users':_0x5992c7,'pageNumber':_0x49b5e1,'status':_0x374732,'date':_0x584e1a,'updatedAt':_0x479927,'showAll':_0x414830,'userId':_0x20063c,'queueIds':_0x2f5ea5,'withUnreadMessages':_0x4961c6,'companyId':_0x457945});return _0x52a07c['status'](0xc8)[_0x4aae5a(0x1a2)]({'tickets':_0x16d2f5,'count':_0x4e1d4b,'hasMore':_0x1784cd});};exports[a33_0x385638(0x19e)]=kanban;const store=async(_0x26211b,_0x43ff52)=>{const _0x4e710e=a33_0x385638,{contactId:_0x5bc21f,status:_0x130f6e,userId:_0x34ad99,queueId:_0x2ba285,whatsappId:_0x35e34b}=_0x26211b[_0x4e710e(0x19c)],{companyId:_0x3fdd74}=_0x26211b[_0x4e710e(0x178)],_0x16fb6e=await(0x0,CreateTicketService_1[_0x4e710e(0x1a7)])({'contactId':_0x5bc21f,'status':_0x130f6e,'userId':_0x34ad99,'companyId':_0x3fdd74,'queueId':_0x2ba285,'whatsappId':_0x35e34b}),_0x509e0a=(0x0,socket_1[_0x4e710e(0x18a)])();return _0x509e0a['to'](_0x16fb6e[_0x4e710e(0x1a5)])[_0x4e710e(0x198)](_0x4e710e(0x1a4)+_0x3fdd74+_0x4e710e(0x17b),{'action':_0x4e710e(0x191),'ticket':_0x16fb6e}),_0x43ff52[_0x4e710e(0x1a5)](0xc8)['json'](_0x16fb6e);};exports[a33_0x385638(0x1a9)]=store;const show=async(_0x5fe7e5,_0x4778a7)=>{const _0x16dbd7=a33_0x385638,{ticketId:_0x19db65}=_0x5fe7e5['params'],{companyId:_0x248f33}=_0x5fe7e5[_0x16dbd7(0x178)],_0x1191eb=await(0x0,ShowTicketService_1[_0x16dbd7(0x1a7)])(_0x19db65,_0x248f33);return _0x4778a7[_0x16dbd7(0x1a5)](0xc8)['json'](_0x1191eb);};exports[a33_0x385638(0x18d)]=show;const showFromUUID=async(_0x455ad4,_0xde3291)=>{const _0x3e1fba=a33_0x385638,{uuid:_0x5c0819}=_0x455ad4[_0x3e1fba(0x17a)],_0x16e551=await(0x0,ShowTicketFromUUIDService_1[_0x3e1fba(0x1a7)])(_0x5c0819);return _0xde3291[_0x3e1fba(0x1a5)](0xc8)['json'](_0x16e551);};function a33_0x1573(){const _0xbe2a7f=['17984ZjkyeC','queueId','ticket\x20deleted','companyId','updatedAt','../services/TicketServices/UpdateTicketService','emit','DESC','defineProperty','545067BtOnrn','body','../services/TicketServices/ShowTicketService','kanban','1940729tzTzrb','query','parse','json','userId','company-','status','../services/TicketServices/ListTicketsService','default','findAndCountAll','store','205mHrdln','8mehHrs','user','remove','params','-ticket','322020UGjqWW','28764NIHhKd','436966SyCUNS','closeAll','__esModule','../services/TicketServices/ShowTicketFromUUIDService','toString','../services/TicketServices/ListTicketsServiceKanban','../services/TicketServices/CreateTicketService','__importDefault','../libs/socket','notification','2231460AjzMrB','../services/TicketServices/DeleteTicketService','getIO','closed','showFromUUID','show','delete','forEach','index','update'];a33_0x1573=function(){return _0xbe2a7f;};return a33_0x1573();}exports[a33_0x385638(0x18c)]=showFromUUID;const update=async(_0x5771a2,_0x3109c2)=>{const _0x30fdc6=a33_0x385638,{ticketId:_0x52607b}=_0x5771a2[_0x30fdc6(0x17a)],_0x3a3561=_0x5771a2[_0x30fdc6(0x19c)],{companyId:_0xe19398}=_0x5771a2[_0x30fdc6(0x178)],{ticket:_0x16a9e8}=await(0x0,UpdateTicketService_1[_0x30fdc6(0x1a7)])({'ticketData':_0x3a3561,'ticketId':_0x52607b,'companyId':_0xe19398});return _0x3109c2['status'](0xc8)['json'](_0x16a9e8);};exports['update']=update;const remove=async(_0x1c71bd,_0x175f50)=>{const _0x491df9=a33_0x385638,{ticketId:_0xb66d0e}=_0x1c71bd[_0x491df9(0x17a)],{companyId:_0x20a574}=_0x1c71bd[_0x491df9(0x178)];await(0x0,ShowTicketService_1['default'])(_0xb66d0e,_0x20a574);const _0x3a75a2=await(0x0,DeleteTicketService_1['default'])(_0xb66d0e),_0x272f33=(0x0,socket_1['getIO'])();return _0x272f33['to'](_0x3a75a2[_0x491df9(0x1a5)])['to'](_0xb66d0e)['to'](_0x491df9(0x187))[_0x491df9(0x198)](_0x491df9(0x1a4)+_0x20a574+_0x491df9(0x17b),{'action':_0x491df9(0x18e),'ticketId':+_0xb66d0e}),_0x175f50[_0x491df9(0x1a5)](0xc8)[_0x491df9(0x1a2)]({'message':_0x491df9(0x194)});};exports[a33_0x385638(0x179)]=remove;const closeAll=async(_0x333666,_0x51f1f9)=>{const _0x170f96=a33_0x385638,{companyId:_0x27fa85}=_0x333666[_0x170f96(0x178)],{status:_0x4d0ff3}=_0x333666[_0x170f96(0x19c)],_0x247859=(0x0,socket_1[_0x170f96(0x18a)])(),{rows:_0x453fed}=await Ticket_1[_0x170f96(0x1a7)][_0x170f96(0x1a8)]({'where':{'companyId':_0x27fa85,'status':_0x4d0ff3,'isGroup':![]},'order':[[_0x170f96(0x196),_0x170f96(0x199)]]});return _0x453fed[_0x170f96(0x18f)](async _0x3e9ee2=>{const _0x3acc1d=_0x170f96;await _0x3e9ee2['update']({'status':_0x3acc1d(0x18b),'userId':_0x3e9ee2[_0x3acc1d(0x1a3)]||0x1,'queueId':_0x3e9ee2[_0x3acc1d(0x193)]||null,'unreadMessages':0x0,'amountUsedBotQueues':0x0}),_0x247859['to'](_0x4d0ff3)['to'](_0x3e9ee2['id'][_0x3acc1d(0x182)]())[_0x3acc1d(0x198)](_0x3acc1d(0x1a4)+_0x3e9ee2[_0x3acc1d(0x195)]+_0x3acc1d(0x17b),{'action':_0x3acc1d(0x18e),'ticketId':_0x3e9ee2['id']});}),_0x51f1f9['status'](0xc8)[_0x170f96(0x1a2)]();};function a33_0x2080(_0x134232,_0x1904a9){const _0x157365=a33_0x1573();return a33_0x2080=function(_0x2080c9,_0xba08a4){_0x2080c9=_0x2080c9-0x177;let _0x4880ec=_0x157365[_0x2080c9];return _0x4880ec;},a33_0x2080(_0x134232,_0x1904a9);}exports[a33_0x385638(0x17f)]=closeAll;