'use strict';const a34_0x444c61=a34_0x451b;(function(_0x20be6f,_0x54bba2){const _0x76ec06=a34_0x451b,_0x5e2617=_0x20be6f();while(!![]){try{const _0x1ea16c=-parseInt(_0x76ec06(0xd4))/0x1*(parseInt(_0x76ec06(0xfc))/0x2)+parseInt(_0x76ec06(0xc8))/0x3*(parseInt(_0x76ec06(0xcb))/0x4)+-parseInt(_0x76ec06(0xdf))/0x5*(parseInt(_0x76ec06(0xf6))/0x6)+parseInt(_0x76ec06(0xdd))/0x7*(-parseInt(_0x76ec06(0xf8))/0x8)+-parseInt(_0x76ec06(0xd2))/0x9+-parseInt(_0x76ec06(0xf7))/0xa*(parseInt(_0x76ec06(0xe5))/0xb)+-parseInt(_0x76ec06(0xe3))/0xc*(-parseInt(_0x76ec06(0xcd))/0xd);if(_0x1ea16c===_0x54bba2)break;else _0x5e2617['push'](_0x5e2617['shift']());}catch(_0x43236e){_0x5e2617['push'](_0x5e2617['shift']());}}}(a34_0x581f,0x58b77));var __createBinding=this&&this[a34_0x444c61(0xdb)]||(Object[a34_0x444c61(0xc7)]?function(_0x5a6a5f,_0x419d33,_0x38bc78,_0x28ef01){const _0x586f57=a34_0x444c61;if(_0x28ef01===undefined)_0x28ef01=_0x38bc78;var _0x66d646=Object[_0x586f57(0xe7)](_0x419d33,_0x38bc78);(!_0x66d646||(_0x586f57(0xda)in _0x66d646?!_0x419d33[_0x586f57(0xde)]:_0x66d646[_0x586f57(0xd8)]||_0x66d646[_0x586f57(0xcf)]))&&(_0x66d646={'enumerable':!![],'get':function(){return _0x419d33[_0x38bc78];}}),Object[_0x586f57(0xf5)](_0x5a6a5f,_0x28ef01,_0x66d646);}:function(_0x5edca1,_0x1bd455,_0x11e042,_0x5acd5b){if(_0x5acd5b===undefined)_0x5acd5b=_0x11e042;_0x5edca1[_0x5acd5b]=_0x1bd455[_0x11e042];}),__setModuleDefault=this&&this[a34_0x444c61(0xd1)]||(Object['create']?function(_0x373fa7,_0xddebff){const _0x46b1a6=a34_0x444c61;Object[_0x46b1a6(0xf5)](_0x373fa7,_0x46b1a6(0xf9),{'enumerable':!![],'value':_0xddebff});}:function(_0x48b802,_0xfb7f47){const _0xba619b=a34_0x444c61;_0x48b802[_0xba619b(0xf9)]=_0xfb7f47;}),__importStar=this&&this[a34_0x444c61(0xe6)]||function(_0x23fe53){const _0x628825=a34_0x444c61;if(_0x23fe53&&_0x23fe53[_0x628825(0xde)])return _0x23fe53;var _0x11b0c0={};if(_0x23fe53!=null){for(var _0xe366ba in _0x23fe53)if(_0xe366ba!=='default'&&Object[_0x628825(0xe0)][_0x628825(0xed)][_0x628825(0xca)](_0x23fe53,_0xe366ba))__createBinding(_0x11b0c0,_0x23fe53,_0xe366ba);}return __setModuleDefault(_0x11b0c0,_0x23fe53),_0x11b0c0;},__importDefault=this&&this[a34_0x444c61(0xfe)]||function(_0x580b72){return _0x580b72&&_0x580b72['__esModule']?_0x580b72:{'default':_0x580b72};};function a34_0x581f(){const _0x193b69=['shape','1NwyZsM','findFilteredList','validate','../services/TicketNoteService/FindNotesByContactIdAndTicketId','writable','user','get','__createBinding','required','3858001QrMeEM','__esModule','15NlMKDM','prototype','yup','status','1166028glzBWd','query','2478795tIXcMC','__importStar','getOwnPropertyDescriptor','../services/TicketNoteService/ShowTicketNoteService','params','profile','remove','../services/TicketNoteService/ListTicketNotesService','hasOwnProperty','list','../services/TicketNoteService/FindAllTicketNotesService','object','../services/TicketNoteService/CreateTicketNoteService','json','store','string','defineProperty','10110Rtneoq','20bAwKAB','8WAhSYK','default','../errors/AppError','../services/TicketNoteService/DeleteTicketNoteService','455684XwrBNI','body','__importDefault','create','3Nfgfep','update','call','385000ZhVDXV','index','208TFwzxv','../services/TicketNoteService/UpdateTicketNoteService','configurable','show','__setModuleDefault','475569jrBxWi'];a34_0x581f=function(){return _0x193b69;};return a34_0x581f();}Object['defineProperty'](exports,a34_0x444c61(0xde),{'value':!![]}),exports[a34_0x444c61(0xd5)]=exports[a34_0x444c61(0xeb)]=exports[a34_0x444c61(0xc9)]=exports[a34_0x444c61(0xd0)]=exports[a34_0x444c61(0xf3)]=exports[a34_0x444c61(0xee)]=exports[a34_0x444c61(0xcc)]=void 0x0;const Yup=__importStar(require(a34_0x444c61(0xe1))),AppError_1=__importDefault(require(a34_0x444c61(0xfa))),ListTicketNotesService_1=__importDefault(require(a34_0x444c61(0xec))),CreateTicketNoteService_1=__importDefault(require(a34_0x444c61(0xf1))),UpdateTicketNoteService_1=__importDefault(require(a34_0x444c61(0xce))),ShowTicketNoteService_1=__importDefault(require(a34_0x444c61(0xe8))),FindAllTicketNotesService_1=__importDefault(require(a34_0x444c61(0xef))),DeleteTicketNoteService_1=__importDefault(require(a34_0x444c61(0xfb))),FindNotesByContactIdAndTicketId_1=__importDefault(require(a34_0x444c61(0xd7))),index=async(_0x7030b6,_0x5c9826)=>{const _0x1d5a02=a34_0x444c61,{searchParam:_0x4a8bc,pageNumber:_0x5a5dab}=_0x7030b6[_0x1d5a02(0xe4)],{ticketNotes:_0x5070ec,count:_0x2d5f22,hasMore:_0x22b45e}=await(0x0,ListTicketNotesService_1[_0x1d5a02(0xf9)])({'searchParam':_0x4a8bc,'pageNumber':_0x5a5dab});return _0x5c9826['json']({'ticketNotes':_0x5070ec,'count':_0x2d5f22,'hasMore':_0x22b45e});};exports[a34_0x444c61(0xcc)]=index;const list=async(_0x32f4dd,_0x105143)=>{const _0x5ecb48=a34_0x444c61,_0x2bbfc5=await(0x0,FindAllTicketNotesService_1[_0x5ecb48(0xf9)])();return _0x105143[_0x5ecb48(0xe2)](0xc8)[_0x5ecb48(0xf2)](_0x2bbfc5);};exports['list']=list;const store=async(_0x13fdfb,_0x13bd07)=>{const _0x29600a=a34_0x444c61,_0x55fe44=_0x13fdfb['body'],{id:_0x59e6cf}=_0x13fdfb[_0x29600a(0xd9)],_0x303dbd=Yup[_0x29600a(0xf0)]()['shape']({'note':Yup[_0x29600a(0xf4)]()[_0x29600a(0xdc)]()});try{await _0x303dbd[_0x29600a(0xd6)](_0x55fe44);}catch(_0x511733){throw new AppError_1[(_0x29600a(0xf9))](_0x511733['message']);}const _0xfd1b05=await(0x0,CreateTicketNoteService_1[_0x29600a(0xf9)])({..._0x55fe44,'userId':_0x59e6cf});return _0x13bd07[_0x29600a(0xe2)](0xc8)[_0x29600a(0xf2)](_0xfd1b05);};exports[a34_0x444c61(0xf3)]=store;const show=async(_0x4441b5,_0x29ee43)=>{const _0x4ee6ba=a34_0x444c61,{id:_0x117c32}=_0x4441b5[_0x4ee6ba(0xe9)],_0x323bb3=await(0x0,ShowTicketNoteService_1[_0x4ee6ba(0xf9)])(_0x117c32);return _0x29ee43[_0x4ee6ba(0xe2)](0xc8)[_0x4ee6ba(0xf2)](_0x323bb3);};exports['show']=show;const update=async(_0x579826,_0x606fee)=>{const _0x4e6ad6=a34_0x444c61,_0x28eec1=_0x579826[_0x4e6ad6(0xfd)],_0x3e07fe=Yup[_0x4e6ad6(0xf0)]()[_0x4e6ad6(0xd3)]({'note':Yup['string']()});try{await _0x3e07fe['validate'](_0x28eec1);}catch(_0x5791e3){throw new AppError_1['default'](_0x5791e3['message']);}const _0x54ae14=await(0x0,UpdateTicketNoteService_1['default'])(_0x28eec1);return _0x606fee[_0x4e6ad6(0xe2)](0xc8)[_0x4e6ad6(0xf2)](_0x54ae14);};exports[a34_0x444c61(0xc9)]=update;function a34_0x451b(_0x5d38ac,_0xe0d87){const _0x581f67=a34_0x581f();return a34_0x451b=function(_0x451bcb,_0x242728){_0x451bcb=_0x451bcb-0xc7;let _0x3ae4fe=_0x581f67[_0x451bcb];return _0x3ae4fe;},a34_0x451b(_0x5d38ac,_0xe0d87);}const remove=async(_0x1cdedb,_0x516bce)=>{const _0x56f476=a34_0x444c61,{id:_0x47570b}=_0x1cdedb[_0x56f476(0xe9)];if(_0x1cdedb['user'][_0x56f476(0xea)]!=='admin')throw new AppError_1[(_0x56f476(0xf9))]('ERR_NO_PERMISSION',0x193);return await(0x0,DeleteTicketNoteService_1[_0x56f476(0xf9)])(_0x47570b),_0x516bce[_0x56f476(0xe2)](0xc8)[_0x56f476(0xf2)]({'message':'Observação\x20removida'});};exports[a34_0x444c61(0xeb)]=remove;const findFilteredList=async(_0x2d0543,_0x2d00bc)=>{const _0x3c8136=a34_0x444c61;try{const {contactId:_0x14f52a,ticketId:_0x10c857}=_0x2d0543[_0x3c8136(0xe4)],_0x3f8f77=await(0x0,FindNotesByContactIdAndTicketId_1[_0x3c8136(0xf9)])({'contactId':_0x14f52a,'ticketId':_0x10c857});return _0x2d00bc['status'](0xc8)[_0x3c8136(0xf2)](_0x3f8f77);}catch(_0x9223fb){return _0x2d00bc[_0x3c8136(0xe2)](0x1f4)[_0x3c8136(0xf2)]({'message':_0x9223fb});}};exports[a34_0x444c61(0xd5)]=findFilteredList;