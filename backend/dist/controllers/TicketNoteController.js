'use strict';const a37_0x49d2b1=a37_0x2ad0;(function(_0x2414dc,_0x5df5bd){const _0x151763=a37_0x2ad0,_0x5ed254=_0x2414dc();while(!![]){try{const _0x3a7839=parseInt(_0x151763(0x8d))/0x1+-parseInt(_0x151763(0x8f))/0x2*(parseInt(_0x151763(0x7c))/0x3)+parseInt(_0x151763(0x77))/0x4*(-parseInt(_0x151763(0x8c))/0x5)+parseInt(_0x151763(0x7a))/0x6*(parseInt(_0x151763(0x80))/0x7)+-parseInt(_0x151763(0x9d))/0x8+parseInt(_0x151763(0x92))/0x9*(-parseInt(_0x151763(0x94))/0xa)+parseInt(_0x151763(0x78))/0xb;if(_0x3a7839===_0x5df5bd)break;else _0x5ed254['push'](_0x5ed254['shift']());}catch(_0x11e31c){_0x5ed254['push'](_0x5ed254['shift']());}}}(a37_0x26a6,0xb1894));function a37_0x26a6(){const _0x193535=['get','yup','Observação\x20removida','params','prototype','validate','profile','636umYitg','14705702nRTBXq','__esModule','42iqlGEE','required','237189QwbWlS','message','create','__createBinding','270851TfXgMw','shape','findFilteredList','status','hasOwnProperty','getOwnPropertyDescriptor','remove','configurable','../services/TicketNoteService/CreateTicketNoteService','store','list','../services/TicketNoteService/FindNotesByContactIdAndTicketId','995bOxXDF','1364801Uvseev','call','4oMQScC','../services/TicketNoteService/ListTicketNotesService','show','2152017xmgscZ','../services/TicketNoteService/ShowTicketNoteService','50wZkhDM','writable','body','../errors/AppError','json','__importDefault','default','../services/TicketNoteService/UpdateTicketNoteService','defineProperty','6880112WclCqu','query','string','index','admin','../services/TicketNoteService/DeleteTicketNoteService','update'];a37_0x26a6=function(){return _0x193535;};return a37_0x26a6();}var __createBinding=this&&this[a37_0x49d2b1(0x7f)]||(Object[a37_0x49d2b1(0x7e)]?function(_0x28fde5,_0x5296cc,_0x364849,_0x17756d){const _0x3869dd=a37_0x49d2b1;if(_0x17756d===undefined)_0x17756d=_0x364849;var _0x161422=Object[_0x3869dd(0x85)](_0x5296cc,_0x364849);(!_0x161422||(_0x3869dd(0x70)in _0x161422?!_0x5296cc[_0x3869dd(0x79)]:_0x161422[_0x3869dd(0x95)]||_0x161422[_0x3869dd(0x87)]))&&(_0x161422={'enumerable':!![],'get':function(){return _0x5296cc[_0x364849];}}),Object[_0x3869dd(0x9c)](_0x28fde5,_0x17756d,_0x161422);}:function(_0xe366e3,_0x20e020,_0x1dee27,_0x5a636d){if(_0x5a636d===undefined)_0x5a636d=_0x1dee27;_0xe366e3[_0x5a636d]=_0x20e020[_0x1dee27];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a37_0x49d2b1(0x7e)]?function(_0x2f4d2,_0x190981){const _0x4c1feb=a37_0x49d2b1;Object[_0x4c1feb(0x9c)](_0x2f4d2,_0x4c1feb(0x9a),{'enumerable':!![],'value':_0x190981});}:function(_0xb1e816,_0xc9f7f7){const _0x2b27ec=a37_0x49d2b1;_0xb1e816[_0x2b27ec(0x9a)]=_0xc9f7f7;}),__importStar=this&&this['__importStar']||function(_0x57542d){const _0xc87ebf=a37_0x49d2b1;if(_0x57542d&&_0x57542d[_0xc87ebf(0x79)])return _0x57542d;var _0xefd650={};if(_0x57542d!=null){for(var _0x2907be in _0x57542d)if(_0x2907be!==_0xc87ebf(0x9a)&&Object[_0xc87ebf(0x74)][_0xc87ebf(0x84)][_0xc87ebf(0x8e)](_0x57542d,_0x2907be))__createBinding(_0xefd650,_0x57542d,_0x2907be);}return __setModuleDefault(_0xefd650,_0x57542d),_0xefd650;},__importDefault=this&&this[a37_0x49d2b1(0x99)]||function(_0x2511f7){return _0x2511f7&&_0x2511f7['__esModule']?_0x2511f7:{'default':_0x2511f7};};Object['defineProperty'](exports,a37_0x49d2b1(0x79),{'value':!![]}),exports[a37_0x49d2b1(0x82)]=exports[a37_0x49d2b1(0x86)]=exports[a37_0x49d2b1(0x6f)]=exports['show']=exports[a37_0x49d2b1(0x89)]=exports[a37_0x49d2b1(0x8a)]=exports[a37_0x49d2b1(0x6c)]=void 0x0;const Yup=__importStar(require(a37_0x49d2b1(0x71))),AppError_1=__importDefault(require(a37_0x49d2b1(0x97))),ListTicketNotesService_1=__importDefault(require(a37_0x49d2b1(0x90))),CreateTicketNoteService_1=__importDefault(require(a37_0x49d2b1(0x88))),UpdateTicketNoteService_1=__importDefault(require(a37_0x49d2b1(0x9b))),ShowTicketNoteService_1=__importDefault(require(a37_0x49d2b1(0x93))),FindAllTicketNotesService_1=__importDefault(require('../services/TicketNoteService/FindAllTicketNotesService')),DeleteTicketNoteService_1=__importDefault(require(a37_0x49d2b1(0x6e))),FindNotesByContactIdAndTicketId_1=__importDefault(require(a37_0x49d2b1(0x8b))),index=async(_0x1c36a4,_0x1e3fd3)=>{const _0x45ce24=a37_0x49d2b1,{searchParam:_0x5d82f3,pageNumber:_0x192f72}=_0x1c36a4['query'],{ticketNotes:_0x20494b,count:_0x541862,hasMore:_0x19ece7}=await(0x0,ListTicketNotesService_1[_0x45ce24(0x9a)])({'searchParam':_0x5d82f3,'pageNumber':_0x192f72});return _0x1e3fd3[_0x45ce24(0x98)]({'ticketNotes':_0x20494b,'count':_0x541862,'hasMore':_0x19ece7});};exports[a37_0x49d2b1(0x6c)]=index;const list=async(_0x57e314,_0x1ee853)=>{const _0x58ff32=a37_0x49d2b1,_0x570bed=await(0x0,FindAllTicketNotesService_1['default'])();return _0x1ee853['status'](0xc8)[_0x58ff32(0x98)](_0x570bed);};exports[a37_0x49d2b1(0x8a)]=list;const store=async(_0x430bd4,_0x24dc1a)=>{const _0x17ef8a=a37_0x49d2b1,_0x456219=_0x430bd4[_0x17ef8a(0x96)],{id:_0x54b9bb}=_0x430bd4['user'],_0x4d1b60=Yup['object']()[_0x17ef8a(0x81)]({'note':Yup['string']()[_0x17ef8a(0x7b)]()});try{await _0x4d1b60[_0x17ef8a(0x75)](_0x456219);}catch(_0x19819e){throw new AppError_1[(_0x17ef8a(0x9a))](_0x19819e[_0x17ef8a(0x7d)]);}const _0x40e0a8=await(0x0,CreateTicketNoteService_1['default'])({..._0x456219,'userId':_0x54b9bb});return _0x24dc1a['status'](0xc8)[_0x17ef8a(0x98)](_0x40e0a8);};exports[a37_0x49d2b1(0x89)]=store;const show=async(_0x4ad05d,_0x44d092)=>{const _0x13d12b=a37_0x49d2b1,{id:_0x3e71cd}=_0x4ad05d['params'],_0x3089e4=await(0x0,ShowTicketNoteService_1[_0x13d12b(0x9a)])(_0x3e71cd);return _0x44d092[_0x13d12b(0x83)](0xc8)[_0x13d12b(0x98)](_0x3089e4);};exports[a37_0x49d2b1(0x91)]=show;const update=async(_0x3e1ebf,_0x39c691)=>{const _0x47bb81=a37_0x49d2b1,_0x52da2d=_0x3e1ebf['body'],_0x5f1868=Yup['object']()['shape']({'note':Yup[_0x47bb81(0x9f)]()});try{await _0x5f1868[_0x47bb81(0x75)](_0x52da2d);}catch(_0x2506ce){throw new AppError_1['default'](_0x2506ce[_0x47bb81(0x7d)]);}const _0x54d76c=await(0x0,UpdateTicketNoteService_1[_0x47bb81(0x9a)])(_0x52da2d);return _0x39c691[_0x47bb81(0x83)](0xc8)[_0x47bb81(0x98)](_0x54d76c);};exports[a37_0x49d2b1(0x6f)]=update;function a37_0x2ad0(_0x57cef1,_0x3c13b0){const _0x26a66a=a37_0x26a6();return a37_0x2ad0=function(_0x2ad030,_0x3ad703){_0x2ad030=_0x2ad030-0x6c;let _0x184363=_0x26a66a[_0x2ad030];return _0x184363;},a37_0x2ad0(_0x57cef1,_0x3c13b0);}const remove=async(_0xeb8962,_0x181208)=>{const _0x1a9794=a37_0x49d2b1,{id:_0x5176df}=_0xeb8962[_0x1a9794(0x73)];if(_0xeb8962['user'][_0x1a9794(0x76)]!==_0x1a9794(0x6d))throw new AppError_1[(_0x1a9794(0x9a))]('ERR_NO_PERMISSION',0x193);return await(0x0,DeleteTicketNoteService_1[_0x1a9794(0x9a)])(_0x5176df),_0x181208['status'](0xc8)['json']({'message':_0x1a9794(0x72)});};exports[a37_0x49d2b1(0x86)]=remove;const findFilteredList=async(_0x24dea0,_0x376ca4)=>{const _0x2dd01b=a37_0x49d2b1;try{const {contactId:_0x35beb3,ticketId:_0x59236e}=_0x24dea0[_0x2dd01b(0x9e)],_0x161952=await(0x0,FindNotesByContactIdAndTicketId_1[_0x2dd01b(0x9a)])({'contactId':_0x35beb3,'ticketId':_0x59236e});return _0x376ca4[_0x2dd01b(0x83)](0xc8)['json'](_0x161952);}catch(_0x55d2ea){return _0x376ca4['status'](0x1f4)[_0x2dd01b(0x98)]({'message':_0x55d2ea});}};exports[a37_0x49d2b1(0x82)]=findFilteredList;