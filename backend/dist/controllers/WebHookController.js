'use strict';const a41_0x1a15bb=a41_0xe8d7;(function(_0x10a552,_0x38b943){const _0x2e8917=a41_0xe8d7,_0x17d663=_0x10a552();while(!![]){try{const _0x13d6bb=parseInt(_0x2e8917(0x12d))/0x1*(-parseInt(_0x2e8917(0x121))/0x2)+-parseInt(_0x2e8917(0x125))/0x3+-parseInt(_0x2e8917(0x118))/0x4+-parseInt(_0x2e8917(0x116))/0x5+parseInt(_0x2e8917(0x123))/0x6*(-parseInt(_0x2e8917(0x136))/0x7)+-parseInt(_0x2e8917(0x133))/0x8+parseInt(_0x2e8917(0x132))/0x9;if(_0x13d6bb===_0x38b943)break;else _0x17d663['push'](_0x17d663['shift']());}catch(_0x242600){_0x17d663['push'](_0x17d663['shift']());}}}(a41_0x421d,0xcb7ae));var __importDefault=this&&this[a41_0x1a15bb(0x119)]||function(_0x2e006a){return _0x2e006a&&_0x2e006a['__esModule']?_0x2e006a:{'default':_0x2e006a};};Object[a41_0x1a15bb(0x115)](exports,a41_0x1a15bb(0x131),{'value':!![]}),exports[a41_0x1a15bb(0x12c)]=exports[a41_0x1a15bb(0x124)]=void 0x0;const Whatsapp_1=__importDefault(require(a41_0x1a15bb(0x120))),facebookMessageListener_1=require(a41_0x1a15bb(0x126)),index=async(_0x8ab028,_0x5cce6a)=>{const _0x1d4e50=a41_0x1a15bb,_0x4dcfe2=process[_0x1d4e50(0x127)][_0x1d4e50(0x12b)]||'whaticket',_0x48060f=_0x8ab028[_0x1d4e50(0x117)]['hub.mode'],_0x5bf339=_0x8ab028[_0x1d4e50(0x117)][_0x1d4e50(0x12e)],_0x27cacd=_0x8ab028['query'][_0x1d4e50(0x122)];if(_0x48060f&&_0x5bf339){if(_0x48060f===_0x1d4e50(0x11f)&&_0x5bf339===_0x4dcfe2)return _0x5cce6a[_0x1d4e50(0x11a)](0xc8)[_0x1d4e50(0x129)](_0x27cacd);}return _0x5cce6a[_0x1d4e50(0x11a)](0x193)[_0x1d4e50(0x135)]({'message':'Forbidden'});};exports['index']=index;function a41_0x421d(){const _0x3c1f78=['VERIFY_TOKEN','webHook','19ZKGgBJ','hub.verify_token','forEach','handleMessage','__esModule','46491984GTaDxS','3439224ouGaFj','companyId','json','880642MvVlad','defineProperty','6797650tPScTD','query','5693288NKmCJU','__importDefault','status','object','entry','EVENT_RECEIVED','page','subscribe','../models/Whatsapp','19638FdoLBL','hub.challenge','42eQGZkV','index','157092EeIuVU','../services/FacebookServices/facebookMessageListener','env','findOne','send','instagram'];a41_0x421d=function(){return _0x3c1f78;};return a41_0x421d();}function a41_0xe8d7(_0x5c2ca5,_0x7f9052){const _0x421d2f=a41_0x421d();return a41_0xe8d7=function(_0xe8d765,_0x512d08){_0xe8d765=_0xe8d765-0x115;let _0x3336f5=_0x421d2f[_0xe8d765];return _0x3336f5;},a41_0xe8d7(_0x5c2ca5,_0x7f9052);}const webHook=async(_0x14dcf8,_0x1b0ba8)=>{const _0x45ee53=a41_0x1a15bb;try{const {body:_0x37a1b3}=_0x14dcf8;if(_0x37a1b3['object']===_0x45ee53(0x11e)||_0x37a1b3[_0x45ee53(0x11b)]==='instagram'){let _0x247846;return _0x37a1b3['object']===_0x45ee53(0x11e)?_0x247846='facebook':_0x247846=_0x45ee53(0x12a),_0x37a1b3[_0x45ee53(0x11c)]?.[_0x45ee53(0x12f)](async _0x5c8735=>{const _0x470049=_0x45ee53,_0x56a0c8=await Whatsapp_1['default'][_0x470049(0x128)]({'where':{'facebookPageUserId':_0x5c8735['id'],'channel':_0x247846}});_0x56a0c8&&_0x5c8735['messaging']?.[_0x470049(0x12f)](_0x42fe3e=>{const _0x4a95ff=_0x470049;(0x0,facebookMessageListener_1[_0x4a95ff(0x130)])(_0x56a0c8,_0x42fe3e,_0x247846,_0x56a0c8[_0x4a95ff(0x134)]);});}),_0x1b0ba8[_0x45ee53(0x11a)](0xc8)[_0x45ee53(0x135)]({'message':_0x45ee53(0x11d)});}return _0x1b0ba8[_0x45ee53(0x11a)](0x194)['json']({'message':_0x37a1b3});}catch(_0x42026a){return _0x1b0ba8[_0x45ee53(0x11a)](0x1f4)['json']({'message':_0x42026a});}};exports[a41_0x1a15bb(0x12c)]=webHook;