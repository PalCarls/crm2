'use strict';const a41_0x2aa5e9=a41_0x4734;(function(_0x277300,_0x12b727){const _0x3ef8ca=a41_0x4734,_0x5bb345=_0x277300();while(!![]){try{const _0xd0bc6=-parseInt(_0x3ef8ca(0xb6))/0x1+parseInt(_0x3ef8ca(0xc4))/0x2*(parseInt(_0x3ef8ca(0xbd))/0x3)+parseInt(_0x3ef8ca(0xb7))/0x4*(-parseInt(_0x3ef8ca(0xbb))/0x5)+-parseInt(_0x3ef8ca(0xcc))/0x6+parseInt(_0x3ef8ca(0xbf))/0x7+-parseInt(_0x3ef8ca(0xc7))/0x8+parseInt(_0x3ef8ca(0xb4))/0x9*(parseInt(_0x3ef8ca(0xb5))/0xa);if(_0xd0bc6===_0x12b727)break;else _0x5bb345['push'](_0x5bb345['shift']());}catch(_0x35d868){_0x5bb345['push'](_0x5bb345['shift']());}}}(a41_0xcc7e,0x7740d));function a41_0xcc7e(){const _0x3fe549=['status','5437854XJjruy','json','defineProperty','page','findOne','hub.verify_token','index','hub.mode','subscribe','9HCfuuQ','16858610TqwbQH','16648OfUOqz','4wLMdHp','forEach','messaging','__esModule','3646155CjDNHb','entry','3oxraUW','../models/Whatsapp','918596uAhsbt','../services/FacebookServices/facebookMessageListener','query','facebook','instagram','1271722kMaAQI','EVENT_RECEIVED','webHook','2498408SzbmTr','__importDefault','object','env'];a41_0xcc7e=function(){return _0x3fe549;};return a41_0xcc7e();}var __importDefault=this&&this[a41_0x2aa5e9(0xc8)]||function(_0x33fa38){const _0x2128f9=a41_0x2aa5e9;return _0x33fa38&&_0x33fa38[_0x2128f9(0xba)]?_0x33fa38:{'default':_0x33fa38};};Object[a41_0x2aa5e9(0xce)](exports,'__esModule',{'value':!![]}),exports[a41_0x2aa5e9(0xc6)]=exports[a41_0x2aa5e9(0xd2)]=void 0x0;function a41_0x4734(_0x3f3253,_0x5f3816){const _0xcc7eb8=a41_0xcc7e();return a41_0x4734=function(_0x47344e,_0xb6549f){_0x47344e=_0x47344e-0xb4;let _0x5c6ac1=_0xcc7eb8[_0x47344e];return _0x5c6ac1;},a41_0x4734(_0x3f3253,_0x5f3816);}const Whatsapp_1=__importDefault(require(a41_0x2aa5e9(0xbe))),facebookMessageListener_1=require(a41_0x2aa5e9(0xc0)),index=async(_0xe0b8db,_0x39b2b4)=>{const _0x53ce43=a41_0x2aa5e9,_0x1e6f99=process[_0x53ce43(0xca)]['VERIFY_TOKEN']||'whaticket',_0x56907b=_0xe0b8db[_0x53ce43(0xc1)][_0x53ce43(0xd3)],_0x91ffb1=_0xe0b8db[_0x53ce43(0xc1)][_0x53ce43(0xd1)],_0x4a723d=_0xe0b8db['query']['hub.challenge'];if(_0x56907b&&_0x91ffb1){if(_0x56907b===_0x53ce43(0xd4)&&_0x91ffb1===_0x1e6f99)return _0x39b2b4[_0x53ce43(0xcb)](0xc8)['send'](_0x4a723d);}return _0x39b2b4[_0x53ce43(0xcb)](0x193)[_0x53ce43(0xcd)]({'message':'Forbidden'});};exports['index']=index;const webHook=async(_0x18cf35,_0x57595a)=>{const _0x17b6a6=a41_0x2aa5e9;try{const {body:_0x24de9c}=_0x18cf35;if(_0x24de9c[_0x17b6a6(0xc9)]===_0x17b6a6(0xcf)||_0x24de9c[_0x17b6a6(0xc9)]===_0x17b6a6(0xc3)){let _0x55286b;return _0x24de9c[_0x17b6a6(0xc9)]===_0x17b6a6(0xcf)?_0x55286b=_0x17b6a6(0xc2):_0x55286b=_0x17b6a6(0xc3),_0x24de9c[_0x17b6a6(0xbc)]?.[_0x17b6a6(0xb8)](async _0x2c14e5=>{const _0x103944=_0x17b6a6,_0x3f86a3=await Whatsapp_1['default'][_0x103944(0xd0)]({'where':{'facebookPageUserId':_0x2c14e5['id'],'channel':_0x55286b}});_0x3f86a3&&_0x2c14e5[_0x103944(0xb9)]?.[_0x103944(0xb8)](_0x25cd3b=>{(0x0,facebookMessageListener_1['handleMessage'])(_0x3f86a3,_0x25cd3b,_0x55286b,_0x3f86a3['companyId']);});}),_0x57595a[_0x17b6a6(0xcb)](0xc8)[_0x17b6a6(0xcd)]({'message':_0x17b6a6(0xc5)});}return _0x57595a['status'](0x194)[_0x17b6a6(0xcd)]({'message':_0x24de9c});}catch(_0x506f74){return _0x57595a[_0x17b6a6(0xcb)](0x1f4)[_0x17b6a6(0xcd)]({'message':_0x506f74});}};exports[a41_0x2aa5e9(0xc6)]=webHook;