'use strict';const a38_0x391734=a38_0x2386;function a38_0x46a1(){const _0x416eb5=['24TgaBmD','page','facebook','findOne','706279fguYvj','hub.mode','index','default','subscribe','object','messaging','query','../services/FacebookServices/facebookMessageListener','send','status','1215189SQRolP','EVENT_RECEIVED','entry','Forbidden','16503wqTKwJ','572949JNKpnc','defineProperty','handleMessage','hub.verify_token','2243448LjUGTW','__importDefault','352285zmrurW','json','whaticket','forEach','31720CIpeJU','webHook','hub.challenge','__esModule','6SxXYQg','VERIFY_TOKEN','env','instagram'];a38_0x46a1=function(){return _0x416eb5;};return a38_0x46a1();}(function(_0x31944f,_0x19967b){const _0x3531ee=a38_0x2386,_0x264bb1=_0x31944f();while(!![]){try{const _0x34501b=parseInt(_0x3531ee(0x1aa))/0x1*(parseInt(_0x3531ee(0x1b9))/0x2)+-parseInt(_0x3531ee(0x1ab))/0x3+parseInt(_0x3531ee(0x1b5))/0x4+-parseInt(_0x3531ee(0x1b1))/0x5*(-parseInt(_0x3531ee(0x1bd))/0x6)+-parseInt(_0x3531ee(0x1c1))/0x7+parseInt(_0x3531ee(0x1af))/0x8+-parseInt(_0x3531ee(0x1cc))/0x9;if(_0x34501b===_0x19967b)break;else _0x264bb1['push'](_0x264bb1['shift']());}catch(_0x52606b){_0x264bb1['push'](_0x264bb1['shift']());}}}(a38_0x46a1,0x2f11d));function a38_0x2386(_0x318934,_0x27c6a3){const _0x46a185=a38_0x46a1();return a38_0x2386=function(_0x238697,_0x2900da){_0x238697=_0x238697-0x1a9;let _0x1c8124=_0x46a185[_0x238697];return _0x1c8124;},a38_0x2386(_0x318934,_0x27c6a3);}var __importDefault=this&&this[a38_0x391734(0x1b0)]||function(_0x3c4f03){return _0x3c4f03&&_0x3c4f03['__esModule']?_0x3c4f03:{'default':_0x3c4f03};};Object[a38_0x391734(0x1ac)](exports,a38_0x391734(0x1b8),{'value':!![]}),exports[a38_0x391734(0x1b6)]=exports[a38_0x391734(0x1c3)]=void 0x0;const Whatsapp_1=__importDefault(require('../models/Whatsapp')),facebookMessageListener_1=require(a38_0x391734(0x1c9)),index=async(_0x14ab29,_0x136aa2)=>{const _0x67750c=a38_0x391734,_0x2d4bde=process[_0x67750c(0x1bb)][_0x67750c(0x1ba)]||_0x67750c(0x1b3),_0x36e2e1=_0x14ab29[_0x67750c(0x1c8)][_0x67750c(0x1c2)],_0xc463f4=_0x14ab29[_0x67750c(0x1c8)][_0x67750c(0x1ae)],_0x22c320=_0x14ab29[_0x67750c(0x1c8)][_0x67750c(0x1b7)];if(_0x36e2e1&&_0xc463f4){if(_0x36e2e1===_0x67750c(0x1c5)&&_0xc463f4===_0x2d4bde)return _0x136aa2['status'](0xc8)[_0x67750c(0x1ca)](_0x22c320);}return _0x136aa2[_0x67750c(0x1cb)](0x193)['json']({'message':_0x67750c(0x1a9)});};exports[a38_0x391734(0x1c3)]=index;const webHook=async(_0x3d530a,_0x31d888)=>{const _0x402cd8=a38_0x391734;try{const {body:_0x3c7a8a}=_0x3d530a;if(_0x3c7a8a['object']==='page'||_0x3c7a8a[_0x402cd8(0x1c6)]===_0x402cd8(0x1bc)){let _0x4f4f60;return _0x3c7a8a['object']===_0x402cd8(0x1be)?_0x4f4f60=_0x402cd8(0x1bf):_0x4f4f60=_0x402cd8(0x1bc),_0x3c7a8a[_0x402cd8(0x1ce)]?.['forEach'](async _0x46ae9f=>{const _0xf2026b=_0x402cd8,_0x2ec86e=await Whatsapp_1[_0xf2026b(0x1c4)][_0xf2026b(0x1c0)]({'where':{'facebookPageUserId':_0x46ae9f['id'],'channel':_0x4f4f60}});_0x2ec86e&&_0x46ae9f[_0xf2026b(0x1c7)]?.[_0xf2026b(0x1b4)](_0x2907a3=>{const _0xa06a8c=_0xf2026b;(0x0,facebookMessageListener_1[_0xa06a8c(0x1ad)])(_0x2ec86e,_0x2907a3,_0x4f4f60,_0x2ec86e['companyId']);});}),_0x31d888[_0x402cd8(0x1cb)](0xc8)[_0x402cd8(0x1b2)]({'message':_0x402cd8(0x1cd)});}return _0x31d888[_0x402cd8(0x1cb)](0x194)[_0x402cd8(0x1b2)]({'message':_0x3c7a8a});}catch(_0xce932e){return _0x31d888[_0x402cd8(0x1cb)](0x1f4)[_0x402cd8(0x1b2)]({'message':_0xce932e});}};exports['webHook']=webHook;