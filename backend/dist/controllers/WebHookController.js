'use strict';const a38_0x72e2a3=a38_0x512c;function a38_0x512c(_0x2c468f,_0x3cdd62){const _0x134126=a38_0x1341();return a38_0x512c=function(_0x512c5e,_0x233f87){_0x512c5e=_0x512c5e-0x1ef;let _0x4f2dd4=_0x134126[_0x512c5e];return _0x4f2dd4;},a38_0x512c(_0x2c468f,_0x3cdd62);}(function(_0x206b12,_0x310b05){const _0x1b02c0=a38_0x512c,_0x529840=_0x206b12();while(!![]){try{const _0x8a400a=-parseInt(_0x1b02c0(0x20a))/0x1+-parseInt(_0x1b02c0(0x206))/0x2*(parseInt(_0x1b02c0(0x1fe))/0x3)+-parseInt(_0x1b02c0(0x212))/0x4*(parseInt(_0x1b02c0(0x204))/0x5)+-parseInt(_0x1b02c0(0x1fc))/0x6+-parseInt(_0x1b02c0(0x1ff))/0x7*(-parseInt(_0x1b02c0(0x208))/0x8)+-parseInt(_0x1b02c0(0x207))/0x9*(-parseInt(_0x1b02c0(0x1f7))/0xa)+parseInt(_0x1b02c0(0x1fa))/0xb;if(_0x8a400a===_0x310b05)break;else _0x529840['push'](_0x529840['shift']());}catch(_0x750b6e){_0x529840['push'](_0x529840['shift']());}}}(a38_0x1341,0x1f7c9));var __importDefault=this&&this[a38_0x72e2a3(0x201)]||function(_0x5de144){const _0x537190=a38_0x72e2a3;return _0x5de144&&_0x5de144[_0x537190(0x203)]?_0x5de144:{'default':_0x5de144};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a38_0x72e2a3(0x20b)]=exports[a38_0x72e2a3(0x1f4)]=void 0x0;const Whatsapp_1=__importDefault(require('../models/Whatsapp')),facebookMessageListener_1=require(a38_0x72e2a3(0x20f)),index=async(_0x4d8fc6,_0x468381)=>{const _0x29adc1=a38_0x72e2a3,_0x5623c0=process[_0x29adc1(0x1f8)]['VERIFY_TOKEN']||_0x29adc1(0x210),_0x4b7129=_0x4d8fc6[_0x29adc1(0x214)][_0x29adc1(0x1f5)],_0x119c1d=_0x4d8fc6[_0x29adc1(0x214)][_0x29adc1(0x1fd)],_0x163c3e=_0x4d8fc6[_0x29adc1(0x214)][_0x29adc1(0x1f9)];if(_0x4b7129&&_0x119c1d){if(_0x4b7129===_0x29adc1(0x200)&&_0x119c1d===_0x5623c0)return _0x468381[_0x29adc1(0x211)](0xc8)[_0x29adc1(0x1f0)](_0x163c3e);}return _0x468381[_0x29adc1(0x211)](0x193)[_0x29adc1(0x20d)]({'message':_0x29adc1(0x213)});};function a38_0x1341(){const _0xc54228=['query','object','send','default','forEach','EVENT_RECEIVED','index','hub.mode','instagram','80xUqxja','env','hub.challenge','3531011HmNDVG','page','828672dgcAtd','hub.verify_token','9UYWERE','987whhtwL','subscribe','__importDefault','findOne','__esModule','21205FWFKFU','handleMessage','166028ejheiH','46503WwfQml','9368AZVqMu','entry','7084ivOfFq','webHook','facebook','json','messaging','../services/FacebookServices/facebookMessageListener','whaticket','status','4wKpgiS','Forbidden'];a38_0x1341=function(){return _0xc54228;};return a38_0x1341();}exports[a38_0x72e2a3(0x1f4)]=index;const webHook=async(_0x4f2942,_0x41ac99)=>{const _0x2afdc5=a38_0x72e2a3;try{const {body:_0x12fead}=_0x4f2942;if(_0x12fead[_0x2afdc5(0x1ef)]===_0x2afdc5(0x1fb)||_0x12fead['object']===_0x2afdc5(0x1f6)){let _0x39202c;return _0x12fead[_0x2afdc5(0x1ef)]===_0x2afdc5(0x1fb)?_0x39202c=_0x2afdc5(0x20c):_0x39202c='instagram',_0x12fead[_0x2afdc5(0x209)]?.[_0x2afdc5(0x1f2)](async _0x5dd00e=>{const _0x4c02c0=_0x2afdc5,_0x26e61e=await Whatsapp_1[_0x4c02c0(0x1f1)][_0x4c02c0(0x202)]({'where':{'facebookPageUserId':_0x5dd00e['id'],'channel':_0x39202c}});_0x26e61e&&_0x5dd00e[_0x4c02c0(0x20e)]?.[_0x4c02c0(0x1f2)](_0x5e6a06=>{const _0x1d6d41=_0x4c02c0;(0x0,facebookMessageListener_1[_0x1d6d41(0x205)])(_0x26e61e,_0x5e6a06,_0x39202c,_0x26e61e['companyId']);});}),_0x41ac99[_0x2afdc5(0x211)](0xc8)[_0x2afdc5(0x20d)]({'message':_0x2afdc5(0x1f3)});}return _0x41ac99[_0x2afdc5(0x211)](0x194)[_0x2afdc5(0x20d)]({'message':_0x12fead});}catch(_0x5a8a06){return _0x41ac99['status'](0x1f4)[_0x2afdc5(0x20d)]({'message':_0x5a8a06});}};exports[a38_0x72e2a3(0x20b)]=webHook;