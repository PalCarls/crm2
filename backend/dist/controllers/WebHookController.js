'use strict';const a37_0x3c810d=a37_0x53b2;(function(_0x4badec,_0x161a54){const _0x35515c=a37_0x53b2,_0x2150b9=_0x4badec();while(!![]){try{const _0x10bb77=-parseInt(_0x35515c(0xc5))/0x1*(parseInt(_0x35515c(0xc3))/0x2)+-parseInt(_0x35515c(0xdc))/0x3*(-parseInt(_0x35515c(0xc8))/0x4)+parseInt(_0x35515c(0xd5))/0x5+parseInt(_0x35515c(0xda))/0x6*(-parseInt(_0x35515c(0xc9))/0x7)+-parseInt(_0x35515c(0xce))/0x8+-parseInt(_0x35515c(0xdf))/0x9*(parseInt(_0x35515c(0xd9))/0xa)+parseInt(_0x35515c(0xd6))/0xb;if(_0x10bb77===_0x161a54)break;else _0x2150b9['push'](_0x2150b9['shift']());}catch(_0x4cff65){_0x2150b9['push'](_0x2150b9['shift']());}}}(a37_0x2661,0xc8926));function a37_0x53b2(_0x2cfc64,_0x18c450){const _0x266103=a37_0x2661();return a37_0x53b2=function(_0x53b23c,_0x2f57cb){_0x53b23c=_0x53b23c-0xbf;let _0x42c0bf=_0x266103[_0x53b23c];return _0x42c0bf;},a37_0x53b2(_0x2cfc64,_0x18c450);}var __importDefault=this&&this[a37_0x3c810d(0xcd)]||function(_0x21037e){const _0x329596=a37_0x3c810d;return _0x21037e&&_0x21037e[_0x329596(0xd3)]?_0x21037e:{'default':_0x21037e};};Object[a37_0x3c810d(0xc7)](exports,'__esModule',{'value':!![]}),exports['webHook']=exports[a37_0x3c810d(0xd0)]=void 0x0;const Whatsapp_1=__importDefault(require(a37_0x3c810d(0xc6))),facebookMessageListener_1=require('../services/FacebookServices/facebookMessageListener'),index=async(_0xfef865,_0x196d08)=>{const _0x3e3feb=a37_0x3c810d,_0x3f8ec3=process[_0x3e3feb(0xc0)][_0x3e3feb(0xde)]||_0x3e3feb(0xcf),_0x3e0170=_0xfef865[_0x3e3feb(0xe0)]['hub.mode'],_0x4cee4c=_0xfef865[_0x3e3feb(0xe0)]['hub.verify_token'],_0x34e69b=_0xfef865[_0x3e3feb(0xe0)][_0x3e3feb(0xd1)];if(_0x3e0170&&_0x4cee4c){if(_0x3e0170==='subscribe'&&_0x4cee4c===_0x3f8ec3)return _0x196d08[_0x3e3feb(0xc1)](0xc8)[_0x3e3feb(0xd7)](_0x34e69b);}return _0x196d08[_0x3e3feb(0xc1)](0x193)[_0x3e3feb(0xd8)]({'message':'Forbidden'});};exports[a37_0x3c810d(0xd0)]=index;const webHook=async(_0x223984,_0x40e09f)=>{const _0x439f89=a37_0x3c810d;try{const {body:_0x4cb7c6}=_0x223984;if(_0x4cb7c6[_0x439f89(0xbf)]===_0x439f89(0xcc)||_0x4cb7c6['object']===_0x439f89(0xdb)){let _0x28be44;return _0x4cb7c6['object']===_0x439f89(0xcc)?_0x28be44=_0x439f89(0xd4):_0x28be44=_0x439f89(0xdb),_0x4cb7c6['entry']?.[_0x439f89(0xd2)](async _0x73a500=>{const _0x555509=_0x439f89,_0x3a8fb0=await Whatsapp_1['default']['findOne']({'where':{'facebookPageUserId':_0x73a500['id'],'channel':_0x28be44}});_0x3a8fb0&&_0x73a500[_0x555509(0xc2)]?.['forEach'](_0x15a216=>{const _0x400b2d=_0x555509;(0x0,facebookMessageListener_1[_0x400b2d(0xcb)])(_0x3a8fb0,_0x15a216,_0x28be44,_0x3a8fb0[_0x400b2d(0xdd)]);});}),_0x40e09f[_0x439f89(0xc1)](0xc8)[_0x439f89(0xd8)]({'message':_0x439f89(0xca)});}return _0x40e09f[_0x439f89(0xc1)](0x194)[_0x439f89(0xd8)]({'message':_0x4cb7c6});}catch(_0x3d51a7){return _0x40e09f[_0x439f89(0xc1)](0x1f4)[_0x439f89(0xd8)]({'message':_0x3d51a7});}};function a37_0x2661(){const _0x49a568=['__esModule','facebook','2183375zZNfUe','9282823lxbnqz','send','json','20LwCYfY','6qeXMOj','instagram','291VyoOFP','companyId','VERIFY_TOKEN','43614LqPtYn','query','object','env','status','messaging','1211186VpKEge','webHook','1oAcVSq','../models/Whatsapp','defineProperty','29908EHnKMC','161693AYKMdr','EVENT_RECEIVED','handleMessage','page','__importDefault','4367288OmZKHW','whaticket','index','hub.challenge','forEach'];a37_0x2661=function(){return _0x49a568;};return a37_0x2661();}exports[a37_0x3c810d(0xc4)]=webHook;