'use strict';const a39_0x63af83=a39_0x1dae;(function(_0x2ab9d8,_0xfd7111){const _0x1e5aa9=a39_0x1dae,_0x4d0d8e=_0x2ab9d8();while(!![]){try{const _0x19ce73=-parseInt(_0x1e5aa9(0xe9))/0x1+-parseInt(_0x1e5aa9(0xcb))/0x2*(parseInt(_0x1e5aa9(0xdc))/0x3)+parseInt(_0x1e5aa9(0xda))/0x4*(-parseInt(_0x1e5aa9(0xd7))/0x5)+parseInt(_0x1e5aa9(0xe6))/0x6*(-parseInt(_0x1e5aa9(0xe0))/0x7)+parseInt(_0x1e5aa9(0xe3))/0x8*(parseInt(_0x1e5aa9(0xd9))/0x9)+parseInt(_0x1e5aa9(0xdd))/0xa*(-parseInt(_0x1e5aa9(0xcc))/0xb)+parseInt(_0x1e5aa9(0xe7))/0xc*(parseInt(_0x1e5aa9(0xea))/0xd);if(_0x19ce73===_0xfd7111)break;else _0x4d0d8e['push'](_0x4d0d8e['shift']());}catch(_0x1feb6a){_0x4d0d8e['push'](_0x4d0d8e['shift']());}}}(a39_0x1103,0x8361f));function a39_0x1dae(_0x3667b4,_0x4b65e2){const _0x110373=a39_0x1103();return a39_0x1dae=function(_0x1daed8,_0x51db34){_0x1daed8=_0x1daed8-0xc9;let _0x15e2d1=_0x110373[_0x1daed8];return _0x15e2d1;},a39_0x1dae(_0x3667b4,_0x4b65e2);}var __importDefault=this&&this['__importDefault']||function(_0xb68b38){const _0x78513d=a39_0x1dae;return _0xb68b38&&_0xb68b38[_0x78513d(0xe4)]?_0xb68b38:{'default':_0xb68b38};};Object[a39_0x63af83(0xe1)](exports,'__esModule',{'value':!![]}),exports['webHook']=exports[a39_0x63af83(0xd4)]=void 0x0;function a39_0x1103(){const _0x58e55a=['facebook','335372OCKnVY','13tmguGm','forEach','page','env','EVENT_RECEIVED','handleMessage','43818mjmCax','1947GmUbzk','webHook','messaging','status','object','query','../models/Whatsapp','VERIFY_TOKEN','index','Forbidden','subscribe','5835oUSwdf','whaticket','2313wcUANy','2468GTxXEc','instagram','63DElImb','31300MtTokS','hub.verify_token','json','49NLpCYW','defineProperty','entry','24968HIHlcx','__esModule','companyId','168210kEMgMf','24021612KXomuN'];a39_0x1103=function(){return _0x58e55a;};return a39_0x1103();}const Whatsapp_1=__importDefault(require(a39_0x63af83(0xd2))),facebookMessageListener_1=require('../services/FacebookServices/facebookMessageListener'),index=async(_0xa01441,_0x7fb412)=>{const _0x3cfc9a=a39_0x63af83,_0x3f6433=process[_0x3cfc9a(0xed)][_0x3cfc9a(0xd3)]||_0x3cfc9a(0xd8),_0x26527a=_0xa01441[_0x3cfc9a(0xd1)]['hub.mode'],_0x519fbc=_0xa01441[_0x3cfc9a(0xd1)][_0x3cfc9a(0xde)],_0x350e03=_0xa01441[_0x3cfc9a(0xd1)]['hub.challenge'];if(_0x26527a&&_0x519fbc){if(_0x26527a===_0x3cfc9a(0xd6)&&_0x519fbc===_0x3f6433)return _0x7fb412[_0x3cfc9a(0xcf)](0xc8)['send'](_0x350e03);}return _0x7fb412['status'](0x193)[_0x3cfc9a(0xdf)]({'message':_0x3cfc9a(0xd5)});};exports['index']=index;const webHook=async(_0x171460,_0x30caa0)=>{const _0x2e65f1=a39_0x63af83;try{const {body:_0x4fcb0e}=_0x171460;if(_0x4fcb0e['object']===_0x2e65f1(0xec)||_0x4fcb0e[_0x2e65f1(0xd0)]===_0x2e65f1(0xdb)){let _0x162a2c;return _0x4fcb0e['object']===_0x2e65f1(0xec)?_0x162a2c=_0x2e65f1(0xe8):_0x162a2c=_0x2e65f1(0xdb),_0x4fcb0e[_0x2e65f1(0xe2)]?.[_0x2e65f1(0xeb)](async _0x4deacb=>{const _0x4a629e=_0x2e65f1,_0x3df5b0=await Whatsapp_1['default']['findOne']({'where':{'facebookPageUserId':_0x4deacb['id'],'channel':_0x162a2c}});_0x3df5b0&&_0x4deacb[_0x4a629e(0xce)]?.[_0x4a629e(0xeb)](_0x1d9d0f=>{const _0x2e6f3b=_0x4a629e;(0x0,facebookMessageListener_1[_0x2e6f3b(0xca)])(_0x3df5b0,_0x1d9d0f,_0x162a2c,_0x3df5b0[_0x2e6f3b(0xe5)]);});}),_0x30caa0[_0x2e65f1(0xcf)](0xc8)[_0x2e65f1(0xdf)]({'message':_0x2e65f1(0xc9)});}return _0x30caa0['status'](0x194)[_0x2e65f1(0xdf)]({'message':_0x4fcb0e});}catch(_0x467332){return _0x30caa0[_0x2e65f1(0xcf)](0x1f4)[_0x2e65f1(0xdf)]({'message':_0x467332});}};exports[a39_0x63af83(0xcd)]=webHook;