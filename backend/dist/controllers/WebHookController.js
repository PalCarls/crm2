'use strict';function a41_0x5ec6(_0x163d90,_0x4f21f4){const _0x1aadf4=a41_0x1aad();return a41_0x5ec6=function(_0x5ec684,_0x58ed0f){_0x5ec684=_0x5ec684-0xe2;let _0x26b624=_0x1aadf4[_0x5ec684];return _0x26b624;},a41_0x5ec6(_0x163d90,_0x4f21f4);}const a41_0xd9fdfa=a41_0x5ec6;(function(_0x597d6e,_0xd01ea5){const _0x2d98a6=a41_0x5ec6,_0x2010a5=_0x597d6e();while(!![]){try{const _0x2c30c3=-parseInt(_0x2d98a6(0xe9))/0x1*(parseInt(_0x2d98a6(0x105))/0x2)+-parseInt(_0x2d98a6(0x106))/0x3*(parseInt(_0x2d98a6(0x102))/0x4)+parseInt(_0x2d98a6(0xe6))/0x5+parseInt(_0x2d98a6(0xe4))/0x6*(parseInt(_0x2d98a6(0xfe))/0x7)+-parseInt(_0x2d98a6(0xe7))/0x8+parseInt(_0x2d98a6(0xf9))/0x9+-parseInt(_0x2d98a6(0xf1))/0xa;if(_0x2c30c3===_0xd01ea5)break;else _0x2010a5['push'](_0x2010a5['shift']());}catch(_0x4c2831){_0x2010a5['push'](_0x2010a5['shift']());}}}(a41_0x1aad,0x5e73e));var __importDefault=this&&this[a41_0xd9fdfa(0xec)]||function(_0x1508bd){const _0x57a862=a41_0xd9fdfa;return _0x1508bd&&_0x1508bd[_0x57a862(0x103)]?_0x1508bd:{'default':_0x1508bd};};Object[a41_0xd9fdfa(0xe8)](exports,a41_0xd9fdfa(0x103),{'value':!![]}),exports['webHook']=exports['index']=void 0x0;const Whatsapp_1=__importDefault(require(a41_0xd9fdfa(0xe3))),facebookMessageListener_1=require(a41_0xd9fdfa(0xf0)),index=async(_0x20a623,_0xadfd6)=>{const _0x7c8e74=a41_0xd9fdfa,_0x59d659=process[_0x7c8e74(0xf3)][_0x7c8e74(0x100)]||'whaticket',_0x2dbddd=_0x20a623[_0x7c8e74(0xee)][_0x7c8e74(0xf4)],_0x38f833=_0x20a623[_0x7c8e74(0xee)][_0x7c8e74(0x101)],_0x125f09=_0x20a623[_0x7c8e74(0xee)][_0x7c8e74(0xeb)];if(_0x2dbddd&&_0x38f833){if(_0x2dbddd===_0x7c8e74(0xf7)&&_0x38f833===_0x59d659)return _0xadfd6[_0x7c8e74(0xe5)](0xc8)['send'](_0x125f09);}return _0xadfd6['status'](0x193)[_0x7c8e74(0xed)]({'message':_0x7c8e74(0xf8)});};exports[a41_0xd9fdfa(0x104)]=index;function a41_0x1aad(){const _0x1c1ed4=['../models/Whatsapp','6126DHYJSY','status','3840890tVwOOo','1905928KMPcdR','defineProperty','71537dhiNhd','facebook','hub.challenge','__importDefault','json','query','handleMessage','../services/FacebookServices/facebookMessageListener','1219790IUylJu','companyId','env','hub.mode','findOne','messaging','subscribe','Forbidden','1834056HeYkgl','object','EVENT_RECEIVED','forEach','instagram','3633fTaaWV','webHook','VERIFY_TOKEN','hub.verify_token','12hIvbgr','__esModule','index','14TBhhNX','254004EnwCGD','entry'];a41_0x1aad=function(){return _0x1c1ed4;};return a41_0x1aad();}const webHook=async(_0x22a0ba,_0x9e7978)=>{const _0x3478c1=a41_0xd9fdfa;try{const {body:_0x22de1c}=_0x22a0ba;if(_0x22de1c[_0x3478c1(0xfa)]==='page'||_0x22de1c[_0x3478c1(0xfa)]===_0x3478c1(0xfd)){let _0x337ef1;return _0x22de1c[_0x3478c1(0xfa)]==='page'?_0x337ef1=_0x3478c1(0xea):_0x337ef1='instagram',_0x22de1c[_0x3478c1(0xe2)]?.[_0x3478c1(0xfc)](async _0xc42922=>{const _0x5cbe45=_0x3478c1,_0x28cc33=await Whatsapp_1['default'][_0x5cbe45(0xf5)]({'where':{'facebookPageUserId':_0xc42922['id'],'channel':_0x337ef1}});_0x28cc33&&_0xc42922[_0x5cbe45(0xf6)]?.['forEach'](_0x3887b6=>{const _0x30e91a=_0x5cbe45;(0x0,facebookMessageListener_1[_0x30e91a(0xef)])(_0x28cc33,_0x3887b6,_0x337ef1,_0x28cc33[_0x30e91a(0xf2)]);});}),_0x9e7978[_0x3478c1(0xe5)](0xc8)['json']({'message':_0x3478c1(0xfb)});}return _0x9e7978[_0x3478c1(0xe5)](0x194)[_0x3478c1(0xed)]({'message':_0x22de1c});}catch(_0x2ee309){return _0x9e7978[_0x3478c1(0xe5)](0x1f4)['json']({'message':_0x2ee309});}};exports[a41_0xd9fdfa(0xff)]=webHook;