'use strict';const a41_0x4c6c15=a41_0x58aa;function a41_0x58aa(_0x51d4be,_0x4d47f2){const _0x14a808=a41_0x14a8();return a41_0x58aa=function(_0x58aa3e,_0xa7146c){_0x58aa3e=_0x58aa3e-0x149;let _0x33beea=_0x14a808[_0x58aa3e];return _0x33beea;},a41_0x58aa(_0x51d4be,_0x4d47f2);}function a41_0x14a8(){const _0x1c66df=['112UhRlUK','json','11778924DdbvOM','hub.mode','findOne','instagram','45442490uqnNgz','handleMessage','hub.verify_token','subscribe','index','2574716qEcLBf','../services/FacebookServices/facebookMessageListener','11pLnKMa','5MgHvGY','status','webHook','10617984zVclOu','EVENT_RECEIVED','__esModule','send','3vRDSql','890906TQfmgh','VERIFY_TOKEN','127337uvwZVD','whaticket','facebook','messaging','object','query','defineProperty','../models/Whatsapp','entry','page','3367348XkLfsX','env','forEach'];a41_0x14a8=function(){return _0x1c66df;};return a41_0x14a8();}(function(_0x174864,_0x3f4be8){const _0x52c6b1=a41_0x58aa,_0x1a79e8=_0x174864();while(!![]){try{const _0x3bbc9d=parseInt(_0x52c6b1(0x16a))/0x1+-parseInt(_0x52c6b1(0x151))/0x2*(parseInt(_0x52c6b1(0x169))/0x3)+parseInt(_0x52c6b1(0x15f))/0x4*(parseInt(_0x52c6b1(0x162))/0x5)+-parseInt(_0x52c6b1(0x156))/0x6+parseInt(_0x52c6b1(0x16c))/0x7*(-parseInt(_0x52c6b1(0x154))/0x8)+-parseInt(_0x52c6b1(0x165))/0x9+parseInt(_0x52c6b1(0x15a))/0xa*(parseInt(_0x52c6b1(0x161))/0xb);if(_0x3bbc9d===_0x3f4be8)break;else _0x1a79e8['push'](_0x1a79e8['shift']());}catch(_0x2b609b){_0x1a79e8['push'](_0x1a79e8['shift']());}}}(a41_0x14a8,0xf38b4));var __importDefault=this&&this['__importDefault']||function(_0x198788){const _0x4680d9=a41_0x58aa;return _0x198788&&_0x198788[_0x4680d9(0x167)]?_0x198788:{'default':_0x198788};};Object[a41_0x4c6c15(0x14d)](exports,a41_0x4c6c15(0x167),{'value':!![]}),exports[a41_0x4c6c15(0x164)]=exports[a41_0x4c6c15(0x15e)]=void 0x0;const Whatsapp_1=__importDefault(require(a41_0x4c6c15(0x14e))),facebookMessageListener_1=require(a41_0x4c6c15(0x160)),index=async(_0x45c790,_0x45b00f)=>{const _0x22c971=a41_0x4c6c15,_0x19a494=process[_0x22c971(0x152)][_0x22c971(0x16b)]||_0x22c971(0x16d),_0xfe1bc2=_0x45c790[_0x22c971(0x14c)][_0x22c971(0x157)],_0x5dd4a8=_0x45c790['query'][_0x22c971(0x15c)],_0x1dcf3e=_0x45c790[_0x22c971(0x14c)]['hub.challenge'];if(_0xfe1bc2&&_0x5dd4a8){if(_0xfe1bc2===_0x22c971(0x15d)&&_0x5dd4a8===_0x19a494)return _0x45b00f[_0x22c971(0x163)](0xc8)[_0x22c971(0x168)](_0x1dcf3e);}return _0x45b00f['status'](0x193)[_0x22c971(0x155)]({'message':'Forbidden'});};exports[a41_0x4c6c15(0x15e)]=index;const webHook=async(_0x4303d3,_0x349f40)=>{const _0x256bf1=a41_0x4c6c15;try{const {body:_0x611b29}=_0x4303d3;if(_0x611b29['object']===_0x256bf1(0x150)||_0x611b29[_0x256bf1(0x14b)]===_0x256bf1(0x159)){let _0x38b4a4;return _0x611b29[_0x256bf1(0x14b)]===_0x256bf1(0x150)?_0x38b4a4=_0x256bf1(0x149):_0x38b4a4=_0x256bf1(0x159),_0x611b29[_0x256bf1(0x14f)]?.['forEach'](async _0x481ea7=>{const _0x291de3=_0x256bf1,_0xa58d16=await Whatsapp_1['default'][_0x291de3(0x158)]({'where':{'facebookPageUserId':_0x481ea7['id'],'channel':_0x38b4a4}});_0xa58d16&&_0x481ea7[_0x291de3(0x14a)]?.[_0x291de3(0x153)](_0xe3204=>{const _0x1176d0=_0x291de3;(0x0,facebookMessageListener_1[_0x1176d0(0x15b)])(_0xa58d16,_0xe3204,_0x38b4a4,_0xa58d16['companyId']);});}),_0x349f40[_0x256bf1(0x163)](0xc8)[_0x256bf1(0x155)]({'message':_0x256bf1(0x166)});}return _0x349f40[_0x256bf1(0x163)](0x194)['json']({'message':_0x611b29});}catch(_0x1ca2cf){return _0x349f40['status'](0x1f4)[_0x256bf1(0x155)]({'message':_0x1ca2cf});}};exports[a41_0x4c6c15(0x164)]=webHook;