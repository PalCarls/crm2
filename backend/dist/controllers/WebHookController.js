'use strict';const a38_0x58c43f=a38_0x3933;(function(_0x50f9d6,_0x47f502){const _0x17e6d6=a38_0x3933,_0x47f4c8=_0x50f9d6();while(!![]){try{const _0x6b66ad=parseInt(_0x17e6d6(0xbd))/0x1+-parseInt(_0x17e6d6(0xa8))/0x2*(-parseInt(_0x17e6d6(0xb9))/0x3)+parseInt(_0x17e6d6(0xb8))/0x4*(-parseInt(_0x17e6d6(0xa0))/0x5)+-parseInt(_0x17e6d6(0xae))/0x6*(-parseInt(_0x17e6d6(0x9d))/0x7)+parseInt(_0x17e6d6(0xa4))/0x8+parseInt(_0x17e6d6(0xa5))/0x9+-parseInt(_0x17e6d6(0xba))/0xa*(parseInt(_0x17e6d6(0xa6))/0xb);if(_0x6b66ad===_0x47f502)break;else _0x47f4c8['push'](_0x47f4c8['shift']());}catch(_0x542bcf){_0x47f4c8['push'](_0x47f4c8['shift']());}}}(a38_0x1f07,0x90c65));var __importDefault=this&&this[a38_0x58c43f(0xb2)]||function(_0x34fab0){return _0x34fab0&&_0x34fab0['__esModule']?_0x34fab0:{'default':_0x34fab0};};function a38_0x3933(_0x2e3bf5,_0x1f5572){const _0x1f076a=a38_0x1f07();return a38_0x3933=function(_0x39335d,_0x1f8696){_0x39335d=_0x39335d-0x9a;let _0x51f23d=_0x1f076a[_0x39335d];return _0x51f23d;},a38_0x3933(_0x2e3bf5,_0x1f5572);}Object[a38_0x58c43f(0xbb)](exports,a38_0x58c43f(0xad),{'value':!![]}),exports['webHook']=exports['index']=void 0x0;const Whatsapp_1=__importDefault(require(a38_0x58c43f(0xa9))),facebookMessageListener_1=require(a38_0x58c43f(0xb6)),index=async(_0x377109,_0x5cfcaf)=>{const _0x231156=a38_0x58c43f,_0x1c7e55=process['env']['VERIFY_TOKEN']||_0x231156(0xa1),_0x215119=_0x377109[_0x231156(0xa2)][_0x231156(0xac)],_0x416d22=_0x377109[_0x231156(0xa2)][_0x231156(0xb4)],_0x1a8217=_0x377109[_0x231156(0xa2)]['hub.challenge'];if(_0x215119&&_0x416d22){if(_0x215119===_0x231156(0xb7)&&_0x416d22===_0x1c7e55)return _0x5cfcaf['status'](0xc8)[_0x231156(0xaf)](_0x1a8217);}return _0x5cfcaf[_0x231156(0x9f)](0x193)[_0x231156(0xa3)]({'message':_0x231156(0x9a)});};exports['index']=index;const webHook=async(_0x48e3e7,_0x42ac1a)=>{const _0x2425e3=a38_0x58c43f;try{const {body:_0x4f0077}=_0x48e3e7;if(_0x4f0077[_0x2425e3(0xb0)]==='page'||_0x4f0077[_0x2425e3(0xb0)]===_0x2425e3(0xb3)){let _0x2f5ba3;return _0x4f0077[_0x2425e3(0xb0)]===_0x2425e3(0x9c)?_0x2f5ba3=_0x2425e3(0xb5):_0x2f5ba3=_0x2425e3(0xb3),_0x4f0077[_0x2425e3(0x9b)]?.['forEach'](async _0x40ce9b=>{const _0x170187=_0x2425e3,_0x3873bf=await Whatsapp_1[_0x170187(0xbc)][_0x170187(0x9e)]({'where':{'facebookPageUserId':_0x40ce9b['id'],'channel':_0x2f5ba3}});_0x3873bf&&_0x40ce9b['messaging']?.['forEach'](_0xecedf1=>{const _0x3e5540=_0x170187;(0x0,facebookMessageListener_1[_0x3e5540(0xaa)])(_0x3873bf,_0xecedf1,_0x2f5ba3,_0x3873bf[_0x3e5540(0xab)]);});}),_0x42ac1a[_0x2425e3(0x9f)](0xc8)[_0x2425e3(0xa3)]({'message':_0x2425e3(0xa7)});}return _0x42ac1a['status'](0x194)[_0x2425e3(0xa3)]({'message':_0x4f0077});}catch(_0x36709c){return _0x42ac1a['status'](0x1f4)[_0x2425e3(0xa3)]({'message':_0x36709c});}};exports[a38_0x58c43f(0xb1)]=webHook;function a38_0x1f07(){const _0x56439c=['Forbidden','entry','page','2674Rnxkxe','findOne','status','1270BsTAxc','whaticket','query','json','598760zYEVzk','1649853YfACmo','11QWoznu','EVENT_RECEIVED','4zhsLPG','../models/Whatsapp','handleMessage','companyId','hub.mode','__esModule','15534NfuWNo','send','object','webHook','__importDefault','instagram','hub.verify_token','facebook','../services/FacebookServices/facebookMessageListener','subscribe','15128RvLdEA','549681vJmTZo','6349180rzshAC','defineProperty','default','574929BwXWlP'];a38_0x1f07=function(){return _0x56439c;};return a38_0x1f07();}