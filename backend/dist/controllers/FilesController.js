'use strict';const a19_0x3e61c4=a19_0x3824;(function(_0x7aaf2d,_0x13c3e1){const _0x1312cc=a19_0x3824,_0xd4f1d4=_0x7aaf2d();while(!![]){try{const _0x4f4d68=parseInt(_0x1312cc(0x1f9))/0x1+parseInt(_0x1312cc(0x1d1))/0x2+-parseInt(_0x1312cc(0x1d7))/0x3*(parseInt(_0x1312cc(0x1d9))/0x4)+-parseInt(_0x1312cc(0x1e6))/0x5*(parseInt(_0x1312cc(0x1ce))/0x6)+parseInt(_0x1312cc(0x1d4))/0x7+-parseInt(_0x1312cc(0x1db))/0x8+-parseInt(_0x1312cc(0x1ee))/0x9*(-parseInt(_0x1312cc(0x1fb))/0xa);if(_0x4f4d68===_0x13c3e1)break;else _0xd4f1d4['push'](_0xd4f1d4['shift']());}catch(_0xa57fd1){_0xd4f1d4['push'](_0xd4f1d4['shift']());}}}(a19_0x4979,0x948bd));var __importDefault=this&&this[a19_0x3e61c4(0x1d6)]||function(_0x48b10c){return _0x48b10c&&_0x48b10c['__esModule']?_0x48b10c:{'default':_0x48b10c};};Object[a19_0x3e61c4(0x1df)](exports,'__esModule',{'value':!![]}),exports[a19_0x3e61c4(0x1d8)]=exports[a19_0x3e61c4(0x1fe)]=exports['remove']=exports[a19_0x3e61c4(0x1ea)]=exports['uploadMedias']=exports[a19_0x3e61c4(0x1d5)]=exports[a19_0x3e61c4(0x1e9)]=exports[a19_0x3e61c4(0x1dc)]=void 0x0;const socket_1=require('../libs/socket'),AppError_1=__importDefault(require(a19_0x3e61c4(0x1dd))),lodash_1=require(a19_0x3e61c4(0x1e3)),CreateService_1=__importDefault(require(a19_0x3e61c4(0x1fd))),ListService_1=__importDefault(require(a19_0x3e61c4(0x1eb))),UpdateService_1=__importDefault(require(a19_0x3e61c4(0x1e4))),ShowService_1=__importDefault(require('../services/FileServices/ShowService')),DeleteService_1=__importDefault(require(a19_0x3e61c4(0x1ef))),SimpleListService_1=__importDefault(require('../services/FileServices/SimpleListService')),DeleteAllService_1=__importDefault(require(a19_0x3e61c4(0x1e7))),FilesOptions_1=__importDefault(require(a19_0x3e61c4(0x1ed))),index=async(_0x354e98,_0x5d7e50)=>{const _0x4999d1=a19_0x3e61c4,{pageNumber:_0x322666,searchParam:_0x1609a4}=_0x354e98[_0x4999d1(0x1e1)],{companyId:_0x13b374}=_0x354e98[_0x4999d1(0x1f3)],{files:_0x4d9b70,count:_0x821323,hasMore:_0x2b9e9b}=await(0x0,ListService_1[_0x4999d1(0x1f7)])({'searchParam':_0x1609a4,'pageNumber':_0x322666,'companyId':_0x13b374});return _0x5d7e50[_0x4999d1(0x1e2)]({'files':_0x4d9b70,'count':_0x821323,'hasMore':_0x2b9e9b});};exports['index']=index;const store=async(_0x4839bf,_0x5bd0f9)=>{const _0x38f804=a19_0x3e61c4,{name:_0x328944,message:_0x158847,options:_0x1e2c75}=_0x4839bf[_0x38f804(0x1f2)],{companyId:_0x1e1a43}=_0x4839bf[_0x38f804(0x1f3)],_0x24624a=await(0x0,CreateService_1[_0x38f804(0x1f7)])({'name':_0x328944,'message':_0x158847,'options':_0x1e2c75,'companyId':_0x1e1a43}),_0x2c3f01=(0x0,socket_1[_0x38f804(0x1f1)])();return _0x2c3f01[_0x38f804(0x1de)]('company'+_0x1e1a43+'-file',{'action':_0x38f804(0x1d3),'fileList':_0x24624a}),_0x5bd0f9[_0x38f804(0x1f5)](0xc8)[_0x38f804(0x1e2)](_0x24624a);};exports[a19_0x3e61c4(0x1e9)]=store;const show=async(_0x233cfc,_0x276f74)=>{const _0x429d9e=a19_0x3e61c4,{fileId:_0x29a723}=_0x233cfc[_0x429d9e(0x1ec)],{companyId:_0x397b7c}=_0x233cfc['user'],_0x267175=await(0x0,ShowService_1['default'])(_0x29a723,_0x397b7c);return _0x276f74['status'](0xc8)[_0x429d9e(0x1e2)](_0x267175);};exports[a19_0x3e61c4(0x1d5)]=show;function a19_0x3824(_0x4a5c7c,_0x571866){const _0x497919=a19_0x4979();return a19_0x3824=function(_0x382412,_0x2d43cd){_0x382412=_0x382412-0x1ce;let _0xfe699a=_0x497919[_0x382412];return _0xfe699a;},a19_0x3824(_0x4a5c7c,_0x571866);}const uploadMedias=async(_0x31646f,_0x5f09bb)=>{const _0xfbc970=a19_0x3e61c4,{fileId:_0x253a30,id:_0x4bb78c,mediaType:_0x1cf0be}=_0x31646f[_0xfbc970(0x1f2)],_0x4b1195=_0x31646f[_0xfbc970(0x1fa)],_0x576207=(0x0,lodash_1['head'])(_0x4b1195);try{let _0x2bf19c;if(_0x4b1195[_0xfbc970(0x1e8)]>0x0)for(const [_0x4fa69a,_0x495c10]of _0x4b1195['entries']()){_0x2bf19c=await FilesOptions_1['default']['findOne']({'where':{'fileId':_0x253a30,'id':Array[_0xfbc970(0x1d2)](_0x4bb78c)?_0x4bb78c[_0x4fa69a]:_0x4bb78c}}),_0x2bf19c[_0xfbc970(0x1ea)]({'path':_0x495c10[_0xfbc970(0x1f4)][_0xfbc970(0x1f0)]('/','-'),'mediaType':Array['isArray'](_0x1cf0be)?_0x1cf0be[_0x4fa69a]:_0x1cf0be});}return _0x5f09bb[_0xfbc970(0x1cf)]({'mensagem':'Arquivos\x20atualizados'});}catch(_0x290ec5){throw new AppError_1[(_0xfbc970(0x1f7))](_0x290ec5[_0xfbc970(0x1f8)]);}};exports['uploadMedias']=uploadMedias;const update=async(_0x5931ca,_0x2454ab)=>{const _0x1208cd=a19_0x3e61c4;if(_0x5931ca[_0x1208cd(0x1f3)][_0x1208cd(0x1f6)]!==_0x1208cd(0x1d0))throw new AppError_1[(_0x1208cd(0x1f7))](_0x1208cd(0x1e5),0x193);const {fileId:_0x104634}=_0x5931ca[_0x1208cd(0x1ec)],_0x60bf88=_0x5931ca['body'],{companyId:_0x369854}=_0x5931ca[_0x1208cd(0x1f3)],_0x49d939=await(0x0,UpdateService_1[_0x1208cd(0x1f7)])({'fileData':_0x60bf88,'id':_0x104634,'companyId':_0x369854}),_0x2038f2=(0x0,socket_1[_0x1208cd(0x1f1)])();return _0x2038f2[_0x1208cd(0x1de)](_0x1208cd(0x1e0)+_0x369854+'-file',{'action':_0x1208cd(0x1ea),'fileList':_0x49d939}),_0x2454ab['status'](0xc8)[_0x1208cd(0x1e2)](_0x49d939);};exports[a19_0x3e61c4(0x1ea)]=update;function a19_0x4979(){const _0x5918eb=['files','10SgNbtT','File\x20List\x20deleted','../services/FileServices/CreateService','removeAll','1533894zCvMoK','send','admin','1100656KNjVQZ','isArray','create','4660306HJEeaf','show','__importDefault','15XCNNZO','list','476048FzhIca','remove','7115536mSqiKR','index','../errors/AppError','emit','defineProperty','company','query','json','lodash','../services/FileServices/UpdateService','ERR_NO_PERMISSION','5TXluZp','../services/FileServices/DeleteAllService','length','store','update','../services/FileServices/ListService','params','../models/FilesOptions','3005037qEkjAD','../services/FileServices/DeleteService','replace','getIO','body','user','filename','status','profile','default','message','798617zHJTWL'];a19_0x4979=function(){return _0x5918eb;};return a19_0x4979();}const remove=async(_0x2de7d0,_0x7f0388)=>{const _0x185e24=a19_0x3e61c4,{fileId:_0x96a5a0}=_0x2de7d0[_0x185e24(0x1ec)],{companyId:_0x506be6}=_0x2de7d0[_0x185e24(0x1f3)];await(0x0,DeleteService_1[_0x185e24(0x1f7)])(_0x96a5a0,_0x506be6);const _0x7d29ae=(0x0,socket_1['getIO'])();return _0x7d29ae[_0x185e24(0x1de)](_0x185e24(0x1e0)+_0x506be6+'-file',{'action':'delete','fileId':_0x96a5a0}),_0x7f0388[_0x185e24(0x1f5)](0xc8)['json']({'message':_0x185e24(0x1fc)});};exports[a19_0x3e61c4(0x1da)]=remove;const removeAll=async(_0x454af9,_0x2bde39)=>{const _0x482bda=a19_0x3e61c4,{companyId:_0x5e493d}=_0x454af9[_0x482bda(0x1f3)];return await(0x0,DeleteAllService_1[_0x482bda(0x1f7)])(_0x5e493d),_0x2bde39[_0x482bda(0x1cf)]();};exports[a19_0x3e61c4(0x1fe)]=removeAll;const list=async(_0x2b9a26,_0x33a0c8)=>{const _0x596280=a19_0x3e61c4,{searchParam:_0x767342}=_0x2b9a26[_0x596280(0x1e1)],{companyId:_0x5b1759}=_0x2b9a26[_0x596280(0x1f3)],_0x767e6f=await(0x0,SimpleListService_1[_0x596280(0x1f7)])({'searchParam':_0x767342,'companyId':_0x5b1759});return _0x33a0c8[_0x596280(0x1e2)](_0x767e6f);};exports['list']=list;