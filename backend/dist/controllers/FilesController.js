'use strict';const a19_0x22c7ca=a19_0x2926;(function(_0x3ce8a4,_0x438948){const _0x56834d=a19_0x2926,_0x485b43=_0x3ce8a4();while(!![]){try{const _0x83c03f=-parseInt(_0x56834d(0x9b))/0x1+parseInt(_0x56834d(0xbb))/0x2+-parseInt(_0x56834d(0x9c))/0x3*(-parseInt(_0x56834d(0x9d))/0x4)+-parseInt(_0x56834d(0xb0))/0x5*(parseInt(_0x56834d(0xbe))/0x6)+parseInt(_0x56834d(0x92))/0x7*(parseInt(_0x56834d(0x9e))/0x8)+-parseInt(_0x56834d(0xab))/0x9*(parseInt(_0x56834d(0xbc))/0xa)+parseInt(_0x56834d(0xaf))/0xb;if(_0x83c03f===_0x438948)break;else _0x485b43['push'](_0x485b43['shift']());}catch(_0x203437){_0x485b43['push'](_0x485b43['shift']());}}}(a19_0x40a7,0xb459e));var __importDefault=this&&this[a19_0x22c7ca(0xc3)]||function(_0x2f2b1a){return _0x2f2b1a&&_0x2f2b1a['__esModule']?_0x2f2b1a:{'default':_0x2f2b1a};};Object[a19_0x22c7ca(0xbf)](exports,a19_0x22c7ca(0xba),{'value':!![]}),exports['list']=exports[a19_0x22c7ca(0xa9)]=exports['remove']=exports[a19_0x22c7ca(0x94)]=exports[a19_0x22c7ca(0xa5)]=exports[a19_0x22c7ca(0x90)]=exports[a19_0x22c7ca(0xae)]=exports[a19_0x22c7ca(0xb1)]=void 0x0;const socket_1=require('../libs/socket'),AppError_1=__importDefault(require(a19_0x22c7ca(0xa1))),lodash_1=require('lodash'),CreateService_1=__importDefault(require('../services/FileServices/CreateService')),ListService_1=__importDefault(require(a19_0x22c7ca(0xb3))),UpdateService_1=__importDefault(require('../services/FileServices/UpdateService')),ShowService_1=__importDefault(require(a19_0x22c7ca(0x91))),DeleteService_1=__importDefault(require(a19_0x22c7ca(0xac))),SimpleListService_1=__importDefault(require('../services/FileServices/SimpleListService')),DeleteAllService_1=__importDefault(require(a19_0x22c7ca(0xbd))),FilesOptions_1=__importDefault(require(a19_0x22c7ca(0xad))),index=async(_0x185b48,_0x1b88ef)=>{const _0x20fb13=a19_0x22c7ca,{pageNumber:_0x37ecb0,searchParam:_0x1f834d}=_0x185b48[_0x20fb13(0xb9)],{companyId:_0x4a24c0}=_0x185b48[_0x20fb13(0xc2)],{files:_0x17ce64,count:_0x50077e,hasMore:_0x15c5de}=await(0x0,ListService_1[_0x20fb13(0xa4)])({'searchParam':_0x1f834d,'pageNumber':_0x37ecb0,'companyId':_0x4a24c0});return _0x1b88ef[_0x20fb13(0xb5)]({'files':_0x17ce64,'count':_0x50077e,'hasMore':_0x15c5de});};exports[a19_0x22c7ca(0xb1)]=index;const store=async(_0x179d81,_0xe9e8fa)=>{const _0x4b8ee6=a19_0x22c7ca,{name:_0x1767f9,message:_0x3a2d74,options:_0x49d901}=_0x179d81[_0x4b8ee6(0xb4)],{companyId:_0x274dc1}=_0x179d81[_0x4b8ee6(0xc2)],_0x37160c=await(0x0,CreateService_1['default'])({'name':_0x1767f9,'message':_0x3a2d74,'options':_0x49d901,'companyId':_0x274dc1}),_0x39c61a=(0x0,socket_1[_0x4b8ee6(0xa3)])();return _0x39c61a[_0x4b8ee6(0x95)](_0x4b8ee6(0x96)+_0x274dc1+_0x4b8ee6(0xb2),{'action':_0x4b8ee6(0xa6),'fileList':_0x37160c}),_0xe9e8fa[_0x4b8ee6(0xb8)](0xc8)[_0x4b8ee6(0xb5)](_0x37160c);};exports[a19_0x22c7ca(0xae)]=store;const show=async(_0xd32acc,_0x1e5cd7)=>{const _0x4b0cc3=a19_0x22c7ca,{fileId:_0x21c333}=_0xd32acc['params'],{companyId:_0x2a5865}=_0xd32acc['user'],_0x3949b8=await(0x0,ShowService_1[_0x4b0cc3(0xa4)])(_0x21c333,_0x2a5865);return _0x1e5cd7[_0x4b0cc3(0xb8)](0xc8)[_0x4b0cc3(0xb5)](_0x3949b8);};exports[a19_0x22c7ca(0x90)]=show;const uploadMedias=async(_0x1cab85,_0x206d68)=>{const _0x24c2de=a19_0x22c7ca,{fileId:_0x4966aa,id:_0x3c3179,mediaType:_0x5464cc}=_0x1cab85[_0x24c2de(0xb4)],_0xd8c7f3=_0x1cab85[_0x24c2de(0x99)],_0x296e46=(0x0,lodash_1[_0x24c2de(0xa7)])(_0xd8c7f3);try{let _0xc4913a;if(_0xd8c7f3[_0x24c2de(0x97)]>0x0)for(const [_0x14b087,_0x169bad]of _0xd8c7f3[_0x24c2de(0xa8)]()){_0xc4913a=await FilesOptions_1[_0x24c2de(0xa4)]['findOne']({'where':{'fileId':_0x4966aa,'id':Array['isArray'](_0x3c3179)?_0x3c3179[_0x14b087]:_0x3c3179}}),_0xc4913a[_0x24c2de(0x94)]({'path':_0x169bad['filename'][_0x24c2de(0xb7)]('/','-'),'mediaType':Array[_0x24c2de(0xc1)](_0x5464cc)?_0x5464cc[_0x14b087]:_0x5464cc});}return _0x206d68[_0x24c2de(0x9f)]({'mensagem':_0x24c2de(0xc0)});}catch(_0x2e7a6f){throw new AppError_1['default'](_0x2e7a6f[_0x24c2de(0xb6)]);}};exports['uploadMedias']=uploadMedias;const update=async(_0x11168a,_0x1f47ce)=>{const _0x2f3acc=a19_0x22c7ca;if(_0x11168a[_0x2f3acc(0xc2)]['profile']!==_0x2f3acc(0x9a))throw new AppError_1[(_0x2f3acc(0xa4))](_0x2f3acc(0xa0),0x193);const {fileId:_0x5ccf6d}=_0x11168a[_0x2f3acc(0xa2)],_0x2bec9a=_0x11168a[_0x2f3acc(0xb4)],{companyId:_0xf83273}=_0x11168a['user'],_0xafa7a1=await(0x0,UpdateService_1[_0x2f3acc(0xa4)])({'fileData':_0x2bec9a,'id':_0x5ccf6d,'companyId':_0xf83273}),_0x105ee8=(0x0,socket_1[_0x2f3acc(0xa3)])();return _0x105ee8[_0x2f3acc(0x95)]('company'+_0xf83273+_0x2f3acc(0xb2),{'action':'update','fileList':_0xafa7a1}),_0x1f47ce['status'](0xc8)[_0x2f3acc(0xb5)](_0xafa7a1);};exports[a19_0x22c7ca(0x94)]=update;const remove=async(_0x2efa91,_0x3d03a4)=>{const _0x59689b=a19_0x22c7ca,{fileId:_0x4e3f67}=_0x2efa91['params'],{companyId:_0x1af47d}=_0x2efa91['user'];await(0x0,DeleteService_1[_0x59689b(0xa4)])(_0x4e3f67,_0x1af47d);const _0x31d21f=(0x0,socket_1[_0x59689b(0xa3)])();return _0x31d21f['emit'](_0x59689b(0x96)+_0x1af47d+'-file',{'action':_0x59689b(0xaa),'fileId':_0x4e3f67}),_0x3d03a4[_0x59689b(0xb8)](0xc8)[_0x59689b(0xb5)]({'message':'File\x20List\x20deleted'});};exports[a19_0x22c7ca(0x98)]=remove;const removeAll=async(_0x26babe,_0x26e277)=>{const _0x33e301=a19_0x22c7ca,{companyId:_0x7ad60a}=_0x26babe[_0x33e301(0xc2)];return await(0x0,DeleteAllService_1[_0x33e301(0xa4)])(_0x7ad60a),_0x26e277[_0x33e301(0x9f)]();};function a19_0x40a7(){const _0x34b98a=['../errors/AppError','params','getIO','default','uploadMedias','create','head','entries','removeAll','delete','9162nvTPep','../services/FileServices/DeleteService','../models/FilesOptions','store','19598502GUjpWu','10YYgFFK','index','-file','../services/FileServices/ListService','body','json','message','replace','status','query','__esModule','1728352TkQfZz','10420mFIDfv','../services/FileServices/DeleteAllService','1323012gXoakJ','defineProperty','Arquivos\x20atualizados','isArray','user','__importDefault','show','../services/FileServices/ShowService','14QQfAgp','list','update','emit','company','length','remove','files','admin','1034566WOzFZf','27744EyjOUT','12oldxVQ','2405768umlGwD','send','ERR_NO_PERMISSION'];a19_0x40a7=function(){return _0x34b98a;};return a19_0x40a7();}function a19_0x2926(_0x38f55a,_0x567b25){const _0x40a702=a19_0x40a7();return a19_0x2926=function(_0x2926b3,_0x1374cf){_0x2926b3=_0x2926b3-0x90;let _0x3d2bca=_0x40a702[_0x2926b3];return _0x3d2bca;},a19_0x2926(_0x38f55a,_0x567b25);}exports[a19_0x22c7ca(0xa9)]=removeAll;const list=async(_0x3ecdad,_0x2d4a83)=>{const _0xf909c5=a19_0x22c7ca,{searchParam:_0x1da5ef}=_0x3ecdad['query'],{companyId:_0x1eb1ce}=_0x3ecdad[_0xf909c5(0xc2)],_0x5a1bab=await(0x0,SimpleListService_1['default'])({'searchParam':_0x1da5ef,'companyId':_0x1eb1ce});return _0x2d4a83[_0xf909c5(0xb5)](_0x5a1bab);};exports[a19_0x22c7ca(0x93)]=list;