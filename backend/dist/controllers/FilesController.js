'use strict';const a19_0x1a966d=a19_0x5494;(function(_0x1d0a5a,_0x409171){const _0x3a83b4=a19_0x5494,_0x286691=_0x1d0a5a();while(!![]){try{const _0x312556=parseInt(_0x3a83b4(0x123))/0x1+-parseInt(_0x3a83b4(0x118))/0x2+parseInt(_0x3a83b4(0x138))/0x3*(parseInt(_0x3a83b4(0x11f))/0x4)+-parseInt(_0x3a83b4(0x11b))/0x5*(-parseInt(_0x3a83b4(0x145))/0x6)+parseInt(_0x3a83b4(0x12e))/0x7+-parseInt(_0x3a83b4(0x144))/0x8*(-parseInt(_0x3a83b4(0x12d))/0x9)+-parseInt(_0x3a83b4(0x121))/0xa;if(_0x312556===_0x409171)break;else _0x286691['push'](_0x286691['shift']());}catch(_0x1bbf59){_0x286691['push'](_0x286691['shift']());}}}(a19_0x13d2,0xa9d99));function a19_0x13d2(){const _0x84626c=['admin','update','user','../services/FileServices/ListService','list','remove','1836886XOZQSG','show','__esModule','45dZSYUY','isArray','default','query','8oXAmot','emit','14336020ZpwfNW','company','268405nsANzL','json','replace','Arquivos\x20atualizados','File\x20List\x20deleted','../services/FileServices/CreateService','../services/FileServices/DeleteAllService','ERR_NO_PERMISSION','../services/FileServices/UpdateService','filename','29844bzuryH','8192366tUzMlM','__importDefault','../services/FileServices/SimpleListService','../models/FilesOptions','lodash','../services/FileServices/ShowService','getIO','message','removeAll','findOne','752874IZpImz','profile','body','delete','send','store','create','defineProperty','status','../services/FileServices/DeleteService','-file','entries','488ATgXMw','603210spvxXt','../libs/socket','params'];a19_0x13d2=function(){return _0x84626c;};return a19_0x13d2();}function a19_0x5494(_0x303a60,_0x1dcf1f){const _0x13d230=a19_0x13d2();return a19_0x5494=function(_0x549429,_0x2fd040){_0x549429=_0x549429-0x115;let _0x2350e8=_0x13d230[_0x549429];return _0x2350e8;},a19_0x5494(_0x303a60,_0x1dcf1f);}var __importDefault=this&&this[a19_0x1a966d(0x12f)]||function(_0x5ed425){const _0x1d0c9b=a19_0x1a966d;return _0x5ed425&&_0x5ed425[_0x1d0c9b(0x11a)]?_0x5ed425:{'default':_0x5ed425};};Object[a19_0x1a966d(0x13f)](exports,a19_0x1a966d(0x11a),{'value':!![]}),exports[a19_0x1a966d(0x116)]=exports['removeAll']=exports[a19_0x1a966d(0x117)]=exports['update']=exports['uploadMedias']=exports[a19_0x1a966d(0x119)]=exports[a19_0x1a966d(0x13d)]=exports['index']=void 0x0;const socket_1=require(a19_0x1a966d(0x146)),AppError_1=__importDefault(require('../errors/AppError')),lodash_1=require(a19_0x1a966d(0x132)),CreateService_1=__importDefault(require(a19_0x1a966d(0x128))),ListService_1=__importDefault(require(a19_0x1a966d(0x115))),UpdateService_1=__importDefault(require(a19_0x1a966d(0x12b))),ShowService_1=__importDefault(require(a19_0x1a966d(0x133))),DeleteService_1=__importDefault(require(a19_0x1a966d(0x141))),SimpleListService_1=__importDefault(require(a19_0x1a966d(0x130))),DeleteAllService_1=__importDefault(require(a19_0x1a966d(0x129))),FilesOptions_1=__importDefault(require(a19_0x1a966d(0x131))),index=async(_0x498f43,_0x503da6)=>{const _0x33c0d4=a19_0x1a966d,{pageNumber:_0x4a9bc7,searchParam:_0x422ac9}=_0x498f43[_0x33c0d4(0x11e)],{companyId:_0x5d9eba}=_0x498f43[_0x33c0d4(0x14a)],{files:_0x290bd3,count:_0x2dc627,hasMore:_0x230a37}=await(0x0,ListService_1[_0x33c0d4(0x11d)])({'searchParam':_0x422ac9,'pageNumber':_0x4a9bc7,'companyId':_0x5d9eba});return _0x503da6[_0x33c0d4(0x124)]({'files':_0x290bd3,'count':_0x2dc627,'hasMore':_0x230a37});};exports['index']=index;const store=async(_0x5a28bc,_0x34b69b)=>{const _0x396525=a19_0x1a966d,{name:_0x1ce214,message:_0x5d461d,options:_0x2d827d}=_0x5a28bc['body'],{companyId:_0x5111ba}=_0x5a28bc[_0x396525(0x14a)],_0x42a47e=await(0x0,CreateService_1['default'])({'name':_0x1ce214,'message':_0x5d461d,'options':_0x2d827d,'companyId':_0x5111ba}),_0x5e38dc=(0x0,socket_1['getIO'])();return _0x5e38dc['emit'](_0x396525(0x122)+_0x5111ba+_0x396525(0x142),{'action':_0x396525(0x13e),'fileList':_0x42a47e}),_0x34b69b['status'](0xc8)[_0x396525(0x124)](_0x42a47e);};exports[a19_0x1a966d(0x13d)]=store;const show=async(_0x608eb,_0x560a72)=>{const _0x55997a=a19_0x1a966d,{fileId:_0x84682f}=_0x608eb['params'],{companyId:_0x3d90e5}=_0x608eb['user'],_0x268dd3=await(0x0,ShowService_1['default'])(_0x84682f,_0x3d90e5);return _0x560a72[_0x55997a(0x140)](0xc8)[_0x55997a(0x124)](_0x268dd3);};exports['show']=show;const uploadMedias=async(_0x10fd6c,_0x490709)=>{const _0x5a5394=a19_0x1a966d,{fileId:_0x171c38,id:_0x31bc78,mediaType:_0x235994}=_0x10fd6c[_0x5a5394(0x13a)],_0xc5e763=_0x10fd6c['files'],_0x560583=(0x0,lodash_1['head'])(_0xc5e763);try{let _0x1e735e;if(_0xc5e763['length']>0x0)for(const [_0x37374b,_0x31ca31]of _0xc5e763[_0x5a5394(0x143)]()){_0x1e735e=await FilesOptions_1['default'][_0x5a5394(0x137)]({'where':{'fileId':_0x171c38,'id':Array[_0x5a5394(0x11c)](_0x31bc78)?_0x31bc78[_0x37374b]:_0x31bc78}}),await _0x1e735e[_0x5a5394(0x149)]({'path':_0x31ca31[_0x5a5394(0x12c)][_0x5a5394(0x125)]('/','-'),'mediaType':Array[_0x5a5394(0x11c)](_0x235994)?_0x235994[_0x37374b]:_0x235994});}return _0x490709[_0x5a5394(0x13c)]({'mensagem':_0x5a5394(0x126)});}catch(_0x4c70da){throw new AppError_1['default'](_0x4c70da[_0x5a5394(0x135)]);}};exports['uploadMedias']=uploadMedias;const update=async(_0x27df52,_0x81ee1b)=>{const _0x1c1a60=a19_0x1a966d;if(_0x27df52['user'][_0x1c1a60(0x139)]!==_0x1c1a60(0x148))throw new AppError_1[(_0x1c1a60(0x11d))](_0x1c1a60(0x12a),0x193);const {fileId:_0xf0fec9}=_0x27df52[_0x1c1a60(0x147)],_0x218332=_0x27df52['body'],{companyId:_0x5d25af}=_0x27df52[_0x1c1a60(0x14a)],_0x5615cf=await(0x0,UpdateService_1['default'])({'fileData':_0x218332,'id':_0xf0fec9,'companyId':_0x5d25af}),_0xdc4304=(0x0,socket_1[_0x1c1a60(0x134)])();return _0xdc4304[_0x1c1a60(0x120)](_0x1c1a60(0x122)+_0x5d25af+_0x1c1a60(0x142),{'action':_0x1c1a60(0x149),'fileList':_0x5615cf}),_0x81ee1b[_0x1c1a60(0x140)](0xc8)[_0x1c1a60(0x124)](_0x5615cf);};exports[a19_0x1a966d(0x149)]=update;const remove=async(_0x86603b,_0x3da373)=>{const _0x1ef914=a19_0x1a966d,{fileId:_0x47c414}=_0x86603b[_0x1ef914(0x147)],{companyId:_0x430c34}=_0x86603b[_0x1ef914(0x14a)];await(0x0,DeleteService_1[_0x1ef914(0x11d)])(_0x47c414,_0x430c34);const _0x5e55db=(0x0,socket_1['getIO'])();return _0x5e55db[_0x1ef914(0x120)](_0x1ef914(0x122)+_0x430c34+_0x1ef914(0x142),{'action':_0x1ef914(0x13b),'fileId':_0x47c414}),_0x3da373[_0x1ef914(0x140)](0xc8)[_0x1ef914(0x124)]({'message':_0x1ef914(0x127)});};exports[a19_0x1a966d(0x117)]=remove;const removeAll=async(_0x3225c0,_0x1462eb)=>{const _0x2fed18=a19_0x1a966d,{companyId:_0x54c4bb}=_0x3225c0[_0x2fed18(0x14a)];return await(0x0,DeleteAllService_1[_0x2fed18(0x11d)])(_0x54c4bb),_0x1462eb['send']();};exports[a19_0x1a966d(0x136)]=removeAll;const list=async(_0x537b5b,_0xa4558e)=>{const _0x418dfa=a19_0x1a966d,{searchParam:_0x3824fa}=_0x537b5b[_0x418dfa(0x11e)],{companyId:_0x3bbe82}=_0x537b5b[_0x418dfa(0x14a)],_0x441c6f=await(0x0,SimpleListService_1[_0x418dfa(0x11d)])({'searchParam':_0x3824fa,'companyId':_0x3bbe82});return _0xa4558e[_0x418dfa(0x124)](_0x441c6f);};exports[a19_0x1a966d(0x116)]=list;