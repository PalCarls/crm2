'use strict';const a19_0x436ddd=a19_0x5cc3;(function(_0x16f691,_0x38b6ca){const _0x30b008=a19_0x5cc3,_0x527e5e=_0x16f691();while(!![]){try{const _0x1265f0=-parseInt(_0x30b008(0x15f))/0x1+parseInt(_0x30b008(0x185))/0x2*(-parseInt(_0x30b008(0x171))/0x3)+-parseInt(_0x30b008(0x177))/0x4+-parseInt(_0x30b008(0x16e))/0x5+parseInt(_0x30b008(0x179))/0x6*(parseInt(_0x30b008(0x18e))/0x7)+parseInt(_0x30b008(0x16a))/0x8+parseInt(_0x30b008(0x15c))/0x9;if(_0x1265f0===_0x38b6ca)break;else _0x527e5e['push'](_0x527e5e['shift']());}catch(_0x4cfaad){_0x527e5e['push'](_0x527e5e['shift']());}}}(a19_0x3f55,0x71910));var __importDefault=this&&this[a19_0x436ddd(0x15e)]||function(_0x5e9eef){const _0x21209b=a19_0x436ddd;return _0x5e9eef&&_0x5e9eef[_0x21209b(0x188)]?_0x5e9eef:{'default':_0x5e9eef};};function a19_0x5cc3(_0x2ef177,_0x46c601){const _0x3f55ef=a19_0x3f55();return a19_0x5cc3=function(_0x5cc36d,_0x249a11){_0x5cc36d=_0x5cc36d-0x15b;let _0x5bb7b5=_0x3f55ef[_0x5cc36d];return _0x5bb7b5;},a19_0x5cc3(_0x2ef177,_0x46c601);}function a19_0x3f55(){const _0x18aae2=['1749021fEvwym','send','json','isArray','Arquivos\x20atualizados','create','1529972dwISYW','removeAll','24rPbWsd','../services/FileServices/DeleteService','params','getIO','show','admin','user','emit','lodash','store','../services/FileServices/UpdateService','query','2VTBNzR','defineProperty','../services/FileServices/DeleteAllService','__esModule','remove','update','body','../models/FilesOptions','../services/FileServices/CreateService','1531817OkyJkA','company','head','10415889vqntQh','replace','__importDefault','158882Wadhng','../errors/AppError','index','../services/FileServices/ShowService','entries','../services/FileServices/ListService','../libs/socket','ERR_NO_PERMISSION','length','status','default','1605424qQqNSV','delete','../services/FileServices/SimpleListService','-file','3218865hJJGMu','message','uploadMedias'];a19_0x3f55=function(){return _0x18aae2;};return a19_0x3f55();}Object[a19_0x436ddd(0x186)](exports,a19_0x436ddd(0x188),{'value':!![]}),exports['list']=exports[a19_0x436ddd(0x178)]=exports['remove']=exports['update']=exports['uploadMedias']=exports[a19_0x436ddd(0x17d)]=exports[a19_0x436ddd(0x182)]=exports[a19_0x436ddd(0x161)]=void 0x0;const socket_1=require(a19_0x436ddd(0x165)),AppError_1=__importDefault(require(a19_0x436ddd(0x160))),lodash_1=require(a19_0x436ddd(0x181)),CreateService_1=__importDefault(require(a19_0x436ddd(0x18d))),ListService_1=__importDefault(require(a19_0x436ddd(0x164))),UpdateService_1=__importDefault(require(a19_0x436ddd(0x183))),ShowService_1=__importDefault(require(a19_0x436ddd(0x162))),DeleteService_1=__importDefault(require(a19_0x436ddd(0x17a))),SimpleListService_1=__importDefault(require(a19_0x436ddd(0x16c))),DeleteAllService_1=__importDefault(require(a19_0x436ddd(0x187))),FilesOptions_1=__importDefault(require(a19_0x436ddd(0x18c))),index=async(_0x1f610f,_0x59ba5c)=>{const _0x161c93=a19_0x436ddd,{pageNumber:_0xbea17c,searchParam:_0x341fc0}=_0x1f610f[_0x161c93(0x184)],{companyId:_0x1ac873}=_0x1f610f[_0x161c93(0x17f)],{files:_0x3db5c7,count:_0x4e088f,hasMore:_0x2840b0}=await(0x0,ListService_1[_0x161c93(0x169)])({'searchParam':_0x341fc0,'pageNumber':_0xbea17c,'companyId':_0x1ac873});return _0x59ba5c['json']({'files':_0x3db5c7,'count':_0x4e088f,'hasMore':_0x2840b0});};exports[a19_0x436ddd(0x161)]=index;const store=async(_0x13c848,_0x522f7a)=>{const _0x313583=a19_0x436ddd,{name:_0x224847,message:_0x2ffa47,options:_0x99f2e}=_0x13c848[_0x313583(0x18b)],{companyId:_0x10c46e}=_0x13c848[_0x313583(0x17f)],_0x1aaaa8=await(0x0,CreateService_1[_0x313583(0x169)])({'name':_0x224847,'message':_0x2ffa47,'options':_0x99f2e,'companyId':_0x10c46e}),_0x59758b=(0x0,socket_1[_0x313583(0x17c)])();return _0x59758b[_0x313583(0x180)](_0x313583(0x18f)+_0x10c46e+_0x313583(0x16d),{'action':_0x313583(0x176),'fileList':_0x1aaaa8}),_0x522f7a[_0x313583(0x168)](0xc8)[_0x313583(0x173)](_0x1aaaa8);};exports['store']=store;const show=async(_0x4206fa,_0x19a6dd)=>{const _0x1aa94b=a19_0x436ddd,{fileId:_0x5b1ca0}=_0x4206fa[_0x1aa94b(0x17b)],{companyId:_0x51f77f}=_0x4206fa['user'],_0x1e1941=await(0x0,ShowService_1[_0x1aa94b(0x169)])(_0x5b1ca0,_0x51f77f);return _0x19a6dd[_0x1aa94b(0x168)](0xc8)[_0x1aa94b(0x173)](_0x1e1941);};exports[a19_0x436ddd(0x17d)]=show;const uploadMedias=async(_0x356bf2,_0x24bac6)=>{const _0xe5fbf8=a19_0x436ddd,{fileId:_0x2b56b3,id:_0x460adb,mediaType:_0x27220c}=_0x356bf2[_0xe5fbf8(0x18b)],_0x3cad66=_0x356bf2['files'],_0x2d3dee=(0x0,lodash_1[_0xe5fbf8(0x15b)])(_0x3cad66);try{let _0x3260da;if(_0x3cad66[_0xe5fbf8(0x167)]>0x0)for(const [_0x1f9aad,_0x309e69]of _0x3cad66[_0xe5fbf8(0x163)]()){_0x3260da=await FilesOptions_1['default']['findOne']({'where':{'fileId':_0x2b56b3,'id':Array[_0xe5fbf8(0x174)](_0x460adb)?_0x460adb[_0x1f9aad]:_0x460adb}}),_0x3260da[_0xe5fbf8(0x18a)]({'path':_0x309e69['filename'][_0xe5fbf8(0x15d)]('/','-'),'mediaType':Array['isArray'](_0x27220c)?_0x27220c[_0x1f9aad]:_0x27220c});}return _0x24bac6[_0xe5fbf8(0x172)]({'mensagem':_0xe5fbf8(0x175)});}catch(_0x729ce4){throw new AppError_1['default'](_0x729ce4[_0xe5fbf8(0x16f)]);}};exports[a19_0x436ddd(0x170)]=uploadMedias;const update=async(_0x25115e,_0x492f00)=>{const _0x4b1535=a19_0x436ddd;if(_0x25115e[_0x4b1535(0x17f)]['profile']!==_0x4b1535(0x17e))throw new AppError_1[(_0x4b1535(0x169))](_0x4b1535(0x166),0x193);const {fileId:_0x2b563a}=_0x25115e[_0x4b1535(0x17b)],_0x2a8f8d=_0x25115e[_0x4b1535(0x18b)],{companyId:_0x4ae06a}=_0x25115e[_0x4b1535(0x17f)],_0x1f72d5=await(0x0,UpdateService_1['default'])({'fileData':_0x2a8f8d,'id':_0x2b563a,'companyId':_0x4ae06a}),_0x39690e=(0x0,socket_1['getIO'])();return _0x39690e[_0x4b1535(0x180)](_0x4b1535(0x18f)+_0x4ae06a+_0x4b1535(0x16d),{'action':_0x4b1535(0x18a),'fileList':_0x1f72d5}),_0x492f00[_0x4b1535(0x168)](0xc8)['json'](_0x1f72d5);};exports[a19_0x436ddd(0x18a)]=update;const remove=async(_0x46f163,_0x4b4fa8)=>{const _0x55febd=a19_0x436ddd,{fileId:_0x45001a}=_0x46f163[_0x55febd(0x17b)],{companyId:_0x11adcd}=_0x46f163[_0x55febd(0x17f)];await(0x0,DeleteService_1[_0x55febd(0x169)])(_0x45001a,_0x11adcd);const _0x11dc46=(0x0,socket_1[_0x55febd(0x17c)])();return _0x11dc46[_0x55febd(0x180)](_0x55febd(0x18f)+_0x11adcd+'-file',{'action':_0x55febd(0x16b),'fileId':_0x45001a}),_0x4b4fa8[_0x55febd(0x168)](0xc8)[_0x55febd(0x173)]({'message':'File\x20List\x20deleted'});};exports[a19_0x436ddd(0x189)]=remove;const removeAll=async(_0x8918e1,_0x1fe92d)=>{const _0x407086=a19_0x436ddd,{companyId:_0x115507}=_0x8918e1[_0x407086(0x17f)];return await(0x0,DeleteAllService_1['default'])(_0x115507),_0x1fe92d[_0x407086(0x172)]();};exports[a19_0x436ddd(0x178)]=removeAll;const list=async(_0x5921cd,_0x14bee7)=>{const _0x605e20=a19_0x436ddd,{searchParam:_0x3f6583}=_0x5921cd[_0x605e20(0x184)],{companyId:_0x19e832}=_0x5921cd['user'],_0x27e7ea=await(0x0,SimpleListService_1['default'])({'searchParam':_0x3f6583,'companyId':_0x19e832});return _0x14bee7[_0x605e20(0x173)](_0x27e7ea);};exports['list']=list;