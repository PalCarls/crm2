'use strict';const a19_0x136653=a19_0x2ad7;(function(_0x442930,_0x4b82f3){const _0x5d92d5=a19_0x2ad7,_0x187a2a=_0x442930();while(!![]){try{const _0x485c3f=parseInt(_0x5d92d5(0xc3))/0x1+parseInt(_0x5d92d5(0xbc))/0x2*(-parseInt(_0x5d92d5(0xbf))/0x3)+-parseInt(_0x5d92d5(0xe0))/0x4*(parseInt(_0x5d92d5(0xdc))/0x5)+-parseInt(_0x5d92d5(0xda))/0x6+-parseInt(_0x5d92d5(0xe3))/0x7*(-parseInt(_0x5d92d5(0xb8))/0x8)+parseInt(_0x5d92d5(0xc0))/0x9+parseInt(_0x5d92d5(0xde))/0xa*(-parseInt(_0x5d92d5(0xe9))/0xb);if(_0x485c3f===_0x4b82f3)break;else _0x187a2a['push'](_0x187a2a['shift']());}catch(_0x15b136){_0x187a2a['push'](_0x187a2a['shift']());}}}(a19_0x39eb,0xb7ecd));function a19_0x2ad7(_0x233e1b,_0x5ebbf1){const _0x39ebbc=a19_0x39eb();return a19_0x2ad7=function(_0x2ad7aa,_0x3d147d){_0x2ad7aa=_0x2ad7aa-0xb2;let _0x2a1ad2=_0x39ebbc[_0x2ad7aa];return _0x2a1ad2;},a19_0x2ad7(_0x233e1b,_0x5ebbf1);}var __importDefault=this&&this[a19_0x136653(0xbb)]||function(_0x2c9a7a){const _0x118cc0=a19_0x136653;return _0x2c9a7a&&_0x2c9a7a[_0x118cc0(0xc1)]?_0x2c9a7a:{'default':_0x2c9a7a};};function a19_0x39eb(){const _0x3284e4=['8ChpdQo','entries','length','7JVmzuB','files','../services/FileServices/CreateService','store','delete','../libs/socket','407Bopgal','send','company','message','emit','admin','default','-file','10497832FDOHfI','uploadMedias','show','__importDefault','2VePLoO','create','../services/FileServices/SimpleListService','4499655AblKOl','11418993InwUjy','__esModule','filename','1465567ZKjNmK','removeAll','json','Arquivos\x20atualizados','body','params','user','getIO','../errors/AppError','../services/FileServices/ListService','../services/FileServices/DeleteAllService','../services/FileServices/UpdateService','ERR_NO_PERMISSION','index','isArray','lodash','list','remove','replace','status','update','../models/FilesOptions','query','5683668tjBfOP','findOne','68015zooddK','File\x20List\x20deleted','221310rBZvjX','profile'];a19_0x39eb=function(){return _0x3284e4;};return a19_0x39eb();}Object['defineProperty'](exports,a19_0x136653(0xc1),{'value':!![]}),exports['list']=exports[a19_0x136653(0xc4)]=exports[a19_0x136653(0xd4)]=exports[a19_0x136653(0xd7)]=exports[a19_0x136653(0xb9)]=exports['show']=exports[a19_0x136653(0xe6)]=exports[a19_0x136653(0xd0)]=void 0x0;const socket_1=require(a19_0x136653(0xe8)),AppError_1=__importDefault(require(a19_0x136653(0xcb))),lodash_1=require(a19_0x136653(0xd2)),CreateService_1=__importDefault(require(a19_0x136653(0xe5))),ListService_1=__importDefault(require(a19_0x136653(0xcc))),UpdateService_1=__importDefault(require(a19_0x136653(0xce))),ShowService_1=__importDefault(require('../services/FileServices/ShowService')),DeleteService_1=__importDefault(require('../services/FileServices/DeleteService')),SimpleListService_1=__importDefault(require(a19_0x136653(0xbe))),DeleteAllService_1=__importDefault(require(a19_0x136653(0xcd))),FilesOptions_1=__importDefault(require(a19_0x136653(0xd8))),index=async(_0x1cd58b,_0x3522fe)=>{const _0x4c67be=a19_0x136653,{pageNumber:_0x3d3123,searchParam:_0xa38a14}=_0x1cd58b[_0x4c67be(0xd9)],{companyId:_0x10723f}=_0x1cd58b[_0x4c67be(0xc9)],{files:_0x53b81b,count:_0x218628,hasMore:_0x4dad3e}=await(0x0,ListService_1[_0x4c67be(0xb6)])({'searchParam':_0xa38a14,'pageNumber':_0x3d3123,'companyId':_0x10723f});return _0x3522fe[_0x4c67be(0xc5)]({'files':_0x53b81b,'count':_0x218628,'hasMore':_0x4dad3e});};exports[a19_0x136653(0xd0)]=index;const store=async(_0x1d3854,_0x2da34f)=>{const _0x549c3c=a19_0x136653,{name:_0x2b1872,message:_0x50b7a2,options:_0x106940}=_0x1d3854[_0x549c3c(0xc7)],{companyId:_0x1719a3}=_0x1d3854['user'],_0x5a5df5=await(0x0,CreateService_1[_0x549c3c(0xb6)])({'name':_0x2b1872,'message':_0x50b7a2,'options':_0x106940,'companyId':_0x1719a3}),_0x5605aa=(0x0,socket_1[_0x549c3c(0xca)])();return _0x5605aa[_0x549c3c(0xb4)](_0x549c3c(0xb2)+_0x1719a3+_0x549c3c(0xb7),{'action':_0x549c3c(0xbd),'fileList':_0x5a5df5}),_0x2da34f['status'](0xc8)[_0x549c3c(0xc5)](_0x5a5df5);};exports[a19_0x136653(0xe6)]=store;const show=async(_0x25aab7,_0x15fdb7)=>{const _0x3e89b7=a19_0x136653,{fileId:_0x3e3c25}=_0x25aab7['params'],{companyId:_0x473684}=_0x25aab7[_0x3e89b7(0xc9)],_0x149949=await(0x0,ShowService_1[_0x3e89b7(0xb6)])(_0x3e3c25,_0x473684);return _0x15fdb7['status'](0xc8)[_0x3e89b7(0xc5)](_0x149949);};exports[a19_0x136653(0xba)]=show;const uploadMedias=async(_0x3af7f3,_0x204415)=>{const _0x5719ee=a19_0x136653,{fileId:_0x47530f,id:_0x492ea3,mediaType:_0x4bd2a2}=_0x3af7f3['body'],_0x2908cc=_0x3af7f3[_0x5719ee(0xe4)],_0x188672=(0x0,lodash_1['head'])(_0x2908cc);try{let _0x29e046;if(_0x2908cc[_0x5719ee(0xe2)]>0x0)for(const [_0x443c29,_0x176e99]of _0x2908cc[_0x5719ee(0xe1)]()){_0x29e046=await FilesOptions_1[_0x5719ee(0xb6)][_0x5719ee(0xdb)]({'where':{'fileId':_0x47530f,'id':Array[_0x5719ee(0xd1)](_0x492ea3)?_0x492ea3[_0x443c29]:_0x492ea3}}),await _0x29e046[_0x5719ee(0xd7)]({'path':_0x176e99[_0x5719ee(0xc2)][_0x5719ee(0xd5)]('/','-'),'mediaType':Array['isArray'](_0x4bd2a2)?_0x4bd2a2[_0x443c29]:_0x4bd2a2});}return _0x204415[_0x5719ee(0xea)]({'mensagem':_0x5719ee(0xc6)});}catch(_0x250d61){throw new AppError_1['default'](_0x250d61[_0x5719ee(0xb3)]);}};exports[a19_0x136653(0xb9)]=uploadMedias;const update=async(_0x516feb,_0x23c9b2)=>{const _0x505492=a19_0x136653;if(_0x516feb[_0x505492(0xc9)][_0x505492(0xdf)]!==_0x505492(0xb5))throw new AppError_1[(_0x505492(0xb6))](_0x505492(0xcf),0x193);const {fileId:_0x2ae28b}=_0x516feb['params'],_0x291890=_0x516feb[_0x505492(0xc7)],{companyId:_0x36e351}=_0x516feb[_0x505492(0xc9)],_0x51e630=await(0x0,UpdateService_1[_0x505492(0xb6)])({'fileData':_0x291890,'id':_0x2ae28b,'companyId':_0x36e351}),_0x46689a=(0x0,socket_1[_0x505492(0xca)])();return _0x46689a[_0x505492(0xb4)](_0x505492(0xb2)+_0x36e351+_0x505492(0xb7),{'action':_0x505492(0xd7),'fileList':_0x51e630}),_0x23c9b2[_0x505492(0xd6)](0xc8)[_0x505492(0xc5)](_0x51e630);};exports[a19_0x136653(0xd7)]=update;const remove=async(_0x3cfcd3,_0x1edc7f)=>{const _0x46923b=a19_0x136653,{fileId:_0x44a88a}=_0x3cfcd3[_0x46923b(0xc8)],{companyId:_0x41e164}=_0x3cfcd3['user'];await(0x0,DeleteService_1[_0x46923b(0xb6)])(_0x44a88a,_0x41e164);const _0x181b4d=(0x0,socket_1['getIO'])();return _0x181b4d['emit'](_0x46923b(0xb2)+_0x41e164+'-file',{'action':_0x46923b(0xe7),'fileId':_0x44a88a}),_0x1edc7f[_0x46923b(0xd6)](0xc8)['json']({'message':_0x46923b(0xdd)});};exports[a19_0x136653(0xd4)]=remove;const removeAll=async(_0x243623,_0x4ddeae)=>{const _0x163793=a19_0x136653,{companyId:_0x408cbe}=_0x243623[_0x163793(0xc9)];return await(0x0,DeleteAllService_1[_0x163793(0xb6)])(_0x408cbe),_0x4ddeae[_0x163793(0xea)]();};exports[a19_0x136653(0xc4)]=removeAll;const list=async(_0x47bb33,_0x548d1c)=>{const _0x4fe1e2=a19_0x136653,{searchParam:_0x18ee12}=_0x47bb33[_0x4fe1e2(0xd9)],{companyId:_0x3c1b9f}=_0x47bb33[_0x4fe1e2(0xc9)],_0x32a704=await(0x0,SimpleListService_1[_0x4fe1e2(0xb6)])({'searchParam':_0x18ee12,'companyId':_0x3c1b9f});return _0x548d1c['json'](_0x32a704);};exports[a19_0x136653(0xd3)]=list;