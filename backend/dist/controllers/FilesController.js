'use strict';const a19_0x4a5fd2=a19_0x8ab5;(function(_0x531e6f,_0x2f7bd7){const _0x3ba458=a19_0x8ab5,_0x55fd4a=_0x531e6f();while(!![]){try{const _0x12775d=-parseInt(_0x3ba458(0xf7))/0x1+-parseInt(_0x3ba458(0x104))/0x2*(-parseInt(_0x3ba458(0xd6))/0x3)+parseInt(_0x3ba458(0xf1))/0x4*(parseInt(_0x3ba458(0xec))/0x5)+parseInt(_0x3ba458(0x103))/0x6*(parseInt(_0x3ba458(0xfe))/0x7)+-parseInt(_0x3ba458(0xe7))/0x8+-parseInt(_0x3ba458(0xfc))/0x9+-parseInt(_0x3ba458(0xcd))/0xa*(-parseInt(_0x3ba458(0xe3))/0xb);if(_0x12775d===_0x2f7bd7)break;else _0x55fd4a['push'](_0x55fd4a['shift']());}catch(_0x5eb5c5){_0x55fd4a['push'](_0x55fd4a['shift']());}}}(a19_0x547c,0x72820));var __importDefault=this&&this[a19_0x4a5fd2(0xd7)]||function(_0x438aa2){return _0x438aa2&&_0x438aa2['__esModule']?_0x438aa2:{'default':_0x438aa2};};Object[a19_0x4a5fd2(0xf5)](exports,a19_0x4a5fd2(0x105),{'value':!![]}),exports[a19_0x4a5fd2(0xfa)]=exports[a19_0x4a5fd2(0xf0)]=exports[a19_0x4a5fd2(0xe9)]=exports[a19_0x4a5fd2(0xd2)]=exports[a19_0x4a5fd2(0xce)]=exports[a19_0x4a5fd2(0xe2)]=exports[a19_0x4a5fd2(0xf3)]=exports[a19_0x4a5fd2(0xef)]=void 0x0;const socket_1=require(a19_0x4a5fd2(0xf4)),AppError_1=__importDefault(require(a19_0x4a5fd2(0xd9))),lodash_1=require(a19_0x4a5fd2(0xe6)),CreateService_1=__importDefault(require(a19_0x4a5fd2(0xe0))),ListService_1=__importDefault(require(a19_0x4a5fd2(0xcf))),UpdateService_1=__importDefault(require(a19_0x4a5fd2(0xe8))),ShowService_1=__importDefault(require(a19_0x4a5fd2(0xd1))),DeleteService_1=__importDefault(require(a19_0x4a5fd2(0x102))),SimpleListService_1=__importDefault(require(a19_0x4a5fd2(0x100))),DeleteAllService_1=__importDefault(require('../services/FileServices/DeleteAllService')),FilesOptions_1=__importDefault(require(a19_0x4a5fd2(0xcc))),index=async(_0x256234,_0xac0752)=>{const _0x2df878=a19_0x4a5fd2,{pageNumber:_0x10b8ac,searchParam:_0x4beda5}=_0x256234[_0x2df878(0xfd)],{companyId:_0x5715dd}=_0x256234[_0x2df878(0xdf)],{files:_0x215157,count:_0x1edadc,hasMore:_0x2aecb3}=await(0x0,ListService_1['default'])({'searchParam':_0x4beda5,'pageNumber':_0x10b8ac,'companyId':_0x5715dd});return _0xac0752[_0x2df878(0xff)]({'files':_0x215157,'count':_0x1edadc,'hasMore':_0x2aecb3});};function a19_0x8ab5(_0x4adc6e,_0x8ee24e){const _0x547c51=a19_0x547c();return a19_0x8ab5=function(_0x8ab5e1,_0x19ba4a){_0x8ab5e1=_0x8ab5e1-0xcc;let _0x54038e=_0x547c51[_0x8ab5e1];return _0x54038e;},a19_0x8ab5(_0x4adc6e,_0x8ee24e);}exports[a19_0x4a5fd2(0xef)]=index;const store=async(_0x18d113,_0x1ca12b)=>{const _0x14a2bb=a19_0x4a5fd2,{name:_0x20425c,message:_0x355547,options:_0x1d4246}=_0x18d113[_0x14a2bb(0xd5)],{companyId:_0x484e46}=_0x18d113[_0x14a2bb(0xdf)],_0x2c5054=await(0x0,CreateService_1['default'])({'name':_0x20425c,'message':_0x355547,'options':_0x1d4246,'companyId':_0x484e46}),_0x195bc5=(0x0,socket_1['getIO'])();return _0x195bc5[_0x14a2bb(0xee)](_0x14a2bb(0xf6)+_0x484e46+_0x14a2bb(0xdb),{'action':_0x14a2bb(0xe5),'fileList':_0x2c5054}),_0x1ca12b[_0x14a2bb(0xf9)](0xc8)[_0x14a2bb(0xff)](_0x2c5054);};exports['store']=store;const show=async(_0x3a242c,_0x3d67b6)=>{const _0x393fe2=a19_0x4a5fd2,{fileId:_0x2b7141}=_0x3a242c['params'],{companyId:_0x1d08aa}=_0x3a242c['user'],_0x4064f9=await(0x0,ShowService_1[_0x393fe2(0xd4)])(_0x2b7141,_0x1d08aa);return _0x3d67b6['status'](0xc8)[_0x393fe2(0xff)](_0x4064f9);};exports[a19_0x4a5fd2(0xe2)]=show;const uploadMedias=async(_0x276e95,_0x4c9ed2)=>{const _0x1cd99f=a19_0x4a5fd2,{fileId:_0x56509b,id:_0xde837b,mediaType:_0x18a8ec}=_0x276e95[_0x1cd99f(0xd5)],_0x33bdc0=_0x276e95[_0x1cd99f(0xdd)],_0x6cb49c=(0x0,lodash_1[_0x1cd99f(0xeb)])(_0x33bdc0);try{let _0x440427;if(_0x33bdc0['length']>0x0)for(const [_0x348611,_0x4ef28a]of _0x33bdc0[_0x1cd99f(0xf8)]()){_0x440427=await FilesOptions_1[_0x1cd99f(0xd4)][_0x1cd99f(0xd8)]({'where':{'fileId':_0x56509b,'id':Array[_0x1cd99f(0xed)](_0xde837b)?_0xde837b[_0x348611]:_0xde837b}}),_0x440427[_0x1cd99f(0xd2)]({'path':_0x4ef28a[_0x1cd99f(0xda)][_0x1cd99f(0xfb)]('/','-'),'mediaType':Array['isArray'](_0x18a8ec)?_0x18a8ec[_0x348611]:_0x18a8ec});}return _0x4c9ed2[_0x1cd99f(0xde)]({'mensagem':_0x1cd99f(0xea)});}catch(_0x3b4c83){throw new AppError_1['default'](_0x3b4c83[_0x1cd99f(0xdc)]);}};exports[a19_0x4a5fd2(0xce)]=uploadMedias;const update=async(_0x14e415,_0xce03c4)=>{const _0x5cf88a=a19_0x4a5fd2;if(_0x14e415['user'][_0x5cf88a(0xe4)]!==_0x5cf88a(0xe1))throw new AppError_1[(_0x5cf88a(0xd4))](_0x5cf88a(0x101),0x193);const {fileId:_0x326bfa}=_0x14e415[_0x5cf88a(0xd0)],_0x557ded=_0x14e415[_0x5cf88a(0xd5)],{companyId:_0x5cf665}=_0x14e415[_0x5cf88a(0xdf)],_0x5821b4=await(0x0,UpdateService_1[_0x5cf88a(0xd4)])({'fileData':_0x557ded,'id':_0x326bfa,'companyId':_0x5cf665}),_0x47d51f=(0x0,socket_1[_0x5cf88a(0xd3)])();return _0x47d51f[_0x5cf88a(0xee)]('company'+_0x5cf665+'-file',{'action':'update','fileList':_0x5821b4}),_0xce03c4[_0x5cf88a(0xf9)](0xc8)['json'](_0x5821b4);};exports[a19_0x4a5fd2(0xd2)]=update;const remove=async(_0x2674a2,_0x48d009)=>{const _0x378a7f=a19_0x4a5fd2,{fileId:_0x1a4649}=_0x2674a2[_0x378a7f(0xd0)],{companyId:_0x4c7b98}=_0x2674a2[_0x378a7f(0xdf)];await(0x0,DeleteService_1[_0x378a7f(0xd4)])(_0x1a4649,_0x4c7b98);const _0x212891=(0x0,socket_1[_0x378a7f(0xd3)])();return _0x212891[_0x378a7f(0xee)](_0x378a7f(0xf6)+_0x4c7b98+'-file',{'action':'delete','fileId':_0x1a4649}),_0x48d009['status'](0xc8)[_0x378a7f(0xff)]({'message':_0x378a7f(0xf2)});};exports[a19_0x4a5fd2(0xe9)]=remove;const removeAll=async(_0x2698b0,_0x56fe2f)=>{const _0x1fcbdf=a19_0x4a5fd2,{companyId:_0x547dc9}=_0x2698b0['user'];return await(0x0,DeleteAllService_1[_0x1fcbdf(0xd4)])(_0x547dc9),_0x56fe2f[_0x1fcbdf(0xde)]();};exports['removeAll']=removeAll;function a19_0x547c(){const _0x27859f=['__importDefault','findOne','../errors/AppError','filename','-file','message','files','send','user','../services/FileServices/CreateService','admin','show','264CNNbNX','profile','create','lodash','4847152TapCkn','../services/FileServices/UpdateService','remove','Arquivos\x20atualizados','head','293285JVBwsC','isArray','emit','index','removeAll','24BoEHEx','File\x20List\x20deleted','store','../libs/socket','defineProperty','company','352892bIvQon','entries','status','list','replace','8346114RHxqwt','query','259FwcyEx','json','../services/FileServices/SimpleListService','ERR_NO_PERMISSION','../services/FileServices/DeleteService','52710vzprip','1946Duyjgd','__esModule','../models/FilesOptions','541530TnXAsI','uploadMedias','../services/FileServices/ListService','params','../services/FileServices/ShowService','update','getIO','default','body','1167dJWLGE'];a19_0x547c=function(){return _0x27859f;};return a19_0x547c();}const list=async(_0xa61627,_0x1551a3)=>{const _0x1f50b4=a19_0x4a5fd2,{searchParam:_0x4f4dde}=_0xa61627[_0x1f50b4(0xfd)],{companyId:_0x2b0f61}=_0xa61627[_0x1f50b4(0xdf)],_0x3187de=await(0x0,SimpleListService_1[_0x1f50b4(0xd4)])({'searchParam':_0x4f4dde,'companyId':_0x2b0f61});return _0x1551a3[_0x1f50b4(0xff)](_0x3187de);};exports[a19_0x4a5fd2(0xfa)]=list;