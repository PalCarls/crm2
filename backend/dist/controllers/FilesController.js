'use strict';const a18_0x1339a6=a18_0x4938;(function(_0x4dfaf2,_0x4944fa){const _0x4a7fdf=a18_0x4938,_0x5d133a=_0x4dfaf2();while(!![]){try{const _0x122532=parseInt(_0x4a7fdf(0xb4))/0x1+parseInt(_0x4a7fdf(0xbd))/0x2*(parseInt(_0x4a7fdf(0x94))/0x3)+parseInt(_0x4a7fdf(0xbc))/0x4*(-parseInt(_0x4a7fdf(0xb3))/0x5)+-parseInt(_0x4a7fdf(0x9f))/0x6+-parseInt(_0x4a7fdf(0xa6))/0x7+parseInt(_0x4a7fdf(0xad))/0x8+-parseInt(_0x4a7fdf(0x99))/0x9*(-parseInt(_0x4a7fdf(0x92))/0xa);if(_0x122532===_0x4944fa)break;else _0x5d133a['push'](_0x5d133a['shift']());}catch(_0x589731){_0x5d133a['push'](_0x5d133a['shift']());}}}(a18_0xf99a,0xca9d1));var __importDefault=this&&this[a18_0x1339a6(0x9b)]||function(_0x80c0f){return _0x80c0f&&_0x80c0f['__esModule']?_0x80c0f:{'default':_0x80c0f};};Object[a18_0x1339a6(0x9e)](exports,a18_0x1339a6(0xa2),{'value':!![]}),exports[a18_0x1339a6(0x9d)]=exports['removeAll']=exports[a18_0x1339a6(0xa7)]=exports[a18_0x1339a6(0x9c)]=exports[a18_0x1339a6(0xa4)]=exports[a18_0x1339a6(0xc1)]=exports['store']=exports[a18_0x1339a6(0xb8)]=void 0x0;const socket_1=require('../libs/socket'),AppError_1=__importDefault(require(a18_0x1339a6(0x9a))),lodash_1=require('lodash'),CreateService_1=__importDefault(require(a18_0x1339a6(0xc0))),ListService_1=__importDefault(require(a18_0x1339a6(0xaa))),UpdateService_1=__importDefault(require(a18_0x1339a6(0xb0))),ShowService_1=__importDefault(require(a18_0x1339a6(0xa3))),DeleteService_1=__importDefault(require(a18_0x1339a6(0xa0))),SimpleListService_1=__importDefault(require('../services/FileServices/SimpleListService')),DeleteAllService_1=__importDefault(require(a18_0x1339a6(0xbe))),FilesOptions_1=__importDefault(require(a18_0x1339a6(0xc2))),index=async(_0x137cf0,_0xd43964)=>{const _0x44ede7=a18_0x1339a6,{pageNumber:_0x38b85a,searchParam:_0x186a6c}=_0x137cf0[_0x44ede7(0x95)],{companyId:_0x4c729c}=_0x137cf0[_0x44ede7(0xae)],{files:_0x4a4915,count:_0x508708,hasMore:_0x413644}=await(0x0,ListService_1['default'])({'searchParam':_0x186a6c,'pageNumber':_0x38b85a,'companyId':_0x4c729c});return _0xd43964[_0x44ede7(0xaf)]({'files':_0x4a4915,'count':_0x508708,'hasMore':_0x413644});};exports['index']=index;function a18_0xf99a(){const _0x5670a6=['length','1818351Oxifgy','../errors/AppError','__importDefault','update','list','defineProperty','3840264lFShOQ','../services/FileServices/DeleteService','Arquivos\x20atualizados','__esModule','../services/FileServices/ShowService','uploadMedias','emit','11412086bVloqw','remove','status','getIO','../services/FileServices/ListService','params','-file','2125504dpfVBy','user','json','../services/FileServices/UpdateService','default','findOne','215VfqFZN','212377cDcezY','delete','message','admin','index','head','body','File\x20List\x20deleted','152780EGSGza','1154lWJsyg','../services/FileServices/DeleteAllService','profile','../services/FileServices/CreateService','show','../models/FilesOptions','store','files','190EmHfzU','send','2214yUTRil','query','company','replace'];a18_0xf99a=function(){return _0x5670a6;};return a18_0xf99a();}const store=async(_0x195b94,_0x256953)=>{const _0x984f27=a18_0x1339a6,{name:_0x423bcd,message:_0x4449df,options:_0x374c5e}=_0x195b94[_0x984f27(0xba)],{companyId:_0xb9478c}=_0x195b94['user'],_0x27d19b=await(0x0,CreateService_1[_0x984f27(0xb1)])({'name':_0x423bcd,'message':_0x4449df,'options':_0x374c5e,'companyId':_0xb9478c}),_0x5972d7=(0x0,socket_1[_0x984f27(0xa9)])();return _0x5972d7[_0x984f27(0xa5)]('company'+_0xb9478c+_0x984f27(0xac),{'action':'create','fileList':_0x27d19b}),_0x256953[_0x984f27(0xa8)](0xc8)[_0x984f27(0xaf)](_0x27d19b);};exports[a18_0x1339a6(0xc3)]=store;const show=async(_0x2e9ee8,_0x52ef86)=>{const _0x1d8426=a18_0x1339a6,{fileId:_0x38a938}=_0x2e9ee8[_0x1d8426(0xab)],{companyId:_0x591b72}=_0x2e9ee8[_0x1d8426(0xae)],_0x734a6d=await(0x0,ShowService_1['default'])(_0x38a938,_0x591b72);return _0x52ef86['status'](0xc8)[_0x1d8426(0xaf)](_0x734a6d);};exports[a18_0x1339a6(0xc1)]=show;const uploadMedias=async(_0x6873d0,_0x567773)=>{const _0x2586d2=a18_0x1339a6,{fileId:_0x1de555,id:_0x4a4960,mediaType:_0x41f21a}=_0x6873d0['body'],_0x428841=_0x6873d0[_0x2586d2(0xc4)],_0x3782fe=(0x0,lodash_1[_0x2586d2(0xb9)])(_0x428841);try{let _0x3be545;if(_0x428841[_0x2586d2(0x98)]>0x0)for(const [_0x5e37bf,_0x2d5867]of _0x428841['entries']()){_0x3be545=await FilesOptions_1[_0x2586d2(0xb1)][_0x2586d2(0xb2)]({'where':{'fileId':_0x1de555,'id':Array['isArray'](_0x4a4960)?_0x4a4960[_0x5e37bf]:_0x4a4960}}),_0x3be545[_0x2586d2(0x9c)]({'path':_0x2d5867['filename'][_0x2586d2(0x97)]('/','-'),'mediaType':Array['isArray'](_0x41f21a)?_0x41f21a[_0x5e37bf]:_0x41f21a});}return _0x567773[_0x2586d2(0x93)]({'mensagem':_0x2586d2(0xa1)});}catch(_0x196dac){throw new AppError_1['default'](_0x196dac[_0x2586d2(0xb6)]);}};exports[a18_0x1339a6(0xa4)]=uploadMedias;const update=async(_0x46203c,_0xe447ef)=>{const _0x11f2a4=a18_0x1339a6;if(_0x46203c[_0x11f2a4(0xae)][_0x11f2a4(0xbf)]!==_0x11f2a4(0xb7))throw new AppError_1[(_0x11f2a4(0xb1))]('ERR_NO_PERMISSION',0x193);const {fileId:_0x40a1f8}=_0x46203c[_0x11f2a4(0xab)],_0x2f4f94=_0x46203c['body'],{companyId:_0x6ddd1b}=_0x46203c['user'],_0x5e6864=await(0x0,UpdateService_1[_0x11f2a4(0xb1)])({'fileData':_0x2f4f94,'id':_0x40a1f8,'companyId':_0x6ddd1b}),_0x4db59c=(0x0,socket_1[_0x11f2a4(0xa9)])();return _0x4db59c[_0x11f2a4(0xa5)](_0x11f2a4(0x96)+_0x6ddd1b+_0x11f2a4(0xac),{'action':_0x11f2a4(0x9c),'fileList':_0x5e6864}),_0xe447ef[_0x11f2a4(0xa8)](0xc8)[_0x11f2a4(0xaf)](_0x5e6864);};function a18_0x4938(_0x5dd6f7,_0xc195cc){const _0xf99a27=a18_0xf99a();return a18_0x4938=function(_0x493803,_0x28fc26){_0x493803=_0x493803-0x92;let _0xefe184=_0xf99a27[_0x493803];return _0xefe184;},a18_0x4938(_0x5dd6f7,_0xc195cc);}exports['update']=update;const remove=async(_0xa23d84,_0x129030)=>{const _0x4d7a44=a18_0x1339a6,{fileId:_0x2087dc}=_0xa23d84['params'],{companyId:_0x1171e9}=_0xa23d84[_0x4d7a44(0xae)];await(0x0,DeleteService_1[_0x4d7a44(0xb1)])(_0x2087dc,_0x1171e9);const _0x189729=(0x0,socket_1[_0x4d7a44(0xa9)])();return _0x189729[_0x4d7a44(0xa5)](_0x4d7a44(0x96)+_0x1171e9+_0x4d7a44(0xac),{'action':_0x4d7a44(0xb5),'fileId':_0x2087dc}),_0x129030[_0x4d7a44(0xa8)](0xc8)[_0x4d7a44(0xaf)]({'message':_0x4d7a44(0xbb)});};exports['remove']=remove;const removeAll=async(_0x9d7857,_0x15ef8c)=>{const _0x3b18fb=a18_0x1339a6,{companyId:_0x269af6}=_0x9d7857[_0x3b18fb(0xae)];return await(0x0,DeleteAllService_1[_0x3b18fb(0xb1)])(_0x269af6),_0x15ef8c[_0x3b18fb(0x93)]();};exports['removeAll']=removeAll;const list=async(_0x16b339,_0x927fe)=>{const _0x569ffa=a18_0x1339a6,{searchParam:_0x35539d}=_0x16b339[_0x569ffa(0x95)],{companyId:_0x576873}=_0x16b339[_0x569ffa(0xae)],_0x5815d0=await(0x0,SimpleListService_1[_0x569ffa(0xb1)])({'searchParam':_0x35539d,'companyId':_0x576873});return _0x927fe[_0x569ffa(0xaf)](_0x5815d0);};exports[a18_0x1339a6(0x9d)]=list;