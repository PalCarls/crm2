'use strict';function a19_0x130f(_0x1eebdc,_0x56f5fd){const _0x55a58f=a19_0x55a5();return a19_0x130f=function(_0x130f7a,_0x3e82e2){_0x130f7a=_0x130f7a-0x1db;let _0x10e0af=_0x55a58f[_0x130f7a];return _0x10e0af;},a19_0x130f(_0x1eebdc,_0x56f5fd);}const a19_0xdeca8c=a19_0x130f;(function(_0x49c246,_0x229092){const _0x53b948=a19_0x130f,_0x1aa49e=_0x49c246();while(!![]){try{const _0x21a2cd=-parseInt(_0x53b948(0x20c))/0x1+parseInt(_0x53b948(0x1df))/0x2*(-parseInt(_0x53b948(0x20a))/0x3)+parseInt(_0x53b948(0x1f7))/0x4+parseInt(_0x53b948(0x1f3))/0x5*(parseInt(_0x53b948(0x209))/0x6)+-parseInt(_0x53b948(0x1f2))/0x7+-parseInt(_0x53b948(0x1e0))/0x8+parseInt(_0x53b948(0x1f0))/0x9;if(_0x21a2cd===_0x229092)break;else _0x1aa49e['push'](_0x1aa49e['shift']());}catch(_0x3e6b3c){_0x1aa49e['push'](_0x1aa49e['shift']());}}}(a19_0x55a5,0xbf33f));var __importDefault=this&&this[a19_0xdeca8c(0x1e9)]||function(_0x3c6c3f){const _0x195300=a19_0xdeca8c;return _0x3c6c3f&&_0x3c6c3f[_0x195300(0x1f6)]?_0x3c6c3f:{'default':_0x3c6c3f};};Object['defineProperty'](exports,a19_0xdeca8c(0x1f6),{'value':!![]}),exports[a19_0xdeca8c(0x202)]=exports['removeAll']=exports[a19_0xdeca8c(0x1f1)]=exports[a19_0xdeca8c(0x204)]=exports[a19_0xdeca8c(0x1ed)]=exports[a19_0xdeca8c(0x1f5)]=exports[a19_0xdeca8c(0x1f9)]=exports['index']=void 0x0;const socket_1=require(a19_0xdeca8c(0x20d)),AppError_1=__importDefault(require(a19_0xdeca8c(0x20b))),lodash_1=require('lodash'),CreateService_1=__importDefault(require(a19_0xdeca8c(0x1fb))),ListService_1=__importDefault(require(a19_0xdeca8c(0x1fd))),UpdateService_1=__importDefault(require('../services/FileServices/UpdateService')),ShowService_1=__importDefault(require(a19_0xdeca8c(0x1e6))),DeleteService_1=__importDefault(require(a19_0xdeca8c(0x1e1))),SimpleListService_1=__importDefault(require(a19_0xdeca8c(0x208))),DeleteAllService_1=__importDefault(require(a19_0xdeca8c(0x201))),FilesOptions_1=__importDefault(require(a19_0xdeca8c(0x1e2))),index=async(_0x4cbe29,_0x2ab49c)=>{const _0x5b829d=a19_0xdeca8c,{pageNumber:_0x221340,searchParam:_0xe52d79}=_0x4cbe29[_0x5b829d(0x1e8)],{companyId:_0x255a8c}=_0x4cbe29[_0x5b829d(0x200)],{files:_0x43a643,count:_0x3400bb,hasMore:_0x456946}=await(0x0,ListService_1[_0x5b829d(0x207)])({'searchParam':_0xe52d79,'pageNumber':_0x221340,'companyId':_0x255a8c});return _0x2ab49c[_0x5b829d(0x1ec)]({'files':_0x43a643,'count':_0x3400bb,'hasMore':_0x456946});};exports['index']=index;const store=async(_0x20e951,_0x4107a7)=>{const _0xb7f86b=a19_0xdeca8c,{name:_0xfd4c9,message:_0x4ab454,options:_0x3f9bcd}=_0x20e951[_0xb7f86b(0x1ff)],{companyId:_0x42235e}=_0x20e951['user'],_0xb13180=await(0x0,CreateService_1[_0xb7f86b(0x207)])({'name':_0xfd4c9,'message':_0x4ab454,'options':_0x3f9bcd,'companyId':_0x42235e}),_0x36ae66=(0x0,socket_1[_0xb7f86b(0x1ef)])();return _0x36ae66[_0xb7f86b(0x1ee)](_0xb7f86b(0x1fa)+_0x42235e+_0xb7f86b(0x1e3),{'action':'create','fileList':_0xb13180}),_0x4107a7['status'](0xc8)[_0xb7f86b(0x1ec)](_0xb13180);};exports[a19_0xdeca8c(0x1f9)]=store;const show=async(_0x9b1d1b,_0x8321d4)=>{const _0x34f85a=a19_0xdeca8c,{fileId:_0x46e036}=_0x9b1d1b[_0x34f85a(0x1dd)],{companyId:_0x393451}=_0x9b1d1b[_0x34f85a(0x200)],_0xe7f5c7=await(0x0,ShowService_1['default'])(_0x46e036,_0x393451);return _0x8321d4[_0x34f85a(0x1fc)](0xc8)[_0x34f85a(0x1ec)](_0xe7f5c7);};exports['show']=show;const uploadMedias=async(_0xa33885,_0x55254a)=>{const _0x35f997=a19_0xdeca8c,{fileId:_0x2dae95,id:_0x5bd9ce,mediaType:_0x42023d}=_0xa33885['body'],_0x5710d3=_0xa33885[_0x35f997(0x1e5)],_0xa0f38=(0x0,lodash_1['head'])(_0x5710d3);try{let _0x132c44;if(_0x5710d3[_0x35f997(0x1eb)]>0x0)for(const [_0x4d0e07,_0x105be4]of _0x5710d3[_0x35f997(0x206)]()){_0x132c44=await FilesOptions_1[_0x35f997(0x207)][_0x35f997(0x1dc)]({'where':{'fileId':_0x2dae95,'id':Array[_0x35f997(0x1db)](_0x5bd9ce)?_0x5bd9ce[_0x4d0e07]:_0x5bd9ce}}),await _0x132c44['update']({'path':_0x105be4[_0x35f997(0x1de)][_0x35f997(0x1ea)]('/','-'),'mediaType':Array[_0x35f997(0x1db)](_0x42023d)?_0x42023d[_0x4d0e07]:_0x42023d});}return _0x55254a[_0x35f997(0x1fe)]({'mensagem':_0x35f997(0x1e7)});}catch(_0x5f3471){throw new AppError_1[(_0x35f997(0x207))](_0x5f3471['message']);}};exports[a19_0xdeca8c(0x1ed)]=uploadMedias;const update=async(_0x184dde,_0x55ed46)=>{const _0x1e31c9=a19_0xdeca8c;if(_0x184dde[_0x1e31c9(0x200)][_0x1e31c9(0x1f8)]!=='admin')throw new AppError_1['default'](_0x1e31c9(0x1f4),0x193);const {fileId:_0x469eef}=_0x184dde[_0x1e31c9(0x1dd)],_0x2ec768=_0x184dde[_0x1e31c9(0x1ff)],{companyId:_0x10cdf2}=_0x184dde[_0x1e31c9(0x200)],_0x593038=await(0x0,UpdateService_1['default'])({'fileData':_0x2ec768,'id':_0x469eef,'companyId':_0x10cdf2}),_0x407897=(0x0,socket_1['getIO'])();return _0x407897[_0x1e31c9(0x1ee)]('company'+_0x10cdf2+_0x1e31c9(0x1e3),{'action':_0x1e31c9(0x204),'fileList':_0x593038}),_0x55ed46[_0x1e31c9(0x1fc)](0xc8)[_0x1e31c9(0x1ec)](_0x593038);};exports[a19_0xdeca8c(0x204)]=update;const remove=async(_0x5b54bb,_0x55d84d)=>{const _0x183c86=a19_0xdeca8c,{fileId:_0x38d817}=_0x5b54bb['params'],{companyId:_0x8b8610}=_0x5b54bb['user'];await(0x0,DeleteService_1[_0x183c86(0x207)])(_0x38d817,_0x8b8610);const _0x22bf44=(0x0,socket_1[_0x183c86(0x1ef)])();return _0x22bf44[_0x183c86(0x1ee)](_0x183c86(0x1fa)+_0x8b8610+_0x183c86(0x1e3),{'action':_0x183c86(0x1e4),'fileId':_0x38d817}),_0x55d84d[_0x183c86(0x1fc)](0xc8)['json']({'message':_0x183c86(0x205)});};exports[a19_0xdeca8c(0x1f1)]=remove;function a19_0x55a5(){const _0x55a678=['user','../services/FileServices/DeleteAllService','list','removeAll','update','File\x20List\x20deleted','entries','default','../services/FileServices/SimpleListService','6834hMFYeS','22539ZGMncC','../errors/AppError','334346YVDOcL','../libs/socket','isArray','findOne','params','filename','218sgAwre','8531592tyxFSj','../services/FileServices/DeleteService','../models/FilesOptions','-file','delete','files','../services/FileServices/ShowService','Arquivos\x20atualizados','query','__importDefault','replace','length','json','uploadMedias','emit','getIO','31398570uZYNAm','remove','8403297RJIMLg','2075jDfxle','ERR_NO_PERMISSION','show','__esModule','967740DudOMj','profile','store','company','../services/FileServices/CreateService','status','../services/FileServices/ListService','send','body'];a19_0x55a5=function(){return _0x55a678;};return a19_0x55a5();}const removeAll=async(_0x273997,_0x5abaa8)=>{const _0x3b2c97=a19_0xdeca8c,{companyId:_0x15fadf}=_0x273997[_0x3b2c97(0x200)];return await(0x0,DeleteAllService_1['default'])(_0x15fadf),_0x5abaa8[_0x3b2c97(0x1fe)]();};exports[a19_0xdeca8c(0x203)]=removeAll;const list=async(_0x5b739f,_0xed4f43)=>{const _0x1cd6f5=a19_0xdeca8c,{searchParam:_0x2b900c}=_0x5b739f[_0x1cd6f5(0x1e8)],{companyId:_0x4551d8}=_0x5b739f[_0x1cd6f5(0x200)],_0x5ebc6b=await(0x0,SimpleListService_1[_0x1cd6f5(0x207)])({'searchParam':_0x2b900c,'companyId':_0x4551d8});return _0xed4f43[_0x1cd6f5(0x1ec)](_0x5ebc6b);};exports['list']=list;