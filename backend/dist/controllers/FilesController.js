'use strict';const a18_0x1f1c90=a18_0x2b0a;(function(_0x1eb47c,_0xcfa1e4){const _0x21d7d3=a18_0x2b0a,_0x2ddf64=_0x1eb47c();while(!![]){try{const _0x37c4ae=-parseInt(_0x21d7d3(0x16d))/0x1*(parseInt(_0x21d7d3(0x164))/0x2)+-parseInt(_0x21d7d3(0x161))/0x3+parseInt(_0x21d7d3(0x179))/0x4+parseInt(_0x21d7d3(0x186))/0x5+-parseInt(_0x21d7d3(0x17f))/0x6*(-parseInt(_0x21d7d3(0x180))/0x7)+-parseInt(_0x21d7d3(0x170))/0x8+parseInt(_0x21d7d3(0x176))/0x9;if(_0x37c4ae===_0xcfa1e4)break;else _0x2ddf64['push'](_0x2ddf64['shift']());}catch(_0x3fd954){_0x2ddf64['push'](_0x2ddf64['shift']());}}}(a18_0x1f34,0xabf2a));var __importDefault=this&&this[a18_0x1f1c90(0x189)]||function(_0x577c8a){const _0x19fff2=a18_0x1f1c90;return _0x577c8a&&_0x577c8a[_0x19fff2(0x18c)]?_0x577c8a:{'default':_0x577c8a};};Object[a18_0x1f1c90(0x17b)](exports,a18_0x1f1c90(0x18c),{'value':!![]}),exports[a18_0x1f1c90(0x163)]=exports[a18_0x1f1c90(0x15e)]=exports[a18_0x1f1c90(0x177)]=exports['update']=exports[a18_0x1f1c90(0x174)]=exports['show']=exports['store']=exports['index']=void 0x0;const socket_1=require('../libs/socket'),AppError_1=__importDefault(require(a18_0x1f1c90(0x167))),lodash_1=require('lodash'),CreateService_1=__importDefault(require(a18_0x1f1c90(0x18b))),ListService_1=__importDefault(require('../services/FileServices/ListService')),UpdateService_1=__importDefault(require(a18_0x1f1c90(0x171))),ShowService_1=__importDefault(require(a18_0x1f1c90(0x17c))),DeleteService_1=__importDefault(require('../services/FileServices/DeleteService')),SimpleListService_1=__importDefault(require('../services/FileServices/SimpleListService')),DeleteAllService_1=__importDefault(require('../services/FileServices/DeleteAllService')),FilesOptions_1=__importDefault(require(a18_0x1f1c90(0x17e))),index=async(_0x457387,_0x45138b)=>{const _0x2935a2=a18_0x1f1c90,{pageNumber:_0x2cecdf,searchParam:_0x11cd72}=_0x457387[_0x2935a2(0x165)],{companyId:_0x59bd81}=_0x457387[_0x2935a2(0x185)],{files:_0x23d12f,count:_0xc81e44,hasMore:_0x118a44}=await(0x0,ListService_1[_0x2935a2(0x188)])({'searchParam':_0x11cd72,'pageNumber':_0x2cecdf,'companyId':_0x59bd81});return _0x45138b[_0x2935a2(0x18a)]({'files':_0x23d12f,'count':_0xc81e44,'hasMore':_0x118a44});};exports[a18_0x1f1c90(0x181)]=index;const store=async(_0x45472c,_0x128775)=>{const _0xe7c7a2=a18_0x1f1c90,{name:_0x18dcae,message:_0x7df72c,options:_0x1e5f92}=_0x45472c[_0xe7c7a2(0x18d)],{companyId:_0x475470}=_0x45472c[_0xe7c7a2(0x185)],_0x5a3440=await(0x0,CreateService_1[_0xe7c7a2(0x188)])({'name':_0x18dcae,'message':_0x7df72c,'options':_0x1e5f92,'companyId':_0x475470}),_0x1c3581=(0x0,socket_1['getIO'])();return _0x1c3581['emit'](_0xe7c7a2(0x168)+_0x475470+_0xe7c7a2(0x16e),{'action':_0xe7c7a2(0x15f),'fileList':_0x5a3440}),_0x128775['status'](0xc8)[_0xe7c7a2(0x18a)](_0x5a3440);};function a18_0x1f34(){const _0x188168=['defineProperty','../services/FileServices/ShowService','profile','../models/FilesOptions','234180oUNyne','91mFkWtE','index','emit','filename','show','user','3314165KKhmct','files','default','__importDefault','json','../services/FileServices/CreateService','__esModule','body','admin','removeAll','create','update','4199430aCDXIF','isArray','list','674384COiuOC','query','message','../errors/AppError','company','store','getIO','replace','params','4lXeeBG','-file','head','1702872GoDomb','../services/FileServices/UpdateService','ERR_NO_PERMISSION','File\x20List\x20deleted','uploadMedias','send','16267725XekTiB','remove','status','2751948tZGpuD','delete'];a18_0x1f34=function(){return _0x188168;};return a18_0x1f34();}exports[a18_0x1f1c90(0x169)]=store;const show=async(_0x29357c,_0xc3b230)=>{const _0x107585=a18_0x1f1c90,{fileId:_0x484597}=_0x29357c['params'],{companyId:_0x5614a8}=_0x29357c[_0x107585(0x185)],_0x563bc8=await(0x0,ShowService_1['default'])(_0x484597,_0x5614a8);return _0xc3b230[_0x107585(0x178)](0xc8)['json'](_0x563bc8);};exports[a18_0x1f1c90(0x184)]=show;const uploadMedias=async(_0x3a3d88,_0x38ba6b)=>{const _0x1d8053=a18_0x1f1c90,{fileId:_0x4cec09,id:_0x1205fb,mediaType:_0x3e7d99}=_0x3a3d88[_0x1d8053(0x18d)],_0x3455ca=_0x3a3d88[_0x1d8053(0x187)],_0x4a38ec=(0x0,lodash_1[_0x1d8053(0x16f)])(_0x3455ca);try{let _0x4728ed;if(_0x3455ca['length']>0x0)for(const [_0x5e1372,_0x2d2cbb]of _0x3455ca['entries']()){_0x4728ed=await FilesOptions_1[_0x1d8053(0x188)]['findOne']({'where':{'fileId':_0x4cec09,'id':Array['isArray'](_0x1205fb)?_0x1205fb[_0x5e1372]:_0x1205fb}}),_0x4728ed[_0x1d8053(0x160)]({'path':_0x2d2cbb[_0x1d8053(0x183)][_0x1d8053(0x16b)]('/','-'),'mediaType':Array[_0x1d8053(0x162)](_0x3e7d99)?_0x3e7d99[_0x5e1372]:_0x3e7d99});}return _0x38ba6b[_0x1d8053(0x175)]({'mensagem':'Arquivos\x20atualizados'});}catch(_0x42792c){throw new AppError_1[(_0x1d8053(0x188))](_0x42792c[_0x1d8053(0x166)]);}};exports[a18_0x1f1c90(0x174)]=uploadMedias;const update=async(_0x36737b,_0x571164)=>{const _0x5fbceb=a18_0x1f1c90;if(_0x36737b[_0x5fbceb(0x185)][_0x5fbceb(0x17d)]!==_0x5fbceb(0x15d))throw new AppError_1['default'](_0x5fbceb(0x172),0x193);const {fileId:_0x4fe6e1}=_0x36737b['params'],_0x5f333b=_0x36737b['body'],{companyId:_0x1d89ea}=_0x36737b[_0x5fbceb(0x185)],_0x98ca0c=await(0x0,UpdateService_1[_0x5fbceb(0x188)])({'fileData':_0x5f333b,'id':_0x4fe6e1,'companyId':_0x1d89ea}),_0x35bbe6=(0x0,socket_1['getIO'])();return _0x35bbe6['emit'](_0x5fbceb(0x168)+_0x1d89ea+'-file',{'action':_0x5fbceb(0x160),'fileList':_0x98ca0c}),_0x571164[_0x5fbceb(0x178)](0xc8)[_0x5fbceb(0x18a)](_0x98ca0c);};exports[a18_0x1f1c90(0x160)]=update;const remove=async(_0x20347a,_0x490d57)=>{const _0x238850=a18_0x1f1c90,{fileId:_0x565978}=_0x20347a[_0x238850(0x16c)],{companyId:_0x43efd3}=_0x20347a['user'];await(0x0,DeleteService_1['default'])(_0x565978,_0x43efd3);const _0x48cd37=(0x0,socket_1[_0x238850(0x16a)])();return _0x48cd37[_0x238850(0x182)](_0x238850(0x168)+_0x43efd3+_0x238850(0x16e),{'action':_0x238850(0x17a),'fileId':_0x565978}),_0x490d57[_0x238850(0x178)](0xc8)[_0x238850(0x18a)]({'message':_0x238850(0x173)});};exports[a18_0x1f1c90(0x177)]=remove;const removeAll=async(_0x813905,_0xac060a)=>{const _0xdb44e=a18_0x1f1c90,{companyId:_0x57d435}=_0x813905['user'];return await(0x0,DeleteAllService_1['default'])(_0x57d435),_0xac060a[_0xdb44e(0x175)]();};exports[a18_0x1f1c90(0x15e)]=removeAll;const list=async(_0x5411b2,_0x4e09cd)=>{const _0x34267e=a18_0x1f1c90,{searchParam:_0x4f60b2}=_0x5411b2[_0x34267e(0x165)],{companyId:_0x599817}=_0x5411b2[_0x34267e(0x185)],_0x24a20b=await(0x0,SimpleListService_1[_0x34267e(0x188)])({'searchParam':_0x4f60b2,'companyId':_0x599817});return _0x4e09cd[_0x34267e(0x18a)](_0x24a20b);};function a18_0x2b0a(_0x40ce5a,_0x435fec){const _0x1f3490=a18_0x1f34();return a18_0x2b0a=function(_0x2b0a67,_0xc7251){_0x2b0a67=_0x2b0a67-0x15d;let _0x5bdcc3=_0x1f3490[_0x2b0a67];return _0x5bdcc3;},a18_0x2b0a(_0x40ce5a,_0x435fec);}exports[a18_0x1f1c90(0x163)]=list;