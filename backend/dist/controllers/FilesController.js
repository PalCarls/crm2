'use strict';const a18_0x378985=a18_0x3e2e;(function(_0x51f876,_0x5d9b87){const _0x14643d=a18_0x3e2e,_0x4f226f=_0x51f876();while(!![]){try{const _0x131825=-parseInt(_0x14643d(0x10c))/0x1*(-parseInt(_0x14643d(0x126))/0x2)+-parseInt(_0x14643d(0x130))/0x3+parseInt(_0x14643d(0x12a))/0x4+-parseInt(_0x14643d(0x12d))/0x5+-parseInt(_0x14643d(0x11f))/0x6+parseInt(_0x14643d(0x111))/0x7+parseInt(_0x14643d(0x139))/0x8;if(_0x131825===_0x5d9b87)break;else _0x4f226f['push'](_0x4f226f['shift']());}catch(_0x31e27d){_0x4f226f['push'](_0x4f226f['shift']());}}}(a18_0x43ce,0x6201f));var __importDefault=this&&this[a18_0x378985(0x11a)]||function(_0x44f45e){const _0x546212=a18_0x378985;return _0x44f45e&&_0x44f45e[_0x546212(0x110)]?_0x44f45e:{'default':_0x44f45e};};function a18_0x3e2e(_0xc8474f,_0x138e90){const _0x43cecb=a18_0x43ce();return a18_0x3e2e=function(_0x3e2e27,_0xef5a9e){_0x3e2e27=_0x3e2e27-0x106;let _0x108036=_0x43cecb[_0x3e2e27];return _0x108036;},a18_0x3e2e(_0xc8474f,_0x138e90);}Object[a18_0x378985(0x117)](exports,a18_0x378985(0x110),{'value':!![]}),exports[a18_0x378985(0x119)]=exports['removeAll']=exports[a18_0x378985(0x136)]=exports['update']=exports[a18_0x378985(0x114)]=exports[a18_0x378985(0x11e)]=exports[a18_0x378985(0x10d)]=exports[a18_0x378985(0x122)]=void 0x0;const socket_1=require(a18_0x378985(0x10f)),AppError_1=__importDefault(require(a18_0x378985(0x120))),lodash_1=require('lodash'),CreateService_1=__importDefault(require(a18_0x378985(0x134))),ListService_1=__importDefault(require('../services/FileServices/ListService')),UpdateService_1=__importDefault(require(a18_0x378985(0x116))),ShowService_1=__importDefault(require(a18_0x378985(0x124))),DeleteService_1=__importDefault(require('../services/FileServices/DeleteService')),SimpleListService_1=__importDefault(require(a18_0x378985(0x129))),DeleteAllService_1=__importDefault(require(a18_0x378985(0x127))),FilesOptions_1=__importDefault(require(a18_0x378985(0x135))),index=async(_0x548177,_0x332e2f)=>{const _0x2bd5df=a18_0x378985,{pageNumber:_0x178280,searchParam:_0x19eb05}=_0x548177[_0x2bd5df(0x118)],{companyId:_0x133426}=_0x548177[_0x2bd5df(0x12c)],{files:_0x556cb8,count:_0x380fda,hasMore:_0x55ac74}=await(0x0,ListService_1[_0x2bd5df(0x11b)])({'searchParam':_0x19eb05,'pageNumber':_0x178280,'companyId':_0x133426});return _0x332e2f[_0x2bd5df(0x12b)]({'files':_0x556cb8,'count':_0x380fda,'hasMore':_0x55ac74});};exports[a18_0x378985(0x122)]=index;const store=async(_0x554e73,_0x579c4a)=>{const _0x4181af=a18_0x378985,{name:_0x22f523,message:_0x4ec5c4,options:_0x1a638d}=_0x554e73[_0x4181af(0x138)],{companyId:_0x395f89}=_0x554e73[_0x4181af(0x12c)],_0x43a79e=await(0x0,CreateService_1[_0x4181af(0x11b)])({'name':_0x22f523,'message':_0x4ec5c4,'options':_0x1a638d,'companyId':_0x395f89}),_0x5eb941=(0x0,socket_1[_0x4181af(0x112)])();return _0x5eb941[_0x4181af(0x11c)](_0x4181af(0x132)+_0x395f89+_0x4181af(0x133),{'action':_0x4181af(0x11d),'fileList':_0x43a79e}),_0x579c4a[_0x4181af(0x109)](0xc8)[_0x4181af(0x12b)](_0x43a79e);};exports[a18_0x378985(0x10d)]=store;const show=async(_0x302c94,_0x1e59ae)=>{const _0x453af2=a18_0x378985,{fileId:_0x326916}=_0x302c94[_0x453af2(0x10a)],{companyId:_0x1d81e4}=_0x302c94[_0x453af2(0x12c)],_0x4081ea=await(0x0,ShowService_1['default'])(_0x326916,_0x1d81e4);return _0x1e59ae[_0x453af2(0x109)](0xc8)['json'](_0x4081ea);};function a18_0x43ce(){const _0x420c8a=['Arquivos\x20atualizados','index','delete','../services/FileServices/ShowService','replace','1119544whdyti','../services/FileServices/DeleteAllService','ERR_NO_PERMISSION','../services/FileServices/SimpleListService','951428OnFezQ','json','user','2257600juGLGe','admin','findOne','1963935txfLZf','filename','company','-file','../services/FileServices/CreateService','../models/FilesOptions','remove','entries','body','5712384VGOLPI','update','send','profile','status','params','isArray','1sndSsM','store','files','../libs/socket','__esModule','4723194FVNzBe','getIO','removeAll','uploadMedias','head','../services/FileServices/UpdateService','defineProperty','query','list','__importDefault','default','emit','create','show','4072890arUzsO','../errors/AppError'];a18_0x43ce=function(){return _0x420c8a;};return a18_0x43ce();}exports['show']=show;const uploadMedias=async(_0x40af31,_0x9607a0)=>{const _0x1fa88c=a18_0x378985,{fileId:_0x5632a0,id:_0x350fa1,mediaType:_0x2d8c6c}=_0x40af31[_0x1fa88c(0x138)],_0x4329f8=_0x40af31[_0x1fa88c(0x10e)],_0x96694e=(0x0,lodash_1[_0x1fa88c(0x115)])(_0x4329f8);try{let _0x5698dd;if(_0x4329f8['length']>0x0)for(const [_0x2b6dac,_0x15a4f6]of _0x4329f8[_0x1fa88c(0x137)]()){_0x5698dd=await FilesOptions_1[_0x1fa88c(0x11b)][_0x1fa88c(0x12f)]({'where':{'fileId':_0x5632a0,'id':Array[_0x1fa88c(0x10b)](_0x350fa1)?_0x350fa1[_0x2b6dac]:_0x350fa1}}),_0x5698dd[_0x1fa88c(0x106)]({'path':_0x15a4f6[_0x1fa88c(0x131)][_0x1fa88c(0x125)]('/','-'),'mediaType':Array['isArray'](_0x2d8c6c)?_0x2d8c6c[_0x2b6dac]:_0x2d8c6c});}return _0x9607a0['send']({'mensagem':_0x1fa88c(0x121)});}catch(_0x1e1cc2){throw new AppError_1['default'](_0x1e1cc2['message']);}};exports[a18_0x378985(0x114)]=uploadMedias;const update=async(_0x1e22b3,_0xf037af)=>{const _0x3919ac=a18_0x378985;if(_0x1e22b3[_0x3919ac(0x12c)][_0x3919ac(0x108)]!==_0x3919ac(0x12e))throw new AppError_1['default'](_0x3919ac(0x128),0x193);const {fileId:_0x2d3e57}=_0x1e22b3[_0x3919ac(0x10a)],_0x37dc16=_0x1e22b3['body'],{companyId:_0x431a0c}=_0x1e22b3[_0x3919ac(0x12c)],_0x114676=await(0x0,UpdateService_1[_0x3919ac(0x11b)])({'fileData':_0x37dc16,'id':_0x2d3e57,'companyId':_0x431a0c}),_0xc18748=(0x0,socket_1['getIO'])();return _0xc18748[_0x3919ac(0x11c)](_0x3919ac(0x132)+_0x431a0c+_0x3919ac(0x133),{'action':'update','fileList':_0x114676}),_0xf037af[_0x3919ac(0x109)](0xc8)[_0x3919ac(0x12b)](_0x114676);};exports[a18_0x378985(0x106)]=update;const remove=async(_0x41ca1c,_0x236a7f)=>{const _0x47ae60=a18_0x378985,{fileId:_0x4e801d}=_0x41ca1c[_0x47ae60(0x10a)],{companyId:_0x2675cb}=_0x41ca1c['user'];await(0x0,DeleteService_1[_0x47ae60(0x11b)])(_0x4e801d,_0x2675cb);const _0x3fced0=(0x0,socket_1[_0x47ae60(0x112)])();return _0x3fced0[_0x47ae60(0x11c)](_0x47ae60(0x132)+_0x2675cb+_0x47ae60(0x133),{'action':_0x47ae60(0x123),'fileId':_0x4e801d}),_0x236a7f[_0x47ae60(0x109)](0xc8)[_0x47ae60(0x12b)]({'message':'File\x20List\x20deleted'});};exports[a18_0x378985(0x136)]=remove;const removeAll=async(_0x18daa4,_0x54681f)=>{const _0xb905e0=a18_0x378985,{companyId:_0x2da880}=_0x18daa4[_0xb905e0(0x12c)];return await(0x0,DeleteAllService_1[_0xb905e0(0x11b)])(_0x2da880),_0x54681f[_0xb905e0(0x107)]();};exports[a18_0x378985(0x113)]=removeAll;const list=async(_0x45241c,_0x27f661)=>{const _0x471681=a18_0x378985,{searchParam:_0x3d6446}=_0x45241c['query'],{companyId:_0x7fa409}=_0x45241c[_0x471681(0x12c)],_0x2f1046=await(0x0,SimpleListService_1['default'])({'searchParam':_0x3d6446,'companyId':_0x7fa409});return _0x27f661[_0x471681(0x12b)](_0x2f1046);};exports[a18_0x378985(0x119)]=list;