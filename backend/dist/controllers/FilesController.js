'use strict';const a19_0x22a1b7=a19_0x1260;(function(_0x357dd4,_0x133cee){const _0x1cf53d=a19_0x1260,_0xa679a0=_0x357dd4();while(!![]){try{const _0x2c09e3=parseInt(_0x1cf53d(0x1e9))/0x1+-parseInt(_0x1cf53d(0x1f3))/0x2+parseInt(_0x1cf53d(0x1ed))/0x3+parseInt(_0x1cf53d(0x20d))/0x4+parseInt(_0x1cf53d(0x20a))/0x5+parseInt(_0x1cf53d(0x202))/0x6*(-parseInt(_0x1cf53d(0x1e4))/0x7)+-parseInt(_0x1cf53d(0x209))/0x8;if(_0x2c09e3===_0x133cee)break;else _0xa679a0['push'](_0xa679a0['shift']());}catch(_0x1192e6){_0xa679a0['push'](_0xa679a0['shift']());}}}(a19_0x265c,0x76323));var __importDefault=this&&this[a19_0x22a1b7(0x1fc)]||function(_0x3a00a6){const _0x4ca315=a19_0x22a1b7;return _0x3a00a6&&_0x3a00a6[_0x4ca315(0x1fe)]?_0x3a00a6:{'default':_0x3a00a6};};Object['defineProperty'](exports,a19_0x22a1b7(0x1fe),{'value':!![]}),exports['list']=exports['removeAll']=exports[a19_0x22a1b7(0x1ea)]=exports['update']=exports[a19_0x22a1b7(0x211)]=exports[a19_0x22a1b7(0x20e)]=exports[a19_0x22a1b7(0x20c)]=exports[a19_0x22a1b7(0x1f1)]=void 0x0;function a19_0x1260(_0x3144d0,_0x495c6d){const _0x265c9a=a19_0x265c();return a19_0x1260=function(_0x126099,_0x36639d){_0x126099=_0x126099-0x1e1;let _0x3fa261=_0x265c9a[_0x126099];return _0x3fa261;},a19_0x1260(_0x3144d0,_0x495c6d);}const socket_1=require('../libs/socket'),AppError_1=__importDefault(require('../errors/AppError')),lodash_1=require(a19_0x22a1b7(0x1f5)),CreateService_1=__importDefault(require(a19_0x22a1b7(0x1e5))),ListService_1=__importDefault(require('../services/FileServices/ListService')),UpdateService_1=__importDefault(require(a19_0x22a1b7(0x1f4))),ShowService_1=__importDefault(require(a19_0x22a1b7(0x207))),DeleteService_1=__importDefault(require('../services/FileServices/DeleteService')),SimpleListService_1=__importDefault(require(a19_0x22a1b7(0x1f8))),DeleteAllService_1=__importDefault(require(a19_0x22a1b7(0x1f6))),FilesOptions_1=__importDefault(require(a19_0x22a1b7(0x212))),index=async(_0x311e85,_0x9e82e2)=>{const _0x49f63b=a19_0x22a1b7,{pageNumber:_0x489983,searchParam:_0x5ed128}=_0x311e85['query'],{companyId:_0x593140}=_0x311e85[_0x49f63b(0x1e1)],{files:_0x53c10a,count:_0x3d1d10,hasMore:_0x86073}=await(0x0,ListService_1[_0x49f63b(0x1e8)])({'searchParam':_0x5ed128,'pageNumber':_0x489983,'companyId':_0x593140});return _0x9e82e2[_0x49f63b(0x20f)]({'files':_0x53c10a,'count':_0x3d1d10,'hasMore':_0x86073});};exports[a19_0x22a1b7(0x1f1)]=index;const store=async(_0x3e7943,_0x14971c)=>{const _0x4f4b62=a19_0x22a1b7,{name:_0x498cc1,message:_0x2c9aee,options:_0xc18b3a}=_0x3e7943[_0x4f4b62(0x1ef)],{companyId:_0x2be2ec}=_0x3e7943['user'],_0x142024=await(0x0,CreateService_1[_0x4f4b62(0x1e8)])({'name':_0x498cc1,'message':_0x2c9aee,'options':_0xc18b3a,'companyId':_0x2be2ec}),_0x4a49a4=(0x0,socket_1[_0x4f4b62(0x1e6)])();return _0x4a49a4[_0x4f4b62(0x1e7)](_0x4f4b62(0x204)+_0x2be2ec+_0x4f4b62(0x206),{'action':_0x4f4b62(0x1e2),'fileList':_0x142024}),_0x14971c['status'](0xc8)[_0x4f4b62(0x20f)](_0x142024);};exports['store']=store;const show=async(_0x59baab,_0x309078)=>{const _0x16f63c=a19_0x22a1b7,{fileId:_0x3b9763}=_0x59baab[_0x16f63c(0x1ee)],{companyId:_0x3a5355}=_0x59baab[_0x16f63c(0x1e1)],_0x2ba76b=await(0x0,ShowService_1[_0x16f63c(0x1e8)])(_0x3b9763,_0x3a5355);return _0x309078[_0x16f63c(0x1f9)](0xc8)[_0x16f63c(0x20f)](_0x2ba76b);};exports[a19_0x22a1b7(0x20e)]=show;const uploadMedias=async(_0x261a6f,_0xf3b70e)=>{const _0x3e0e8a=a19_0x22a1b7,{fileId:_0x5db3c7,id:_0x5411bb,mediaType:_0x2ef113}=_0x261a6f[_0x3e0e8a(0x1ef)],_0x23222f=_0x261a6f[_0x3e0e8a(0x201)],_0x53ffae=(0x0,lodash_1['head'])(_0x23222f);try{let _0x3b5b31;if(_0x23222f[_0x3e0e8a(0x1fd)]>0x0)for(const [_0x35bc64,_0x548f7d]of _0x23222f[_0x3e0e8a(0x1ff)]()){_0x3b5b31=await FilesOptions_1[_0x3e0e8a(0x1e8)][_0x3e0e8a(0x1fb)]({'where':{'fileId':_0x5db3c7,'id':Array[_0x3e0e8a(0x1ec)](_0x5411bb)?_0x5411bb[_0x35bc64]:_0x5411bb}}),await _0x3b5b31[_0x3e0e8a(0x1e3)]({'path':_0x548f7d[_0x3e0e8a(0x200)][_0x3e0e8a(0x20b)]('/','-'),'mediaType':Array[_0x3e0e8a(0x1ec)](_0x2ef113)?_0x2ef113[_0x35bc64]:_0x2ef113});}return _0xf3b70e[_0x3e0e8a(0x1f7)]({'mensagem':_0x3e0e8a(0x208)});}catch(_0x3e7313){throw new AppError_1[(_0x3e0e8a(0x1e8))](_0x3e7313[_0x3e0e8a(0x1fa)]);}};exports[a19_0x22a1b7(0x211)]=uploadMedias;const update=async(_0x55e054,_0x5267a2)=>{const _0x259eac=a19_0x22a1b7;if(_0x55e054[_0x259eac(0x1e1)]['profile']!==_0x259eac(0x205))throw new AppError_1[(_0x259eac(0x1e8))](_0x259eac(0x1f2),0x193);const {fileId:_0x27cb18}=_0x55e054[_0x259eac(0x1ee)],_0x36c687=_0x55e054[_0x259eac(0x1ef)],{companyId:_0x296e58}=_0x55e054['user'],_0x30b297=await(0x0,UpdateService_1[_0x259eac(0x1e8)])({'fileData':_0x36c687,'id':_0x27cb18,'companyId':_0x296e58}),_0x4b41ca=(0x0,socket_1[_0x259eac(0x1e6)])();return _0x4b41ca['emit'](_0x259eac(0x204)+_0x296e58+'-file',{'action':_0x259eac(0x1e3),'fileList':_0x30b297}),_0x5267a2['status'](0xc8)['json'](_0x30b297);};function a19_0x265c(){const _0x53b2ce=['1468764UxciLM','delete','company','admin','-file','../services/FileServices/ShowService','Arquivos\x20atualizados','5303632XdREih','406510uIcWcj','replace','store','1031668fgiGGn','show','json','File\x20List\x20deleted','uploadMedias','../models/FilesOptions','user','create','update','7yHmMKs','../services/FileServices/CreateService','getIO','emit','default','790046dFNWMg','remove','list','isArray','1532313glXbtg','params','body','query','index','ERR_NO_PERMISSION','496314OFDgAB','../services/FileServices/UpdateService','lodash','../services/FileServices/DeleteAllService','send','../services/FileServices/SimpleListService','status','message','findOne','__importDefault','length','__esModule','entries','filename','files'];a19_0x265c=function(){return _0x53b2ce;};return a19_0x265c();}exports[a19_0x22a1b7(0x1e3)]=update;const remove=async(_0x440d67,_0x5bfc1c)=>{const _0x3f894b=a19_0x22a1b7,{fileId:_0x5aa27b}=_0x440d67[_0x3f894b(0x1ee)],{companyId:_0x35b4f4}=_0x440d67[_0x3f894b(0x1e1)];await(0x0,DeleteService_1[_0x3f894b(0x1e8)])(_0x5aa27b,_0x35b4f4);const _0x27e916=(0x0,socket_1[_0x3f894b(0x1e6)])();return _0x27e916[_0x3f894b(0x1e7)](_0x3f894b(0x204)+_0x35b4f4+_0x3f894b(0x206),{'action':_0x3f894b(0x203),'fileId':_0x5aa27b}),_0x5bfc1c['status'](0xc8)['json']({'message':_0x3f894b(0x210)});};exports['remove']=remove;const removeAll=async(_0x33e456,_0x1f9548)=>{const _0x28ec17=a19_0x22a1b7,{companyId:_0x3a568a}=_0x33e456[_0x28ec17(0x1e1)];return await(0x0,DeleteAllService_1[_0x28ec17(0x1e8)])(_0x3a568a),_0x1f9548[_0x28ec17(0x1f7)]();};exports['removeAll']=removeAll;const list=async(_0x39378c,_0x22a71b)=>{const _0x568153=a19_0x22a1b7,{searchParam:_0x43459c}=_0x39378c[_0x568153(0x1f0)],{companyId:_0x1c0334}=_0x39378c[_0x568153(0x1e1)],_0x3bd1c6=await(0x0,SimpleListService_1[_0x568153(0x1e8)])({'searchParam':_0x43459c,'companyId':_0x1c0334});return _0x22a71b[_0x568153(0x20f)](_0x3bd1c6);};exports[a19_0x22a1b7(0x1eb)]=list;