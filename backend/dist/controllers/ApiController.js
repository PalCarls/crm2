'use strict';const a8_0x150390=a8_0x3505;(function(_0x59c99a,_0x5a9a14){const _0x5b69e4=a8_0x3505,_0x3574de=_0x59c99a();while(!![]){try{const _0x571530=-parseInt(_0x5b69e4(0x11e))/0x1*(parseInt(_0x5b69e4(0x14b))/0x2)+-parseInt(_0x5b69e4(0x15d))/0x3*(-parseInt(_0x5b69e4(0x158))/0x4)+parseInt(_0x5b69e4(0x155))/0x5*(-parseInt(_0x5b69e4(0x133))/0x6)+-parseInt(_0x5b69e4(0x15a))/0x7*(parseInt(_0x5b69e4(0x11b))/0x8)+-parseInt(_0x5b69e4(0x14c))/0x9*(-parseInt(_0x5b69e4(0x171))/0xa)+parseInt(_0x5b69e4(0x139))/0xb+parseInt(_0x5b69e4(0x165))/0xc;if(_0x571530===_0x5a9a14)break;else _0x3574de['push'](_0x3574de['shift']());}catch(_0x521edb){_0x3574de['push'](_0x3574de['shift']());}}}(a8_0x2c1c,0xe7c75));var __createBinding=this&&this[a8_0x150390(0x132)]||(Object['create']?function(_0x5800bb,_0x2dac2a,_0x3fc0ab,_0x242e7e){const _0x3c8dcc=a8_0x150390;if(_0x242e7e===undefined)_0x242e7e=_0x3fc0ab;var _0x2d8d0a=Object[_0x3c8dcc(0x136)](_0x2dac2a,_0x3fc0ab);(!_0x2d8d0a||(_0x3c8dcc(0x146)in _0x2d8d0a?!_0x2dac2a[_0x3c8dcc(0x12e)]:_0x2d8d0a[_0x3c8dcc(0x124)]||_0x2d8d0a['configurable']))&&(_0x2d8d0a={'enumerable':!![],'get':function(){return _0x2dac2a[_0x3fc0ab];}}),Object[_0x3c8dcc(0x16f)](_0x5800bb,_0x242e7e,_0x2d8d0a);}:function(_0x513f3e,_0x3730e1,_0x1a3f75,_0x400565){if(_0x400565===undefined)_0x400565=_0x1a3f75;_0x513f3e[_0x400565]=_0x3730e1[_0x1a3f75];}),__setModuleDefault=this&&this[a8_0x150390(0x128)]||(Object[a8_0x150390(0x10f)]?function(_0x3af92d,_0x16bd1){const _0xa11171=a8_0x150390;Object[_0xa11171(0x16f)](_0x3af92d,_0xa11171(0x160),{'enumerable':!![],'value':_0x16bd1});}:function(_0x2b682b,_0x5286a6){_0x2b682b['default']=_0x5286a6;}),__importStar=this&&this[a8_0x150390(0x134)]||function(_0x2c80a8){const _0x409128=a8_0x150390;if(_0x2c80a8&&_0x2c80a8[_0x409128(0x12e)])return _0x2c80a8;var _0x3e1a26={};if(_0x2c80a8!=null){for(var _0x14a603 in _0x2c80a8)if(_0x14a603!==_0x409128(0x160)&&Object[_0x409128(0x125)][_0x409128(0x161)][_0x409128(0x14d)](_0x2c80a8,_0x14a603))__createBinding(_0x3e1a26,_0x2c80a8,_0x14a603);}return __setModuleDefault(_0x3e1a26,_0x2c80a8),_0x3e1a26;},__importDefault=this&&this[a8_0x150390(0x12f)]||function(_0x5872ef){const _0x514286=a8_0x150390;return _0x5872ef&&_0x5872ef[_0x514286(0x12e)]?_0x5872ef:{'default':_0x5872ef};};Object['defineProperty'](exports,a8_0x150390(0x12e),{'value':!![]}),exports['indexWhatsappsId']=exports[a8_0x150390(0x153)]=exports['indexImage']=exports[a8_0x150390(0x166)]=exports[a8_0x150390(0x12d)]=exports[a8_0x150390(0x131)]=void 0x0;const Yup=__importStar(require(a8_0x150390(0x163))),AppError_1=__importDefault(require(a8_0x150390(0x13d))),GetDefaultWhatsApp_1=__importDefault(require(a8_0x150390(0x14e))),SetTicketMessagesAsRead_1=__importDefault(require(a8_0x150390(0x113))),Whatsapp_1=__importDefault(require(a8_0x150390(0x172))),CreateOrUpdateContactService_1=__importDefault(require('../services/ContactServices/CreateOrUpdateContactService')),FindOrCreateTicketService_1=__importDefault(require(a8_0x150390(0x14f))),ShowTicketService_1=__importDefault(require(a8_0x150390(0x11c))),CheckIsValidContact_1=__importDefault(require(a8_0x150390(0x116))),CheckNumber_1=__importDefault(require(a8_0x150390(0x12a))),GetProfilePicUrl_1=__importDefault(require('../services/WbotServices/GetProfilePicUrl')),SendWhatsAppMedia_1=__importDefault(require('../services/WbotServices/SendWhatsAppMedia')),UpdateTicketService_1=__importDefault(require(a8_0x150390(0x167))),wbot_1=require('../libs/wbot'),SendWhatsAppMessageLink_1=__importDefault(require(a8_0x150390(0x127))),SendWhatsAppMessageAPI_1=__importDefault(require(a8_0x150390(0x120))),SendWhatsappMediaImage_1=__importDefault(require('../services/WbotServices/SendWhatsappMediaImage')),ApiUsages_1=__importDefault(require(a8_0x150390(0x142))),useDate_1=require(a8_0x150390(0x14a)),moment_1=__importDefault(require(a8_0x150390(0x121))),ListSettingsService_1=__importDefault(require(a8_0x150390(0x12b)));class OnWhatsAppDto{constructor(_0xc7603f,_0x5b265b){this['jid']=_0xc7603f,this['exists']=_0x5b265b;}}exports[a8_0x150390(0x131)]=OnWhatsAppDto;const createContact=async(_0x15a457,_0x4af533,_0x154f89,_0x674d77,_0x4b97e5)=>{const _0x27085c=a8_0x150390;await(0x0,CheckIsValidContact_1['default'])(_0x154f89,_0x4af533);const _0x1651fe=await(0x0,CheckNumber_1['default'])(_0x154f89,_0x4af533),_0x1f1de8=await(0x0,GetProfilePicUrl_1[_0x27085c(0x160)])(_0x1651fe,_0x4af533),_0x566286=await(0x0,ListSettingsService_1[_0x27085c(0x160)])({'companyId':_0x4af533}),_0x4892ff=_0x1651fe,_0x2ca913={'name':''+_0x4892ff,'number':_0x4892ff,'profilePicUrl':_0x1f1de8,'isGroup':![],'companyId':_0x4af533},_0x81a1f7=await(0x0,CreateOrUpdateContactService_1[_0x27085c(0x160)])(_0x2ca913);let _0x34e903;if(_0x15a457===undefined)_0x34e903=await(0x0,GetDefaultWhatsApp_1[_0x27085c(0x160)])(_0x4af533);else{_0x34e903=await Whatsapp_1['default']['findByPk'](_0x15a457);if(_0x34e903===null)throw new AppError_1[(_0x27085c(0x160))]('whatsapp\x20#'+_0x15a457+'\x20not\x20found');}const {ticket:_0x4f6b95,isCreated:_0x434a52}=await(0x0,FindOrCreateTicketService_1['default'])(_0x81a1f7,_0x34e903,0x0,_0x4af533,_0x4b97e5,_0x674d77,null,_0x27085c(0x137),null,![],_0x566286),_0x6064ca=await(0x0,ShowTicketService_1[_0x27085c(0x160)])(_0x4f6b95['id'],_0x4af533);return(0x0,SetTicketMessagesAsRead_1[_0x27085c(0x160)])(_0x6064ca),_0x6064ca;};function formatBRNumber(_0x5109ff){const _0x379e90=a8_0x150390,_0x596967=new RegExp(/^(\d{2})(\d{2})\d{1}(\d{8})$/);if(_0x596967[_0x379e90(0x123)](_0x5109ff)){const _0x5f44f8=_0x596967['exec'](_0x5109ff);if(_0x5f44f8&&_0x5f44f8[0x1]==='55'&&Number[_0x379e90(0x143)](Number['parseInt'](_0x5f44f8[0x2]))){const _0x55cc7b=Number[_0x379e90(0x145)](_0x5f44f8[0x2]);if(_0x55cc7b<0x1f)return _0x5f44f8[0x0];else{if(_0x55cc7b>=0x1f)return _0x5f44f8[0x1]+_0x5f44f8[0x2]+_0x5f44f8[0x3];}}}else return _0x5109ff;}function createJid(_0x376b43){const _0x57f8dd=a8_0x150390;if(_0x376b43[_0x57f8dd(0x169)](_0x57f8dd(0x16a))||_0x376b43[_0x57f8dd(0x169)](_0x57f8dd(0x159)))return formatBRNumber(_0x376b43);return _0x376b43[_0x57f8dd(0x169)]('-')?_0x376b43+_0x57f8dd(0x16a):formatBRNumber(_0x376b43)+_0x57f8dd(0x159);}const indexLink=async(_0x5ea11b,_0x2e4300)=>{const _0x526cb6=a8_0x150390,_0x1f8ef1=_0x5ea11b['body'],{whatsappId:_0x4f4ab4}=_0x5ea11b[_0x526cb6(0x11d)],{msdelay:_0x31ffc4}=_0x5ea11b[_0x526cb6(0x11d)],_0x175697=_0x5ea11b[_0x526cb6(0x11d)][_0x526cb6(0x115)],_0xa0956b=_0x5ea11b[_0x526cb6(0x11d)][_0x526cb6(0x13f)],_0x2c5965=_0x5ea11b[_0x526cb6(0x157)]['authorization'],[,_0x752b37]=_0x2c5965[_0x526cb6(0x11f)]('\x20'),_0xbb57e9=await Whatsapp_1[_0x526cb6(0x160)][_0x526cb6(0x15e)]({'where':{'token':_0x752b37}}),_0x135e9c=_0xbb57e9['companyId'];_0x1f8ef1['number']=_0x1f8ef1[_0x526cb6(0x148)][_0x526cb6(0x162)]('-','')[_0x526cb6(0x162)]('\x20','');const _0x3779c0=Yup[_0x526cb6(0x15c)]()[_0x526cb6(0x12c)]({'number':Yup['string']()[_0x526cb6(0x15b)]()['matches'](/^\d+$/,_0x526cb6(0x152))});try{await _0x3779c0[_0x526cb6(0x164)](_0x1f8ef1);}catch(_0x3d3acd){throw new AppError_1[(_0x526cb6(0x160))](_0x3d3acd['message']);}const _0x289090=await createContact(_0x4f4ab4,_0x135e9c,_0x1f8ef1[_0x526cb6(0x148)]);return await(0x0,SendWhatsAppMessageLink_1['default'])({'whatsappId':_0x4f4ab4,'contact':_0x289090['contact'],'url':_0x175697,'caption':_0xa0956b,'msdelay':_0x31ffc4}),setTimeout(async()=>{const _0x1f5284=_0x526cb6,{dateToClient:_0x3d8f7d}=(0x0,useDate_1[_0x1f5284(0x117)])(),_0x13b2c9=_0x3d8f7d(new Date()),_0x5b73a8=(0x0,moment_1[_0x1f5284(0x160)])()[_0x1f5284(0x140)](),_0x3cd435=await ApiUsages_1[_0x1f5284(0x160)][_0x1f5284(0x15e)]({'where':{'dateUsed':_0x13b2c9,'companyId':_0x135e9c}});if(_0x3cd435)await _0x3cd435[_0x1f5284(0x16d)]({'usedPDF':_0x3cd435[_0x1f5284(0x150)][_0x1f5284(0x112)]+0x1,'UsedOnDay':_0x3cd435[_0x1f5284(0x150)]['UsedOnDay']+0x1,'updatedAt':_0x5b73a8});else{const _0x3e961e=await ApiUsages_1['default'][_0x1f5284(0x10f)]({'companyId':_0x135e9c,'dateUsed':_0x13b2c9});await _0x3e961e[_0x1f5284(0x16d)]({'usedPDF':_0x3e961e[_0x1f5284(0x150)][_0x1f5284(0x112)]+0x1,'UsedOnDay':_0x3e961e[_0x1f5284(0x150)][_0x1f5284(0x13c)]+0x1,'updatedAt':_0x5b73a8});}},0x64),_0x2e4300[_0x526cb6(0x156)]({'status':_0x526cb6(0x168)});};exports['indexLink']=indexLink;function a8_0x2c1c(){const _0x513a6b=['../services/WbotServices/SendWhatsAppMessageLink','__setModuleDefault','files','../services/WbotServices/CheckNumber','../services/SettingServices/ListSettingsService','shape','indexLink','__esModule','__importDefault','mimetype','OnWhatsAppDto','__createBinding','672NgfSTU','__importStar','pdf','getOwnPropertyDescriptor','whatsapp','indexImage','5595183SEmRtV','matches','json','UsedOnDay','../errors/AppError','usedOther','caption','format','companyId','../models/ApiUsages','isInteger','usedImage','parseInt','get','log','number','all','../utils/useDate','56FqipWy','369uVcNLA','call','../helpers/GetDefaultWhatsApp','../services/TicketServices/FindOrCreateTicketService','dataValues','authorization','Invalid\x20number\x20format.\x20Only\x20numbers\x20is\x20allowed.','checkNumber','usedCheckNumber','12245hqAkGW','send','headers','44KFMJYv','@s.whatsapp.net','651ypAwUd','required','object','76245kNiYtT','findOne','string','default','hasOwnProperty','replace','yup','validate','24518268OWBzUU','index','../services/TicketServices/UpdateTicketService','SUCCESS','includes','@g.us','image','user','update','closed','defineProperty','message','198910aXyjgH','../models/Whatsapp','usedVideo','create','usedText','req','usedPDF','../helpers/SetTicketMessagesAsRead','contact','url','../services/WbotServices/CheckIsValidContact','useDate','status','jid','map','113192fbTgzf','../services/TicketServices/ShowTicketService','body','39551HqHSYK','split','../services/WbotServices/SendWhatsAppMessageAPI','moment','getWbot','test','writable','prototype','video'];a8_0x2c1c=function(){return _0x513a6b;};return a8_0x2c1c();}const index=async(_0x5d484a,_0x26d940)=>{const _0x73e20a=a8_0x150390,_0x176d76=_0x5d484a[_0x73e20a(0x11d)],{whatsappId:_0x1d9e34}=_0x5d484a[_0x73e20a(0x11d)],{msdelay:_0xac2743}=_0x5d484a[_0x73e20a(0x11d)],{body:_0x20bcaf,quotedMsg:_0x50ca19,userId:_0x549c54,queueId:_0xaf795e}=_0x5d484a[_0x73e20a(0x11d)],_0x446d91=_0x5d484a[_0x73e20a(0x129)],_0x137dd4=_0x5d484a[_0x73e20a(0x157)]['authorization'],[,_0x416474]=_0x137dd4[_0x73e20a(0x11f)]('\x20'),_0x16d8c8=await Whatsapp_1[_0x73e20a(0x160)][_0x73e20a(0x15e)]({'where':{'token':_0x416474}}),_0x88ed86=_0x16d8c8[_0x73e20a(0x141)];_0x176d76['number']=_0x176d76[_0x73e20a(0x148)]['replace']('-','')[_0x73e20a(0x162)]('\x20','');const _0x106c90=Yup['object']()[_0x73e20a(0x12c)]({'number':Yup[_0x73e20a(0x15f)]()[_0x73e20a(0x15b)]()[_0x73e20a(0x13a)](/^\d+$/,_0x73e20a(0x152))});try{await _0x106c90['validate'](_0x176d76);}catch(_0x186eee){throw new AppError_1[(_0x73e20a(0x160))](_0x186eee[_0x73e20a(0x170)]);}const _0x299046=await createContact(_0x16d8c8['id'],_0x88ed86,_0x176d76[_0x73e20a(0x148)],_0x549c54,_0xaf795e);return _0x446d91?await Promise[_0x73e20a(0x149)](_0x446d91[_0x73e20a(0x11a)](async _0x34e039=>{const _0x5ab89e=_0x73e20a;await(0x0,SendWhatsAppMedia_1[_0x5ab89e(0x160)])({'body':_0x20bcaf,'media':_0x34e039,'ticket':_0x299046});})):await(0x0,SendWhatsAppMessageAPI_1[_0x73e20a(0x160)])({'body':_0x20bcaf,'whatsappId':_0x16d8c8['id'],'contact':_0x299046[_0x73e20a(0x114)],'quotedMsg':_0x50ca19,'msdelay':_0xac2743}),setTimeout(async()=>{const _0x338ae4=_0x73e20a,{dateToClient:_0x3009f5}=(0x0,useDate_1[_0x338ae4(0x117)])(),_0x315393=_0x3009f5(new Date()),_0xbc10fb=(0x0,moment_1[_0x338ae4(0x160)])()[_0x338ae4(0x140)]();let _0x4ccb89=await ApiUsages_1[_0x338ae4(0x160)][_0x338ae4(0x15e)]({'where':{'dateUsed':_0x315393,'companyId':_0x88ed86}});_0x4ccb89?_0x446d91?await Promise[_0x338ae4(0x149)](_0x446d91['map'](async _0x39fc28=>{const _0x266226=_0x338ae4;if(_0x39fc28[_0x266226(0x130)][_0x266226(0x169)](_0x266226(0x135)))await _0x4ccb89[_0x266226(0x16d)]({'usedPDF':_0x4ccb89[_0x266226(0x150)][_0x266226(0x112)]+0x1,'UsedOnDay':_0x4ccb89[_0x266226(0x150)][_0x266226(0x13c)]+0x1,'updatedAt':_0xbc10fb});else{if(_0x39fc28[_0x266226(0x130)][_0x266226(0x169)](_0x266226(0x16b)))await _0x4ccb89['update']({'usedImage':_0x4ccb89[_0x266226(0x150)]['usedImage']+0x1,'UsedOnDay':_0x4ccb89[_0x266226(0x150)][_0x266226(0x13c)]+0x1,'updatedAt':_0xbc10fb});else _0x39fc28[_0x266226(0x130)][_0x266226(0x169)](_0x266226(0x126))?await _0x4ccb89[_0x266226(0x16d)]({'usedVideo':_0x4ccb89['dataValues']['usedVideo']+0x1,'UsedOnDay':_0x4ccb89['dataValues'][_0x266226(0x13c)]+0x1,'updatedAt':_0xbc10fb}):await _0x4ccb89[_0x266226(0x16d)]({'usedOther':_0x4ccb89[_0x266226(0x150)][_0x266226(0x13e)]+0x1,'UsedOnDay':_0x4ccb89[_0x266226(0x150)][_0x266226(0x13c)]+0x1,'updatedAt':_0xbc10fb});}})):await _0x4ccb89[_0x338ae4(0x16d)]({'usedText':_0x4ccb89[_0x338ae4(0x150)][_0x338ae4(0x110)]+0x1,'UsedOnDay':_0x4ccb89[_0x338ae4(0x150)][_0x338ae4(0x13c)]+0x1,'updatedAt':_0xbc10fb}):(_0x4ccb89=await ApiUsages_1[_0x338ae4(0x160)]['create']({'companyId':_0x88ed86,'dateUsed':_0x315393}),_0x446d91?await Promise[_0x338ae4(0x149)](_0x446d91[_0x338ae4(0x11a)](async _0x486169=>{const _0x10fb0a=_0x338ae4;if(_0x486169['mimetype'][_0x10fb0a(0x169)](_0x10fb0a(0x135)))await _0x4ccb89[_0x10fb0a(0x16d)]({'usedPDF':_0x4ccb89[_0x10fb0a(0x150)][_0x10fb0a(0x112)]+0x1,'UsedOnDay':_0x4ccb89[_0x10fb0a(0x150)][_0x10fb0a(0x13c)]+0x1,'updatedAt':_0xbc10fb});else{if(_0x486169[_0x10fb0a(0x130)][_0x10fb0a(0x169)](_0x10fb0a(0x16b)))await _0x4ccb89[_0x10fb0a(0x16d)]({'usedImage':_0x4ccb89[_0x10fb0a(0x150)][_0x10fb0a(0x144)]+0x1,'UsedOnDay':_0x4ccb89[_0x10fb0a(0x150)][_0x10fb0a(0x13c)]+0x1,'updatedAt':_0xbc10fb});else _0x486169[_0x10fb0a(0x130)]['includes']('video')?await _0x4ccb89[_0x10fb0a(0x16d)]({'usedVideo':_0x4ccb89[_0x10fb0a(0x150)][_0x10fb0a(0x10e)]+0x1,'UsedOnDay':_0x4ccb89['dataValues'][_0x10fb0a(0x13c)]+0x1,'updatedAt':_0xbc10fb}):await _0x4ccb89['update']({'usedOther':_0x4ccb89[_0x10fb0a(0x150)][_0x10fb0a(0x13e)]+0x1,'UsedOnDay':_0x4ccb89[_0x10fb0a(0x150)][_0x10fb0a(0x13c)]+0x1,'updatedAt':_0xbc10fb});}})):await _0x4ccb89[_0x338ae4(0x16d)]({'usedText':_0x4ccb89['dataValues']['usedText']+0x1,'UsedOnDay':_0x4ccb89[_0x338ae4(0x150)][_0x338ae4(0x13c)]+0x1,'updatedAt':_0xbc10fb}));},0x64),_0x26d940[_0x73e20a(0x156)]({'status':_0x73e20a(0x168)});};exports[a8_0x150390(0x166)]=index;const indexImage=async(_0x3fc240,_0x421fe7)=>{const _0x4e22be=a8_0x150390,_0x75695c=_0x3fc240[_0x4e22be(0x11d)],{whatsappId:_0x43a788}=_0x3fc240[_0x4e22be(0x11d)],{msdelay:_0x2add47}=_0x3fc240[_0x4e22be(0x11d)],_0x11bed6=_0x3fc240[_0x4e22be(0x11d)][_0x4e22be(0x115)],_0x512679=_0x3fc240[_0x4e22be(0x11d)]['caption'],_0x13e0e4=_0x3fc240['headers'][_0x4e22be(0x151)],[,_0xf23114]=_0x13e0e4['split']('\x20'),_0x22d8d0=await Whatsapp_1['default'][_0x4e22be(0x15e)]({'where':{'token':_0xf23114}}),_0x330d92=_0x22d8d0[_0x4e22be(0x141)];_0x75695c[_0x4e22be(0x148)]=_0x75695c[_0x4e22be(0x148)][_0x4e22be(0x162)]('-','')[_0x4e22be(0x162)]('\x20','');const _0x59083f=Yup[_0x4e22be(0x15c)]()['shape']({'number':Yup['string']()['required']()[_0x4e22be(0x13a)](/^\d+$/,'Invalid\x20number\x20format.\x20Only\x20numbers\x20is\x20allowed.')});try{await _0x59083f[_0x4e22be(0x164)](_0x75695c);}catch(_0x1c3f3d){throw new AppError_1[(_0x4e22be(0x160))](_0x1c3f3d[_0x4e22be(0x170)]);}const _0x5c0c10=await createContact(_0x43a788,_0x330d92,_0x75695c[_0x4e22be(0x148)]);return _0x11bed6&&await(0x0,SendWhatsappMediaImage_1['default'])({'ticket':_0x5c0c10,'url':_0x11bed6,'caption':_0x512679,'msdelay':_0x2add47}),setTimeout(async()=>{const _0x201b4a=_0x4e22be;await(0x0,UpdateTicketService_1[_0x201b4a(0x160)])({'ticketId':_0x5c0c10['id'],'ticketData':{'status':_0x201b4a(0x16e),'sendFarewellMessage':![],'amountUsedBotQueues':0x0},'companyId':_0x330d92});},0x64),setTimeout(async()=>{const _0x4d262f=_0x4e22be,{dateToClient:_0x38f2b0}=(0x0,useDate_1['useDate'])(),_0xc56ec3=_0x38f2b0(new Date()),_0x53a4d9=(0x0,moment_1[_0x4d262f(0x160)])()[_0x4d262f(0x140)](),_0x49eb28=await ApiUsages_1['default']['findOne']({'where':{'dateUsed':_0xc56ec3,'companyId':_0x330d92}});if(_0x49eb28)await _0x49eb28['update']({'usedImage':_0x49eb28[_0x4d262f(0x150)][_0x4d262f(0x144)]+0x1,'UsedOnDay':_0x49eb28[_0x4d262f(0x150)][_0x4d262f(0x13c)]+0x1,'updatedAt':_0x53a4d9});else{const _0x1569d2=await ApiUsages_1[_0x4d262f(0x160)][_0x4d262f(0x10f)]({'companyId':_0x330d92,'dateUsed':_0xc56ec3});await _0x1569d2[_0x4d262f(0x16d)]({'usedImage':_0x1569d2[_0x4d262f(0x150)]['usedImage']+0x1,'UsedOnDay':_0x1569d2['dataValues'][_0x4d262f(0x13c)]+0x1,'updatedAt':_0x53a4d9});}},0x64),_0x421fe7['send']({'status':_0x4e22be(0x168)});};exports[a8_0x150390(0x138)]=indexImage;function a8_0x3505(_0x302473,_0x53656c){const _0x2c1c20=a8_0x2c1c();return a8_0x3505=function(_0x3505ae,_0x1d5720){_0x3505ae=_0x3505ae-0x10e;let _0x354792=_0x2c1c20[_0x3505ae];return _0x354792;},a8_0x3505(_0x302473,_0x53656c);}const checkNumber=async(_0x5e7e22,_0x317a13)=>{const _0x46d12b=a8_0x150390,_0x45722c=_0x5e7e22[_0x46d12b(0x11d)],_0x34a8ff=_0x5e7e22[_0x46d12b(0x157)][_0x46d12b(0x151)],[,_0x161512]=_0x34a8ff[_0x46d12b(0x11f)]('\x20'),_0x385c22=await Whatsapp_1[_0x46d12b(0x160)][_0x46d12b(0x15e)]({'where':{'token':_0x161512}}),_0x58203f=_0x385c22[_0x46d12b(0x141)],_0x284a2e=_0x45722c[_0x46d12b(0x148)][_0x46d12b(0x162)]('-','')[_0x46d12b(0x162)]('\x20',''),_0x5cf30f=await(0x0,GetDefaultWhatsApp_1['default'])(_0x58203f),_0x15e6be=(0x0,wbot_1[_0x46d12b(0x122)])(_0x5cf30f['id']),_0x5c992c=createJid(_0x284a2e);try{const [_0x480c2b]=await _0x15e6be['onWhatsApp'](_0x5c992c);if(_0x480c2b['exists'])return setTimeout(async()=>{const _0x5dff48=_0x46d12b,{dateToClient:_0x4a1f1b}=(0x0,useDate_1[_0x5dff48(0x117)])(),_0x241d82=_0x4a1f1b(new Date()),_0x34b829=(0x0,moment_1[_0x5dff48(0x160)])()[_0x5dff48(0x140)](),_0xb306be=await ApiUsages_1[_0x5dff48(0x160)][_0x5dff48(0x15e)]({'where':{'dateUsed':_0x241d82,'companyId':_0x58203f}});if(_0xb306be)await _0xb306be['update']({'usedCheckNumber':_0xb306be[_0x5dff48(0x150)]['usedCheckNumber']+0x1,'UsedOnDay':_0xb306be['dataValues'][_0x5dff48(0x13c)]+0x1,'updatedAt':_0x34b829});else{const _0x53fe5c=await ApiUsages_1[_0x5dff48(0x160)][_0x5dff48(0x10f)]({'companyId':_0x58203f,'dateUsed':_0x241d82});await _0x53fe5c[_0x5dff48(0x16d)]({'usedCheckNumber':_0x53fe5c[_0x5dff48(0x150)][_0x5dff48(0x154)]+0x1,'UsedOnDay':_0x53fe5c[_0x5dff48(0x150)][_0x5dff48(0x13c)]+0x1,'updatedAt':_0x34b829});}},0x64),_0x317a13[_0x46d12b(0x118)](0xc8)[_0x46d12b(0x13b)]({'existsInWhatsapp':!![],'number':_0x284a2e,'numberFormatted':_0x480c2b[_0x46d12b(0x119)]});}catch(_0x150ba2){return _0x317a13['status'](0x190)[_0x46d12b(0x13b)]({'existsInWhatsapp':![],'number':_0x5c992c,'error':'Not\x20exists\x20on\x20Whatsapp'});}};exports['checkNumber']=checkNumber;const indexWhatsappsId=async(_0x4e3de8,_0x25301c)=>{const _0x339662=a8_0x150390;return console['log'](_0x339662(0x111),_0x4e3de8),console[_0x339662(0x147)](_0x339662(0x111),_0x4e3de8[_0x339662(0x16c)]),_0x25301c[_0x339662(0x118)](0xc8)[_0x339662(0x13b)]('oi');};exports['indexWhatsappsId']=indexWhatsappsId;