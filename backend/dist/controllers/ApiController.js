'use strict';const a8_0x97f1f2=a8_0x5d5f;(function(_0x31d383,_0x1e68ab){const _0x12bd2d=a8_0x5d5f,_0x7ab302=_0x31d383();while(!![]){try{const _0x49f0da=parseInt(_0x12bd2d(0xef))/0x1*(-parseInt(_0x12bd2d(0x12a))/0x2)+parseInt(_0x12bd2d(0xf0))/0x3+parseInt(_0x12bd2d(0x109))/0x4+parseInt(_0x12bd2d(0x114))/0x5+-parseInt(_0x12bd2d(0x12c))/0x6+-parseInt(_0x12bd2d(0x129))/0x7*(parseInt(_0x12bd2d(0x145))/0x8)+-parseInt(_0x12bd2d(0x10a))/0x9*(-parseInt(_0x12bd2d(0xfc))/0xa);if(_0x49f0da===_0x1e68ab)break;else _0x7ab302['push'](_0x7ab302['shift']());}catch(_0x471d97){_0x7ab302['push'](_0x7ab302['shift']());}}}(a8_0x3bb0,0x1d648));var __createBinding=this&&this[a8_0x97f1f2(0x126)]||(Object['create']?function(_0x268bc5,_0x381438,_0x5dd5d8,_0x379a00){const _0x39d061=a8_0x97f1f2;if(_0x379a00===undefined)_0x379a00=_0x5dd5d8;var _0x211df9=Object['getOwnPropertyDescriptor'](_0x381438,_0x5dd5d8);(!_0x211df9||(_0x39d061(0x123)in _0x211df9?!_0x381438[_0x39d061(0x120)]:_0x211df9['writable']||_0x211df9['configurable']))&&(_0x211df9={'enumerable':!![],'get':function(){return _0x381438[_0x5dd5d8];}}),Object[_0x39d061(0x111)](_0x268bc5,_0x379a00,_0x211df9);}:function(_0x331b78,_0x55dc49,_0xd07f28,_0x379755){if(_0x379755===undefined)_0x379755=_0xd07f28;_0x331b78[_0x379755]=_0x55dc49[_0xd07f28];}),__setModuleDefault=this&&this[a8_0x97f1f2(0x10d)]||(Object[a8_0x97f1f2(0x141)]?function(_0x55cac5,_0x477e28){const _0x4d1c27=a8_0x97f1f2;Object[_0x4d1c27(0x111)](_0x55cac5,'default',{'enumerable':!![],'value':_0x477e28});}:function(_0x5546f0,_0x5bc36d){_0x5546f0['default']=_0x5bc36d;}),__importStar=this&&this[a8_0x97f1f2(0x132)]||function(_0x177f28){const _0x5615e7=a8_0x97f1f2;if(_0x177f28&&_0x177f28['__esModule'])return _0x177f28;var _0x46f4c9={};if(_0x177f28!=null){for(var _0x431ce9 in _0x177f28)if(_0x431ce9!=='default'&&Object['prototype']['hasOwnProperty'][_0x5615e7(0xea)](_0x177f28,_0x431ce9))__createBinding(_0x46f4c9,_0x177f28,_0x431ce9);}return __setModuleDefault(_0x46f4c9,_0x177f28),_0x46f4c9;},__importDefault=this&&this[a8_0x97f1f2(0x134)]||function(_0x48fb84){return _0x48fb84&&_0x48fb84['__esModule']?_0x48fb84:{'default':_0x48fb84};};Object[a8_0x97f1f2(0x111)](exports,a8_0x97f1f2(0x120),{'value':!![]}),exports[a8_0x97f1f2(0x12b)]=exports[a8_0x97f1f2(0x105)]=exports[a8_0x97f1f2(0x118)]=exports[a8_0x97f1f2(0x116)]=exports[a8_0x97f1f2(0x104)]=exports['OnWhatsAppDto']=void 0x0;const Yup=__importStar(require(a8_0x97f1f2(0x136))),AppError_1=__importDefault(require('../errors/AppError')),GetDefaultWhatsApp_1=__importDefault(require(a8_0x97f1f2(0x119))),SetTicketMessagesAsRead_1=__importDefault(require(a8_0x97f1f2(0x131))),Whatsapp_1=__importDefault(require('../models/Whatsapp')),CreateOrUpdateContactService_1=__importDefault(require('../services/ContactServices/CreateOrUpdateContactService')),FindOrCreateTicketService_1=__importDefault(require(a8_0x97f1f2(0x103))),ShowTicketService_1=__importDefault(require('../services/TicketServices/ShowTicketService')),CheckIsValidContact_1=__importDefault(require(a8_0x97f1f2(0xfe))),CheckNumber_1=__importDefault(require('../services/WbotServices/CheckNumber')),GetProfilePicUrl_1=__importDefault(require('../services/WbotServices/GetProfilePicUrl')),SendWhatsAppMedia_1=__importDefault(require(a8_0x97f1f2(0x13d))),UpdateTicketService_1=__importDefault(require(a8_0x97f1f2(0xfb))),wbot_1=require(a8_0x97f1f2(0x106)),SendWhatsAppMessageLink_1=__importDefault(require(a8_0x97f1f2(0x13e))),SendWhatsAppMessageAPI_1=__importDefault(require(a8_0x97f1f2(0x11f))),SendWhatsappMediaImage_1=__importDefault(require(a8_0x97f1f2(0x12d))),ApiUsages_1=__importDefault(require(a8_0x97f1f2(0xfa))),useDate_1=require(a8_0x97f1f2(0x108)),moment_1=__importDefault(require('moment')),ListSettingsService_1=__importDefault(require(a8_0x97f1f2(0xe6)));class OnWhatsAppDto{constructor(_0x34457a,_0x4ae684){const _0x530d6d=a8_0x97f1f2;this[_0x530d6d(0x110)]=_0x34457a,this[_0x530d6d(0x125)]=_0x4ae684;}}exports[a8_0x97f1f2(0x113)]=OnWhatsAppDto;function a8_0x3bb0(){const _0x2dfe6b=['Invalid\x20number\x20format.\x20Only\x20numbers\x20is\x20allowed.','validate','SUCCESS','onWhatsApp','5JKTvOB','416199zvhkYb','req','image','includes','matches','default','usedText','user','@g.us','authorization','../models/ApiUsages','../services/TicketServices/UpdateTicketService','10PycsRU','message','../services/WbotServices/CheckIsValidContact','usedPDF','useDate','update','shape','../services/TicketServices/FindOrCreateTicketService','indexLink','checkNumber','../libs/wbot','dataValues','../utils/useDate','521156HfFRZP','2896947MjDxCT','whatsapp\x20#','send','__setModuleDefault','log','split','jid','defineProperty','files','OnWhatsAppDto','640145GYGviz','usedOther','index','contact','indexImage','../helpers/GetDefaultWhatsApp','UsedOnDay','object','mimetype','usedImage','pdf','../services/WbotServices/SendWhatsAppMessageAPI','__esModule','findByPk','number','get','parseInt','exists','__createBinding','getWbot','isInteger','301nftpIN','73806tlCEkG','indexWhatsappsId','1185390EPlctE','../services/WbotServices/SendWhatsappMediaImage','replace','json','all','../helpers/SetTicketMessagesAsRead','__importStar','exec','__importDefault','format','yup','\x20not\x20found','findOne','usedCheckNumber','caption','usedVideo','required','../services/WbotServices/SendWhatsAppMedia','../services/WbotServices/SendWhatsAppMessageLink','@s.whatsapp.net','whatsapp','create','status','companyId','headers','40272hrVnXX','string','../services/SettingServices/ListSettingsService','body','video','map','call'];a8_0x3bb0=function(){return _0x2dfe6b;};return a8_0x3bb0();}const createContact=async(_0x5aeeba,_0x429362,_0x12aae8,_0x56b9b7,_0x4b7111)=>{const _0x16a880=a8_0x97f1f2;await(0x0,CheckIsValidContact_1[_0x16a880(0xf5)])(_0x12aae8,_0x429362);const _0x28b90f=await(0x0,CheckNumber_1[_0x16a880(0xf5)])(_0x12aae8,_0x429362),_0x26c60d=await(0x0,GetProfilePicUrl_1[_0x16a880(0xf5)])(_0x28b90f,_0x429362),_0x1f7321=await(0x0,ListSettingsService_1['default'])({'companyId':_0x429362}),_0x55c024=_0x28b90f,_0x1ea8df={'name':''+_0x55c024,'number':_0x55c024,'profilePicUrl':_0x26c60d,'isGroup':![],'companyId':_0x429362},_0x44fd3d=await(0x0,CreateOrUpdateContactService_1[_0x16a880(0xf5)])(_0x1ea8df);let _0x574723;if(_0x5aeeba===undefined)_0x574723=await(0x0,GetDefaultWhatsApp_1[_0x16a880(0xf5)])(_0x429362);else{_0x574723=await Whatsapp_1[_0x16a880(0xf5)][_0x16a880(0x121)](_0x5aeeba);if(_0x574723===null)throw new AppError_1['default'](_0x16a880(0x10b)+_0x5aeeba+_0x16a880(0x137));}const {ticket:_0x4b1c02,isCreated:_0x30e7e5}=await(0x0,FindOrCreateTicketService_1[_0x16a880(0xf5)])(_0x44fd3d,_0x574723,0x0,_0x429362,_0x4b7111,_0x56b9b7,null,_0x16a880(0x140),null,![],_0x1f7321),_0x49f189=await(0x0,ShowTicketService_1[_0x16a880(0xf5)])(_0x4b1c02['id'],_0x429362);return(0x0,SetTicketMessagesAsRead_1[_0x16a880(0xf5)])(_0x49f189),_0x49f189;};function formatBRNumber(_0x10e437){const _0x5a8161=a8_0x97f1f2,_0x7e872b=new RegExp(/^(\d{2})(\d{2})\d{1}(\d{8})$/);if(_0x7e872b['test'](_0x10e437)){const _0x2ce94f=_0x7e872b[_0x5a8161(0x133)](_0x10e437);if(_0x2ce94f&&_0x2ce94f[0x1]==='55'&&Number[_0x5a8161(0x128)](Number[_0x5a8161(0x124)](_0x2ce94f[0x2]))){const _0x4da514=Number[_0x5a8161(0x124)](_0x2ce94f[0x2]);if(_0x4da514<0x1f)return _0x2ce94f[0x0];else{if(_0x4da514>=0x1f)return _0x2ce94f[0x1]+_0x2ce94f[0x2]+_0x2ce94f[0x3];}}}else return _0x10e437;}function createJid(_0x430c36){const _0x1f7e0d=a8_0x97f1f2;if(_0x430c36[_0x1f7e0d(0xf3)](_0x1f7e0d(0xf8))||_0x430c36[_0x1f7e0d(0xf3)]('@s.whatsapp.net'))return formatBRNumber(_0x430c36);return _0x430c36[_0x1f7e0d(0xf3)]('-')?_0x430c36+_0x1f7e0d(0xf8):formatBRNumber(_0x430c36)+_0x1f7e0d(0x13f);}function a8_0x5d5f(_0x1b6c41,_0x2ccc90){const _0x3bb035=a8_0x3bb0();return a8_0x5d5f=function(_0x5d5f9c,_0x5b6ac6){_0x5d5f9c=_0x5d5f9c-0xe6;let _0x6fe080=_0x3bb035[_0x5d5f9c];return _0x6fe080;},a8_0x5d5f(_0x1b6c41,_0x2ccc90);}const indexLink=async(_0x248d2f,_0x3bf8fa)=>{const _0x26f505=a8_0x97f1f2,_0xda63aa=_0x248d2f[_0x26f505(0xe7)],{whatsappId:_0x225522}=_0x248d2f['body'],{msdelay:_0x5d8703}=_0x248d2f['body'],_0x503df2=_0x248d2f[_0x26f505(0xe7)]['url'],_0x5bf671=_0x248d2f['body']['caption'],_0xbfc105=_0x248d2f[_0x26f505(0x144)][_0x26f505(0xf9)],[,_0x53c999]=_0xbfc105['split']('\x20'),_0x2e1ae7=await Whatsapp_1[_0x26f505(0xf5)][_0x26f505(0x138)]({'where':{'token':_0x53c999}}),_0x3b6fbe=_0x2e1ae7[_0x26f505(0x143)];_0xda63aa[_0x26f505(0x122)]=_0xda63aa[_0x26f505(0x122)][_0x26f505(0x12e)]('-','')[_0x26f505(0x12e)]('\x20','');const _0x1c0ebf=Yup['object']()['shape']({'number':Yup[_0x26f505(0x146)]()[_0x26f505(0x13c)]()[_0x26f505(0xf4)](/^\d+$/,_0x26f505(0xeb))});try{await _0x1c0ebf[_0x26f505(0xec)](_0xda63aa);}catch(_0x133b9a){throw new AppError_1[(_0x26f505(0xf5))](_0x133b9a[_0x26f505(0xfd)]);}const _0x41f7aa=await createContact(_0x225522,_0x3b6fbe,_0xda63aa[_0x26f505(0x122)]);return await(0x0,SendWhatsAppMessageLink_1[_0x26f505(0xf5)])({'whatsappId':_0x225522,'contact':_0x41f7aa['contact'],'url':_0x503df2,'caption':_0x5bf671,'msdelay':_0x5d8703}),setTimeout(async()=>{const _0x4665d3=_0x26f505,{dateToClient:_0x41c1dc}=(0x0,useDate_1['useDate'])(),_0x116478=_0x41c1dc(new Date()),_0x25d860=(0x0,moment_1[_0x4665d3(0xf5)])()[_0x4665d3(0x135)](),_0x32f70c=await ApiUsages_1[_0x4665d3(0xf5)]['findOne']({'where':{'dateUsed':_0x116478,'companyId':_0x3b6fbe}});if(_0x32f70c)await _0x32f70c['update']({'usedPDF':_0x32f70c[_0x4665d3(0x107)]['usedPDF']+0x1,'UsedOnDay':_0x32f70c[_0x4665d3(0x107)][_0x4665d3(0x11a)]+0x1,'updatedAt':_0x25d860});else{const _0x4f732a=await ApiUsages_1[_0x4665d3(0xf5)][_0x4665d3(0x141)]({'companyId':_0x3b6fbe,'dateUsed':_0x116478});await _0x4f732a[_0x4665d3(0x101)]({'usedPDF':_0x4f732a[_0x4665d3(0x107)][_0x4665d3(0xff)]+0x1,'UsedOnDay':_0x4f732a[_0x4665d3(0x107)][_0x4665d3(0x11a)]+0x1,'updatedAt':_0x25d860});}},0x64),_0x3bf8fa[_0x26f505(0x10c)]({'status':'SUCCESS'});};exports[a8_0x97f1f2(0x104)]=indexLink;const index=async(_0x36d856,_0x171173)=>{const _0x462210=a8_0x97f1f2,_0x58c45f=_0x36d856[_0x462210(0xe7)],{whatsappId:_0x53f42f}=_0x36d856['body'],{msdelay:_0x48e8f8}=_0x36d856[_0x462210(0xe7)],{body:_0x49c18e,quotedMsg:_0x2f54ad,userId:_0x4f745d,queueId:_0x13adc6}=_0x36d856[_0x462210(0xe7)],_0x5e0d3f=_0x36d856[_0x462210(0x112)],_0x4ffaa4=_0x36d856['headers']['authorization'],[,_0x46669f]=_0x4ffaa4[_0x462210(0x10f)]('\x20'),_0x4b2d87=await Whatsapp_1[_0x462210(0xf5)][_0x462210(0x138)]({'where':{'token':_0x46669f}}),_0x460386=_0x4b2d87[_0x462210(0x143)];_0x58c45f[_0x462210(0x122)]=_0x58c45f[_0x462210(0x122)][_0x462210(0x12e)]('-','')['replace']('\x20','');const _0x2dfe39=Yup[_0x462210(0x11b)]()[_0x462210(0x102)]({'number':Yup[_0x462210(0x146)]()[_0x462210(0x13c)]()[_0x462210(0xf4)](/^\d+$/,_0x462210(0xeb))});try{await _0x2dfe39[_0x462210(0xec)](_0x58c45f);}catch(_0x1adcde){throw new AppError_1[(_0x462210(0xf5))](_0x1adcde[_0x462210(0xfd)]);}const _0x46aa0e=await createContact(_0x4b2d87['id'],_0x460386,_0x58c45f[_0x462210(0x122)],_0x4f745d,_0x13adc6);return _0x5e0d3f?await Promise['all'](_0x5e0d3f['map'](async _0x8a7eb2=>{const _0x26f88d=_0x462210;await(0x0,SendWhatsAppMedia_1[_0x26f88d(0xf5)])({'body':_0x49c18e,'media':_0x8a7eb2,'ticket':_0x46aa0e});})):await(0x0,SendWhatsAppMessageAPI_1[_0x462210(0xf5)])({'body':_0x49c18e,'whatsappId':_0x4b2d87['id'],'contact':_0x46aa0e[_0x462210(0x117)],'quotedMsg':_0x2f54ad,'msdelay':_0x48e8f8}),setTimeout(async()=>{const _0x3c22fd=_0x462210,{dateToClient:_0x513d41}=(0x0,useDate_1[_0x3c22fd(0x100)])(),_0x10ef50=_0x513d41(new Date()),_0x22d019=(0x0,moment_1[_0x3c22fd(0xf5)])()[_0x3c22fd(0x135)]();let _0x119ad5=await ApiUsages_1[_0x3c22fd(0xf5)][_0x3c22fd(0x138)]({'where':{'dateUsed':_0x10ef50,'companyId':_0x460386}});_0x119ad5?_0x5e0d3f?await Promise[_0x3c22fd(0x130)](_0x5e0d3f[_0x3c22fd(0xe9)](async _0x177cf4=>{const _0x4b7c0d=_0x3c22fd;if(_0x177cf4['mimetype'][_0x4b7c0d(0xf3)](_0x4b7c0d(0x11e)))await _0x119ad5[_0x4b7c0d(0x101)]({'usedPDF':_0x119ad5[_0x4b7c0d(0x107)][_0x4b7c0d(0xff)]+0x1,'UsedOnDay':_0x119ad5[_0x4b7c0d(0x107)][_0x4b7c0d(0x11a)]+0x1,'updatedAt':_0x22d019});else{if(_0x177cf4[_0x4b7c0d(0x11c)][_0x4b7c0d(0xf3)]('image'))await _0x119ad5[_0x4b7c0d(0x101)]({'usedImage':_0x119ad5['dataValues'][_0x4b7c0d(0x11d)]+0x1,'UsedOnDay':_0x119ad5[_0x4b7c0d(0x107)][_0x4b7c0d(0x11a)]+0x1,'updatedAt':_0x22d019});else _0x177cf4['mimetype'][_0x4b7c0d(0xf3)](_0x4b7c0d(0xe8))?await _0x119ad5[_0x4b7c0d(0x101)]({'usedVideo':_0x119ad5['dataValues'][_0x4b7c0d(0x13b)]+0x1,'UsedOnDay':_0x119ad5['dataValues'][_0x4b7c0d(0x11a)]+0x1,'updatedAt':_0x22d019}):await _0x119ad5[_0x4b7c0d(0x101)]({'usedOther':_0x119ad5[_0x4b7c0d(0x107)][_0x4b7c0d(0x115)]+0x1,'UsedOnDay':_0x119ad5['dataValues'][_0x4b7c0d(0x11a)]+0x1,'updatedAt':_0x22d019});}})):await _0x119ad5[_0x3c22fd(0x101)]({'usedText':_0x119ad5[_0x3c22fd(0x107)][_0x3c22fd(0xf6)]+0x1,'UsedOnDay':_0x119ad5[_0x3c22fd(0x107)][_0x3c22fd(0x11a)]+0x1,'updatedAt':_0x22d019}):(_0x119ad5=await ApiUsages_1[_0x3c22fd(0xf5)][_0x3c22fd(0x141)]({'companyId':_0x460386,'dateUsed':_0x10ef50}),_0x5e0d3f?await Promise['all'](_0x5e0d3f[_0x3c22fd(0xe9)](async _0x4fc301=>{const _0x6af0d8=_0x3c22fd;if(_0x4fc301[_0x6af0d8(0x11c)][_0x6af0d8(0xf3)](_0x6af0d8(0x11e)))await _0x119ad5[_0x6af0d8(0x101)]({'usedPDF':_0x119ad5[_0x6af0d8(0x107)][_0x6af0d8(0xff)]+0x1,'UsedOnDay':_0x119ad5[_0x6af0d8(0x107)]['UsedOnDay']+0x1,'updatedAt':_0x22d019});else{if(_0x4fc301[_0x6af0d8(0x11c)]['includes'](_0x6af0d8(0xf2)))await _0x119ad5[_0x6af0d8(0x101)]({'usedImage':_0x119ad5['dataValues'][_0x6af0d8(0x11d)]+0x1,'UsedOnDay':_0x119ad5[_0x6af0d8(0x107)][_0x6af0d8(0x11a)]+0x1,'updatedAt':_0x22d019});else _0x4fc301[_0x6af0d8(0x11c)][_0x6af0d8(0xf3)]('video')?await _0x119ad5['update']({'usedVideo':_0x119ad5[_0x6af0d8(0x107)]['usedVideo']+0x1,'UsedOnDay':_0x119ad5[_0x6af0d8(0x107)][_0x6af0d8(0x11a)]+0x1,'updatedAt':_0x22d019}):await _0x119ad5[_0x6af0d8(0x101)]({'usedOther':_0x119ad5[_0x6af0d8(0x107)][_0x6af0d8(0x115)]+0x1,'UsedOnDay':_0x119ad5[_0x6af0d8(0x107)]['UsedOnDay']+0x1,'updatedAt':_0x22d019});}})):await _0x119ad5[_0x3c22fd(0x101)]({'usedText':_0x119ad5[_0x3c22fd(0x107)][_0x3c22fd(0xf6)]+0x1,'UsedOnDay':_0x119ad5[_0x3c22fd(0x107)][_0x3c22fd(0x11a)]+0x1,'updatedAt':_0x22d019}));},0x64),_0x171173['send']({'status':_0x462210(0xed)});};exports['index']=index;const indexImage=async(_0x28544e,_0x11a555)=>{const _0x5a3a2d=a8_0x97f1f2,_0x25b847=_0x28544e[_0x5a3a2d(0xe7)],{whatsappId:_0x148372}=_0x28544e[_0x5a3a2d(0xe7)],{msdelay:_0x42e456}=_0x28544e['body'],_0x253233=_0x28544e['body']['url'],_0x578c22=_0x28544e[_0x5a3a2d(0xe7)][_0x5a3a2d(0x13a)],_0x15ae35=_0x28544e[_0x5a3a2d(0x144)][_0x5a3a2d(0xf9)],[,_0x4ed25a]=_0x15ae35[_0x5a3a2d(0x10f)]('\x20'),_0x22ae8c=await Whatsapp_1[_0x5a3a2d(0xf5)]['findOne']({'where':{'token':_0x4ed25a}}),_0x142e41=_0x22ae8c[_0x5a3a2d(0x143)];_0x25b847[_0x5a3a2d(0x122)]=_0x25b847[_0x5a3a2d(0x122)][_0x5a3a2d(0x12e)]('-','')[_0x5a3a2d(0x12e)]('\x20','');const _0x3dfb4d=Yup[_0x5a3a2d(0x11b)]()[_0x5a3a2d(0x102)]({'number':Yup[_0x5a3a2d(0x146)]()[_0x5a3a2d(0x13c)]()['matches'](/^\d+$/,_0x5a3a2d(0xeb))});try{await _0x3dfb4d[_0x5a3a2d(0xec)](_0x25b847);}catch(_0x294f64){throw new AppError_1['default'](_0x294f64[_0x5a3a2d(0xfd)]);}const _0x90e968=await createContact(_0x148372,_0x142e41,_0x25b847[_0x5a3a2d(0x122)]);return _0x253233&&await(0x0,SendWhatsappMediaImage_1['default'])({'ticket':_0x90e968,'url':_0x253233,'caption':_0x578c22,'msdelay':_0x42e456}),setTimeout(async()=>{await(0x0,UpdateTicketService_1['default'])({'ticketId':_0x90e968['id'],'ticketData':{'status':'closed','sendFarewellMessage':![],'amountUsedBotQueues':0x0},'companyId':_0x142e41});},0x64),setTimeout(async()=>{const _0x5c8337=_0x5a3a2d,{dateToClient:_0x5b066a}=(0x0,useDate_1[_0x5c8337(0x100)])(),_0x25b2bc=_0x5b066a(new Date()),_0x2eeb62=(0x0,moment_1['default'])()['format'](),_0x3eef61=await ApiUsages_1[_0x5c8337(0xf5)][_0x5c8337(0x138)]({'where':{'dateUsed':_0x25b2bc,'companyId':_0x142e41}});if(_0x3eef61)await _0x3eef61[_0x5c8337(0x101)]({'usedImage':_0x3eef61[_0x5c8337(0x107)][_0x5c8337(0x11d)]+0x1,'UsedOnDay':_0x3eef61[_0x5c8337(0x107)]['UsedOnDay']+0x1,'updatedAt':_0x2eeb62});else{const _0x62681a=await ApiUsages_1[_0x5c8337(0xf5)][_0x5c8337(0x141)]({'companyId':_0x142e41,'dateUsed':_0x25b2bc});await _0x62681a[_0x5c8337(0x101)]({'usedImage':_0x62681a['dataValues'][_0x5c8337(0x11d)]+0x1,'UsedOnDay':_0x62681a[_0x5c8337(0x107)]['UsedOnDay']+0x1,'updatedAt':_0x2eeb62});}},0x64),_0x11a555[_0x5a3a2d(0x10c)]({'status':'SUCCESS'});};exports[a8_0x97f1f2(0x118)]=indexImage;const checkNumber=async(_0xa92c09,_0x251a78)=>{const _0x68a00c=a8_0x97f1f2,_0x3609ef=_0xa92c09['body'],_0x1f9e93=_0xa92c09[_0x68a00c(0x144)]['authorization'],[,_0x5ae283]=_0x1f9e93[_0x68a00c(0x10f)]('\x20'),_0x195ea7=await Whatsapp_1[_0x68a00c(0xf5)][_0x68a00c(0x138)]({'where':{'token':_0x5ae283}}),_0x48ee4c=_0x195ea7[_0x68a00c(0x143)],_0x35e2f8=_0x3609ef['number'][_0x68a00c(0x12e)]('-','')[_0x68a00c(0x12e)]('\x20',''),_0x3eb374=await(0x0,GetDefaultWhatsApp_1[_0x68a00c(0xf5)])(_0x48ee4c),_0x1c83a0=(0x0,wbot_1[_0x68a00c(0x127)])(_0x3eb374['id']),_0x404ef2=createJid(_0x35e2f8);try{const [_0xa254a9]=await _0x1c83a0[_0x68a00c(0xee)](_0x404ef2);if(_0xa254a9[_0x68a00c(0x125)])return setTimeout(async()=>{const _0x480d3f=_0x68a00c,{dateToClient:_0x58987e}=(0x0,useDate_1[_0x480d3f(0x100)])(),_0xcaa3cd=_0x58987e(new Date()),_0x50cc69=(0x0,moment_1[_0x480d3f(0xf5)])()[_0x480d3f(0x135)](),_0x291073=await ApiUsages_1[_0x480d3f(0xf5)][_0x480d3f(0x138)]({'where':{'dateUsed':_0xcaa3cd,'companyId':_0x48ee4c}});if(_0x291073)await _0x291073[_0x480d3f(0x101)]({'usedCheckNumber':_0x291073[_0x480d3f(0x107)]['usedCheckNumber']+0x1,'UsedOnDay':_0x291073['dataValues']['UsedOnDay']+0x1,'updatedAt':_0x50cc69});else{const _0x1e177b=await ApiUsages_1[_0x480d3f(0xf5)][_0x480d3f(0x141)]({'companyId':_0x48ee4c,'dateUsed':_0xcaa3cd});await _0x1e177b['update']({'usedCheckNumber':_0x1e177b[_0x480d3f(0x107)][_0x480d3f(0x139)]+0x1,'UsedOnDay':_0x1e177b[_0x480d3f(0x107)]['UsedOnDay']+0x1,'updatedAt':_0x50cc69});}},0x64),_0x251a78[_0x68a00c(0x142)](0xc8)[_0x68a00c(0x12f)]({'existsInWhatsapp':!![],'number':_0x35e2f8,'numberFormatted':_0xa254a9[_0x68a00c(0x110)]});}catch(_0x3b3d10){return _0x251a78['status'](0x190)[_0x68a00c(0x12f)]({'existsInWhatsapp':![],'number':_0x404ef2,'error':'Not\x20exists\x20on\x20Whatsapp'});}};exports[a8_0x97f1f2(0x105)]=checkNumber;const indexWhatsappsId=async(_0x516cc7,_0x25bb51)=>{const _0xdd3390=a8_0x97f1f2;return console[_0xdd3390(0x10e)]('req',_0x516cc7),console[_0xdd3390(0x10e)](_0xdd3390(0xf1),_0x516cc7[_0xdd3390(0xf7)]),_0x25bb51[_0xdd3390(0x142)](0xc8)[_0xdd3390(0x12f)]('oi');};exports[a8_0x97f1f2(0x12b)]=indexWhatsappsId;