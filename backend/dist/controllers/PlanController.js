'use strict';const a23_0x34a4df=a23_0x4b78;(function(_0x44ff33,_0x100d74){const _0x50aa3f=a23_0x4b78,_0x677f4d=_0x44ff33();while(!![]){try{const _0xae0354=-parseInt(_0x50aa3f(0xfc))/0x1+-parseInt(_0x50aa3f(0x10d))/0x2+parseInt(_0x50aa3f(0xf6))/0x3+-parseInt(_0x50aa3f(0x116))/0x4*(parseInt(_0x50aa3f(0xf4))/0x5)+parseInt(_0x50aa3f(0xe8))/0x6+parseInt(_0x50aa3f(0x106))/0x7+parseInt(_0x50aa3f(0x100))/0x8;if(_0xae0354===_0x100d74)break;else _0x677f4d['push'](_0x677f4d['shift']());}catch(_0x28a383){_0x677f4d['push'](_0x677f4d['shift']());}}}(a23_0x54eb,0xcc682));var __createBinding=this&&this[a23_0x34a4df(0xeb)]||(Object[a23_0x34a4df(0x108)]?function(_0x136ef9,_0x1efdf1,_0x597127,_0x38e0ae){const _0x4c4dad=a23_0x34a4df;if(_0x38e0ae===undefined)_0x38e0ae=_0x597127;var _0x591d08=Object[_0x4c4dad(0x101)](_0x1efdf1,_0x597127);(!_0x591d08||(_0x4c4dad(0x111)in _0x591d08?!_0x1efdf1['__esModule']:_0x591d08[_0x4c4dad(0x105)]||_0x591d08[_0x4c4dad(0xea)]))&&(_0x591d08={'enumerable':!![],'get':function(){return _0x1efdf1[_0x597127];}}),Object['defineProperty'](_0x136ef9,_0x38e0ae,_0x591d08);}:function(_0x554367,_0x1e9122,_0x1010cc,_0x9f8ad7){if(_0x9f8ad7===undefined)_0x9f8ad7=_0x1010cc;_0x554367[_0x9f8ad7]=_0x1e9122[_0x1010cc];}),__setModuleDefault=this&&this[a23_0x34a4df(0xee)]||(Object[a23_0x34a4df(0x108)]?function(_0xc03702,_0x4d59a6){const _0x4fe34e=a23_0x34a4df;Object[_0x4fe34e(0xf8)](_0xc03702,_0x4fe34e(0x10f),{'enumerable':!![],'value':_0x4d59a6});}:function(_0x131aa2,_0x53a6e1){const _0x1c2731=a23_0x34a4df;_0x131aa2[_0x1c2731(0x10f)]=_0x53a6e1;}),__importStar=this&&this[a23_0x34a4df(0x11b)]||function(_0x251ef0){const _0x38c26b=a23_0x34a4df;if(_0x251ef0&&_0x251ef0[_0x38c26b(0x113)])return _0x251ef0;var _0xf0c700={};if(_0x251ef0!=null){for(var _0x171ac1 in _0x251ef0)if(_0x171ac1!==_0x38c26b(0x10f)&&Object[_0x38c26b(0xf7)][_0x38c26b(0xe7)]['call'](_0x251ef0,_0x171ac1))__createBinding(_0xf0c700,_0x251ef0,_0x171ac1);}return __setModuleDefault(_0xf0c700,_0x251ef0),_0xf0c700;},__importDefault=this&&this[a23_0x34a4df(0x109)]||function(_0x1f242e){const _0x2b87d4=a23_0x34a4df;return _0x1f242e&&_0x1f242e[_0x2b87d4(0x113)]?_0x1f242e:{'default':_0x1f242e};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a23_0x34a4df(0x107)]=exports[a23_0x34a4df(0xfe)]=exports[a23_0x34a4df(0x102)]=exports[a23_0x34a4df(0x119)]=exports['list']=exports[a23_0x34a4df(0xff)]=void 0x0;const jsonwebtoken_1=require(a23_0x34a4df(0x10c)),auth_1=__importDefault(require(a23_0x34a4df(0x115))),Yup=__importStar(require(a23_0x34a4df(0xe5))),AppError_1=__importDefault(require(a23_0x34a4df(0x10e))),Plan_1=__importDefault(require(a23_0x34a4df(0xf5))),ListPlansService_1=__importDefault(require(a23_0x34a4df(0xec))),CreatePlanService_1=__importDefault(require('../services/PlanService/CreatePlanService')),UpdatePlanService_1=__importDefault(require('../services/PlanService/UpdatePlanService')),ShowPlanService_1=__importDefault(require(a23_0x34a4df(0xe4))),FindAllPlanService_1=__importDefault(require('../services/PlanService/FindAllPlanService')),DeletePlanService_1=__importDefault(require('../services/PlanService/DeletePlanService')),User_1=__importDefault(require(a23_0x34a4df(0xe9))),Company_1=__importDefault(require('../models/Company')),index=async(_0xd6190b,_0x56bea7)=>{const _0x4bcf60=a23_0x34a4df,{searchParam:_0x4a364b,pageNumber:_0x651456}=_0xd6190b[_0x4bcf60(0xfa)],_0x2d6d93=_0xd6190b[_0x4bcf60(0xf1)][_0x4bcf60(0xf3)],[,_0xdc17d2]=_0x2d6d93['split']('\x20'),_0x4f417b=(0x0,jsonwebtoken_1[_0x4bcf60(0x103)])(_0xdc17d2,auth_1[_0x4bcf60(0x10f)][_0x4bcf60(0x118)]),{id:_0x115e04,profile:_0x35ceda,companyId:_0x3e3df1}=_0x4f417b,_0x19b64f=await User_1[_0x4bcf60(0x10f)][_0x4bcf60(0x10a)](_0x115e04),_0x31618f=await Company_1[_0x4bcf60(0x10f)]['findByPk'](_0x3e3df1),_0x269cc1=_0x31618f[_0x4bcf60(0xf0)],_0x59ab05=await Plan_1['default']['findByPk'](_0x269cc1),_0x2a7ed9=_0x59ab05[_0x4bcf60(0x110)];if(_0x19b64f['super']===!![]){const {plans:_0x49f53f,count:_0x5514a8,hasMore:_0x31672f}=await(0x0,ListPlansService_1[_0x4bcf60(0x10f)])({'searchParam':_0x4a364b,'pageNumber':_0x651456});return _0x56bea7[_0x4bcf60(0x112)]({'plans':_0x49f53f,'count':_0x5514a8,'hasMore':_0x31672f});}else{const {plans:_0x1c07a7,count:_0x543182,hasMore:_0x16cc16}=await(0x0,ListPlansService_1[_0x4bcf60(0x10f)])({'searchParam':_0x2a7ed9,'pageNumber':_0x651456});return _0x56bea7[_0x4bcf60(0x112)]({'plans':_0x1c07a7,'count':_0x543182,'hasMore':_0x16cc16});}};exports[a23_0x34a4df(0xff)]=index;const list=async(_0x4c8ee3,_0x55f997)=>{const _0x42ba49=a23_0x34a4df,_0x143a3f=await(0x0,FindAllPlanService_1[_0x42ba49(0x10f)])();return _0x55f997[_0x42ba49(0x10b)](0xc8)[_0x42ba49(0x112)](_0x143a3f);};exports[a23_0x34a4df(0xfd)]=list;const store=async(_0x377aa0,_0x159cf7)=>{const _0x19d9d7=a23_0x34a4df,_0x25a8ed=_0x377aa0[_0x19d9d7(0x114)],_0x1fbc9f=Yup[_0x19d9d7(0xed)]()[_0x19d9d7(0xf2)]({'name':Yup[_0x19d9d7(0xfb)]()['required']()});try{await _0x1fbc9f['validate'](_0x25a8ed);}catch(_0x33d3ec){throw new AppError_1[(_0x19d9d7(0x10f))](_0x33d3ec['message']);}const _0x40cc4c=await(0x0,CreatePlanService_1[_0x19d9d7(0x10f)])(_0x25a8ed);return _0x159cf7[_0x19d9d7(0x10b)](0xc8)['json'](_0x40cc4c);};function a23_0x4b78(_0x10e503,_0x4d70ff){const _0x54eb15=a23_0x54eb();return a23_0x4b78=function(_0x4b7894,_0x4be089){_0x4b7894=_0x4b7894-0xe4;let _0x107951=_0x54eb15[_0x4b7894];return _0x107951;},a23_0x4b78(_0x10e503,_0x4d70ff);}exports[a23_0x34a4df(0x119)]=store;const show=async(_0x4214fd,_0x51c2c9)=>{const _0x125b77=a23_0x34a4df,{id:_0x3e2684}=_0x4214fd[_0x125b77(0x117)],_0xcf3a5d=_0x4214fd['headers'][_0x125b77(0xf3)],[,_0x518db3]=_0xcf3a5d[_0x125b77(0x11a)]('\x20'),_0x3db916=(0x0,jsonwebtoken_1[_0x125b77(0x103)])(_0x518db3,auth_1[_0x125b77(0x10f)][_0x125b77(0x118)]),{id:_0x4b8ff9,profile:_0x3f14a5,companyId:_0x1e338b}=_0x3db916,_0xbbe679=await User_1[_0x125b77(0x10f)][_0x125b77(0x10a)](_0x4b8ff9),_0x67fbe9=await Company_1[_0x125b77(0x10f)][_0x125b77(0x10a)](_0x1e338b),_0x71ad57=_0x67fbe9[_0x125b77(0xf0)];if(_0xbbe679['super']===!![]){const _0x1ecd9f=await(0x0,ShowPlanService_1[_0x125b77(0x10f)])(_0x3e2684);return _0x51c2c9['status'](0xc8)[_0x125b77(0x112)](_0x1ecd9f);}else{if(_0x3e2684!==_0x71ad57[_0x125b77(0x104)]())return _0x51c2c9[_0x125b77(0x10b)](0x190)[_0x125b77(0x112)]({'error':_0x125b77(0xe6)});else{if(_0x3e2684===_0x71ad57[_0x125b77(0x104)]()){const _0x2497f3=await(0x0,ShowPlanService_1[_0x125b77(0x10f)])(_0x3e2684);return _0x51c2c9['status'](0xc8)[_0x125b77(0x112)](_0x2497f3);}}}};exports[a23_0x34a4df(0x102)]=show;const update=async(_0x275c53,_0x86dedd)=>{const _0x2dcf48=a23_0x34a4df,_0x5506c8=_0x275c53[_0x2dcf48(0x114)],_0x111c0e=Yup[_0x2dcf48(0xed)]()[_0x2dcf48(0xf2)]({'name':Yup[_0x2dcf48(0xfb)]()});try{await _0x111c0e[_0x2dcf48(0xf9)](_0x5506c8);}catch(_0x32e71c){throw new AppError_1['default'](_0x32e71c[_0x2dcf48(0xef)]);}const {id:_0x1e5b31,name:_0x204956,users:_0x54a5b1,connections:_0x5ee511,queues:_0x23b880,amount:_0x91f8a8,useWhatsapp:_0x3e33f4,useFacebook:_0x3a33b8,useInstagram:_0x18ef54,useCampaigns:_0x2f94a1,useSchedules:_0xf8d33d,useInternalChat:_0x41f87a,useExternalApi:_0x1d1c2c,useKanban:_0x58b166}=_0x5506c8,_0x7385c7=_0x275c53['headers'][_0x2dcf48(0xf3)],[,_0x557c93]=_0x7385c7['split']('\x20'),_0xced013=(0x0,jsonwebtoken_1['verify'])(_0x557c93,auth_1['default']['secret']),{id:_0x497372,profile:_0x354c44,companyId:_0x34e23d}=_0xced013,_0x320344=await User_1[_0x2dcf48(0x10f)][_0x2dcf48(0x10a)](_0x497372),_0x223bb1=await Company_1[_0x2dcf48(0x10f)][_0x2dcf48(0x10a)](_0x34e23d),_0x101e1e=_0x223bb1[_0x2dcf48(0xf0)];if(_0x320344[_0x2dcf48(0x11c)]===!![]){const _0x15230b=await(0x0,UpdatePlanService_1['default'])({'id':_0x1e5b31,'name':_0x204956,'users':_0x54a5b1,'connections':_0x5ee511,'queues':_0x23b880,'amount':_0x91f8a8,'useWhatsapp':_0x3e33f4,'useFacebook':_0x3a33b8,'useInstagram':_0x18ef54,'useCampaigns':_0x2f94a1,'useSchedules':_0xf8d33d,'useInternalChat':_0x41f87a,'useExternalApi':_0x1d1c2c,'useKanban':_0x58b166});return _0x86dedd[_0x2dcf48(0x10b)](0xc8)[_0x2dcf48(0x112)](_0x15230b);}else{if(_0x101e1e[_0x2dcf48(0x104)]()!==_0x1e5b31)return _0x86dedd[_0x2dcf48(0x10b)](0x190)[_0x2dcf48(0x112)]({'error':_0x2dcf48(0xe6)});}};exports['update']=update;function a23_0x54eb(){const _0x24d870=['default','name','get','json','__esModule','body','../config/auth','136684BpXiID','params','secret','store','split','__importStar','super','../services/PlanService/ShowPlanService','yup','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','hasOwnProperty','202950lbNnxR','../models/User','configurable','__createBinding','../services/PlanService/ListPlansService','object','__setModuleDefault','message','planId','headers','shape','authorization','145SaOhjq','../models/Plan','2419065oskFTo','prototype','defineProperty','validate','query','string','853763NznxYG','list','update','index','7632792fPrdAr','getOwnPropertyDescriptor','show','verify','toString','writable','9156420CcPRxn','remove','create','__importDefault','findByPk','status','jsonwebtoken','840734oQOdTy','../errors/AppError'];a23_0x54eb=function(){return _0x24d870;};return a23_0x54eb();}const remove=async(_0x451fe5,_0x240910)=>{const _0x1f395a=a23_0x34a4df,{id:_0x3f6137}=_0x451fe5[_0x1f395a(0x117)],_0x294e77=_0x451fe5[_0x1f395a(0xf1)][_0x1f395a(0xf3)],[,_0x2f8766]=_0x294e77[_0x1f395a(0x11a)]('\x20'),_0x2e2758=(0x0,jsonwebtoken_1[_0x1f395a(0x103)])(_0x2f8766,auth_1[_0x1f395a(0x10f)]['secret']),{id:_0x452421,profile:_0x2c033f,companyId:_0x13001c}=_0x2e2758,_0x13e6b6=await User_1[_0x1f395a(0x10f)][_0x1f395a(0x10a)](_0x452421);if(_0x13e6b6[_0x1f395a(0x11c)]===!![]){const _0x141c2e=await(0x0,DeletePlanService_1[_0x1f395a(0x10f)])(_0x3f6137);return _0x240910[_0x1f395a(0x10b)](0xc8)[_0x1f395a(0x112)](_0x141c2e);}else{if(_0x13001c['toString']()!==_0x3f6137)return _0x240910[_0x1f395a(0x10b)](0x190)[_0x1f395a(0x112)]({'error':'Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!'});}};exports[a23_0x34a4df(0x107)]=remove;