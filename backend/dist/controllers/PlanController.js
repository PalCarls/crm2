'use strict';const a23_0x1f3f79=a23_0xdc51;(function(_0x4290c6,_0xb68d26){const _0x4229d5=a23_0xdc51,_0x18fc9b=_0x4290c6();while(!![]){try{const _0xf067f8=parseInt(_0x4229d5(0x9b))/0x1*(-parseInt(_0x4229d5(0x89))/0x2)+-parseInt(_0x4229d5(0x94))/0x3+-parseInt(_0x4229d5(0x7a))/0x4+parseInt(_0x4229d5(0x7d))/0x5*(-parseInt(_0x4229d5(0x82))/0x6)+-parseInt(_0x4229d5(0xa2))/0x7*(-parseInt(_0x4229d5(0x84))/0x8)+-parseInt(_0x4229d5(0x92))/0x9+parseInt(_0x4229d5(0x86))/0xa;if(_0xf067f8===_0xb68d26)break;else _0x18fc9b['push'](_0x18fc9b['shift']());}catch(_0x13fd52){_0x18fc9b['push'](_0x18fc9b['shift']());}}}(a23_0x44bf,0x9c274));var __createBinding=this&&this[a23_0x1f3f79(0x85)]||(Object['create']?function(_0x2e1de1,_0x5db622,_0x4bd5d1,_0x8d47fe){const _0x20726e=a23_0x1f3f79;if(_0x8d47fe===undefined)_0x8d47fe=_0x4bd5d1;var _0x285bd5=Object[_0x20726e(0x9d)](_0x5db622,_0x4bd5d1);(!_0x285bd5||(_0x20726e(0x81)in _0x285bd5?!_0x5db622['__esModule']:_0x285bd5['writable']||_0x285bd5[_0x20726e(0x8a)]))&&(_0x285bd5={'enumerable':!![],'get':function(){return _0x5db622[_0x4bd5d1];}}),Object['defineProperty'](_0x2e1de1,_0x8d47fe,_0x285bd5);}:function(_0x27f1b8,_0x18cc2f,_0x43e16f,_0x11342e){if(_0x11342e===undefined)_0x11342e=_0x43e16f;_0x27f1b8[_0x11342e]=_0x18cc2f[_0x43e16f];}),__setModuleDefault=this&&this[a23_0x1f3f79(0x80)]||(Object[a23_0x1f3f79(0x75)]?function(_0x5be99c,_0x5b4d36){const _0x2de790=a23_0x1f3f79;Object['defineProperty'](_0x5be99c,_0x2de790(0x69),{'enumerable':!![],'value':_0x5b4d36});}:function(_0x4bc058,_0x3451e7){const _0x4ed40d=a23_0x1f3f79;_0x4bc058[_0x4ed40d(0x69)]=_0x3451e7;}),__importStar=this&&this[a23_0x1f3f79(0x7b)]||function(_0x709f68){const _0x2dbb19=a23_0x1f3f79;if(_0x709f68&&_0x709f68[_0x2dbb19(0x6e)])return _0x709f68;var _0x18e942={};if(_0x709f68!=null){for(var _0x3084ee in _0x709f68)if(_0x3084ee!==_0x2dbb19(0x69)&&Object['prototype']['hasOwnProperty'][_0x2dbb19(0x88)](_0x709f68,_0x3084ee))__createBinding(_0x18e942,_0x709f68,_0x3084ee);}return __setModuleDefault(_0x18e942,_0x709f68),_0x18e942;},__importDefault=this&&this[a23_0x1f3f79(0x74)]||function(_0x1189af){const _0x57b027=a23_0x1f3f79;return _0x1189af&&_0x1189af[_0x57b027(0x6e)]?_0x1189af:{'default':_0x1189af};};Object['defineProperty'](exports,a23_0x1f3f79(0x6e),{'value':!![]}),exports[a23_0x1f3f79(0x78)]=exports[a23_0x1f3f79(0x95)]=exports[a23_0x1f3f79(0x8b)]=exports[a23_0x1f3f79(0x72)]=exports[a23_0x1f3f79(0x7f)]=exports[a23_0x1f3f79(0x83)]=void 0x0;const jsonwebtoken_1=require(a23_0x1f3f79(0x6b)),auth_1=__importDefault(require(a23_0x1f3f79(0x97))),Yup=__importStar(require(a23_0x1f3f79(0x6c))),AppError_1=__importDefault(require(a23_0x1f3f79(0x70))),Plan_1=__importDefault(require(a23_0x1f3f79(0x7c))),ListPlansService_1=__importDefault(require(a23_0x1f3f79(0x9f))),CreatePlanService_1=__importDefault(require(a23_0x1f3f79(0x9e))),UpdatePlanService_1=__importDefault(require('../services/PlanService/UpdatePlanService')),ShowPlanService_1=__importDefault(require('../services/PlanService/ShowPlanService')),FindAllPlanService_1=__importDefault(require(a23_0x1f3f79(0x6d))),DeletePlanService_1=__importDefault(require(a23_0x1f3f79(0x71))),User_1=__importDefault(require('../models/User')),Company_1=__importDefault(require('../models/Company')),index=async(_0xc49fd0,_0x3e5c3e)=>{const _0x1ce8d4=a23_0x1f3f79,{searchParam:_0x26d418,pageNumber:_0x41db83}=_0xc49fd0[_0x1ce8d4(0x8c)],_0xa273ee=_0xc49fd0[_0x1ce8d4(0x9a)][_0x1ce8d4(0x77)],[,_0x41c844]=_0xa273ee[_0x1ce8d4(0x6a)]('\x20'),_0xcf0fe5=(0x0,jsonwebtoken_1[_0x1ce8d4(0x87)])(_0x41c844,auth_1[_0x1ce8d4(0x69)][_0x1ce8d4(0x6f)]),{id:_0x10899e,profile:_0x40c376,companyId:_0xa49f55}=_0xcf0fe5,_0x2e002a=await User_1[_0x1ce8d4(0x69)][_0x1ce8d4(0x91)](_0x10899e),_0x3fc96a=await Company_1[_0x1ce8d4(0x69)][_0x1ce8d4(0x91)](_0xa49f55),_0x201b28=_0x3fc96a[_0x1ce8d4(0xa1)],_0x5dca0c=await Plan_1[_0x1ce8d4(0x69)][_0x1ce8d4(0x91)](_0x201b28),_0x40b46d=_0x5dca0c[_0x1ce8d4(0x98)];if(_0x2e002a[_0x1ce8d4(0x96)]===!![]){const {plans:_0x179599,count:_0x5df048,hasMore:_0x522093}=await(0x0,ListPlansService_1['default'])({'searchParam':_0x26d418,'pageNumber':_0x41db83});return _0x3e5c3e['json']({'plans':_0x179599,'count':_0x5df048,'hasMore':_0x522093});}else{const {plans:_0x7fb3a3,count:_0x5ac187,hasMore:_0x18d35d}=await(0x0,ListPlansService_1['default'])({'searchParam':_0x40b46d,'pageNumber':_0x41db83});return _0x3e5c3e['json']({'plans':_0x7fb3a3,'count':_0x5ac187,'hasMore':_0x18d35d});}};exports['index']=index;const list=async(_0x31c036,_0x3ba08c)=>{const _0x2f32fa=a23_0x1f3f79,_0x505d9b=await(0x0,FindAllPlanService_1['default'])();return _0x3ba08c[_0x2f32fa(0x76)](0xc8)[_0x2f32fa(0xa0)](_0x505d9b);};exports[a23_0x1f3f79(0x7f)]=list;const store=async(_0x4ed634,_0x55f176)=>{const _0x3e4055=a23_0x1f3f79,_0x546cb1=_0x4ed634['body'],_0x275ddc=Yup[_0x3e4055(0x8e)]()[_0x3e4055(0x93)]({'name':Yup[_0x3e4055(0x8f)]()[_0x3e4055(0x99)]()});try{await _0x275ddc['validate'](_0x546cb1);}catch(_0x284722){throw new AppError_1[(_0x3e4055(0x69))](_0x284722['message']);}const _0x3ea1dc=await(0x0,CreatePlanService_1[_0x3e4055(0x69)])(_0x546cb1);return _0x55f176['status'](0xc8)['json'](_0x3ea1dc);};exports[a23_0x1f3f79(0x72)]=store;const show=async(_0x4cc337,_0x587f2e)=>{const _0x1e1597=a23_0x1f3f79,{id:_0xa464ec}=_0x4cc337[_0x1e1597(0x90)],_0x2cdef0=_0x4cc337[_0x1e1597(0x9a)]['authorization'],[,_0x5d0bf3]=_0x2cdef0['split']('\x20'),_0x41fa76=(0x0,jsonwebtoken_1['verify'])(_0x5d0bf3,auth_1['default']['secret']),{id:_0xaf05cb,profile:_0x1b9b1e,companyId:_0x53e4aa}=_0x41fa76,_0x53b7e3=await User_1[_0x1e1597(0x69)][_0x1e1597(0x91)](_0xaf05cb),_0x16ea41=await Company_1[_0x1e1597(0x69)][_0x1e1597(0x91)](_0x53e4aa),_0x13932e=_0x16ea41[_0x1e1597(0xa1)];if(_0x53b7e3[_0x1e1597(0x96)]===!![]){const _0x4488b7=await(0x0,ShowPlanService_1[_0x1e1597(0x69)])(_0xa464ec);return _0x587f2e['status'](0xc8)[_0x1e1597(0xa0)](_0x4488b7);}else{if(_0xa464ec!==_0x13932e[_0x1e1597(0x8d)]())return _0x587f2e[_0x1e1597(0x76)](0x190)[_0x1e1597(0xa0)]({'error':_0x1e1597(0x73)});else{if(_0xa464ec===_0x13932e[_0x1e1597(0x8d)]()){const _0x285a54=await(0x0,ShowPlanService_1[_0x1e1597(0x69)])(_0xa464ec);return _0x587f2e[_0x1e1597(0x76)](0xc8)[_0x1e1597(0xa0)](_0x285a54);}}}};function a23_0xdc51(_0x3a7a94,_0x186b6e){const _0x44bfeb=a23_0x44bf();return a23_0xdc51=function(_0xdc51e1,_0x190a5f){_0xdc51e1=_0xdc51e1-0x69;let _0x120d8b=_0x44bfeb[_0xdc51e1];return _0x120d8b;},a23_0xdc51(_0x3a7a94,_0x186b6e);}function a23_0x44bf(){const _0x54ed7f=['../config/auth','name','required','headers','9zvaHad','message','getOwnPropertyDescriptor','../services/PlanService/CreatePlanService','../services/PlanService/ListPlansService','json','planId','623EtuSnJ','default','split','jsonwebtoken','yup','../services/PlanService/FindAllPlanService','__esModule','secret','../errors/AppError','../services/PlanService/DeletePlanService','store','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','__importDefault','create','status','authorization','remove','body','2445108MIlEca','__importStar','../models/Plan','950xTRFSu','validate','list','__setModuleDefault','get','4236scUfzc','index','14216YRbAxv','__createBinding','33869560ZUUKRY','verify','call','203938EBWHdx','configurable','show','query','toString','object','string','params','findByPk','2130048lWgUUE','shape','3017085HvOiFV','update','super'];a23_0x44bf=function(){return _0x54ed7f;};return a23_0x44bf();}exports[a23_0x1f3f79(0x8b)]=show;const update=async(_0x39d87e,_0x3a841a)=>{const _0x4dd939=a23_0x1f3f79,_0x1fdb64=_0x39d87e[_0x4dd939(0x79)],_0x52849e=Yup[_0x4dd939(0x8e)]()['shape']({'name':Yup['string']()});try{await _0x52849e[_0x4dd939(0x7e)](_0x1fdb64);}catch(_0x31979f){throw new AppError_1[(_0x4dd939(0x69))](_0x31979f[_0x4dd939(0x9c)]);}const {id:_0x25b627,name:_0x19426a,users:_0x529113,connections:_0x3e3a52,queues:_0x4e2eef,amount:_0x195db8,useWhatsapp:_0x3cbcfd,useFacebook:_0x5b3eab,useInstagram:_0x5bb917,useCampaigns:_0x5be795,useSchedules:_0x4d6d2e,useInternalChat:_0x3526f6,useExternalApi:_0x4cec57,useKanban:_0x5336fe}=_0x1fdb64,_0x3455bf=_0x39d87e[_0x4dd939(0x9a)][_0x4dd939(0x77)],[,_0x4e93ab]=_0x3455bf[_0x4dd939(0x6a)]('\x20'),_0x2181a1=(0x0,jsonwebtoken_1[_0x4dd939(0x87)])(_0x4e93ab,auth_1[_0x4dd939(0x69)][_0x4dd939(0x6f)]),{id:_0x5adad3,profile:_0x369750,companyId:_0x19e9fc}=_0x2181a1,_0x197164=await User_1[_0x4dd939(0x69)][_0x4dd939(0x91)](_0x5adad3),_0x54c96b=await Company_1[_0x4dd939(0x69)]['findByPk'](_0x19e9fc),_0x1819d7=_0x54c96b[_0x4dd939(0xa1)];if(_0x197164['super']===!![]){const _0x379ea7=await(0x0,UpdatePlanService_1[_0x4dd939(0x69)])({'id':_0x25b627,'name':_0x19426a,'users':_0x529113,'connections':_0x3e3a52,'queues':_0x4e2eef,'amount':_0x195db8,'useWhatsapp':_0x3cbcfd,'useFacebook':_0x5b3eab,'useInstagram':_0x5bb917,'useCampaigns':_0x5be795,'useSchedules':_0x4d6d2e,'useInternalChat':_0x3526f6,'useExternalApi':_0x4cec57,'useKanban':_0x5336fe});return _0x3a841a[_0x4dd939(0x76)](0xc8)['json'](_0x379ea7);}else{if(_0x1819d7[_0x4dd939(0x8d)]()!==_0x25b627)return _0x3a841a[_0x4dd939(0x76)](0x190)['json']({'error':'Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!'});}};exports['update']=update;const remove=async(_0x833628,_0x525359)=>{const _0xcc428e=a23_0x1f3f79,{id:_0x1818f8}=_0x833628[_0xcc428e(0x90)],_0x10024f=_0x833628['headers'][_0xcc428e(0x77)],[,_0x319b23]=_0x10024f['split']('\x20'),_0x3be137=(0x0,jsonwebtoken_1[_0xcc428e(0x87)])(_0x319b23,auth_1['default']['secret']),{id:_0x29bd4c,profile:_0x21054d,companyId:_0x91510f}=_0x3be137,_0x27fcf5=await User_1[_0xcc428e(0x69)]['findByPk'](_0x29bd4c);if(_0x27fcf5[_0xcc428e(0x96)]===!![]){const _0x5376d6=await(0x0,DeletePlanService_1[_0xcc428e(0x69)])(_0x1818f8);return _0x525359[_0xcc428e(0x76)](0xc8)[_0xcc428e(0xa0)](_0x5376d6);}else{if(_0x91510f['toString']()!==_0x1818f8)return _0x525359['status'](0x190)[_0xcc428e(0xa0)]({'error':_0xcc428e(0x73)});}};exports['remove']=remove;