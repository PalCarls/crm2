'use strict';const a23_0x571d73=a23_0x4b87;(function(_0x646624,_0x13103c){const _0x1b3c49=a23_0x4b87,_0x4f8501=_0x646624();while(!![]){try{const _0x129fe2=-parseInt(_0x1b3c49(0x10b))/0x1+-parseInt(_0x1b3c49(0x11d))/0x2+parseInt(_0x1b3c49(0x10d))/0x3*(-parseInt(_0x1b3c49(0x115))/0x4)+parseInt(_0x1b3c49(0x111))/0x5+parseInt(_0x1b3c49(0x11c))/0x6+parseInt(_0x1b3c49(0x125))/0x7+parseInt(_0x1b3c49(0x127))/0x8*(parseInt(_0x1b3c49(0x11a))/0x9);if(_0x129fe2===_0x13103c)break;else _0x4f8501['push'](_0x4f8501['shift']());}catch(_0x258d3b){_0x4f8501['push'](_0x4f8501['shift']());}}}(a23_0x1dc7,0xe1bf5));var __createBinding=this&&this[a23_0x571d73(0x113)]||(Object[a23_0x571d73(0x10e)]?function(_0x13ec8e,_0x57d262,_0x4046bf,_0xf1f9a){const _0x24b0fc=a23_0x571d73;if(_0xf1f9a===undefined)_0xf1f9a=_0x4046bf;var _0x4b2abb=Object[_0x24b0fc(0x12d)](_0x57d262,_0x4046bf);(!_0x4b2abb||(_0x24b0fc(0x118)in _0x4b2abb?!_0x57d262[_0x24b0fc(0x12f)]:_0x4b2abb[_0x24b0fc(0x12e)]||_0x4b2abb[_0x24b0fc(0x12a)]))&&(_0x4b2abb={'enumerable':!![],'get':function(){return _0x57d262[_0x4046bf];}}),Object[_0x24b0fc(0x132)](_0x13ec8e,_0xf1f9a,_0x4b2abb);}:function(_0x141f68,_0x3d38b6,_0x2521c3,_0x5cd862){if(_0x5cd862===undefined)_0x5cd862=_0x2521c3;_0x141f68[_0x5cd862]=_0x3d38b6[_0x2521c3];}),__setModuleDefault=this&&this[a23_0x571d73(0x11f)]||(Object[a23_0x571d73(0x10e)]?function(_0x2eea7f,_0x218e98){const _0x4d7222=a23_0x571d73;Object[_0x4d7222(0x132)](_0x2eea7f,_0x4d7222(0x13d),{'enumerable':!![],'value':_0x218e98});}:function(_0x275a46,_0xf3e2a2){const _0x4cc828=a23_0x571d73;_0x275a46[_0x4cc828(0x13d)]=_0xf3e2a2;}),__importStar=this&&this[a23_0x571d73(0x112)]||function(_0x3db74d){const _0x1e073a=a23_0x571d73;if(_0x3db74d&&_0x3db74d[_0x1e073a(0x12f)])return _0x3db74d;var _0x16c743={};if(_0x3db74d!=null){for(var _0x4a6b85 in _0x3db74d)if(_0x4a6b85!==_0x1e073a(0x13d)&&Object['prototype']['hasOwnProperty'][_0x1e073a(0x117)](_0x3db74d,_0x4a6b85))__createBinding(_0x16c743,_0x3db74d,_0x4a6b85);}return __setModuleDefault(_0x16c743,_0x3db74d),_0x16c743;},__importDefault=this&&this[a23_0x571d73(0x11e)]||function(_0x5aad59){return _0x5aad59&&_0x5aad59['__esModule']?_0x5aad59:{'default':_0x5aad59};};function a23_0x1dc7(){const _0x8b8409=['defineProperty','required','verify','../config/auth','update','super','params','secret','store','planId','validate','default','headers','../models/User','body','remove','status','findByPk','1578330GsmrJL','query','38202xgJMIx','create','authorization','shape','8056975AseJSv','__importStar','__createBinding','message','268JdItfI','toString','call','get','json','27BTAWlP','index','9262332aXVKLN','2864886ExEOYe','__importDefault','__setModuleDefault','string','../services/PlanService/ShowPlanService','jsonwebtoken','list','split','6101872CvGdXC','object','2031464fmQmLF','../models/Plan','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','configurable','../services/PlanService/CreatePlanService','../errors/AppError','getOwnPropertyDescriptor','writable','__esModule','../services/PlanService/UpdatePlanService','../models/Company'];a23_0x1dc7=function(){return _0x8b8409;};return a23_0x1dc7();}Object[a23_0x571d73(0x132)](exports,a23_0x571d73(0x12f),{'value':!![]}),exports['remove']=exports[a23_0x571d73(0x136)]=exports['show']=exports[a23_0x571d73(0x13a)]=exports[a23_0x571d73(0x123)]=exports[a23_0x571d73(0x11b)]=void 0x0;const jsonwebtoken_1=require(a23_0x571d73(0x122)),auth_1=__importDefault(require(a23_0x571d73(0x135))),Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a23_0x571d73(0x12c))),Plan_1=__importDefault(require(a23_0x571d73(0x128))),ListPlansService_1=__importDefault(require('../services/PlanService/ListPlansService')),CreatePlanService_1=__importDefault(require(a23_0x571d73(0x12b))),UpdatePlanService_1=__importDefault(require(a23_0x571d73(0x130))),ShowPlanService_1=__importDefault(require(a23_0x571d73(0x121))),FindAllPlanService_1=__importDefault(require('../services/PlanService/FindAllPlanService')),DeletePlanService_1=__importDefault(require('../services/PlanService/DeletePlanService')),User_1=__importDefault(require(a23_0x571d73(0x13f))),Company_1=__importDefault(require(a23_0x571d73(0x131))),index=async(_0x43bcec,_0x15134b)=>{const _0x583e8c=a23_0x571d73,{searchParam:_0x2a021b,pageNumber:_0x18f406}=_0x43bcec[_0x583e8c(0x10c)],_0x381a4d=_0x43bcec[_0x583e8c(0x13e)][_0x583e8c(0x10f)],[,_0x191d55]=_0x381a4d['split']('\x20'),_0x4fd3ca=(0x0,jsonwebtoken_1[_0x583e8c(0x134)])(_0x191d55,auth_1['default'][_0x583e8c(0x139)]),{id:_0x4d541f,profile:_0x23bb84,companyId:_0x511345}=_0x4fd3ca,_0x1060d2=await User_1['default'][_0x583e8c(0x10a)](_0x4d541f),_0x5aa594=await Company_1[_0x583e8c(0x13d)][_0x583e8c(0x10a)](_0x511345),_0x41af54=_0x5aa594[_0x583e8c(0x13b)],_0x232935=await Plan_1[_0x583e8c(0x13d)]['findByPk'](_0x41af54),_0x98f92c=_0x232935['name'];if(_0x1060d2[_0x583e8c(0x137)]===!![]){const {plans:_0x19d2d7,count:_0x4a4974,hasMore:_0x369cf1}=await(0x0,ListPlansService_1['default'])({'searchParam':_0x2a021b,'pageNumber':_0x18f406});return _0x15134b['json']({'plans':_0x19d2d7,'count':_0x4a4974,'hasMore':_0x369cf1});}else{const {plans:_0x360201,count:_0x57399f,hasMore:_0x18d4fe}=await(0x0,ListPlansService_1['default'])({'searchParam':_0x98f92c,'pageNumber':_0x18f406});return _0x15134b[_0x583e8c(0x119)]({'plans':_0x360201,'count':_0x57399f,'hasMore':_0x18d4fe});}};exports[a23_0x571d73(0x11b)]=index;const list=async(_0x5c2b84,_0x1367b3)=>{const _0x44bc3b=a23_0x571d73,_0x367d90=await(0x0,FindAllPlanService_1[_0x44bc3b(0x13d)])();return _0x1367b3[_0x44bc3b(0x109)](0xc8)['json'](_0x367d90);};exports[a23_0x571d73(0x123)]=list;const store=async(_0x1b5d03,_0x271c67)=>{const _0x344f8c=a23_0x571d73,_0xbe2d5f=_0x1b5d03['body'],_0x51aff9=Yup[_0x344f8c(0x126)]()[_0x344f8c(0x110)]({'name':Yup[_0x344f8c(0x120)]()[_0x344f8c(0x133)]()});try{await _0x51aff9[_0x344f8c(0x13c)](_0xbe2d5f);}catch(_0x43f25f){throw new AppError_1[(_0x344f8c(0x13d))](_0x43f25f[_0x344f8c(0x114)]);}const _0x287475=await(0x0,CreatePlanService_1[_0x344f8c(0x13d)])(_0xbe2d5f);return _0x271c67[_0x344f8c(0x109)](0xc8)[_0x344f8c(0x119)](_0x287475);};exports[a23_0x571d73(0x13a)]=store;function a23_0x4b87(_0x3b8fdf,_0x3cb953){const _0x1dc7a7=a23_0x1dc7();return a23_0x4b87=function(_0x4b87cd,_0x2b03da){_0x4b87cd=_0x4b87cd-0x107;let _0x42e14c=_0x1dc7a7[_0x4b87cd];return _0x42e14c;},a23_0x4b87(_0x3b8fdf,_0x3cb953);}const show=async(_0x2aacc3,_0x8e659e)=>{const _0x405a8b=a23_0x571d73,{id:_0x596133}=_0x2aacc3[_0x405a8b(0x138)],_0x4f429e=_0x2aacc3['headers'][_0x405a8b(0x10f)],[,_0x3956da]=_0x4f429e['split']('\x20'),_0x382415=(0x0,jsonwebtoken_1[_0x405a8b(0x134)])(_0x3956da,auth_1[_0x405a8b(0x13d)]['secret']),{id:_0x1423d0,profile:_0x4680ac,companyId:_0x4190db}=_0x382415,_0x1ec431=await User_1[_0x405a8b(0x13d)][_0x405a8b(0x10a)](_0x1423d0),_0x51a8eb=await Company_1[_0x405a8b(0x13d)][_0x405a8b(0x10a)](_0x4190db),_0x4e9428=_0x51a8eb[_0x405a8b(0x13b)];if(_0x1ec431[_0x405a8b(0x137)]===!![]){const _0x46f443=await(0x0,ShowPlanService_1['default'])(_0x596133);return _0x8e659e[_0x405a8b(0x109)](0xc8)[_0x405a8b(0x119)](_0x46f443);}else{if(_0x596133!==_0x4e9428[_0x405a8b(0x116)]())return _0x8e659e['status'](0x190)[_0x405a8b(0x119)]({'error':'Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!'});else{if(_0x596133===_0x4e9428[_0x405a8b(0x116)]()){const _0x1dc766=await(0x0,ShowPlanService_1['default'])(_0x596133);return _0x8e659e[_0x405a8b(0x109)](0xc8)[_0x405a8b(0x119)](_0x1dc766);}}}};exports['show']=show;const update=async(_0xae4e78,_0xb296c0)=>{const _0x52640a=a23_0x571d73,_0x46d1bb=_0xae4e78[_0x52640a(0x107)],_0x1fc13f=Yup[_0x52640a(0x126)]()[_0x52640a(0x110)]({'name':Yup[_0x52640a(0x120)]()});try{await _0x1fc13f[_0x52640a(0x13c)](_0x46d1bb);}catch(_0xbb77a7){throw new AppError_1[(_0x52640a(0x13d))](_0xbb77a7[_0x52640a(0x114)]);}const {id:_0x37f544,name:_0x3f0a03,users:_0x215ca9,connections:_0xce40f0,queues:_0x19482c,amount:_0x5eff5e,useWhatsapp:_0x35e80e,useFacebook:_0x5bd5c3,useInstagram:_0x56871b,useCampaigns:_0x5b50f2,useSchedules:_0x2285ea,useInternalChat:_0x24ebf7,useExternalApi:_0x427b8d}=_0x46d1bb,_0x33b9ac=_0xae4e78[_0x52640a(0x13e)][_0x52640a(0x10f)],[,_0x2658b0]=_0x33b9ac[_0x52640a(0x124)]('\x20'),_0x47b810=(0x0,jsonwebtoken_1[_0x52640a(0x134)])(_0x2658b0,auth_1[_0x52640a(0x13d)][_0x52640a(0x139)]),{id:_0x4becb2,profile:_0x405b1e,companyId:_0x3c8314}=_0x47b810,_0x308732=await User_1['default'][_0x52640a(0x10a)](_0x4becb2),_0x174649=await Company_1['default']['findByPk'](_0x3c8314),_0x4ab99b=_0x174649[_0x52640a(0x13b)];if(_0x308732[_0x52640a(0x137)]===!![]){const _0x431659=await(0x0,UpdatePlanService_1[_0x52640a(0x13d)])({'id':_0x37f544,'name':_0x3f0a03,'users':_0x215ca9,'connections':_0xce40f0,'queues':_0x19482c,'amount':_0x5eff5e,'useWhatsapp':_0x35e80e,'useFacebook':_0x5bd5c3,'useInstagram':_0x56871b,'useCampaigns':_0x5b50f2,'useSchedules':_0x2285ea,'useInternalChat':_0x24ebf7,'useExternalApi':_0x427b8d});return _0xb296c0[_0x52640a(0x109)](0xc8)['json'](_0x431659);}else{if(_0x4ab99b['toString']()!==_0x37f544)return _0xb296c0[_0x52640a(0x109)](0x190)['json']({'error':_0x52640a(0x129)});}};exports[a23_0x571d73(0x136)]=update;const remove=async(_0x36aac7,_0x39d53d)=>{const _0x41a861=a23_0x571d73,{id:_0x40fada}=_0x36aac7[_0x41a861(0x138)],_0x28d574=_0x36aac7['headers'][_0x41a861(0x10f)],[,_0x51f187]=_0x28d574[_0x41a861(0x124)]('\x20'),_0x1c2a79=(0x0,jsonwebtoken_1['verify'])(_0x51f187,auth_1[_0x41a861(0x13d)]['secret']),{id:_0xe6f443,profile:_0xc8cb97,companyId:_0x4192e2}=_0x1c2a79,_0x57ab30=await User_1[_0x41a861(0x13d)][_0x41a861(0x10a)](_0xe6f443);if(_0x57ab30['super']===!![]){const _0x10f8a2=await(0x0,DeletePlanService_1[_0x41a861(0x13d)])(_0x40fada);return _0x39d53d[_0x41a861(0x109)](0xc8)[_0x41a861(0x119)](_0x10f8a2);}else{if(_0x4192e2[_0x41a861(0x116)]()!==_0x40fada)return _0x39d53d[_0x41a861(0x109)](0x190)[_0x41a861(0x119)]({'error':'Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!'});}};exports[a23_0x571d73(0x108)]=remove;