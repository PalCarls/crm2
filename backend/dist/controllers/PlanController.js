'use strict';function a24_0x25d5(_0x372dce,_0x38554f){const _0x1ecadd=a24_0x1eca();return a24_0x25d5=function(_0x25d589,_0x222d6d){_0x25d589=_0x25d589-0x1df;let _0x6cfb94=_0x1ecadd[_0x25d589];return _0x6cfb94;},a24_0x25d5(_0x372dce,_0x38554f);}const a24_0x3d82df=a24_0x25d5;(function(_0xf4a8dc,_0x4e27dc){const _0x5b239f=a24_0x25d5,_0x31c054=_0xf4a8dc();while(!![]){try{const _0x389c6f=-parseInt(_0x5b239f(0x1f0))/0x1+-parseInt(_0x5b239f(0x213))/0x2+-parseInt(_0x5b239f(0x1f6))/0x3*(-parseInt(_0x5b239f(0x1e9))/0x4)+-parseInt(_0x5b239f(0x1e0))/0x5+-parseInt(_0x5b239f(0x206))/0x6+-parseInt(_0x5b239f(0x20c))/0x7+parseInt(_0x5b239f(0x1f4))/0x8*(parseInt(_0x5b239f(0x1f9))/0x9);if(_0x389c6f===_0x4e27dc)break;else _0x31c054['push'](_0x31c054['shift']());}catch(_0x592a69){_0x31c054['push'](_0x31c054['shift']());}}}(a24_0x1eca,0x6dec3));var __createBinding=this&&this[a24_0x3d82df(0x1ea)]||(Object[a24_0x3d82df(0x209)]?function(_0x23a4bb,_0x2bb326,_0x4857c7,_0x3d53ba){const _0x65288f=a24_0x3d82df;if(_0x3d53ba===undefined)_0x3d53ba=_0x4857c7;var _0x3425e8=Object['getOwnPropertyDescriptor'](_0x2bb326,_0x4857c7);(!_0x3425e8||(_0x65288f(0x1ee)in _0x3425e8?!_0x2bb326[_0x65288f(0x204)]:_0x3425e8['writable']||_0x3425e8[_0x65288f(0x207)]))&&(_0x3425e8={'enumerable':!![],'get':function(){return _0x2bb326[_0x4857c7];}}),Object[_0x65288f(0x1f3)](_0x23a4bb,_0x3d53ba,_0x3425e8);}:function(_0x101d8c,_0x163ef5,_0x40a6d4,_0x592d1f){if(_0x592d1f===undefined)_0x592d1f=_0x40a6d4;_0x101d8c[_0x592d1f]=_0x163ef5[_0x40a6d4];}),__setModuleDefault=this&&this[a24_0x3d82df(0x200)]||(Object[a24_0x3d82df(0x209)]?function(_0x38ef59,_0x5455ee){const _0xece7f8=a24_0x3d82df;Object['defineProperty'](_0x38ef59,_0xece7f8(0x20f),{'enumerable':!![],'value':_0x5455ee});}:function(_0x459bc5,_0x441f5e){const _0x280a13=a24_0x3d82df;_0x459bc5[_0x280a13(0x20f)]=_0x441f5e;}),__importStar=this&&this[a24_0x3d82df(0x1ef)]||function(_0x3f8a7b){const _0x42e137=a24_0x3d82df;if(_0x3f8a7b&&_0x3f8a7b[_0x42e137(0x204)])return _0x3f8a7b;var _0x5c700d={};if(_0x3f8a7b!=null){for(var _0x2cf4f0 in _0x3f8a7b)if(_0x2cf4f0!==_0x42e137(0x20f)&&Object[_0x42e137(0x1fa)]['hasOwnProperty'][_0x42e137(0x1f7)](_0x3f8a7b,_0x2cf4f0))__createBinding(_0x5c700d,_0x3f8a7b,_0x2cf4f0);}return __setModuleDefault(_0x5c700d,_0x3f8a7b),_0x5c700d;},__importDefault=this&&this[a24_0x3d82df(0x1fd)]||function(_0x2ba956){const _0x2bbf75=a24_0x3d82df;return _0x2ba956&&_0x2ba956[_0x2bbf75(0x204)]?_0x2ba956:{'default':_0x2ba956};};Object['defineProperty'](exports,a24_0x3d82df(0x204),{'value':!![]}),exports['remove']=exports[a24_0x3d82df(0x1e8)]=exports[a24_0x3d82df(0x202)]=exports[a24_0x3d82df(0x216)]=exports[a24_0x3d82df(0x20b)]=exports['index']=void 0x0;const jsonwebtoken_1=require(a24_0x3d82df(0x1eb)),auth_1=__importDefault(require(a24_0x3d82df(0x1e6))),Yup=__importStar(require(a24_0x3d82df(0x205))),AppError_1=__importDefault(require(a24_0x3d82df(0x215))),Plan_1=__importDefault(require(a24_0x3d82df(0x210))),ListPlansService_1=__importDefault(require('../services/PlanService/ListPlansService')),CreatePlanService_1=__importDefault(require(a24_0x3d82df(0x214))),UpdatePlanService_1=__importDefault(require(a24_0x3d82df(0x20e))),ShowPlanService_1=__importDefault(require('../services/PlanService/ShowPlanService')),FindAllPlanService_1=__importDefault(require(a24_0x3d82df(0x1ff))),DeletePlanService_1=__importDefault(require(a24_0x3d82df(0x201))),User_1=__importDefault(require(a24_0x3d82df(0x1fb))),Company_1=__importDefault(require('../models/Company')),index=async(_0x5256ca,_0x129821)=>{const _0x50a616=a24_0x3d82df,{searchParam:_0x27b988,pageNumber:_0x2334f9}=_0x5256ca[_0x50a616(0x1fc)],_0x3568c6=_0x5256ca[_0x50a616(0x1ec)]['authorization'],[,_0x230ea3]=_0x3568c6[_0x50a616(0x1e1)]('\x20'),_0xc545f4=(0x0,jsonwebtoken_1[_0x50a616(0x211)])(_0x230ea3,auth_1[_0x50a616(0x20f)][_0x50a616(0x1df)]),{id:_0x1aaa3b,profile:_0x3abf87,companyId:_0x372f63}=_0xc545f4,_0x4ae062=await User_1[_0x50a616(0x20f)][_0x50a616(0x1f8)](_0x1aaa3b),_0x1e9d53=await Company_1[_0x50a616(0x20f)][_0x50a616(0x1f8)](_0x372f63),_0x3efab4=_0x1e9d53[_0x50a616(0x1e2)],_0x16f109=await Plan_1[_0x50a616(0x20f)][_0x50a616(0x1f8)](_0x3efab4),_0x4e6217=_0x16f109[_0x50a616(0x1f5)];if(_0x4ae062[_0x50a616(0x1e4)]===!![]){const {plans:_0x560d0c,count:_0x35029a,hasMore:_0x13ab45}=await(0x0,ListPlansService_1[_0x50a616(0x20f)])({'searchParam':_0x27b988,'pageNumber':_0x2334f9});return _0x129821[_0x50a616(0x1e3)]({'plans':_0x560d0c,'count':_0x35029a,'hasMore':_0x13ab45});}else{const {plans:_0x3b7171,count:_0x13c499,hasMore:_0x298409}=await(0x0,ListPlansService_1[_0x50a616(0x20f)])({'searchParam':_0x4e6217,'pageNumber':_0x2334f9});return _0x129821[_0x50a616(0x1e3)]({'plans':_0x3b7171,'count':_0x13c499,'hasMore':_0x298409});}};exports['index']=index;function a24_0x1eca(){const _0x9dc4ee=['configurable','required','create','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','list','4296285WABybW','authorization','../services/PlanService/UpdatePlanService','default','../models/Plan','verify','params','539992ZTxRRS','../services/PlanService/CreatePlanService','../errors/AppError','store','remove','toString','secret','880235dRRNSv','split','planId','json','super','shape','../config/auth','validate','update','36SCxYyM','__createBinding','jsonwebtoken','headers','status','get','__importStar','472305gIGBkz','message','string','defineProperty','41896qTqYVa','name','233403JcMlhg','call','findByPk','2817shZlRv','prototype','../models/User','query','__importDefault','body','../services/PlanService/FindAllPlanService','__setModuleDefault','../services/PlanService/DeletePlanService','show','object','__esModule','yup','2142264kaYzqI'];a24_0x1eca=function(){return _0x9dc4ee;};return a24_0x1eca();}const list=async(_0x60b662,_0x4b2fed)=>{const _0x272549=a24_0x3d82df,_0x19f196=await(0x0,FindAllPlanService_1['default'])();return _0x4b2fed[_0x272549(0x1ed)](0xc8)[_0x272549(0x1e3)](_0x19f196);};exports[a24_0x3d82df(0x20b)]=list;const store=async(_0x3e99ff,_0x2d83d1)=>{const _0x1df766=a24_0x3d82df,_0x2bd9b5=_0x3e99ff[_0x1df766(0x1fe)],_0x3fe5ec=Yup[_0x1df766(0x203)]()[_0x1df766(0x1e5)]({'name':Yup[_0x1df766(0x1f2)]()[_0x1df766(0x208)]()});try{await _0x3fe5ec[_0x1df766(0x1e7)](_0x2bd9b5);}catch(_0x1938d3){throw new AppError_1[(_0x1df766(0x20f))](_0x1938d3[_0x1df766(0x1f1)]);}const _0x48101d=await(0x0,CreatePlanService_1[_0x1df766(0x20f)])(_0x2bd9b5);return _0x2d83d1['status'](0xc8)[_0x1df766(0x1e3)](_0x48101d);};exports[a24_0x3d82df(0x216)]=store;const show=async(_0x337251,_0x2f2e0e)=>{const _0x108a26=a24_0x3d82df,{id:_0x583451}=_0x337251[_0x108a26(0x212)],_0x5cd437=_0x337251['headers']['authorization'],[,_0x1babab]=_0x5cd437['split']('\x20'),_0x30517b=(0x0,jsonwebtoken_1[_0x108a26(0x211)])(_0x1babab,auth_1[_0x108a26(0x20f)][_0x108a26(0x1df)]),{id:_0x3ad418,profile:_0x518297,companyId:_0x3a735d}=_0x30517b,_0x504bf6=await User_1[_0x108a26(0x20f)][_0x108a26(0x1f8)](_0x3ad418),_0x3da2da=await Company_1[_0x108a26(0x20f)]['findByPk'](_0x3a735d),_0x584620=_0x3da2da[_0x108a26(0x1e2)];if(_0x504bf6[_0x108a26(0x1e4)]===!![]){const _0x2aa6e1=await(0x0,ShowPlanService_1['default'])(_0x583451);return _0x2f2e0e[_0x108a26(0x1ed)](0xc8)[_0x108a26(0x1e3)](_0x2aa6e1);}else{if(_0x583451!==_0x584620[_0x108a26(0x218)]())return _0x2f2e0e[_0x108a26(0x1ed)](0x190)[_0x108a26(0x1e3)]({'error':_0x108a26(0x20a)});else{if(_0x583451===_0x584620[_0x108a26(0x218)]()){const _0x3c2fd3=await(0x0,ShowPlanService_1[_0x108a26(0x20f)])(_0x583451);return _0x2f2e0e['status'](0xc8)[_0x108a26(0x1e3)](_0x3c2fd3);}}}};exports[a24_0x3d82df(0x202)]=show;const update=async(_0x339faf,_0xc04626)=>{const _0x1f282f=a24_0x3d82df,_0x22a143=_0x339faf[_0x1f282f(0x1fe)],_0x29b238=Yup[_0x1f282f(0x203)]()[_0x1f282f(0x1e5)]({'name':Yup[_0x1f282f(0x1f2)]()});try{await _0x29b238[_0x1f282f(0x1e7)](_0x22a143);}catch(_0x27e406){throw new AppError_1[(_0x1f282f(0x20f))](_0x27e406[_0x1f282f(0x1f1)]);}const {id:_0x1eefce,name:_0x5c5d41,users:_0x53935b,connections:_0xc42f33,queues:_0x4054c9,amount:_0x40079e,useWhatsapp:_0x18c0ba,useFacebook:_0x26f921,useInstagram:_0x188693,useCampaigns:_0x511cb2,useSchedules:_0x13fc4e,useInternalChat:_0x13beb5,useExternalApi:_0x216dd1,useKanban:_0x3b580f}=_0x22a143,_0x16c30c=_0x339faf[_0x1f282f(0x1ec)][_0x1f282f(0x20d)],[,_0x4d9dde]=_0x16c30c['split']('\x20'),_0x18f4cf=(0x0,jsonwebtoken_1[_0x1f282f(0x211)])(_0x4d9dde,auth_1['default']['secret']),{id:_0x5f53de,profile:_0x3194c,companyId:_0x37d3e6}=_0x18f4cf,_0x3e3dae=await User_1[_0x1f282f(0x20f)][_0x1f282f(0x1f8)](_0x5f53de),_0x5cd8b6=await Company_1[_0x1f282f(0x20f)][_0x1f282f(0x1f8)](_0x37d3e6),_0x320017=_0x5cd8b6['planId'];if(_0x3e3dae['super']===!![]){const _0x3b3a10=await(0x0,UpdatePlanService_1['default'])({'id':_0x1eefce,'name':_0x5c5d41,'users':_0x53935b,'connections':_0xc42f33,'queues':_0x4054c9,'amount':_0x40079e,'useWhatsapp':_0x18c0ba,'useFacebook':_0x26f921,'useInstagram':_0x188693,'useCampaigns':_0x511cb2,'useSchedules':_0x13fc4e,'useInternalChat':_0x13beb5,'useExternalApi':_0x216dd1,'useKanban':_0x3b580f});return _0xc04626['status'](0xc8)[_0x1f282f(0x1e3)](_0x3b3a10);}else{if(_0x320017[_0x1f282f(0x218)]()!==_0x1eefce)return _0xc04626[_0x1f282f(0x1ed)](0x190)[_0x1f282f(0x1e3)]({'error':_0x1f282f(0x20a)});}};exports[a24_0x3d82df(0x1e8)]=update;const remove=async(_0x654aa2,_0x1025fa)=>{const _0x19c717=a24_0x3d82df,{id:_0x44634c}=_0x654aa2[_0x19c717(0x212)],_0x355120=_0x654aa2['headers'][_0x19c717(0x20d)],[,_0x2c6009]=_0x355120[_0x19c717(0x1e1)]('\x20'),_0x1ee8f2=(0x0,jsonwebtoken_1[_0x19c717(0x211)])(_0x2c6009,auth_1[_0x19c717(0x20f)][_0x19c717(0x1df)]),{id:_0x5eb618,profile:_0x46bf71,companyId:_0x5068d6}=_0x1ee8f2,_0xfbc80a=await User_1[_0x19c717(0x20f)]['findByPk'](_0x5eb618);if(_0xfbc80a[_0x19c717(0x1e4)]===!![]){const _0xe1a6aa=await(0x0,DeletePlanService_1[_0x19c717(0x20f)])(_0x44634c);return _0x1025fa[_0x19c717(0x1ed)](0xc8)[_0x19c717(0x1e3)](_0xe1a6aa);}else{if(_0x5068d6[_0x19c717(0x218)]()!==_0x44634c)return _0x1025fa[_0x19c717(0x1ed)](0x190)['json']({'error':_0x19c717(0x20a)});}};exports[a24_0x3d82df(0x217)]=remove;