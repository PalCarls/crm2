'use strict';const a24_0xa31c73=a24_0x11ca;function a24_0x11ca(_0x1194c5,_0x13e7ef){const _0x4f2eba=a24_0x4f2e();return a24_0x11ca=function(_0x11ca58,_0x38adc7){_0x11ca58=_0x11ca58-0x1be;let _0x50c1de=_0x4f2eba[_0x11ca58];return _0x50c1de;},a24_0x11ca(_0x1194c5,_0x13e7ef);}(function(_0x3fb42d,_0x57ef58){const _0x4820e0=a24_0x11ca,_0x25698f=_0x3fb42d();while(!![]){try{const _0x2856aa=-parseInt(_0x4820e0(0x1c8))/0x1+parseInt(_0x4820e0(0x1d6))/0x2*(-parseInt(_0x4820e0(0x1db))/0x3)+-parseInt(_0x4820e0(0x1ee))/0x4+-parseInt(_0x4820e0(0x1c3))/0x5+parseInt(_0x4820e0(0x1cb))/0x6*(parseInt(_0x4820e0(0x1e2))/0x7)+parseInt(_0x4820e0(0x1f2))/0x8+-parseInt(_0x4820e0(0x1dc))/0x9*(-parseInt(_0x4820e0(0x1ef))/0xa);if(_0x2856aa===_0x57ef58)break;else _0x25698f['push'](_0x25698f['shift']());}catch(_0x9f5f2d){_0x25698f['push'](_0x25698f['shift']());}}}(a24_0x4f2e,0xd0582));var __createBinding=this&&this[a24_0xa31c73(0x1ca)]||(Object[a24_0xa31c73(0x1d0)]?function(_0x90ad96,_0x245471,_0x429f4f,_0x1f075b){const _0x1cb3f4=a24_0xa31c73;if(_0x1f075b===undefined)_0x1f075b=_0x429f4f;var _0x521bd3=Object[_0x1cb3f4(0x1d5)](_0x245471,_0x429f4f);(!_0x521bd3||(_0x1cb3f4(0x1f6)in _0x521bd3?!_0x245471[_0x1cb3f4(0x1d3)]:_0x521bd3[_0x1cb3f4(0x1e8)]||_0x521bd3[_0x1cb3f4(0x1e3)]))&&(_0x521bd3={'enumerable':!![],'get':function(){return _0x245471[_0x429f4f];}}),Object['defineProperty'](_0x90ad96,_0x1f075b,_0x521bd3);}:function(_0xcd0035,_0x3e0fb7,_0x8ac0d9,_0x137332){if(_0x137332===undefined)_0x137332=_0x8ac0d9;_0xcd0035[_0x137332]=_0x3e0fb7[_0x8ac0d9];}),__setModuleDefault=this&&this[a24_0xa31c73(0x1e1)]||(Object['create']?function(_0xa9933f,_0x5e2c36){const _0x580ee4=a24_0xa31c73;Object[_0x580ee4(0x1df)](_0xa9933f,_0x580ee4(0x1d2),{'enumerable':!![],'value':_0x5e2c36});}:function(_0x3b3652,_0x4fd794){const _0x3fc9a0=a24_0xa31c73;_0x3b3652[_0x3fc9a0(0x1d2)]=_0x4fd794;}),__importStar=this&&this[a24_0xa31c73(0x1e9)]||function(_0x2df953){const _0x235db0=a24_0xa31c73;if(_0x2df953&&_0x2df953[_0x235db0(0x1d3)])return _0x2df953;var _0x5ecfcd={};if(_0x2df953!=null){for(var _0x1df77b in _0x2df953)if(_0x1df77b!=='default'&&Object[_0x235db0(0x1e6)][_0x235db0(0x1c2)][_0x235db0(0x1da)](_0x2df953,_0x1df77b))__createBinding(_0x5ecfcd,_0x2df953,_0x1df77b);}return __setModuleDefault(_0x5ecfcd,_0x2df953),_0x5ecfcd;},__importDefault=this&&this[a24_0xa31c73(0x1ea)]||function(_0x5c2b76){const _0x6ae062=a24_0xa31c73;return _0x5c2b76&&_0x5c2b76[_0x6ae062(0x1d3)]?_0x5c2b76:{'default':_0x5c2b76};};Object[a24_0xa31c73(0x1df)](exports,a24_0xa31c73(0x1d3),{'value':!![]}),exports[a24_0xa31c73(0x1e5)]=exports[a24_0xa31c73(0x1ec)]=exports[a24_0xa31c73(0x1c7)]=exports[a24_0xa31c73(0x1c0)]=exports[a24_0xa31c73(0x1f1)]=exports[a24_0xa31c73(0x1d8)]=void 0x0;const jsonwebtoken_1=require(a24_0xa31c73(0x1e7)),auth_1=__importDefault(require(a24_0xa31c73(0x1d9))),Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a24_0xa31c73(0x1bf))),Plan_1=__importDefault(require('../models/Plan')),ListPlansService_1=__importDefault(require(a24_0xa31c73(0x1fa))),CreatePlanService_1=__importDefault(require(a24_0xa31c73(0x1dd))),UpdatePlanService_1=__importDefault(require(a24_0xa31c73(0x1c9))),ShowPlanService_1=__importDefault(require(a24_0xa31c73(0x1cc))),FindAllPlanService_1=__importDefault(require(a24_0xa31c73(0x1f5))),DeletePlanService_1=__importDefault(require(a24_0xa31c73(0x1cf))),User_1=__importDefault(require('../models/User')),Company_1=__importDefault(require(a24_0xa31c73(0x1f8))),index=async(_0x196acc,_0x2bfb27)=>{const _0xbe5520=a24_0xa31c73,{searchParam:_0x2e12ae,pageNumber:_0x3c3d24}=_0x196acc[_0xbe5520(0x1cd)],_0x58491a=_0x196acc['headers']['authorization'],[,_0x13392d]=_0x58491a[_0xbe5520(0x1ed)]('\x20'),_0x2a1a26=(0x0,jsonwebtoken_1[_0xbe5520(0x1ce)])(_0x13392d,auth_1[_0xbe5520(0x1d2)][_0xbe5520(0x1e0)]),{id:_0x4e7a02,profile:_0x2f902d,companyId:_0x33bb45}=_0x2a1a26,_0x3bf08b=await User_1[_0xbe5520(0x1d2)][_0xbe5520(0x1c6)](_0x4e7a02),_0xd0768f=await Company_1[_0xbe5520(0x1d2)]['findByPk'](_0x33bb45),_0x4e3511=_0xd0768f['planId'],_0x571ad0=await Plan_1[_0xbe5520(0x1d2)][_0xbe5520(0x1c6)](_0x4e3511),_0xca1b6d=_0x571ad0['name'];if(_0x3bf08b['super']===!![]){const {plans:_0x48d4d6,count:_0x228297,hasMore:_0x8bfed}=await(0x0,ListPlansService_1['default'])({'searchParam':_0x2e12ae,'pageNumber':_0x3c3d24});return _0x2bfb27[_0xbe5520(0x1f4)]({'plans':_0x48d4d6,'count':_0x228297,'hasMore':_0x8bfed});}else{const {plans:_0x1f3b01,count:_0x28e7d5,hasMore:_0xb63cf3}=await(0x0,ListPlansService_1[_0xbe5520(0x1d2)])({'searchParam':_0xca1b6d,'pageNumber':_0x3c3d24});return _0x2bfb27['json']({'plans':_0x1f3b01,'count':_0x28e7d5,'hasMore':_0xb63cf3});}};function a24_0x4f2e(){const _0x352eb9=['Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','../services/PlanService/ListPlansService','body','../errors/AppError','store','string','hasOwnProperty','7265065XerPpL','toString','super','findByPk','show','744998EetmFG','../services/PlanService/UpdatePlanService','__createBinding','6ctVKwx','../services/PlanService/ShowPlanService','query','verify','../services/PlanService/DeletePlanService','create','params','default','__esModule','validate','getOwnPropertyDescriptor','5264FZRcEz','required','index','../config/auth','call','1611npAqiD','18bkbqQy','../services/PlanService/CreatePlanService','headers','defineProperty','secret','__setModuleDefault','884639CZWdzb','configurable','message','remove','prototype','jsonwebtoken','writable','__importStar','__importDefault','status','update','split','2857888AFERnW','18630490wAJpUV','authorization','list','10614160DTjoFH','shape','json','../services/PlanService/FindAllPlanService','get','planId','../models/Company'];a24_0x4f2e=function(){return _0x352eb9;};return a24_0x4f2e();}exports['index']=index;const list=async(_0x1ec2b3,_0x486051)=>{const _0x822add=a24_0xa31c73,_0x28a41a=await(0x0,FindAllPlanService_1[_0x822add(0x1d2)])();return _0x486051[_0x822add(0x1eb)](0xc8)['json'](_0x28a41a);};exports[a24_0xa31c73(0x1f1)]=list;const store=async(_0x25c0cb,_0x3fd983)=>{const _0x3efe0d=a24_0xa31c73,_0x2c7fa1=_0x25c0cb['body'],_0x19dbea=Yup['object']()[_0x3efe0d(0x1f3)]({'name':Yup[_0x3efe0d(0x1c1)]()[_0x3efe0d(0x1d7)]()});try{await _0x19dbea['validate'](_0x2c7fa1);}catch(_0xfa1da7){throw new AppError_1[(_0x3efe0d(0x1d2))](_0xfa1da7[_0x3efe0d(0x1e4)]);}const _0x452d44=await(0x0,CreatePlanService_1['default'])(_0x2c7fa1);return _0x3fd983[_0x3efe0d(0x1eb)](0xc8)[_0x3efe0d(0x1f4)](_0x452d44);};exports['store']=store;const show=async(_0xd86177,_0x21a3e5)=>{const _0x13a1a=a24_0xa31c73,{id:_0x5eab18}=_0xd86177['params'],_0xefc2d6=_0xd86177[_0x13a1a(0x1de)][_0x13a1a(0x1f0)],[,_0x31fe74]=_0xefc2d6[_0x13a1a(0x1ed)]('\x20'),_0x220580=(0x0,jsonwebtoken_1[_0x13a1a(0x1ce)])(_0x31fe74,auth_1[_0x13a1a(0x1d2)][_0x13a1a(0x1e0)]),{id:_0x58cf6b,profile:_0xcba1fe,companyId:_0x1e3a40}=_0x220580,_0xf4581a=await User_1[_0x13a1a(0x1d2)]['findByPk'](_0x58cf6b),_0x49742c=await Company_1[_0x13a1a(0x1d2)][_0x13a1a(0x1c6)](_0x1e3a40),_0x4e74cd=_0x49742c[_0x13a1a(0x1f7)];if(_0xf4581a[_0x13a1a(0x1c5)]===!![]){const _0x2b05ee=await(0x0,ShowPlanService_1[_0x13a1a(0x1d2)])(_0x5eab18);return _0x21a3e5[_0x13a1a(0x1eb)](0xc8)[_0x13a1a(0x1f4)](_0x2b05ee);}else{if(_0x5eab18!==_0x4e74cd[_0x13a1a(0x1c4)]())return _0x21a3e5[_0x13a1a(0x1eb)](0x190)['json']({'error':_0x13a1a(0x1f9)});else{if(_0x5eab18===_0x4e74cd['toString']()){const _0x1b7ca0=await(0x0,ShowPlanService_1[_0x13a1a(0x1d2)])(_0x5eab18);return _0x21a3e5[_0x13a1a(0x1eb)](0xc8)[_0x13a1a(0x1f4)](_0x1b7ca0);}}}};exports[a24_0xa31c73(0x1c7)]=show;const update=async(_0xddb5b2,_0x31d815)=>{const _0x1244bf=a24_0xa31c73,_0x2e274d=_0xddb5b2[_0x1244bf(0x1be)],_0x56c8ed=Yup['object']()[_0x1244bf(0x1f3)]({'name':Yup[_0x1244bf(0x1c1)]()});try{await _0x56c8ed[_0x1244bf(0x1d4)](_0x2e274d);}catch(_0x1490c5){throw new AppError_1[(_0x1244bf(0x1d2))](_0x1490c5[_0x1244bf(0x1e4)]);}const {id:_0x3348cc,name:_0x78990,users:_0x4dd466,connections:_0x5d6df0,queues:_0x2b8422,amount:_0x43c4f9,useWhatsapp:_0x4226b0,useFacebook:_0x14241c,useInstagram:_0x7ffdaa,useCampaigns:_0x9f0bde,useSchedules:_0x4fbda5,useInternalChat:_0x252f22,useExternalApi:_0xa1ed96,useKanban:_0x1e86ad}=_0x2e274d,_0x26e167=_0xddb5b2[_0x1244bf(0x1de)][_0x1244bf(0x1f0)],[,_0x1b75ec]=_0x26e167['split']('\x20'),_0x5c6206=(0x0,jsonwebtoken_1[_0x1244bf(0x1ce)])(_0x1b75ec,auth_1['default'][_0x1244bf(0x1e0)]),{id:_0x3580ce,profile:_0x195e34,companyId:_0x3db6a1}=_0x5c6206,_0x2650c0=await User_1[_0x1244bf(0x1d2)][_0x1244bf(0x1c6)](_0x3580ce),_0x47b5c4=await Company_1[_0x1244bf(0x1d2)][_0x1244bf(0x1c6)](_0x3db6a1),_0x2b70f6=_0x47b5c4[_0x1244bf(0x1f7)];if(_0x2650c0['super']===!![]){const _0x20cc9c=await(0x0,UpdatePlanService_1['default'])({'id':_0x3348cc,'name':_0x78990,'users':_0x4dd466,'connections':_0x5d6df0,'queues':_0x2b8422,'amount':_0x43c4f9,'useWhatsapp':_0x4226b0,'useFacebook':_0x14241c,'useInstagram':_0x7ffdaa,'useCampaigns':_0x9f0bde,'useSchedules':_0x4fbda5,'useInternalChat':_0x252f22,'useExternalApi':_0xa1ed96,'useKanban':_0x1e86ad});return _0x31d815[_0x1244bf(0x1eb)](0xc8)[_0x1244bf(0x1f4)](_0x20cc9c);}else{if(_0x2b70f6[_0x1244bf(0x1c4)]()!==_0x3348cc)return _0x31d815[_0x1244bf(0x1eb)](0x190)[_0x1244bf(0x1f4)]({'error':_0x1244bf(0x1f9)});}};exports[a24_0xa31c73(0x1ec)]=update;const remove=async(_0x19bd44,_0x537274)=>{const _0x2e3d46=a24_0xa31c73,{id:_0x1142a5}=_0x19bd44[_0x2e3d46(0x1d1)],_0x592aef=_0x19bd44[_0x2e3d46(0x1de)][_0x2e3d46(0x1f0)],[,_0x52e993]=_0x592aef[_0x2e3d46(0x1ed)]('\x20'),_0x550147=(0x0,jsonwebtoken_1[_0x2e3d46(0x1ce)])(_0x52e993,auth_1[_0x2e3d46(0x1d2)][_0x2e3d46(0x1e0)]),{id:_0x2a6e25,profile:_0x13c7b7,companyId:_0x744eeb}=_0x550147,_0x25cf92=await User_1[_0x2e3d46(0x1d2)][_0x2e3d46(0x1c6)](_0x2a6e25);if(_0x25cf92[_0x2e3d46(0x1c5)]===!![]){const _0x5ace72=await(0x0,DeletePlanService_1[_0x2e3d46(0x1d2)])(_0x1142a5);return _0x537274[_0x2e3d46(0x1eb)](0xc8)[_0x2e3d46(0x1f4)](_0x5ace72);}else{if(_0x744eeb[_0x2e3d46(0x1c4)]()!==_0x1142a5)return _0x537274[_0x2e3d46(0x1eb)](0x190)[_0x2e3d46(0x1f4)]({'error':'Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!'});}};exports[a24_0xa31c73(0x1e5)]=remove;