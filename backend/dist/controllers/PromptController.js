'use strict';const a25_0x2fbbe7=a25_0x1938;(function(_0x433eaa,_0x53c82d){const _0x4d7d77=a25_0x1938,_0x44bade=_0x433eaa();while(!![]){try{const _0x5ef5e5=parseInt(_0x4d7d77(0x197))/0x1+-parseInt(_0x4d7d77(0x1a8))/0x2*(-parseInt(_0x4d7d77(0x1aa))/0x3)+-parseInt(_0x4d7d77(0x1b2))/0x4+parseInt(_0x4d7d77(0x1a3))/0x5*(-parseInt(_0x4d7d77(0x1a2))/0x6)+-parseInt(_0x4d7d77(0x1a9))/0x7+parseInt(_0x4d7d77(0x198))/0x8+-parseInt(_0x4d7d77(0x19d))/0x9*(-parseInt(_0x4d7d77(0x1ae))/0xa);if(_0x5ef5e5===_0x53c82d)break;else _0x44bade['push'](_0x44bade['shift']());}catch(_0x2bb441){_0x44bade['push'](_0x44bade['shift']());}}}(a25_0x1049,0xe1442));var __importDefault=this&&this['__importDefault']||function(_0x42900b){const _0x33e6e1=a25_0x1938;return _0x42900b&&_0x42900b[_0x33e6e1(0x1b0)]?_0x42900b:{'default':_0x42900b};};Object[a25_0x2fbbe7(0x19a)](exports,'__esModule',{'value':!![]}),exports[a25_0x2fbbe7(0x193)]=exports[a25_0x2fbbe7(0x1a6)]=exports['show']=exports[a25_0x2fbbe7(0x1a7)]=exports[a25_0x2fbbe7(0x194)]=void 0x0;const socket_1=require(a25_0x2fbbe7(0x1b9)),CreatePromptService_1=__importDefault(require(a25_0x2fbbe7(0x1a0))),DeletePromptService_1=__importDefault(require(a25_0x2fbbe7(0x1b6))),ListPromptsService_1=__importDefault(require(a25_0x2fbbe7(0x1ad))),ShowPromptService_1=__importDefault(require(a25_0x2fbbe7(0x1b3))),UpdatePromptService_1=__importDefault(require(a25_0x2fbbe7(0x19f))),Whatsapp_1=__importDefault(require('../models/Whatsapp')),jsonwebtoken_1=require(a25_0x2fbbe7(0x1b7)),auth_1=__importDefault(require('../config/auth')),index=async(_0x1b0a65,_0xab407)=>{const _0x10bfc1=a25_0x2fbbe7,{pageNumber:_0x632071,searchParam:_0x34dc9a}=_0x1b0a65[_0x10bfc1(0x1ac)],_0x5bc991=_0x1b0a65[_0x10bfc1(0x1b1)]['authorization'],[,_0x4bcaa5]=_0x5bc991['split']('\x20'),_0x1ea600=(0x0,jsonwebtoken_1[_0x10bfc1(0x1ba)])(_0x4bcaa5,auth_1['default']['secret']),{companyId:_0x4db014}=_0x1ea600,{prompts:_0x290ebc,count:_0x4bd75e,hasMore:_0x581ccf}=await(0x0,ListPromptsService_1[_0x10bfc1(0x1b5)])({'searchParam':_0x34dc9a,'pageNumber':_0x632071,'companyId':_0x4db014});return _0xab407['status'](0xc8)['json']({'prompts':_0x290ebc,'count':_0x4bd75e,'hasMore':_0x581ccf});};exports['index']=index;const store=async(_0x171624,_0x2fe600)=>{const _0x54db3d=a25_0x2fbbe7,_0x565c92=_0x171624['headers']['authorization'],[,_0x72e089]=_0x565c92[_0x54db3d(0x19b)]('\x20'),_0x24d0cf=(0x0,jsonwebtoken_1[_0x54db3d(0x1ba)])(_0x72e089,auth_1[_0x54db3d(0x1b5)][_0x54db3d(0x1b8)]),{companyId:_0x2cb574}=_0x24d0cf,{name:_0x545cfb,apiKey:_0x297ce0,prompt:_0x47127e,maxTokens:_0x35141c,temperature:_0x118b5d,promptTokens:_0x324c24,completionTokens:_0x44410c,totalTokens:_0x970310,queueId:_0x238e61,maxMessages:_0x40e8dd,voice:_0x4831cb,voiceKey:_0x5605d3,voiceRegion:_0x5c3e55}=_0x171624[_0x54db3d(0x192)],_0x1dd3e5=await(0x0,CreatePromptService_1[_0x54db3d(0x1b5)])({'name':_0x545cfb,'apiKey':_0x297ce0,'prompt':_0x47127e,'maxTokens':_0x35141c,'temperature':_0x118b5d,'promptTokens':_0x324c24,'completionTokens':_0x44410c,'totalTokens':_0x970310,'queueId':_0x238e61,'maxMessages':_0x40e8dd,'companyId':_0x2cb574,'voice':_0x4831cb,'voiceKey':_0x5605d3,'voiceRegion':_0x5c3e55}),_0x465136=(0x0,socket_1[_0x54db3d(0x19e)])();return _0x465136[_0x54db3d(0x1b4)](_0x54db3d(0x1a1)+_0x2cb574+_0x54db3d(0x1a4),{'action':_0x54db3d(0x1a6),'prompt':_0x1dd3e5}),_0x2fe600[_0x54db3d(0x19c)](0xc8)[_0x54db3d(0x191)](_0x1dd3e5);};exports[a25_0x2fbbe7(0x1a7)]=store;const show=async(_0x460117,_0x1441ba)=>{const _0x5e3482=a25_0x2fbbe7,{promptId:_0x1001a3}=_0x460117[_0x5e3482(0x195)],_0x125419=_0x460117[_0x5e3482(0x1b1)][_0x5e3482(0x199)],[,_0x90479d]=_0x125419[_0x5e3482(0x19b)]('\x20'),_0x3f5e00=(0x0,jsonwebtoken_1['verify'])(_0x90479d,auth_1[_0x5e3482(0x1b5)][_0x5e3482(0x1b8)]),{companyId:_0x56fe39}=_0x3f5e00,_0xc41b1b=await(0x0,ShowPromptService_1[_0x5e3482(0x1b5)])({'promptId':_0x1001a3,'companyId':_0x56fe39});return _0x1441ba[_0x5e3482(0x19c)](0xc8)['json'](_0xc41b1b);};function a25_0x1938(_0x1a12a5,_0x170ef7){const _0x104904=a25_0x1049();return a25_0x1938=function(_0x19388f,_0x591aaf){_0x19388f=_0x19388f-0x191;let _0x46ba42=_0x104904[_0x19388f];return _0x46ba42;},a25_0x1938(_0x1a12a5,_0x170ef7);}function a25_0x1049(){const _0x40e9b6=['657099hrOCCF','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!','query','../services/PromptServices/ListPromptsService','30dhibyt','findAndCountAll','__esModule','headers','6784288VNiEzi','../services/PromptServices/ShowPromptService','emit','default','../services/PromptServices/DeletePromptService','jsonwebtoken','secret','../libs/socket','verify','json','body','remove','index','params','delete','478112hYQAJB','12392456GBhtrf','authorization','defineProperty','split','status','6998958DGmXjY','getIO','../services/PromptServices/UpdatePromptService','../services/PromptServices/CreatePromptService','company-','24594yholQM','1660hdHZbT','-prompt','Prompt\x20deleted','update','store','4xTttQF','5730137NXgTyP'];a25_0x1049=function(){return _0x40e9b6;};return a25_0x1049();}exports['show']=show;const update=async(_0x1c7748,_0x1984e3)=>{const _0x1ea564=a25_0x2fbbe7,{promptId:_0x22708f}=_0x1c7748[_0x1ea564(0x195)],_0x308988=_0x1c7748[_0x1ea564(0x192)],_0x30283e=_0x1c7748[_0x1ea564(0x1b1)][_0x1ea564(0x199)],[,_0xfb9e5e]=_0x30283e[_0x1ea564(0x19b)]('\x20'),_0x2e76d1=(0x0,jsonwebtoken_1['verify'])(_0xfb9e5e,auth_1[_0x1ea564(0x1b5)]['secret']),{companyId:_0x5b504d}=_0x2e76d1,_0x13f8d2=await(0x0,UpdatePromptService_1['default'])({'promptData':_0x308988,'promptId':_0x22708f,'companyId':_0x5b504d}),_0x34a501=(0x0,socket_1[_0x1ea564(0x19e)])();return _0x34a501[_0x1ea564(0x1b4)]('company-'+_0x5b504d+_0x1ea564(0x1a4),{'action':_0x1ea564(0x1a6),'prompt':_0x13f8d2}),_0x1984e3[_0x1ea564(0x19c)](0xc8)[_0x1ea564(0x191)](_0x13f8d2);};exports[a25_0x2fbbe7(0x1a6)]=update;const remove=async(_0x2af192,_0x1f382c)=>{const _0xeaa887=a25_0x2fbbe7,{promptId:_0x2249e0}=_0x2af192[_0xeaa887(0x195)],_0x6c4814=_0x2af192[_0xeaa887(0x1b1)]['authorization'],[,_0x27631b]=_0x6c4814[_0xeaa887(0x19b)]('\x20'),_0x4a5f91=(0x0,jsonwebtoken_1[_0xeaa887(0x1ba)])(_0x27631b,auth_1[_0xeaa887(0x1b5)][_0xeaa887(0x1b8)]),{companyId:_0x305213}=_0x4a5f91;try{const {count:_0x20264e}=await Whatsapp_1[_0xeaa887(0x1b5)][_0xeaa887(0x1af)]({'where':{'promptId':+_0x2249e0,'companyId':_0x305213}});if(_0x20264e>0x0)return _0x1f382c[_0xeaa887(0x19c)](0xc8)[_0xeaa887(0x191)]({'message':'Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!'});await(0x0,DeletePromptService_1[_0xeaa887(0x1b5)])(_0x2249e0,_0x305213);const _0x1daeb0=(0x0,socket_1[_0xeaa887(0x19e)])();return _0x1daeb0['emit']('company-'+_0x305213+_0xeaa887(0x1a4),{'action':_0xeaa887(0x196),'intelligenceId':+_0x2249e0}),_0x1f382c['status'](0xc8)[_0xeaa887(0x191)]({'message':_0xeaa887(0x1a5)});}catch(_0x30ff31){return _0x1f382c[_0xeaa887(0x19c)](0x1f4)[_0xeaa887(0x191)]({'message':_0xeaa887(0x1ab)});}};exports[a25_0x2fbbe7(0x193)]=remove;