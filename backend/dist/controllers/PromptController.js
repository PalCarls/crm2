'use strict';const a25_0x2b55d3=a25_0x203a;(function(_0x2b254e,_0x5cc235){const _0x43b866=a25_0x203a,_0x2afe00=_0x2b254e();while(!![]){try{const _0x2022a8=-parseInt(_0x43b866(0x9b))/0x1+parseInt(_0x43b866(0x97))/0x2+-parseInt(_0x43b866(0xac))/0x3*(-parseInt(_0x43b866(0xa0))/0x4)+parseInt(_0x43b866(0x96))/0x5+-parseInt(_0x43b866(0xa3))/0x6+parseInt(_0x43b866(0xb3))/0x7*(parseInt(_0x43b866(0x95))/0x8)+-parseInt(_0x43b866(0x98))/0x9*(parseInt(_0x43b866(0xa7))/0xa);if(_0x2022a8===_0x5cc235)break;else _0x2afe00['push'](_0x2afe00['shift']());}catch(_0x141ed0){_0x2afe00['push'](_0x2afe00['shift']());}}}(a25_0x486c,0x58706));function a25_0x203a(_0x4f994d,_0x17ee5f){const _0x486c96=a25_0x486c();return a25_0x203a=function(_0x203a0e,_0x467869){_0x203a0e=_0x203a0e-0x89;let _0x44856d=_0x486c96[_0x203a0e];return _0x44856d;},a25_0x203a(_0x4f994d,_0x17ee5f);}var __importDefault=this&&this[a25_0x2b55d3(0x8c)]||function(_0x56ac29){return _0x56ac29&&_0x56ac29['__esModule']?_0x56ac29:{'default':_0x56ac29};};Object[a25_0x2b55d3(0x94)](exports,a25_0x2b55d3(0x9d),{'value':!![]}),exports[a25_0x2b55d3(0xa4)]=exports[a25_0x2b55d3(0xb1)]=exports[a25_0x2b55d3(0xa8)]=exports[a25_0x2b55d3(0xb2)]=exports[a25_0x2b55d3(0x8a)]=void 0x0;const socket_1=require(a25_0x2b55d3(0xae)),CreatePromptService_1=__importDefault(require(a25_0x2b55d3(0x90))),DeletePromptService_1=__importDefault(require(a25_0x2b55d3(0xa2))),ListPromptsService_1=__importDefault(require(a25_0x2b55d3(0x9f))),ShowPromptService_1=__importDefault(require(a25_0x2b55d3(0xa1))),UpdatePromptService_1=__importDefault(require(a25_0x2b55d3(0x9a))),Whatsapp_1=__importDefault(require('../models/Whatsapp')),jsonwebtoken_1=require(a25_0x2b55d3(0xad)),auth_1=__importDefault(require('../config/auth')),index=async(_0x2f19aa,_0x1c48d0)=>{const _0x180bd2=a25_0x2b55d3,{pageNumber:_0x509775,searchParam:_0x466a6c}=_0x2f19aa['query'],_0x516a5f=_0x2f19aa[_0x180bd2(0xa5)]['authorization'],[,_0x4a8265]=_0x516a5f[_0x180bd2(0x8e)]('\x20'),_0x4e0361=(0x0,jsonwebtoken_1['verify'])(_0x4a8265,auth_1[_0x180bd2(0x9e)]['secret']),{companyId:_0x4007af}=_0x4e0361,{prompts:_0x4e341b,count:_0x26d2b1,hasMore:_0x565809}=await(0x0,ListPromptsService_1['default'])({'searchParam':_0x466a6c,'pageNumber':_0x509775,'companyId':_0x4007af});return _0x1c48d0[_0x180bd2(0xab)](0xc8)[_0x180bd2(0xaa)]({'prompts':_0x4e341b,'count':_0x26d2b1,'hasMore':_0x565809});};exports['index']=index;const store=async(_0x5a41d8,_0x41c9fc)=>{const _0x5439f8=a25_0x2b55d3,_0x225f2c=_0x5a41d8[_0x5439f8(0xa5)]['authorization'],[,_0x18440b]=_0x225f2c[_0x5439f8(0x8e)]('\x20'),_0x502c1f=(0x0,jsonwebtoken_1[_0x5439f8(0x91)])(_0x18440b,auth_1[_0x5439f8(0x9e)][_0x5439f8(0xb0)]),{companyId:_0x48095f}=_0x502c1f,{name:_0x228bc0,apiKey:_0x1cc901,prompt:_0x55fd84,maxTokens:_0xbb93c1,temperature:_0x529a11,promptTokens:_0x4eadef,completionTokens:_0x1ad314,totalTokens:_0x52f0c0,queueId:_0x1eae75,maxMessages:_0x56953f,voice:_0x296b61,voiceKey:_0x2fdc63,voiceRegion:_0x59bbbd}=_0x5a41d8[_0x5439f8(0x93)],_0x106439=await(0x0,CreatePromptService_1[_0x5439f8(0x9e)])({'name':_0x228bc0,'apiKey':_0x1cc901,'prompt':_0x55fd84,'maxTokens':_0xbb93c1,'temperature':_0x529a11,'promptTokens':_0x4eadef,'completionTokens':_0x1ad314,'totalTokens':_0x52f0c0,'queueId':_0x1eae75,'maxMessages':_0x56953f,'companyId':_0x48095f,'voice':_0x296b61,'voiceKey':_0x2fdc63,'voiceRegion':_0x59bbbd}),_0x155ea8=(0x0,socket_1['getIO'])();return _0x155ea8[_0x5439f8(0x8b)](_0x5439f8(0x9c)+_0x48095f+'-prompt',{'action':_0x5439f8(0xb1),'prompt':_0x106439}),_0x41c9fc[_0x5439f8(0xab)](0xc8)[_0x5439f8(0xaa)](_0x106439);};exports[a25_0x2b55d3(0xb2)]=store;const show=async(_0x6fec42,_0x498c44)=>{const _0x393b02=a25_0x2b55d3,{promptId:_0xac9d02}=_0x6fec42[_0x393b02(0xa6)],_0x533076=_0x6fec42[_0x393b02(0xa5)]['authorization'],[,_0x2a6163]=_0x533076[_0x393b02(0x8e)]('\x20'),_0x496ffe=(0x0,jsonwebtoken_1[_0x393b02(0x91)])(_0x2a6163,auth_1[_0x393b02(0x9e)][_0x393b02(0xb0)]),{companyId:_0x2cec36}=_0x496ffe,_0x3f71cc=await(0x0,ShowPromptService_1[_0x393b02(0x9e)])({'promptId':_0xac9d02,'companyId':_0x2cec36});return _0x498c44['status'](0xc8)['json'](_0x3f71cc);};exports[a25_0x2b55d3(0xa8)]=show;const update=async(_0x5c237d,_0x14a71d)=>{const _0x2ce961=a25_0x2b55d3,{promptId:_0x893a88}=_0x5c237d[_0x2ce961(0xa6)],_0x66c562=_0x5c237d[_0x2ce961(0x93)],_0x35bda4=_0x5c237d[_0x2ce961(0xa5)]['authorization'],[,_0x4af131]=_0x35bda4[_0x2ce961(0x8e)]('\x20'),_0x2523ae=(0x0,jsonwebtoken_1[_0x2ce961(0x91)])(_0x4af131,auth_1[_0x2ce961(0x9e)][_0x2ce961(0xb0)]),{companyId:_0x4a0534}=_0x2523ae,_0x5ab11c=await(0x0,UpdatePromptService_1['default'])({'promptData':_0x66c562,'promptId':_0x893a88,'companyId':_0x4a0534}),_0x47e7d1=(0x0,socket_1['getIO'])();return _0x47e7d1[_0x2ce961(0x8b)]('company-'+_0x4a0534+_0x2ce961(0xaf),{'action':_0x2ce961(0xb1),'prompt':_0x5ab11c}),_0x14a71d[_0x2ce961(0xab)](0xc8)['json'](_0x5ab11c);};exports['update']=update;function a25_0x486c(){const _0x4ef717=['split','Prompt\x20deleted','../services/PromptServices/CreatePromptService','verify','getIO','body','defineProperty','16VEoDqT','2419385BFHBYK','988748xxzhOE','2394GLxoGE','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!','../services/PromptServices/UpdatePromptService','362578jfMZrg','company-','__esModule','default','../services/PromptServices/ListPromptsService','820AANZPQ','../services/PromptServices/ShowPromptService','../services/PromptServices/DeletePromptService','1269774QCiigW','remove','headers','params','30190NSnMcE','show','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!','json','status','4866QYzqPD','jsonwebtoken','../libs/socket','-prompt','secret','update','store','1500611jTlKmz','delete','authorization','index','emit','__importDefault','findAndCountAll'];a25_0x486c=function(){return _0x4ef717;};return a25_0x486c();}const remove=async(_0x1f9445,_0x2027bf)=>{const _0x5b3501=a25_0x2b55d3,{promptId:_0x44012e}=_0x1f9445[_0x5b3501(0xa6)],_0x4bfbf0=_0x1f9445['headers'][_0x5b3501(0x89)],[,_0x3eaad8]=_0x4bfbf0[_0x5b3501(0x8e)]('\x20'),_0x5ec5ca=(0x0,jsonwebtoken_1['verify'])(_0x3eaad8,auth_1['default'][_0x5b3501(0xb0)]),{companyId:_0x24292c}=_0x5ec5ca;try{const {count:_0x57cd64}=await Whatsapp_1['default'][_0x5b3501(0x8d)]({'where':{'promptId':+_0x44012e,'companyId':_0x24292c}});if(_0x57cd64>0x0)return _0x2027bf[_0x5b3501(0xab)](0xc8)[_0x5b3501(0xaa)]({'message':_0x5b3501(0x99)});await(0x0,DeletePromptService_1[_0x5b3501(0x9e)])(_0x44012e,_0x24292c);const _0xeec78a=(0x0,socket_1[_0x5b3501(0x92)])();return _0xeec78a[_0x5b3501(0x8b)]('company-'+_0x24292c+_0x5b3501(0xaf),{'action':_0x5b3501(0xb4),'intelligenceId':+_0x44012e}),_0x2027bf[_0x5b3501(0xab)](0xc8)[_0x5b3501(0xaa)]({'message':_0x5b3501(0x8f)});}catch(_0x7bd8b6){return _0x2027bf['status'](0x1f4)[_0x5b3501(0xaa)]({'message':_0x5b3501(0xa9)});}};exports['remove']=remove;