'use strict';const a25_0x13b6d2=a25_0x25df;(function(_0x1f76c7,_0x407cb2){const _0x426a24=a25_0x25df,_0xa2bab9=_0x1f76c7();while(!![]){try{const _0x5aa1ef=-parseInt(_0x426a24(0x1a4))/0x1+-parseInt(_0x426a24(0x1a9))/0x2*(parseInt(_0x426a24(0x19a))/0x3)+parseInt(_0x426a24(0x1b5))/0x4*(-parseInt(_0x426a24(0x195))/0x5)+parseInt(_0x426a24(0x1a0))/0x6+-parseInt(_0x426a24(0x197))/0x7*(-parseInt(_0x426a24(0x1b8))/0x8)+-parseInt(_0x426a24(0x1b2))/0x9*(parseInt(_0x426a24(0x1a7))/0xa)+-parseInt(_0x426a24(0x1ac))/0xb*(-parseInt(_0x426a24(0x198))/0xc);if(_0x5aa1ef===_0x407cb2)break;else _0xa2bab9['push'](_0xa2bab9['shift']());}catch(_0x1e5d36){_0xa2bab9['push'](_0xa2bab9['shift']());}}}(a25_0x29c3,0x766da));var __importDefault=this&&this[a25_0x13b6d2(0x1b7)]||function(_0x3586b4){const _0x71d43c=a25_0x13b6d2;return _0x3586b4&&_0x3586b4[_0x71d43c(0x19c)]?_0x3586b4:{'default':_0x3586b4};};Object['defineProperty'](exports,a25_0x13b6d2(0x19c),{'value':!![]}),exports[a25_0x13b6d2(0x1bd)]=exports[a25_0x13b6d2(0x194)]=exports[a25_0x13b6d2(0x1a6)]=exports['store']=exports[a25_0x13b6d2(0x1aa)]=void 0x0;const socket_1=require(a25_0x13b6d2(0x1af)),CreatePromptService_1=__importDefault(require(a25_0x13b6d2(0x192))),DeletePromptService_1=__importDefault(require(a25_0x13b6d2(0x1b0))),ListPromptsService_1=__importDefault(require(a25_0x13b6d2(0x1b3))),ShowPromptService_1=__importDefault(require(a25_0x13b6d2(0x1ae))),UpdatePromptService_1=__importDefault(require(a25_0x13b6d2(0x1ab))),Whatsapp_1=__importDefault(require(a25_0x13b6d2(0x19e))),jsonwebtoken_1=require(a25_0x13b6d2(0x19b)),auth_1=__importDefault(require(a25_0x13b6d2(0x1bb))),index=async(_0x1118a3,_0x4d1ace)=>{const _0x70441=a25_0x13b6d2,{pageNumber:_0x4496c5,searchParam:_0x5b39a3}=_0x1118a3[_0x70441(0x1b6)],_0x393b00=_0x1118a3['headers']['authorization'],[,_0x312475]=_0x393b00['split']('\x20'),_0x152351=(0x0,jsonwebtoken_1[_0x70441(0x1a8)])(_0x312475,auth_1[_0x70441(0x19f)][_0x70441(0x1bc)]),{companyId:_0x22c81c}=_0x152351,{prompts:_0x4d094e,count:_0x17bf87,hasMore:_0x3c024b}=await(0x0,ListPromptsService_1['default'])({'searchParam':_0x5b39a3,'pageNumber':_0x4496c5,'companyId':_0x22c81c});return _0x4d1ace[_0x70441(0x1a3)](0xc8)[_0x70441(0x1b9)]({'prompts':_0x4d094e,'count':_0x17bf87,'hasMore':_0x3c024b});};exports[a25_0x13b6d2(0x1aa)]=index;const store=async(_0x5d2545,_0x29116f)=>{const _0x240c39=a25_0x13b6d2,_0x127074=_0x5d2545[_0x240c39(0x191)][_0x240c39(0x199)],[,_0xfa0538]=_0x127074['split']('\x20'),_0x36ea4f=(0x0,jsonwebtoken_1['verify'])(_0xfa0538,auth_1['default'][_0x240c39(0x1bc)]),{companyId:_0x35bf26}=_0x36ea4f,{name:_0x1db2c8,apiKey:_0x21b24d,prompt:_0x1f2af0,maxTokens:_0x1ae6b4,temperature:_0x25202e,promptTokens:_0x379eb2,completionTokens:_0xe2411,totalTokens:_0x404fb7,queueId:_0x36b489,maxMessages:_0x465456,voice:_0x5c5866,voiceKey:_0x3a9ca9,voiceRegion:_0x418a2d}=_0x5d2545['body'],_0x50933c=await(0x0,CreatePromptService_1['default'])({'name':_0x1db2c8,'apiKey':_0x21b24d,'prompt':_0x1f2af0,'maxTokens':_0x1ae6b4,'temperature':_0x25202e,'promptTokens':_0x379eb2,'completionTokens':_0xe2411,'totalTokens':_0x404fb7,'queueId':_0x36b489,'maxMessages':_0x465456,'companyId':_0x35bf26,'voice':_0x5c5866,'voiceKey':_0x3a9ca9,'voiceRegion':_0x418a2d}),_0x443d5b=(0x0,socket_1[_0x240c39(0x1a5)])();return _0x443d5b['emit'](_0x240c39(0x193),{'action':'update','prompt':_0x50933c}),_0x29116f[_0x240c39(0x1a3)](0xc8)[_0x240c39(0x1b9)](_0x50933c);};exports[a25_0x13b6d2(0x1a1)]=store;const show=async(_0x366a03,_0x4af7a9)=>{const _0x37b322=a25_0x13b6d2,{promptId:_0x5ac9af}=_0x366a03[_0x37b322(0x19d)],_0x5a55d4=_0x366a03['headers'][_0x37b322(0x199)],[,_0x3aca4f]=_0x5a55d4[_0x37b322(0x1b1)]('\x20'),_0x446d88=(0x0,jsonwebtoken_1[_0x37b322(0x1a8)])(_0x3aca4f,auth_1[_0x37b322(0x19f)][_0x37b322(0x1bc)]),{companyId:_0x298a62}=_0x446d88,_0x8a2ba4=await(0x0,ShowPromptService_1['default'])({'promptId':_0x5ac9af,'companyId':_0x298a62});return _0x4af7a9[_0x37b322(0x1a3)](0xc8)[_0x37b322(0x1b9)](_0x8a2ba4);};exports['show']=show;function a25_0x25df(_0x23e54e,_0x550d6e){const _0x29c340=a25_0x29c3();return a25_0x25df=function(_0x25dfc7,_0x2e4c2d){_0x25dfc7=_0x25dfc7-0x191;let _0x4fcb42=_0x29c340[_0x25dfc7];return _0x4fcb42;},a25_0x25df(_0x23e54e,_0x550d6e);}function a25_0x29c3(){const _0x52c6ee=['7405paEPPK','emit','5537iguVvm','587592fPANLf','authorization','896631PTAXvH','jsonwebtoken','__esModule','params','../models/Whatsapp','default','2676894CIZXPu','store','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!','status','670126gMxysu','getIO','show','9190jtsQOg','verify','6fCxbIS','index','../services/PromptServices/UpdatePromptService','517PDgWmc','Prompt\x20deleted','../services/PromptServices/ShowPromptService','../libs/socket','../services/PromptServices/DeletePromptService','split','1782onCeOI','../services/PromptServices/ListPromptsService','delete','2428yCBhdV','query','__importDefault','3896XbEUUL','json','findAndCountAll','../config/auth','secret','remove','headers','../services/PromptServices/CreatePromptService','prompt','update'];a25_0x29c3=function(){return _0x52c6ee;};return a25_0x29c3();}const update=async(_0xfe8220,_0x1e92f3)=>{const _0x3d9ca5=a25_0x13b6d2,{promptId:_0x3d552f}=_0xfe8220['params'],_0x4232e4=_0xfe8220['body'],_0x2c8832=_0xfe8220[_0x3d9ca5(0x191)][_0x3d9ca5(0x199)],[,_0x1947b3]=_0x2c8832[_0x3d9ca5(0x1b1)]('\x20'),_0x410185=(0x0,jsonwebtoken_1[_0x3d9ca5(0x1a8)])(_0x1947b3,auth_1[_0x3d9ca5(0x19f)][_0x3d9ca5(0x1bc)]),{companyId:_0x39e549}=_0x410185,_0x4270fb=await(0x0,UpdatePromptService_1[_0x3d9ca5(0x19f)])({'promptData':_0x4232e4,'promptId':_0x3d552f,'companyId':_0x39e549}),_0x5415fc=(0x0,socket_1[_0x3d9ca5(0x1a5)])();return _0x5415fc[_0x3d9ca5(0x196)](_0x3d9ca5(0x193),{'action':_0x3d9ca5(0x194),'prompt':_0x4270fb}),_0x1e92f3['status'](0xc8)[_0x3d9ca5(0x1b9)](_0x4270fb);};exports[a25_0x13b6d2(0x194)]=update;const remove=async(_0x48f0ef,_0x4b7493)=>{const _0x52037e=a25_0x13b6d2,{promptId:_0x365c6f}=_0x48f0ef[_0x52037e(0x19d)],_0x3045be=_0x48f0ef[_0x52037e(0x191)][_0x52037e(0x199)],[,_0x2c23a8]=_0x3045be['split']('\x20'),_0x552e1f=(0x0,jsonwebtoken_1[_0x52037e(0x1a8)])(_0x2c23a8,auth_1[_0x52037e(0x19f)]['secret']),{companyId:_0x523adb}=_0x552e1f;try{const {count:_0x7b659e}=await Whatsapp_1[_0x52037e(0x19f)][_0x52037e(0x1ba)]({'where':{'promptId':+_0x365c6f,'companyId':_0x523adb}});if(_0x7b659e>0x0)return _0x4b7493[_0x52037e(0x1a3)](0xc8)[_0x52037e(0x1b9)]({'message':_0x52037e(0x1a2)});await(0x0,DeletePromptService_1['default'])(_0x365c6f,_0x523adb);const _0x5c15e7=(0x0,socket_1[_0x52037e(0x1a5)])();return _0x5c15e7[_0x52037e(0x196)](_0x52037e(0x193),{'action':_0x52037e(0x1b4),'intelligenceId':+_0x365c6f}),_0x4b7493[_0x52037e(0x1a3)](0xc8)[_0x52037e(0x1b9)]({'message':_0x52037e(0x1ad)});}catch(_0x5ee891){return _0x4b7493[_0x52037e(0x1a3)](0x1f4)['json']({'message':'Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!'});}};exports['remove']=remove;