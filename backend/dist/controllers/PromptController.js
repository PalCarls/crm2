'use strict';function a25_0x38eb(_0x10e8f4,_0x3eb3eb){const _0x1580fb=a25_0x1580();return a25_0x38eb=function(_0x38eb08,_0x3aedc8){_0x38eb08=_0x38eb08-0xb5;let _0x406f99=_0x1580fb[_0x38eb08];return _0x406f99;},a25_0x38eb(_0x10e8f4,_0x3eb3eb);}const a25_0x4bcab2=a25_0x38eb;(function(_0x346c8b,_0x5ad102){const _0xd2a5cb=a25_0x38eb,_0x519d9b=_0x346c8b();while(!![]){try{const _0x4d890c=-parseInt(_0xd2a5cb(0xd5))/0x1*(-parseInt(_0xd2a5cb(0xcc))/0x2)+-parseInt(_0xd2a5cb(0xb5))/0x3+-parseInt(_0xd2a5cb(0xdf))/0x4*(parseInt(_0xd2a5cb(0xc2))/0x5)+parseInt(_0xd2a5cb(0xbc))/0x6*(parseInt(_0xd2a5cb(0xc9))/0x7)+-parseInt(_0xd2a5cb(0xde))/0x8+parseInt(_0xd2a5cb(0xc7))/0x9+parseInt(_0xd2a5cb(0xc5))/0xa*(parseInt(_0xd2a5cb(0xd9))/0xb);if(_0x4d890c===_0x5ad102)break;else _0x519d9b['push'](_0x519d9b['shift']());}catch(_0x1ffcd0){_0x519d9b['push'](_0x519d9b['shift']());}}}(a25_0x1580,0xe92a3));var __importDefault=this&&this['__importDefault']||function(_0x706a63){const _0x427084=a25_0x38eb;return _0x706a63&&_0x706a63[_0x427084(0xbb)]?_0x706a63:{'default':_0x706a63};};Object['defineProperty'](exports,a25_0x4bcab2(0xbb),{'value':!![]}),exports[a25_0x4bcab2(0xdd)]=exports['update']=exports[a25_0x4bcab2(0xd2)]=exports[a25_0x4bcab2(0xba)]=exports[a25_0x4bcab2(0xd6)]=void 0x0;const socket_1=require(a25_0x4bcab2(0xc1)),CreatePromptService_1=__importDefault(require('../services/PromptServices/CreatePromptService')),DeletePromptService_1=__importDefault(require(a25_0x4bcab2(0xdb))),ListPromptsService_1=__importDefault(require(a25_0x4bcab2(0xb8))),ShowPromptService_1=__importDefault(require(a25_0x4bcab2(0xd8))),UpdatePromptService_1=__importDefault(require(a25_0x4bcab2(0xc3))),Whatsapp_1=__importDefault(require(a25_0x4bcab2(0xca))),jsonwebtoken_1=require(a25_0x4bcab2(0xcd)),auth_1=__importDefault(require(a25_0x4bcab2(0xd4))),index=async(_0x36a9b5,_0x24023a)=>{const _0x7a7dde=a25_0x4bcab2,{pageNumber:_0x2a3314,searchParam:_0x404934}=_0x36a9b5[_0x7a7dde(0xc0)],_0x24ef11=_0x36a9b5[_0x7a7dde(0xb7)]['authorization'],[,_0x197d95]=_0x24ef11[_0x7a7dde(0xc4)]('\x20'),_0x1a1846=(0x0,jsonwebtoken_1[_0x7a7dde(0xd1)])(_0x197d95,auth_1[_0x7a7dde(0xd7)][_0x7a7dde(0xd0)]),{companyId:_0x2bb644}=_0x1a1846,{prompts:_0x541f16,count:_0x2d714a,hasMore:_0x8559ba}=await(0x0,ListPromptsService_1[_0x7a7dde(0xd7)])({'searchParam':_0x404934,'pageNumber':_0x2a3314,'companyId':_0x2bb644});return _0x24023a[_0x7a7dde(0xb6)](0xc8)['json']({'prompts':_0x541f16,'count':_0x2d714a,'hasMore':_0x8559ba});};exports[a25_0x4bcab2(0xd6)]=index;const store=async(_0xf0aaed,_0x1b9447)=>{const _0x4d91db=a25_0x4bcab2,_0x553303=_0xf0aaed[_0x4d91db(0xb7)][_0x4d91db(0xc6)],[,_0x50ac64]=_0x553303['split']('\x20'),_0x375105=(0x0,jsonwebtoken_1['verify'])(_0x50ac64,auth_1[_0x4d91db(0xd7)]['secret']),{companyId:_0x2fcea6}=_0x375105,{name:_0x6a9467,apiKey:_0x245374,prompt:_0xf16c2,maxTokens:_0x193c0e,temperature:_0x47b41f,promptTokens:_0x5289e5,completionTokens:_0x2827f3,totalTokens:_0x1d04cb,queueId:_0x873d96,maxMessages:_0x98dd39,voice:_0x4716ea,voiceKey:_0x4dcb4c,voiceRegion:_0x4f7f7a}=_0xf0aaed[_0x4d91db(0xcf)],_0x41b034=await(0x0,CreatePromptService_1[_0x4d91db(0xd7)])({'name':_0x6a9467,'apiKey':_0x245374,'prompt':_0xf16c2,'maxTokens':_0x193c0e,'temperature':_0x47b41f,'promptTokens':_0x5289e5,'completionTokens':_0x2827f3,'totalTokens':_0x1d04cb,'queueId':_0x873d96,'maxMessages':_0x98dd39,'companyId':_0x2fcea6,'voice':_0x4716ea,'voiceKey':_0x4dcb4c,'voiceRegion':_0x4f7f7a}),_0x37d0e5=(0x0,socket_1[_0x4d91db(0xbe)])();return _0x37d0e5[_0x4d91db(0xbd)](_0x4d91db(0xda)+_0x2fcea6+_0x4d91db(0xdc),{'action':_0x4d91db(0xb9),'prompt':_0x41b034}),_0x1b9447['status'](0xc8)[_0x4d91db(0xcb)](_0x41b034);};exports[a25_0x4bcab2(0xba)]=store;const show=async(_0x3e82cb,_0x411446)=>{const _0x16b096=a25_0x4bcab2,{promptId:_0xdb8c1d}=_0x3e82cb['params'],_0x3a0dc2=_0x3e82cb[_0x16b096(0xb7)]['authorization'],[,_0x56bcab]=_0x3a0dc2[_0x16b096(0xc4)]('\x20'),_0x177028=(0x0,jsonwebtoken_1[_0x16b096(0xd1)])(_0x56bcab,auth_1[_0x16b096(0xd7)][_0x16b096(0xd0)]),{companyId:_0x4ff2c3}=_0x177028,_0xe71689=await(0x0,ShowPromptService_1[_0x16b096(0xd7)])({'promptId':_0xdb8c1d,'companyId':_0x4ff2c3});return _0x411446[_0x16b096(0xb6)](0xc8)[_0x16b096(0xcb)](_0xe71689);};exports['show']=show;const update=async(_0x1cd2ab,_0x4a0ec0)=>{const _0x53b470=a25_0x4bcab2,{promptId:_0x54c89d}=_0x1cd2ab['params'],_0x1d26c4=_0x1cd2ab[_0x53b470(0xcf)],_0x75604e=_0x1cd2ab[_0x53b470(0xb7)][_0x53b470(0xc6)],[,_0x153e23]=_0x75604e[_0x53b470(0xc4)]('\x20'),_0x15ecf3=(0x0,jsonwebtoken_1[_0x53b470(0xd1)])(_0x153e23,auth_1[_0x53b470(0xd7)][_0x53b470(0xd0)]),{companyId:_0x527500}=_0x15ecf3,_0x48e251=await(0x0,UpdatePromptService_1[_0x53b470(0xd7)])({'promptData':_0x1d26c4,'promptId':_0x54c89d,'companyId':_0x527500}),_0x13f532=(0x0,socket_1['getIO'])();return _0x13f532['emit']('company-'+_0x527500+_0x53b470(0xdc),{'action':'update','prompt':_0x48e251}),_0x4a0ec0[_0x53b470(0xb6)](0xc8)[_0x53b470(0xcb)](_0x48e251);};exports['update']=update;const remove=async(_0x4aa6ad,_0x535702)=>{const _0x71ec07=a25_0x4bcab2,{promptId:_0x4b343a}=_0x4aa6ad[_0x71ec07(0xce)],_0x1cad72=_0x4aa6ad[_0x71ec07(0xb7)][_0x71ec07(0xc6)],[,_0x22d646]=_0x1cad72['split']('\x20'),_0x54b9e8=(0x0,jsonwebtoken_1['verify'])(_0x22d646,auth_1['default'][_0x71ec07(0xd0)]),{companyId:_0x61ce34}=_0x54b9e8;try{const {count:_0x44def9}=await Whatsapp_1['default'][_0x71ec07(0xd3)]({'where':{'promptId':+_0x4b343a,'companyId':_0x61ce34}});if(_0x44def9>0x0)return _0x535702[_0x71ec07(0xb6)](0xc8)[_0x71ec07(0xcb)]({'message':_0x71ec07(0xe0)});await(0x0,DeletePromptService_1[_0x71ec07(0xd7)])(_0x4b343a,_0x61ce34);const _0x2d517b=(0x0,socket_1[_0x71ec07(0xbe)])();return _0x2d517b[_0x71ec07(0xbd)](_0x71ec07(0xda)+_0x61ce34+_0x71ec07(0xdc),{'action':_0x71ec07(0xbf),'intelligenceId':+_0x4b343a}),_0x535702[_0x71ec07(0xb6)](0xc8)[_0x71ec07(0xcb)]({'message':_0x71ec07(0xc8)});}catch(_0x54f1b2){return _0x535702['status'](0x1f4)[_0x71ec07(0xcb)]({'message':'Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!'});}};function a25_0x1580(){const _0x1fa488=['secret','verify','show','findAndCountAll','../config/auth','15MxFdUn','index','default','../services/PromptServices/ShowPromptService','286RTEzUp','company-','../services/PromptServices/DeletePromptService','-prompt','remove','13407112THvRKv','20872AwZxqB','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!','4961490TdGyUz','status','headers','../services/PromptServices/ListPromptsService','update','store','__esModule','1404FWlMQm','emit','getIO','delete','query','../libs/socket','1070EcJwqC','../services/PromptServices/UpdatePromptService','split','676230mSxWVU','authorization','10477791xXCXvS','Prompt\x20deleted','38241zPzvDG','../models/Whatsapp','json','160090uYjCsL','jsonwebtoken','params','body'];a25_0x1580=function(){return _0x1fa488;};return a25_0x1580();}exports[a25_0x4bcab2(0xdd)]=remove;