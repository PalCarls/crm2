'use strict';const a25_0x47085c=a25_0x27f3;(function(_0x15a97d,_0x10b3a5){const _0x489f9e=a25_0x27f3,_0x529c36=_0x15a97d();while(!![]){try{const _0x9fbc0c=-parseInt(_0x489f9e(0x175))/0x1+-parseInt(_0x489f9e(0x18d))/0x2+-parseInt(_0x489f9e(0x183))/0x3+-parseInt(_0x489f9e(0x179))/0x4+-parseInt(_0x489f9e(0x166))/0x5*(parseInt(_0x489f9e(0x17d))/0x6)+-parseInt(_0x489f9e(0x184))/0x7+parseInt(_0x489f9e(0x16f))/0x8;if(_0x9fbc0c===_0x10b3a5)break;else _0x529c36['push'](_0x529c36['shift']());}catch(_0x3233af){_0x529c36['push'](_0x529c36['shift']());}}}(a25_0x45c8,0x636e0));var __importDefault=this&&this[a25_0x47085c(0x17e)]||function(_0x3cc3a9){return _0x3cc3a9&&_0x3cc3a9['__esModule']?_0x3cc3a9:{'default':_0x3cc3a9};};Object[a25_0x47085c(0x187)](exports,'__esModule',{'value':!![]}),exports['remove']=exports[a25_0x47085c(0x167)]=exports[a25_0x47085c(0x17b)]=exports[a25_0x47085c(0x169)]=exports['index']=void 0x0;function a25_0x45c8(){const _0x7ce97e=['split','getIO','../libs/socket','../services/PromptServices/CreatePromptService','574794YxVlWz','index','findAndCountAll','status','390356AGLwhs','default','show','../services/PromptServices/ListPromptsService','6qCrezU','__importDefault','remove','-prompt','body','Prompt\x20deleted','2418534LrSIKG','5289354LKjvNC','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!','company-','defineProperty','../config/auth','verify','params','json','../services/PromptServices/ShowPromptService','433966RZDGzG','../services/PromptServices/DeletePromptService','2008595AGprWE','update','query','store','emit','secret','../models/Whatsapp','headers','authorization','26081192PdMsTa','jsonwebtoken'];a25_0x45c8=function(){return _0x7ce97e;};return a25_0x45c8();}const socket_1=require(a25_0x47085c(0x173)),CreatePromptService_1=__importDefault(require(a25_0x47085c(0x174))),DeletePromptService_1=__importDefault(require(a25_0x47085c(0x165))),ListPromptsService_1=__importDefault(require(a25_0x47085c(0x17c))),ShowPromptService_1=__importDefault(require(a25_0x47085c(0x18c))),UpdatePromptService_1=__importDefault(require('../services/PromptServices/UpdatePromptService')),Whatsapp_1=__importDefault(require(a25_0x47085c(0x16c))),jsonwebtoken_1=require(a25_0x47085c(0x170)),auth_1=__importDefault(require(a25_0x47085c(0x188))),index=async(_0x9f568a,_0x35d60b)=>{const _0x377f54=a25_0x47085c,{pageNumber:_0x4bc09a,searchParam:_0x3d84c1}=_0x9f568a[_0x377f54(0x168)],_0x7e9c6=_0x9f568a[_0x377f54(0x16d)][_0x377f54(0x16e)],[,_0x473e51]=_0x7e9c6['split']('\x20'),_0x153e56=(0x0,jsonwebtoken_1[_0x377f54(0x189)])(_0x473e51,auth_1[_0x377f54(0x17a)][_0x377f54(0x16b)]),{companyId:_0x32eb48}=_0x153e56,{prompts:_0x2c584e,count:_0xf073b8,hasMore:_0x121069}=await(0x0,ListPromptsService_1[_0x377f54(0x17a)])({'searchParam':_0x3d84c1,'pageNumber':_0x4bc09a,'companyId':_0x32eb48});return _0x35d60b['status'](0xc8)['json']({'prompts':_0x2c584e,'count':_0xf073b8,'hasMore':_0x121069});};exports[a25_0x47085c(0x176)]=index;const store=async(_0x147b06,_0x21b170)=>{const _0x16e28c=a25_0x47085c,_0x571c5d=_0x147b06[_0x16e28c(0x16d)][_0x16e28c(0x16e)],[,_0x515ab8]=_0x571c5d[_0x16e28c(0x171)]('\x20'),_0x5a37f7=(0x0,jsonwebtoken_1['verify'])(_0x515ab8,auth_1[_0x16e28c(0x17a)][_0x16e28c(0x16b)]),{companyId:_0x391db9}=_0x5a37f7,{name:_0x16fc5c,apiKey:_0x464867,prompt:_0xf468e5,maxTokens:_0x16b9e2,temperature:_0x23bba1,promptTokens:_0x123d45,completionTokens:_0x28b101,totalTokens:_0x2e5c7f,queueId:_0x36fbfd,maxMessages:_0x2170a6,voice:_0xf80ac6,voiceKey:_0x40b1a3,voiceRegion:_0x5c9970}=_0x147b06['body'],_0x2a43b0=await(0x0,CreatePromptService_1[_0x16e28c(0x17a)])({'name':_0x16fc5c,'apiKey':_0x464867,'prompt':_0xf468e5,'maxTokens':_0x16b9e2,'temperature':_0x23bba1,'promptTokens':_0x123d45,'completionTokens':_0x28b101,'totalTokens':_0x2e5c7f,'queueId':_0x36fbfd,'maxMessages':_0x2170a6,'companyId':_0x391db9,'voice':_0xf80ac6,'voiceKey':_0x40b1a3,'voiceRegion':_0x5c9970}),_0x1eb2d5=(0x0,socket_1[_0x16e28c(0x172)])();return _0x1eb2d5[_0x16e28c(0x16a)](_0x16e28c(0x186)+_0x391db9+_0x16e28c(0x180),{'action':_0x16e28c(0x167),'prompt':_0x2a43b0}),_0x21b170[_0x16e28c(0x178)](0xc8)[_0x16e28c(0x18b)](_0x2a43b0);};exports['store']=store;const show=async(_0x294449,_0xa2dcb4)=>{const _0x4d6127=a25_0x47085c,{promptId:_0x1fc1c1}=_0x294449[_0x4d6127(0x18a)],_0x235161=_0x294449[_0x4d6127(0x16d)][_0x4d6127(0x16e)],[,_0x2a0538]=_0x235161['split']('\x20'),_0xb0caab=(0x0,jsonwebtoken_1[_0x4d6127(0x189)])(_0x2a0538,auth_1[_0x4d6127(0x17a)][_0x4d6127(0x16b)]),{companyId:_0x216511}=_0xb0caab,_0x545378=await(0x0,ShowPromptService_1[_0x4d6127(0x17a)])({'promptId':_0x1fc1c1,'companyId':_0x216511});return _0xa2dcb4[_0x4d6127(0x178)](0xc8)[_0x4d6127(0x18b)](_0x545378);};exports[a25_0x47085c(0x17b)]=show;const update=async(_0x28f7d3,_0x3cbf6d)=>{const _0xdc09a7=a25_0x47085c,{promptId:_0x4664c3}=_0x28f7d3['params'],_0x2705fb=_0x28f7d3[_0xdc09a7(0x181)],_0x3ca5f9=_0x28f7d3['headers'][_0xdc09a7(0x16e)],[,_0x2324a6]=_0x3ca5f9[_0xdc09a7(0x171)]('\x20'),_0x27d0cc=(0x0,jsonwebtoken_1[_0xdc09a7(0x189)])(_0x2324a6,auth_1['default']['secret']),{companyId:_0x5a7faf}=_0x27d0cc,_0x3f83ef=await(0x0,UpdatePromptService_1['default'])({'promptData':_0x2705fb,'promptId':_0x4664c3,'companyId':_0x5a7faf}),_0x40bd7a=(0x0,socket_1[_0xdc09a7(0x172)])();return _0x40bd7a[_0xdc09a7(0x16a)](_0xdc09a7(0x186)+_0x5a7faf+_0xdc09a7(0x180),{'action':_0xdc09a7(0x167),'prompt':_0x3f83ef}),_0x3cbf6d[_0xdc09a7(0x178)](0xc8)['json'](_0x3f83ef);};function a25_0x27f3(_0x23036b,_0x510231){const _0x45c83d=a25_0x45c8();return a25_0x27f3=function(_0x27f352,_0x40f655){_0x27f352=_0x27f352-0x165;let _0x359952=_0x45c83d[_0x27f352];return _0x359952;},a25_0x27f3(_0x23036b,_0x510231);}exports[a25_0x47085c(0x167)]=update;const remove=async(_0x57812f,_0x5cde16)=>{const _0x5540b0=a25_0x47085c,{promptId:_0x3fdfea}=_0x57812f[_0x5540b0(0x18a)],_0x2c5175=_0x57812f[_0x5540b0(0x16d)]['authorization'],[,_0x588e88]=_0x2c5175['split']('\x20'),_0x2b11d8=(0x0,jsonwebtoken_1[_0x5540b0(0x189)])(_0x588e88,auth_1[_0x5540b0(0x17a)]['secret']),{companyId:_0x434422}=_0x2b11d8;try{const {count:_0x3c0127}=await Whatsapp_1[_0x5540b0(0x17a)][_0x5540b0(0x177)]({'where':{'promptId':+_0x3fdfea,'companyId':_0x434422}});if(_0x3c0127>0x0)return _0x5cde16[_0x5540b0(0x178)](0xc8)['json']({'message':_0x5540b0(0x185)});await(0x0,DeletePromptService_1[_0x5540b0(0x17a)])(_0x3fdfea,_0x434422);const _0x322d02=(0x0,socket_1[_0x5540b0(0x172)])();return _0x322d02['emit'](_0x5540b0(0x186)+_0x434422+_0x5540b0(0x180),{'action':'delete','intelligenceId':+_0x3fdfea}),_0x5cde16[_0x5540b0(0x178)](0xc8)[_0x5540b0(0x18b)]({'message':_0x5540b0(0x182)});}catch(_0x55d4e6){return _0x5cde16[_0x5540b0(0x178)](0x1f4)[_0x5540b0(0x18b)]({'message':'Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!'});}};exports[a25_0x47085c(0x17f)]=remove;