'use strict';const a292_0x388683=a292_0x25b7;function a292_0xa403(){const _0x3d5be9=['map','delFromPattern','990720VLHEry','87695FLraTh','util','__esModule','getFromParams','get','bind','25509cMihTr','ioredis','stringify','del','../config/redis','setFromParams','default','keys','defineProperty','1620864ZqOQIU','promisify','getKeys','35ZTebph','getInstance','instance','set','encryptParams','redis','336570bVDbPo','387306yrnFLE','1280645IJMbFA','crypto-js/hmac-sha512'];a292_0xa403=function(){return _0x3d5be9;};return a292_0xa403();}(function(_0x38fe3f,_0x11c89c){const _0x4cbc25=a292_0x25b7,_0x5df581=_0x38fe3f();while(!![]){try{const _0x22a9ac=-parseInt(_0x4cbc25(0x1e5))/0x1+-parseInt(_0x4cbc25(0x1df))/0x2+-parseInt(_0x4cbc25(0x1eb))/0x3+-parseInt(_0x4cbc25(0x1e4))/0x4+-parseInt(_0x4cbc25(0x1e0))/0x5+-parseInt(_0x4cbc25(0x1de))/0x6+parseInt(_0x4cbc25(0x1f7))/0x7*(parseInt(_0x4cbc25(0x1f4))/0x8);if(_0x22a9ac===_0x11c89c)break;else _0x5df581['push'](_0x5df581['shift']());}catch(_0x351b00){_0x5df581['push'](_0x5df581['shift']());}}}(a292_0xa403,0x27dd5));var __importDefault=this&&this['__importDefault']||function(_0x3e7b61){return _0x3e7b61&&_0x3e7b61['__esModule']?_0x3e7b61:{'default':_0x3e7b61};};Object[a292_0x388683(0x1f3)](exports,a292_0x388683(0x1e7),{'value':!![]});function a292_0x25b7(_0x2b0d99,_0x5b24c0){const _0xa403e0=a292_0xa403();return a292_0x25b7=function(_0x25b71e,_0x37e40c){_0x25b71e=_0x25b71e-0x1da;let _0x54d115=_0xa403e0[_0x25b71e];return _0x54d115;},a292_0x25b7(_0x2b0d99,_0x5b24c0);}const util_1=__importDefault(require(a292_0x388683(0x1e6))),ioredis_1=__importDefault(require(a292_0x388683(0x1ec))),hmac_sha512_1=__importDefault(require(a292_0x388683(0x1e1))),enc_base64_1=__importDefault(require('crypto-js/enc-base64')),redis_1=require(a292_0x388683(0x1ef));class CacheSingleton{constructor(_0x296c86){const _0xdd6b1f=a292_0x388683;this['redis']=_0x296c86,this['set']=util_1[_0xdd6b1f(0x1f1)][_0xdd6b1f(0x1f5)](this['redis'][_0xdd6b1f(0x1db)])['bind'](this['redis']),this[_0xdd6b1f(0x1e9)]=util_1[_0xdd6b1f(0x1f1)]['promisify'](this[_0xdd6b1f(0x1dd)][_0xdd6b1f(0x1e9)])[_0xdd6b1f(0x1ea)](this[_0xdd6b1f(0x1dd)]),this['keys']=util_1['default'][_0xdd6b1f(0x1f5)](this[_0xdd6b1f(0x1dd)][_0xdd6b1f(0x1f2)])[_0xdd6b1f(0x1ea)](this[_0xdd6b1f(0x1dd)]),this[_0xdd6b1f(0x1ee)]=util_1[_0xdd6b1f(0x1f1)]['promisify'](this['redis']['del'])[_0xdd6b1f(0x1ea)](this[_0xdd6b1f(0x1dd)]);}static[a292_0x388683(0x1f8)](_0x552cb5){const _0x53093a=a292_0x388683;return!CacheSingleton['instance']&&(CacheSingleton[_0x53093a(0x1da)]=new CacheSingleton(_0x552cb5)),CacheSingleton[_0x53093a(0x1da)];}static['encryptParams'](_0x1e43fe){const _0x4e3075=a292_0x388683,_0x304627=JSON[_0x4e3075(0x1ed)](_0x1e43fe),_0x1d6bd9=enc_base64_1[_0x4e3075(0x1f1)][_0x4e3075(0x1ed)]((0x0,hmac_sha512_1[_0x4e3075(0x1f1)])(_0x1e43fe,_0x304627));return _0x1d6bd9;}async['set'](_0x5436da,_0x371cda,_0x39c419,_0x180ef3){const _0x325704=a292_0x388683,_0x28023e=util_1[_0x325704(0x1f1)][_0x325704(0x1f5)](this[_0x325704(0x1dd)][_0x325704(0x1db)])[_0x325704(0x1ea)](this[_0x325704(0x1dd)]);if(_0x39c419!==undefined&&_0x180ef3!==undefined)return _0x28023e(_0x5436da,_0x371cda,_0x39c419,_0x180ef3);return _0x28023e(_0x5436da,_0x371cda);}async[a292_0x388683(0x1e9)](_0x3b4a1d){const _0x2db858=a292_0x388683,_0x8572fd=util_1[_0x2db858(0x1f1)][_0x2db858(0x1f5)](this['redis'][_0x2db858(0x1e9)])['bind'](this[_0x2db858(0x1dd)]);return _0x8572fd(_0x3b4a1d);}async[a292_0x388683(0x1f6)](_0x40c343){const _0x4d5be0=a292_0x388683,_0x2fe884=util_1[_0x4d5be0(0x1f1)][_0x4d5be0(0x1f5)](this['redis']['keys'])[_0x4d5be0(0x1ea)](this[_0x4d5be0(0x1dd)]);return _0x2fe884(_0x40c343);}async[a292_0x388683(0x1ee)](_0x36d62d){const _0x518d16=a292_0x388683,_0xd79b97=util_1['default'][_0x518d16(0x1f5)](this['redis'][_0x518d16(0x1ee)])[_0x518d16(0x1ea)](this[_0x518d16(0x1dd)]);return _0xd79b97(_0x36d62d);}async[a292_0x388683(0x1e3)](_0x4a30a5){const _0x4a44bf=a292_0x388683,_0x2b85f8=await this[_0x4a44bf(0x1f6)](_0x4a30a5);await Promise['all'](_0x2b85f8[_0x4a44bf(0x1e2)](_0x3e9908=>this[_0x4a44bf(0x1ee)](_0x3e9908)));}async[a292_0x388683(0x1f0)](_0x42608d,_0x78bdb6,_0x466a70,_0xd29166,_0x214a57){const _0x64d5e9=a292_0x388683,_0x46c72d=_0x42608d+':'+CacheSingleton[_0x64d5e9(0x1dc)](_0x78bdb6);if(_0xd29166!==undefined&&_0x214a57!==undefined)return this[_0x64d5e9(0x1db)](_0x46c72d,_0x466a70,_0xd29166,_0x214a57);return this[_0x64d5e9(0x1db)](_0x46c72d,_0x466a70);}async[a292_0x388683(0x1e8)](_0x475d19,_0x3eae90){const _0x156fcf=a292_0x388683,_0x3484e0=_0x475d19+':'+CacheSingleton[_0x156fcf(0x1dc)](_0x3eae90);return this[_0x156fcf(0x1e9)](_0x3484e0);}async['delFromParams'](_0x3b646b,_0x53240c){const _0x32f3fc=a292_0x388683,_0x45651e=_0x3b646b+':'+CacheSingleton['encryptParams'](_0x53240c);return this[_0x32f3fc(0x1ee)](_0x45651e);}['getRedisInstance'](){const _0x29b117=a292_0x388683;return this[_0x29b117(0x1dd)];}}const redisInstance=new ioredis_1[(a292_0x388683(0x1f1))](redis_1['REDIS_URI_CONNECTION']);exports['default']=CacheSingleton[a292_0x388683(0x1f8)](redisInstance);