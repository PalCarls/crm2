'use strict';const a257_0x32e9a2=a257_0x4162;(function(_0x141520,_0x3e45f0){const _0x1a92e2=a257_0x4162,_0x46c1ef=_0x141520();while(!![]){try{const _0x3dd761=-parseInt(_0x1a92e2(0x146))/0x1+-parseInt(_0x1a92e2(0x150))/0x2*(parseInt(_0x1a92e2(0x141))/0x3)+parseInt(_0x1a92e2(0x13e))/0x4*(-parseInt(_0x1a92e2(0x155))/0x5)+parseInt(_0x1a92e2(0x13b))/0x6+parseInt(_0x1a92e2(0x156))/0x7*(parseInt(_0x1a92e2(0x147))/0x8)+parseInt(_0x1a92e2(0x13d))/0x9+parseInt(_0x1a92e2(0x14a))/0xa;if(_0x3dd761===_0x3e45f0)break;else _0x46c1ef['push'](_0x46c1ef['shift']());}catch(_0x3334bb){_0x46c1ef['push'](_0x46c1ef['shift']());}}}(a257_0x24eb,0x2f0ac));function a257_0x24eb(){const _0x2d324d=['joinChatBox','Server','1870650KotWwi','FRONTEND_URL','getIO','UserConnection','Client\x20Connected','socket.io','6gZqMlx','userMonitor','info','__importDefault','connection','72350fdFmDz','86352ExSYWw','joinNotification','__esModule','defineProperty','logger','2017290lBtIeb','join','2398122IPyCaG','96LZhLbl','env','default','204783auXIzs','../queues/userMonitor','handshake','A\x20client\x20joined\x20notification\x20channel','A\x20client\x20joined\x20a\x20ticket\x20channel','205359dnukGr','104WdJhWB'];a257_0x24eb=function(){return _0x2d324d;};return a257_0x24eb();}var __importDefault=this&&this[a257_0x32e9a2(0x153)]||function(_0x489001){const _0x479433=a257_0x32e9a2;return _0x489001&&_0x489001[_0x479433(0x158)]?_0x489001:{'default':_0x489001};};Object[a257_0x32e9a2(0x139)](exports,'__esModule',{'value':!![]}),exports[a257_0x32e9a2(0x14c)]=exports['initIO']=void 0x0;const socket_io_1=require(a257_0x32e9a2(0x14f)),AppError_1=__importDefault(require('../errors/AppError')),logger_1=require('../utils/logger'),userMonitor_1=require(a257_0x32e9a2(0x142));let io;const initIO=_0x34e436=>{const _0x198c0a=a257_0x32e9a2;return io=new socket_io_1[(_0x198c0a(0x149))](_0x34e436,{'cors':{'origin':process[_0x198c0a(0x13f)][_0x198c0a(0x14b)]}}),io['on'](_0x198c0a(0x154),async _0x3c3836=>{const _0x58c6e4=_0x198c0a;logger_1[_0x58c6e4(0x13a)][_0x58c6e4(0x152)](_0x58c6e4(0x14e));const {userId:_0x5d4960}=_0x3c3836[_0x58c6e4(0x143)]['query'];_0x3c3836['on'](_0x58c6e4(0x148),_0x56417d=>{const _0x2d8596=_0x58c6e4;logger_1[_0x2d8596(0x13a)][_0x2d8596(0x152)](_0x2d8596(0x145)),_0x3c3836[_0x2d8596(0x13c)](_0x56417d);}),_0x3c3836['on'](_0x58c6e4(0x157),()=>{const _0x177a8d=_0x58c6e4;logger_1[_0x177a8d(0x13a)][_0x177a8d(0x152)](_0x177a8d(0x144)),_0x3c3836[_0x177a8d(0x13c)]('notification');}),_0x3c3836['on']('joinTickets',_0x18e20e=>{const _0x29205d=_0x58c6e4;logger_1[_0x29205d(0x13a)]['info']('A\x20client\x20joined\x20to\x20'+_0x18e20e+'\x20tickets\x20channel.'),_0x3c3836[_0x29205d(0x13c)](_0x18e20e);}),userMonitor_1[_0x58c6e4(0x151)]['add'](_0x58c6e4(0x14d),{'id':_0x5d4960},{'removeOnComplete':{'age':0x3c*0x3c,'count':0xa},'removeOnFail':{'age':0x3c*0x3c,'count':0xa}});}),io;};function a257_0x4162(_0x35cb56,_0x13f216){const _0x24eb70=a257_0x24eb();return a257_0x4162=function(_0x416270,_0x3d6d96){_0x416270=_0x416270-0x139;let _0x164465=_0x24eb70[_0x416270];return _0x164465;},a257_0x4162(_0x35cb56,_0x13f216);}exports['initIO']=initIO;const getIO=()=>{const _0x500725=a257_0x32e9a2;if(!io)throw new AppError_1[(_0x500725(0x140))]('Socket\x20IO\x20not\x20initialized');return io;};exports[a257_0x32e9a2(0x14c)]=getIO;