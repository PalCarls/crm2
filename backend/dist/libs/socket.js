'use strict';const a293_0x1080ca=a293_0x42f0;function a293_0x5716(){const _0x425fb4=['__esModule','getIO','defineProperty','../queues/userMonitor','6CVIfra','initIO','join','3019072TPTlPa','default','2272278RZvSct','notification','socket.io','177190ICPPUb','../errors/AppError','UserConnection','handshake','add','userMonitor','18261CMGXeA','999960Vuoxlv','connection','FRONTEND_URL','6769280hxNJBg','151358DTGfdF','joinTickets','Socket\x20IO\x20not\x20initialized','joinChatBox'];a293_0x5716=function(){return _0x425fb4;};return a293_0x5716();}(function(_0x1677c6,_0x3ab75){const _0x30902f=a293_0x42f0,_0x1b5da8=_0x1677c6();while(!![]){try{const _0x3dec0b=-parseInt(_0x30902f(0x94))/0x1*(-parseInt(_0x30902f(0x9c))/0x2)+parseInt(_0x30902f(0x8f))/0x3+-parseInt(_0x30902f(0x90))/0x4+parseInt(_0x30902f(0x89))/0x5+-parseInt(_0x30902f(0x86))/0x6+-parseInt(_0x30902f(0x9f))/0x7+parseInt(_0x30902f(0x93))/0x8;if(_0x3dec0b===_0x3ab75)break;else _0x1b5da8['push'](_0x1b5da8['shift']());}catch(_0x3d8f50){_0x1b5da8['push'](_0x1b5da8['shift']());}}}(a293_0x5716,0x44ca0));var __importDefault=this&&this['__importDefault']||function(_0xc6aad){const _0x30fa8b=a293_0x42f0;return _0xc6aad&&_0xc6aad[_0x30fa8b(0x98)]?_0xc6aad:{'default':_0xc6aad};};Object[a293_0x1080ca(0x9a)](exports,a293_0x1080ca(0x98),{'value':!![]}),exports['getIO']=exports[a293_0x1080ca(0x9d)]=void 0x0;const socket_io_1=require(a293_0x1080ca(0x88)),AppError_1=__importDefault(require(a293_0x1080ca(0x8a))),userMonitor_1=require(a293_0x1080ca(0x9b));let io;const initIO=_0x5a421f=>{const _0xe28e6d=a293_0x1080ca;return io=new socket_io_1['Server'](_0x5a421f,{'cors':{'origin':process['env'][_0xe28e6d(0x92)]}}),io['on'](_0xe28e6d(0x91),async _0xce6d8a=>{const _0x513bf7=_0xe28e6d,{userId:_0x279cfc}=_0xce6d8a[_0x513bf7(0x8c)]['query'];_0xce6d8a['on'](_0x513bf7(0x97),_0x3e6333=>{const _0x4cbe58=_0x513bf7;_0xce6d8a[_0x4cbe58(0x9e)](_0x3e6333);}),_0xce6d8a['on']('joinNotification',()=>{const _0x59d4dd=_0x513bf7;_0xce6d8a[_0x59d4dd(0x9e)](_0x59d4dd(0x87));}),_0xce6d8a['on'](_0x513bf7(0x95),_0x2065d2=>{const _0x14e509=_0x513bf7;_0xce6d8a[_0x14e509(0x9e)](_0x2065d2);}),userMonitor_1[_0x513bf7(0x8e)][_0x513bf7(0x8d)](_0x513bf7(0x8b),{'id':_0x279cfc},{'removeOnComplete':{'age':0x3c*0x3c,'count':0xa},'removeOnFail':{'age':0x3c*0x3c,'count':0xa}});}),io;};exports[a293_0x1080ca(0x9d)]=initIO;function a293_0x42f0(_0x2c6182,_0x56e9d6){const _0x5716be=a293_0x5716();return a293_0x42f0=function(_0x42f011,_0x315348){_0x42f011=_0x42f011-0x86;let _0x571f9c=_0x5716be[_0x42f011];return _0x571f9c;},a293_0x42f0(_0x2c6182,_0x56e9d6);}const getIO=()=>{const _0x7b0dfe=a293_0x1080ca;if(!io)throw new AppError_1[(_0x7b0dfe(0xa0))](_0x7b0dfe(0x96));return io;};exports[a293_0x1080ca(0x99)]=getIO;