'use strict';function a230_0x47ea(){const _0x37c484=['socket.io','notification','1737631mqxzFP','83632XABDxj','../utils/logger','40QKXeDq','getIO','36397251AJSvei','add','joinChatBox','7236594rfSfMB','A\x20client\x20joined\x20a\x20ticket\x20channel','join','2045676gmdefw','defineProperty','__importDefault','__esModule','info','15bYaaIo','logger','5131443SxxBMw','joinNotification','default','../errors/AppError','196528olTiQh','UserConnection','A\x20client\x20joined\x20to\x20','initIO','userMonitor'];a230_0x47ea=function(){return _0x37c484;};return a230_0x47ea();}const a230_0x56b34f=a230_0x1ad4;(function(_0x5559d4,_0x56b5e4){const _0x543e88=a230_0x1ad4,_0x10ca49=_0x5559d4();while(!![]){try{const _0x514c66=-parseInt(_0x543e88(0x16a))/0x1+parseInt(_0x543e88(0x15f))/0x2+parseInt(_0x543e88(0x166))/0x3+parseInt(_0x543e88(0x155))/0x4*(-parseInt(_0x543e88(0x164))/0x5)+parseInt(_0x543e88(0x15c))/0x6+-parseInt(_0x543e88(0x154))/0x7*(-parseInt(_0x543e88(0x157))/0x8)+-parseInt(_0x543e88(0x159))/0x9;if(_0x514c66===_0x56b5e4)break;else _0x10ca49['push'](_0x10ca49['shift']());}catch(_0x1d1878){_0x10ca49['push'](_0x10ca49['shift']());}}}(a230_0x47ea,0xd6288));var __importDefault=this&&this[a230_0x56b34f(0x161)]||function(_0x247926){const _0x4ca8d7=a230_0x56b34f;return _0x247926&&_0x247926[_0x4ca8d7(0x162)]?_0x247926:{'default':_0x247926};};Object[a230_0x56b34f(0x160)](exports,a230_0x56b34f(0x162),{'value':!![]}),exports[a230_0x56b34f(0x158)]=exports[a230_0x56b34f(0x16d)]=void 0x0;function a230_0x1ad4(_0x4a54a8,_0x2b0a81){const _0x47eab4=a230_0x47ea();return a230_0x1ad4=function(_0x1ad451,_0x3d231b){_0x1ad451=_0x1ad451-0x151;let _0xf7f9de=_0x47eab4[_0x1ad451];return _0xf7f9de;},a230_0x1ad4(_0x4a54a8,_0x2b0a81);}const socket_io_1=require(a230_0x56b34f(0x152)),AppError_1=__importDefault(require(a230_0x56b34f(0x169))),logger_1=require(a230_0x56b34f(0x156)),userMonitor_1=require('../queues/userMonitor');let io;const initIO=_0x5cba4e=>{return io=new socket_io_1['Server'](_0x5cba4e,{'cors':{'origin':process['env']['FRONTEND_URL']}}),io['on']('connection',async _0x2b9553=>{const _0x2bdfd9=a230_0x1ad4;logger_1[_0x2bdfd9(0x165)]['info']('Client\x20Connected');const {userId:_0x2c25ac}=_0x2b9553['handshake']['query'];_0x2b9553['on'](_0x2bdfd9(0x15b),_0x48a8fd=>{const _0x2ba706=_0x2bdfd9;logger_1[_0x2ba706(0x165)][_0x2ba706(0x163)](_0x2ba706(0x15d)),_0x2b9553['join'](_0x48a8fd);}),_0x2b9553['on'](_0x2bdfd9(0x167),()=>{const _0x2243ee=_0x2bdfd9;logger_1[_0x2243ee(0x165)][_0x2243ee(0x163)]('A\x20client\x20joined\x20notification\x20channel'),_0x2b9553[_0x2243ee(0x15e)](_0x2243ee(0x153));}),_0x2b9553['on']('joinTickets',_0x7a4569=>{const _0x303476=_0x2bdfd9;logger_1['logger'][_0x303476(0x163)](_0x303476(0x16c)+_0x7a4569+'\x20tickets\x20channel.'),_0x2b9553[_0x303476(0x15e)](_0x7a4569);}),userMonitor_1[_0x2bdfd9(0x151)][_0x2bdfd9(0x15a)](_0x2bdfd9(0x16b),{'id':_0x2c25ac},{'removeOnComplete':{'age':0x3c*0x3c,'count':0xa},'removeOnFail':{'age':0x3c*0x3c,'count':0xa}});}),io;};exports[a230_0x56b34f(0x16d)]=initIO;const getIO=()=>{const _0x2bee50=a230_0x56b34f;if(!io)throw new AppError_1[(_0x2bee50(0x168))]('Socket\x20IO\x20not\x20initialized');return io;};exports[a230_0x56b34f(0x158)]=getIO;