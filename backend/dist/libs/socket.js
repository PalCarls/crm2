'use strict';const a257_0x1e73e=a257_0x21c7;(function(_0x264797,_0x2a2386){const _0x375109=a257_0x21c7,_0xda4d2c=_0x264797();while(!![]){try{const _0x38b391=-parseInt(_0x375109(0xdc))/0x1+parseInt(_0x375109(0xde))/0x2*(parseInt(_0x375109(0xf8))/0x3)+-parseInt(_0x375109(0xe9))/0x4*(parseInt(_0x375109(0xf1))/0x5)+-parseInt(_0x375109(0xe5))/0x6+parseInt(_0x375109(0xfc))/0x7*(-parseInt(_0x375109(0xfb))/0x8)+parseInt(_0x375109(0xef))/0x9*(parseInt(_0x375109(0xdb))/0xa)+-parseInt(_0x375109(0xf4))/0xb*(-parseInt(_0x375109(0xe0))/0xc);if(_0x38b391===_0x2a2386)break;else _0xda4d2c['push'](_0xda4d2c['shift']());}catch(_0x54de0b){_0xda4d2c['push'](_0xda4d2c['shift']());}}}(a257_0x4294,0xa54ab));function a257_0x21c7(_0x4cd09a,_0x557589){const _0x429408=a257_0x4294();return a257_0x21c7=function(_0x21c7b3,_0x446994){_0x21c7b3=_0x21c7b3-0xdb;let _0x59b55c=_0x429408[_0x21c7b3];return _0x59b55c;},a257_0x21c7(_0x4cd09a,_0x557589);}var __importDefault=this&&this[a257_0x1e73e(0xf6)]||function(_0x25b248){const _0x325bda=a257_0x1e73e;return _0x25b248&&_0x25b248[_0x325bda(0xee)]?_0x25b248:{'default':_0x25b248};};Object[a257_0x1e73e(0xf9)](exports,a257_0x1e73e(0xee),{'value':!![]}),exports[a257_0x1e73e(0xec)]=exports[a257_0x1e73e(0xeb)]=void 0x0;const socket_io_1=require('socket.io'),AppError_1=__importDefault(require('../errors/AppError')),logger_1=require('../utils/logger'),userMonitor_1=require(a257_0x1e73e(0xfd));function a257_0x4294(){const _0x50b2e6=['join','6047256cXWCRV','Socket\x20IO\x20not\x20initialized','FRONTEND_URL','joinTickets','248096junbpQ','Server','initIO','getIO','env','__esModule','63CyFvqw','\x20tickets\x20channel.','80YTvQXd','notification','A\x20client\x20joined\x20a\x20ticket\x20channel','1066582OswTlY','UserConnection','__importDefault','add','618tlFhAE','defineProperty','query','5044112VufsUw','7tEkzOx','../queues/userMonitor','userMonitor','218180rVeYyq','39457mfMUBO','default','11246SUWzFP','Client\x20Connected','252CZdyCz','logger','A\x20client\x20joined\x20to\x20','info'];a257_0x4294=function(){return _0x50b2e6;};return a257_0x4294();}let io;const initIO=_0x41d959=>{const _0x4da5d1=a257_0x1e73e;return io=new socket_io_1[(_0x4da5d1(0xea))](_0x41d959,{'cors':{'origin':process[_0x4da5d1(0xed)][_0x4da5d1(0xe7)]}}),io['on']('connection',async _0xb00a4a=>{const _0xaec91e=_0x4da5d1;logger_1[_0xaec91e(0xe1)][_0xaec91e(0xe3)](_0xaec91e(0xdf));const {userId:_0x267113}=_0xb00a4a['handshake'][_0xaec91e(0xfa)];_0xb00a4a['on']('joinChatBox',_0x4e57e9=>{const _0x2fc26d=_0xaec91e;logger_1[_0x2fc26d(0xe1)][_0x2fc26d(0xe3)](_0x2fc26d(0xf3)),_0xb00a4a[_0x2fc26d(0xe4)](_0x4e57e9);}),_0xb00a4a['on']('joinNotification',()=>{const _0x2303de=_0xaec91e;logger_1[_0x2303de(0xe1)][_0x2303de(0xe3)]('A\x20client\x20joined\x20notification\x20channel'),_0xb00a4a[_0x2303de(0xe4)](_0x2303de(0xf2));}),_0xb00a4a['on'](_0xaec91e(0xe8),_0x4fadb3=>{const _0x3afc66=_0xaec91e;logger_1['logger']['info'](_0x3afc66(0xe2)+_0x4fadb3+_0x3afc66(0xf0)),_0xb00a4a[_0x3afc66(0xe4)](_0x4fadb3);}),userMonitor_1[_0xaec91e(0xfe)][_0xaec91e(0xf7)](_0xaec91e(0xf5),{'id':_0x267113},{'removeOnComplete':{'age':0x3c*0x3c,'count':0xa},'removeOnFail':{'age':0x3c*0x3c,'count':0xa}});}),io;};exports[a257_0x1e73e(0xeb)]=initIO;const getIO=()=>{const _0x2066ab=a257_0x1e73e;if(!io)throw new AppError_1[(_0x2066ab(0xdd))](_0x2066ab(0xe6));return io;};exports[a257_0x1e73e(0xec)]=getIO;