'use strict';const a300_0x2f8ee6=a300_0x3e74;(function(_0x5dd396,_0x5d9ddb){const _0x581347=a300_0x3e74,_0x2f2ca1=_0x5dd396();while(!![]){try{const _0x5c68a2=parseInt(_0x581347(0x14d))/0x1+parseInt(_0x581347(0x151))/0x2+-parseInt(_0x581347(0x140))/0x3*(parseInt(_0x581347(0x14f))/0x4)+-parseInt(_0x581347(0x138))/0x5*(parseInt(_0x581347(0x146))/0x6)+parseInt(_0x581347(0x13b))/0x7+parseInt(_0x581347(0x13f))/0x8+-parseInt(_0x581347(0x13a))/0x9;if(_0x5c68a2===_0x5d9ddb)break;else _0x2f2ca1['push'](_0x2f2ca1['shift']());}catch(_0x4ec368){_0x2f2ca1['push'](_0x2f2ca1['shift']());}}}(a300_0x47df,0xaed65));function a300_0x47df(){const _0x213a32=['9713376qoUNsl','1385496dSZadk','initIO','../queues/userMonitor','query','124672kVDHWt','3WpgMGF','handshake','__importDefault','socket.io','userMonitor','notification','436572UvmeHI','join','joinTickets','connection','Server','defineProperty','joinChatBox','1034738ETzSdX','__esModule','850348iLKkvj','default','1810516JzTPGv','10hYHIFm','getIO'];a300_0x47df=function(){return _0x213a32;};return a300_0x47df();}var __importDefault=this&&this[a300_0x2f8ee6(0x142)]||function(_0x25d49c){const _0x5f23a7=a300_0x2f8ee6;return _0x25d49c&&_0x25d49c[_0x5f23a7(0x14e)]?_0x25d49c:{'default':_0x25d49c};};function a300_0x3e74(_0x31a359,_0x23738b){const _0x47df64=a300_0x47df();return a300_0x3e74=function(_0x3e7433,_0x140f46){_0x3e7433=_0x3e7433-0x138;let _0x493726=_0x47df64[_0x3e7433];return _0x493726;},a300_0x3e74(_0x31a359,_0x23738b);}Object[a300_0x2f8ee6(0x14b)](exports,'__esModule',{'value':!![]}),exports['getIO']=exports[a300_0x2f8ee6(0x13c)]=void 0x0;const socket_io_1=require(a300_0x2f8ee6(0x143)),AppError_1=__importDefault(require('../errors/AppError')),userMonitor_1=require(a300_0x2f8ee6(0x13d));let io;const initIO=_0x409b57=>{const _0x50ad97=a300_0x2f8ee6;return io=new socket_io_1[(_0x50ad97(0x14a))](_0x409b57,{'cors':{'origin':process['env']['FRONTEND_URL']}}),io['on'](_0x50ad97(0x149),async _0x4a8c4a=>{const _0x4c795a=_0x50ad97,{userId:_0x169462}=_0x4a8c4a[_0x4c795a(0x141)][_0x4c795a(0x13e)];_0x4a8c4a['on'](_0x4c795a(0x14c),_0x1973a0=>{_0x4a8c4a['join'](_0x1973a0);}),_0x4a8c4a['on']('joinNotification',()=>{const _0x59a4ac=_0x4c795a;_0x4a8c4a[_0x59a4ac(0x147)](_0x59a4ac(0x145));}),_0x4a8c4a['on'](_0x4c795a(0x148),_0xf9173d=>{_0x4a8c4a['join'](_0xf9173d);}),userMonitor_1[_0x4c795a(0x144)]['add']('UserConnection',{'id':_0x169462},{'removeOnComplete':{'age':0x3c*0x3c,'count':0xa},'removeOnFail':{'age':0x3c*0x3c,'count':0xa}});}),io;};exports[a300_0x2f8ee6(0x13c)]=initIO;const getIO=()=>{const _0x13c386=a300_0x2f8ee6;if(!io)throw new AppError_1[(_0x13c386(0x150))]('Socket\x20IO\x20not\x20initialized');return io;};exports[a300_0x2f8ee6(0x139)]=getIO;