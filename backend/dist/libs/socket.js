'use strict';const a285_0x22f1c4=a285_0x17ab;(function(_0x435cb5,_0x441148){const _0x75becb=a285_0x17ab,_0x37319b=_0x435cb5();while(!![]){try{const _0x3afa3e=-parseInt(_0x75becb(0x1e7))/0x1+parseInt(_0x75becb(0x1d8))/0x2*(-parseInt(_0x75becb(0x1e4))/0x3)+parseInt(_0x75becb(0x1dd))/0x4*(-parseInt(_0x75becb(0x1e5))/0x5)+parseInt(_0x75becb(0x1d6))/0x6+parseInt(_0x75becb(0x1d3))/0x7+-parseInt(_0x75becb(0x1ce))/0x8+parseInt(_0x75becb(0x1d2))/0x9*(parseInt(_0x75becb(0x1dc))/0xa);if(_0x3afa3e===_0x441148)break;else _0x37319b['push'](_0x37319b['shift']());}catch(_0x303761){_0x37319b['push'](_0x37319b['shift']());}}}(a285_0x3730,0x6f7ee));var __importDefault=this&&this[a285_0x22f1c4(0x1e3)]||function(_0x52aed1){const _0x466e11=a285_0x22f1c4;return _0x52aed1&&_0x52aed1[_0x466e11(0x1de)]?_0x52aed1:{'default':_0x52aed1};};Object[a285_0x22f1c4(0x1c8)](exports,a285_0x22f1c4(0x1de),{'value':!![]}),exports[a285_0x22f1c4(0x1da)]=exports[a285_0x22f1c4(0x1ca)]=void 0x0;function a285_0x17ab(_0x2573d3,_0x43b957){const _0x3730c2=a285_0x3730();return a285_0x17ab=function(_0x17ab77,_0x3413b0){_0x17ab77=_0x17ab77-0x1c8;let _0x4534c4=_0x3730c2[_0x17ab77];return _0x4534c4;},a285_0x17ab(_0x2573d3,_0x43b957);}const socket_io_1=require('socket.io'),AppError_1=__importDefault(require(a285_0x22f1c4(0x1e2))),logger_1=require('../utils/logger'),userMonitor_1=require(a285_0x22f1c4(0x1c9));let io;const initIO=_0x57bdf1=>{const _0x3f6f6d=a285_0x22f1c4;return io=new socket_io_1['Server'](_0x57bdf1,{'cors':{'origin':process[_0x3f6f6d(0x1d0)]['FRONTEND_URL']}}),io['on']('connection',async _0x420509=>{const _0xf08004=_0x3f6f6d;logger_1[_0xf08004(0x1d4)]['info']('Client\x20Connected');const {userId:_0x3074bd}=_0x420509[_0xf08004(0x1cc)][_0xf08004(0x1d1)];_0x420509['on']('joinChatBox',_0x174e35=>{const _0x433c1b=_0xf08004;logger_1[_0x433c1b(0x1d4)][_0x433c1b(0x1db)](_0x433c1b(0x1d5)),_0x420509['join'](_0x174e35);}),_0x420509['on'](_0xf08004(0x1cd),()=>{const _0x4eabe6=_0xf08004;logger_1[_0x4eabe6(0x1d4)][_0x4eabe6(0x1db)](_0x4eabe6(0x1df)),_0x420509['join']('notification');}),_0x420509['on'](_0xf08004(0x1e0),_0x410962=>{const _0x2150bb=_0xf08004;logger_1[_0x2150bb(0x1d4)][_0x2150bb(0x1db)]('A\x20client\x20joined\x20to\x20'+_0x410962+_0x2150bb(0x1cf)),_0x420509[_0x2150bb(0x1e6)](_0x410962);}),userMonitor_1[_0xf08004(0x1e1)][_0xf08004(0x1cb)](_0xf08004(0x1d9),{'id':_0x3074bd},{'removeOnComplete':{'age':0x3c*0x3c,'count':0xa},'removeOnFail':{'age':0x3c*0x3c,'count':0xa}});}),io;};function a285_0x3730(){const _0x32dd75=['env','query','1062LGPHaV','3741234mclqty','logger','A\x20client\x20joined\x20a\x20ticket\x20channel','377772vKvnPT','Socket\x20IO\x20not\x20initialized','4qNrbCh','UserConnection','getIO','info','170470mSzbgL','3409816YnqDky','__esModule','A\x20client\x20joined\x20notification\x20channel','joinTickets','userMonitor','../errors/AppError','__importDefault','559155WrXHgJ','5afTeTZ','join','445808eApPzq','defineProperty','../queues/userMonitor','initIO','add','handshake','joinNotification','3850016nfxIKW','\x20tickets\x20channel.'];a285_0x3730=function(){return _0x32dd75;};return a285_0x3730();}exports[a285_0x22f1c4(0x1ca)]=initIO;const getIO=()=>{const _0x4bf86b=a285_0x22f1c4;if(!io)throw new AppError_1['default'](_0x4bf86b(0x1d7));return io;};exports[a285_0x22f1c4(0x1da)]=getIO;