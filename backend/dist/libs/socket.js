'use strict';const a272_0x366335=a272_0x5361;function a272_0x5361(_0x113626,_0x5c4356){const _0x546fc7=a272_0x546f();return a272_0x5361=function(_0x536168,_0x3015c0){_0x536168=_0x536168-0xb6;let _0x3a8dca=_0x546fc7[_0x536168];return _0x3a8dca;},a272_0x5361(_0x113626,_0x5c4356);}(function(_0x3b7a75,_0x2c478b){const _0x789874=a272_0x5361,_0x313ace=_0x3b7a75();while(!![]){try{const _0x33d720=parseInt(_0x789874(0xd0))/0x1*(-parseInt(_0x789874(0xb7))/0x2)+parseInt(_0x789874(0xd3))/0x3+parseInt(_0x789874(0xc6))/0x4*(-parseInt(_0x789874(0xd1))/0x5)+parseInt(_0x789874(0xd6))/0x6+parseInt(_0x789874(0xb6))/0x7+parseInt(_0x789874(0xd9))/0x8*(parseInt(_0x789874(0xd7))/0x9)+-parseInt(_0x789874(0xba))/0xa;if(_0x33d720===_0x2c478b)break;else _0x313ace['push'](_0x313ace['shift']());}catch(_0x65ecb2){_0x313ace['push'](_0x313ace['shift']());}}}(a272_0x546f,0xc9375));function a272_0x546f(){const _0x38be5b=['notification','2211000mtsrcK','593313OWeDoJ','3974bFjECG','getIO','A\x20client\x20joined\x20a\x20ticket\x20channel','8256970nJHowM','add','A\x20client\x20joined\x20to\x20','__importDefault','defineProperty','Socket\x20IO\x20not\x20initialized','join','Server','logger','joinChatBox','initIO','__esModule','772YYHkGB','default','query','info','joinTickets','\x20tickets\x20channel.','FRONTEND_URL','../utils/logger','A\x20client\x20joined\x20notification\x20channel','Client\x20Connected','683alijPI','4825typuju','userMonitor','4892055byVGVv','connection','../queues/userMonitor','7208550hUpsXY','9YQiAGO'];a272_0x546f=function(){return _0x38be5b;};return a272_0x546f();}var __importDefault=this&&this[a272_0x366335(0xbd)]||function(_0x2a22a1){const _0xdd22f4=a272_0x366335;return _0x2a22a1&&_0x2a22a1[_0xdd22f4(0xc5)]?_0x2a22a1:{'default':_0x2a22a1};};Object[a272_0x366335(0xbe)](exports,a272_0x366335(0xc5),{'value':!![]}),exports[a272_0x366335(0xb8)]=exports['initIO']=void 0x0;const socket_io_1=require('socket.io'),AppError_1=__importDefault(require('../errors/AppError')),logger_1=require(a272_0x366335(0xcd)),userMonitor_1=require(a272_0x366335(0xd5));let io;const initIO=_0x57cb01=>{const _0x246cf5=a272_0x366335;return io=new socket_io_1[(_0x246cf5(0xc1))](_0x57cb01,{'cors':{'origin':process['env'][_0x246cf5(0xcc)]}}),io['on'](_0x246cf5(0xd4),async _0x292db0=>{const _0x2b55fa=_0x246cf5;logger_1[_0x2b55fa(0xc2)]['info'](_0x2b55fa(0xcf));const {userId:_0x3bc1db}=_0x292db0['handshake'][_0x2b55fa(0xc8)];_0x292db0['on'](_0x2b55fa(0xc3),_0x17b70f=>{const _0x40add4=_0x2b55fa;logger_1['logger'][_0x40add4(0xc9)](_0x40add4(0xb9)),_0x292db0[_0x40add4(0xc0)](_0x17b70f);}),_0x292db0['on']('joinNotification',()=>{const _0x2031c0=_0x2b55fa;logger_1[_0x2031c0(0xc2)]['info'](_0x2031c0(0xce)),_0x292db0[_0x2031c0(0xc0)](_0x2031c0(0xd8));}),_0x292db0['on'](_0x2b55fa(0xca),_0x26224a=>{const _0x262db4=_0x2b55fa;logger_1[_0x262db4(0xc2)][_0x262db4(0xc9)](_0x262db4(0xbc)+_0x26224a+_0x262db4(0xcb)),_0x292db0[_0x262db4(0xc0)](_0x26224a);}),userMonitor_1[_0x2b55fa(0xd2)][_0x2b55fa(0xbb)]('UserConnection',{'id':_0x3bc1db},{'removeOnComplete':{'age':0x3c*0x3c,'count':0xa},'removeOnFail':{'age':0x3c*0x3c,'count':0xa}});}),io;};exports[a272_0x366335(0xc4)]=initIO;const getIO=()=>{const _0x803707=a272_0x366335;if(!io)throw new AppError_1[(_0x803707(0xc7))](_0x803707(0xbf));return io;};exports[a272_0x366335(0xb8)]=getIO;