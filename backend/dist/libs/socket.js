'use strict';const a267_0xa80b37=a267_0x11c2;function a267_0x11c2(_0x5a0ed1,_0x4e2313){const _0x22d089=a267_0x22d0();return a267_0x11c2=function(_0x11c292,_0x5bf0fd){_0x11c292=_0x11c292-0x1b9;let _0x3d97c1=_0x22d089[_0x11c292];return _0x3d97c1;},a267_0x11c2(_0x5a0ed1,_0x4e2313);}(function(_0x20fcab,_0x408df1){const _0x430105=a267_0x11c2,_0x44d97d=_0x20fcab();while(!![]){try{const _0x3f1df1=-parseInt(_0x430105(0x1cf))/0x1*(-parseInt(_0x430105(0x1c0))/0x2)+parseInt(_0x430105(0x1d4))/0x3+-parseInt(_0x430105(0x1c7))/0x4+-parseInt(_0x430105(0x1c2))/0x5*(parseInt(_0x430105(0x1c1))/0x6)+-parseInt(_0x430105(0x1d1))/0x7+-parseInt(_0x430105(0x1dc))/0x8+parseInt(_0x430105(0x1bc))/0x9;if(_0x3f1df1===_0x408df1)break;else _0x44d97d['push'](_0x44d97d['shift']());}catch(_0x53b999){_0x44d97d['push'](_0x44d97d['shift']());}}}(a267_0x22d0,0x97333));function a267_0x22d0(){const _0x10108d=['info','2250285nrEAyJ','join','logger','defineProperty','__importDefault','query','../errors/AppError','../utils/logger','3453752hbWOwy','UserConnection','joinNotification','handshake','13531536tZToEE','default','getIO','FRONTEND_URL','26686bIOhVz','6UoXGkS','2761985zdxPnH','userMonitor','socket.io','__esModule','A\x20client\x20joined\x20to\x20','1443924dqjiqq','\x20tickets\x20channel.','initIO','../queues/userMonitor','Socket\x20IO\x20not\x20initialized','Server','add','A\x20client\x20joined\x20notification\x20channel','20SmtohO','joinChatBox','3892329cOvkav','Client\x20Connected'];a267_0x22d0=function(){return _0x10108d;};return a267_0x22d0();}var __importDefault=this&&this[a267_0xa80b37(0x1d8)]||function(_0x51548e){return _0x51548e&&_0x51548e['__esModule']?_0x51548e:{'default':_0x51548e};};Object[a267_0xa80b37(0x1d7)](exports,a267_0xa80b37(0x1c5),{'value':!![]}),exports[a267_0xa80b37(0x1be)]=exports[a267_0xa80b37(0x1c9)]=void 0x0;const socket_io_1=require(a267_0xa80b37(0x1c4)),AppError_1=__importDefault(require(a267_0xa80b37(0x1da))),logger_1=require(a267_0xa80b37(0x1db)),userMonitor_1=require(a267_0xa80b37(0x1ca));let io;const initIO=_0x51f9d=>{const _0x4a2adc=a267_0xa80b37;return io=new socket_io_1[(_0x4a2adc(0x1cc))](_0x51f9d,{'cors':{'origin':process['env'][_0x4a2adc(0x1bf)]}}),io['on']('connection',async _0x1467ea=>{const _0x461e1f=_0x4a2adc;logger_1['logger'][_0x461e1f(0x1d3)](_0x461e1f(0x1d2));const {userId:_0x2a77db}=_0x1467ea[_0x461e1f(0x1bb)][_0x461e1f(0x1d9)];_0x1467ea['on'](_0x461e1f(0x1d0),_0x49d232=>{const _0x52dbfe=_0x461e1f;logger_1[_0x52dbfe(0x1d6)][_0x52dbfe(0x1d3)]('A\x20client\x20joined\x20a\x20ticket\x20channel'),_0x1467ea[_0x52dbfe(0x1d5)](_0x49d232);}),_0x1467ea['on'](_0x461e1f(0x1ba),()=>{const _0x5e0414=_0x461e1f;logger_1[_0x5e0414(0x1d6)]['info'](_0x5e0414(0x1ce)),_0x1467ea['join']('notification');}),_0x1467ea['on']('joinTickets',_0x4dfe41=>{const _0x4c08a2=_0x461e1f;logger_1['logger'][_0x4c08a2(0x1d3)](_0x4c08a2(0x1c6)+_0x4dfe41+_0x4c08a2(0x1c8)),_0x1467ea['join'](_0x4dfe41);}),userMonitor_1[_0x461e1f(0x1c3)][_0x461e1f(0x1cd)](_0x461e1f(0x1b9),{'id':_0x2a77db},{'removeOnComplete':{'age':0x3c*0x3c,'count':0xa},'removeOnFail':{'age':0x3c*0x3c,'count':0xa}});}),io;};exports[a267_0xa80b37(0x1c9)]=initIO;const getIO=()=>{const _0x5a8f04=a267_0xa80b37;if(!io)throw new AppError_1[(_0x5a8f04(0x1bd))](_0x5a8f04(0x1cb));return io;};exports[a267_0xa80b37(0x1be)]=getIO;