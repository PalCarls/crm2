'use strict';const a258_0x4cb31c=a258_0x5673;(function(_0x40a339,_0x368436){const _0x4459c1=a258_0x5673,_0x5b5d3d=_0x40a339();while(!![]){try{const _0x1b7ff5=parseInt(_0x4459c1(0x1f3))/0x1*(parseInt(_0x4459c1(0x1d6))/0x2)+parseInt(_0x4459c1(0x1db))/0x3*(parseInt(_0x4459c1(0x1ea))/0x4)+parseInt(_0x4459c1(0x1f9))/0x5+-parseInt(_0x4459c1(0x1e1))/0x6+-parseInt(_0x4459c1(0x1d7))/0x7+parseInt(_0x4459c1(0x1da))/0x8+parseInt(_0x4459c1(0x1e6))/0x9;if(_0x1b7ff5===_0x368436)break;else _0x5b5d3d['push'](_0x5b5d3d['shift']());}catch(_0x3050d4){_0x5b5d3d['push'](_0x5b5d3d['shift']());}}}(a258_0x23ba,0x865fe));var __importDefault=this&&this[a258_0x4cb31c(0x1e5)]||function(_0x3cac02){return _0x3cac02&&_0x3cac02['__esModule']?_0x3cac02:{'default':_0x3cac02};};Object[a258_0x4cb31c(0x1d9)](exports,'__esModule',{'value':!![]}),exports[a258_0x4cb31c(0x1e9)]=exports[a258_0x4cb31c(0x1f7)]=void 0x0;const socket_io_1=require(a258_0x4cb31c(0x1dc)),AppError_1=__importDefault(require(a258_0x4cb31c(0x1ef))),logger_1=require(a258_0x4cb31c(0x1e8)),userMonitor_1=require('../queues/userMonitor');function a258_0x23ba(){const _0x2a61d9=['../errors/AppError','env','query','notification','3JucofL','Server','join','UserConnection','initIO','add','1220705zWpRrU','A\x20client\x20joined\x20notification\x20channel','92214ZayiGm','7299887OPWSsR','A\x20client\x20joined\x20a\x20ticket\x20channel','defineProperty','1369408xVUOCZ','2746437jjrSep','socket.io','FRONTEND_URL','joinNotification','\x20tickets\x20channel.','joinChatBox','3192024pspviP','info','userMonitor','handshake','__importDefault','5905134ITTyLG','Socket\x20IO\x20not\x20initialized','../utils/logger','getIO','4nRZvlx','connection','Client\x20Connected','logger','A\x20client\x20joined\x20to\x20'];a258_0x23ba=function(){return _0x2a61d9;};return a258_0x23ba();}let io;const initIO=_0x994d65=>{const _0x34bc07=a258_0x4cb31c;return io=new socket_io_1[(_0x34bc07(0x1f4))](_0x994d65,{'cors':{'origin':process[_0x34bc07(0x1f0)][_0x34bc07(0x1dd)]}}),io['on'](_0x34bc07(0x1eb),async _0x11cf9e=>{const _0x3519ec=_0x34bc07;logger_1[_0x3519ec(0x1ed)][_0x3519ec(0x1e2)](_0x3519ec(0x1ec));const {userId:_0x3b8abf}=_0x11cf9e[_0x3519ec(0x1e4)][_0x3519ec(0x1f1)];_0x11cf9e['on'](_0x3519ec(0x1e0),_0x4bee7d=>{const _0xf981a2=_0x3519ec;logger_1['logger'][_0xf981a2(0x1e2)](_0xf981a2(0x1d8)),_0x11cf9e['join'](_0x4bee7d);}),_0x11cf9e['on'](_0x3519ec(0x1de),()=>{const _0x46e74c=_0x3519ec;logger_1['logger'][_0x46e74c(0x1e2)](_0x46e74c(0x1fa)),_0x11cf9e[_0x46e74c(0x1f5)](_0x46e74c(0x1f2));}),_0x11cf9e['on']('joinTickets',_0x26ca56=>{const _0x4168d1=_0x3519ec;logger_1['logger']['info'](_0x4168d1(0x1ee)+_0x26ca56+_0x4168d1(0x1df)),_0x11cf9e[_0x4168d1(0x1f5)](_0x26ca56);}),userMonitor_1[_0x3519ec(0x1e3)][_0x3519ec(0x1f8)](_0x3519ec(0x1f6),{'id':_0x3b8abf},{'removeOnComplete':{'age':0x3c*0x3c,'count':0xa},'removeOnFail':{'age':0x3c*0x3c,'count':0xa}});}),io;};exports[a258_0x4cb31c(0x1f7)]=initIO;function a258_0x5673(_0x41a906,_0x464535){const _0x23ba05=a258_0x23ba();return a258_0x5673=function(_0x567304,_0x219750){_0x567304=_0x567304-0x1d6;let _0x3d25fe=_0x23ba05[_0x567304];return _0x3d25fe;},a258_0x5673(_0x41a906,_0x464535);}const getIO=()=>{const _0x5b931b=a258_0x4cb31c;if(!io)throw new AppError_1['default'](_0x5b931b(0x1e7));return io;};exports[a258_0x4cb31c(0x1e9)]=getIO;