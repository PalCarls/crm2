'use strict';const a267_0x20a61d=a267_0x3d39;(function(_0x31ec2a,_0x43f56a){const _0x1ea2d5=a267_0x3d39,_0x902644=_0x31ec2a();while(!![]){try{const _0x129e64=-parseInt(_0x1ea2d5(0x206))/0x1*(parseInt(_0x1ea2d5(0x1f6))/0x2)+-parseInt(_0x1ea2d5(0x1ec))/0x3*(parseInt(_0x1ea2d5(0x1f7))/0x4)+-parseInt(_0x1ea2d5(0x202))/0x5+-parseInt(_0x1ea2d5(0x1ef))/0x6+parseInt(_0x1ea2d5(0x1f0))/0x7*(parseInt(_0x1ea2d5(0x201))/0x8)+-parseInt(_0x1ea2d5(0x1fc))/0x9*(parseInt(_0x1ea2d5(0x1f1))/0xa)+parseInt(_0x1ea2d5(0x1f4))/0xb*(parseInt(_0x1ea2d5(0x205))/0xc);if(_0x129e64===_0x43f56a)break;else _0x902644['push'](_0x902644['shift']());}catch(_0x26bf96){_0x902644['push'](_0x902644['shift']());}}}(a267_0x5b42,0xc3749));var __importDefault=this&&this[a267_0x20a61d(0x1f9)]||function(_0x4e19fa){const _0x186459=a267_0x20a61d;return _0x4e19fa&&_0x4e19fa[_0x186459(0x1fb)]?_0x4e19fa:{'default':_0x4e19fa};};function a267_0x5b42(){const _0x401b43=['7530828vpSJZv','581JBxKqz','640Doistw','handshake','logger','33UsQwpk','join','2ipOzeK','1563544qpftBQ','defineProperty','__importDefault','initIO','__esModule','104499VGbLmC','Client\x20Connected','info','joinTickets','notification','95888xRJDWN','7196165ddkJow','joinChatBox','../queues/userMonitor','19211244xFpOoD','777817ouOKlM','../utils/logger','add','getIO','connection','Server','A\x20client\x20joined\x20notification\x20channel','FRONTEND_URL','Socket\x20IO\x20not\x20initialized','default','6wNEcGa','env','userMonitor'];a267_0x5b42=function(){return _0x401b43;};return a267_0x5b42();}Object[a267_0x20a61d(0x1f8)](exports,a267_0x20a61d(0x1fb),{'value':!![]}),exports[a267_0x20a61d(0x209)]=exports[a267_0x20a61d(0x1fa)]=void 0x0;const socket_io_1=require('socket.io'),AppError_1=__importDefault(require('../errors/AppError')),logger_1=require(a267_0x20a61d(0x207)),userMonitor_1=require(a267_0x20a61d(0x204));let io;const initIO=_0x333344=>{const _0x13d62d=a267_0x20a61d;return io=new socket_io_1[(_0x13d62d(0x20b))](_0x333344,{'cors':{'origin':process[_0x13d62d(0x1ed)][_0x13d62d(0x20d)]}}),io['on'](_0x13d62d(0x20a),async _0x1e32dd=>{const _0x58db22=_0x13d62d;logger_1['logger']['info'](_0x58db22(0x1fd));const {userId:_0xf1d040}=_0x1e32dd[_0x58db22(0x1f2)]['query'];_0x1e32dd['on'](_0x58db22(0x203),_0x5bdd81=>{const _0x347da4=_0x58db22;logger_1[_0x347da4(0x1f3)][_0x347da4(0x1fe)]('A\x20client\x20joined\x20a\x20ticket\x20channel'),_0x1e32dd['join'](_0x5bdd81);}),_0x1e32dd['on']('joinNotification',()=>{const _0x38a0b8=_0x58db22;logger_1[_0x38a0b8(0x1f3)][_0x38a0b8(0x1fe)](_0x38a0b8(0x20c)),_0x1e32dd['join'](_0x38a0b8(0x200));}),_0x1e32dd['on'](_0x58db22(0x1ff),_0x380567=>{const _0x3bea5f=_0x58db22;logger_1[_0x3bea5f(0x1f3)][_0x3bea5f(0x1fe)]('A\x20client\x20joined\x20to\x20'+_0x380567+'\x20tickets\x20channel.'),_0x1e32dd[_0x3bea5f(0x1f5)](_0x380567);}),userMonitor_1[_0x58db22(0x1ee)][_0x58db22(0x208)]('UserConnection',{'id':_0xf1d040},{'removeOnComplete':{'age':0x3c*0x3c,'count':0xa},'removeOnFail':{'age':0x3c*0x3c,'count':0xa}});}),io;};function a267_0x3d39(_0x55fd08,_0x23d337){const _0x5b428c=a267_0x5b42();return a267_0x3d39=function(_0x3d398f,_0x3bfbdf){_0x3d398f=_0x3d398f-0x1eb;let _0x26a87c=_0x5b428c[_0x3d398f];return _0x26a87c;},a267_0x3d39(_0x55fd08,_0x23d337);}exports[a267_0x20a61d(0x1fa)]=initIO;const getIO=()=>{const _0x5cad88=a267_0x20a61d;if(!io)throw new AppError_1[(_0x5cad88(0x1eb))](_0x5cad88(0x20e));return io;};exports[a267_0x20a61d(0x209)]=getIO;