'use strict';const a355_0x20f68d=a355_0x49d9;(function(_0x5011b2,_0x1a8335){const _0x1e6b51=a355_0x49d9,_0x3febb0=_0x5011b2();while(!![]){try{const _0x56f78f=-parseInt(_0x1e6b51(0x1d8))/0x1*(-parseInt(_0x1e6b51(0x1bd))/0x2)+parseInt(_0x1e6b51(0x1ce))/0x3*(-parseInt(_0x1e6b51(0x1eb))/0x4)+-parseInt(_0x1e6b51(0x1d9))/0x5*(parseInt(_0x1e6b51(0x1c7))/0x6)+parseInt(_0x1e6b51(0x1bf))/0x7*(parseInt(_0x1e6b51(0x1be))/0x8)+parseInt(_0x1e6b51(0x1d3))/0x9+-parseInt(_0x1e6b51(0x1de))/0xa+-parseInt(_0x1e6b51(0x1ea))/0xb*(-parseInt(_0x1e6b51(0x1d1))/0xc);if(_0x56f78f===_0x1a8335)break;else _0x3febb0['push'](_0x3febb0['shift']());}catch(_0x2b02da){_0x3febb0['push'](_0x3febb0['shift']());}}}(a355_0xb6c6,0x4739d));var __importDefault=this&&this[a355_0x20f68d(0x1ec)]||function(_0x4d26cf){const _0x1a3e58=a355_0x20f68d;return _0x4d26cf&&_0x4d26cf[_0x1a3e58(0x1e0)]?_0x4d26cf:{'default':_0x4d26cf};};Object[a355_0x20f68d(0x1e5)](exports,a355_0x20f68d(0x1e0),{'value':!![]});function a355_0xb6c6(){const _0x46402c=['./models/Company','listen','./utils/logger','log','env','\x20unhandledRejection:','6rHLmoP','express','logger','default','error','length','\x20has\x20exitted.','6168vQeiiy','Worker','message','6084732lDCbaI','\x20with\x20the\x20single\x20worker\x20','1728747HUVJiZ','toUTCString','stack','findAll','exit','1594tfsFyP','2078465wnTAUL','Express\x20server\x20listening\x20on\x20port\x20','initIO','Server\x20started\x20on\x20port:\x20','startQueueProcess','4406040uDgJEr','fork','__esModule','uncaughtException','map','\x20uncaughtException:','PORT','defineProperty','push','./services/WbotServices/StartAllWhatsAppsSessions','isMaster','pid','11fBqwjh','968ldwEfg','__importDefault','526MFckoN','71488nQIQuE','413fIwtHz','info'];a355_0xb6c6=function(){return _0x46402c;};return a355_0xb6c6();}const http_graceful_shutdown_1=__importDefault(require('http-graceful-shutdown')),socket_1=require('./libs/socket'),logger_1=require(a355_0x20f68d(0x1c3)),StartAllWhatsAppsSessions_1=require(a355_0x20f68d(0x1e7)),Company_1=__importDefault(require(a355_0x20f68d(0x1c1))),queues_1=require('./queues'),express=require(a355_0x20f68d(0x1c8)),os=require('os'),cluster=require('cluster'),PORT=process['env'][a355_0x20f68d(0x1e4)]||0xfa0,clusterWorkerSize=os['cpus']()[a355_0x20f68d(0x1cc)];console[a355_0x20f68d(0x1c4)]('clusterWorkerSize',clusterWorkerSize);function a355_0x49d9(_0x48dd06,_0x343cff){const _0xb6c681=a355_0xb6c6();return a355_0x49d9=function(_0x49d9c2,_0x4f2a61){_0x49d9c2=_0x49d9c2-0x1bd;let _0x1a51f2=_0xb6c681[_0x49d9c2];return _0x1a51f2;},a355_0x49d9(_0x48dd06,_0x343cff);}if(clusterWorkerSize>0x1){if(cluster[a355_0x20f68d(0x1e8)]){for(let i=0x0;i<clusterWorkerSize;i++){cluster[a355_0x20f68d(0x1df)]();}cluster['on'](a355_0x20f68d(0x1d7),function(_0x4e7786){const _0x5d0e12=a355_0x20f68d;console[_0x5d0e12(0x1c4)](_0x5d0e12(0x1cf),_0x4e7786['id'],_0x5d0e12(0x1cd));});}else{const app=express(),server=app[a355_0x20f68d(0x1c2)](process['env'][a355_0x20f68d(0x1e4)],async()=>{const _0x20965b=a355_0x20f68d,_0x343536=await Company_1['default'][_0x20965b(0x1d6)](),_0x1c0147=[];_0x343536[_0x20965b(0x1e2)](async _0x484976=>{const _0x95b463=_0x20965b,_0x55f3f2=(0x0,StartAllWhatsAppsSessions_1['StartAllWhatsAppsSessions'])(_0x484976['id']);_0x1c0147[_0x95b463(0x1e6)](_0x55f3f2);}),Promise['all'](_0x1c0147)['then'](async()=>{const _0x4fa5b6=_0x20965b;await(0x0,queues_1[_0x4fa5b6(0x1dd)])();}),logger_1[_0x20965b(0x1c9)][_0x20965b(0x1c0)](_0x20965b(0x1dc)+process[_0x20965b(0x1c5)][_0x20965b(0x1e4)]+'\x20and\x20worker\x20'+process[_0x20965b(0x1e9)]);});process['on'](a355_0x20f68d(0x1e1),_0x41a251=>{const _0x59f2ec=a355_0x20f68d;console[_0x59f2ec(0x1cb)](new Date()[_0x59f2ec(0x1d4)]()+_0x59f2ec(0x1e3),_0x41a251[_0x59f2ec(0x1d0)]),console[_0x59f2ec(0x1cb)](_0x41a251[_0x59f2ec(0x1d5)]),process['exit'](0x1);}),process['on']('unhandledRejection',(_0x515d58,_0x4f2dfc)=>{const _0x5d165f=a355_0x20f68d;console[_0x5d165f(0x1cb)](new Date()[_0x5d165f(0x1d4)]()+_0x5d165f(0x1c6),_0x515d58,_0x4f2dfc),process[_0x5d165f(0x1d7)](0x1);}),(0x0,socket_1[a355_0x20f68d(0x1db)])(server),(0x0,http_graceful_shutdown_1[a355_0x20f68d(0x1ca)])(server);}}else{const app=express();app['listen'](PORT,function(){const _0x18237b=a355_0x20f68d;console[_0x18237b(0x1c4)](_0x18237b(0x1da)+PORT+_0x18237b(0x1d2)+process['pid']);});}