'use strict';const a342_0x160cdc=a342_0x2cfd;(function(_0x5b8b94,_0x249815){const _0x2da712=a342_0x2cfd,_0x39471e=_0x5b8b94();while(!![]){try{const _0x301b7f=parseInt(_0x2da712(0xcb))/0x1+parseInt(_0x2da712(0xdf))/0x2*(parseInt(_0x2da712(0xec))/0x3)+parseInt(_0x2da712(0xd3))/0x4+-parseInt(_0x2da712(0xca))/0x5*(-parseInt(_0x2da712(0xc6))/0x6)+-parseInt(_0x2da712(0xcc))/0x7*(parseInt(_0x2da712(0xe1))/0x8)+-parseInt(_0x2da712(0xdc))/0x9*(-parseInt(_0x2da712(0xe6))/0xa)+-parseInt(_0x2da712(0xd9))/0xb;if(_0x301b7f===_0x249815)break;else _0x39471e['push'](_0x39471e['shift']());}catch(_0x17dbba){_0x39471e['push'](_0x39471e['shift']());}}}(a342_0x29cc,0xefb24));function a342_0x2cfd(_0x2c0501,_0x1870f3){const _0x29cca9=a342_0x29cc();return a342_0x2cfd=function(_0x2cfd9c,_0x1570ef){_0x2cfd9c=_0x2cfd9c-0xbf;let _0x40297e=_0x29cca9[_0x2cfd9c];return _0x40297e;},a342_0x2cfd(_0x2c0501,_0x1870f3);}var __importDefault=this&&this['__importDefault']||function(_0x3c9f24){return _0x3c9f24&&_0x3c9f24['__esModule']?_0x3c9f24:{'default':_0x3c9f24};};Object[a342_0x160cdc(0xeb)](exports,a342_0x160cdc(0xe8),{'value':!![]});function a342_0x29cc(){const _0x176a48=['__esModule','message','default','defineProperty','571134KFtQZn','error','\x20and\x20worker\x20','./models/Company','findAll','\x20unhandledRejection:','./libs/socket','./utils/logger','1962wemUuY','unhandledRejection','toUTCString','cpus','19940AckpeS','1277797sIPmqb','7pVOVad','clusterWorkerSize','map','Express\x20server\x20listening\x20on\x20port\x20','\x20uncaughtException:','listen','./queues','6208008zMQCvj','stack','fork','env','uncaughtException','http-graceful-shutdown','46612643WpQMgR','then','\x20with\x20the\x20single\x20worker\x20','4923IxljhI','StartAllWhatsAppsSessions','pid','2ZAkhsP','express','1167080DNKfHY','log','length','PORT','Worker','19030zQYCOT','isMaster'];a342_0x29cc=function(){return _0x176a48;};return a342_0x29cc();}const http_graceful_shutdown_1=__importDefault(require(a342_0x160cdc(0xd8))),socket_1=require(a342_0x160cdc(0xc4)),logger_1=require(a342_0x160cdc(0xc5)),StartAllWhatsAppsSessions_1=require('./services/WbotServices/StartAllWhatsAppsSessions'),Company_1=__importDefault(require(a342_0x160cdc(0xc1))),queues_1=require(a342_0x160cdc(0xd2)),express=require(a342_0x160cdc(0xe0)),os=require('os'),cluster=require('cluster'),PORT=process['env'][a342_0x160cdc(0xe4)]||0xfa0,clusterWorkerSize=os[a342_0x160cdc(0xc9)]()[a342_0x160cdc(0xe3)];console[a342_0x160cdc(0xe2)](a342_0x160cdc(0xcd),clusterWorkerSize);if(clusterWorkerSize>0x1){if(cluster[a342_0x160cdc(0xe7)]){for(let i=0x0;i<clusterWorkerSize;i++){cluster[a342_0x160cdc(0xd5)]();}cluster['on']('exit',function(_0x3a1227){const _0x4ca00a=a342_0x160cdc;console[_0x4ca00a(0xe2)](_0x4ca00a(0xe5),_0x3a1227['id'],'\x20has\x20exitted.');});}else{const app=express(),server=app[a342_0x160cdc(0xd1)](process[a342_0x160cdc(0xd6)][a342_0x160cdc(0xe4)],async()=>{const _0x332c2a=a342_0x160cdc,_0x3afecb=await Company_1[_0x332c2a(0xea)][_0x332c2a(0xc2)](),_0x2a251a=[];_0x3afecb[_0x332c2a(0xce)](async _0x3cadb4=>{const _0x131fb0=_0x332c2a,_0x28f54b=(0x0,StartAllWhatsAppsSessions_1[_0x131fb0(0xdd)])(_0x3cadb4['id']);_0x2a251a['push'](_0x28f54b);}),Promise['all'](_0x2a251a)[_0x332c2a(0xda)](async()=>{await(0x0,queues_1['startQueueProcess'])();}),logger_1['logger']['info']('Server\x20started\x20on\x20port:\x20'+process[_0x332c2a(0xd6)][_0x332c2a(0xe4)]+_0x332c2a(0xc0)+process['pid']);});process['on'](a342_0x160cdc(0xd7),_0x4df73a=>{const _0x13d170=a342_0x160cdc;console[_0x13d170(0xbf)](new Date()[_0x13d170(0xc8)]()+_0x13d170(0xd0),_0x4df73a[_0x13d170(0xe9)]),console['error'](_0x4df73a[_0x13d170(0xd4)]),process['exit'](0x1);}),process['on'](a342_0x160cdc(0xc7),(_0xdfa1c3,_0x132230)=>{const _0x1abcac=a342_0x160cdc;console[_0x1abcac(0xbf)](new Date()['toUTCString']()+_0x1abcac(0xc3),_0xdfa1c3,_0x132230),process['exit'](0x1);}),(0x0,socket_1['initIO'])(server),(0x0,http_graceful_shutdown_1[a342_0x160cdc(0xea)])(server);}}else{const app=express();app['listen'](PORT,function(){const _0x1f772b=a342_0x160cdc;console[_0x1f772b(0xe2)](_0x1f772b(0xcf)+PORT+_0x1f772b(0xdb)+process[_0x1f772b(0xde)]);});}