'use strict';const a377_0x59153e=a377_0x7bb9;(function(_0x122502,_0x2399c4){const _0x401898=a377_0x7bb9,_0x366497=_0x122502();while(!![]){try{const _0x34756f=-parseInt(_0x401898(0x178))/0x1+-parseInt(_0x401898(0x160))/0x2*(-parseInt(_0x401898(0x167))/0x3)+parseInt(_0x401898(0x15a))/0x4*(-parseInt(_0x401898(0x159))/0x5)+-parseInt(_0x401898(0x157))/0x6*(parseInt(_0x401898(0x17c))/0x7)+-parseInt(_0x401898(0x15e))/0x8+parseInt(_0x401898(0x165))/0x9+parseInt(_0x401898(0x16e))/0xa;if(_0x34756f===_0x2399c4)break;else _0x366497['push'](_0x366497['shift']());}catch(_0xd83b8c){_0x366497['push'](_0x366497['shift']());}}}(a377_0x3394,0xa2b83));function a377_0x7bb9(_0x23b768,_0x15d793){const _0x33949e=a377_0x3394();return a377_0x7bb9=function(_0x7bb9bb,_0x57a52b){_0x7bb9bb=_0x7bb9bb-0x153;let _0x54e8f9=_0x33949e[_0x7bb9bb];return _0x54e8f9;},a377_0x7bb9(_0x23b768,_0x15d793);}var __importDefault=this&&this[a377_0x59153e(0x180)]||function(_0x337008){return _0x337008&&_0x337008['__esModule']?_0x337008:{'default':_0x337008};};Object[a377_0x59153e(0x171)](exports,'__esModule',{'value':!![]});function a377_0x3394(){const _0x546074=['exit','7MlCDoB','uncaughtException','cluster','StartAllWhatsAppsSessions','__importDefault','logger','map','unhandledRejection','findAll','4329798OAcFQp','then','6250HrnBYj','360ZdXhdq','pid','toUTCString','cpus','2987624eJeNSg','env','705732ypiHpI','\x20uncaughtException:','\x20unhandledRejection:','listen','\x20with\x20the\x20single\x20worker\x20','2637693rPKDZJ','\x20has\x20exitted.','3CNoIsR','isMaster','length','error','PORT','info','initIO','19042850GJSFSO','Express\x20server\x20listening\x20on\x20port\x20','push','defineProperty','log','default','express','./libs/socket','clusterWorkerSize','\x20and\x20worker\x20','676143Zmaosr','all','message'];a377_0x3394=function(){return _0x546074;};return a377_0x3394();}const http_graceful_shutdown_1=__importDefault(require('http-graceful-shutdown')),socket_1=require(a377_0x59153e(0x175)),logger_1=require('./utils/logger'),StartAllWhatsAppsSessions_1=require('./services/WbotServices/StartAllWhatsAppsSessions'),Company_1=__importDefault(require('./models/Company')),queues_1=require('./queues'),express=require(a377_0x59153e(0x174)),os=require('os'),cluster=require(a377_0x59153e(0x17e)),PORT=process['env']['PORT']||0xfa0,clusterWorkerSize=os[a377_0x59153e(0x15d)]()[a377_0x59153e(0x169)];console['log'](a377_0x59153e(0x176),clusterWorkerSize);if(clusterWorkerSize>0x1){if(cluster[a377_0x59153e(0x168)]){for(let i=0x0;i<clusterWorkerSize;i++){cluster['fork']();}cluster['on']('exit',function(_0x51cd1b){const _0x36b4d0=a377_0x59153e;console[_0x36b4d0(0x172)]('Worker',_0x51cd1b['id'],_0x36b4d0(0x166));});}else{const app=express(),server=app[a377_0x59153e(0x163)](process['env']['PORT'],async()=>{const _0x6eeb54=a377_0x59153e,_0x48a529=await Company_1['default'][_0x6eeb54(0x156)](),_0x34e2bd=[];_0x48a529[_0x6eeb54(0x154)](async _0x5c5144=>{const _0x820a10=_0x6eeb54,_0x332ee0=(0x0,StartAllWhatsAppsSessions_1[_0x820a10(0x17f)])(_0x5c5144['id']);_0x34e2bd[_0x820a10(0x170)](_0x332ee0);}),Promise[_0x6eeb54(0x179)](_0x34e2bd)[_0x6eeb54(0x158)](async()=>{await(0x0,queues_1['startQueueProcess'])();}),logger_1[_0x6eeb54(0x153)][_0x6eeb54(0x16c)]('Server\x20started\x20on\x20port:\x20'+process[_0x6eeb54(0x15f)][_0x6eeb54(0x16b)]+_0x6eeb54(0x177)+process[_0x6eeb54(0x15b)]);});process['on'](a377_0x59153e(0x17d),_0x3723fb=>{const _0x54746b=a377_0x59153e;console[_0x54746b(0x16a)](new Date()[_0x54746b(0x15c)]()+_0x54746b(0x161),_0x3723fb[_0x54746b(0x17a)]),console[_0x54746b(0x16a)](_0x3723fb['stack']),process[_0x54746b(0x17b)](0x1);}),process['on'](a377_0x59153e(0x155),(_0x119c7c,_0xf1d7f6)=>{const _0x17054d=a377_0x59153e;console[_0x17054d(0x16a)](new Date()[_0x17054d(0x15c)]()+_0x17054d(0x162),_0x119c7c,_0xf1d7f6),process[_0x17054d(0x17b)](0x1);}),(0x0,socket_1[a377_0x59153e(0x16d)])(server),(0x0,http_graceful_shutdown_1[a377_0x59153e(0x173)])(server);}}else{const app=express();app[a377_0x59153e(0x163)](PORT,function(){const _0x914f48=a377_0x59153e;console[_0x914f48(0x172)](_0x914f48(0x16f)+PORT+_0x914f48(0x164)+process['pid']);});}