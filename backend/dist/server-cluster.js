'use strict';const a386_0x3b2c3f=a386_0x3c3c;(function(_0xe4232a,_0x596ac7){const _0x50bafa=a386_0x3c3c,_0x2a3e53=_0xe4232a();while(!![]){try{const _0x29011b=-parseInt(_0x50bafa(0x89))/0x1+-parseInt(_0x50bafa(0x99))/0x2+parseInt(_0x50bafa(0x8d))/0x3+-parseInt(_0x50bafa(0x8e))/0x4*(parseInt(_0x50bafa(0x97))/0x5)+-parseInt(_0x50bafa(0x90))/0x6+-parseInt(_0x50bafa(0x95))/0x7*(parseInt(_0x50bafa(0x82))/0x8)+parseInt(_0x50bafa(0x85))/0x9;if(_0x29011b===_0x596ac7)break;else _0x2a3e53['push'](_0x2a3e53['shift']());}catch(_0x16fd92){_0x2a3e53['push'](_0x2a3e53['shift']());}}}(a386_0x1496,0x6dfc4));function a386_0x3c3c(_0x2fc94e,_0x52f4c9){const _0x149658=a386_0x1496();return a386_0x3c3c=function(_0x3c3c6d,_0x4c48d3){_0x3c3c6d=_0x3c3c6d-0x7a;let _0x5a1e16=_0x149658[_0x3c3c6d];return _0x5a1e16;},a386_0x3c3c(_0x2fc94e,_0x52f4c9);}function a386_0x1496(){const _0x34c790=['all','2314749RXtXSv','4uyQfHq','__importDefault','3796998ZqWfBY','isMaster','startQueueProcess','error','length','14offepp','./services/WbotServices/StartAllWhatsAppsSessions','233055RBwPQv','cpus','844376IQTQHf','\x20unhandledRejection:','__esModule','\x20has\x20exitted.','./models/Company','Server\x20started\x20on\x20port:\x20','defineProperty','default','listen','Express\x20server\x20listening\x20on\x20port\x20','express','exit','\x20uncaughtException:','\x20with\x20the\x20single\x20worker\x20','uncaughtException','log','fork','1269944nmjLTn','stack','then','12776085IuIpcT','PORT','initIO','./queues','321530hUmHIw','env','logger'];a386_0x1496=function(){return _0x34c790;};return a386_0x1496();}var __importDefault=this&&this[a386_0x3b2c3f(0x8f)]||function(_0x58916e){const _0x56ad2f=a386_0x3b2c3f;return _0x58916e&&_0x58916e[_0x56ad2f(0x9b)]?_0x58916e:{'default':_0x58916e};};Object[a386_0x3b2c3f(0x9f)](exports,a386_0x3b2c3f(0x9b),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require('http-graceful-shutdown')),socket_1=require('./libs/socket'),logger_1=require('./utils/logger'),StartAllWhatsAppsSessions_1=require(a386_0x3b2c3f(0x96)),Company_1=__importDefault(require(a386_0x3b2c3f(0x9d))),queues_1=require(a386_0x3b2c3f(0x88)),express=require(a386_0x3b2c3f(0x7b)),os=require('os'),cluster=require('cluster'),PORT=process[a386_0x3b2c3f(0x8a)][a386_0x3b2c3f(0x86)]||0xfa0,clusterWorkerSize=os[a386_0x3b2c3f(0x98)]()[a386_0x3b2c3f(0x94)];console[a386_0x3b2c3f(0x80)]('clusterWorkerSize',clusterWorkerSize);if(clusterWorkerSize>0x1){if(cluster[a386_0x3b2c3f(0x91)]){for(let i=0x0;i<clusterWorkerSize;i++){cluster[a386_0x3b2c3f(0x81)]();}cluster['on'](a386_0x3b2c3f(0x7c),function(_0xea5093){const _0x511039=a386_0x3b2c3f;console[_0x511039(0x80)]('Worker',_0xea5093['id'],_0x511039(0x9c));});}else{const app=express(),server=app[a386_0x3b2c3f(0xa1)](process[a386_0x3b2c3f(0x8a)]['PORT'],async()=>{const _0x1c5c68=a386_0x3b2c3f,_0x2d296f=await Company_1[_0x1c5c68(0xa0)]['findAll'](),_0x20d460=[];_0x2d296f['map'](async _0x597889=>{const _0x9742bd=(0x0,StartAllWhatsAppsSessions_1['StartAllWhatsAppsSessions'])(_0x597889['id']);_0x20d460['push'](_0x9742bd);}),Promise[_0x1c5c68(0x8c)](_0x20d460)[_0x1c5c68(0x84)](async()=>{const _0x2a30d4=_0x1c5c68;await(0x0,queues_1[_0x2a30d4(0x92)])();}),logger_1[_0x1c5c68(0x8b)]['info'](_0x1c5c68(0x9e)+process[_0x1c5c68(0x8a)][_0x1c5c68(0x86)]+'\x20and\x20worker\x20'+process['pid']);});process['on'](a386_0x3b2c3f(0x7f),_0x1dbe9a=>{const _0xb11234=a386_0x3b2c3f;console[_0xb11234(0x93)](new Date()['toUTCString']()+_0xb11234(0x7d),_0x1dbe9a['message']),console['error'](_0x1dbe9a[_0xb11234(0x83)]),process[_0xb11234(0x7c)](0x1);}),process['on']('unhandledRejection',(_0xdda8d0,_0x410a04)=>{const _0x3f5eb9=a386_0x3b2c3f;console[_0x3f5eb9(0x93)](new Date()['toUTCString']()+_0x3f5eb9(0x9a),_0xdda8d0,_0x410a04),process[_0x3f5eb9(0x7c)](0x1);}),(0x0,socket_1[a386_0x3b2c3f(0x87)])(server),(0x0,http_graceful_shutdown_1[a386_0x3b2c3f(0xa0)])(server);}}else{const app=express();app[a386_0x3b2c3f(0xa1)](PORT,function(){const _0x4f2ac6=a386_0x3b2c3f;console[_0x4f2ac6(0x80)](_0x4f2ac6(0x7a)+PORT+_0x4f2ac6(0x7e)+process['pid']);});}