'use strict';function a377_0xf0a0(_0x5d691b,_0x25eeb6){const _0x5b308=a377_0x5b30();return a377_0xf0a0=function(_0xf0a0a1,_0x85a974){_0xf0a0a1=_0xf0a0a1-0x1b0;let _0x34cb14=_0x5b308[_0xf0a0a1];return _0x34cb14;},a377_0xf0a0(_0x5d691b,_0x25eeb6);}const a377_0x5e6069=a377_0xf0a0;function a377_0x5b30(){const _0x50ccaa=['push','./libs/socket','all','18fVYuJX','162ydzxij','clusterWorkerSize','5joiFVJ','10817390mwjjsO','StartAllWhatsAppsSessions','pid','9126567TrtOZH','587335OyAMgt','default','./services/WbotServices/StartAllWhatsAppsSessions','map','1032968czuXCR','1135360NtaZuj','listen','isMaster','\x20unhandledRejection:','then','stack','11UeTJvL','logger','\x20with\x20the\x20single\x20worker\x20','\x20has\x20exitted.','Server\x20started\x20on\x20port:\x20','\x20uncaughtException:','\x20and\x20worker\x20','initIO','1344543uXagOX','findAll','log','uncaughtException','PORT','error','env','http-graceful-shutdown','length','Express\x20server\x20listening\x20on\x20port\x20','1950DUMhlM','cpus','startQueueProcess','exit','__esModule','toUTCString','info'];a377_0x5b30=function(){return _0x50ccaa;};return a377_0x5b30();}(function(_0x3bc23e,_0x364fde){const _0x5384e1=a377_0xf0a0,_0x24fdfb=_0x3bc23e();while(!![]){try{const _0xc9aee3=parseInt(_0x5384e1(0x1c6))/0x1*(-parseInt(_0x5384e1(0x1bb))/0x2)+parseInt(_0x5384e1(0x1b1))/0x3+parseInt(_0x5384e1(0x1d2))/0x4*(parseInt(_0x5384e1(0x1c8))/0x5)+-parseInt(_0x5384e1(0x1c5))/0x6*(parseInt(_0x5384e1(0x1cd))/0x7)+parseInt(_0x5384e1(0x1d1))/0x8+-parseInt(_0x5384e1(0x1cc))/0x9+parseInt(_0x5384e1(0x1c9))/0xa*(parseInt(_0x5384e1(0x1d8))/0xb);if(_0xc9aee3===_0x364fde)break;else _0x24fdfb['push'](_0x24fdfb['shift']());}catch(_0x195a61){_0x24fdfb['push'](_0x24fdfb['shift']());}}}(a377_0x5b30,0x7ebf1));var __importDefault=this&&this['__importDefault']||function(_0x50c7fb){const _0x255405=a377_0xf0a0;return _0x50c7fb&&_0x50c7fb[_0x255405(0x1bf)]?_0x50c7fb:{'default':_0x50c7fb};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a377_0x5e6069(0x1b8))),socket_1=require(a377_0x5e6069(0x1c3)),logger_1=require('./utils/logger'),StartAllWhatsAppsSessions_1=require(a377_0x5e6069(0x1cf)),Company_1=__importDefault(require('./models/Company')),queues_1=require('./queues'),express=require('express'),os=require('os'),cluster=require('cluster'),PORT=process[a377_0x5e6069(0x1b7)]['PORT']||0xfa0,clusterWorkerSize=os[a377_0x5e6069(0x1bc)]()[a377_0x5e6069(0x1b9)];console[a377_0x5e6069(0x1b3)](a377_0x5e6069(0x1c7),clusterWorkerSize);if(clusterWorkerSize>0x1){if(cluster[a377_0x5e6069(0x1d4)]){for(let i=0x0;i<clusterWorkerSize;i++){cluster['fork']();}cluster['on'](a377_0x5e6069(0x1be),function(_0x486fb1){const _0x2d3a86=a377_0x5e6069;console[_0x2d3a86(0x1b3)]('Worker',_0x486fb1['id'],_0x2d3a86(0x1db));});}else{const app=express(),server=app[a377_0x5e6069(0x1d3)](process[a377_0x5e6069(0x1b7)][a377_0x5e6069(0x1b5)],async()=>{const _0x214d65=a377_0x5e6069,_0x3613df=await Company_1[_0x214d65(0x1ce)][_0x214d65(0x1b2)](),_0x29ae69=[];_0x3613df[_0x214d65(0x1d0)](async _0x53c70c=>{const _0x668a47=_0x214d65,_0x9cc93f=(0x0,StartAllWhatsAppsSessions_1[_0x668a47(0x1ca)])(_0x53c70c['id']);_0x29ae69[_0x668a47(0x1c2)](_0x9cc93f);}),Promise[_0x214d65(0x1c4)](_0x29ae69)[_0x214d65(0x1d6)](async()=>{const _0xa63f52=_0x214d65;await(0x0,queues_1[_0xa63f52(0x1bd)])();}),logger_1[_0x214d65(0x1d9)][_0x214d65(0x1c1)](_0x214d65(0x1dc)+process[_0x214d65(0x1b7)][_0x214d65(0x1b5)]+_0x214d65(0x1de)+process[_0x214d65(0x1cb)]);});process['on'](a377_0x5e6069(0x1b4),_0x2fd731=>{const _0x11263c=a377_0x5e6069;console[_0x11263c(0x1b6)](new Date()[_0x11263c(0x1c0)]()+_0x11263c(0x1dd),_0x2fd731['message']),console[_0x11263c(0x1b6)](_0x2fd731[_0x11263c(0x1d7)]),process[_0x11263c(0x1be)](0x1);}),process['on']('unhandledRejection',(_0x110954,_0x4ec0e6)=>{const _0x500b84=a377_0x5e6069;console[_0x500b84(0x1b6)](new Date()['toUTCString']()+_0x500b84(0x1d5),_0x110954,_0x4ec0e6),process[_0x500b84(0x1be)](0x1);}),(0x0,socket_1[a377_0x5e6069(0x1b0)])(server),(0x0,http_graceful_shutdown_1[a377_0x5e6069(0x1ce)])(server);}}else{const app=express();app[a377_0x5e6069(0x1d3)](PORT,function(){const _0xadb2e7=a377_0x5e6069;console[_0xadb2e7(0x1b3)](_0xadb2e7(0x1ba)+PORT+_0xadb2e7(0x1da)+process[_0xadb2e7(0x1cb)]);});}