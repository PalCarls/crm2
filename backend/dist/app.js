'use strict';const a0_0x27a416=a0_0x1c22;(function(_0xcfd6ba,_0x1c324b){const _0x5a71e9=a0_0x1c22,_0x1ab411=_0xcfd6ba();while(!![]){try{const _0x36a8c8=parseInt(_0x5a71e9(0x1ba))/0x1*(-parseInt(_0x5a71e9(0x1bd))/0x2)+parseInt(_0x5a71e9(0x1d9))/0x3+-parseInt(_0x5a71e9(0x1c3))/0x4+parseInt(_0x5a71e9(0x1be))/0x5+parseInt(_0x5a71e9(0x1b0))/0x6*(-parseInt(_0x5a71e9(0x1cd))/0x7)+-parseInt(_0x5a71e9(0x1ac))/0x8+-parseInt(_0x5a71e9(0x1bb))/0x9*(-parseInt(_0x5a71e9(0x1b3))/0xa);if(_0x36a8c8===_0x1c324b)break;else _0x1ab411['push'](_0x1ab411['shift']());}catch(_0x3bb7b4){_0x1ab411['push'](_0x1ab411['shift']());}}}(a0_0x5b36,0x279be));function a0_0x5b36(){const _0x10d327=['error','writable','errorHandler','Handlers','create','cookie-parser','FRONTEND_URL','__importStar','940974oqvCTa','env','./utils/logger','default','status','init','cors','__importDefault','requestHandler','1950056McCWuQ','use','directory','__createBinding','123990GvNccL','https://pps.whatsapp.net/','./routes','270390OKRnNs','logger','__setModuleDefault','SENTRY_DSN','express-async-errors','json','set','2dzKerd','9mxnqMA','call','5398LqPKqk','1554050aDjcfU','queues','./config/upload','get','messageQueue','795136UMEMEd','configurable','message','__esModule','static','./database','statusCode','./bootstrap','Internal\x20server\x20error','./queues','14fHVVpf','/public','defineProperty','warn'];a0_0x5b36=function(){return _0x10d327;};return a0_0x5b36();}var __createBinding=this&&this[a0_0x27a416(0x1af)]||(Object['create']?function(_0x500595,_0x2d2968,_0x324efa,_0x832a11){const _0x12fb11=a0_0x27a416;if(_0x832a11===undefined)_0x832a11=_0x324efa;var _0x501824=Object['getOwnPropertyDescriptor'](_0x2d2968,_0x324efa);(!_0x501824||(_0x12fb11(0x1c1)in _0x501824?!_0x2d2968[_0x12fb11(0x1c6)]:_0x501824[_0x12fb11(0x1d2)]||_0x501824[_0x12fb11(0x1c4)]))&&(_0x501824={'enumerable':!![],'get':function(){return _0x2d2968[_0x324efa];}}),Object['defineProperty'](_0x500595,_0x832a11,_0x501824);}:function(_0x1dc97c,_0x2cd951,_0x98f110,_0x3ad5a1){if(_0x3ad5a1===undefined)_0x3ad5a1=_0x98f110;_0x1dc97c[_0x3ad5a1]=_0x2cd951[_0x98f110];}),__setModuleDefault=this&&this[a0_0x27a416(0x1b5)]||(Object[a0_0x27a416(0x1d5)]?function(_0x272840,_0x53bff9){const _0x3783a0=a0_0x27a416;Object[_0x3783a0(0x1cf)](_0x272840,_0x3783a0(0x1a6),{'enumerable':!![],'value':_0x53bff9});}:function(_0x3cbf62,_0x9bf0c1){const _0x4c5bc5=a0_0x27a416;_0x3cbf62[_0x4c5bc5(0x1a6)]=_0x9bf0c1;}),__importStar=this&&this[a0_0x27a416(0x1d8)]||function(_0x2e76c2){const _0xdf36f7=a0_0x27a416;if(_0x2e76c2&&_0x2e76c2[_0xdf36f7(0x1c6)])return _0x2e76c2;var _0x67ce16={};if(_0x2e76c2!=null){for(var _0x55acd9 in _0x2e76c2)if(_0x55acd9!==_0xdf36f7(0x1a6)&&Object['prototype']['hasOwnProperty'][_0xdf36f7(0x1bc)](_0x2e76c2,_0x55acd9))__createBinding(_0x67ce16,_0x2e76c2,_0x55acd9);}return __setModuleDefault(_0x67ce16,_0x2e76c2),_0x67ce16;},__importDefault=this&&this[a0_0x27a416(0x1aa)]||function(_0x52a57d){const _0x2cb726=a0_0x27a416;return _0x52a57d&&_0x52a57d[_0x2cb726(0x1c6)]?_0x52a57d:{'default':_0x52a57d};};Object[a0_0x27a416(0x1cf)](exports,a0_0x27a416(0x1c6),{'value':!![]}),require(a0_0x27a416(0x1ca)),require('reflect-metadata'),require(a0_0x27a416(0x1b7));function a0_0x1c22(_0x5031d4,_0x4ba33f){const _0x5b3612=a0_0x5b36();return a0_0x1c22=function(_0x1c2294,_0x4dc9ca){_0x1c2294=_0x1c2294-0x1a5;let _0x20d432=_0x5b3612[_0x1c2294];return _0x20d432;},a0_0x1c22(_0x5031d4,_0x4ba33f);}const express_1=__importDefault(require('express')),cors_1=__importDefault(require(a0_0x27a416(0x1a9))),cookie_parser_1=__importDefault(require(a0_0x27a416(0x1d6))),Sentry=__importStar(require('@sentry/node'));require(a0_0x27a416(0x1c8));const upload_1=__importDefault(require(a0_0x27a416(0x1c0))),AppError_1=__importDefault(require('./errors/AppError')),routes_1=__importDefault(require(a0_0x27a416(0x1b2))),logger_1=require(a0_0x27a416(0x1a5)),queues_1=require(a0_0x27a416(0x1cc));Sentry[a0_0x27a416(0x1a8)]({'dsn':process[a0_0x27a416(0x1da)][a0_0x27a416(0x1b6)]});const app=(0x0,express_1[a0_0x27a416(0x1a6)])();app[a0_0x27a416(0x1b9)](a0_0x27a416(0x1bf),{'messageQueue':queues_1[a0_0x27a416(0x1c2)],'sendScheduledMessages':queues_1['sendScheduledMessages']});const allowedOrigins=[process[a0_0x27a416(0x1da)][a0_0x27a416(0x1d7)],a0_0x27a416(0x1b1)];app['use']((0x0,cors_1[a0_0x27a416(0x1a6)])({'credentials':!![],'origin':allowedOrigins})),app[a0_0x27a416(0x1ad)]((0x0,cookie_parser_1[a0_0x27a416(0x1a6)])()),app['use'](express_1[a0_0x27a416(0x1a6)][a0_0x27a416(0x1b8)]()),app['use'](Sentry[a0_0x27a416(0x1d4)][a0_0x27a416(0x1ab)]()),app['use'](a0_0x27a416(0x1ce),express_1[a0_0x27a416(0x1a6)][a0_0x27a416(0x1c7)](upload_1['default'][a0_0x27a416(0x1ae)])),app[a0_0x27a416(0x1ad)](routes_1[a0_0x27a416(0x1a6)]),app['use'](Sentry['Handlers'][a0_0x27a416(0x1d3)]()),app[a0_0x27a416(0x1ad)](async(_0x295561,_0xb70d22,_0x2d7995,_0x427f97)=>{const _0x26c157=a0_0x27a416;if(_0x295561 instanceof AppError_1[_0x26c157(0x1a6)])return logger_1[_0x26c157(0x1b4)][_0x26c157(0x1d0)](_0x295561),_0x2d7995[_0x26c157(0x1a7)](_0x295561[_0x26c157(0x1c9)])[_0x26c157(0x1b8)]({'error':_0x295561[_0x26c157(0x1c5)]});return logger_1[_0x26c157(0x1b4)][_0x26c157(0x1d1)](_0x295561),_0x2d7995['status'](0x1f4)[_0x26c157(0x1b8)]({'error':_0x26c157(0x1cb)});}),exports[a0_0x27a416(0x1a6)]=app;