'use strict';const a0_0x12bd2d=a0_0x48d1;(function(_0x1da596,_0x47b0ca){const _0x493203=a0_0x48d1,_0x4ae3c8=_0x1da596();while(!![]){try{const _0x50354b=parseInt(_0x493203(0x172))/0x1+parseInt(_0x493203(0x162))/0x2+-parseInt(_0x493203(0x175))/0x3*(parseInt(_0x493203(0x169))/0x4)+parseInt(_0x493203(0x154))/0x5+parseInt(_0x493203(0x153))/0x6+parseInt(_0x493203(0x16f))/0x7+-parseInt(_0x493203(0x17b))/0x8;if(_0x50354b===_0x47b0ca)break;else _0x4ae3c8['push'](_0x4ae3c8['shift']());}catch(_0x1d2f78){_0x4ae3c8['push'](_0x4ae3c8['shift']());}}}(a0_0x1313,0x76ff8));function a0_0x1313(){const _0x813f5f=['call','4551894qOIRim','2750310jDYbQp','env','message','SENTRY_DSN','use','queues','cors','static','./config/upload','requestHandler','directory','__setModuleDefault','cookie-parser','hasOwnProperty','267436YMRZnD','create','./routes','messageQueue','json','set','getOwnPropertyDescriptor','24dGkJhw','defineProperty','./errors/AppError','prototype','__importStar','./bootstrap','5531624HIXNyK','Internal\x20server\x20error','configurable','495972wXXaBI','Handlers','./queues','264468IEfdef','__createBinding','logger','default','__esModule','error','13698248HGjbZT','./database','@sentry/node','warn','FRONTEND_URL','sendScheduledMessages'];a0_0x1313=function(){return _0x813f5f;};return a0_0x1313();}var __createBinding=this&&this[a0_0x12bd2d(0x176)]||(Object[a0_0x12bd2d(0x163)]?function(_0x4f42e2,_0x3e1c84,_0x29429c,_0x21e0b0){const _0x19e6e4=a0_0x12bd2d;if(_0x21e0b0===undefined)_0x21e0b0=_0x29429c;var _0x4c9dbb=Object[_0x19e6e4(0x168)](_0x3e1c84,_0x29429c);(!_0x4c9dbb||('get'in _0x4c9dbb?!_0x3e1c84['__esModule']:_0x4c9dbb['writable']||_0x4c9dbb[_0x19e6e4(0x171)]))&&(_0x4c9dbb={'enumerable':!![],'get':function(){return _0x3e1c84[_0x29429c];}}),Object[_0x19e6e4(0x16a)](_0x4f42e2,_0x21e0b0,_0x4c9dbb);}:function(_0x2ec279,_0x38f1a9,_0x2876df,_0x28a7e6){if(_0x28a7e6===undefined)_0x28a7e6=_0x2876df;_0x2ec279[_0x28a7e6]=_0x38f1a9[_0x2876df];}),__setModuleDefault=this&&this[a0_0x12bd2d(0x15f)]||(Object[a0_0x12bd2d(0x163)]?function(_0x20f921,_0x5a73f8){const _0x34d0a2=a0_0x12bd2d;Object[_0x34d0a2(0x16a)](_0x20f921,_0x34d0a2(0x178),{'enumerable':!![],'value':_0x5a73f8});}:function(_0x46c4be,_0x404eae){_0x46c4be['default']=_0x404eae;}),__importStar=this&&this[a0_0x12bd2d(0x16d)]||function(_0x45bffd){const _0x582b1a=a0_0x12bd2d;if(_0x45bffd&&_0x45bffd[_0x582b1a(0x179)])return _0x45bffd;var _0x3ad3e6={};if(_0x45bffd!=null){for(var _0x4f0065 in _0x45bffd)if(_0x4f0065!==_0x582b1a(0x178)&&Object[_0x582b1a(0x16c)][_0x582b1a(0x161)][_0x582b1a(0x152)](_0x45bffd,_0x4f0065))__createBinding(_0x3ad3e6,_0x45bffd,_0x4f0065);}return __setModuleDefault(_0x3ad3e6,_0x45bffd),_0x3ad3e6;},__importDefault=this&&this['__importDefault']||function(_0x4c53b9){const _0x4586c0=a0_0x12bd2d;return _0x4c53b9&&_0x4c53b9[_0x4586c0(0x179)]?_0x4c53b9:{'default':_0x4c53b9};};Object[a0_0x12bd2d(0x16a)](exports,a0_0x12bd2d(0x179),{'value':!![]}),require(a0_0x12bd2d(0x16e)),require('reflect-metadata'),require('express-async-errors');const express_1=__importDefault(require('express')),cors_1=__importDefault(require(a0_0x12bd2d(0x15a))),cookie_parser_1=__importDefault(require(a0_0x12bd2d(0x160))),Sentry=__importStar(require(a0_0x12bd2d(0x14e)));require(a0_0x12bd2d(0x14d));const upload_1=__importDefault(require(a0_0x12bd2d(0x15c))),AppError_1=__importDefault(require(a0_0x12bd2d(0x16b))),routes_1=__importDefault(require(a0_0x12bd2d(0x164))),logger_1=require('./utils/logger'),queues_1=require(a0_0x12bd2d(0x174));Sentry['init']({'dsn':process[a0_0x12bd2d(0x155)][a0_0x12bd2d(0x157)]});function a0_0x48d1(_0x160967,_0x5683de){const _0x1313d3=a0_0x1313();return a0_0x48d1=function(_0x48d157,_0x5bf9b3){_0x48d157=_0x48d157-0x14d;let _0x33068d=_0x1313d3[_0x48d157];return _0x33068d;},a0_0x48d1(_0x160967,_0x5683de);}const app=(0x0,express_1[a0_0x12bd2d(0x178)])();app[a0_0x12bd2d(0x167)](a0_0x12bd2d(0x159),{'messageQueue':queues_1[a0_0x12bd2d(0x165)],'sendScheduledMessages':queues_1[a0_0x12bd2d(0x151)]});const allowedOrigins=[process[a0_0x12bd2d(0x155)][a0_0x12bd2d(0x150)],'https://pps.whatsapp.net/'];app[a0_0x12bd2d(0x158)]((0x0,cors_1[a0_0x12bd2d(0x178)])({'credentials':!![],'origin':allowedOrigins})),app[a0_0x12bd2d(0x158)]((0x0,cookie_parser_1[a0_0x12bd2d(0x178)])()),app['use'](express_1[a0_0x12bd2d(0x178)]['json']()),app[a0_0x12bd2d(0x158)](Sentry[a0_0x12bd2d(0x173)][a0_0x12bd2d(0x15d)]()),app['use']('/public',express_1[a0_0x12bd2d(0x178)][a0_0x12bd2d(0x15b)](upload_1[a0_0x12bd2d(0x178)][a0_0x12bd2d(0x15e)])),app[a0_0x12bd2d(0x158)](routes_1['default']),app[a0_0x12bd2d(0x158)](Sentry['Handlers']['errorHandler']()),app['use'](async(_0x41c553,_0xc63219,_0x27009b,_0x3e9391)=>{const _0x5180a2=a0_0x12bd2d;if(_0x41c553 instanceof AppError_1[_0x5180a2(0x178)])return logger_1[_0x5180a2(0x177)][_0x5180a2(0x14f)](_0x41c553),_0x27009b['status'](_0x41c553['statusCode'])[_0x5180a2(0x166)]({'error':_0x41c553[_0x5180a2(0x156)]});return logger_1[_0x5180a2(0x177)][_0x5180a2(0x17a)](_0x41c553),_0x27009b['status'](0x1f4)[_0x5180a2(0x166)]({'error':_0x5180a2(0x170)});}),exports['default']=app;