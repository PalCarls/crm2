'use strict';function a0_0x1f83(){const _0x1cec6c=['reflect-metadata','warn','error','2044910smfdFb','cors','body-parser','__esModule','__importDefault','writable','cookie-parser','__setModuleDefault','hasOwnProperty','errorHandler','status','create','requestHandler','sendScheduledMessages','message','Handlers','json','./errors/AppError','https://pps.whatsapp.net/','call','7dkQLHk','queues','./config/upload','use','logger','5946TEIwUw','928038ipAjPo','init','2703368aIEXYy','6006789QojLPx','412jGCawn','statusCode','./database','static','472688OhGURG','FRONTEND_URL','./bootstrap','1125038WSBrCn','SENTRY_DSN','default','express-async-errors','__createBinding','env','defineProperty','Internal\x20server\x20error','prototype'];a0_0x1f83=function(){return _0x1cec6c;};return a0_0x1f83();}const a0_0x1067b7=a0_0x46b1;(function(_0x3e0eb7,_0x3f51dd){const _0x97c41a=a0_0x46b1,_0x3d761a=_0x3e0eb7();while(!![]){try{const _0x1caf77=-parseInt(_0x97c41a(0x18a))/0x1+parseInt(_0x97c41a(0x18d))/0x2+parseInt(_0x97c41a(0x181))/0x3*(-parseInt(_0x97c41a(0x186))/0x4)+-parseInt(_0x97c41a(0x168))/0x5+-parseInt(_0x97c41a(0x182))/0x6*(parseInt(_0x97c41a(0x17c))/0x7)+parseInt(_0x97c41a(0x184))/0x8+parseInt(_0x97c41a(0x185))/0x9;if(_0x1caf77===_0x3f51dd)break;else _0x3d761a['push'](_0x3d761a['shift']());}catch(_0x575624){_0x3d761a['push'](_0x3d761a['shift']());}}}(a0_0x1f83,0x4fecc));function a0_0x46b1(_0x5dc9ec,_0x1b44b0){const _0x1f830a=a0_0x1f83();return a0_0x46b1=function(_0x46b178,_0x43f2ba){_0x46b178=_0x46b178-0x163;let _0x5b539a=_0x1f830a[_0x46b178];return _0x5b539a;},a0_0x46b1(_0x5dc9ec,_0x1b44b0);}var __createBinding=this&&this[a0_0x1067b7(0x191)]||(Object[a0_0x1067b7(0x173)]?function(_0x2ab198,_0x5f2358,_0x4d382a,_0x294d15){const _0x5b7d9e=a0_0x1067b7;if(_0x294d15===undefined)_0x294d15=_0x4d382a;var _0x3b8967=Object['getOwnPropertyDescriptor'](_0x5f2358,_0x4d382a);(!_0x3b8967||('get'in _0x3b8967?!_0x5f2358[_0x5b7d9e(0x16b)]:_0x3b8967[_0x5b7d9e(0x16d)]||_0x3b8967['configurable']))&&(_0x3b8967={'enumerable':!![],'get':function(){return _0x5f2358[_0x4d382a];}}),Object[_0x5b7d9e(0x193)](_0x2ab198,_0x294d15,_0x3b8967);}:function(_0x555bf0,_0x440601,_0x2a43f5,_0x39b161){if(_0x39b161===undefined)_0x39b161=_0x2a43f5;_0x555bf0[_0x39b161]=_0x440601[_0x2a43f5];}),__setModuleDefault=this&&this[a0_0x1067b7(0x16f)]||(Object['create']?function(_0x128e14,_0x2219ee){Object['defineProperty'](_0x128e14,'default',{'enumerable':!![],'value':_0x2219ee});}:function(_0x34f6e6,_0x15be56){const _0x5b82c9=a0_0x1067b7;_0x34f6e6[_0x5b82c9(0x18f)]=_0x15be56;}),__importStar=this&&this['__importStar']||function(_0x388bc4){const _0x3205b4=a0_0x1067b7;if(_0x388bc4&&_0x388bc4['__esModule'])return _0x388bc4;var _0x5c1851={};if(_0x388bc4!=null){for(var _0x19d641 in _0x388bc4)if(_0x19d641!==_0x3205b4(0x18f)&&Object[_0x3205b4(0x164)][_0x3205b4(0x170)][_0x3205b4(0x17b)](_0x388bc4,_0x19d641))__createBinding(_0x5c1851,_0x388bc4,_0x19d641);}return __setModuleDefault(_0x5c1851,_0x388bc4),_0x5c1851;},__importDefault=this&&this[a0_0x1067b7(0x16c)]||function(_0x3fd800){const _0x5ee12f=a0_0x1067b7;return _0x3fd800&&_0x3fd800[_0x5ee12f(0x16b)]?_0x3fd800:{'default':_0x3fd800};};Object['defineProperty'](exports,a0_0x1067b7(0x16b),{'value':!![]}),require(a0_0x1067b7(0x18c)),require(a0_0x1067b7(0x165)),require(a0_0x1067b7(0x190));const express_1=__importDefault(require('express')),cors_1=__importDefault(require(a0_0x1067b7(0x169))),cookie_parser_1=__importDefault(require(a0_0x1067b7(0x16e))),Sentry=__importStar(require('@sentry/node'));require(a0_0x1067b7(0x188));const upload_1=__importDefault(require(a0_0x1067b7(0x17e))),AppError_1=__importDefault(require(a0_0x1067b7(0x179))),routes_1=__importDefault(require('./routes')),logger_1=require('./utils/logger'),queues_1=require('./queues');Sentry[a0_0x1067b7(0x183)]({'dsn':process[a0_0x1067b7(0x192)][a0_0x1067b7(0x18e)]});const app=(0x0,express_1[a0_0x1067b7(0x18f)])();app['set'](a0_0x1067b7(0x17d),{'messageQueue':queues_1['messageQueue'],'sendScheduledMessages':queues_1[a0_0x1067b7(0x175)]});const allowedOrigins=[process[a0_0x1067b7(0x192)][a0_0x1067b7(0x18b)],a0_0x1067b7(0x17a)],bodyParser=require(a0_0x1067b7(0x16a));app[a0_0x1067b7(0x17f)](bodyParser[a0_0x1067b7(0x178)]({'limit':'5mb'})),app[a0_0x1067b7(0x17f)](bodyParser['urlencoded']({'limit':'5mb','extended':!![]})),app[a0_0x1067b7(0x17f)]((0x0,cors_1[a0_0x1067b7(0x18f)])({'credentials':!![],'origin':allowedOrigins})),app[a0_0x1067b7(0x17f)]((0x0,cookie_parser_1[a0_0x1067b7(0x18f)])()),app[a0_0x1067b7(0x17f)](express_1[a0_0x1067b7(0x18f)][a0_0x1067b7(0x178)]()),app[a0_0x1067b7(0x17f)](Sentry[a0_0x1067b7(0x177)][a0_0x1067b7(0x174)]()),app[a0_0x1067b7(0x17f)]('/public',express_1['default'][a0_0x1067b7(0x189)](upload_1[a0_0x1067b7(0x18f)]['directory'])),app[a0_0x1067b7(0x17f)](routes_1[a0_0x1067b7(0x18f)]),app[a0_0x1067b7(0x17f)](Sentry['Handlers'][a0_0x1067b7(0x171)]()),app[a0_0x1067b7(0x17f)](async(_0x2bc0e2,_0x29e62d,_0x5ba134,_0x462bd1)=>{const _0x43334b=a0_0x1067b7;if(_0x2bc0e2 instanceof AppError_1[_0x43334b(0x18f)])return logger_1[_0x43334b(0x180)][_0x43334b(0x166)](_0x2bc0e2),_0x5ba134['status'](_0x2bc0e2[_0x43334b(0x187)])['json']({'error':_0x2bc0e2[_0x43334b(0x176)]});return logger_1[_0x43334b(0x180)][_0x43334b(0x167)](_0x2bc0e2),_0x5ba134[_0x43334b(0x172)](0x1f4)[_0x43334b(0x178)]({'error':_0x43334b(0x163)});}),exports[a0_0x1067b7(0x18f)]=app;