'use strict';const a0_0x2dc7ea=a0_0x346a;(function(_0x29fd91,_0x29d914){const _0x335b1c=a0_0x346a,_0xa39f78=_0x29fd91();while(!![]){try{const _0x1e1e24=parseInt(_0x335b1c(0x1df))/0x1+parseInt(_0x335b1c(0x1b8))/0x2+-parseInt(_0x335b1c(0x1ce))/0x3+-parseInt(_0x335b1c(0x1e3))/0x4*(parseInt(_0x335b1c(0x1d7))/0x5)+-parseInt(_0x335b1c(0x1d9))/0x6*(parseInt(_0x335b1c(0x1c8))/0x7)+-parseInt(_0x335b1c(0x1de))/0x8+parseInt(_0x335b1c(0x1cb))/0x9;if(_0x1e1e24===_0x29d914)break;else _0xa39f78['push'](_0xa39f78['shift']());}catch(_0x10ad49){_0xa39f78['push'](_0xa39f78['shift']());}}}(a0_0x992c,0xc7024));function a0_0x346a(_0x98b42f,_0xda5519){const _0x992cef=a0_0x992c();return a0_0x346a=function(_0x346a2f,_0x3c4180){_0x346a2f=_0x346a2f-0x1b6;let _0x21aa85=_0x992cef[_0x346a2f];return _0x21aa85;},a0_0x346a(_0x98b42f,_0xda5519);}var __createBinding=this&&this[a0_0x2dc7ea(0x1b6)]||(Object[a0_0x2dc7ea(0x1b9)]?function(_0x588a33,_0x5deb9f,_0x1c854e,_0x5a10af){const _0x1bb7d8=a0_0x2dc7ea;if(_0x5a10af===undefined)_0x5a10af=_0x1c854e;var _0xd989f3=Object['getOwnPropertyDescriptor'](_0x5deb9f,_0x1c854e);(!_0xd989f3||(_0x1bb7d8(0x1e1)in _0xd989f3?!_0x5deb9f[_0x1bb7d8(0x1e7)]:_0xd989f3[_0x1bb7d8(0x1e0)]||_0xd989f3[_0x1bb7d8(0x1d2)]))&&(_0xd989f3={'enumerable':!![],'get':function(){return _0x5deb9f[_0x1c854e];}}),Object['defineProperty'](_0x588a33,_0x5a10af,_0xd989f3);}:function(_0x4b13c0,_0x5567c7,_0x5f194f,_0x5b9ebf){if(_0x5b9ebf===undefined)_0x5b9ebf=_0x5f194f;_0x4b13c0[_0x5b9ebf]=_0x5567c7[_0x5f194f];}),__setModuleDefault=this&&this[a0_0x2dc7ea(0x1e6)]||(Object['create']?function(_0x55875a,_0x43f295){const _0x578815=a0_0x2dc7ea;Object[_0x578815(0x1d6)](_0x55875a,'default',{'enumerable':!![],'value':_0x43f295});}:function(_0x56d9c0,_0x3d1f44){const _0x39cbe4=a0_0x2dc7ea;_0x56d9c0[_0x39cbe4(0x1b7)]=_0x3d1f44;}),__importStar=this&&this[a0_0x2dc7ea(0x1c7)]||function(_0x13d50d){const _0x42d2e1=a0_0x2dc7ea;if(_0x13d50d&&_0x13d50d[_0x42d2e1(0x1e7)])return _0x13d50d;var _0x3a3dae={};if(_0x13d50d!=null){for(var _0x13a11e in _0x13d50d)if(_0x13a11e!==_0x42d2e1(0x1b7)&&Object[_0x42d2e1(0x1d0)][_0x42d2e1(0x1c9)][_0x42d2e1(0x1e4)](_0x13d50d,_0x13a11e))__createBinding(_0x3a3dae,_0x13d50d,_0x13a11e);}return __setModuleDefault(_0x3a3dae,_0x13d50d),_0x3a3dae;},__importDefault=this&&this[a0_0x2dc7ea(0x1d4)]||function(_0x37c0fe){const _0x35814a=a0_0x2dc7ea;return _0x37c0fe&&_0x37c0fe[_0x35814a(0x1e7)]?_0x37c0fe:{'default':_0x37c0fe};};Object['defineProperty'](exports,a0_0x2dc7ea(0x1e7),{'value':!![]}),require(a0_0x2dc7ea(0x1db)),require(a0_0x2dc7ea(0x1e2)),require('express-async-errors');const express_1=__importDefault(require(a0_0x2dc7ea(0x1dc))),cors_1=__importDefault(require(a0_0x2dc7ea(0x1dd))),cookie_parser_1=__importDefault(require('cookie-parser')),Sentry=__importStar(require('@sentry/node'));require('./database');const upload_1=__importDefault(require(a0_0x2dc7ea(0x1c6))),AppError_1=__importDefault(require(a0_0x2dc7ea(0x1bb))),routes_1=__importDefault(require(a0_0x2dc7ea(0x1cd))),logger_1=require('./utils/logger'),queues_1=require(a0_0x2dc7ea(0x1c5));Sentry['init']({'dsn':process[a0_0x2dc7ea(0x1ba)][a0_0x2dc7ea(0x1d8)]});const app=(0x0,express_1[a0_0x2dc7ea(0x1b7)])();app[a0_0x2dc7ea(0x1d5)](a0_0x2dc7ea(0x1da),{'messageQueue':queues_1[a0_0x2dc7ea(0x1bc)],'sendScheduledMessages':queues_1[a0_0x2dc7ea(0x1d1)]});function a0_0x992c(){const _0x550589=['https://pps.whatsapp.net/','status','error','directory','Handlers','./queues','./config/upload','__importStar','171269uppUmd','hasOwnProperty','static','32978169fUXiBs','Internal\x20server\x20error','./routes','3554706PCrtLX','message','prototype','sendScheduledMessages','configurable','json','__importDefault','set','defineProperty','5FLcHGn','SENTRY_DSN','30TqGClG','queues','./bootstrap','express','cors','11937992CwDdSL','667761loAOiQ','writable','get','reflect-metadata','6123812RjyVIj','call','use','__setModuleDefault','__esModule','__createBinding','default','1627154vMVOIt','create','env','./errors/AppError','messageQueue','errorHandler','logger','warn'];a0_0x992c=function(){return _0x550589;};return a0_0x992c();}const allowedOrigins=[process[a0_0x2dc7ea(0x1ba)]['FRONTEND_URL'],a0_0x2dc7ea(0x1c0)];app['use']((0x0,cors_1[a0_0x2dc7ea(0x1b7)])({'credentials':!![],'origin':allowedOrigins})),app[a0_0x2dc7ea(0x1e5)]((0x0,cookie_parser_1[a0_0x2dc7ea(0x1b7)])()),app['use'](express_1['default'][a0_0x2dc7ea(0x1d3)]()),app['use'](Sentry[a0_0x2dc7ea(0x1c4)]['requestHandler']()),app[a0_0x2dc7ea(0x1e5)]('/public',express_1['default'][a0_0x2dc7ea(0x1ca)](upload_1[a0_0x2dc7ea(0x1b7)][a0_0x2dc7ea(0x1c3)])),app[a0_0x2dc7ea(0x1e5)](routes_1[a0_0x2dc7ea(0x1b7)]),app['use'](Sentry[a0_0x2dc7ea(0x1c4)][a0_0x2dc7ea(0x1bd)]()),app[a0_0x2dc7ea(0x1e5)](async(_0x50b325,_0x338053,_0x5d5c8a,_0xbcc3cb)=>{const _0xc686b3=a0_0x2dc7ea;if(_0x50b325 instanceof AppError_1[_0xc686b3(0x1b7)])return logger_1[_0xc686b3(0x1be)][_0xc686b3(0x1bf)](_0x50b325),_0x5d5c8a[_0xc686b3(0x1c1)](_0x50b325['statusCode'])[_0xc686b3(0x1d3)]({'error':_0x50b325[_0xc686b3(0x1cf)]});return logger_1['logger'][_0xc686b3(0x1c2)](_0x50b325),_0x5d5c8a['status'](0x1f4)[_0xc686b3(0x1d3)]({'error':_0xc686b3(0x1cc)});}),exports[a0_0x2dc7ea(0x1b7)]=app;