'use strict';const a0_0xde96e9=a0_0x42bd;(function(_0x2ec9dc,_0xe7cc17){const _0x5021a7=a0_0x42bd,_0x12b8c4=_0x2ec9dc();while(!![]){try{const _0x31bf52=parseInt(_0x5021a7(0x15d))/0x1*(-parseInt(_0x5021a7(0x15f))/0x2)+parseInt(_0x5021a7(0x184))/0x3+parseInt(_0x5021a7(0x16a))/0x4+-parseInt(_0x5021a7(0x174))/0x5+-parseInt(_0x5021a7(0x170))/0x6*(parseInt(_0x5021a7(0x164))/0x7)+parseInt(_0x5021a7(0x163))/0x8+parseInt(_0x5021a7(0x159))/0x9*(parseInt(_0x5021a7(0x17b))/0xa);if(_0x31bf52===_0xe7cc17)break;else _0x12b8c4['push'](_0x12b8c4['shift']());}catch(_0xe42aa){_0x12b8c4['push'](_0x12b8c4['shift']());}}}(a0_0x6d33,0x4c740));function a0_0x42bd(_0x2e575a,_0x2f4ff8){const _0x6d33f=a0_0x6d33();return a0_0x42bd=function(_0x42bd73,_0x234879){_0x42bd73=_0x42bd73-0x157;let _0x501b96=_0x6d33f[_0x42bd73];return _0x501b96;},a0_0x42bd(_0x2e575a,_0x2f4ff8);}function a0_0x6d33(){const _0xfa7f2e=['status','16ewvRbg','hasOwnProperty','sendScheduledMessages','set','1262336JsdDFt','287QLYLpa','errorHandler','writable','/public','default','init','80652TdsYdp','defineProperty','__importStar','./utils/logger','logger','warn','24534KUnIWV','__esModule','Internal\x20server\x20error','getOwnPropertyDescriptor','1059445YlPipt','static','create','env','get','__importDefault','statusCode','40FUpXkV','__createBinding','SENTRY_DSN','directory','./bootstrap','reflect-metadata','__setModuleDefault','json','express-async-errors','1359993SsAFkX','use','./errors/AppError','configurable','920817rsjxTS','./routes','Handlers','./database','43481bmMddP'];a0_0x6d33=function(){return _0xfa7f2e;};return a0_0x6d33();}var __createBinding=this&&this[a0_0xde96e9(0x17c)]||(Object[a0_0xde96e9(0x176)]?function(_0x151405,_0x38694e,_0x213396,_0x36c8bb){const _0x3da475=a0_0xde96e9;if(_0x36c8bb===undefined)_0x36c8bb=_0x213396;var _0x45762b=Object[_0x3da475(0x173)](_0x38694e,_0x213396);(!_0x45762b||(_0x3da475(0x178)in _0x45762b?!_0x38694e[_0x3da475(0x171)]:_0x45762b[_0x3da475(0x166)]||_0x45762b[_0x3da475(0x158)]))&&(_0x45762b={'enumerable':!![],'get':function(){return _0x38694e[_0x213396];}}),Object['defineProperty'](_0x151405,_0x36c8bb,_0x45762b);}:function(_0xf606d,_0xbbf9d8,_0x5dc1fe,_0x376213){if(_0x376213===undefined)_0x376213=_0x5dc1fe;_0xf606d[_0x376213]=_0xbbf9d8[_0x5dc1fe];}),__setModuleDefault=this&&this[a0_0xde96e9(0x181)]||(Object[a0_0xde96e9(0x176)]?function(_0x5a2aab,_0x21a2f5){const _0x2611e2=a0_0xde96e9;Object[_0x2611e2(0x16b)](_0x5a2aab,_0x2611e2(0x168),{'enumerable':!![],'value':_0x21a2f5});}:function(_0x5256da,_0x3af239){_0x5256da['default']=_0x3af239;}),__importStar=this&&this[a0_0xde96e9(0x16c)]||function(_0xf96544){const _0x4a8833=a0_0xde96e9;if(_0xf96544&&_0xf96544[_0x4a8833(0x171)])return _0xf96544;var _0x568f5b={};if(_0xf96544!=null){for(var _0x1ab28d in _0xf96544)if(_0x1ab28d!==_0x4a8833(0x168)&&Object['prototype'][_0x4a8833(0x160)]['call'](_0xf96544,_0x1ab28d))__createBinding(_0x568f5b,_0xf96544,_0x1ab28d);}return __setModuleDefault(_0x568f5b,_0xf96544),_0x568f5b;},__importDefault=this&&this[a0_0xde96e9(0x179)]||function(_0x500d27){return _0x500d27&&_0x500d27['__esModule']?_0x500d27:{'default':_0x500d27};};Object[a0_0xde96e9(0x16b)](exports,a0_0xde96e9(0x171),{'value':!![]}),require(a0_0xde96e9(0x17f)),require(a0_0xde96e9(0x180)),require(a0_0xde96e9(0x183));const express_1=__importDefault(require('express')),cors_1=__importDefault(require('cors')),cookie_parser_1=__importDefault(require('cookie-parser')),Sentry=__importStar(require('@sentry/node'));require(a0_0xde96e9(0x15c));const upload_1=__importDefault(require('./config/upload')),AppError_1=__importDefault(require(a0_0xde96e9(0x157))),routes_1=__importDefault(require(a0_0xde96e9(0x15a))),logger_1=require(a0_0xde96e9(0x16d)),queues_1=require('./queues');Sentry[a0_0xde96e9(0x169)]({'dsn':process['env'][a0_0xde96e9(0x17d)]});const app=(0x0,express_1[a0_0xde96e9(0x168)])();app[a0_0xde96e9(0x162)]('queues',{'messageQueue':queues_1['messageQueue'],'sendScheduledMessages':queues_1[a0_0xde96e9(0x161)]});const allowedOrigins=[process[a0_0xde96e9(0x177)]['FRONTEND_URL'],'https://pps.whatsapp.net/'];app[a0_0xde96e9(0x185)]((0x0,cors_1[a0_0xde96e9(0x168)])({'credentials':!![],'origin':allowedOrigins})),app['use']((0x0,cookie_parser_1[a0_0xde96e9(0x168)])()),app[a0_0xde96e9(0x185)](express_1[a0_0xde96e9(0x168)][a0_0xde96e9(0x182)]()),app[a0_0xde96e9(0x185)](Sentry[a0_0xde96e9(0x15b)]['requestHandler']()),app['use'](a0_0xde96e9(0x167),express_1['default'][a0_0xde96e9(0x175)](upload_1['default'][a0_0xde96e9(0x17e)])),app['use'](routes_1['default']),app[a0_0xde96e9(0x185)](Sentry['Handlers'][a0_0xde96e9(0x165)]()),app[a0_0xde96e9(0x185)](async(_0xef6854,_0x1b3c5d,_0x45f5a7,_0x5f08c2)=>{const _0x263bfa=a0_0xde96e9;if(_0xef6854 instanceof AppError_1['default'])return logger_1['logger'][_0x263bfa(0x16f)](_0xef6854),_0x45f5a7[_0x263bfa(0x15e)](_0xef6854[_0x263bfa(0x17a)])[_0x263bfa(0x182)]({'error':_0xef6854['message']});return logger_1[_0x263bfa(0x16e)]['error'](_0xef6854),_0x45f5a7[_0x263bfa(0x15e)](0x1f4)[_0x263bfa(0x182)]({'error':_0x263bfa(0x172)});}),exports[a0_0xde96e9(0x168)]=app;