'use strict';const a637_0x92ebce=a637_0x504a;(function(_0x566f66,_0x223762){const _0x3b422f=a637_0x504a,_0x55ddc2=_0x566f66();while(!![]){try{const _0x49c066=-parseInt(_0x3b422f(0x1c4))/0x1+-parseInt(_0x3b422f(0x1c2))/0x2*(parseInt(_0x3b422f(0x1bd))/0x3)+-parseInt(_0x3b422f(0x1cd))/0x4+parseInt(_0x3b422f(0x1cb))/0x5+-parseInt(_0x3b422f(0x1ad))/0x6*(-parseInt(_0x3b422f(0x1bc))/0x7)+-parseInt(_0x3b422f(0x1c3))/0x8*(-parseInt(_0x3b422f(0x1cc))/0x9)+parseInt(_0x3b422f(0x1b4))/0xa*(parseInt(_0x3b422f(0x1b3))/0xb);if(_0x49c066===_0x223762)break;else _0x55ddc2['push'](_0x55ddc2['shift']());}catch(_0xf9bbb5){_0x55ddc2['push'](_0x55ddc2['shift']());}}}(a637_0x4833,0x75f54));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x38c58e,_0x5760b6,_0x406249,_0x2051c4){const _0x1682a2=a637_0x504a;if(_0x2051c4===undefined)_0x2051c4=_0x406249;var _0x188ebd=Object['getOwnPropertyDescriptor'](_0x5760b6,_0x406249);(!_0x188ebd||('get'in _0x188ebd?!_0x5760b6['__esModule']:_0x188ebd[_0x1682a2(0x1c1)]||_0x188ebd[_0x1682a2(0x1b5)]))&&(_0x188ebd={'enumerable':!![],'get':function(){return _0x5760b6[_0x406249];}}),Object[_0x1682a2(0x1c7)](_0x38c58e,_0x2051c4,_0x188ebd);}:function(_0x50c971,_0x37bf42,_0x233f68,_0x33d77e){if(_0x33d77e===undefined)_0x33d77e=_0x233f68;_0x50c971[_0x33d77e]=_0x37bf42[_0x233f68];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a637_0x92ebce(0x1ca)]?function(_0x37fc9b,_0x355e14){const _0x38191e=a637_0x92ebce;Object['defineProperty'](_0x37fc9b,_0x38191e(0x1b0),{'enumerable':!![],'value':_0x355e14});}:function(_0xe989db,_0x2a3954){const _0x2a83ac=a637_0x92ebce;_0xe989db[_0x2a83ac(0x1b0)]=_0x2a3954;}),__importStar=this&&this[a637_0x92ebce(0x1b8)]||function(_0x409559){const _0x305293=a637_0x92ebce;if(_0x409559&&_0x409559[_0x305293(0x1b2)])return _0x409559;var _0x523469={};if(_0x409559!=null){for(var _0x5d4cc3 in _0x409559)if(_0x5d4cc3!==_0x305293(0x1b0)&&Object[_0x305293(0x1af)][_0x305293(0x1b9)][_0x305293(0x1bb)](_0x409559,_0x5d4cc3))__createBinding(_0x523469,_0x409559,_0x5d4cc3);}return __setModuleDefault(_0x523469,_0x409559),_0x523469;},__importDefault=this&&this[a637_0x92ebce(0x1be)]||function(_0x20b35f){const _0x29f35f=a637_0x92ebce;return _0x20b35f&&_0x20b35f[_0x29f35f(0x1b2)]?_0x20b35f:{'default':_0x20b35f};};Object[a637_0x92ebce(0x1c7)](exports,a637_0x92ebce(0x1b2),{'value':!![]});function a637_0x4833(){const _0x34e6ea=['40KFNobL','configurable','update','length','__importStar','hasOwnProperty','./ShowWhatsAppService','call','7336ilUVxQ','2897730PyDjfc','__importDefault','yup','boolean','writable','2DZjqqI','8456kTXvhO','459007XDIJYZ','message','./AssociateWhatsappQueue','defineProperty','not','../../errors/AppError','create','793215bvPeFH','1926babdzx','3673296kRZJuP','shape','sequelize','ERR_WAPP_GREETING_REQUIRED','../../models/Whatsapp','3840bGVbAs','min','prototype','default','string','__esModule','4869799xFOubo'];a637_0x4833=function(){return _0x34e6ea;};return a637_0x4833();}function a637_0x504a(_0x349f5a,_0x328722){const _0x483332=a637_0x4833();return a637_0x504a=function(_0x504a9f,_0x547588){_0x504a9f=_0x504a9f-0x1aa;let _0x8948fd=_0x483332[_0x504a9f];return _0x8948fd;},a637_0x504a(_0x349f5a,_0x328722);}const Yup=__importStar(require(a637_0x92ebce(0x1bf))),sequelize_1=require(a637_0x92ebce(0x1aa)),AppError_1=__importDefault(require(a637_0x92ebce(0x1c9))),Whatsapp_1=__importDefault(require(a637_0x92ebce(0x1ac))),ShowWhatsAppService_1=__importDefault(require(a637_0x92ebce(0x1ba))),AssociateWhatsappQueue_1=__importDefault(require(a637_0x92ebce(0x1c6))),UpdateWhatsAppService=async({whatsappData:_0x3dbb39,whatsappId:_0x7075cc,companyId:_0x187344})=>{const _0x210b7c=a637_0x92ebce,_0x588167=Yup['object']()[_0x210b7c(0x1ce)]({'name':Yup[_0x210b7c(0x1b1)]()[_0x210b7c(0x1ae)](0x2),'status':Yup[_0x210b7c(0x1b1)](),'isDefault':Yup[_0x210b7c(0x1c0)]()}),{name:_0x283a18,status:_0x105d10,isDefault:_0x28c2fb,session:_0x56c0b9,greetingMessage:_0x3fddf8,complationMessage:_0x2515c4,outOfHoursMessage:_0x2e295a,queueIds:queueIds=[],token:_0x5d84c9,maxUseBotQueues:maxUseBotQueues=0x0,timeUseBotQueues:timeUseBotQueues=0x0,expiresTicket:expiresTicket=0x0,allowGroup:_0x3e25c7,timeSendQueue:timeSendQueue=0x0,sendIdQueue:sendIdQueue=null,timeInactiveMessage:timeInactiveMessage=0x0,inactiveMessage:_0x4a78b9,ratingMessage:_0x466ad8,maxUseBotQueuesNPS:_0x1af626,expiresTicketNPS:expiresTicketNPS=0x0,whenExpiresTicket:_0x12d64d,expiresInactiveMessage:_0x3527f7,groupAsTicket:_0x574bca,importOldMessages:_0x7d8a1c,importRecentMessages:_0x48cf9d,closedTicketsPostImported:_0x98c243,importOldMessagesGroups:_0x536181,timeCreateNewTicket:timeCreateNewTicket=null,integrationId:_0x172f48,schedules:_0x17a028,promptId:_0x517e59,requestQR:requestQR=![]}=_0x3dbb39;try{await _0x588167['validate']({'name':_0x283a18,'status':_0x105d10,'isDefault':_0x28c2fb});}catch(_0x53833d){throw new AppError_1['default'](_0x53833d[_0x210b7c(0x1c5)]);}if(queueIds[_0x210b7c(0x1b7)]>0x1&&!_0x3fddf8)throw new AppError_1['default'](_0x210b7c(0x1ab));let _0x5b273f=null;_0x28c2fb&&(_0x5b273f=await Whatsapp_1['default']['findOne']({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x210b7c(0x1c8)]]:_0x7075cc},'companyId':_0x187344}}),_0x5b273f&&await _0x5b273f[_0x210b7c(0x1b6)]({'isDefault':![]}));const _0xdd7cd=await(0x0,ShowWhatsAppService_1['default'])(_0x7075cc,_0x187344);return await _0xdd7cd[_0x210b7c(0x1b6)]({'name':_0x283a18,'status':_0x105d10,'session':_0x56c0b9,'greetingMessage':_0x3fddf8,'complationMessage':_0x2515c4,'outOfHoursMessage':_0x2e295a,'isDefault':_0x28c2fb,'companyId':_0x187344,'token':_0x5d84c9,'maxUseBotQueues':maxUseBotQueues||0x0,'timeUseBotQueues':timeUseBotQueues||0x0,'expiresTicket':expiresTicket||0x0,'allowGroup':_0x3e25c7,'timeSendQueue':timeSendQueue,'sendIdQueue':sendIdQueue,'timeInactiveMessage':timeInactiveMessage,'inactiveMessage':_0x4a78b9,'ratingMessage':_0x466ad8,'maxUseBotQueuesNPS':_0x1af626,'expiresTicketNPS':expiresTicketNPS,'whenExpiresTicket':_0x12d64d,'expiresInactiveMessage':_0x3527f7,'groupAsTicket':_0x574bca,'importOldMessages':_0x7d8a1c,'importRecentMessages':_0x48cf9d,'closedTicketsPostImported':_0x98c243,'importOldMessagesGroups':_0x536181,'timeCreateNewTicket':timeCreateNewTicket,'integrationId':_0x172f48,'schedules':_0x17a028,'promptId':_0x517e59}),!requestQR&&await(0x0,AssociateWhatsappQueue_1[_0x210b7c(0x1b0)])(_0xdd7cd,queueIds),{'whatsapp':_0xdd7cd,'oldDefaultWhatsapp':_0x5b273f};};exports['default']=UpdateWhatsAppService;