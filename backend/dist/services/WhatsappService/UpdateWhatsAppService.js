'use strict';function a623_0x35a8(_0x3ab843,_0x58e172){const _0x132aad=a623_0x132a();return a623_0x35a8=function(_0x35a8e7,_0x15748a){_0x35a8e7=_0x35a8e7-0x10a;let _0x33d4c2=_0x132aad[_0x35a8e7];return _0x33d4c2;},a623_0x35a8(_0x3ab843,_0x58e172);}const a623_0x5458ce=a623_0x35a8;(function(_0x154f96,_0x4ba2fe){const _0x2c152f=a623_0x35a8,_0x44d402=_0x154f96();while(!![]){try{const _0x2d5e94=parseInt(_0x2c152f(0x127))/0x1*(-parseInt(_0x2c152f(0x12a))/0x2)+parseInt(_0x2c152f(0x11d))/0x3*(parseInt(_0x2c152f(0x12c))/0x4)+-parseInt(_0x2c152f(0x126))/0x5*(-parseInt(_0x2c152f(0x110))/0x6)+-parseInt(_0x2c152f(0x116))/0x7+parseInt(_0x2c152f(0x10b))/0x8*(-parseInt(_0x2c152f(0x114))/0x9)+-parseInt(_0x2c152f(0x125))/0xa*(parseInt(_0x2c152f(0x11e))/0xb)+parseInt(_0x2c152f(0x117))/0xc;if(_0x2d5e94===_0x4ba2fe)break;else _0x44d402['push'](_0x44d402['shift']());}catch(_0x3b0188){_0x44d402['push'](_0x44d402['shift']());}}}(a623_0x132a,0x65fb2));function a623_0x132a(){const _0x44cea3=['3pQNChh','getOwnPropertyDescriptor','update','432554jdPBFE','validate','12eHPGys','../../models/Whatsapp','__createBinding','ERR_WAPP_GREETING_REQUIRED','16qkrXnv','length','string','shape','call','12PhjXmq','defineProperty','hasOwnProperty','./ShowWhatsAppService','3478689kRNPfq','boolean','3319260SHdAaj','19879680MESnSS','message','min','__esModule','default','object','448893EKyWsc','275jhuFaD','writable','prototype','create','get','configurable','yup','77620NjJcxF','1005710MpAVPc'];a623_0x132a=function(){return _0x44cea3;};return a623_0x132a();}var __createBinding=this&&this[a623_0x5458ce(0x12e)]||(Object[a623_0x5458ce(0x121)]?function(_0x298ea5,_0x1fb4d1,_0x3c8251,_0x26115d){const _0x35609b=a623_0x5458ce;if(_0x26115d===undefined)_0x26115d=_0x3c8251;var _0x128743=Object[_0x35609b(0x128)](_0x1fb4d1,_0x3c8251);(!_0x128743||(_0x35609b(0x122)in _0x128743?!_0x1fb4d1[_0x35609b(0x11a)]:_0x128743[_0x35609b(0x11f)]||_0x128743[_0x35609b(0x123)]))&&(_0x128743={'enumerable':!![],'get':function(){return _0x1fb4d1[_0x3c8251];}}),Object[_0x35609b(0x111)](_0x298ea5,_0x26115d,_0x128743);}:function(_0x351b45,_0x36aea7,_0xe54bdc,_0x32067e){if(_0x32067e===undefined)_0x32067e=_0xe54bdc;_0x351b45[_0x32067e]=_0x36aea7[_0xe54bdc];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a623_0x5458ce(0x121)]?function(_0x2b649a,_0x4b3944){const _0x52892a=a623_0x5458ce;Object[_0x52892a(0x111)](_0x2b649a,_0x52892a(0x11b),{'enumerable':!![],'value':_0x4b3944});}:function(_0x2bca0b,_0xfc4d47){_0x2bca0b['default']=_0xfc4d47;}),__importStar=this&&this['__importStar']||function(_0x52fe46){const _0x523335=a623_0x5458ce;if(_0x52fe46&&_0x52fe46['__esModule'])return _0x52fe46;var _0x54097a={};if(_0x52fe46!=null){for(var _0x52e898 in _0x52fe46)if(_0x52e898!==_0x523335(0x11b)&&Object[_0x523335(0x120)][_0x523335(0x112)][_0x523335(0x10f)](_0x52fe46,_0x52e898))__createBinding(_0x54097a,_0x52fe46,_0x52e898);}return __setModuleDefault(_0x54097a,_0x52fe46),_0x54097a;},__importDefault=this&&this['__importDefault']||function(_0x5b5263){const _0x14ae13=a623_0x5458ce;return _0x5b5263&&_0x5b5263[_0x14ae13(0x11a)]?_0x5b5263:{'default':_0x5b5263};};Object[a623_0x5458ce(0x111)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a623_0x5458ce(0x124))),sequelize_1=require('sequelize'),AppError_1=__importDefault(require('../../errors/AppError')),Whatsapp_1=__importDefault(require(a623_0x5458ce(0x12d))),ShowWhatsAppService_1=__importDefault(require(a623_0x5458ce(0x113))),AssociateWhatsappQueue_1=__importDefault(require('./AssociateWhatsappQueue')),UpdateWhatsAppService=async({whatsappData:_0x2b3351,whatsappId:_0x60da23,companyId:_0x1d73e4})=>{const _0x29c498=a623_0x5458ce,_0x1c7301=Yup[_0x29c498(0x11c)]()[_0x29c498(0x10e)]({'name':Yup[_0x29c498(0x10d)]()[_0x29c498(0x119)](0x2),'status':Yup[_0x29c498(0x10d)](),'isDefault':Yup[_0x29c498(0x115)]()}),{name:_0x38fb9a,status:_0xe6598b,isDefault:_0x3ddc04,session:_0x4256ca,greetingMessage:_0x407bc3,complationMessage:_0x478b69,outOfHoursMessage:_0x475a69,queueIds:queueIds=[],token:_0x30fefd,maxUseBotQueues:maxUseBotQueues=0x0,timeUseBotQueues:timeUseBotQueues=0x0,expiresTicket:expiresTicket=0x0,allowGroup:_0x37f2b8,timeSendQueue:timeSendQueue=0x0,sendIdQueue:sendIdQueue=null,timeInactiveMessage:timeInactiveMessage=0x0,inactiveMessage:_0x549a78,ratingMessage:_0x27fcd1,maxUseBotQueuesNPS:_0x51493b,expiresTicketNPS:expiresTicketNPS=0x0,whenExpiresTicket:_0x3e0b05,expiresInactiveMessage:_0x32d8cd,groupAsTicket:_0x3850da,importOldMessages:_0x3d5b27,importRecentMessages:_0xe4660f,closedTicketsPostImported:_0x33623a,importOldMessagesGroups:_0x29a097,timeCreateNewTicket:timeCreateNewTicket=null,integrationId:_0x5ca9af,schedules:_0x4c5c6d,promptId:_0x4a43b5,requestQR:requestQR=![]}=_0x2b3351;try{await _0x1c7301[_0x29c498(0x12b)]({'name':_0x38fb9a,'status':_0xe6598b,'isDefault':_0x3ddc04});}catch(_0xd1ea4){throw new AppError_1[(_0x29c498(0x11b))](_0xd1ea4[_0x29c498(0x118)]);}if(queueIds[_0x29c498(0x10c)]>0x1&&!_0x407bc3)throw new AppError_1[(_0x29c498(0x11b))](_0x29c498(0x10a));let _0x3be534=null;_0x3ddc04&&(_0x3be534=await Whatsapp_1['default']['findOne']({'where':{'isDefault':!![],'id':{[sequelize_1['Op']['not']]:_0x60da23},'companyId':_0x1d73e4}}),_0x3be534&&await _0x3be534[_0x29c498(0x129)]({'isDefault':![]}));const _0x5a1472=await(0x0,ShowWhatsAppService_1[_0x29c498(0x11b)])(_0x60da23,_0x1d73e4);return await _0x5a1472[_0x29c498(0x129)]({'name':_0x38fb9a,'status':_0xe6598b,'session':_0x4256ca,'greetingMessage':_0x407bc3,'complationMessage':_0x478b69,'outOfHoursMessage':_0x475a69,'isDefault':_0x3ddc04,'companyId':_0x1d73e4,'token':_0x30fefd,'maxUseBotQueues':maxUseBotQueues||0x0,'timeUseBotQueues':timeUseBotQueues||0x0,'expiresTicket':expiresTicket||0x0,'allowGroup':_0x37f2b8,'timeSendQueue':timeSendQueue,'sendIdQueue':sendIdQueue,'timeInactiveMessage':timeInactiveMessage,'inactiveMessage':_0x549a78,'ratingMessage':_0x27fcd1,'maxUseBotQueuesNPS':_0x51493b,'expiresTicketNPS':expiresTicketNPS,'whenExpiresTicket':_0x3e0b05,'expiresInactiveMessage':_0x32d8cd,'groupAsTicket':_0x3850da,'importOldMessages':_0x3d5b27,'importRecentMessages':_0xe4660f,'closedTicketsPostImported':_0x33623a,'importOldMessagesGroups':_0x29a097,'timeCreateNewTicket':timeCreateNewTicket,'integrationId':_0x5ca9af,'schedules':_0x4c5c6d,'promptId':_0x4a43b5}),!requestQR&&await(0x0,AssociateWhatsappQueue_1[_0x29c498(0x11b)])(_0x5a1472,queueIds),{'whatsapp':_0x5a1472,'oldDefaultWhatsapp':_0x3be534};};exports[a623_0x5458ce(0x11b)]=UpdateWhatsAppService;