'use strict';const a637_0x3204ed=a637_0x5625;(function(_0x4e66d7,_0x404a50){const _0x42161c=a637_0x5625,_0x404ff6=_0x4e66d7();while(!![]){try{const _0x208485=parseInt(_0x42161c(0x19c))/0x1*(-parseInt(_0x42161c(0x198))/0x2)+-parseInt(_0x42161c(0x199))/0x3*(-parseInt(_0x42161c(0x1a3))/0x4)+-parseInt(_0x42161c(0x1a1))/0x5*(parseInt(_0x42161c(0x196))/0x6)+-parseInt(_0x42161c(0x1a0))/0x7*(-parseInt(_0x42161c(0x1a2))/0x8)+-parseInt(_0x42161c(0x18d))/0x9+parseInt(_0x42161c(0x19e))/0xa*(parseInt(_0x42161c(0x18e))/0xb)+-parseInt(_0x42161c(0x188))/0xc*(-parseInt(_0x42161c(0x191))/0xd);if(_0x208485===_0x404a50)break;else _0x404ff6['push'](_0x404ff6['shift']());}catch(_0x1e069e){_0x404ff6['push'](_0x404ff6['shift']());}}}(a637_0x4a96,0x5a822));var __createBinding=this&&this['__createBinding']||(Object[a637_0x3204ed(0x195)]?function(_0x3363dc,_0x162081,_0x144500,_0x54ee76){const _0x3e76af=a637_0x3204ed;if(_0x54ee76===undefined)_0x54ee76=_0x144500;var _0x3f506d=Object[_0x3e76af(0x1a8)](_0x162081,_0x144500);(!_0x3f506d||(_0x3e76af(0x18c)in _0x3f506d?!_0x162081[_0x3e76af(0x19a)]:_0x3f506d[_0x3e76af(0x185)]||_0x3f506d[_0x3e76af(0x1a4)]))&&(_0x3f506d={'enumerable':!![],'get':function(){return _0x162081[_0x144500];}}),Object['defineProperty'](_0x3363dc,_0x54ee76,_0x3f506d);}:function(_0x46eabd,_0x23592b,_0x41b684,_0x584d71){if(_0x584d71===undefined)_0x584d71=_0x41b684;_0x46eabd[_0x584d71]=_0x23592b[_0x41b684];}),__setModuleDefault=this&&this[a637_0x3204ed(0x193)]||(Object[a637_0x3204ed(0x195)]?function(_0x48e063,_0x1f0095){const _0x1abff3=a637_0x3204ed;Object[_0x1abff3(0x1a6)](_0x48e063,_0x1abff3(0x18b),{'enumerable':!![],'value':_0x1f0095});}:function(_0x31ff2d,_0x360cdb){const _0x354ca2=a637_0x3204ed;_0x31ff2d[_0x354ca2(0x18b)]=_0x360cdb;}),__importStar=this&&this[a637_0x3204ed(0x186)]||function(_0x30ce0d){const _0x4c8d2f=a637_0x3204ed;if(_0x30ce0d&&_0x30ce0d['__esModule'])return _0x30ce0d;var _0x3078f9={};if(_0x30ce0d!=null){for(var _0x477f51 in _0x30ce0d)if(_0x477f51!=='default'&&Object[_0x4c8d2f(0x189)][_0x4c8d2f(0x19f)]['call'](_0x30ce0d,_0x477f51))__createBinding(_0x3078f9,_0x30ce0d,_0x477f51);}return __setModuleDefault(_0x3078f9,_0x30ce0d),_0x3078f9;},__importDefault=this&&this['__importDefault']||function(_0x19f3bb){const _0x448dd5=a637_0x3204ed;return _0x19f3bb&&_0x19f3bb[_0x448dd5(0x19a)]?_0x19f3bb:{'default':_0x19f3bb};};Object[a637_0x3204ed(0x1a6)](exports,a637_0x3204ed(0x19a),{'value':!![]});function a637_0x4a96(){const _0x37b74a=['validate','default','get','3346731PqqTFv','7491ApsSPL','../../models/Whatsapp','string','13AZAGbr','shape','__setModuleDefault','update','create','48228ePfTpU','./ShowWhatsAppService','4270FGdPsn','225AukiMd','__esModule','../../errors/AppError','85Sbrkuu','boolean','2590NSwgBn','hasOwnProperty','28UMnwij','265zMSfqN','81968wSKWhh','15112BJXGOb','configurable','sequelize','defineProperty','not','getOwnPropertyDescriptor','ERR_WAPP_GREETING_REQUIRED','writable','__importStar','yup','10192284dbYohc','prototype'];a637_0x4a96=function(){return _0x37b74a;};return a637_0x4a96();}function a637_0x5625(_0x360633,_0x7d78a1){const _0x4a9673=a637_0x4a96();return a637_0x5625=function(_0x5625da,_0x57c2b4){_0x5625da=_0x5625da-0x185;let _0x2ec961=_0x4a9673[_0x5625da];return _0x2ec961;},a637_0x5625(_0x360633,_0x7d78a1);}const Yup=__importStar(require(a637_0x3204ed(0x187))),sequelize_1=require(a637_0x3204ed(0x1a5)),AppError_1=__importDefault(require(a637_0x3204ed(0x19b))),Whatsapp_1=__importDefault(require(a637_0x3204ed(0x18f))),ShowWhatsAppService_1=__importDefault(require(a637_0x3204ed(0x197))),AssociateWhatsappQueue_1=__importDefault(require('./AssociateWhatsappQueue')),UpdateWhatsAppService=async({whatsappData:_0x561be0,whatsappId:_0x4a79ae,companyId:_0x156498})=>{const _0x27ca3e=a637_0x3204ed,_0x2a8d92=Yup['object']()[_0x27ca3e(0x192)]({'name':Yup[_0x27ca3e(0x190)]()['min'](0x2),'status':Yup[_0x27ca3e(0x190)](),'isDefault':Yup[_0x27ca3e(0x19d)]()}),{name:_0x4ba7b6,status:_0x1e5ab2,isDefault:_0x37cfb4,session:_0x39c459,greetingMessage:_0xf56f98,complationMessage:_0x4b6d4a,outOfHoursMessage:_0x1a3db4,queueIds:queueIds=[],token:_0x23bc54,maxUseBotQueues:maxUseBotQueues=0x0,timeUseBotQueues:timeUseBotQueues=0x0,expiresTicket:expiresTicket=0x0,allowGroup:_0x38dc3d,timeSendQueue:timeSendQueue=0x0,sendIdQueue:sendIdQueue=null,timeInactiveMessage:timeInactiveMessage=0x0,inactiveMessage:_0x242c53,ratingMessage:_0x42bfdb,maxUseBotQueuesNPS:_0x3125d2,expiresTicketNPS:expiresTicketNPS=0x0,whenExpiresTicket:_0x36e4f1,expiresInactiveMessage:_0x506662,groupAsTicket:_0x223861,importOldMessages:_0x2241c6,importRecentMessages:_0x1655b4,closedTicketsPostImported:_0x57a9e7,importOldMessagesGroups:_0x502ac4,timeCreateNewTicket:timeCreateNewTicket=null,integrationId:_0x4e2f8e,schedules:_0xfcd22d,promptId:_0x5d8e02,requestQR:requestQR=![]}=_0x561be0;try{await _0x2a8d92[_0x27ca3e(0x18a)]({'name':_0x4ba7b6,'status':_0x1e5ab2,'isDefault':_0x37cfb4});}catch(_0x3e94e2){throw new AppError_1['default'](_0x3e94e2['message']);}if(queueIds['length']>0x1&&!_0xf56f98)throw new AppError_1[(_0x27ca3e(0x18b))](_0x27ca3e(0x1a9));let _0x1545a3=null;_0x37cfb4&&(_0x1545a3=await Whatsapp_1[_0x27ca3e(0x18b)]['findOne']({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x27ca3e(0x1a7)]]:_0x4a79ae},'companyId':_0x156498}}),_0x1545a3&&await _0x1545a3[_0x27ca3e(0x194)]({'isDefault':![]}));const _0x49e6ce=await(0x0,ShowWhatsAppService_1[_0x27ca3e(0x18b)])(_0x4a79ae,_0x156498);return await _0x49e6ce['update']({'name':_0x4ba7b6,'status':_0x1e5ab2,'session':_0x39c459,'greetingMessage':_0xf56f98,'complationMessage':_0x4b6d4a,'outOfHoursMessage':_0x1a3db4,'isDefault':_0x37cfb4,'companyId':_0x156498,'token':_0x23bc54,'maxUseBotQueues':maxUseBotQueues||0x0,'timeUseBotQueues':timeUseBotQueues||0x0,'expiresTicket':expiresTicket||0x0,'allowGroup':_0x38dc3d,'timeSendQueue':timeSendQueue,'sendIdQueue':sendIdQueue,'timeInactiveMessage':timeInactiveMessage,'inactiveMessage':_0x242c53,'ratingMessage':_0x42bfdb,'maxUseBotQueuesNPS':_0x3125d2,'expiresTicketNPS':expiresTicketNPS,'whenExpiresTicket':_0x36e4f1,'expiresInactiveMessage':_0x506662,'groupAsTicket':_0x223861,'importOldMessages':_0x2241c6,'importRecentMessages':_0x1655b4,'closedTicketsPostImported':_0x57a9e7,'importOldMessagesGroups':_0x502ac4,'timeCreateNewTicket':timeCreateNewTicket,'integrationId':_0x4e2f8e,'schedules':_0xfcd22d,'promptId':_0x5d8e02}),!requestQR&&await(0x0,AssociateWhatsappQueue_1[_0x27ca3e(0x18b)])(_0x49e6ce,queueIds),{'whatsapp':_0x49e6ce,'oldDefaultWhatsapp':_0x1545a3};};exports[a637_0x3204ed(0x18b)]=UpdateWhatsAppService;