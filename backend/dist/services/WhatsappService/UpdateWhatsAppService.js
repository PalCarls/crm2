'use strict';const a577_0x3b6825=a577_0x493b;(function(_0x3cbd06,_0x9cbb66){const _0x5d6fda=a577_0x493b,_0x3c7e78=_0x3cbd06();while(!![]){try{const _0x105f33=-parseInt(_0x5d6fda(0xd2))/0x1*(-parseInt(_0x5d6fda(0xdb))/0x2)+-parseInt(_0x5d6fda(0xd6))/0x3+parseInt(_0x5d6fda(0xea))/0x4+-parseInt(_0x5d6fda(0xe7))/0x5+-parseInt(_0x5d6fda(0xce))/0x6+parseInt(_0x5d6fda(0xe0))/0x7+-parseInt(_0x5d6fda(0xd9))/0x8*(-parseInt(_0x5d6fda(0xcf))/0x9);if(_0x105f33===_0x9cbb66)break;else _0x3c7e78['push'](_0x3c7e78['shift']());}catch(_0x5ca72f){_0x3c7e78['push'](_0x3c7e78['shift']());}}}(a577_0x63fb,0xa4d01));function a577_0x493b(_0x4fb53f,_0x4afc7b){const _0x63fbfb=a577_0x63fb();return a577_0x493b=function(_0x493bb5,_0x4ed438){_0x493bb5=_0x493bb5-0xcc;let _0x248a61=_0x63fbfb[_0x493bb5];return _0x248a61;},a577_0x493b(_0x4fb53f,_0x4afc7b);}function a577_0x63fb(){const _0x1502b2=['object','__esModule','16mSGvMz','__setModuleDefault','498grExIM','min','length','defineProperty','../../errors/AppError','329147CCtjuR','shape','ERR_WAPP_GREETING_REQUIRED','__importStar','update','findOne','__createBinding','955410iabpSd','hasOwnProperty','default','1919584bperQX','writable','string','configurable','2067576eZiqDB','6862851fRfTEw','./AssociateWhatsappQueue','./ShowWhatsAppService','631MBogen','getOwnPropertyDescriptor','create','__importDefault','2995089CTFzyZ'];a577_0x63fb=function(){return _0x1502b2;};return a577_0x63fb();}var __createBinding=this&&this[a577_0x3b6825(0xe6)]||(Object[a577_0x3b6825(0xd4)]?function(_0x486446,_0x288dd5,_0x1a99b9,_0x5eeec7){const _0x5973ff=a577_0x3b6825;if(_0x5eeec7===undefined)_0x5eeec7=_0x1a99b9;var _0x2ba811=Object[_0x5973ff(0xd3)](_0x288dd5,_0x1a99b9);(!_0x2ba811||('get'in _0x2ba811?!_0x288dd5[_0x5973ff(0xd8)]:_0x2ba811[_0x5973ff(0xeb)]||_0x2ba811[_0x5973ff(0xcd)]))&&(_0x2ba811={'enumerable':!![],'get':function(){return _0x288dd5[_0x1a99b9];}}),Object['defineProperty'](_0x486446,_0x5eeec7,_0x2ba811);}:function(_0x419a78,_0xf813c3,_0x61b672,_0x1f82fe){if(_0x1f82fe===undefined)_0x1f82fe=_0x61b672;_0x419a78[_0x1f82fe]=_0xf813c3[_0x61b672];}),__setModuleDefault=this&&this[a577_0x3b6825(0xda)]||(Object['create']?function(_0x49b3f9,_0xadbb3a){const _0x1e7538=a577_0x3b6825;Object[_0x1e7538(0xde)](_0x49b3f9,'default',{'enumerable':!![],'value':_0xadbb3a});}:function(_0x36240e,_0x4d8796){_0x36240e['default']=_0x4d8796;}),__importStar=this&&this[a577_0x3b6825(0xe3)]||function(_0x41f6e9){const _0x221516=a577_0x3b6825;if(_0x41f6e9&&_0x41f6e9[_0x221516(0xd8)])return _0x41f6e9;var _0x359869={};if(_0x41f6e9!=null){for(var _0x372e50 in _0x41f6e9)if(_0x372e50!=='default'&&Object['prototype'][_0x221516(0xe8)]['call'](_0x41f6e9,_0x372e50))__createBinding(_0x359869,_0x41f6e9,_0x372e50);}return __setModuleDefault(_0x359869,_0x41f6e9),_0x359869;},__importDefault=this&&this[a577_0x3b6825(0xd5)]||function(_0x4c2420){return _0x4c2420&&_0x4c2420['__esModule']?_0x4c2420:{'default':_0x4c2420};};Object[a577_0x3b6825(0xde)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require('yup')),sequelize_1=require('sequelize'),AppError_1=__importDefault(require(a577_0x3b6825(0xdf))),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),ShowWhatsAppService_1=__importDefault(require(a577_0x3b6825(0xd1))),AssociateWhatsappQueue_1=__importDefault(require(a577_0x3b6825(0xd0))),UpdateWhatsAppService=async({whatsappData:_0x5cc401,whatsappId:_0x488c9d,companyId:_0x36676f})=>{const _0x2da6eb=a577_0x3b6825,_0xe8356f=Yup[_0x2da6eb(0xd7)]()[_0x2da6eb(0xe1)]({'name':Yup[_0x2da6eb(0xcc)]()[_0x2da6eb(0xdc)](0x2),'status':Yup[_0x2da6eb(0xcc)](),'isDefault':Yup['boolean']()}),{name:_0x2589cc,status:_0x55c35f,isDefault:_0x516d9e,session:_0x36de50,greetingMessage:_0x12f0dc,complationMessage:_0xabb225,outOfHoursMessage:_0x3e82af,queueIds:queueIds=[],token:_0x46f53b,maxUseBotQueues:maxUseBotQueues=0x0,timeUseBotQueues:timeUseBotQueues=0x0,expiresTicket:expiresTicket=0x0,allowGroup:_0x221393,timeSendQueue:timeSendQueue=0x0,sendIdQueue:sendIdQueue=null,timeInactiveMessage:timeInactiveMessage=0x0,inactiveMessage:_0x319c09,ratingMessage:_0x325bf2,maxUseBotQueuesNPS:_0x4e2f48,expiresTicketNPS:expiresTicketNPS=0x0,whenExpiresTicket:_0xfc5870,expiresInactiveMessage:_0x13a47e,groupAsTicket:_0x32628f,importOldMessages:_0x3c3f54,importRecentMessages:_0x4c7720,closedTicketsPostImported:_0x3c15cc,importOldMessagesGroups:_0x35564a,timeCreateNewTicket:timeCreateNewTicket=null}=_0x5cc401;try{await _0xe8356f['validate']({'name':_0x2589cc,'status':_0x55c35f,'isDefault':_0x516d9e});}catch(_0x4a18d5){throw new AppError_1[(_0x2da6eb(0xe9))](_0x4a18d5['message']);}if(queueIds[_0x2da6eb(0xdd)]>0x1&&!_0x12f0dc)throw new AppError_1[(_0x2da6eb(0xe9))](_0x2da6eb(0xe2));let _0x361bf6=null;_0x516d9e&&(_0x361bf6=await Whatsapp_1[_0x2da6eb(0xe9)][_0x2da6eb(0xe5)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op']['not']]:_0x488c9d},'companyId':_0x36676f}}),_0x361bf6&&await _0x361bf6['update']({'isDefault':![]}));const _0x498dcf=await(0x0,ShowWhatsAppService_1[_0x2da6eb(0xe9)])(_0x488c9d,_0x36676f);return await _0x498dcf[_0x2da6eb(0xe4)]({'name':_0x2589cc,'status':_0x55c35f,'session':_0x36de50,'greetingMessage':_0x12f0dc,'complationMessage':_0xabb225,'outOfHoursMessage':_0x3e82af,'isDefault':_0x516d9e,'companyId':_0x36676f,'token':_0x46f53b,'maxUseBotQueues':maxUseBotQueues||0x0,'timeUseBotQueues':timeUseBotQueues||0x0,'expiresTicket':expiresTicket||0x0,'allowGroup':_0x221393,'timeSendQueue':timeSendQueue,'sendIdQueue':sendIdQueue,'timeInactiveMessage':timeInactiveMessage,'inactiveMessage':_0x319c09,'ratingMessage':_0x325bf2,'maxUseBotQueuesNPS':_0x4e2f48,'expiresTicketNPS':expiresTicketNPS,'whenExpiresTicket':_0xfc5870,'expiresInactiveMessage':_0x13a47e,'groupAsTicket':_0x32628f,'importOldMessages':_0x3c3f54,'importRecentMessages':_0x4c7720,'closedTicketsPostImported':_0x3c15cc,'importOldMessagesGroups':_0x35564a,'timeCreateNewTicket':timeCreateNewTicket}),await(0x0,AssociateWhatsappQueue_1['default'])(_0x498dcf,queueIds),{'whatsapp':_0x498dcf,'oldDefaultWhatsapp':_0x361bf6};};exports[a577_0x3b6825(0xe9)]=UpdateWhatsAppService;