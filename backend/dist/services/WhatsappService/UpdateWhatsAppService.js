'use strict';function a577_0x5e02(_0x21438b,_0x3a90ee){const _0x515823=a577_0x5158();return a577_0x5e02=function(_0x5e02de,_0x4f56f7){_0x5e02de=_0x5e02de-0x10c;let _0x330cb3=_0x515823[_0x5e02de];return _0x330cb3;},a577_0x5e02(_0x21438b,_0x3a90ee);}const a577_0xc49c4f=a577_0x5e02;(function(_0x528f24,_0x1bf2ac){const _0x196b4f=a577_0x5e02,_0x3f41fa=_0x528f24();while(!![]){try{const _0x1b7513=parseInt(_0x196b4f(0x10e))/0x1+-parseInt(_0x196b4f(0x125))/0x2+-parseInt(_0x196b4f(0x115))/0x3+parseInt(_0x196b4f(0x112))/0x4+-parseInt(_0x196b4f(0x110))/0x5*(parseInt(_0x196b4f(0x123))/0x6)+parseInt(_0x196b4f(0x116))/0x7*(-parseInt(_0x196b4f(0x111))/0x8)+parseInt(_0x196b4f(0x126))/0x9;if(_0x1b7513===_0x1bf2ac)break;else _0x3f41fa['push'](_0x3f41fa['shift']());}catch(_0x5a09e4){_0x3f41fa['push'](_0x3f41fa['shift']());}}}(a577_0x5158,0xedad3));function a577_0x5158(){const _0x3515f1=['98706oqdRhe','ERR_WAPP_GREETING_REQUIRED','923178csTURF','12823434AgQGlb','__setModuleDefault','hasOwnProperty','update','getOwnPropertyDescriptor','yup','min','create','call','object','validate','writable','1630732ONWaUe','get','25PHIirD','14839576MQMEmN','3960800gtLIjy','boolean','__importDefault','2020332ZUnqJP','7MUvRkY','defineProperty','not','findOne','configurable','length','string','__esModule','../../models/Whatsapp','default','prototype','./AssociateWhatsappQueue','__createBinding'];a577_0x5158=function(){return _0x3515f1;};return a577_0x5158();}var __createBinding=this&&this[a577_0xc49c4f(0x122)]||(Object[a577_0xc49c4f(0x12d)]?function(_0x5e168c,_0x2f1049,_0x3f4709,_0x326a27){const _0x3f5185=a577_0xc49c4f;if(_0x326a27===undefined)_0x326a27=_0x3f4709;var _0x48ab4a=Object[_0x3f5185(0x12a)](_0x2f1049,_0x3f4709);(!_0x48ab4a||(_0x3f5185(0x10f)in _0x48ab4a?!_0x2f1049[_0x3f5185(0x11d)]:_0x48ab4a[_0x3f5185(0x10d)]||_0x48ab4a[_0x3f5185(0x11a)]))&&(_0x48ab4a={'enumerable':!![],'get':function(){return _0x2f1049[_0x3f4709];}}),Object[_0x3f5185(0x117)](_0x5e168c,_0x326a27,_0x48ab4a);}:function(_0x23b50f,_0xca2470,_0x3fc404,_0x4dabdf){if(_0x4dabdf===undefined)_0x4dabdf=_0x3fc404;_0x23b50f[_0x4dabdf]=_0xca2470[_0x3fc404];}),__setModuleDefault=this&&this[a577_0xc49c4f(0x127)]||(Object[a577_0xc49c4f(0x12d)]?function(_0x112d8f,_0x4b4c53){const _0x3fb289=a577_0xc49c4f;Object[_0x3fb289(0x117)](_0x112d8f,_0x3fb289(0x11f),{'enumerable':!![],'value':_0x4b4c53});}:function(_0x37231a,_0x4afe1b){const _0x1ce298=a577_0xc49c4f;_0x37231a[_0x1ce298(0x11f)]=_0x4afe1b;}),__importStar=this&&this['__importStar']||function(_0x37904a){const _0x49933f=a577_0xc49c4f;if(_0x37904a&&_0x37904a[_0x49933f(0x11d)])return _0x37904a;var _0x418dee={};if(_0x37904a!=null){for(var _0x36941a in _0x37904a)if(_0x36941a!==_0x49933f(0x11f)&&Object[_0x49933f(0x120)][_0x49933f(0x128)][_0x49933f(0x12e)](_0x37904a,_0x36941a))__createBinding(_0x418dee,_0x37904a,_0x36941a);}return __setModuleDefault(_0x418dee,_0x37904a),_0x418dee;},__importDefault=this&&this[a577_0xc49c4f(0x114)]||function(_0x2bbae0){const _0x5b3469=a577_0xc49c4f;return _0x2bbae0&&_0x2bbae0[_0x5b3469(0x11d)]?_0x2bbae0:{'default':_0x2bbae0};};Object[a577_0xc49c4f(0x117)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a577_0xc49c4f(0x12b))),sequelize_1=require('sequelize'),AppError_1=__importDefault(require('../../errors/AppError')),Whatsapp_1=__importDefault(require(a577_0xc49c4f(0x11e))),ShowWhatsAppService_1=__importDefault(require('./ShowWhatsAppService')),AssociateWhatsappQueue_1=__importDefault(require(a577_0xc49c4f(0x121))),UpdateWhatsAppService=async({whatsappData:_0x44d71d,whatsappId:_0x3d677f,companyId:_0x2f7d0d})=>{const _0x471810=a577_0xc49c4f,_0x380a18=Yup[_0x471810(0x12f)]()['shape']({'name':Yup[_0x471810(0x11c)]()[_0x471810(0x12c)](0x2),'status':Yup[_0x471810(0x11c)](),'isDefault':Yup[_0x471810(0x113)]()}),{name:_0x38e23b,status:_0xe8a4c8,isDefault:_0x50c505,session:_0x49c068,greetingMessage:_0x574c3d,complationMessage:_0x290840,outOfHoursMessage:_0x1f6b39,queueIds:queueIds=[],token:_0x5bf1b5,maxUseBotQueues:maxUseBotQueues=0x0,timeUseBotQueues:timeUseBotQueues=0x0,expiresTicket:expiresTicket=0x0,allowGroup:_0x289b91,timeSendQueue:timeSendQueue=0x0,sendIdQueue:sendIdQueue=null,timeInactiveMessage:timeInactiveMessage=0x0,inactiveMessage:_0x44879e,ratingMessage:_0x2cfb91,maxUseBotQueuesNPS:_0x4c0385,expiresTicketNPS:expiresTicketNPS=0x0,whenExpiresTicket:_0x296f53,expiresInactiveMessage:_0x2ea2cc,groupAsTicket:_0x4f8213,importOldMessages:_0xbd980f,importRecentMessages:_0x1265a5,closedTicketsPostImported:_0x22ec45,importOldMessagesGroups:_0x268361,timeCreateNewTicket:timeCreateNewTicket=null}=_0x44d71d;try{await _0x380a18[_0x471810(0x10c)]({'name':_0x38e23b,'status':_0xe8a4c8,'isDefault':_0x50c505});}catch(_0xad2c22){throw new AppError_1['default'](_0xad2c22['message']);}if(queueIds[_0x471810(0x11b)]>0x1&&!_0x574c3d)throw new AppError_1[(_0x471810(0x11f))](_0x471810(0x124));let _0x55dfdd=null;_0x50c505&&(_0x55dfdd=await Whatsapp_1[_0x471810(0x11f)][_0x471810(0x119)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x471810(0x118)]]:_0x3d677f},'companyId':_0x2f7d0d}}),_0x55dfdd&&await _0x55dfdd[_0x471810(0x129)]({'isDefault':![]}));const _0x47073b=await(0x0,ShowWhatsAppService_1['default'])(_0x3d677f,_0x2f7d0d);return await _0x47073b[_0x471810(0x129)]({'name':_0x38e23b,'status':_0xe8a4c8,'session':_0x49c068,'greetingMessage':_0x574c3d,'complationMessage':_0x290840,'outOfHoursMessage':_0x1f6b39,'isDefault':_0x50c505,'companyId':_0x2f7d0d,'token':_0x5bf1b5,'maxUseBotQueues':maxUseBotQueues||0x0,'timeUseBotQueues':timeUseBotQueues||0x0,'expiresTicket':expiresTicket||0x0,'allowGroup':_0x289b91,'timeSendQueue':timeSendQueue,'sendIdQueue':sendIdQueue,'timeInactiveMessage':timeInactiveMessage,'inactiveMessage':_0x44879e,'ratingMessage':_0x2cfb91,'maxUseBotQueuesNPS':_0x4c0385,'expiresTicketNPS':expiresTicketNPS,'whenExpiresTicket':_0x296f53,'expiresInactiveMessage':_0x2ea2cc,'groupAsTicket':_0x4f8213,'importOldMessages':_0xbd980f,'importRecentMessages':_0x1265a5,'closedTicketsPostImported':_0x22ec45,'importOldMessagesGroups':_0x268361,'timeCreateNewTicket':timeCreateNewTicket}),await(0x0,AssociateWhatsappQueue_1[_0x471810(0x11f)])(_0x47073b,queueIds),{'whatsapp':_0x47073b,'oldDefaultWhatsapp':_0x55dfdd};};exports['default']=UpdateWhatsAppService;