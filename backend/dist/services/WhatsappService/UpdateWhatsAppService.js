'use strict';const a560_0x1c9ee3=a560_0x133b;(function(_0x4bdd54,_0x86f20e){const _0x207fae=a560_0x133b,_0x436376=_0x4bdd54();while(!![]){try{const _0x3c93a7=-parseInt(_0x207fae(0x1b2))/0x1+-parseInt(_0x207fae(0x1b4))/0x2+-parseInt(_0x207fae(0x19f))/0x3*(-parseInt(_0x207fae(0x1b5))/0x4)+parseInt(_0x207fae(0x1a2))/0x5*(parseInt(_0x207fae(0x1ae))/0x6)+parseInt(_0x207fae(0x1a7))/0x7*(parseInt(_0x207fae(0x194))/0x8)+parseInt(_0x207fae(0x198))/0x9*(-parseInt(_0x207fae(0x1b0))/0xa)+parseInt(_0x207fae(0x1ab))/0xb;if(_0x3c93a7===_0x86f20e)break;else _0x436376['push'](_0x436376['shift']());}catch(_0xc23d13){_0x436376['push'](_0x436376['shift']());}}}(a560_0x7e85,0x80056));var __createBinding=this&&this[a560_0x1c9ee3(0x199)]||(Object[a560_0x1c9ee3(0x1a8)]?function(_0x47fd1e,_0xed4932,_0x3db906,_0x3588d6){const _0x5ca9b8=a560_0x1c9ee3;if(_0x3588d6===undefined)_0x3588d6=_0x3db906;var _0x453d56=Object[_0x5ca9b8(0x1a0)](_0xed4932,_0x3db906);(!_0x453d56||('get'in _0x453d56?!_0xed4932['__esModule']:_0x453d56[_0x5ca9b8(0x19e)]||_0x453d56[_0x5ca9b8(0x1a6)]))&&(_0x453d56={'enumerable':!![],'get':function(){return _0xed4932[_0x3db906];}}),Object[_0x5ca9b8(0x1a4)](_0x47fd1e,_0x3588d6,_0x453d56);}:function(_0x18de61,_0x52f35a,_0x34b0ed,_0x5e0101){if(_0x5e0101===undefined)_0x5e0101=_0x34b0ed;_0x18de61[_0x5e0101]=_0x52f35a[_0x34b0ed];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a560_0x1c9ee3(0x1a8)]?function(_0x1e659c,_0x18fd11){const _0x1db9f1=a560_0x1c9ee3;Object[_0x1db9f1(0x1a4)](_0x1e659c,_0x1db9f1(0x19a),{'enumerable':!![],'value':_0x18fd11});}:function(_0xf7be07,_0x1dac38){_0xf7be07['default']=_0x1dac38;}),__importStar=this&&this[a560_0x1c9ee3(0x19b)]||function(_0xa0d7d4){const _0x17402c=a560_0x1c9ee3;if(_0xa0d7d4&&_0xa0d7d4['__esModule'])return _0xa0d7d4;var _0x210e1c={};if(_0xa0d7d4!=null){for(var _0x408eaa in _0xa0d7d4)if(_0x408eaa!==_0x17402c(0x19a)&&Object['prototype'][_0x17402c(0x1ac)]['call'](_0xa0d7d4,_0x408eaa))__createBinding(_0x210e1c,_0xa0d7d4,_0x408eaa);}return __setModuleDefault(_0x210e1c,_0xa0d7d4),_0x210e1c;},__importDefault=this&&this[a560_0x1c9ee3(0x1a9)]||function(_0x114c8b){const _0x4332f4=a560_0x1c9ee3;return _0x114c8b&&_0x114c8b[_0x4332f4(0x1af)]?_0x114c8b:{'default':_0x114c8b};};function a560_0x7e85(){const _0xa4bfed=['__importStar','../../models/Whatsapp','sequelize','writable','807ssbtrI','getOwnPropertyDescriptor','validate','5tYIeQJ','yup','defineProperty','boolean','configurable','70840Zbuelp','create','__importDefault','shape','12756645lIEImI','hasOwnProperty','ERR_WAPP_GREETING_REQUIRED','550446sVqphu','__esModule','8908810Kbydez','string','39564IQpEMk','not','2080432jZkxij','6604rgtmPW','./ShowWhatsAppService','632mSXmdR','findOne','object','update','9uFqTAZ','__createBinding','default'];a560_0x7e85=function(){return _0xa4bfed;};return a560_0x7e85();}function a560_0x133b(_0x12c57a,_0x5379de){const _0x7e8524=a560_0x7e85();return a560_0x133b=function(_0x133bc1,_0x9a5b19){_0x133bc1=_0x133bc1-0x193;let _0x5c7be3=_0x7e8524[_0x133bc1];return _0x5c7be3;},a560_0x133b(_0x12c57a,_0x5379de);}Object['defineProperty'](exports,a560_0x1c9ee3(0x1af),{'value':!![]});const Yup=__importStar(require(a560_0x1c9ee3(0x1a3))),sequelize_1=require(a560_0x1c9ee3(0x19d)),AppError_1=__importDefault(require('../../errors/AppError')),Whatsapp_1=__importDefault(require(a560_0x1c9ee3(0x19c))),ShowWhatsAppService_1=__importDefault(require(a560_0x1c9ee3(0x193))),AssociateWhatsappQueue_1=__importDefault(require('./AssociateWhatsappQueue')),UpdateWhatsAppService=async({whatsappData:_0x233315,whatsappId:_0x142a29,companyId:_0x1765e7})=>{const _0x27f153=a560_0x1c9ee3,_0x25d1fb=Yup[_0x27f153(0x196)]()[_0x27f153(0x1aa)]({'name':Yup['string']()['min'](0x2),'status':Yup[_0x27f153(0x1b1)](),'isDefault':Yup[_0x27f153(0x1a5)]()}),{name:_0x144c88,status:_0xa71d1b,isDefault:_0xb1a090,session:_0xe20842,greetingMessage:_0x28ca32,complationMessage:_0x284c20,outOfHoursMessage:_0x1de153,queueIds:queueIds=[],token:_0x4acc85,maxUseBotQueues:_0x4cc435,timeUseBotQueues:_0x2c5497,expiresTicket:_0x5f5283,allowGroup:_0x4801eb,timeSendQueue:_0x452c95,sendIdQueue:_0x25eef3,timeInactiveMessage:_0x37689c,inactiveMessage:_0xd72cb,ratingMessage:_0x1d58e7,maxUseBotQueuesNPS:_0xf6ecc4,expiresTicketNPS:_0x1d0995,whenExpiresTicket:_0x801e9a,expiresInactiveMessage:_0x5b02e9,groupAsTicket:_0x32e12e,importOldMessages:_0x187bf6,importRecentMessages:_0x14e47e,closedTicketsPostImported:_0x24090e,importOldMessagesGroups:_0x28b616,timeCreateNewTicket:_0xe8231b}=_0x233315;try{await _0x25d1fb[_0x27f153(0x1a1)]({'name':_0x144c88,'status':_0xa71d1b,'isDefault':_0xb1a090});}catch(_0x14def6){throw new AppError_1[(_0x27f153(0x19a))](_0x14def6['message']);}if(queueIds['length']>0x1&&!_0x28ca32)throw new AppError_1[(_0x27f153(0x19a))](_0x27f153(0x1ad));let _0x418618=null;_0xb1a090&&(_0x418618=await Whatsapp_1[_0x27f153(0x19a)][_0x27f153(0x195)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x27f153(0x1b3)]]:_0x142a29},'companyId':_0x1765e7}}),_0x418618&&await _0x418618[_0x27f153(0x197)]({'isDefault':![]}));const _0x1cc52d=await(0x0,ShowWhatsAppService_1[_0x27f153(0x19a)])(_0x142a29,_0x1765e7);return await _0x1cc52d[_0x27f153(0x197)]({'name':_0x144c88,'status':_0xa71d1b,'session':_0xe20842,'greetingMessage':_0x28ca32,'complationMessage':_0x284c20,'outOfHoursMessage':_0x1de153,'isDefault':_0xb1a090,'companyId':_0x1765e7,'token':_0x4acc85,'maxUseBotQueues':_0x4cc435,'timeUseBotQueues':_0x2c5497,'expiresTicket':_0x5f5283,'allowGroup':_0x4801eb,'timeSendQueue':_0x452c95,'sendIdQueue':_0x25eef3,'timeInactiveMessage':_0x37689c,'inactiveMessage':_0xd72cb,'ratingMessage':_0x1d58e7,'maxUseBotQueuesNPS':_0xf6ecc4,'expiresTicketNPS':_0x1d0995,'whenExpiresTicket':_0x801e9a,'expiresInactiveMessage':_0x5b02e9,'groupAsTicket':_0x32e12e,'importOldMessages':_0x187bf6,'importRecentMessages':_0x14e47e,'closedTicketsPostImported':_0x24090e,'importOldMessagesGroups':_0x28b616,'timeCreateNewTicket':_0xe8231b}),await(0x0,AssociateWhatsappQueue_1[_0x27f153(0x19a)])(_0x1cc52d,queueIds),{'whatsapp':_0x1cc52d,'oldDefaultWhatsapp':_0x418618};};exports[a560_0x1c9ee3(0x19a)]=UpdateWhatsAppService;