'use strict';function a560_0x59a8(_0xa9e866,_0x277c1b){const _0x3496f5=a560_0x3496();return a560_0x59a8=function(_0x59a852,_0x198623){_0x59a852=_0x59a852-0x188;let _0x322ef9=_0x3496f5[_0x59a852];return _0x322ef9;},a560_0x59a8(_0xa9e866,_0x277c1b);}const a560_0x3afe4b=a560_0x59a8;(function(_0x3de5cf,_0x3a9606){const _0x489487=a560_0x59a8,_0x49971c=_0x3de5cf();while(!![]){try{const _0x52b2ba=-parseInt(_0x489487(0x1ab))/0x1*(parseInt(_0x489487(0x18f))/0x2)+-parseInt(_0x489487(0x1a2))/0x3+parseInt(_0x489487(0x19c))/0x4*(parseInt(_0x489487(0x192))/0x5)+-parseInt(_0x489487(0x198))/0x6*(-parseInt(_0x489487(0x1a4))/0x7)+-parseInt(_0x489487(0x1ae))/0x8*(-parseInt(_0x489487(0x1a6))/0x9)+-parseInt(_0x489487(0x199))/0xa*(-parseInt(_0x489487(0x195))/0xb)+parseInt(_0x489487(0x1ad))/0xc;if(_0x52b2ba===_0x3a9606)break;else _0x49971c['push'](_0x49971c['shift']());}catch(_0x1026ff){_0x49971c['push'](_0x49971c['shift']());}}}(a560_0x3496,0x3accb));function a560_0x3496(){const _0x19488f=['11njMzlx','__setModuleDefault','./AssociateWhatsappQueue','6LzHnsA','4711160AsawtC','writable','__importStar','4Zfcafa','sequelize','defineProperty','../../models/Whatsapp','get','update','1139274tGpbMv','hasOwnProperty','607999OXgePQ','__createBinding','27DvnzYA','min','length','create','boolean','324245mmymbF','findOne','2686860geklTT','12520dFXcUI','string','getOwnPropertyDescriptor','validate','ERR_WAPP_GREETING_REQUIRED','__esModule','message','prototype','2GcdgmQ','object','./ShowWhatsAppService','791365WbuQoJ','default','shape'];a560_0x3496=function(){return _0x19488f;};return a560_0x3496();}var __createBinding=this&&this[a560_0x3afe4b(0x1a5)]||(Object[a560_0x3afe4b(0x1a9)]?function(_0x472c50,_0x52daab,_0xbaccbf,_0x17d261){const _0x388697=a560_0x3afe4b;if(_0x17d261===undefined)_0x17d261=_0xbaccbf;var _0x4348db=Object[_0x388697(0x189)](_0x52daab,_0xbaccbf);(!_0x4348db||(_0x388697(0x1a0)in _0x4348db?!_0x52daab[_0x388697(0x18c)]:_0x4348db[_0x388697(0x19a)]||_0x4348db['configurable']))&&(_0x4348db={'enumerable':!![],'get':function(){return _0x52daab[_0xbaccbf];}}),Object[_0x388697(0x19e)](_0x472c50,_0x17d261,_0x4348db);}:function(_0x587a47,_0x57fd2e,_0x30f714,_0x59b263){if(_0x59b263===undefined)_0x59b263=_0x30f714;_0x587a47[_0x59b263]=_0x57fd2e[_0x30f714];}),__setModuleDefault=this&&this[a560_0x3afe4b(0x196)]||(Object[a560_0x3afe4b(0x1a9)]?function(_0x5f28cb,_0x16480d){Object['defineProperty'](_0x5f28cb,'default',{'enumerable':!![],'value':_0x16480d});}:function(_0x16af85,_0xd791f8){_0x16af85['default']=_0xd791f8;}),__importStar=this&&this[a560_0x3afe4b(0x19b)]||function(_0x3c8c23){const _0x4487ba=a560_0x3afe4b;if(_0x3c8c23&&_0x3c8c23[_0x4487ba(0x18c)])return _0x3c8c23;var _0x3b9b4d={};if(_0x3c8c23!=null){for(var _0x200f88 in _0x3c8c23)if(_0x200f88!==_0x4487ba(0x193)&&Object[_0x4487ba(0x18e)][_0x4487ba(0x1a3)]['call'](_0x3c8c23,_0x200f88))__createBinding(_0x3b9b4d,_0x3c8c23,_0x200f88);}return __setModuleDefault(_0x3b9b4d,_0x3c8c23),_0x3b9b4d;},__importDefault=this&&this['__importDefault']||function(_0x39c951){const _0x5cb811=a560_0x3afe4b;return _0x39c951&&_0x39c951[_0x5cb811(0x18c)]?_0x39c951:{'default':_0x39c951};};Object['defineProperty'](exports,a560_0x3afe4b(0x18c),{'value':!![]});const Yup=__importStar(require('yup')),sequelize_1=require(a560_0x3afe4b(0x19d)),AppError_1=__importDefault(require('../../errors/AppError')),Whatsapp_1=__importDefault(require(a560_0x3afe4b(0x19f))),ShowWhatsAppService_1=__importDefault(require(a560_0x3afe4b(0x191))),AssociateWhatsappQueue_1=__importDefault(require(a560_0x3afe4b(0x197))),UpdateWhatsAppService=async({whatsappData:_0x1e62d8,whatsappId:_0xc627e9,companyId:_0x5e6797})=>{const _0x31ab9d=a560_0x3afe4b,_0x520ef4=Yup[_0x31ab9d(0x190)]()[_0x31ab9d(0x194)]({'name':Yup[_0x31ab9d(0x188)]()[_0x31ab9d(0x1a7)](0x2),'status':Yup[_0x31ab9d(0x188)](),'isDefault':Yup[_0x31ab9d(0x1aa)]()}),{name:_0x175600,status:_0x2642e4,isDefault:_0x24203a,session:_0x5cb070,greetingMessage:_0x13caf4,complationMessage:_0x5908d9,outOfHoursMessage:_0x572e31,queueIds:queueIds=[],token:_0x1e09a4,maxUseBotQueues:_0x40dd40,timeUseBotQueues:_0x1ddcf7,expiresTicket:_0x1c75a2,allowGroup:_0x3715a6,timeSendQueue:_0x19795b,sendIdQueue:_0x17bd45,timeInactiveMessage:_0x3ff1a7,inactiveMessage:_0x29e31e,ratingMessage:_0x1b3656,maxUseBotQueuesNPS:_0x186cd2,expiresTicketNPS:_0xc2cb08,whenExpiresTicket:_0x1094f2,expiresInactiveMessage:_0x594891,groupAsTicket:_0x2358c0,importOldMessages:_0x134f55,importRecentMessages:_0x555bb1,closedTicketsPostImported:_0x1f9c86,importOldMessagesGroups:_0x5b96ea,timeCreateNewTicket:_0x35d0ea}=_0x1e62d8;try{await _0x520ef4[_0x31ab9d(0x18a)]({'name':_0x175600,'status':_0x2642e4,'isDefault':_0x24203a});}catch(_0xa4877){throw new AppError_1[(_0x31ab9d(0x193))](_0xa4877[_0x31ab9d(0x18d)]);}if(queueIds[_0x31ab9d(0x1a8)]>0x1&&!_0x13caf4)throw new AppError_1['default'](_0x31ab9d(0x18b));let _0x1fc0de=null;_0x24203a&&(_0x1fc0de=await Whatsapp_1[_0x31ab9d(0x193)][_0x31ab9d(0x1ac)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op']['not']]:_0xc627e9},'companyId':_0x5e6797}}),_0x1fc0de&&await _0x1fc0de[_0x31ab9d(0x1a1)]({'isDefault':![]}));const _0x31a935=await(0x0,ShowWhatsAppService_1[_0x31ab9d(0x193)])(_0xc627e9,_0x5e6797);return await _0x31a935['update']({'name':_0x175600,'status':_0x2642e4,'session':_0x5cb070,'greetingMessage':_0x13caf4,'complationMessage':_0x5908d9,'outOfHoursMessage':_0x572e31,'isDefault':_0x24203a,'companyId':_0x5e6797,'token':_0x1e09a4,'maxUseBotQueues':_0x40dd40,'timeUseBotQueues':_0x1ddcf7,'expiresTicket':_0x1c75a2,'allowGroup':_0x3715a6,'timeSendQueue':_0x19795b,'sendIdQueue':_0x17bd45,'timeInactiveMessage':_0x3ff1a7,'inactiveMessage':_0x29e31e,'ratingMessage':_0x1b3656,'maxUseBotQueuesNPS':_0x186cd2,'expiresTicketNPS':_0xc2cb08,'whenExpiresTicket':_0x1094f2,'expiresInactiveMessage':_0x594891,'groupAsTicket':_0x2358c0,'importOldMessages':_0x134f55,'importRecentMessages':_0x555bb1,'closedTicketsPostImported':_0x1f9c86,'importOldMessagesGroups':_0x5b96ea,'timeCreateNewTicket':_0x35d0ea}),await(0x0,AssociateWhatsappQueue_1[_0x31ab9d(0x193)])(_0x31a935,queueIds),{'whatsapp':_0x31a935,'oldDefaultWhatsapp':_0x1fc0de};};exports[a560_0x3afe4b(0x193)]=UpdateWhatsAppService;