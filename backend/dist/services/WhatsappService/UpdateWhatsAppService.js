'use strict';const a582_0x1d5202=a582_0x59d1;function a582_0x59d1(_0x46c52c,_0x3558e4){const _0x547914=a582_0x5479();return a582_0x59d1=function(_0x59d1bf,_0x439af9){_0x59d1bf=_0x59d1bf-0x14a;let _0x35a9dd=_0x547914[_0x59d1bf];return _0x35a9dd;},a582_0x59d1(_0x46c52c,_0x3558e4);}(function(_0x22c359,_0x81f9f3){const _0xdd945d=a582_0x59d1,_0x5d73f4=_0x22c359();while(!![]){try{const _0xa73e65=parseInt(_0xdd945d(0x157))/0x1*(-parseInt(_0xdd945d(0x14c))/0x2)+parseInt(_0xdd945d(0x14e))/0x3*(parseInt(_0xdd945d(0x160))/0x4)+-parseInt(_0xdd945d(0x15a))/0x5+-parseInt(_0xdd945d(0x167))/0x6*(parseInt(_0xdd945d(0x150))/0x7)+-parseInt(_0xdd945d(0x152))/0x8*(parseInt(_0xdd945d(0x15b))/0x9)+-parseInt(_0xdd945d(0x171))/0xa*(-parseInt(_0xdd945d(0x14d))/0xb)+-parseInt(_0xdd945d(0x168))/0xc*(-parseInt(_0xdd945d(0x153))/0xd);if(_0xa73e65===_0x81f9f3)break;else _0x5d73f4['push'](_0x5d73f4['shift']());}catch(_0x325a69){_0x5d73f4['push'](_0x5d73f4['shift']());}}}(a582_0x5479,0xb708f));function a582_0x5479(){const _0x391df4=['../../models/Whatsapp','min','./ShowWhatsAppService','defineProperty','message','prototype','30DFCEtY','1680ZJxPKm','get','__importStar','create','__createBinding','getOwnPropertyDescriptor','shape','configurable','findOne','22640JWoTaK','ERR_WAPP_GREETING_REQUIRED','object','__esModule','hasOwnProperty','./AssociateWhatsappQueue','18vNqtuz','451rzlSJn','9LhtfXL','sequelize','457009dGwbpP','../../errors/AppError','40WVIWno','118690RISoxR','__importDefault','call','string','56731kPdZem','boolean','default','4339465HvYoKt','460269BMrpnT','update','validate','yup','__setModuleDefault','1785732hPiinL'];a582_0x5479=function(){return _0x391df4;};return a582_0x5479();}var __createBinding=this&&this[a582_0x1d5202(0x16c)]||(Object[a582_0x1d5202(0x16b)]?function(_0x96702c,_0x43ab4d,_0x4e4861,_0x3157b9){const _0x317e5c=a582_0x1d5202;if(_0x3157b9===undefined)_0x3157b9=_0x4e4861;var _0x25ac6a=Object[_0x317e5c(0x16d)](_0x43ab4d,_0x4e4861);(!_0x25ac6a||(_0x317e5c(0x169)in _0x25ac6a?!_0x43ab4d[_0x317e5c(0x174)]:_0x25ac6a['writable']||_0x25ac6a[_0x317e5c(0x16f)]))&&(_0x25ac6a={'enumerable':!![],'get':function(){return _0x43ab4d[_0x4e4861];}}),Object['defineProperty'](_0x96702c,_0x3157b9,_0x25ac6a);}:function(_0x5f2ecb,_0x4e1a9f,_0x369da5,_0x2b55b9){if(_0x2b55b9===undefined)_0x2b55b9=_0x369da5;_0x5f2ecb[_0x2b55b9]=_0x4e1a9f[_0x369da5];}),__setModuleDefault=this&&this[a582_0x1d5202(0x15f)]||(Object[a582_0x1d5202(0x16b)]?function(_0x58a32e,_0x503fc6){Object['defineProperty'](_0x58a32e,'default',{'enumerable':!![],'value':_0x503fc6});}:function(_0x4d99cd,_0xfb80e8){_0x4d99cd['default']=_0xfb80e8;}),__importStar=this&&this[a582_0x1d5202(0x16a)]||function(_0x57a0){const _0xfc782f=a582_0x1d5202;if(_0x57a0&&_0x57a0[_0xfc782f(0x174)])return _0x57a0;var _0x5594a8={};if(_0x57a0!=null){for(var _0x703a16 in _0x57a0)if(_0x703a16!==_0xfc782f(0x159)&&Object[_0xfc782f(0x166)][_0xfc782f(0x14a)][_0xfc782f(0x155)](_0x57a0,_0x703a16))__createBinding(_0x5594a8,_0x57a0,_0x703a16);}return __setModuleDefault(_0x5594a8,_0x57a0),_0x5594a8;},__importDefault=this&&this[a582_0x1d5202(0x154)]||function(_0x38ee3c){const _0xebab3a=a582_0x1d5202;return _0x38ee3c&&_0x38ee3c[_0xebab3a(0x174)]?_0x38ee3c:{'default':_0x38ee3c};};Object[a582_0x1d5202(0x164)](exports,a582_0x1d5202(0x174),{'value':!![]});const Yup=__importStar(require(a582_0x1d5202(0x15e))),sequelize_1=require(a582_0x1d5202(0x14f)),AppError_1=__importDefault(require(a582_0x1d5202(0x151))),Whatsapp_1=__importDefault(require(a582_0x1d5202(0x161))),ShowWhatsAppService_1=__importDefault(require(a582_0x1d5202(0x163))),AssociateWhatsappQueue_1=__importDefault(require(a582_0x1d5202(0x14b))),UpdateWhatsAppService=async({whatsappData:_0x81b3d6,whatsappId:_0x39a308,companyId:_0xfb419c})=>{const _0x458072=a582_0x1d5202,_0x42abd8=Yup[_0x458072(0x173)]()[_0x458072(0x16e)]({'name':Yup['string']()[_0x458072(0x162)](0x2),'status':Yup[_0x458072(0x156)](),'isDefault':Yup[_0x458072(0x158)]()}),{name:_0x501449,status:_0x51530b,isDefault:_0x4efba6,session:_0x4b8857,greetingMessage:_0x333df7,complationMessage:_0x333eae,outOfHoursMessage:_0x5bed6e,queueIds:queueIds=[],token:_0x487f75,maxUseBotQueues:maxUseBotQueues=0x0,timeUseBotQueues:timeUseBotQueues=0x0,expiresTicket:expiresTicket=0x0,allowGroup:_0x2a181f,timeSendQueue:timeSendQueue=0x0,sendIdQueue:sendIdQueue=null,timeInactiveMessage:timeInactiveMessage=0x0,inactiveMessage:_0x5127ff,ratingMessage:_0x1b99b3,maxUseBotQueuesNPS:_0x1ad9de,expiresTicketNPS:expiresTicketNPS=0x0,whenExpiresTicket:_0x5af6c2,expiresInactiveMessage:_0xb1bc2c,groupAsTicket:_0x1ad9c3,importOldMessages:_0x18fbd6,importRecentMessages:_0xd49aef,closedTicketsPostImported:_0x228aa1,importOldMessagesGroups:_0xdfc5f7,timeCreateNewTicket:timeCreateNewTicket=null,integrationId:_0xb7d6e7,schedules:_0x3d6c0d}=_0x81b3d6;try{await _0x42abd8[_0x458072(0x15d)]({'name':_0x501449,'status':_0x51530b,'isDefault':_0x4efba6});}catch(_0xda6cba){throw new AppError_1[(_0x458072(0x159))](_0xda6cba[_0x458072(0x165)]);}if(queueIds['length']>0x1&&!_0x333df7)throw new AppError_1[(_0x458072(0x159))](_0x458072(0x172));let _0x288dfd=null;_0x4efba6&&(_0x288dfd=await Whatsapp_1[_0x458072(0x159)][_0x458072(0x170)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op']['not']]:_0x39a308},'companyId':_0xfb419c}}),_0x288dfd&&await _0x288dfd[_0x458072(0x15c)]({'isDefault':![]}));const _0x275f1b=await(0x0,ShowWhatsAppService_1[_0x458072(0x159)])(_0x39a308,_0xfb419c);return await _0x275f1b[_0x458072(0x15c)]({'name':_0x501449,'status':_0x51530b,'session':_0x4b8857,'greetingMessage':_0x333df7,'complationMessage':_0x333eae,'outOfHoursMessage':_0x5bed6e,'isDefault':_0x4efba6,'companyId':_0xfb419c,'token':_0x487f75,'maxUseBotQueues':maxUseBotQueues||0x0,'timeUseBotQueues':timeUseBotQueues||0x0,'expiresTicket':expiresTicket||0x0,'allowGroup':_0x2a181f,'timeSendQueue':timeSendQueue,'sendIdQueue':sendIdQueue,'timeInactiveMessage':timeInactiveMessage,'inactiveMessage':_0x5127ff,'ratingMessage':_0x1b99b3,'maxUseBotQueuesNPS':_0x1ad9de,'expiresTicketNPS':expiresTicketNPS,'whenExpiresTicket':_0x5af6c2,'expiresInactiveMessage':_0xb1bc2c,'groupAsTicket':_0x1ad9c3,'importOldMessages':_0x18fbd6,'importRecentMessages':_0xd49aef,'closedTicketsPostImported':_0x228aa1,'importOldMessagesGroups':_0xdfc5f7,'timeCreateNewTicket':timeCreateNewTicket,'integrationId':_0xb7d6e7,'schedules':_0x3d6c0d}),await(0x0,AssociateWhatsappQueue_1[_0x458072(0x159)])(_0x275f1b,queueIds),{'whatsapp':_0x275f1b,'oldDefaultWhatsapp':_0x288dfd};};exports[a582_0x1d5202(0x159)]=UpdateWhatsAppService;