'use strict';const a645_0x268a3d=a645_0x3446;(function(_0x4d1831,_0x288eab){const _0x36c5c5=a645_0x3446,_0x462cc9=_0x4d1831();while(!![]){try{const _0x50be74=parseInt(_0x36c5c5(0xee))/0x1+parseInt(_0x36c5c5(0xf2))/0x2*(parseInt(_0x36c5c5(0x10a))/0x3)+parseInt(_0x36c5c5(0xf1))/0x4*(parseInt(_0x36c5c5(0xfe))/0x5)+parseInt(_0x36c5c5(0x102))/0x6*(parseInt(_0x36c5c5(0xf7))/0x7)+-parseInt(_0x36c5c5(0xff))/0x8+parseInt(_0x36c5c5(0x105))/0x9*(-parseInt(_0x36c5c5(0x109))/0xa)+parseInt(_0x36c5c5(0xe8))/0xb*(parseInt(_0x36c5c5(0x106))/0xc);if(_0x50be74===_0x288eab)break;else _0x462cc9['push'](_0x462cc9['shift']());}catch(_0x16b36f){_0x462cc9['push'](_0x462cc9['shift']());}}}(a645_0x28d1,0xdc2b0));function a645_0x28d1(){const _0xe8ff94=['default','sequelize','getOwnPropertyDescriptor','406VTJqWI','call','get','prototype','update','min','__esModule','65WQxaqe','13860904AbBQAQ','message','not','77478zpaPYg','yup','../../models/Whatsapp','27rAzfci','3768cgWESu','string','configurable','1781840ZZOPkF','15srbcuL','46761IjRiaM','./ShowWhatsAppService','../../errors/AppError','defineProperty','ERR_WAPP_GREETING_REQUIRED','hasOwnProperty','492129wQfljY','__importDefault','create','175948DAkveb','8498HlANLY','writable'];a645_0x28d1=function(){return _0xe8ff94;};return a645_0x28d1();}var __createBinding=this&&this['__createBinding']||(Object[a645_0x268a3d(0xf0)]?function(_0x1c5c48,_0x2bef08,_0xf8f521,_0x457636){const _0x2885e8=a645_0x268a3d;if(_0x457636===undefined)_0x457636=_0xf8f521;var _0x272ebb=Object[_0x2885e8(0xf6)](_0x2bef08,_0xf8f521);(!_0x272ebb||(_0x2885e8(0xf9)in _0x272ebb?!_0x2bef08[_0x2885e8(0xfd)]:_0x272ebb[_0x2885e8(0xf3)]||_0x272ebb[_0x2885e8(0x108)]))&&(_0x272ebb={'enumerable':!![],'get':function(){return _0x2bef08[_0xf8f521];}}),Object['defineProperty'](_0x1c5c48,_0x457636,_0x272ebb);}:function(_0x3bca91,_0x3ce8d6,_0x4db95d,_0xb0b8d0){if(_0xb0b8d0===undefined)_0xb0b8d0=_0x4db95d;_0x3bca91[_0xb0b8d0]=_0x3ce8d6[_0x4db95d];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a645_0x268a3d(0xf0)]?function(_0x2555f3,_0x3a927a){const _0x359d2a=a645_0x268a3d;Object['defineProperty'](_0x2555f3,_0x359d2a(0xf4),{'enumerable':!![],'value':_0x3a927a});}:function(_0x4774b3,_0x4bde43){const _0x8c60f6=a645_0x268a3d;_0x4774b3[_0x8c60f6(0xf4)]=_0x4bde43;}),__importStar=this&&this['__importStar']||function(_0x7a7d4b){const _0x2db6b2=a645_0x268a3d;if(_0x7a7d4b&&_0x7a7d4b['__esModule'])return _0x7a7d4b;var _0x59d5b5={};if(_0x7a7d4b!=null){for(var _0x134239 in _0x7a7d4b)if(_0x134239!==_0x2db6b2(0xf4)&&Object[_0x2db6b2(0xfa)][_0x2db6b2(0xed)][_0x2db6b2(0xf8)](_0x7a7d4b,_0x134239))__createBinding(_0x59d5b5,_0x7a7d4b,_0x134239);}return __setModuleDefault(_0x59d5b5,_0x7a7d4b),_0x59d5b5;},__importDefault=this&&this[a645_0x268a3d(0xef)]||function(_0x56dc0e){const _0x12bbac=a645_0x268a3d;return _0x56dc0e&&_0x56dc0e[_0x12bbac(0xfd)]?_0x56dc0e:{'default':_0x56dc0e};};function a645_0x3446(_0x5d4bff,_0x2eefa7){const _0x28d1c6=a645_0x28d1();return a645_0x3446=function(_0x344668,_0x6b8058){_0x344668=_0x344668-0xe8;let _0x3cc1fe=_0x28d1c6[_0x344668];return _0x3cc1fe;},a645_0x3446(_0x5d4bff,_0x2eefa7);}Object[a645_0x268a3d(0xeb)](exports,a645_0x268a3d(0xfd),{'value':!![]});const Yup=__importStar(require(a645_0x268a3d(0x103))),sequelize_1=require(a645_0x268a3d(0xf5)),AppError_1=__importDefault(require(a645_0x268a3d(0xea))),Whatsapp_1=__importDefault(require(a645_0x268a3d(0x104))),ShowWhatsAppService_1=__importDefault(require(a645_0x268a3d(0xe9))),AssociateWhatsappQueue_1=__importDefault(require('./AssociateWhatsappQueue')),UpdateWhatsAppService=async({whatsappData:_0x1fe127,whatsappId:_0xc73b47,companyId:_0x38cb73})=>{const _0x5d7d7c=a645_0x268a3d,_0x2e1eb6=Yup['object']()['shape']({'name':Yup[_0x5d7d7c(0x107)]()[_0x5d7d7c(0xfc)](0x2),'status':Yup[_0x5d7d7c(0x107)](),'isDefault':Yup['boolean']()}),{name:_0x30b61b,status:_0x4b2d5c,isDefault:_0x4709a5,session:_0x549ab4,greetingMessage:_0x5b6604,complationMessage:_0x3c9d88,outOfHoursMessage:_0x588f55,queueIds:queueIds=[],token:_0x5f14ff,maxUseBotQueues:maxUseBotQueues=0x0,timeUseBotQueues:timeUseBotQueues=0x0,expiresTicket:expiresTicket=0x0,allowGroup:_0x255d59,timeSendQueue:timeSendQueue=0x0,sendIdQueue:sendIdQueue=null,timeInactiveMessage:timeInactiveMessage=0x0,inactiveMessage:_0xe1418a,ratingMessage:_0x40c432,maxUseBotQueuesNPS:_0x4eaf52,expiresTicketNPS:expiresTicketNPS=0x0,whenExpiresTicket:_0x1c5c90,expiresInactiveMessage:_0x3043b7,groupAsTicket:_0x895364,importOldMessages:_0x3b9252,importRecentMessages:_0x2a386b,closedTicketsPostImported:_0x381360,importOldMessagesGroups:_0x104ac2,timeCreateNewTicket:timeCreateNewTicket=null,integrationId:_0x5b4551,schedules:_0x57d7b4,promptId:_0x3a6ae0,requestQR:requestQR=![],collectiveVacationEnd:_0x5b5136,collectiveVacationMessage:_0x3a3e1a,collectiveVacationStart:_0x1359e9}=_0x1fe127;try{await _0x2e1eb6['validate']({'name':_0x30b61b,'status':_0x4b2d5c,'isDefault':_0x4709a5});}catch(_0x234fa5){throw new AppError_1[(_0x5d7d7c(0xf4))](_0x234fa5[_0x5d7d7c(0x100)]);}if(queueIds['length']>0x1&&!_0x5b6604)throw new AppError_1[(_0x5d7d7c(0xf4))](_0x5d7d7c(0xec));let _0x14f7a1=null;_0x4709a5&&(_0x14f7a1=await Whatsapp_1['default']['findOne']({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x5d7d7c(0x101)]]:_0xc73b47},'companyId':_0x38cb73}}),_0x14f7a1&&await _0x14f7a1['update']({'isDefault':![]}));const _0x19cefd=await(0x0,ShowWhatsAppService_1['default'])(_0xc73b47,_0x38cb73);return await _0x19cefd[_0x5d7d7c(0xfb)]({'name':_0x30b61b,'status':_0x4b2d5c,'session':_0x549ab4,'greetingMessage':_0x5b6604,'complationMessage':_0x3c9d88,'outOfHoursMessage':_0x588f55,'isDefault':_0x4709a5,'companyId':_0x38cb73,'token':_0x5f14ff,'maxUseBotQueues':maxUseBotQueues||0x0,'timeUseBotQueues':timeUseBotQueues||0x0,'expiresTicket':expiresTicket||0x0,'allowGroup':_0x255d59,'timeSendQueue':timeSendQueue,'sendIdQueue':sendIdQueue,'timeInactiveMessage':timeInactiveMessage,'inactiveMessage':_0xe1418a,'ratingMessage':_0x40c432,'maxUseBotQueuesNPS':_0x4eaf52,'expiresTicketNPS':expiresTicketNPS,'whenExpiresTicket':_0x1c5c90,'expiresInactiveMessage':_0x3043b7,'groupAsTicket':_0x895364,'importOldMessages':_0x3b9252,'importRecentMessages':_0x2a386b,'closedTicketsPostImported':_0x381360,'importOldMessagesGroups':_0x104ac2,'timeCreateNewTicket':timeCreateNewTicket,'integrationId':_0x5b4551,'schedules':_0x57d7b4,'promptId':_0x3a6ae0,'collectiveVacationEnd':_0x5b5136,'collectiveVacationMessage':_0x3a3e1a,'collectiveVacationStart':_0x1359e9}),!requestQR&&await(0x0,AssociateWhatsappQueue_1['default'])(_0x19cefd,queueIds),{'whatsapp':_0x19cefd,'oldDefaultWhatsapp':_0x14f7a1};};exports[a645_0x268a3d(0xf4)]=UpdateWhatsAppService;