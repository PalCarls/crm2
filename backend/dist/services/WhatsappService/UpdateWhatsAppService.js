'use strict';const a523_0x4530f8=a523_0x7e98;function a523_0x3b8f(){const _0x1cdfb1=['sequelize','../../models/Whatsapp','string','__importStar','13809132fVjTPa','1510978FiZSwH','shape','min','__esModule','164682kAymZN','hasOwnProperty','update','10970372gLWGuC','6394364hQMmLO','object','writable','./AssociateWhatsappQueue','__setModuleDefault','6991400IUbQRX','yup','default','get','length','defineProperty','validate','275JRwnzi','boolean','create','configurable','19610zCdgMf','../../errors/AppError','ERR_WAPP_GREETING_REQUIRED','__createBinding','message','489ZXSbWg'];a523_0x3b8f=function(){return _0x1cdfb1;};return a523_0x3b8f();}(function(_0x5a4014,_0x2fb4c9){const _0x328d0d=a523_0x7e98,_0xb3249c=_0x5a4014();while(!![]){try{const _0x4f5475=parseInt(_0x328d0d(0xb1))/0x1+parseInt(_0x328d0d(0xa6))/0x2*(parseInt(_0x328d0d(0xab))/0x3)+-parseInt(_0x328d0d(0xb9))/0x4+parseInt(_0x328d0d(0xa2))/0x5*(-parseInt(_0x328d0d(0xb5))/0x6)+-parseInt(_0x328d0d(0xb8))/0x7+parseInt(_0x328d0d(0xbe))/0x8+parseInt(_0x328d0d(0xb0))/0x9;if(_0x4f5475===_0x2fb4c9)break;else _0xb3249c['push'](_0xb3249c['shift']());}catch(_0x5b54de){_0xb3249c['push'](_0xb3249c['shift']());}}}(a523_0x3b8f,0xcd96e));var __createBinding=this&&this[a523_0x4530f8(0xa9)]||(Object['create']?function(_0x44bd0a,_0x40e148,_0x2c9079,_0x26e5c0){const _0x5cb9e7=a523_0x4530f8;if(_0x26e5c0===undefined)_0x26e5c0=_0x2c9079;var _0x9b3472=Object['getOwnPropertyDescriptor'](_0x40e148,_0x2c9079);(!_0x9b3472||(_0x5cb9e7(0xc1)in _0x9b3472?!_0x40e148[_0x5cb9e7(0xb4)]:_0x9b3472[_0x5cb9e7(0xbb)]||_0x9b3472[_0x5cb9e7(0xa5)]))&&(_0x9b3472={'enumerable':!![],'get':function(){return _0x40e148[_0x2c9079];}}),Object['defineProperty'](_0x44bd0a,_0x26e5c0,_0x9b3472);}:function(_0x3a545e,_0x3f9a42,_0x5100af,_0xcfc6f7){if(_0xcfc6f7===undefined)_0xcfc6f7=_0x5100af;_0x3a545e[_0xcfc6f7]=_0x3f9a42[_0x5100af];}),__setModuleDefault=this&&this[a523_0x4530f8(0xbd)]||(Object[a523_0x4530f8(0xa4)]?function(_0x1ce9d4,_0x264276){const _0x1436cf=a523_0x4530f8;Object[_0x1436cf(0xc3)](_0x1ce9d4,_0x1436cf(0xc0),{'enumerable':!![],'value':_0x264276});}:function(_0x123b2a,_0x423bd){const _0x499706=a523_0x4530f8;_0x123b2a[_0x499706(0xc0)]=_0x423bd;}),__importStar=this&&this[a523_0x4530f8(0xaf)]||function(_0x4c83a8){const _0x3d8502=a523_0x4530f8;if(_0x4c83a8&&_0x4c83a8[_0x3d8502(0xb4)])return _0x4c83a8;var _0x324bc8={};if(_0x4c83a8!=null){for(var _0x15ff9e in _0x4c83a8)if(_0x15ff9e!=='default'&&Object['prototype'][_0x3d8502(0xb6)]['call'](_0x4c83a8,_0x15ff9e))__createBinding(_0x324bc8,_0x4c83a8,_0x15ff9e);}return __setModuleDefault(_0x324bc8,_0x4c83a8),_0x324bc8;},__importDefault=this&&this['__importDefault']||function(_0xf824b3){const _0x57f588=a523_0x4530f8;return _0xf824b3&&_0xf824b3[_0x57f588(0xb4)]?_0xf824b3:{'default':_0xf824b3};};function a523_0x7e98(_0x2652fc,_0x3ce461){const _0x3b8f08=a523_0x3b8f();return a523_0x7e98=function(_0x7e988e,_0x1b90e9){_0x7e988e=_0x7e988e-0xa2;let _0x43b2ec=_0x3b8f08[_0x7e988e];return _0x43b2ec;},a523_0x7e98(_0x2652fc,_0x3ce461);}Object[a523_0x4530f8(0xc3)](exports,a523_0x4530f8(0xb4),{'value':!![]});const Yup=__importStar(require(a523_0x4530f8(0xbf))),sequelize_1=require(a523_0x4530f8(0xac)),AppError_1=__importDefault(require(a523_0x4530f8(0xa7))),Whatsapp_1=__importDefault(require(a523_0x4530f8(0xad))),ShowWhatsAppService_1=__importDefault(require('./ShowWhatsAppService')),AssociateWhatsappQueue_1=__importDefault(require(a523_0x4530f8(0xbc))),UpdateWhatsAppService=async({whatsappData:_0x4e5a4b,whatsappId:_0x4f1c9c,companyId:_0x5d556a})=>{const _0x467b89=a523_0x4530f8,_0x1befa4=Yup[_0x467b89(0xba)]()[_0x467b89(0xb2)]({'name':Yup['string']()[_0x467b89(0xb3)](0x2),'status':Yup[_0x467b89(0xae)](),'isDefault':Yup[_0x467b89(0xa3)]()}),{name:_0x5543fa,status:_0x4f7c97,isDefault:_0xa10bb6,session:_0x132283,greetingMessage:_0x26c3bf,complationMessage:_0x17f7c5,outOfHoursMessage:_0x541a95,queueIds:queueIds=[],token:_0x143ef1,maxUseBotQueues:_0x38b940,timeUseBotQueues:_0x55c59c,expiresTicket:_0x54a3b4,allowGroup:_0x186edb,timeSendQueue:_0x4f1cf1,sendIdQueue:_0xdc2044,timeInactiveMessage:_0x54952e,inactiveMessage:_0x12e431,ratingMessage:_0x4503aa,maxUseBotQueuesNPS:_0x42ccd4,expiresTicketNPS:_0x3ba2cb,whenExpiresTicket:_0x62ecc6,expiresInactiveMessage:_0x34ae99,groupAsTicket:_0x55b0e0}=_0x4e5a4b;try{await _0x1befa4[_0x467b89(0xc4)]({'name':_0x5543fa,'status':_0x4f7c97,'isDefault':_0xa10bb6});}catch(_0x3846bf){throw new AppError_1[(_0x467b89(0xc0))](_0x3846bf[_0x467b89(0xaa)]);}if(queueIds[_0x467b89(0xc2)]>0x1&&!_0x26c3bf)throw new AppError_1[(_0x467b89(0xc0))](_0x467b89(0xa8));let _0x48c58e=null;_0xa10bb6&&(_0x48c58e=await Whatsapp_1[_0x467b89(0xc0)]['findOne']({'where':{'isDefault':!![],'id':{[sequelize_1['Op']['not']]:_0x4f1c9c},'companyId':_0x5d556a}}),_0x48c58e&&await _0x48c58e[_0x467b89(0xb7)]({'isDefault':![]}));const _0x1f90c5=await(0x0,ShowWhatsAppService_1['default'])(_0x4f1c9c,_0x5d556a);return await _0x1f90c5['update']({'name':_0x5543fa,'status':_0x4f7c97,'session':_0x132283,'greetingMessage':_0x26c3bf,'complationMessage':_0x17f7c5,'outOfHoursMessage':_0x541a95,'isDefault':_0xa10bb6,'companyId':_0x5d556a,'token':_0x143ef1,'maxUseBotQueues':_0x38b940,'timeUseBotQueues':_0x55c59c,'expiresTicket':_0x54a3b4,'allowGroup':_0x186edb,'timeSendQueue':_0x4f1cf1,'sendIdQueue':_0xdc2044,'timeInactiveMessage':_0x54952e,'inactiveMessage':_0x12e431,'ratingMessage':_0x4503aa,'maxUseBotQueuesNPS':_0x42ccd4,'expiresTicketNPS':_0x3ba2cb,'whenExpiresTicket':_0x62ecc6,'expiresInactiveMessage':_0x34ae99,'groupAsTicket':_0x55b0e0}),await(0x0,AssociateWhatsappQueue_1[_0x467b89(0xc0)])(_0x1f90c5,queueIds),{'whatsapp':_0x1f90c5,'oldDefaultWhatsapp':_0x48c58e};};exports[a523_0x4530f8(0xc0)]=UpdateWhatsAppService;