'use strict';const a561_0x283f30=a561_0x38f7;(function(_0x1f3f0c,_0x16729e){const _0x1d5d18=a561_0x38f7,_0x1f7b67=_0x1f3f0c();while(!![]){try{const _0x34050e=-parseInt(_0x1d5d18(0x7f))/0x1*(parseInt(_0x1d5d18(0x8a))/0x2)+parseInt(_0x1d5d18(0x79))/0x3*(-parseInt(_0x1d5d18(0x6f))/0x4)+parseInt(_0x1d5d18(0x7d))/0x5*(-parseInt(_0x1d5d18(0x90))/0x6)+-parseInt(_0x1d5d18(0x80))/0x7+parseInt(_0x1d5d18(0x77))/0x8+parseInt(_0x1d5d18(0x83))/0x9*(parseInt(_0x1d5d18(0x8d))/0xa)+parseInt(_0x1d5d18(0x78))/0xb*(parseInt(_0x1d5d18(0x7c))/0xc);if(_0x34050e===_0x16729e)break;else _0x1f7b67['push'](_0x1f7b67['shift']());}catch(_0x473632){_0x1f7b67['push'](_0x1f7b67['shift']());}}}(a561_0x5524,0x4c866));function a561_0x38f7(_0x5cecb8,_0x32cec5){const _0x552455=a561_0x5524();return a561_0x38f7=function(_0x38f77f,_0x54a144){_0x38f77f=_0x38f77f-0x6d;let _0x6fbd48=_0x552455[_0x38f77f];return _0x6fbd48;},a561_0x38f7(_0x5cecb8,_0x32cec5);}var __createBinding=this&&this[a561_0x283f30(0x8f)]||(Object[a561_0x283f30(0x7b)]?function(_0x222b39,_0x4cab70,_0x5e65dc,_0xdeedec){const _0x1d68c2=a561_0x283f30;if(_0xdeedec===undefined)_0xdeedec=_0x5e65dc;var _0x2075b6=Object[_0x1d68c2(0x86)](_0x4cab70,_0x5e65dc);(!_0x2075b6||(_0x1d68c2(0x84)in _0x2075b6?!_0x4cab70[_0x1d68c2(0x7e)]:_0x2075b6['writable']||_0x2075b6[_0x1d68c2(0x74)]))&&(_0x2075b6={'enumerable':!![],'get':function(){return _0x4cab70[_0x5e65dc];}}),Object[_0x1d68c2(0x8b)](_0x222b39,_0xdeedec,_0x2075b6);}:function(_0x3271de,_0x16d7c8,_0x364905,_0x3ff858){if(_0x3ff858===undefined)_0x3ff858=_0x364905;_0x3271de[_0x3ff858]=_0x16d7c8[_0x364905];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a561_0x283f30(0x7b)]?function(_0x5dab6e,_0x5f0016){const _0x1bd67b=a561_0x283f30;Object[_0x1bd67b(0x8b)](_0x5dab6e,_0x1bd67b(0x8c),{'enumerable':!![],'value':_0x5f0016});}:function(_0x5aac5d,_0x21eaa8){_0x5aac5d['default']=_0x21eaa8;}),__importStar=this&&this[a561_0x283f30(0x82)]||function(_0x3e578b){const _0x182b1c=a561_0x283f30;if(_0x3e578b&&_0x3e578b['__esModule'])return _0x3e578b;var _0x13029f={};if(_0x3e578b!=null){for(var _0x448c84 in _0x3e578b)if(_0x448c84!==_0x182b1c(0x8c)&&Object['prototype']['hasOwnProperty']['call'](_0x3e578b,_0x448c84))__createBinding(_0x13029f,_0x3e578b,_0x448c84);}return __setModuleDefault(_0x13029f,_0x3e578b),_0x13029f;},__importDefault=this&&this[a561_0x283f30(0x71)]||function(_0x1b74b9){const _0x43d7ae=a561_0x283f30;return _0x1b74b9&&_0x1b74b9[_0x43d7ae(0x7e)]?_0x1b74b9:{'default':_0x1b74b9};};function a561_0x5524(){const _0x3bad49=['5212QzVxJv','defineProperty','default','10eNtpzP','yup','__createBinding','6UNKVCP','../../errors/AppError','./AssociateWhatsappQueue','32320dnHeql','string','__importDefault','message','update','configurable','shape','boolean','1302040NQGakf','45353QFHrHM','78WwwoGx','../../models/Whatsapp','create','3288kATuwO','2635945yWAOEB','__esModule','53WzQHtx','3603614aRmTke','length','__importStar','3700602ahMxMj','get','sequelize','getOwnPropertyDescriptor','not','min','ERR_WAPP_GREETING_REQUIRED'];a561_0x5524=function(){return _0x3bad49;};return a561_0x5524();}Object['defineProperty'](exports,a561_0x283f30(0x7e),{'value':!![]});const Yup=__importStar(require(a561_0x283f30(0x8e))),sequelize_1=require(a561_0x283f30(0x85)),AppError_1=__importDefault(require(a561_0x283f30(0x6d))),Whatsapp_1=__importDefault(require(a561_0x283f30(0x7a))),ShowWhatsAppService_1=__importDefault(require('./ShowWhatsAppService')),AssociateWhatsappQueue_1=__importDefault(require(a561_0x283f30(0x6e))),UpdateWhatsAppService=async({whatsappData:_0x5c73ba,whatsappId:_0xfc4196,companyId:_0x23fd00})=>{const _0x33d449=a561_0x283f30,_0x53fbd0=Yup['object']()[_0x33d449(0x75)]({'name':Yup[_0x33d449(0x70)]()[_0x33d449(0x88)](0x2),'status':Yup[_0x33d449(0x70)](),'isDefault':Yup[_0x33d449(0x76)]()}),{name:_0x137cb3,status:_0x536812,isDefault:_0x2f835a,session:_0x380b24,greetingMessage:_0x32e594,complationMessage:_0x53a7a9,outOfHoursMessage:_0x5bb932,queueIds:queueIds=[],token:_0x11bf92,maxUseBotQueues:_0x5f4d34,timeUseBotQueues:_0x43d2aa,expiresTicket:_0x442984,allowGroup:_0x32a0fe,timeSendQueue:_0x4b9049,sendIdQueue:_0x9b85fd,timeInactiveMessage:_0x3c0af1,inactiveMessage:_0x32513c,ratingMessage:_0x51a01c,maxUseBotQueuesNPS:_0x13f876,expiresTicketNPS:_0x23b950,whenExpiresTicket:_0x4d0a27,expiresInactiveMessage:_0x24c203,groupAsTicket:_0x2bf22d,importOldMessages:_0xff4de2,importRecentMessages:_0x5027e0,closedTicketsPostImported:_0x35759c,importOldMessagesGroups:_0x37f964,timeCreateNewTicket:_0x13d0e7}=_0x5c73ba;try{await _0x53fbd0['validate']({'name':_0x137cb3,'status':_0x536812,'isDefault':_0x2f835a});}catch(_0x3e9257){throw new AppError_1['default'](_0x3e9257[_0x33d449(0x72)]);}if(queueIds[_0x33d449(0x81)]>0x1&&!_0x32e594)throw new AppError_1[(_0x33d449(0x8c))](_0x33d449(0x89));let _0x4686fd=null;_0x2f835a&&(_0x4686fd=await Whatsapp_1[_0x33d449(0x8c)]['findOne']({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x33d449(0x87)]]:_0xfc4196},'companyId':_0x23fd00}}),_0x4686fd&&await _0x4686fd['update']({'isDefault':![]}));const _0x3579fd=await(0x0,ShowWhatsAppService_1['default'])(_0xfc4196,_0x23fd00);return await _0x3579fd[_0x33d449(0x73)]({'name':_0x137cb3,'status':_0x536812,'session':_0x380b24,'greetingMessage':_0x32e594,'complationMessage':_0x53a7a9,'outOfHoursMessage':_0x5bb932,'isDefault':_0x2f835a,'companyId':_0x23fd00,'token':_0x11bf92,'maxUseBotQueues':_0x5f4d34,'timeUseBotQueues':_0x43d2aa,'expiresTicket':_0x442984,'allowGroup':_0x32a0fe,'timeSendQueue':_0x4b9049,'sendIdQueue':_0x9b85fd,'timeInactiveMessage':_0x3c0af1,'inactiveMessage':_0x32513c,'ratingMessage':_0x51a01c,'maxUseBotQueuesNPS':_0x13f876,'expiresTicketNPS':_0x23b950,'whenExpiresTicket':_0x4d0a27,'expiresInactiveMessage':_0x24c203,'groupAsTicket':_0x2bf22d,'importOldMessages':_0xff4de2,'importRecentMessages':_0x5027e0,'closedTicketsPostImported':_0x35759c,'importOldMessagesGroups':_0x37f964,'timeCreateNewTicket':_0x13d0e7}),await(0x0,AssociateWhatsappQueue_1[_0x33d449(0x8c)])(_0x3579fd,queueIds),{'whatsapp':_0x3579fd,'oldDefaultWhatsapp':_0x4686fd};};exports['default']=UpdateWhatsAppService;