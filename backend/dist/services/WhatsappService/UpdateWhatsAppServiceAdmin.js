'use strict';const a646_0x5e996c=a646_0xca44;(function(_0x25019a,_0x3e2b5d){const _0x2e084b=a646_0xca44,_0x272dff=_0x25019a();while(!![]){try{const _0x5f1a89=parseInt(_0x2e084b(0x7c))/0x1+-parseInt(_0x2e084b(0x88))/0x2+-parseInt(_0x2e084b(0x75))/0x3+-parseInt(_0x2e084b(0x7a))/0x4+-parseInt(_0x2e084b(0x87))/0x5+-parseInt(_0x2e084b(0x78))/0x6+parseInt(_0x2e084b(0x7e))/0x7;if(_0x5f1a89===_0x3e2b5d)break;else _0x272dff['push'](_0x272dff['shift']());}catch(_0x3b710e){_0x272dff['push'](_0x272dff['shift']());}}}(a646_0x151f,0xe4a4a));var __createBinding=this&&this[a646_0x5e996c(0x89)]||(Object[a646_0x5e996c(0x8c)]?function(_0x1d3a8a,_0x1e0e8f,_0x2b3baf,_0x3aa655){const _0x3a97cf=a646_0x5e996c;if(_0x3aa655===undefined)_0x3aa655=_0x2b3baf;var _0x546820=Object[_0x3a97cf(0x93)](_0x1e0e8f,_0x2b3baf);(!_0x546820||(_0x3a97cf(0x8b)in _0x546820?!_0x1e0e8f[_0x3a97cf(0x7f)]:_0x546820[_0x3a97cf(0x79)]||_0x546820[_0x3a97cf(0x92)]))&&(_0x546820={'enumerable':!![],'get':function(){return _0x1e0e8f[_0x2b3baf];}}),Object[_0x3a97cf(0x8d)](_0x1d3a8a,_0x3aa655,_0x546820);}:function(_0x43a1f6,_0x58e927,_0x4066a9,_0x305060){if(_0x305060===undefined)_0x305060=_0x4066a9;_0x43a1f6[_0x305060]=_0x58e927[_0x4066a9];}),__setModuleDefault=this&&this[a646_0x5e996c(0x84)]||(Object['create']?function(_0x541503,_0x1e6383){const _0xb380e9=a646_0x5e996c;Object['defineProperty'](_0x541503,_0xb380e9(0x81),{'enumerable':!![],'value':_0x1e6383});}:function(_0x1d81f2,_0x25018b){const _0x265c7a=a646_0x5e996c;_0x1d81f2[_0x265c7a(0x81)]=_0x25018b;}),__importStar=this&&this[a646_0x5e996c(0x7d)]||function(_0x2ef470){const _0x144623=a646_0x5e996c;if(_0x2ef470&&_0x2ef470[_0x144623(0x7f)])return _0x2ef470;var _0x119dec={};if(_0x2ef470!=null){for(var _0x5d1695 in _0x2ef470)if(_0x5d1695!==_0x144623(0x81)&&Object['prototype']['hasOwnProperty']['call'](_0x2ef470,_0x5d1695))__createBinding(_0x119dec,_0x2ef470,_0x5d1695);}return __setModuleDefault(_0x119dec,_0x2ef470),_0x119dec;},__importDefault=this&&this[a646_0x5e996c(0x83)]||function(_0x1060b9){const _0x151e72=a646_0x5e996c;return _0x1060b9&&_0x1060b9[_0x151e72(0x7f)]?_0x1060b9:{'default':_0x1060b9};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const Yup=__importStar(require('yup')),sequelize_1=require('sequelize'),AppError_1=__importDefault(require(a646_0x5e996c(0x94))),Whatsapp_1=__importDefault(require(a646_0x5e996c(0x76))),AssociateWhatsappQueue_1=__importDefault(require(a646_0x5e996c(0x77))),ShowWhatsAppServiceAdmin_1=__importDefault(require('./ShowWhatsAppServiceAdmin')),UpdateWhatsAppServiceAdmin=async({whatsappData:_0x45ad46,whatsappId:_0x461135,companyId:_0x2e3103})=>{const _0x3ebe72=a646_0x5e996c,_0x40360e=Yup[_0x3ebe72(0x91)]()[_0x3ebe72(0x86)]({'name':Yup[_0x3ebe72(0x90)]()[_0x3ebe72(0x8e)](0x2),'status':Yup[_0x3ebe72(0x90)](),'isDefault':Yup[_0x3ebe72(0x82)]()}),{name:_0xe6357b,status:_0x5dba33,isDefault:_0x255eaa,session:_0x454de1,greetingMessage:_0x2a90a9,complationMessage:_0x394633,outOfHoursMessage:_0x280e82,queueIds:queueIds=[],token:_0x55e510,maxUseBotQueues:maxUseBotQueues=0x0,timeUseBotQueues:timeUseBotQueues=0x0,expiresTicket:expiresTicket=0x0,allowGroup:_0x3f9096,timeSendQueue:timeSendQueue=0x0,sendIdQueue:sendIdQueue=null,timeInactiveMessage:timeInactiveMessage=0x0,inactiveMessage:_0x360a33,ratingMessage:_0x2d993a,maxUseBotQueuesNPS:_0x3ad803,expiresTicketNPS:expiresTicketNPS=0x0,whenExpiresTicket:_0x40baaf,expiresInactiveMessage:_0x3cc6f4,groupAsTicket:_0x4b267a,importOldMessages:_0x29ceb1,importRecentMessages:_0x4fea66,closedTicketsPostImported:_0x51d2b5,importOldMessagesGroups:_0x9ca629,timeCreateNewTicket:timeCreateNewTicket=null,integrationId:_0x5ab32c,schedules:_0x5ce71f,promptId:_0x59a064,requestQR:requestQR=![]}=_0x45ad46;try{await _0x40360e[_0x3ebe72(0x8f)]({'name':_0xe6357b,'status':_0x5dba33,'isDefault':_0x255eaa});}catch(_0x582be9){throw new AppError_1[(_0x3ebe72(0x81))](_0x582be9[_0x3ebe72(0x8a)]);}if(queueIds[_0x3ebe72(0x74)]>0x1&&!_0x2a90a9)throw new AppError_1['default']('ERR_WAPP_GREETING_REQUIRED');let _0x5ac7dd=null;_0x255eaa&&(_0x5ac7dd=await Whatsapp_1[_0x3ebe72(0x81)][_0x3ebe72(0x85)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x3ebe72(0x80)]]:_0x461135}}}),_0x5ac7dd&&await _0x5ac7dd[_0x3ebe72(0x7b)]({'isDefault':![]}));const _0x1b4837=await(0x0,ShowWhatsAppServiceAdmin_1[_0x3ebe72(0x81)])(_0x461135);return await _0x1b4837[_0x3ebe72(0x7b)]({'name':_0xe6357b,'status':_0x5dba33,'session':_0x454de1,'greetingMessage':_0x2a90a9,'complationMessage':_0x394633,'outOfHoursMessage':_0x280e82,'isDefault':_0x255eaa,'companyId':_0x2e3103,'token':_0x55e510,'maxUseBotQueues':maxUseBotQueues||0x0,'timeUseBotQueues':timeUseBotQueues||0x0,'expiresTicket':expiresTicket||0x0,'allowGroup':_0x3f9096,'timeSendQueue':timeSendQueue,'sendIdQueue':sendIdQueue,'timeInactiveMessage':timeInactiveMessage,'inactiveMessage':_0x360a33,'ratingMessage':_0x2d993a,'maxUseBotQueuesNPS':_0x3ad803,'expiresTicketNPS':expiresTicketNPS,'whenExpiresTicket':_0x40baaf,'expiresInactiveMessage':_0x3cc6f4,'groupAsTicket':_0x4b267a,'importOldMessages':_0x29ceb1,'importRecentMessages':_0x4fea66,'closedTicketsPostImported':_0x51d2b5,'importOldMessagesGroups':_0x9ca629,'timeCreateNewTicket':timeCreateNewTicket,'integrationId':_0x5ab32c,'schedules':_0x5ce71f,'promptId':_0x59a064}),!requestQR&&await(0x0,AssociateWhatsappQueue_1[_0x3ebe72(0x81)])(_0x1b4837,queueIds),{'whatsapp':_0x1b4837,'oldDefaultWhatsapp':_0x5ac7dd};};function a646_0x151f(){const _0xb2da5c=['18666284TyNZVH','__esModule','not','default','boolean','__importDefault','__setModuleDefault','findOne','shape','2401835dmimLo','1476720oOGQxL','__createBinding','message','get','create','defineProperty','min','validate','string','object','configurable','getOwnPropertyDescriptor','../../errors/AppError','length','1085511QocSoR','../../models/Whatsapp','./AssociateWhatsappQueue','1168554msMbCb','writable','1069680FMPQuR','update','312653DziJgl','__importStar'];a646_0x151f=function(){return _0xb2da5c;};return a646_0x151f();}function a646_0xca44(_0x5b3003,_0x351a29){const _0x151fe9=a646_0x151f();return a646_0xca44=function(_0xca4442,_0x509464){_0xca4442=_0xca4442-0x74;let _0xeb5ce=_0x151fe9[_0xca4442];return _0xeb5ce;},a646_0xca44(_0x5b3003,_0x351a29);}exports['default']=UpdateWhatsAppServiceAdmin;