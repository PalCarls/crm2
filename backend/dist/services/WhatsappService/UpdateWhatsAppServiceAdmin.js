'use strict';const a638_0xdae56=a638_0x431d;(function(_0x18fdd5,_0x47b87f){const _0x4cc90f=a638_0x431d,_0x1efa87=_0x18fdd5();while(!![]){try{const _0x158ddf=parseInt(_0x4cc90f(0x103))/0x1*(parseInt(_0x4cc90f(0xfa))/0x2)+-parseInt(_0x4cc90f(0xf6))/0x3+-parseInt(_0x4cc90f(0xf0))/0x4+-parseInt(_0x4cc90f(0xf2))/0x5+parseInt(_0x4cc90f(0xec))/0x6*(-parseInt(_0x4cc90f(0xe5))/0x7)+parseInt(_0x4cc90f(0xf1))/0x8+parseInt(_0x4cc90f(0xe8))/0x9;if(_0x158ddf===_0x47b87f)break;else _0x1efa87['push'](_0x1efa87['shift']());}catch(_0x493606){_0x1efa87['push'](_0x1efa87['shift']());}}}(a638_0x4845,0x27d9c));function a638_0x431d(_0x16ef4a,_0x879e2c){const _0x484539=a638_0x4845();return a638_0x431d=function(_0x431de4,_0x17ccdc){_0x431de4=_0x431de4-0xe3;let _0x192310=_0x484539[_0x431de4];return _0x192310;},a638_0x431d(_0x16ef4a,_0x879e2c);}var __createBinding=this&&this['__createBinding']||(Object[a638_0xdae56(0x104)]?function(_0x2dcb20,_0x3e628f,_0x48f5de,_0x5700f2){const _0x59d63f=a638_0xdae56;if(_0x5700f2===undefined)_0x5700f2=_0x48f5de;var _0x3a6303=Object[_0x59d63f(0xea)](_0x3e628f,_0x48f5de);(!_0x3a6303||(_0x59d63f(0xfb)in _0x3a6303?!_0x3e628f[_0x59d63f(0xeb)]:_0x3a6303['writable']||_0x3a6303[_0x59d63f(0x100)]))&&(_0x3a6303={'enumerable':!![],'get':function(){return _0x3e628f[_0x48f5de];}}),Object[_0x59d63f(0xef)](_0x2dcb20,_0x5700f2,_0x3a6303);}:function(_0x278504,_0x45519d,_0x20cd5a,_0x26a5bf){if(_0x26a5bf===undefined)_0x26a5bf=_0x20cd5a;_0x278504[_0x26a5bf]=_0x45519d[_0x20cd5a];}),__setModuleDefault=this&&this[a638_0xdae56(0xfe)]||(Object[a638_0xdae56(0x104)]?function(_0x5d9cc8,_0x27dea0){const _0xb31b42=a638_0xdae56;Object['defineProperty'](_0x5d9cc8,_0xb31b42(0xf5),{'enumerable':!![],'value':_0x27dea0});}:function(_0x2dddea,_0xea3e6c){const _0x1762f0=a638_0xdae56;_0x2dddea[_0x1762f0(0xf5)]=_0xea3e6c;}),__importStar=this&&this[a638_0xdae56(0xfc)]||function(_0x48275a){const _0x6b8951=a638_0xdae56;if(_0x48275a&&_0x48275a['__esModule'])return _0x48275a;var _0x30263a={};if(_0x48275a!=null){for(var _0x465772 in _0x48275a)if(_0x465772!=='default'&&Object['prototype'][_0x6b8951(0xe6)][_0x6b8951(0xed)](_0x48275a,_0x465772))__createBinding(_0x30263a,_0x48275a,_0x465772);}return __setModuleDefault(_0x30263a,_0x48275a),_0x30263a;},__importDefault=this&&this[a638_0xdae56(0xf9)]||function(_0xea74c2){const _0x33c8da=a638_0xdae56;return _0xea74c2&&_0xea74c2[_0x33c8da(0xeb)]?_0xea74c2:{'default':_0xea74c2};};function a638_0x4845(){const _0x5937e2=['157162hIMUEa','get','__importStar','yup','__setModuleDefault','./AssociateWhatsappQueue','configurable','./ShowWhatsAppServiceAdmin','min','1bYaUDD','create','length','update','7nqwtPs','hasOwnProperty','message','7236891yBaGLR','../../errors/AppError','getOwnPropertyDescriptor','__esModule','991362SgjUEl','call','string','defineProperty','432536MiCrQX','1137832lKgcXS','1408720WkMUJB','shape','boolean','default','919728GnkmVS','object','validate','__importDefault'];a638_0x4845=function(){return _0x5937e2;};return a638_0x4845();}Object[a638_0xdae56(0xef)](exports,a638_0xdae56(0xeb),{'value':!![]});const Yup=__importStar(require(a638_0xdae56(0xfd))),sequelize_1=require('sequelize'),AppError_1=__importDefault(require(a638_0xdae56(0xe9))),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),AssociateWhatsappQueue_1=__importDefault(require(a638_0xdae56(0xff))),ShowWhatsAppServiceAdmin_1=__importDefault(require(a638_0xdae56(0x101))),UpdateWhatsAppServiceAdmin=async({whatsappData:_0x95b0fc,whatsappId:_0x43609a,companyId:_0x4488ab})=>{const _0x13bf8d=a638_0xdae56,_0xc56bf2=Yup[_0x13bf8d(0xf7)]()[_0x13bf8d(0xf3)]({'name':Yup[_0x13bf8d(0xee)]()[_0x13bf8d(0x102)](0x2),'status':Yup['string'](),'isDefault':Yup[_0x13bf8d(0xf4)]()}),{name:_0x347b3e,status:_0x3b72c9,isDefault:_0x49f918,session:_0x4d1936,greetingMessage:_0x5d4055,complationMessage:_0x146f45,outOfHoursMessage:_0x4ee02a,queueIds:queueIds=[],token:_0x4107da,maxUseBotQueues:maxUseBotQueues=0x0,timeUseBotQueues:timeUseBotQueues=0x0,expiresTicket:expiresTicket=0x0,allowGroup:_0x350049,timeSendQueue:timeSendQueue=0x0,sendIdQueue:sendIdQueue=null,timeInactiveMessage:timeInactiveMessage=0x0,inactiveMessage:_0xed871f,ratingMessage:_0x146b8,maxUseBotQueuesNPS:_0x563b12,expiresTicketNPS:expiresTicketNPS=0x0,whenExpiresTicket:_0x1d5ab1,expiresInactiveMessage:_0x117b57,groupAsTicket:_0x7339f2,importOldMessages:_0xf9046c,importRecentMessages:_0x4ea7bf,closedTicketsPostImported:_0x5258b8,importOldMessagesGroups:_0x2b058c,timeCreateNewTicket:timeCreateNewTicket=null,integrationId:_0x6b9752,schedules:_0x9a0b6a,promptId:_0x4ee516,requestQR:requestQR=![]}=_0x95b0fc;try{await _0xc56bf2[_0x13bf8d(0xf8)]({'name':_0x347b3e,'status':_0x3b72c9,'isDefault':_0x49f918});}catch(_0x3e662b){throw new AppError_1['default'](_0x3e662b[_0x13bf8d(0xe7)]);}if(queueIds[_0x13bf8d(0xe3)]>0x1&&!_0x5d4055)throw new AppError_1[(_0x13bf8d(0xf5))]('ERR_WAPP_GREETING_REQUIRED');let _0x37b7d4=null;_0x49f918&&(_0x37b7d4=await Whatsapp_1['default']['findOne']({'where':{'isDefault':!![],'id':{[sequelize_1['Op']['not']]:_0x43609a}}}),_0x37b7d4&&await _0x37b7d4[_0x13bf8d(0xe4)]({'isDefault':![]}));const _0x306f1c=await(0x0,ShowWhatsAppServiceAdmin_1[_0x13bf8d(0xf5)])(_0x43609a);return await _0x306f1c[_0x13bf8d(0xe4)]({'name':_0x347b3e,'status':_0x3b72c9,'session':_0x4d1936,'greetingMessage':_0x5d4055,'complationMessage':_0x146f45,'outOfHoursMessage':_0x4ee02a,'isDefault':_0x49f918,'companyId':_0x4488ab,'token':_0x4107da,'maxUseBotQueues':maxUseBotQueues||0x0,'timeUseBotQueues':timeUseBotQueues||0x0,'expiresTicket':expiresTicket||0x0,'allowGroup':_0x350049,'timeSendQueue':timeSendQueue,'sendIdQueue':sendIdQueue,'timeInactiveMessage':timeInactiveMessage,'inactiveMessage':_0xed871f,'ratingMessage':_0x146b8,'maxUseBotQueuesNPS':_0x563b12,'expiresTicketNPS':expiresTicketNPS,'whenExpiresTicket':_0x1d5ab1,'expiresInactiveMessage':_0x117b57,'groupAsTicket':_0x7339f2,'importOldMessages':_0xf9046c,'importRecentMessages':_0x4ea7bf,'closedTicketsPostImported':_0x5258b8,'importOldMessagesGroups':_0x2b058c,'timeCreateNewTicket':timeCreateNewTicket,'integrationId':_0x6b9752,'schedules':_0x9a0b6a,'promptId':_0x4ee516}),!requestQR&&await(0x0,AssociateWhatsappQueue_1[_0x13bf8d(0xf5)])(_0x306f1c,queueIds),{'whatsapp':_0x306f1c,'oldDefaultWhatsapp':_0x37b7d4};};exports[a638_0xdae56(0xf5)]=UpdateWhatsAppServiceAdmin;