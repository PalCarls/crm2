'use strict';const a578_0x438d5a=a578_0x22f4;(function(_0x28fc63,_0x3b490d){const _0x3382e5=a578_0x22f4,_0x1a590a=_0x28fc63();while(!![]){try{const _0x4f6062=parseInt(_0x3382e5(0xe8))/0x1+-parseInt(_0x3382e5(0xc8))/0x2*(parseInt(_0x3382e5(0xe7))/0x3)+parseInt(_0x3382e5(0xdb))/0x4+parseInt(_0x3382e5(0xdd))/0x5*(parseInt(_0x3382e5(0xcb))/0x6)+parseInt(_0x3382e5(0xcf))/0x7*(-parseInt(_0x3382e5(0xda))/0x8)+parseInt(_0x3382e5(0xe6))/0x9*(parseInt(_0x3382e5(0xd3))/0xa)+-parseInt(_0x3382e5(0xe1))/0xb;if(_0x4f6062===_0x3b490d)break;else _0x1a590a['push'](_0x1a590a['shift']());}catch(_0x47e03e){_0x1a590a['push'](_0x1a590a['shift']());}}}(a578_0x4797,0xa1b32));function a578_0x4797(){const _0x381208=['599756VXchNz','greetingMediaAttachment','../../errors/AppError','2YNaFja','files','mediaUpload','6HHdWlK','json','status','save','7DJzfsV','send','path','__esModule','960GbPoJB','../../models/Whatsapp','unlinkSync','findByPk','Arquivo\x20excluÃ­do','default','defineProperty','50976ObStGK','1508152piRmOl','existsSync','5190740yszNSE','lodash','deleteMedia','head','20353366SoMUjL','filename','message','params','resolve','89667khqqTO','1357170aThqLO'];a578_0x4797=function(){return _0x381208;};return a578_0x4797();}var __importDefault=this&&this['__importDefault']||function(_0x2021b4){const _0x50e2bb=a578_0x22f4;return _0x2021b4&&_0x2021b4[_0x50e2bb(0xd2)]?_0x2021b4:{'default':_0x2021b4};};Object[a578_0x438d5a(0xd9)](exports,a578_0x438d5a(0xd2),{'value':!![]}),exports[a578_0x438d5a(0xdf)]=exports[a578_0x438d5a(0xca)]=void 0x0;const lodash_1=require(a578_0x438d5a(0xde)),AppError_1=__importDefault(require(a578_0x438d5a(0xc7))),Whatsapp_1=__importDefault(require(a578_0x438d5a(0xd4))),path_1=__importDefault(require(a578_0x438d5a(0xd1))),fs_1=__importDefault(require('fs')),mediaUpload=async(_0x2637c4,_0x402063)=>{const _0x46f62f=a578_0x438d5a,{whatsappId:_0x436842}=_0x2637c4[_0x46f62f(0xe4)],_0x5c449d=_0x2637c4[_0x46f62f(0xc9)],_0x3a39de=(0x0,lodash_1[_0x46f62f(0xe0)])(_0x5c449d);try{const _0x250a7a=await Whatsapp_1[_0x46f62f(0xd8)]['findByPk'](_0x436842);return _0x250a7a['greetingMediaAttachment']=_0x3a39de[_0x46f62f(0xe2)],await _0x250a7a[_0x46f62f(0xce)](),_0x402063[_0x46f62f(0xcd)](0xc8)[_0x46f62f(0xcc)]({'mensagem':'Arquivo\x20adicionado!'});}catch(_0x445bbd){throw new AppError_1['default'](_0x445bbd['message']);}};exports[a578_0x438d5a(0xca)]=mediaUpload;function a578_0x22f4(_0x4fa23b,_0x1bce21){const _0x479782=a578_0x4797();return a578_0x22f4=function(_0x22f479,_0x11cbcc){_0x22f479=_0x22f479-0xc6;let _0xb1e88b=_0x479782[_0x22f479];return _0xb1e88b;},a578_0x22f4(_0x4fa23b,_0x1bce21);}const deleteMedia=async(_0x5620a2,_0x814f1b)=>{const _0x429441=a578_0x438d5a,{whatsappId:_0x38eb9e}=_0x5620a2[_0x429441(0xe4)];try{const _0x4ab903=await Whatsapp_1[_0x429441(0xd8)][_0x429441(0xd6)](_0x38eb9e),_0x147e65=path_1[_0x429441(0xd8)][_0x429441(0xe5)]('public',_0x4ab903['greetingMediaAttachment']),_0x277cf1=fs_1['default'][_0x429441(0xdc)](_0x147e65);return _0x277cf1&&fs_1['default'][_0x429441(0xd5)](_0x147e65),_0x4ab903[_0x429441(0xc6)]=null,await _0x4ab903['save'](),_0x814f1b[_0x429441(0xd0)]({'message':_0x429441(0xd7)});}catch(_0x29fd43){throw new AppError_1[(_0x429441(0xd8))](_0x29fd43[_0x429441(0xe3)]);}};exports[a578_0x438d5a(0xdf)]=deleteMedia;