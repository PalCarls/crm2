<<<<<<< HEAD
'use strict';const a444_0x4cc5c4=a444_0x1de5;function a444_0x2bb1(){const _0x18854e=['default','error','Sheets','4157615WYIQke','número','139820NvMNyp','Nome','save','Número','isWhatsappValid','sheet_to_json','numero','map','path','email','Número\x20de\x20contato\x20inválido:\x20','2264DSSAfg','contactListId','e-mail','87417FHESCQ','15faLpma','2569qmfLab','xlsx','Numero','../WbotServices/CheckNumber','lodash','721150Hzzjju','push','values','188phpElK','defineProperty','companyId','number','1161KzPBii','E-mail','__esModule','2838zrIAiF','Email','has','logger','readFile','606HPqFuO'];a444_0x2bb1=function(){return _0x18854e;};return a444_0x2bb1();}(function(_0x2822c8,_0x35a6e7){const _0x373b95=a444_0x1de5,_0xaedd75=_0x2822c8();while(!![]){try{const _0xc7c79b=-parseInt(_0x373b95(0x1bf))/0x1*(parseInt(_0x373b95(0x1cb))/0x2)+-parseInt(_0x373b95(0x1b5))/0x3+-parseInt(_0x373b95(0x1d1))/0x4*(parseInt(_0x373b95(0x1b6))/0x5)+parseInt(_0x373b95(0x1c6))/0x6*(-parseInt(_0x373b95(0x1b7))/0x7)+parseInt(_0x373b95(0x1b2))/0x8*(parseInt(_0x373b95(0x1c3))/0x9)+parseInt(_0x373b95(0x1bc))/0xa+parseInt(_0x373b95(0x1cf))/0xb;if(_0xc7c79b===_0x35a6e7)break;else _0xaedd75['push'](_0xaedd75['shift']());}catch(_0x2a87be){_0xaedd75['push'](_0xaedd75['shift']());}}}(a444_0x2bb1,0x1dcac));var __importDefault=this&&this['__importDefault']||function(_0x16acd4){const _0x5ec2ce=a444_0x1de5;return _0x16acd4&&_0x16acd4[_0x5ec2ce(0x1c5)]?_0x16acd4:{'default':_0x16acd4};};function a444_0x1de5(_0x531a44,_0x59d1d2){const _0x2bb1da=a444_0x2bb1();return a444_0x1de5=function(_0x1de5dc,_0x55d0bf){_0x1de5dc=_0x1de5dc-0x1b2;let _0x4b97ab=_0x2bb1da[_0x1de5dc];return _0x4b97ab;},a444_0x1de5(_0x531a44,_0x59d1d2);}Object[a444_0x4cc5c4(0x1c0)](exports,a444_0x4cc5c4(0x1c5),{'value':!![]}),exports['ImportContacts']=void 0x0;const lodash_1=require(a444_0x4cc5c4(0x1bb)),xlsx_1=__importDefault(require(a444_0x4cc5c4(0x1b8))),lodash_2=require(a444_0x4cc5c4(0x1bb)),ContactListItem_1=__importDefault(require('../../models/ContactListItem')),CheckNumber_1=__importDefault(require(a444_0x4cc5c4(0x1ba))),logger_1=require('../../utils/logger');async function ImportContacts(_0x59de9b,_0x3fb581,_0xb41216){const _0x108da5=a444_0x4cc5c4,_0x29d0de=xlsx_1[_0x108da5(0x1cc)][_0x108da5(0x1ca)](_0xb41216?.[_0x108da5(0x1d9)]),_0xc43a3b=(0x0,lodash_1['head'])(Object[_0x108da5(0x1be)](_0x29d0de[_0x108da5(0x1ce)])),_0x20dea0=xlsx_1[_0x108da5(0x1cc)]['utils'][_0x108da5(0x1d6)](_0xc43a3b,{'header':0x0}),_0x2e3a85=_0x20dea0[_0x108da5(0x1d8)](_0x213f35=>{const _0x4aa27f=_0x108da5;let _0x4c1890='',_0x5bed49='',_0x572538='';return((0x0,lodash_2[_0x4aa27f(0x1c8)])(_0x213f35,'nome')||(0x0,lodash_2['has'])(_0x213f35,_0x4aa27f(0x1d2)))&&(_0x4c1890=_0x213f35['nome']||_0x213f35[_0x4aa27f(0x1d2)]),((0x0,lodash_2[_0x4aa27f(0x1c8)])(_0x213f35,_0x4aa27f(0x1d7))||(0x0,lodash_2['has'])(_0x213f35,_0x4aa27f(0x1d0))||(0x0,lodash_2[_0x4aa27f(0x1c8)])(_0x213f35,_0x4aa27f(0x1b9))||(0x0,lodash_2['has'])(_0x213f35,_0x4aa27f(0x1d4)))&&(_0x5bed49=_0x213f35[_0x4aa27f(0x1d7)]||_0x213f35[_0x4aa27f(0x1d0)]||_0x213f35[_0x4aa27f(0x1b9)]||_0x213f35[_0x4aa27f(0x1d4)],_0x5bed49=(''+_0x5bed49)['replace'](/\D/g,'')),((0x0,lodash_2['has'])(_0x213f35,_0x4aa27f(0x1da))||(0x0,lodash_2[_0x4aa27f(0x1c8)])(_0x213f35,_0x4aa27f(0x1b4))||(0x0,lodash_2[_0x4aa27f(0x1c8)])(_0x213f35,_0x4aa27f(0x1c7))||(0x0,lodash_2[_0x4aa27f(0x1c8)])(_0x213f35,_0x4aa27f(0x1c4)))&&(_0x572538=_0x213f35['email']||_0x213f35['e-mail']||_0x213f35[_0x4aa27f(0x1c7)]||_0x213f35[_0x4aa27f(0x1c4)]),{'name':_0x4c1890,'number':_0x5bed49,'email':_0x572538,'contactListId':_0x59de9b,'companyId':_0x3fb581};}),_0x51ea5e=[];for(const _0xf31e26 of _0x2e3a85){const [_0x891a08,_0x1302e3]=await ContactListItem_1[_0x108da5(0x1cc)]['findOrCreate']({'where':{'number':''+_0xf31e26['number'],'contactListId':_0xf31e26[_0x108da5(0x1b3)],'companyId':_0xf31e26[_0x108da5(0x1c1)]},'defaults':_0xf31e26});_0x1302e3&&_0x51ea5e[_0x108da5(0x1bd)](_0x891a08);}if(_0x51ea5e)for(let _0x6ac9f of _0x51ea5e){try{const _0x101a31=await(0x0,CheckNumber_1[_0x108da5(0x1cc)])(_0x6ac9f['number'],_0x3fb581);_0x6ac9f[_0x108da5(0x1d5)]=_0x101a31?!![]:![];const _0x55e7eb=_0x101a31;_0x6ac9f[_0x108da5(0x1c2)]=_0x55e7eb,await _0x6ac9f[_0x108da5(0x1d3)]();}catch(_0x1e9a27){logger_1[_0x108da5(0x1c9)][_0x108da5(0x1cd)](_0x108da5(0x1db)+_0x6ac9f['number']);}}return _0x51ea5e;}exports['ImportContacts']=ImportContacts;
=======
'use strict';const a444_0x4ce22b=a444_0x2eea;(function(_0xde3ce3,_0x2fa8e4){const _0x5c03d4=a444_0x2eea,_0x2210a1=_0xde3ce3();while(!![]){try{const _0x259c58=parseInt(_0x5c03d4(0x1bf))/0x1*(parseInt(_0x5c03d4(0x1bd))/0x2)+-parseInt(_0x5c03d4(0x1bc))/0x3+-parseInt(_0x5c03d4(0x1a2))/0x4+-parseInt(_0x5c03d4(0x1c1))/0x5+parseInt(_0x5c03d4(0x19d))/0x6+parseInt(_0x5c03d4(0x1b2))/0x7*(parseInt(_0x5c03d4(0x1b8))/0x8)+-parseInt(_0x5c03d4(0x1b6))/0x9;if(_0x259c58===_0x2fa8e4)break;else _0x2210a1['push'](_0x2210a1['shift']());}catch(_0x2c4078){_0x2210a1['push'](_0x2210a1['shift']());}}}(a444_0x58d0,0x8e5ad));var __importDefault=this&&this['__importDefault']||function(_0x3dddda){return _0x3dddda&&_0x3dddda['__esModule']?_0x3dddda:{'default':_0x3dddda};};Object[a444_0x4ce22b(0x1ae)](exports,a444_0x4ce22b(0x19e),{'value':!![]}),exports[a444_0x4ce22b(0x1aa)]=void 0x0;function a444_0x2eea(_0x396c88,_0x1a9ec9){const _0x58d0d3=a444_0x58d0();return a444_0x2eea=function(_0x2eea6,_0x95c7de){_0x2eea6=_0x2eea6-0x19b;let _0x34f581=_0x58d0d3[_0x2eea6];return _0x34f581;},a444_0x2eea(_0x396c88,_0x1a9ec9);}const lodash_1=require('lodash'),xlsx_1=__importDefault(require(a444_0x4ce22b(0x1b1))),lodash_2=require(a444_0x4ce22b(0x1a3)),ContactListItem_1=__importDefault(require('../../models/ContactListItem')),CheckNumber_1=__importDefault(require(a444_0x4ce22b(0x1b4))),logger_1=require('../../utils/logger');async function ImportContacts(_0xe482cf,_0x581e9f,_0x47f4ac){const _0x1dc453=a444_0x4ce22b,_0x12f61d=xlsx_1[_0x1dc453(0x1c3)]['readFile'](_0x47f4ac?.[_0x1dc453(0x1b7)]),_0x14789e=(0x0,lodash_1[_0x1dc453(0x1ad)])(Object[_0x1dc453(0x1ac)](_0x12f61d['Sheets'])),_0x2d50e0=xlsx_1['default'][_0x1dc453(0x1be)][_0x1dc453(0x19b)](_0x14789e,{'header':0x0}),_0x43becd=_0x2d50e0[_0x1dc453(0x1c0)](_0x3c89c9=>{const _0xd34ded=_0x1dc453;let _0x28e727='',_0xeefb5c='',_0xd4f2a4='';return((0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1ab))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,'Nome'))&&(_0x28e727=_0x3c89c9['nome']||_0x3c89c9[_0xd34ded(0x1bb)]),((0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x19f))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1b0))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1a8))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1c2)))&&(_0xeefb5c=_0x3c89c9['numero']||_0x3c89c9[_0xd34ded(0x1b0)]||_0x3c89c9[_0xd34ded(0x1a8)]||_0x3c89c9[_0xd34ded(0x1c2)],_0xeefb5c=(''+_0xeefb5c)[_0xd34ded(0x1c5)](/\D/g,'')),((0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1a1))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1a7))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1c4))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1ba)))&&(_0xd4f2a4=_0x3c89c9[_0xd34ded(0x1a1)]||_0x3c89c9[_0xd34ded(0x1a7)]||_0x3c89c9[_0xd34ded(0x1c4)]||_0x3c89c9['E-mail']),{'name':_0x28e727,'number':_0xeefb5c,'email':_0xd4f2a4,'contactListId':_0xe482cf,'companyId':_0x581e9f};}),_0x22b3a0=[];for(const _0x41979b of _0x43becd){const [_0x478555,_0x56ced8]=await ContactListItem_1[_0x1dc453(0x1c3)][_0x1dc453(0x19c)]({'where':{'number':''+_0x41979b['number'],'contactListId':_0x41979b[_0x1dc453(0x1b3)],'companyId':_0x41979b[_0x1dc453(0x1a5)]},'defaults':_0x41979b});_0x56ced8&&_0x22b3a0[_0x1dc453(0x1b5)](_0x478555);}if(_0x22b3a0)for(let _0x40ba57 of _0x22b3a0){try{const _0x4b87f8=await(0x0,CheckNumber_1[_0x1dc453(0x1c3)])(_0x40ba57[_0x1dc453(0x1a6)],_0x581e9f);_0x40ba57['isWhatsappValid']=_0x4b87f8?!![]:![];const _0x486d40=_0x4b87f8;_0x40ba57[_0x1dc453(0x1a6)]=_0x486d40,await _0x40ba57[_0x1dc453(0x1a0)]();}catch(_0x2e41b9){logger_1[_0x1dc453(0x1a9)][_0x1dc453(0x1af)](_0x1dc453(0x1a4)+_0x40ba57[_0x1dc453(0x1a6)]);}}return _0x22b3a0;}function a444_0x58d0(){const _0x228351=['has','E-mail','Nome','2631000WPWSob','2588CImkBP','utils','814nOjsvw','map','1906435WZDICh','Número','default','Email','replace','sheet_to_json','findOrCreate','3176808kUScVf','__esModule','numero','save','email','3133160pCMLcD','lodash','Número\x20de\x20contato\x20inválido:\x20','companyId','number','e-mail','Numero','logger','ImportContacts','nome','values','head','defineProperty','error','número','xlsx','7qVTPxm','contactListId','../WbotServices/CheckNumber','push','939996dFAowF','path','9170576FLrMwW'];a444_0x58d0=function(){return _0x228351;};return a444_0x58d0();}exports[a444_0x4ce22b(0x1aa)]=ImportContacts;
>>>>>>> ab722bfbcf394d74dd0b99a984c0dcf6ffbcff7f
