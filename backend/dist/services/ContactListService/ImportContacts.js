'use strict';function a408_0x1baa(_0x4569a4,_0x2a0dd2){const _0x12ceed=a408_0x12ce();return a408_0x1baa=function(_0x1baa55,_0x4eb24b){_0x1baa55=_0x1baa55-0xaa;let _0x24f790=_0x12ceed[_0x1baa55];return _0x24f790;},a408_0x1baa(_0x4569a4,_0x2a0dd2);}const a408_0x27ac5b=a408_0x1baa;(function(_0x57081c,_0x2e5972){const _0x2febaf=a408_0x1baa,_0x3b2aef=_0x57081c();while(!![]){try{const _0x403749=parseInt(_0x2febaf(0xb3))/0x1*(parseInt(_0x2febaf(0xc1))/0x2)+-parseInt(_0x2febaf(0xc8))/0x3*(-parseInt(_0x2febaf(0xd0))/0x4)+parseInt(_0x2febaf(0xd2))/0x5+parseInt(_0x2febaf(0xbf))/0x6*(parseInt(_0x2febaf(0xb6))/0x7)+-parseInt(_0x2febaf(0xd5))/0x8*(parseInt(_0x2febaf(0xaa))/0x9)+-parseInt(_0x2febaf(0xbd))/0xa+parseInt(_0x2febaf(0xc4))/0xb;if(_0x403749===_0x2e5972)break;else _0x3b2aef['push'](_0x3b2aef['shift']());}catch(_0x1e9ee2){_0x3b2aef['push'](_0x3b2aef['shift']());}}}(a408_0x12ce,0xecb48));var __importDefault=this&&this[a408_0x27ac5b(0xaf)]||function(_0x575c43){const _0x446b13=a408_0x27ac5b;return _0x575c43&&_0x575c43[_0x446b13(0xb8)]?_0x575c43:{'default':_0x575c43};};Object[a408_0x27ac5b(0xab)](exports,a408_0x27ac5b(0xb8),{'value':!![]}),exports['ImportContacts']=void 0x0;const lodash_1=require(a408_0x27ac5b(0xcc)),xlsx_1=__importDefault(require(a408_0x27ac5b(0xc7))),lodash_2=require('lodash'),ContactListItem_1=__importDefault(require('../../models/ContactListItem')),CheckNumber_1=__importDefault(require(a408_0x27ac5b(0xca))),logger_1=require(a408_0x27ac5b(0xb0));async function ImportContacts(_0x2fceb1,_0x1114c2,_0x42658e){const _0x3bf073=a408_0x27ac5b,_0x267781=xlsx_1['default'][_0x3bf073(0xc6)](_0x42658e?.[_0x3bf073(0xbb)]),_0x3e1085=(0x0,lodash_1['head'])(Object['values'](_0x267781[_0x3bf073(0xb9)])),_0x3e7065=xlsx_1['default'][_0x3bf073(0xbc)][_0x3bf073(0xc0)](_0x3e1085,{'header':0x0}),_0x53c2a3=_0x3e7065['map'](_0x3e8e85=>{const _0x3253c3=_0x3bf073;let _0x5169a0='',_0x58d4cd='',_0x2873cc='';return((0x0,lodash_2[_0x3253c3(0xae)])(_0x3e8e85,_0x3253c3(0xce))||(0x0,lodash_2[_0x3253c3(0xae)])(_0x3e8e85,_0x3253c3(0xbe)))&&(_0x5169a0=_0x3e8e85[_0x3253c3(0xce)]||_0x3e8e85['Nome']),((0x0,lodash_2[_0x3253c3(0xae)])(_0x3e8e85,_0x3253c3(0xcf))||(0x0,lodash_2[_0x3253c3(0xae)])(_0x3e8e85,_0x3253c3(0xb7))||(0x0,lodash_2[_0x3253c3(0xae)])(_0x3e8e85,_0x3253c3(0xb1))||(0x0,lodash_2['has'])(_0x3e8e85,'Número'))&&(_0x58d4cd=_0x3e8e85[_0x3253c3(0xcf)]||_0x3e8e85[_0x3253c3(0xb7)]||_0x3e8e85[_0x3253c3(0xb1)]||_0x3e8e85[_0x3253c3(0xb4)],_0x58d4cd=(''+_0x58d4cd)[_0x3253c3(0xd4)](/\D/g,'')),((0x0,lodash_2[_0x3253c3(0xae)])(_0x3e8e85,_0x3253c3(0xcd))||(0x0,lodash_2[_0x3253c3(0xae)])(_0x3e8e85,_0x3253c3(0xba))||(0x0,lodash_2[_0x3253c3(0xae)])(_0x3e8e85,_0x3253c3(0xad))||(0x0,lodash_2['has'])(_0x3e8e85,_0x3253c3(0xc5)))&&(_0x2873cc=_0x3e8e85[_0x3253c3(0xcd)]||_0x3e8e85[_0x3253c3(0xba)]||_0x3e8e85[_0x3253c3(0xad)]||_0x3e8e85[_0x3253c3(0xc5)]),{'name':_0x5169a0,'number':_0x58d4cd,'email':_0x2873cc,'contactListId':_0x2fceb1,'companyId':_0x1114c2};}),_0x9e524c=[];for(const _0x5bd03a of _0x53c2a3){const [_0x34645a,_0x155d71]=await ContactListItem_1[_0x3bf073(0xcb)][_0x3bf073(0xb5)]({'where':{'number':''+_0x5bd03a[_0x3bf073(0xd3)],'contactListId':_0x5bd03a[_0x3bf073(0xd1)],'companyId':_0x5bd03a[_0x3bf073(0xc9)]},'defaults':_0x5bd03a});_0x155d71&&_0x9e524c[_0x3bf073(0xb2)](_0x34645a);}if(_0x9e524c)for(let _0x4ec559 of _0x9e524c){try{const _0xafebdf=await(0x0,CheckNumber_1[_0x3bf073(0xcb)])(_0x4ec559[_0x3bf073(0xd3)],_0x1114c2);_0x4ec559['isWhatsappValid']=_0xafebdf?!![]:![];const _0x27ea75=_0xafebdf;_0x4ec559['number']=_0x27ea75,await _0x4ec559[_0x3bf073(0xac)]();}catch(_0x5f5518){logger_1[_0x3bf073(0xc3)]['error']('Número\x20de\x20contato\x20inválido:\x20'+_0x4ec559['number']);}}return _0x9e524c;}exports[a408_0x27ac5b(0xc2)]=ImportContacts;function a408_0x12ce(){const _0x26a81f=['../WbotServices/CheckNumber','default','lodash','email','nome','numero','4ZEzGfO','contactListId','8896495QYLwuE','number','replace','16DhOrDw','7911693cqvZjq','defineProperty','save','Email','has','__importDefault','../../utils/logger','Numero','push','989tpwdqK','Número','findOrCreate','7HdTvcj','número','__esModule','Sheets','e-mail','path','utils','15656010IMDynR','Nome','2111334cvQozj','sheet_to_json','3294uVVIqT','ImportContacts','logger','4938054bRZhwG','E-mail','readFile','xlsx','252942rZTnur','companyId'];a408_0x12ce=function(){return _0x26a81f;};return a408_0x12ce();}