'use strict';const a422_0x17cbad=a422_0x81e7;(function(_0x5215cb,_0x4faacc){const _0x449e36=a422_0x81e7,_0x48fc86=_0x5215cb();while(!![]){try{const _0x5c69d5=parseInt(_0x449e36(0x148))/0x1+-parseInt(_0x449e36(0x142))/0x2+parseInt(_0x449e36(0x147))/0x3+parseInt(_0x449e36(0x14d))/0x4*(parseInt(_0x449e36(0x136))/0x5)+-parseInt(_0x449e36(0x13d))/0x6+parseInt(_0x449e36(0x154))/0x7+-parseInt(_0x449e36(0x141))/0x8;if(_0x5c69d5===_0x4faacc)break;else _0x48fc86['push'](_0x48fc86['shift']());}catch(_0x50e475){_0x48fc86['push'](_0x48fc86['shift']());}}}(a422_0x1c47,0xe677c));var __importDefault=this&&this[a422_0x17cbad(0x146)]||function(_0x4c2056){const _0x22961f=a422_0x17cbad;return _0x4c2056&&_0x4c2056[_0x22961f(0x15c)]?_0x4c2056:{'default':_0x4c2056};};Object['defineProperty'](exports,a422_0x17cbad(0x15c),{'value':!![]}),exports[a422_0x17cbad(0x14f)]=void 0x0;const lodash_1=require(a422_0x17cbad(0x157)),xlsx_1=__importDefault(require(a422_0x17cbad(0x149))),lodash_2=require(a422_0x17cbad(0x157)),ContactListItem_1=__importDefault(require('../../models/ContactListItem')),CheckNumber_1=__importDefault(require(a422_0x17cbad(0x140))),logger_1=require(a422_0x17cbad(0x14b));function a422_0x1c47(){const _0x14e140=['numero','../WbotServices/CheckNumber','16410344PSoXtr','22386ijGhwJ','Número\x20de\x20contato\x20inválido:\x20','map','E-mail','__importDefault','2310618MVWbiu','394976mXMuEz','xlsx','Numero','../../utils/logger','isWhatsappValid','15108XUUCmH','e-mail','ImportContacts','has','findOrCreate','Email','push','12866063HTjxEr','save','email','lodash','Número','nome','number','values','__esModule','default','1075HmPMpi','replace','número','readFile','path','logger','utils','4852584tVwfZB','sheet_to_json'];a422_0x1c47=function(){return _0x14e140;};return a422_0x1c47();}async function ImportContacts(_0x367fd7,_0x3429fd,_0x158b2a){const _0x5b7b18=a422_0x17cbad,_0x476064=xlsx_1[_0x5b7b18(0x15d)][_0x5b7b18(0x139)](_0x158b2a?.[_0x5b7b18(0x13a)]),_0x20f6ee=(0x0,lodash_1['head'])(Object[_0x5b7b18(0x15b)](_0x476064['Sheets'])),_0x18ddd9=xlsx_1[_0x5b7b18(0x15d)][_0x5b7b18(0x13c)][_0x5b7b18(0x13e)](_0x20f6ee,{'header':0x0}),_0x5d864d=_0x18ddd9[_0x5b7b18(0x144)](_0x36d056=>{const _0x26cda5=_0x5b7b18;let _0x55da9d='',_0x5174b3='',_0x860d98='';return((0x0,lodash_2[_0x26cda5(0x150)])(_0x36d056,_0x26cda5(0x159))||(0x0,lodash_2[_0x26cda5(0x150)])(_0x36d056,'Nome'))&&(_0x55da9d=_0x36d056[_0x26cda5(0x159)]||_0x36d056['Nome']),((0x0,lodash_2[_0x26cda5(0x150)])(_0x36d056,_0x26cda5(0x13f))||(0x0,lodash_2[_0x26cda5(0x150)])(_0x36d056,_0x26cda5(0x138))||(0x0,lodash_2[_0x26cda5(0x150)])(_0x36d056,'Numero')||(0x0,lodash_2[_0x26cda5(0x150)])(_0x36d056,'Número'))&&(_0x5174b3=_0x36d056[_0x26cda5(0x13f)]||_0x36d056[_0x26cda5(0x138)]||_0x36d056[_0x26cda5(0x14a)]||_0x36d056[_0x26cda5(0x158)],_0x5174b3=(''+_0x5174b3)[_0x26cda5(0x137)](/\D/g,'')),((0x0,lodash_2['has'])(_0x36d056,_0x26cda5(0x156))||(0x0,lodash_2[_0x26cda5(0x150)])(_0x36d056,_0x26cda5(0x14e))||(0x0,lodash_2['has'])(_0x36d056,'Email')||(0x0,lodash_2[_0x26cda5(0x150)])(_0x36d056,'E-mail'))&&(_0x860d98=_0x36d056['email']||_0x36d056['e-mail']||_0x36d056[_0x26cda5(0x152)]||_0x36d056[_0x26cda5(0x145)]),{'name':_0x55da9d,'number':_0x5174b3,'email':_0x860d98,'contactListId':_0x367fd7,'companyId':_0x3429fd};}),_0x506e07=[];for(const _0x510ff6 of _0x5d864d){const [_0x3cd364,_0x4fa46c]=await ContactListItem_1[_0x5b7b18(0x15d)][_0x5b7b18(0x151)]({'where':{'number':''+_0x510ff6[_0x5b7b18(0x15a)],'contactListId':_0x510ff6['contactListId'],'companyId':_0x510ff6['companyId']},'defaults':_0x510ff6});_0x4fa46c&&_0x506e07[_0x5b7b18(0x153)](_0x3cd364);}if(_0x506e07)for(let _0x364a46 of _0x506e07){try{const _0x214d56=await(0x0,CheckNumber_1[_0x5b7b18(0x15d)])(_0x364a46[_0x5b7b18(0x15a)],_0x3429fd);_0x364a46[_0x5b7b18(0x14c)]=_0x214d56?!![]:![];const _0x35a694=_0x214d56;_0x364a46[_0x5b7b18(0x15a)]=_0x35a694,await _0x364a46[_0x5b7b18(0x155)]();}catch(_0x2ccf48){logger_1[_0x5b7b18(0x13b)]['error'](_0x5b7b18(0x143)+_0x364a46[_0x5b7b18(0x15a)]);}}return _0x506e07;}function a422_0x81e7(_0x3d233e,_0x5b3c45){const _0x1c47bb=a422_0x1c47();return a422_0x81e7=function(_0x81e7af,_0x1c763f){_0x81e7af=_0x81e7af-0x136;let _0x55586c=_0x1c47bb[_0x81e7af];return _0x55586c;},a422_0x81e7(_0x3d233e,_0x5b3c45);}exports[a422_0x17cbad(0x14f)]=ImportContacts;