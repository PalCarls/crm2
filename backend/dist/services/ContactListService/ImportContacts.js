'use strict';const a427_0x7c8f7=a427_0x22ea;(function(_0x46baca,_0x2e6287){const _0x52c7f3=a427_0x22ea,_0x1943ce=_0x46baca();while(!![]){try{const _0x24f25d=-parseInt(_0x52c7f3(0x12e))/0x1+-parseInt(_0x52c7f3(0x12c))/0x2+-parseInt(_0x52c7f3(0x107))/0x3+-parseInt(_0x52c7f3(0x106))/0x4*(-parseInt(_0x52c7f3(0x114))/0x5)+parseInt(_0x52c7f3(0x116))/0x6+parseInt(_0x52c7f3(0x103))/0x7*(-parseInt(_0x52c7f3(0x11c))/0x8)+parseInt(_0x52c7f3(0x10f))/0x9*(parseInt(_0x52c7f3(0x110))/0xa);if(_0x24f25d===_0x2e6287)break;else _0x1943ce['push'](_0x1943ce['shift']());}catch(_0x467019){_0x1943ce['push'](_0x1943ce['shift']());}}}(a427_0x4655,0x33f51));var __importDefault=this&&this[a427_0x7c8f7(0x12d)]||function(_0x235c91){const _0x184903=a427_0x7c8f7;return _0x235c91&&_0x235c91[_0x184903(0x119)]?_0x235c91:{'default':_0x235c91};};Object[a427_0x7c8f7(0x12a)](exports,a427_0x7c8f7(0x119),{'value':!![]}),exports['ImportContacts']=void 0x0;const lodash_1=require(a427_0x7c8f7(0x128)),xlsx_1=__importDefault(require(a427_0x7c8f7(0x112))),lodash_2=require(a427_0x7c8f7(0x128)),ContactListItem_1=__importDefault(require('../../models/ContactListItem')),CheckNumber_1=__importDefault(require(a427_0x7c8f7(0x108))),logger_1=require('../../utils/logger');function a427_0x22ea(_0x38dbf4,_0x1bfac5){const _0x465559=a427_0x4655();return a427_0x22ea=function(_0x22ea83,_0x11903a){_0x22ea83=_0x22ea83-0x103;let _0x59a964=_0x465559[_0x22ea83];return _0x59a964;},a427_0x22ea(_0x38dbf4,_0x1bfac5);}function a427_0x4655(){const _0x157601=['companyId','388246iRpVrQ','__importDefault','60026PpiPdc','sheet_to_json','numero','7ljarFx','Número','ImportContacts','238516EhvNvM','898446tVEbPY','../WbotServices/CheckNumber','path','has','error','Nome','email','nome','6687PCZoWf','9570YIuGLh','E-mail','xlsx','number','25NRhhia','número','599076aCvTKB','head','Sheets','__esModule','findOrCreate','contactListId','2740752Egntam','e-mail','Número\x20de\x20contato\x20inválido:\x20','isWhatsappValid','logger','values','readFile','Email','default','map','utils','save','lodash','push','defineProperty'];a427_0x4655=function(){return _0x157601;};return a427_0x4655();}async function ImportContacts(_0x16ba61,_0x1f6654,_0x3f3db4){const _0x350b6a=a427_0x7c8f7,_0x3161eb=xlsx_1['default'][_0x350b6a(0x122)](_0x3f3db4?.[_0x350b6a(0x109)]),_0x242704=(0x0,lodash_1[_0x350b6a(0x117)])(Object[_0x350b6a(0x121)](_0x3161eb[_0x350b6a(0x118)])),_0x4568cb=xlsx_1[_0x350b6a(0x124)][_0x350b6a(0x126)][_0x350b6a(0x12f)](_0x242704,{'header':0x0}),_0x47f7e5=_0x4568cb[_0x350b6a(0x125)](_0x408135=>{const _0x524733=_0x350b6a;let _0x32820a='',_0x162fb1='',_0x47145f='';return((0x0,lodash_2['has'])(_0x408135,_0x524733(0x10e))||(0x0,lodash_2['has'])(_0x408135,_0x524733(0x10c)))&&(_0x32820a=_0x408135['nome']||_0x408135['Nome']),((0x0,lodash_2[_0x524733(0x10a)])(_0x408135,_0x524733(0x130))||(0x0,lodash_2[_0x524733(0x10a)])(_0x408135,_0x524733(0x115))||(0x0,lodash_2['has'])(_0x408135,'Numero')||(0x0,lodash_2[_0x524733(0x10a)])(_0x408135,_0x524733(0x104)))&&(_0x162fb1=_0x408135['numero']||_0x408135[_0x524733(0x115)]||_0x408135['Numero']||_0x408135['Número'],_0x162fb1=(''+_0x162fb1)['replace'](/\D/g,'')),((0x0,lodash_2[_0x524733(0x10a)])(_0x408135,_0x524733(0x10d))||(0x0,lodash_2[_0x524733(0x10a)])(_0x408135,_0x524733(0x11d))||(0x0,lodash_2['has'])(_0x408135,_0x524733(0x123))||(0x0,lodash_2['has'])(_0x408135,_0x524733(0x111)))&&(_0x47145f=_0x408135[_0x524733(0x10d)]||_0x408135['e-mail']||_0x408135['Email']||_0x408135[_0x524733(0x111)]),{'name':_0x32820a,'number':_0x162fb1,'email':_0x47145f,'contactListId':_0x16ba61,'companyId':_0x1f6654};}),_0x5e4e0f=[];for(const _0x2fb09a of _0x47f7e5){const [_0x12bcd0,_0x58bb90]=await ContactListItem_1[_0x350b6a(0x124)][_0x350b6a(0x11a)]({'where':{'number':''+_0x2fb09a['number'],'contactListId':_0x2fb09a[_0x350b6a(0x11b)],'companyId':_0x2fb09a[_0x350b6a(0x12b)]},'defaults':_0x2fb09a});_0x58bb90&&_0x5e4e0f[_0x350b6a(0x129)](_0x12bcd0);}if(_0x5e4e0f)for(let _0x438bd2 of _0x5e4e0f){try{const _0x5527a9=await(0x0,CheckNumber_1['default'])(_0x438bd2['number'],_0x1f6654);_0x438bd2[_0x350b6a(0x11f)]=_0x5527a9?!![]:![];const _0x3afeae=_0x5527a9;_0x438bd2[_0x350b6a(0x113)]=_0x3afeae,await _0x438bd2[_0x350b6a(0x127)]();}catch(_0x586d98){logger_1[_0x350b6a(0x120)][_0x350b6a(0x10b)](_0x350b6a(0x11e)+_0x438bd2[_0x350b6a(0x113)]);}}return _0x5e4e0f;}exports[a427_0x7c8f7(0x105)]=ImportContacts;