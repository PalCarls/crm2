'use strict';const a407_0x57d755=a407_0x477a;(function(_0x172569,_0x3e0041){const _0x53ee7f=a407_0x477a,_0x1f9a2c=_0x172569();while(!![]){try{const _0x476c75=parseInt(_0x53ee7f(0x8e))/0x1*(-parseInt(_0x53ee7f(0x98))/0x2)+-parseInt(_0x53ee7f(0x9f))/0x3+-parseInt(_0x53ee7f(0xa7))/0x4*(-parseInt(_0x53ee7f(0x96))/0x5)+parseInt(_0x53ee7f(0x8b))/0x6+parseInt(_0x53ee7f(0x95))/0x7*(parseInt(_0x53ee7f(0xa9))/0x8)+-parseInt(_0x53ee7f(0xa6))/0x9+-parseInt(_0x53ee7f(0xb5))/0xa*(parseInt(_0x53ee7f(0x91))/0xb);if(_0x476c75===_0x3e0041)break;else _0x1f9a2c['push'](_0x1f9a2c['shift']());}catch(_0x274bab){_0x1f9a2c['push'](_0x1f9a2c['shift']());}}}(a407_0x59f5,0x4338c));function a407_0x59f5(){const _0x3b8ef2=['sheet_to_json','e-mail','findOrCreate','values','nome','__esModule','replace','417200wjCsvZ','Número','default','3276396WIdjyL','Sheets','../WbotServices/CheckNumber','2350tehtnt','../../models/ContactListItem','E-mail','121wzcsMU','utils','path','ImportContacts','14PCNkxi','30XDsfWk','number','62bzltDl','companyId','Numero','email','map','Nome','isWhatsappValid','229101QEDLjF','xlsx','readFile','Email','número','../../utils/logger','defineProperty','33831phKDSd','2228xyDHBm','contactListId','1351312NkJbJl','numero','error','has','push'];a407_0x59f5=function(){return _0x3b8ef2;};return a407_0x59f5();}var __importDefault=this&&this['__importDefault']||function(_0x1309b5){const _0x14fd3c=a407_0x477a;return _0x1309b5&&_0x1309b5[_0x14fd3c(0xb3)]?_0x1309b5:{'default':_0x1309b5};};function a407_0x477a(_0x4533cd,_0x461d14){const _0x59f50a=a407_0x59f5();return a407_0x477a=function(_0x477a0b,_0x206478){_0x477a0b=_0x477a0b-0x8a;let _0x5d9ee9=_0x59f50a[_0x477a0b];return _0x5d9ee9;},a407_0x477a(_0x4533cd,_0x461d14);}Object[a407_0x57d755(0xa5)](exports,a407_0x57d755(0xb3),{'value':!![]}),exports[a407_0x57d755(0x94)]=void 0x0;const lodash_1=require('lodash'),xlsx_1=__importDefault(require(a407_0x57d755(0xa0))),lodash_2=require('lodash'),ContactListItem_1=__importDefault(require(a407_0x57d755(0x8f))),CheckNumber_1=__importDefault(require(a407_0x57d755(0x8d))),logger_1=require(a407_0x57d755(0xa4));async function ImportContacts(_0x2f05ea,_0x28f522,_0x44b2ab){const _0x469192=a407_0x57d755,_0x48e120=xlsx_1[_0x469192(0x8a)][_0x469192(0xa1)](_0x44b2ab?.[_0x469192(0x93)]),_0x5a6253=(0x0,lodash_1['head'])(Object[_0x469192(0xb1)](_0x48e120[_0x469192(0x8c)])),_0x2d1508=xlsx_1['default'][_0x469192(0x92)][_0x469192(0xae)](_0x5a6253,{'header':0x0}),_0x4aff29=_0x2d1508[_0x469192(0x9c)](_0x39a12b=>{const _0x14d2cd=_0x469192;let _0x2d353f='',_0x31bd2f='',_0x427091='';return((0x0,lodash_2[_0x14d2cd(0xac)])(_0x39a12b,_0x14d2cd(0xb2))||(0x0,lodash_2['has'])(_0x39a12b,_0x14d2cd(0x9d)))&&(_0x2d353f=_0x39a12b[_0x14d2cd(0xb2)]||_0x39a12b[_0x14d2cd(0x9d)]),((0x0,lodash_2[_0x14d2cd(0xac)])(_0x39a12b,_0x14d2cd(0xaa))||(0x0,lodash_2[_0x14d2cd(0xac)])(_0x39a12b,_0x14d2cd(0xa3))||(0x0,lodash_2[_0x14d2cd(0xac)])(_0x39a12b,_0x14d2cd(0x9a))||(0x0,lodash_2[_0x14d2cd(0xac)])(_0x39a12b,_0x14d2cd(0xb6)))&&(_0x31bd2f=_0x39a12b[_0x14d2cd(0xaa)]||_0x39a12b[_0x14d2cd(0xa3)]||_0x39a12b['Numero']||_0x39a12b[_0x14d2cd(0xb6)],_0x31bd2f=(''+_0x31bd2f)[_0x14d2cd(0xb4)](/\D/g,'')),((0x0,lodash_2[_0x14d2cd(0xac)])(_0x39a12b,'email')||(0x0,lodash_2['has'])(_0x39a12b,'e-mail')||(0x0,lodash_2['has'])(_0x39a12b,'Email')||(0x0,lodash_2[_0x14d2cd(0xac)])(_0x39a12b,'E-mail'))&&(_0x427091=_0x39a12b[_0x14d2cd(0x9b)]||_0x39a12b[_0x14d2cd(0xaf)]||_0x39a12b[_0x14d2cd(0xa2)]||_0x39a12b[_0x14d2cd(0x90)]),{'name':_0x2d353f,'number':_0x31bd2f,'email':_0x427091,'contactListId':_0x2f05ea,'companyId':_0x28f522};}),_0x491073=[];for(const _0x81ab7e of _0x4aff29){const [_0x5092a1,_0x527b36]=await ContactListItem_1[_0x469192(0x8a)][_0x469192(0xb0)]({'where':{'number':''+_0x81ab7e['number'],'contactListId':_0x81ab7e[_0x469192(0xa8)],'companyId':_0x81ab7e[_0x469192(0x99)]},'defaults':_0x81ab7e});_0x527b36&&_0x491073[_0x469192(0xad)](_0x5092a1);}if(_0x491073)for(let _0x21a97b of _0x491073){try{const _0x375bcf=await(0x0,CheckNumber_1['default'])(_0x21a97b[_0x469192(0x97)],_0x28f522);_0x21a97b[_0x469192(0x9e)]=_0x375bcf?!![]:![];const _0x1742db=_0x375bcf;_0x21a97b[_0x469192(0x97)]=_0x1742db,await _0x21a97b['save']();}catch(_0x3fcb2c){logger_1['logger'][_0x469192(0xab)]('Número\x20de\x20contato\x20inválido:\x20'+_0x21a97b[_0x469192(0x97)]);}}return _0x491073;}exports[a407_0x57d755(0x94)]=ImportContacts;