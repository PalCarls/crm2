'use strict';const a460_0x574674=a460_0x5168;(function(_0x210bcb,_0xeb02e8){const _0x4c0842=a460_0x5168,_0x504d1=_0x210bcb();while(!![]){try{const _0x4c8eb5=parseInt(_0x4c0842(0xde))/0x1+parseInt(_0x4c0842(0xc8))/0x2*(-parseInt(_0x4c0842(0xd3))/0x3)+parseInt(_0x4c0842(0xca))/0x4+parseInt(_0x4c0842(0xd6))/0x5*(-parseInt(_0x4c0842(0xc3))/0x6)+-parseInt(_0x4c0842(0xe2))/0x7*(-parseInt(_0x4c0842(0xba))/0x8)+parseInt(_0x4c0842(0xc4))/0x9*(-parseInt(_0x4c0842(0xb9))/0xa)+parseInt(_0x4c0842(0xe3))/0xb;if(_0x4c8eb5===_0xeb02e8)break;else _0x504d1['push'](_0x504d1['shift']());}catch(_0x1b4468){_0x504d1['push'](_0x504d1['shift']());}}}(a460_0x47a9,0xe0657));function a460_0x5168(_0xf8cae,_0x10ce83){const _0x47a919=a460_0x47a9();return a460_0x5168=function(_0x516886,_0x140650){_0x516886=_0x516886-0xb8;let _0x52128e=_0x47a919[_0x516886];return _0x52128e;},a460_0x5168(_0xf8cae,_0x10ce83);}var __importDefault=this&&this[a460_0x574674(0xdb)]||function(_0x3e4c93){const _0x1ab35c=a460_0x574674;return _0x3e4c93&&_0x3e4c93[_0x1ab35c(0xc1)]?_0x3e4c93:{'default':_0x3e4c93};};function a460_0x47a9(){const _0x15cf36=['4397652tNPHoS','Numero','Sheets','email','sheet_to_json','Email','utils','número','findOrCreate','46923KUBPFs','head','lodash','215qRFrtn','../WbotServices/CheckNumber','defineProperty','companyId','xlsx','__importDefault','E-mail','save','653909LLsSSp','ImportContacts','values','push','623HSNipd','21344213lhFquV','readFile','1790vIkNNA','12488lKENLm','number','nome','Número','numero','default','has','__esModule','Nome','219072ZzCiVh','41598wydHSV','Número\x20de\x20contato\x20inválido:\x20','isWhatsappValid','replace','66lZMiMm','e-mail'];a460_0x47a9=function(){return _0x15cf36;};return a460_0x47a9();}Object[a460_0x574674(0xd8)](exports,a460_0x574674(0xc1),{'value':!![]}),exports[a460_0x574674(0xdf)]=void 0x0;const lodash_1=require(a460_0x574674(0xd5)),xlsx_1=__importDefault(require(a460_0x574674(0xda))),lodash_2=require(a460_0x574674(0xd5)),ContactListItem_1=__importDefault(require('../../models/ContactListItem')),CheckNumber_1=__importDefault(require(a460_0x574674(0xd7))),logger_1=require('../../utils/logger');async function ImportContacts(_0x17ede2,_0x9fb2c2,_0x3fc465){const _0x4138fe=a460_0x574674,_0x4e769d=xlsx_1[_0x4138fe(0xbf)][_0x4138fe(0xb8)](_0x3fc465?.['path']),_0x17e585=(0x0,lodash_1[_0x4138fe(0xd4)])(Object[_0x4138fe(0xe0)](_0x4e769d[_0x4138fe(0xcc)])),_0x422a0c=xlsx_1[_0x4138fe(0xbf)][_0x4138fe(0xd0)][_0x4138fe(0xce)](_0x17e585,{'header':0x0}),_0x56fcba=_0x422a0c['map'](_0x272552=>{const _0x431347=_0x4138fe;let _0x451be1='',_0x2c0254='',_0xda5dd0='';return((0x0,lodash_2[_0x431347(0xc0)])(_0x272552,_0x431347(0xbc))||(0x0,lodash_2[_0x431347(0xc0)])(_0x272552,_0x431347(0xc2)))&&(_0x451be1=_0x272552['nome']||_0x272552[_0x431347(0xc2)]),((0x0,lodash_2[_0x431347(0xc0)])(_0x272552,_0x431347(0xbe))||(0x0,lodash_2['has'])(_0x272552,'número')||(0x0,lodash_2['has'])(_0x272552,_0x431347(0xcb))||(0x0,lodash_2[_0x431347(0xc0)])(_0x272552,_0x431347(0xbd)))&&(_0x2c0254=_0x272552['numero']||_0x272552[_0x431347(0xd1)]||_0x272552['Numero']||_0x272552[_0x431347(0xbd)],_0x2c0254=(''+_0x2c0254)[_0x431347(0xc7)](/\D/g,'')),((0x0,lodash_2[_0x431347(0xc0)])(_0x272552,_0x431347(0xcd))||(0x0,lodash_2[_0x431347(0xc0)])(_0x272552,'e-mail')||(0x0,lodash_2['has'])(_0x272552,_0x431347(0xcf))||(0x0,lodash_2[_0x431347(0xc0)])(_0x272552,_0x431347(0xdc)))&&(_0xda5dd0=_0x272552[_0x431347(0xcd)]||_0x272552[_0x431347(0xc9)]||_0x272552[_0x431347(0xcf)]||_0x272552['E-mail']),{'name':_0x451be1,'number':_0x2c0254,'email':_0xda5dd0,'contactListId':_0x17ede2,'companyId':_0x9fb2c2};}),_0x5de9da=[];for(const _0x14399b of _0x56fcba){const [_0x1075d9,_0x585208]=await ContactListItem_1[_0x4138fe(0xbf)][_0x4138fe(0xd2)]({'where':{'number':''+_0x14399b[_0x4138fe(0xbb)],'contactListId':_0x14399b['contactListId'],'companyId':_0x14399b[_0x4138fe(0xd9)]},'defaults':_0x14399b});_0x585208&&_0x5de9da[_0x4138fe(0xe1)](_0x1075d9);}if(_0x5de9da)for(let _0x3d27a8 of _0x5de9da){try{const _0x4fc62c=await(0x0,CheckNumber_1[_0x4138fe(0xbf)])(_0x3d27a8[_0x4138fe(0xbb)],_0x9fb2c2);_0x3d27a8[_0x4138fe(0xc6)]=_0x4fc62c?!![]:![];const _0x12d4c9=_0x4fc62c;_0x3d27a8['number']=_0x12d4c9,await _0x3d27a8[_0x4138fe(0xdd)]();}catch(_0x3f8b28){logger_1['logger']['error'](_0x4138fe(0xc5)+_0x3d27a8[_0x4138fe(0xbb)]);}}return _0x5de9da;}exports[a460_0x574674(0xdf)]=ImportContacts;