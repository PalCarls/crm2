'use strict';const a444_0x4ce22b=a444_0x2eea;(function(_0xde3ce3,_0x2fa8e4){const _0x5c03d4=a444_0x2eea,_0x2210a1=_0xde3ce3();while(!![]){try{const _0x259c58=parseInt(_0x5c03d4(0x1bf))/0x1*(parseInt(_0x5c03d4(0x1bd))/0x2)+-parseInt(_0x5c03d4(0x1bc))/0x3+-parseInt(_0x5c03d4(0x1a2))/0x4+-parseInt(_0x5c03d4(0x1c1))/0x5+parseInt(_0x5c03d4(0x19d))/0x6+parseInt(_0x5c03d4(0x1b2))/0x7*(parseInt(_0x5c03d4(0x1b8))/0x8)+-parseInt(_0x5c03d4(0x1b6))/0x9;if(_0x259c58===_0x2fa8e4)break;else _0x2210a1['push'](_0x2210a1['shift']());}catch(_0x2c4078){_0x2210a1['push'](_0x2210a1['shift']());}}}(a444_0x58d0,0x8e5ad));var __importDefault=this&&this['__importDefault']||function(_0x3dddda){return _0x3dddda&&_0x3dddda['__esModule']?_0x3dddda:{'default':_0x3dddda};};Object[a444_0x4ce22b(0x1ae)](exports,a444_0x4ce22b(0x19e),{'value':!![]}),exports[a444_0x4ce22b(0x1aa)]=void 0x0;function a444_0x2eea(_0x396c88,_0x1a9ec9){const _0x58d0d3=a444_0x58d0();return a444_0x2eea=function(_0x2eea6,_0x95c7de){_0x2eea6=_0x2eea6-0x19b;let _0x34f581=_0x58d0d3[_0x2eea6];return _0x34f581;},a444_0x2eea(_0x396c88,_0x1a9ec9);}const lodash_1=require('lodash'),xlsx_1=__importDefault(require(a444_0x4ce22b(0x1b1))),lodash_2=require(a444_0x4ce22b(0x1a3)),ContactListItem_1=__importDefault(require('../../models/ContactListItem')),CheckNumber_1=__importDefault(require(a444_0x4ce22b(0x1b4))),logger_1=require('../../utils/logger');async function ImportContacts(_0xe482cf,_0x581e9f,_0x47f4ac){const _0x1dc453=a444_0x4ce22b,_0x12f61d=xlsx_1[_0x1dc453(0x1c3)]['readFile'](_0x47f4ac?.[_0x1dc453(0x1b7)]),_0x14789e=(0x0,lodash_1[_0x1dc453(0x1ad)])(Object[_0x1dc453(0x1ac)](_0x12f61d['Sheets'])),_0x2d50e0=xlsx_1['default'][_0x1dc453(0x1be)][_0x1dc453(0x19b)](_0x14789e,{'header':0x0}),_0x43becd=_0x2d50e0[_0x1dc453(0x1c0)](_0x3c89c9=>{const _0xd34ded=_0x1dc453;let _0x28e727='',_0xeefb5c='',_0xd4f2a4='';return((0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1ab))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,'Nome'))&&(_0x28e727=_0x3c89c9['nome']||_0x3c89c9[_0xd34ded(0x1bb)]),((0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x19f))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1b0))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1a8))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1c2)))&&(_0xeefb5c=_0x3c89c9['numero']||_0x3c89c9[_0xd34ded(0x1b0)]||_0x3c89c9[_0xd34ded(0x1a8)]||_0x3c89c9[_0xd34ded(0x1c2)],_0xeefb5c=(''+_0xeefb5c)[_0xd34ded(0x1c5)](/\D/g,'')),((0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1a1))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1a7))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1c4))||(0x0,lodash_2[_0xd34ded(0x1b9)])(_0x3c89c9,_0xd34ded(0x1ba)))&&(_0xd4f2a4=_0x3c89c9[_0xd34ded(0x1a1)]||_0x3c89c9[_0xd34ded(0x1a7)]||_0x3c89c9[_0xd34ded(0x1c4)]||_0x3c89c9['E-mail']),{'name':_0x28e727,'number':_0xeefb5c,'email':_0xd4f2a4,'contactListId':_0xe482cf,'companyId':_0x581e9f};}),_0x22b3a0=[];for(const _0x41979b of _0x43becd){const [_0x478555,_0x56ced8]=await ContactListItem_1[_0x1dc453(0x1c3)][_0x1dc453(0x19c)]({'where':{'number':''+_0x41979b['number'],'contactListId':_0x41979b[_0x1dc453(0x1b3)],'companyId':_0x41979b[_0x1dc453(0x1a5)]},'defaults':_0x41979b});_0x56ced8&&_0x22b3a0[_0x1dc453(0x1b5)](_0x478555);}if(_0x22b3a0)for(let _0x40ba57 of _0x22b3a0){try{const _0x4b87f8=await(0x0,CheckNumber_1[_0x1dc453(0x1c3)])(_0x40ba57[_0x1dc453(0x1a6)],_0x581e9f);_0x40ba57['isWhatsappValid']=_0x4b87f8?!![]:![];const _0x486d40=_0x4b87f8;_0x40ba57[_0x1dc453(0x1a6)]=_0x486d40,await _0x40ba57[_0x1dc453(0x1a0)]();}catch(_0x2e41b9){logger_1[_0x1dc453(0x1a9)][_0x1dc453(0x1af)](_0x1dc453(0x1a4)+_0x40ba57[_0x1dc453(0x1a6)]);}}return _0x22b3a0;}function a444_0x58d0(){const _0x228351=['has','E-mail','Nome','2631000WPWSob','2588CImkBP','utils','814nOjsvw','map','1906435WZDICh','Número','default','Email','replace','sheet_to_json','findOrCreate','3176808kUScVf','__esModule','numero','save','email','3133160pCMLcD','lodash','Número\x20de\x20contato\x20inválido:\x20','companyId','number','e-mail','Numero','logger','ImportContacts','nome','values','head','defineProperty','error','número','xlsx','7qVTPxm','contactListId','../WbotServices/CheckNumber','push','939996dFAowF','path','9170576FLrMwW'];a444_0x58d0=function(){return _0x228351;};return a444_0x58d0();}exports[a444_0x4ce22b(0x1aa)]=ImportContacts;