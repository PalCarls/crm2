'use strict';const a453_0xd881ee=a453_0x1cb0;(function(_0x154d18,_0x3169bb){const _0x5a8b51=a453_0x1cb0,_0x4a99aa=_0x154d18();while(!![]){try{const _0x259eac=parseInt(_0x5a8b51(0x155))/0x1+-parseInt(_0x5a8b51(0x15d))/0x2+parseInt(_0x5a8b51(0x174))/0x3*(-parseInt(_0x5a8b51(0x163))/0x4)+-parseInt(_0x5a8b51(0x164))/0x5+parseInt(_0x5a8b51(0x172))/0x6+-parseInt(_0x5a8b51(0x14f))/0x7+-parseInt(_0x5a8b51(0x151))/0x8*(-parseInt(_0x5a8b51(0x168))/0x9);if(_0x259eac===_0x3169bb)break;else _0x4a99aa['push'](_0x4a99aa['shift']());}catch(_0x5ee00f){_0x4a99aa['push'](_0x4a99aa['shift']());}}}(a453_0x4e93,0xd0c4f));var __importDefault=this&&this[a453_0xd881ee(0x15f)]||function(_0x3269eb){const _0x5bc329=a453_0xd881ee;return _0x3269eb&&_0x3269eb[_0x5bc329(0x15a)]?_0x3269eb:{'default':_0x3269eb};};Object[a453_0xd881ee(0x173)](exports,a453_0xd881ee(0x15a),{'value':!![]}),exports['ImportContacts']=void 0x0;function a453_0x1cb0(_0x4abfe4,_0x2f1240){const _0x4e93ef=a453_0x4e93();return a453_0x1cb0=function(_0x1cb043,_0x2ba624){_0x1cb043=_0x1cb043-0x14d;let _0x3eadb8=_0x4e93ef[_0x1cb043];return _0x3eadb8;},a453_0x1cb0(_0x4abfe4,_0x2f1240);}const lodash_1=require('lodash'),xlsx_1=__importDefault(require(a453_0xd881ee(0x15e))),lodash_2=require(a453_0xd881ee(0x16e)),ContactListItem_1=__importDefault(require(a453_0xd881ee(0x16a))),CheckNumber_1=__importDefault(require('../WbotServices/CheckNumber')),logger_1=require(a453_0xd881ee(0x16d));function a453_0x4e93(){const _0x173bb0=['findOrCreate','E-mail','2598071eQjhtF','sheet_to_json','9763304rbtkcF','replace','isWhatsappValid','Número','1511837yeeMyw','Nome','companyId','utils','default','__esModule','values','Email','451786fsltTw','xlsx','__importDefault','readFile','número','save','272WDJrCW','7517640fWNASy','has','number','numero','18EretXN','push','../../models/ContactListItem','path','nome','../../utils/logger','lodash','Numero','e-mail','Sheets','1562508epUUni','defineProperty','55473DirDAu','email','head'];a453_0x4e93=function(){return _0x173bb0;};return a453_0x4e93();}async function ImportContacts(_0x13d788,_0x302e54,_0x43980e){const _0x376e02=a453_0xd881ee,_0x555690=xlsx_1[_0x376e02(0x159)][_0x376e02(0x160)](_0x43980e?.[_0x376e02(0x16b)]),_0x38bea4=(0x0,lodash_1[_0x376e02(0x176)])(Object[_0x376e02(0x15b)](_0x555690[_0x376e02(0x171)])),_0x2efdba=xlsx_1[_0x376e02(0x159)][_0x376e02(0x158)][_0x376e02(0x150)](_0x38bea4,{'header':0x0}),_0x4ecf78=_0x2efdba['map'](_0x39c062=>{const _0xd91d8a=_0x376e02;let _0x2c7821='',_0x4d26b9='',_0x4cd837='';return((0x0,lodash_2['has'])(_0x39c062,_0xd91d8a(0x16c))||(0x0,lodash_2[_0xd91d8a(0x165)])(_0x39c062,_0xd91d8a(0x156)))&&(_0x2c7821=_0x39c062[_0xd91d8a(0x16c)]||_0x39c062[_0xd91d8a(0x156)]),((0x0,lodash_2[_0xd91d8a(0x165)])(_0x39c062,_0xd91d8a(0x167))||(0x0,lodash_2[_0xd91d8a(0x165)])(_0x39c062,_0xd91d8a(0x161))||(0x0,lodash_2[_0xd91d8a(0x165)])(_0x39c062,_0xd91d8a(0x16f))||(0x0,lodash_2[_0xd91d8a(0x165)])(_0x39c062,'Número'))&&(_0x4d26b9=_0x39c062[_0xd91d8a(0x167)]||_0x39c062[_0xd91d8a(0x161)]||_0x39c062[_0xd91d8a(0x16f)]||_0x39c062[_0xd91d8a(0x154)],_0x4d26b9=(''+_0x4d26b9)[_0xd91d8a(0x152)](/\D/g,'')),((0x0,lodash_2[_0xd91d8a(0x165)])(_0x39c062,'email')||(0x0,lodash_2[_0xd91d8a(0x165)])(_0x39c062,_0xd91d8a(0x170))||(0x0,lodash_2[_0xd91d8a(0x165)])(_0x39c062,_0xd91d8a(0x15c))||(0x0,lodash_2[_0xd91d8a(0x165)])(_0x39c062,_0xd91d8a(0x14e)))&&(_0x4cd837=_0x39c062[_0xd91d8a(0x175)]||_0x39c062['e-mail']||_0x39c062[_0xd91d8a(0x15c)]||_0x39c062[_0xd91d8a(0x14e)]),{'name':_0x2c7821,'number':_0x4d26b9,'email':_0x4cd837,'contactListId':_0x13d788,'companyId':_0x302e54};}),_0x4b429c=[];for(const _0x34100a of _0x4ecf78){const [_0x44dc38,_0x156bd2]=await ContactListItem_1[_0x376e02(0x159)][_0x376e02(0x14d)]({'where':{'number':''+_0x34100a[_0x376e02(0x166)],'contactListId':_0x34100a['contactListId'],'companyId':_0x34100a[_0x376e02(0x157)]},'defaults':_0x34100a});_0x156bd2&&_0x4b429c[_0x376e02(0x169)](_0x44dc38);}if(_0x4b429c)for(let _0x596b0a of _0x4b429c){try{const _0x19ead0=await(0x0,CheckNumber_1[_0x376e02(0x159)])(_0x596b0a[_0x376e02(0x166)],_0x302e54);_0x596b0a[_0x376e02(0x153)]=_0x19ead0?!![]:![];const _0x5074ed=_0x19ead0;_0x596b0a[_0x376e02(0x166)]=_0x5074ed,await _0x596b0a[_0x376e02(0x162)]();}catch(_0x199da1){logger_1['logger']['error']('Número\x20de\x20contato\x20inválido:\x20'+_0x596b0a[_0x376e02(0x166)]);}}return _0x4b429c;}exports['ImportContacts']=ImportContacts;