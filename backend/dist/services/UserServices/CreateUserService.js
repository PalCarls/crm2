'use strict';const a546_0x33eda6=a546_0x4a14;function a546_0x4a14(_0x5a290b,_0x431f26){const _0x4d5723=a546_0x4d57();return a546_0x4a14=function(_0x4a147d,_0x5a5690){_0x4a147d=_0x4a147d-0x130;let _0x53a959=_0x4d5723[_0x4a147d];return _0x53a959;},a546_0x4a14(_0x5a290b,_0x431f26);}(function(_0x3cbd6f,_0x217e21){const _0x2fccd5=a546_0x4a14,_0x2d6bda=_0x3cbd6f();while(!![]){try{const _0x56967d=parseInt(_0x2fccd5(0x140))/0x1+parseInt(_0x2fccd5(0x138))/0x2*(-parseInt(_0x2fccd5(0x135))/0x3)+parseInt(_0x2fccd5(0x15c))/0x4*(-parseInt(_0x2fccd5(0x13a))/0x5)+parseInt(_0x2fccd5(0x15f))/0x6*(-parseInt(_0x2fccd5(0x13e))/0x7)+-parseInt(_0x2fccd5(0x141))/0x8+parseInt(_0x2fccd5(0x13d))/0x9+parseInt(_0x2fccd5(0x144))/0xa*(parseInt(_0x2fccd5(0x133))/0xb);if(_0x56967d===_0x217e21)break;else _0x2d6bda['push'](_0x2d6bda['shift']());}catch(_0x4545ae){_0x2d6bda['push'](_0x2d6bda['shift']());}}}(a546_0x4d57,0x450af));var __createBinding=this&&this[a546_0x33eda6(0x155)]||(Object['create']?function(_0x18aae0,_0x2e61d8,_0x50bca5,_0x431b9e){const _0x1edc44=a546_0x33eda6;if(_0x431b9e===undefined)_0x431b9e=_0x50bca5;var _0x260f97=Object['getOwnPropertyDescriptor'](_0x2e61d8,_0x50bca5);(!_0x260f97||(_0x1edc44(0x132)in _0x260f97?!_0x2e61d8[_0x1edc44(0x15d)]:_0x260f97[_0x1edc44(0x153)]||_0x260f97[_0x1edc44(0x158)]))&&(_0x260f97={'enumerable':!![],'get':function(){return _0x2e61d8[_0x50bca5];}}),Object[_0x1edc44(0x14a)](_0x18aae0,_0x431b9e,_0x260f97);}:function(_0x2b0df8,_0x3f5f77,_0x10436b,_0x573b31){if(_0x573b31===undefined)_0x573b31=_0x10436b;_0x2b0df8[_0x573b31]=_0x3f5f77[_0x10436b];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a546_0x33eda6(0x14b)]?function(_0x3a839d,_0x12eb9e){const _0x4cacf7=a546_0x33eda6;Object[_0x4cacf7(0x14a)](_0x3a839d,_0x4cacf7(0x143),{'enumerable':!![],'value':_0x12eb9e});}:function(_0x170ff8,_0x2209d0){const _0x131ce1=a546_0x33eda6;_0x170ff8[_0x131ce1(0x143)]=_0x2209d0;}),__importStar=this&&this[a546_0x33eda6(0x160)]||function(_0x5f528a){const _0x5b7c8d=a546_0x33eda6;if(_0x5f528a&&_0x5f528a[_0x5b7c8d(0x15d)])return _0x5f528a;var _0x761e86={};if(_0x5f528a!=null){for(var _0x17feec in _0x5f528a)if(_0x17feec!==_0x5b7c8d(0x143)&&Object['prototype'][_0x5b7c8d(0x14c)][_0x5b7c8d(0x136)](_0x5f528a,_0x17feec))__createBinding(_0x761e86,_0x5f528a,_0x17feec);}return __setModuleDefault(_0x761e86,_0x5f528a),_0x761e86;},__importDefault=this&&this[a546_0x33eda6(0x137)]||function(_0x241ae8){const _0x772175=a546_0x33eda6;return _0x241ae8&&_0x241ae8[_0x772175(0x15d)]?_0x241ae8:{'default':_0x241ae8};};Object[a546_0x33eda6(0x14a)](exports,a546_0x33eda6(0x15d),{'value':!![]});const Yup=__importStar(require(a546_0x33eda6(0x157))),AppError_1=__importDefault(require(a546_0x33eda6(0x145))),SerializeUser_1=require(a546_0x33eda6(0x13f)),User_1=__importDefault(require(a546_0x33eda6(0x14f))),Plan_1=__importDefault(require(a546_0x33eda6(0x13b))),Company_1=__importDefault(require(a546_0x33eda6(0x139))),CreateUserService=async({email:_0x2cd2d5,password:_0x30733b,name:_0x47a8a3,queueIds:queueIds=[],companyId:_0x20a637,profile:profile=a546_0x33eda6(0x152),startWork:_0x42d2cf,endWork:_0xd6610e,whatsappId:_0x2c91ec,allTicket:_0x2918a7,defaultTheme:_0x4e4fde,defaultMenu:_0x45adc3,allowGroup:_0x3479e3})=>{const _0x199d69=a546_0x33eda6;if(_0x20a637!==undefined){const _0xb9b2b7=await Company_1[_0x199d69(0x143)][_0x199d69(0x134)]({'where':{'id':_0x20a637},'include':[{'model':Plan_1[_0x199d69(0x143)],'as':'plan'}]});if(_0xb9b2b7!==null){const _0x29586f=await User_1['default']['count']({'where':{'companyId':_0x20a637}});if(_0x29586f>=_0xb9b2b7[_0x199d69(0x13c)][_0x199d69(0x149)])throw new AppError_1[(_0x199d69(0x143))](_0x199d69(0x154)+_0x29586f);}}const _0x480869=Yup['object']()[_0x199d69(0x159)]({'name':Yup[_0x199d69(0x15e)]()['required']()[_0x199d69(0x148)](0x2),'email':Yup[_0x199d69(0x15e)]()[_0x199d69(0x14e)]()[_0x199d69(0x131)]()[_0x199d69(0x14d)](_0x199d69(0x15b),_0x199d69(0x147),async _0x1fd16a=>{const _0x1f62d3=_0x199d69;if(!_0x1fd16a)return![];const _0x129c87=await User_1['default'][_0x1f62d3(0x134)]({'where':{'email':_0x1fd16a}});return!_0x129c87;}),'password':Yup[_0x199d69(0x15e)]()['required']()['min'](0x5)});try{await _0x480869[_0x199d69(0x146)]({'email':_0x2cd2d5,'password':_0x30733b,'name':_0x47a8a3});}catch(_0x27a50e){throw new AppError_1[(_0x199d69(0x143))](_0x27a50e[_0x199d69(0x142)]);}const _0x47c3f5=await User_1[_0x199d69(0x143)][_0x199d69(0x14b)]({'email':_0x2cd2d5,'password':_0x30733b,'name':_0x47a8a3,'companyId':_0x20a637,'profile':profile,'startWork':_0x42d2cf,'endWork':_0xd6610e,'whatsappId':_0x2c91ec||null,'allTicket':_0x2918a7,'defaultTheme':_0x4e4fde,'defaultMenu':_0x45adc3,'allowGroup':_0x3479e3},{'include':[_0x199d69(0x156),_0x199d69(0x151)]});await _0x47c3f5[_0x199d69(0x150)](_0x199d69(0x156),queueIds),await _0x47c3f5[_0x199d69(0x15a)]();const _0x3612ba=(0x0,SerializeUser_1[_0x199d69(0x130)])(_0x47c3f5);return _0x3612ba;};exports[a546_0x33eda6(0x143)]=CreateUserService;function a546_0x4d57(){const _0x2b8059=['An\x20user\x20with\x20this\x20email\x20already\x20exists.','min','users','defineProperty','create','hasOwnProperty','test','email','../../models/User','$set','company','admin','writable','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','__createBinding','queues','yup','configurable','shape','reload','Check-email','669992suVJCa','__esModule','string','93006nIYikw','__importStar','SerializeUser','required','get','11AztuHn','findOne','21STmxuA','call','__importDefault','9766GeuKwE','../../models/Company','10cOuIxe','../../models/Plan','plan','1557702EeZCgm','91nwUJFD','../../helpers/SerializeUser','123670FgTmzG','1307776tmEpAD','message','default','7202130TguqIA','../../errors/AppError','validate'];a546_0x4d57=function(){return _0x2b8059;};return a546_0x4d57();}