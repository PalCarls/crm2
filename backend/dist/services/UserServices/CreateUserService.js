'use strict';const a592_0x42279a=a592_0x2ccf;(function(_0x172166,_0x219fa1){const _0x1c08b2=a592_0x2ccf,_0x2342f0=_0x172166();while(!![]){try{const _0x364e1c=parseInt(_0x1c08b2(0xa6))/0x1+parseInt(_0x1c08b2(0x82))/0x2+parseInt(_0x1c08b2(0xa9))/0x3*(parseInt(_0x1c08b2(0x95))/0x4)+parseInt(_0x1c08b2(0xa0))/0x5+parseInt(_0x1c08b2(0xa4))/0x6+parseInt(_0x1c08b2(0xa7))/0x7+-parseInt(_0x1c08b2(0x8f))/0x8;if(_0x364e1c===_0x219fa1)break;else _0x2342f0['push'](_0x2342f0['shift']());}catch(_0x34e2a6){_0x2342f0['push'](_0x2342f0['shift']());}}}(a592_0x58d4,0x3fbf0));function a592_0x2ccf(_0x1eeca5,_0x50d590){const _0x58d4a9=a592_0x58d4();return a592_0x2ccf=function(_0x2ccf85,_0x1e3ec5){_0x2ccf85=_0x2ccf85-0x7d;let _0x11223a=_0x58d4a9[_0x2ccf85];return _0x11223a;},a592_0x2ccf(_0x1eeca5,_0x50d590);}var __createBinding=this&&this[a592_0x42279a(0x9c)]||(Object[a592_0x42279a(0x91)]?function(_0xdf5a1c,_0x3ffa3f,_0x1a4c6d,_0x2f8950){const _0x216981=a592_0x42279a;if(_0x2f8950===undefined)_0x2f8950=_0x1a4c6d;var _0x28274e=Object[_0x216981(0x90)](_0x3ffa3f,_0x1a4c6d);(!_0x28274e||(_0x216981(0x84)in _0x28274e?!_0x3ffa3f[_0x216981(0x7e)]:_0x28274e['writable']||_0x28274e['configurable']))&&(_0x28274e={'enumerable':!![],'get':function(){return _0x3ffa3f[_0x1a4c6d];}}),Object['defineProperty'](_0xdf5a1c,_0x2f8950,_0x28274e);}:function(_0x228c05,_0x1cefbd,_0x379d2b,_0x55c0d0){if(_0x55c0d0===undefined)_0x55c0d0=_0x379d2b;_0x228c05[_0x55c0d0]=_0x1cefbd[_0x379d2b];}),__setModuleDefault=this&&this[a592_0x42279a(0x9a)]||(Object['create']?function(_0x11a772,_0x1f1c06){const _0x22a160=a592_0x42279a;Object['defineProperty'](_0x11a772,_0x22a160(0x92),{'enumerable':!![],'value':_0x1f1c06});}:function(_0x5a24d8,_0x23aad4){const _0x290be6=a592_0x42279a;_0x5a24d8[_0x290be6(0x92)]=_0x23aad4;}),__importStar=this&&this[a592_0x42279a(0x88)]||function(_0x119d7a){const _0x8ad295=a592_0x42279a;if(_0x119d7a&&_0x119d7a[_0x8ad295(0x7e)])return _0x119d7a;var _0x85362d={};if(_0x119d7a!=null){for(var _0x39ba04 in _0x119d7a)if(_0x39ba04!=='default'&&Object[_0x8ad295(0x80)][_0x8ad295(0x9b)][_0x8ad295(0x94)](_0x119d7a,_0x39ba04))__createBinding(_0x85362d,_0x119d7a,_0x39ba04);}return __setModuleDefault(_0x85362d,_0x119d7a),_0x85362d;},__importDefault=this&&this[a592_0x42279a(0x9d)]||function(_0x287fa9){const _0x52283c=a592_0x42279a;return _0x287fa9&&_0x287fa9[_0x52283c(0x7e)]?_0x287fa9:{'default':_0x287fa9};};Object[a592_0x42279a(0x81)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a592_0x42279a(0x99))),AppError_1=__importDefault(require(a592_0x42279a(0x8c))),SerializeUser_1=require(a592_0x42279a(0xa8)),User_1=__importDefault(require(a592_0x42279a(0xa1))),Plan_1=__importDefault(require('../../models/Plan')),Company_1=__importDefault(require(a592_0x42279a(0xa2))),CreateUserService=async({email:_0x36644b,password:_0x514a0f,name:_0x584e34,queueIds:queueIds=[],companyId:_0x147f48,profile:profile=a592_0x42279a(0x9e),startWork:_0x12ba98,endWork:_0x3499cd,whatsappId:_0xd20d44,allTicket:_0x32b3b2,defaultTheme:_0x73a7dd,defaultMenu:_0x4e579c,allowGroup:_0x2975d2,allHistoric:_0x32cf7f,allUserChat:_0x501e5b})=>{const _0x7d084=a592_0x42279a;if(_0x147f48!==undefined){const _0x58d07a=await Company_1[_0x7d084(0x92)][_0x7d084(0x7d)]({'where':{'id':_0x147f48},'include':[{'model':Plan_1[_0x7d084(0x92)],'as':_0x7d084(0x86)}]});if(_0x58d07a!==null){const _0x42f29a=await User_1[_0x7d084(0x92)][_0x7d084(0x9f)]({'where':{'companyId':_0x147f48}});if(_0x42f29a>=_0x58d07a[_0x7d084(0x86)][_0x7d084(0x87)])throw new AppError_1[(_0x7d084(0x92))]('Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20'+_0x42f29a);}}const _0x2dc7d2=Yup[_0x7d084(0x85)]()[_0x7d084(0x83)]({'name':Yup[_0x7d084(0x8b)]()[_0x7d084(0x96)]()[_0x7d084(0x8a)](0x2),'allHistoric':Yup[_0x7d084(0x8b)](),'email':Yup[_0x7d084(0x8b)]()[_0x7d084(0x8e)]()[_0x7d084(0x96)]()[_0x7d084(0xa3)](_0x7d084(0x7f),_0x7d084(0x8d),async _0x2a7df3=>{const _0x2aa61a=_0x7d084;if(!_0x2a7df3)return![];const _0x5b4ba2=await User_1[_0x2aa61a(0x92)][_0x2aa61a(0x7d)]({'where':{'email':_0x2a7df3}});return!_0x5b4ba2;}),'password':Yup[_0x7d084(0x8b)]()['required']()[_0x7d084(0x8a)](0x5)});try{await _0x2dc7d2['validate']({'email':_0x36644b,'password':_0x514a0f,'name':_0x584e34});}catch(_0x120117){throw new AppError_1[(_0x7d084(0x92))](_0x120117['message']);}const _0x7d386c=await User_1[_0x7d084(0x92)]['create']({'email':_0x36644b,'password':_0x514a0f,'name':_0x584e34,'companyId':_0x147f48,'profile':profile,'startWork':_0x12ba98,'endWork':_0x3499cd,'whatsappId':_0xd20d44||null,'allTicket':_0x32b3b2,'defaultTheme':_0x73a7dd,'defaultMenu':_0x4e579c,'allowGroup':_0x2975d2,'allHistoric':_0x32cf7f,'allUserChat':_0x501e5b},{'include':['queues',_0x7d084(0x97)]});await _0x7d386c[_0x7d084(0xa5)](_0x7d084(0x98),queueIds),await _0x7d386c[_0x7d084(0x93)]();const _0x209c56=(0x0,SerializeUser_1[_0x7d084(0x89)])(_0x7d386c);return _0x209c56;};exports[a592_0x42279a(0x92)]=CreateUserService;function a592_0x58d4(){const _0x361d6a=['__setModuleDefault','hasOwnProperty','__createBinding','__importDefault','admin','count','1149760FnoHGK','../../models/User','../../models/Company','test','2069376SSyQNI','$set','334699cUBGPf','2452758KeRPyo','../../helpers/SerializeUser','87AWOUUA','findOne','__esModule','Check-email','prototype','defineProperty','33588hNrrnS','shape','get','object','plan','users','__importStar','SerializeUser','min','string','../../errors/AppError','An\x20user\x20with\x20this\x20email\x20already\x20exists.','email','10397256rsJPmy','getOwnPropertyDescriptor','create','default','reload','call','39176LocNLW','required','company','queues','yup'];a592_0x58d4=function(){return _0x361d6a;};return a592_0x58d4();}