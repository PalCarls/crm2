'use strict';const a604_0x26b892=a604_0xebc1;(function(_0x524c9c,_0x36ec24){const _0x1d6590=a604_0xebc1,_0x549f87=_0x524c9c();while(!![]){try{const _0x2bd388=parseInt(_0x1d6590(0x1b8))/0x1*(-parseInt(_0x1d6590(0x1a7))/0x2)+-parseInt(_0x1d6590(0x1b3))/0x3*(-parseInt(_0x1d6590(0x1b5))/0x4)+-parseInt(_0x1d6590(0x1ab))/0x5*(parseInt(_0x1d6590(0x199))/0x6)+-parseInt(_0x1d6590(0x1b1))/0x7+-parseInt(_0x1d6590(0x197))/0x8+parseInt(_0x1d6590(0x1a8))/0x9*(-parseInt(_0x1d6590(0x1a4))/0xa)+parseInt(_0x1d6590(0x1b0))/0xb;if(_0x2bd388===_0x36ec24)break;else _0x549f87['push'](_0x549f87['shift']());}catch(_0x984d1d){_0x549f87['push'](_0x549f87['shift']());}}}(a604_0x21b6,0x4857e));function a604_0xebc1(_0x223a5d,_0x15657c){const _0x21b68d=a604_0x21b6();return a604_0xebc1=function(_0xebc1d7,_0x5c65c9){_0xebc1d7=_0xebc1d7-0x194;let _0x53ecd6=_0x21b68d[_0xebc1d7];return _0x53ecd6;},a604_0xebc1(_0x223a5d,_0x15657c);}var __createBinding=this&&this[a604_0x26b892(0x1bd)]||(Object[a604_0x26b892(0x1ba)]?function(_0x1f12c9,_0x4348d1,_0x332d0d,_0x4ae4f4){const _0x10ac4d=a604_0x26b892;if(_0x4ae4f4===undefined)_0x4ae4f4=_0x332d0d;var _0x229660=Object['getOwnPropertyDescriptor'](_0x4348d1,_0x332d0d);(!_0x229660||(_0x10ac4d(0x1bf)in _0x229660?!_0x4348d1[_0x10ac4d(0x198)]:_0x229660['writable']||_0x229660['configurable']))&&(_0x229660={'enumerable':!![],'get':function(){return _0x4348d1[_0x332d0d];}}),Object['defineProperty'](_0x1f12c9,_0x4ae4f4,_0x229660);}:function(_0x2354b6,_0x1d6856,_0x4be70e,_0x3f4147){if(_0x3f4147===undefined)_0x3f4147=_0x4be70e;_0x2354b6[_0x3f4147]=_0x1d6856[_0x4be70e];}),__setModuleDefault=this&&this[a604_0x26b892(0x196)]||(Object[a604_0x26b892(0x1ba)]?function(_0x4acf7c,_0x49ae9a){const _0x41bf36=a604_0x26b892;Object[_0x41bf36(0x195)](_0x4acf7c,_0x41bf36(0x1a5),{'enumerable':!![],'value':_0x49ae9a});}:function(_0x3b6e35,_0x333adf){const _0x3ccda9=a604_0x26b892;_0x3b6e35[_0x3ccda9(0x1a5)]=_0x333adf;}),__importStar=this&&this[a604_0x26b892(0x1b7)]||function(_0x5b5cad){const _0x4faa40=a604_0x26b892;if(_0x5b5cad&&_0x5b5cad[_0x4faa40(0x198)])return _0x5b5cad;var _0x294657={};if(_0x5b5cad!=null){for(var _0x189187 in _0x5b5cad)if(_0x189187!=='default'&&Object[_0x4faa40(0x1af)][_0x4faa40(0x19d)][_0x4faa40(0x1c0)](_0x5b5cad,_0x189187))__createBinding(_0x294657,_0x5b5cad,_0x189187);}return __setModuleDefault(_0x294657,_0x5b5cad),_0x294657;},__importDefault=this&&this['__importDefault']||function(_0x29023f){const _0x210070=a604_0x26b892;return _0x29023f&&_0x29023f[_0x210070(0x198)]?_0x29023f:{'default':_0x29023f};};Object[a604_0x26b892(0x195)](exports,a604_0x26b892(0x198),{'value':!![]});const Yup=__importStar(require(a604_0x26b892(0x1a3))),AppError_1=__importDefault(require(a604_0x26b892(0x19e))),SerializeUser_1=require(a604_0x26b892(0x1ac)),User_1=__importDefault(require(a604_0x26b892(0x1b4))),Plan_1=__importDefault(require('../../models/Plan')),Company_1=__importDefault(require(a604_0x26b892(0x1a1))),CreateUserService=async({email:_0x466549,password:_0x5d701e,name:_0x274e2f,queueIds:queueIds=[],companyId:_0x55928e,profile:profile='admin',startWork:_0x11cc08,endWork:_0x3f394a,whatsappId:_0x34771d,allTicket:_0x494c1a,defaultTheme:_0x296abd,defaultMenu:_0x1f61a4,allowGroup:_0x406f63,allHistoric:_0x27c536,allUserChat:_0x29c9bb})=>{const _0x256c11=a604_0x26b892;if(_0x55928e!==undefined){const _0x5efd3a=await Company_1['default'][_0x256c11(0x1b2)]({'where':{'id':_0x55928e},'include':[{'model':Plan_1[_0x256c11(0x1a5)],'as':_0x256c11(0x1ad)}]});if(_0x5efd3a!==null){const _0x314b16=await User_1[_0x256c11(0x1a5)][_0x256c11(0x1be)]({'where':{'companyId':_0x55928e}});if(_0x314b16>=_0x5efd3a['plan'][_0x256c11(0x1b6)])throw new AppError_1[(_0x256c11(0x1a5))](_0x256c11(0x1ae)+_0x314b16);}}const _0x5cedda=Yup[_0x256c11(0x194)]()[_0x256c11(0x1bb)]({'name':Yup['string']()[_0x256c11(0x1a2)]()[_0x256c11(0x19a)](0x2),'allHistoric':Yup[_0x256c11(0x1b9)](),'email':Yup['string']()[_0x256c11(0x1bc)]()[_0x256c11(0x1a2)]()[_0x256c11(0x19c)]('Check-email',_0x256c11(0x1aa),async _0x565bf1=>{const _0x27aae1=_0x256c11;if(!_0x565bf1)return![];const _0x1fff28=await User_1[_0x27aae1(0x1a5)][_0x27aae1(0x1b2)]({'where':{'email':_0x565bf1}});return!_0x1fff28;}),'password':Yup['string']()[_0x256c11(0x1a2)]()[_0x256c11(0x19a)](0x5)});try{await _0x5cedda[_0x256c11(0x1a9)]({'email':_0x466549,'password':_0x5d701e,'name':_0x274e2f});}catch(_0x55c593){throw new AppError_1['default'](_0x55c593[_0x256c11(0x19f)]);}const _0x1e2e88=await User_1[_0x256c11(0x1a5)]['create']({'email':_0x466549,'password':_0x5d701e,'name':_0x274e2f,'companyId':_0x55928e,'profile':profile,'startWork':_0x11cc08,'endWork':_0x3f394a,'whatsappId':_0x34771d||null,'allTicket':_0x494c1a,'defaultTheme':_0x296abd,'defaultMenu':_0x1f61a4,'allowGroup':_0x406f63,'allHistoric':_0x27c536,'allUserChat':_0x29c9bb},{'include':[_0x256c11(0x1a0),_0x256c11(0x1a6)]});await _0x1e2e88['$set'](_0x256c11(0x1a0),queueIds),await _0x1e2e88[_0x256c11(0x19b)]();const _0x14ad67=(0x0,SerializeUser_1['SerializeUser'])(_0x1e2e88);return _0x14ad67;};exports[a604_0x26b892(0x1a5)]=CreateUserService;function a604_0x21b6(){const _0x4e6b98=['__esModule','1032942jnxgCw','min','reload','test','hasOwnProperty','../../errors/AppError','message','queues','../../models/Company','required','yup','119340kkycNL','default','company','2906NelBAs','108qkCHte','validate','An\x20user\x20with\x20this\x20email\x20already\x20exists.','5kTHbMZ','../../helpers/SerializeUser','plan','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','prototype','8853108nhhruk','415632FBmBCB','findOne','591cogRkh','../../models/User','3320uJbVCN','users','__importStar','158euQMls','string','create','shape','email','__createBinding','count','get','call','object','defineProperty','__setModuleDefault','541640doyhhF'];a604_0x21b6=function(){return _0x4e6b98;};return a604_0x21b6();}