'use strict';const a552_0xe86a4d=a552_0x206a;(function(_0x43c511,_0x166a17){const _0x1ec242=a552_0x206a,_0x2c843e=_0x43c511();while(!![]){try{const _0x11c9b9=-parseInt(_0x1ec242(0x17c))/0x1*(-parseInt(_0x1ec242(0x17d))/0x2)+-parseInt(_0x1ec242(0x172))/0x3*(parseInt(_0x1ec242(0x181))/0x4)+-parseInt(_0x1ec242(0x169))/0x5*(-parseInt(_0x1ec242(0x184))/0x6)+parseInt(_0x1ec242(0x16d))/0x7+-parseInt(_0x1ec242(0x186))/0x8+-parseInt(_0x1ec242(0x163))/0x9*(-parseInt(_0x1ec242(0x17a))/0xa)+-parseInt(_0x1ec242(0x176))/0xb*(parseInt(_0x1ec242(0x161))/0xc);if(_0x11c9b9===_0x166a17)break;else _0x2c843e['push'](_0x2c843e['shift']());}catch(_0x41a0e3){_0x2c843e['push'](_0x2c843e['shift']());}}}(a552_0x39fd,0xc8b3d));var __createBinding=this&&this[a552_0xe86a4d(0x182)]||(Object['create']?function(_0x5bfddf,_0x21ed2e,_0x2656e5,_0x31f073){const _0x4b0ceb=a552_0xe86a4d;if(_0x31f073===undefined)_0x31f073=_0x2656e5;var _0x3a4259=Object['getOwnPropertyDescriptor'](_0x21ed2e,_0x2656e5);(!_0x3a4259||(_0x4b0ceb(0x177)in _0x3a4259?!_0x21ed2e[_0x4b0ceb(0x175)]:_0x3a4259['writable']||_0x3a4259[_0x4b0ceb(0x185)]))&&(_0x3a4259={'enumerable':!![],'get':function(){return _0x21ed2e[_0x2656e5];}}),Object[_0x4b0ceb(0x164)](_0x5bfddf,_0x31f073,_0x3a4259);}:function(_0x5ade33,_0x457e19,_0x594125,_0x6d9ff1){if(_0x6d9ff1===undefined)_0x6d9ff1=_0x594125;_0x5ade33[_0x6d9ff1]=_0x457e19[_0x594125];}),__setModuleDefault=this&&this[a552_0xe86a4d(0x189)]||(Object[a552_0xe86a4d(0x160)]?function(_0x361b29,_0x42f085){const _0x585277=a552_0xe86a4d;Object[_0x585277(0x164)](_0x361b29,_0x585277(0x17b),{'enumerable':!![],'value':_0x42f085});}:function(_0x3e41e1,_0x508567){const _0x4f7d8c=a552_0xe86a4d;_0x3e41e1[_0x4f7d8c(0x17b)]=_0x508567;}),__importStar=this&&this['__importStar']||function(_0x573a18){const _0x2e7927=a552_0xe86a4d;if(_0x573a18&&_0x573a18['__esModule'])return _0x573a18;var _0x448afc={};if(_0x573a18!=null){for(var _0x51846d in _0x573a18)if(_0x51846d!=='default'&&Object[_0x2e7927(0x179)][_0x2e7927(0x167)]['call'](_0x573a18,_0x51846d))__createBinding(_0x448afc,_0x573a18,_0x51846d);}return __setModuleDefault(_0x448afc,_0x573a18),_0x448afc;},__importDefault=this&&this[a552_0xe86a4d(0x16c)]||function(_0x52791d){return _0x52791d&&_0x52791d['__esModule']?_0x52791d:{'default':_0x52791d};};Object[a552_0xe86a4d(0x164)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a552_0xe86a4d(0x168))),AppError_1=__importDefault(require(a552_0xe86a4d(0x173))),SerializeUser_1=require('../../helpers/SerializeUser'),User_1=__importDefault(require(a552_0xe86a4d(0x188))),Plan_1=__importDefault(require('../../models/Plan')),Company_1=__importDefault(require(a552_0xe86a4d(0x170))),CreateUserService=async({email:_0x1e08ca,password:_0x5bd389,name:_0x108932,queueIds:queueIds=[],companyId:_0x10b546,profile:profile='admin',startWork:_0x528897,endWork:_0x23cd54,whatsappId:_0x27461e,allTicket:_0x1105d1,defaultTheme:_0x2419a3,defaultMenu:_0x4b625d,allowGroup:_0x16780f})=>{const _0x2242b8=a552_0xe86a4d;if(_0x10b546!==undefined){const _0x25ef6a=await Company_1[_0x2242b8(0x17b)][_0x2242b8(0x16a)]({'where':{'id':_0x10b546},'include':[{'model':Plan_1[_0x2242b8(0x17b)],'as':_0x2242b8(0x174)}]});if(_0x25ef6a!==null){const _0x1cc4f7=await User_1[_0x2242b8(0x17b)][_0x2242b8(0x180)]({'where':{'companyId':_0x10b546}});if(_0x1cc4f7>=_0x25ef6a[_0x2242b8(0x174)][_0x2242b8(0x16b)])throw new AppError_1[(_0x2242b8(0x17b))]('Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20'+_0x1cc4f7);}}const _0x3baaa2=Yup['object']()[_0x2242b8(0x17f)]({'name':Yup['string']()[_0x2242b8(0x16f)]()[_0x2242b8(0x162)](0x2),'email':Yup[_0x2242b8(0x178)]()['email']()[_0x2242b8(0x16f)]()['test'](_0x2242b8(0x165),_0x2242b8(0x171),async _0x4f6fd4=>{const _0x4ad6cb=_0x2242b8;if(!_0x4f6fd4)return![];const _0xe90edc=await User_1[_0x4ad6cb(0x17b)][_0x4ad6cb(0x16a)]({'where':{'email':_0x4f6fd4}});return!_0xe90edc;}),'password':Yup['string']()[_0x2242b8(0x16f)]()[_0x2242b8(0x162)](0x5)});try{await _0x3baaa2[_0x2242b8(0x17e)]({'email':_0x1e08ca,'password':_0x5bd389,'name':_0x108932});}catch(_0x26b595){throw new AppError_1[(_0x2242b8(0x17b))](_0x26b595['message']);}const _0x2971e2=await User_1[_0x2242b8(0x17b)][_0x2242b8(0x160)]({'email':_0x1e08ca,'password':_0x5bd389,'name':_0x108932,'companyId':_0x10b546,'profile':profile,'startWork':_0x528897,'endWork':_0x23cd54,'whatsappId':_0x27461e||null,'allTicket':_0x1105d1,'defaultTheme':_0x2419a3,'defaultMenu':_0x4b625d,'allowGroup':_0x16780f},{'include':['queues','company']});await _0x2971e2[_0x2242b8(0x166)](_0x2242b8(0x187),queueIds),await _0x2971e2[_0x2242b8(0x183)]();const _0x199f8d=(0x0,SerializeUser_1[_0x2242b8(0x16e)])(_0x2971e2);return _0x199f8d;};function a552_0x206a(_0x45d12f,_0x199505){const _0x39fdfb=a552_0x39fd();return a552_0x206a=function(_0x206acd,_0x15e4a9){_0x206acd=_0x206acd-0x160;let _0x1cc8c9=_0x39fdfb[_0x206acd];return _0x1cc8c9;},a552_0x206a(_0x45d12f,_0x199505);}exports[a552_0xe86a4d(0x17b)]=CreateUserService;function a552_0x39fd(){const _0x1bf19d=['queues','../../models/User','__setModuleDefault','create','24NcVAFD','min','26901htUepL','defineProperty','Check-email','$set','hasOwnProperty','yup','7640vKqPxR','findOne','users','__importDefault','7220178oBoZSY','SerializeUser','required','../../models/Company','An\x20user\x20with\x20this\x20email\x20already\x20exists.','1193289gkszAY','../../errors/AppError','plan','__esModule','7466393kgAPOk','get','string','prototype','2870DbQFKz','default','3055BofMDC','422rKjwxi','validate','shape','count','16jtAzGr','__createBinding','reload','5388sivhuY','configurable','1083128hrelXM'];a552_0x39fd=function(){return _0x1bf19d;};return a552_0x39fd();}