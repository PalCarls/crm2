'use strict';const a546_0x56b017=a546_0x3fe5;(function(_0xa1e59a,_0x5be06a){const _0x2f1e60=a546_0x3fe5,_0x30168e=_0xa1e59a();while(!![]){try{const _0x170c9b=-parseInt(_0x2f1e60(0x171))/0x1+-parseInt(_0x2f1e60(0x181))/0x2*(parseInt(_0x2f1e60(0x173))/0x3)+parseInt(_0x2f1e60(0x184))/0x4*(parseInt(_0x2f1e60(0x17c))/0x5)+parseInt(_0x2f1e60(0x193))/0x6+parseInt(_0x2f1e60(0x16e))/0x7*(parseInt(_0x2f1e60(0x188))/0x8)+-parseInt(_0x2f1e60(0x176))/0x9*(-parseInt(_0x2f1e60(0x17f))/0xa)+parseInt(_0x2f1e60(0x168))/0xb*(-parseInt(_0x2f1e60(0x165))/0xc);if(_0x170c9b===_0x5be06a)break;else _0x30168e['push'](_0x30168e['shift']());}catch(_0x1ba3cc){_0x30168e['push'](_0x30168e['shift']());}}}(a546_0x5a93,0x568b1));var __createBinding=this&&this[a546_0x56b017(0x186)]||(Object[a546_0x56b017(0x17d)]?function(_0x4e3b72,_0x339a77,_0x5a1987,_0x1d0040){const _0x44dc13=a546_0x56b017;if(_0x1d0040===undefined)_0x1d0040=_0x5a1987;var _0x377d13=Object[_0x44dc13(0x190)](_0x339a77,_0x5a1987);(!_0x377d13||(_0x44dc13(0x174)in _0x377d13?!_0x339a77['__esModule']:_0x377d13[_0x44dc13(0x189)]||_0x377d13[_0x44dc13(0x170)]))&&(_0x377d13={'enumerable':!![],'get':function(){return _0x339a77[_0x5a1987];}}),Object['defineProperty'](_0x4e3b72,_0x1d0040,_0x377d13);}:function(_0x3ac451,_0x5a56f5,_0x32b2af,_0x2aab77){if(_0x2aab77===undefined)_0x2aab77=_0x32b2af;_0x3ac451[_0x2aab77]=_0x5a56f5[_0x32b2af];}),__setModuleDefault=this&&this[a546_0x56b017(0x166)]||(Object[a546_0x56b017(0x17d)]?function(_0x8e82a2,_0x44a2f3){const _0x243a72=a546_0x56b017;Object[_0x243a72(0x18b)](_0x8e82a2,_0x243a72(0x17a),{'enumerable':!![],'value':_0x44a2f3});}:function(_0x36df41,_0x53eb71){const _0x1b7986=a546_0x56b017;_0x36df41[_0x1b7986(0x17a)]=_0x53eb71;}),__importStar=this&&this['__importStar']||function(_0x1a8008){const _0x4ebc9c=a546_0x56b017;if(_0x1a8008&&_0x1a8008[_0x4ebc9c(0x172)])return _0x1a8008;var _0x3bb97b={};if(_0x1a8008!=null){for(var _0x49e5a8 in _0x1a8008)if(_0x49e5a8!==_0x4ebc9c(0x17a)&&Object['prototype'][_0x4ebc9c(0x16f)][_0x4ebc9c(0x18d)](_0x1a8008,_0x49e5a8))__createBinding(_0x3bb97b,_0x1a8008,_0x49e5a8);}return __setModuleDefault(_0x3bb97b,_0x1a8008),_0x3bb97b;},__importDefault=this&&this[a546_0x56b017(0x16d)]||function(_0x22c7f9){const _0x3187c2=a546_0x56b017;return _0x22c7f9&&_0x22c7f9[_0x3187c2(0x172)]?_0x22c7f9:{'default':_0x22c7f9};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a546_0x56b017(0x16a))),AppError_1=__importDefault(require(a546_0x56b017(0x17e))),SerializeUser_1=require(a546_0x56b017(0x18a)),User_1=__importDefault(require(a546_0x56b017(0x18f))),Plan_1=__importDefault(require(a546_0x56b017(0x16b))),Company_1=__importDefault(require(a546_0x56b017(0x182))),CreateUserService=async({email:_0x633135,password:_0x173ad8,name:_0x7fd108,queueIds:queueIds=[],companyId:_0x201286,profile:profile=a546_0x56b017(0x185),startWork:_0x2e4b8a,endWork:_0x3613a0,whatsappId:_0x28917b,allTicket:_0x5eb28f,defaultTheme:_0x46108e,defaultMenu:_0x1109e5,allowGroup:_0x223bf0})=>{const _0x12f0a0=a546_0x56b017;if(_0x201286!==undefined){const _0x43f1f6=await Company_1[_0x12f0a0(0x17a)][_0x12f0a0(0x16c)]({'where':{'id':_0x201286},'include':[{'model':Plan_1[_0x12f0a0(0x17a)],'as':_0x12f0a0(0x177)}]});if(_0x43f1f6!==null){const _0x3d31b5=await User_1[_0x12f0a0(0x17a)][_0x12f0a0(0x178)]({'where':{'companyId':_0x201286}});if(_0x3d31b5>=_0x43f1f6[_0x12f0a0(0x177)][_0x12f0a0(0x167)])throw new AppError_1['default']('Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20'+_0x3d31b5);}}const _0x35111d=Yup[_0x12f0a0(0x17b)]()[_0x12f0a0(0x18e)]({'name':Yup['string']()[_0x12f0a0(0x169)]()[_0x12f0a0(0x180)](0x2),'email':Yup[_0x12f0a0(0x187)]()[_0x12f0a0(0x192)]()['required']()['test']('Check-email',_0x12f0a0(0x18c),async _0x3c583f=>{const _0x39b535=_0x12f0a0;if(!_0x3c583f)return![];const _0x4d773b=await User_1[_0x39b535(0x17a)][_0x39b535(0x16c)]({'where':{'email':_0x3c583f}});return!_0x4d773b;}),'password':Yup[_0x12f0a0(0x187)]()[_0x12f0a0(0x169)]()['min'](0x5)});try{await _0x35111d[_0x12f0a0(0x175)]({'email':_0x633135,'password':_0x173ad8,'name':_0x7fd108});}catch(_0x4b4afc){throw new AppError_1[(_0x12f0a0(0x17a))](_0x4b4afc[_0x12f0a0(0x179)]);}const _0x27dfd8=await User_1[_0x12f0a0(0x17a)][_0x12f0a0(0x17d)]({'email':_0x633135,'password':_0x173ad8,'name':_0x7fd108,'companyId':_0x201286,'profile':profile,'startWork':_0x2e4b8a,'endWork':_0x3613a0,'whatsappId':_0x28917b||null,'allTicket':_0x5eb28f,'defaultTheme':_0x46108e,'defaultMenu':_0x1109e5,'allowGroup':_0x223bf0},{'include':['queues','company']});await _0x27dfd8[_0x12f0a0(0x191)]('queues',queueIds),await _0x27dfd8[_0x12f0a0(0x183)]();const _0x337404=(0x0,SerializeUser_1['SerializeUser'])(_0x27dfd8);return _0x337404;};exports[a546_0x56b017(0x17a)]=CreateUserService;function a546_0x3fe5(_0xe1166e,_0x9e8da7){const _0x5a93c4=a546_0x5a93();return a546_0x3fe5=function(_0x3fe57d,_0x1cdcdb){_0x3fe57d=_0x3fe57d-0x165;let _0x7202ee=_0x5a93c4[_0x3fe57d];return _0x7202ee;},a546_0x3fe5(_0xe1166e,_0x9e8da7);}function a546_0x5a93(){const _0x48b577=['$set','email','3552858tHOaJH','1416hNOLOs','__setModuleDefault','users','70796KuwBfY','required','yup','../../models/Plan','findOne','__importDefault','28308hydaQs','hasOwnProperty','configurable','442187uamrZe','__esModule','2088021entDnw','get','validate','171PBDzSQ','plan','count','message','default','object','2555GdlojE','create','../../errors/AppError','319860ftKSBJ','min','2QUIxrN','../../models/Company','reload','2792FhUYBF','admin','__createBinding','string','1376LdUiMg','writable','../../helpers/SerializeUser','defineProperty','An\x20user\x20with\x20this\x20email\x20already\x20exists.','call','shape','../../models/User','getOwnPropertyDescriptor'];a546_0x5a93=function(){return _0x48b577;};return a546_0x5a93();}