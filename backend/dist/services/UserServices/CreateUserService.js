'use strict';const a529_0x43c239=a529_0x5405;(function(_0x36dac1,_0x4ea39f){const _0x522ae3=a529_0x5405,_0x18d4ae=_0x36dac1();while(!![]){try{const _0x3ebb7d=-parseInt(_0x522ae3(0xad))/0x1+-parseInt(_0x522ae3(0xa1))/0x2+parseInt(_0x522ae3(0x9e))/0x3+parseInt(_0x522ae3(0xa3))/0x4+parseInt(_0x522ae3(0xae))/0x5*(parseInt(_0x522ae3(0x98))/0x6)+-parseInt(_0x522ae3(0x9a))/0x7+parseInt(_0x522ae3(0xb4))/0x8;if(_0x3ebb7d===_0x4ea39f)break;else _0x18d4ae['push'](_0x18d4ae['shift']());}catch(_0x1cf1e9){_0x18d4ae['push'](_0x18d4ae['shift']());}}}(a529_0x3363,0x5d122));var __createBinding=this&&this[a529_0x43c239(0xa2)]||(Object[a529_0x43c239(0x99)]?function(_0x2a9cf8,_0x461e9,_0x537400,_0x51fc51){const _0x5a405a=a529_0x43c239;if(_0x51fc51===undefined)_0x51fc51=_0x537400;var _0x352e18=Object[_0x5a405a(0x9b)](_0x461e9,_0x537400);(!_0x352e18||('get'in _0x352e18?!_0x461e9[_0x5a405a(0xc0)]:_0x352e18[_0x5a405a(0xa6)]||_0x352e18[_0x5a405a(0xc1)]))&&(_0x352e18={'enumerable':!![],'get':function(){return _0x461e9[_0x537400];}}),Object[_0x5a405a(0x9f)](_0x2a9cf8,_0x51fc51,_0x352e18);}:function(_0x2755bc,_0x37789b,_0x234cd6,_0x303eb7){if(_0x303eb7===undefined)_0x303eb7=_0x234cd6;_0x2755bc[_0x303eb7]=_0x37789b[_0x234cd6];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x8d7143,_0x11ecd5){Object['defineProperty'](_0x8d7143,'default',{'enumerable':!![],'value':_0x11ecd5});}:function(_0x2eb204,_0x4ec55d){const _0x33b8fc=a529_0x43c239;_0x2eb204[_0x33b8fc(0xbb)]=_0x4ec55d;}),__importStar=this&&this[a529_0x43c239(0xa5)]||function(_0x12d2ca){const _0x3ed2d3=a529_0x43c239;if(_0x12d2ca&&_0x12d2ca[_0x3ed2d3(0xc0)])return _0x12d2ca;var _0x3da2eb={};if(_0x12d2ca!=null){for(var _0x2de624 in _0x12d2ca)if(_0x2de624!=='default'&&Object[_0x3ed2d3(0xb1)][_0x3ed2d3(0x9c)][_0x3ed2d3(0xb9)](_0x12d2ca,_0x2de624))__createBinding(_0x3da2eb,_0x12d2ca,_0x2de624);}return __setModuleDefault(_0x3da2eb,_0x12d2ca),_0x3da2eb;},__importDefault=this&&this[a529_0x43c239(0xbe)]||function(_0x4ee2ca){const _0xee4741=a529_0x43c239;return _0x4ee2ca&&_0x4ee2ca[_0xee4741(0xc0)]?_0x4ee2ca:{'default':_0x4ee2ca};};Object['defineProperty'](exports,a529_0x43c239(0xc0),{'value':!![]});function a529_0x5405(_0x3d73bb,_0x175a8c){const _0x336344=a529_0x3363();return a529_0x5405=function(_0x54059a,_0x4cd462){_0x54059a=_0x54059a-0x97;let _0x5b7948=_0x336344[_0x54059a];return _0x5b7948;},a529_0x5405(_0x3d73bb,_0x175a8c);}function a529_0x3363(){const _0x2613d7=['2390BKVAFU','shape','Check-email','prototype','test','string','7879616JpulSn','admin','validate','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','email','call','company','default','plan','users','__importDefault','object','__esModule','configurable','message','required','6024ZedEeE','create','2171701Krdpoc','getOwnPropertyDescriptor','hasOwnProperty','reload','247353vwhmQH','defineProperty','An\x20user\x20with\x20this\x20email\x20already\x20exists.','1284130sgwPSx','__createBinding','570288hIcAhQ','min','__importStar','writable','../../helpers/SerializeUser','yup','../../models/Company','../../models/Plan','../../errors/AppError','../../models/User','356361vCelLF'];a529_0x3363=function(){return _0x2613d7;};return a529_0x3363();}const Yup=__importStar(require(a529_0x43c239(0xa8))),AppError_1=__importDefault(require(a529_0x43c239(0xab))),SerializeUser_1=require(a529_0x43c239(0xa7)),User_1=__importDefault(require(a529_0x43c239(0xac))),Plan_1=__importDefault(require(a529_0x43c239(0xaa))),Company_1=__importDefault(require(a529_0x43c239(0xa9))),CreateUserService=async({email:_0x1af273,password:_0x19f325,name:_0x4da374,queueIds:queueIds=[],companyId:_0x34b8fb,profile:profile=a529_0x43c239(0xb5),startWork:_0x3fc09d,endWork:_0x155a82,whatsappId:_0x451292,allTicket:_0x225fb5,defaultTheme:_0x27f4e0,defaultMenu:_0x5de524,allowGroup:_0x4cd439})=>{const _0x3f782b=a529_0x43c239;if(_0x34b8fb!==undefined){const _0x2f52fa=await Company_1['default']['findOne']({'where':{'id':_0x34b8fb},'include':[{'model':Plan_1[_0x3f782b(0xbb)],'as':'plan'}]});if(_0x2f52fa!==null){const _0x15548b=await User_1[_0x3f782b(0xbb)]['count']({'where':{'companyId':_0x34b8fb}});if(_0x15548b>=_0x2f52fa[_0x3f782b(0xbc)][_0x3f782b(0xbd)])throw new AppError_1[(_0x3f782b(0xbb))](_0x3f782b(0xb7)+_0x15548b);}}const _0x15cde2=Yup[_0x3f782b(0xbf)]()[_0x3f782b(0xaf)]({'name':Yup['string']()[_0x3f782b(0x97)]()[_0x3f782b(0xa4)](0x2),'email':Yup[_0x3f782b(0xb3)]()[_0x3f782b(0xb8)]()[_0x3f782b(0x97)]()[_0x3f782b(0xb2)](_0x3f782b(0xb0),_0x3f782b(0xa0),async _0x54c34c=>{const _0x347823=_0x3f782b;if(!_0x54c34c)return![];const _0x1f46c8=await User_1[_0x347823(0xbb)]['findOne']({'where':{'email':_0x54c34c}});return!_0x1f46c8;}),'password':Yup['string']()[_0x3f782b(0x97)]()[_0x3f782b(0xa4)](0x5)});try{await _0x15cde2[_0x3f782b(0xb6)]({'email':_0x1af273,'password':_0x19f325,'name':_0x4da374});}catch(_0x3f9d7d){throw new AppError_1['default'](_0x3f9d7d[_0x3f782b(0xc2)]);}const _0x5f0f5e=await User_1[_0x3f782b(0xbb)][_0x3f782b(0x99)]({'email':_0x1af273,'password':_0x19f325,'name':_0x4da374,'companyId':_0x34b8fb,'profile':profile,'startWork':_0x3fc09d,'endWork':_0x155a82,'whatsappId':_0x451292||null,'allTicket':_0x225fb5,'defaultTheme':_0x27f4e0,'defaultMenu':_0x5de524,'allowGroup':_0x4cd439},{'include':['queues',_0x3f782b(0xba)]});await _0x5f0f5e['$set']('queues',queueIds),await _0x5f0f5e[_0x3f782b(0x9d)]();const _0x37acac=(0x0,SerializeUser_1['SerializeUser'])(_0x5f0f5e);return _0x37acac;};exports[a529_0x43c239(0xbb)]=CreateUserService;