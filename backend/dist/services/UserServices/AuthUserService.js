'use strict';function a509_0xc5b7(){const _0x4bb993=['checkPassword','8559522cMxxwi','2381292JnuOZk','30237Fatrnr','../../helpers/CreateTokens','endWork','__esModule','788664LAuKrX','createAccessToken','SerializeUser','1448790kvtJUI','../../models/Setting','env','../../helpers/SerializeUser','MASTER_KEY','5313084QCCyna','8Hbsmlx','__importDefault','default','../../models/User','40qlGamx','getMinutes','queues','defineProperty','7265355fBnPjp','ERR_INVALID_CREDENTIALS','findOne','split'];a509_0xc5b7=function(){return _0x4bb993;};return a509_0xc5b7();}const a509_0x237da9=a509_0x454b;(function(_0x335fcb,_0x1cdd9f){const _0x259b3f=a509_0x454b,_0x543ddb=_0x335fcb();while(!![]){try{const _0x39b9e5=-parseInt(_0x259b3f(0x1fe))/0x1+-parseInt(_0x259b3f(0x208))/0x2*(-parseInt(_0x259b3f(0x1f7))/0x3)+parseInt(_0x259b3f(0x1f6))/0x4+parseInt(_0x259b3f(0x1f0))/0x5+parseInt(_0x259b3f(0x1fb))/0x6+parseInt(_0x259b3f(0x203))/0x7+parseInt(_0x259b3f(0x204))/0x8*(-parseInt(_0x259b3f(0x1f5))/0x9);if(_0x39b9e5===_0x1cdd9f)break;else _0x543ddb['push'](_0x543ddb['shift']());}catch(_0x341deb){_0x543ddb['push'](_0x543ddb['shift']());}}}(a509_0xc5b7,0xb4ce6));var __importDefault=this&&this[a509_0x237da9(0x205)]||function(_0x313f7d){const _0x318531=a509_0x237da9;return _0x313f7d&&_0x313f7d[_0x318531(0x1fa)]?_0x313f7d:{'default':_0x313f7d};};Object[a509_0x237da9(0x1ef)](exports,a509_0x237da9(0x1fa),{'value':!![]});const User_1=__importDefault(require(a509_0x237da9(0x207))),AppError_1=__importDefault(require('../../errors/AppError')),CreateTokens_1=require(a509_0x237da9(0x1f8)),SerializeUser_1=require(a509_0x237da9(0x201)),Company_1=__importDefault(require('../../models/Company')),Setting_1=__importDefault(require(a509_0x237da9(0x1ff))),AuthUserService=async({email:_0x20dfc3,password:_0x6aef59})=>{const _0x1d1340=a509_0x237da9,_0x2020eb=await User_1[_0x1d1340(0x206)][_0x1d1340(0x1f2)]({'where':{'email':_0x20dfc3},'include':[_0x1d1340(0x20a),{'model':Company_1[_0x1d1340(0x206)],'include':[{'model':Setting_1['default']}]}]});if(!_0x2020eb)throw new AppError_1[(_0x1d1340(0x206))](_0x1d1340(0x1f1),0x191);const _0x123625=new Date(),_0x33f83a=_0x123625['getHours']()*0x3c*0x3c,_0x105f3e=_0x123625[_0x1d1340(0x209)]()*0x3c,_0x149f1d=_0x33f83a+_0x105f3e,_0xbd78f3=_0x2020eb['startWork'],_0x1e6f76=Number(_0xbd78f3[_0x1d1340(0x1f3)](':')[0x0])*0x3c*0x3c,_0x2555ee=Number(_0xbd78f3[_0x1d1340(0x1f3)](':')[0x1])*0x3c,_0x141f59=_0x1e6f76+_0x2555ee,_0x16f501=_0x2020eb[_0x1d1340(0x1f9)],_0x42a74a=Number(_0x16f501[_0x1d1340(0x1f3)](':')[0x0])*0x3c*0x3c,_0xdcbfcb=Number(_0x16f501[_0x1d1340(0x1f3)](':')[0x1])*0x3c,_0x2429a7=_0x42a74a+_0xdcbfcb;if(_0x149f1d<_0x141f59||_0x149f1d>_0x2429a7)throw new AppError_1[(_0x1d1340(0x206))]('ERR_OUT_OF_HOURS',0x191);if(_0x6aef59===process[_0x1d1340(0x200)][_0x1d1340(0x202)]){}else{if(await _0x2020eb[_0x1d1340(0x1f4)](_0x6aef59)){const _0x54f1eb=await Company_1['default']['findByPk'](_0x2020eb?.['companyId']);await _0x54f1eb['update']({'lastLogin':new Date()});}else throw new AppError_1['default'](_0x1d1340(0x1f1),0x191);}const _0x54904c=(0x0,CreateTokens_1[_0x1d1340(0x1fc)])(_0x2020eb),_0x239a07=(0x0,CreateTokens_1['createRefreshToken'])(_0x2020eb),_0x289b73=await(0x0,SerializeUser_1[_0x1d1340(0x1fd)])(_0x2020eb);return{'serializedUser':_0x289b73,'token':_0x54904c,'refreshToken':_0x239a07};};function a509_0x454b(_0x3d3a04,_0x29fc02){const _0xc5b734=a509_0xc5b7();return a509_0x454b=function(_0x454b5d,_0x35d79e){_0x454b5d=_0x454b5d-0x1ef;let _0xa3ccc2=_0xc5b734[_0x454b5d];return _0xa3ccc2;},a509_0x454b(_0x3d3a04,_0x29fc02);}exports[a509_0x237da9(0x206)]=AuthUserService;