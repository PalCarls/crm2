'use strict';function a529_0x3426(){const _0x425150=['startWork','../../helpers/SerializeUser','ERR_INVALID_CREDENTIALS','ERR_OUT_OF_HOURS','148758vnJoQx','1881920FwwBcQ','../../helpers/CreateTokens','createAccessToken','5179491qjZOTn','queues','findByPk','__importDefault','../../models/User','2597672IqAcGw','11002owlBik','../../errors/AppError','createRefreshToken','../../models/Company','split','10fyuUoe','defineProperty','6XSQJWe','env','28OvWlxV','46YJETgK','__esModule','26044997kTiQjQ','default','findOne','../../models/Setting','MASTER_KEY','getHours','update','1226068uoDcrM','getMinutes'];a529_0x3426=function(){return _0x425150;};return a529_0x3426();}const a529_0x343830=a529_0xfb0e;(function(_0x30ff1c,_0x40d00a){const _0x308a4f=a529_0xfb0e,_0x4e1337=_0x30ff1c();while(!![]){try{const _0x4fa3a9=-parseInt(_0x308a4f(0xe9))/0x1*(parseInt(_0x308a4f(0xf3))/0x2)+-parseInt(_0x308a4f(0xf0))/0x3*(parseInt(_0x308a4f(0xfc))/0x4)+-parseInt(_0x308a4f(0x103))/0x5+parseInt(_0x308a4f(0x102))/0x6*(parseInt(_0x308a4f(0xf2))/0x7)+-parseInt(_0x308a4f(0xe8))/0x8+-parseInt(_0x308a4f(0x106))/0x9+parseInt(_0x308a4f(0xee))/0xa*(parseInt(_0x308a4f(0xf5))/0xb);if(_0x4fa3a9===_0x40d00a)break;else _0x4e1337['push'](_0x4e1337['shift']());}catch(_0x30e2dc){_0x4e1337['push'](_0x4e1337['shift']());}}}(a529_0x3426,0x4f283));var __importDefault=this&&this[a529_0x343830(0xe6)]||function(_0x25cf41){const _0x24b5e3=a529_0x343830;return _0x25cf41&&_0x25cf41[_0x24b5e3(0xf4)]?_0x25cf41:{'default':_0x25cf41};};Object[a529_0x343830(0xef)](exports,a529_0x343830(0xf4),{'value':!![]});function a529_0xfb0e(_0x428d48,_0x875e61){const _0x3426d9=a529_0x3426();return a529_0xfb0e=function(_0xfb0ef5,_0x177ba4){_0xfb0ef5=_0xfb0ef5-0xe6;let _0x5466b0=_0x3426d9[_0xfb0ef5];return _0x5466b0;},a529_0xfb0e(_0x428d48,_0x875e61);}const User_1=__importDefault(require(a529_0x343830(0xe7))),AppError_1=__importDefault(require(a529_0x343830(0xea))),CreateTokens_1=require(a529_0x343830(0x104)),SerializeUser_1=require(a529_0x343830(0xff)),Company_1=__importDefault(require(a529_0x343830(0xec))),Setting_1=__importDefault(require(a529_0x343830(0xf8))),AuthUserService=async({email:_0x43015d,password:_0x298e76})=>{const _0x997b09=a529_0x343830,_0x80451b=await User_1[_0x997b09(0xf6)][_0x997b09(0xf7)]({'where':{'email':_0x43015d},'include':[_0x997b09(0x107),{'model':Company_1[_0x997b09(0xf6)],'include':[{'model':Setting_1[_0x997b09(0xf6)]}]}]});if(!_0x80451b)throw new AppError_1['default'](_0x997b09(0x100),0x191);const _0x36685f=new Date(),_0x2e36d8=_0x36685f[_0x997b09(0xfa)]()*0x3c*0x3c,_0x311a4f=_0x36685f[_0x997b09(0xfd)]()*0x3c,_0xfb2834=_0x2e36d8+_0x311a4f,_0x176646=_0x80451b[_0x997b09(0xfe)],_0x1c7e19=Number(_0x176646[_0x997b09(0xed)](':')[0x0])*0x3c*0x3c,_0x19b142=Number(_0x176646['split'](':')[0x1])*0x3c,_0x10c227=_0x1c7e19+_0x19b142,_0xbf97df=_0x80451b['endWork'],_0x2a90ac=Number(_0xbf97df[_0x997b09(0xed)](':')[0x0])*0x3c*0x3c,_0x35041d=Number(_0xbf97df[_0x997b09(0xed)](':')[0x1])*0x3c,_0x21aef4=_0x2a90ac+_0x35041d;if(_0xfb2834<_0x10c227||_0xfb2834>_0x21aef4)throw new AppError_1[(_0x997b09(0xf6))](_0x997b09(0x101),0x191);if(_0x298e76===process[_0x997b09(0xf1)][_0x997b09(0xf9)]){}else{if(await _0x80451b['checkPassword'](_0x298e76)){const _0x22ff28=await Company_1[_0x997b09(0xf6)][_0x997b09(0x108)](_0x80451b?.['companyId']);await _0x22ff28[_0x997b09(0xfb)]({'lastLogin':new Date()});}else throw new AppError_1[(_0x997b09(0xf6))](_0x997b09(0x100),0x191);}const _0x1f0cae=(0x0,CreateTokens_1[_0x997b09(0x105)])(_0x80451b),_0x8c6c5f=(0x0,CreateTokens_1[_0x997b09(0xeb)])(_0x80451b),_0x26ae0c=await(0x0,SerializeUser_1['SerializeUser'])(_0x80451b);return{'serializedUser':_0x26ae0c,'token':_0x1f0cae,'refreshToken':_0x8c6c5f};};exports[a529_0x343830(0xf6)]=AuthUserService;