'use strict';function a610_0x3cad(_0x185e45,_0x265d4c){const _0x524260=a610_0x5242();return a610_0x3cad=function(_0x3cad89,_0x2959e9){_0x3cad89=_0x3cad89-0x73;let _0x43434f=_0x524260[_0x3cad89];return _0x43434f;},a610_0x3cad(_0x185e45,_0x265d4c);}const a610_0x17d9aa=a610_0x3cad;function a610_0x5242(){const _0x25a0ad=['ERR_OUT_OF_HOURS','__esModule','40683084FnshNG','MASTER_KEY','findOne','294daruqr','35349MBAhmL','7OZxuWv','checkPassword','findByPk','default','split','13gnYPbK','430636fXXOBd','getHours','40OvRTna','20LJUSrx','companyId','createRefreshToken','../../helpers/SerializeUser','queues','../../errors/AppError','7727510ixtwxo','52UxwDzF','2038563SQntBb','16590KWsFsW','../../models/CompaniesSettings','../../models/User','createAccessToken','defineProperty','startWork','__importDefault','4467628HOgaSW','../../models/Company','../../helpers/CreateTokens'];a610_0x5242=function(){return _0x25a0ad;};return a610_0x5242();}(function(_0x1a9a7a,_0x104b54){const _0x1ec1ef=a610_0x3cad,_0x1e3010=_0x1a9a7a();while(!![]){try{const _0x3331c3=-parseInt(_0x1ec1ef(0x8e))/0x1*(-parseInt(_0x1ec1ef(0x94))/0x2)+-parseInt(_0x1ec1ef(0x8d))/0x3*(parseInt(_0x1ec1ef(0x7b))/0x4)+parseInt(_0x1ec1ef(0x7d))/0x5*(-parseInt(_0x1ec1ef(0x8c))/0x6)+parseInt(_0x1ec1ef(0x7a))/0x7+parseInt(_0x1ec1ef(0x73))/0x8*(parseInt(_0x1ec1ef(0x7c))/0x9)+parseInt(_0x1ec1ef(0x74))/0xa*(parseInt(_0x1ec1ef(0x84))/0xb)+-parseInt(_0x1ec1ef(0x89))/0xc*(parseInt(_0x1ec1ef(0x93))/0xd);if(_0x3331c3===_0x104b54)break;else _0x1e3010['push'](_0x1e3010['shift']());}catch(_0x361278){_0x1e3010['push'](_0x1e3010['shift']());}}}(a610_0x5242,0xcf831));var __importDefault=this&&this[a610_0x17d9aa(0x83)]||function(_0x408b91){return _0x408b91&&_0x408b91['__esModule']?_0x408b91:{'default':_0x408b91};};Object[a610_0x17d9aa(0x81)](exports,a610_0x17d9aa(0x88),{'value':!![]});const User_1=__importDefault(require(a610_0x17d9aa(0x7f))),AppError_1=__importDefault(require(a610_0x17d9aa(0x79))),CreateTokens_1=require(a610_0x17d9aa(0x86)),SerializeUser_1=require(a610_0x17d9aa(0x77)),Company_1=__importDefault(require(a610_0x17d9aa(0x85))),CompaniesSettings_1=__importDefault(require(a610_0x17d9aa(0x7e))),AuthUserService=async({email:_0x32f4bc,password:_0x25d8b5})=>{const _0x54c98d=a610_0x17d9aa,_0x369fc8=await User_1[_0x54c98d(0x91)][_0x54c98d(0x8b)]({'where':{'email':_0x32f4bc},'include':[_0x54c98d(0x78),{'model':Company_1['default'],'include':[{'model':CompaniesSettings_1['default']}]}]});if(!_0x369fc8)throw new AppError_1['default']('ERR_INVALID_CREDENTIALS',0x191);const _0x2e11f4=new Date(),_0x4cc3a2=_0x2e11f4[_0x54c98d(0x95)]()*0x3c*0x3c,_0x2fd18d=_0x2e11f4['getMinutes']()*0x3c,_0x355c44=_0x4cc3a2+_0x2fd18d,_0x2a744c=_0x369fc8[_0x54c98d(0x82)],_0x129b0e=Number(_0x2a744c[_0x54c98d(0x92)](':')[0x0])*0x3c*0x3c,_0x1634d3=Number(_0x2a744c['split'](':')[0x1])*0x3c,_0x3b3e49=_0x129b0e+_0x1634d3,_0x2c43c0=_0x369fc8['endWork'],_0x313f35=Number(_0x2c43c0[_0x54c98d(0x92)](':')[0x0])*0x3c*0x3c,_0x5808c7=Number(_0x2c43c0[_0x54c98d(0x92)](':')[0x1])*0x3c,_0x5affa4=_0x313f35+_0x5808c7;if(_0x355c44<_0x3b3e49||_0x355c44>_0x5affa4)throw new AppError_1[(_0x54c98d(0x91))](_0x54c98d(0x87),0x191);if(_0x25d8b5===process['env'][_0x54c98d(0x8a)]){}else{if(await _0x369fc8[_0x54c98d(0x8f)](_0x25d8b5)){const _0x1d6154=await Company_1[_0x54c98d(0x91)][_0x54c98d(0x90)](_0x369fc8?.[_0x54c98d(0x75)]);await _0x1d6154['update']({'lastLogin':new Date()});}else throw new AppError_1[(_0x54c98d(0x91))]('ERR_INVALID_CREDENTIALS',0x191);}const _0xf6f5ec=(0x0,CreateTokens_1[_0x54c98d(0x80)])(_0x369fc8),_0x32b45a=(0x0,CreateTokens_1[_0x54c98d(0x76)])(_0x369fc8),_0x16661b=await(0x0,SerializeUser_1['SerializeUser'])(_0x369fc8);return{'serializedUser':_0x16661b,'token':_0xf6f5ec,'refreshToken':_0x32b45a};};exports[a610_0x17d9aa(0x91)]=AuthUserService;