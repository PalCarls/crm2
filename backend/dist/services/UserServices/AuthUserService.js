'use strict';const a545_0x3f67a2=a545_0x4cb9;(function(_0x22c9d4,_0x5f3651){const _0x11a6b8=a545_0x4cb9,_0x39dbf9=_0x22c9d4();while(!![]){try{const _0x21da62=parseInt(_0x11a6b8(0x1ce))/0x1*(parseInt(_0x11a6b8(0x1b7))/0x2)+parseInt(_0x11a6b8(0x1c5))/0x3*(-parseInt(_0x11a6b8(0x1bd))/0x4)+parseInt(_0x11a6b8(0x1bc))/0x5+parseInt(_0x11a6b8(0x1c6))/0x6*(-parseInt(_0x11a6b8(0x1bf))/0x7)+parseInt(_0x11a6b8(0x1b5))/0x8*(-parseInt(_0x11a6b8(0x1b0))/0x9)+parseInt(_0x11a6b8(0x1cc))/0xa*(-parseInt(_0x11a6b8(0x1c3))/0xb)+parseInt(_0x11a6b8(0x1c9))/0xc;if(_0x21da62===_0x5f3651)break;else _0x39dbf9['push'](_0x39dbf9['shift']());}catch(_0x4c85b5){_0x39dbf9['push'](_0x39dbf9['shift']());}}}(a545_0x2de5,0x33f2c));var __importDefault=this&&this[a545_0x3f67a2(0x1be)]||function(_0xa7c337){return _0xa7c337&&_0xa7c337['__esModule']?_0xa7c337:{'default':_0xa7c337};};Object[a545_0x3f67a2(0x1c0)](exports,a545_0x3f67a2(0x1cb),{'value':!![]});const User_1=__importDefault(require('../../models/User')),AppError_1=__importDefault(require(a545_0x3f67a2(0x1b8))),CreateTokens_1=require('../../helpers/CreateTokens'),SerializeUser_1=require('../../helpers/SerializeUser'),Company_1=__importDefault(require(a545_0x3f67a2(0x1ca))),CompaniesSettings_1=__importDefault(require(a545_0x3f67a2(0x1bb))),AuthUserService=async({email:_0x45d3f5,password:_0x4ebf61})=>{const _0x5f3706=a545_0x3f67a2,_0x4e8bfb=await User_1[_0x5f3706(0x1b6)]['findOne']({'where':{'email':_0x45d3f5},'include':[_0x5f3706(0x1af),{'model':Company_1['default'],'include':[{'model':CompaniesSettings_1[_0x5f3706(0x1b6)]}]}]});if(!_0x4e8bfb)throw new AppError_1['default'](_0x5f3706(0x1b9),0x191);const _0xbc0b1a=new Date(),_0x3ec3ea=_0xbc0b1a[_0x5f3706(0x1b2)]()*0x3c*0x3c,_0x185df7=_0xbc0b1a['getMinutes']()*0x3c,_0x3dc559=_0x3ec3ea+_0x185df7,_0x11402d=_0x4e8bfb[_0x5f3706(0x1b3)],_0x42b9c3=Number(_0x11402d['split'](':')[0x0])*0x3c*0x3c,_0x25b231=Number(_0x11402d[_0x5f3706(0x1b1)](':')[0x1])*0x3c,_0x65a096=_0x42b9c3+_0x25b231,_0x16cf6a=_0x4e8bfb['endWork'],_0x5a8161=Number(_0x16cf6a[_0x5f3706(0x1b1)](':')[0x0])*0x3c*0x3c,_0x7fbfc1=Number(_0x16cf6a[_0x5f3706(0x1b1)](':')[0x1])*0x3c,_0x3c398b=_0x5a8161+_0x7fbfc1;if(_0x3dc559<_0x65a096||_0x3dc559>_0x3c398b)throw new AppError_1[(_0x5f3706(0x1b6))](_0x5f3706(0x1c4),0x191);if(_0x4ebf61===process[_0x5f3706(0x1c1)][_0x5f3706(0x1cd)]){}else{if(await _0x4e8bfb[_0x5f3706(0x1c8)](_0x4ebf61)){const _0x545e0c=await Company_1[_0x5f3706(0x1b6)][_0x5f3706(0x1c7)](_0x4e8bfb?.['companyId']);await _0x545e0c[_0x5f3706(0x1b4)]({'lastLogin':new Date()});}else throw new AppError_1[(_0x5f3706(0x1b6))](_0x5f3706(0x1b9),0x191);}const _0x291f9b=(0x0,CreateTokens_1[_0x5f3706(0x1c2)])(_0x4e8bfb),_0x2547f3=(0x0,CreateTokens_1[_0x5f3706(0x1ba)])(_0x4e8bfb),_0x2f8623=await(0x0,SerializeUser_1[_0x5f3706(0x1cf)])(_0x4e8bfb);return{'serializedUser':_0x2f8623,'token':_0x291f9b,'refreshToken':_0x2547f3};};function a545_0x4cb9(_0x56e419,_0x348b98){const _0x2de520=a545_0x2de5();return a545_0x4cb9=function(_0x4cb9ca,_0x3049cd){_0x4cb9ca=_0x4cb9ca-0x1af;let _0x278977=_0x2de520[_0x4cb9ca];return _0x278977;},a545_0x4cb9(_0x56e419,_0x348b98);}function a545_0x2de5(){const _0x44cefd=['MASTER_KEY','3XEgBtI','SerializeUser','queues','2338425juTKIu','split','getHours','startWork','update','8WMtiTH','default','260418wXFAJD','../../errors/AppError','ERR_INVALID_CREDENTIALS','createRefreshToken','../../models/CompaniesSettings','365120ThUuxS','1608592BhimhO','__importDefault','371pgngNJ','defineProperty','env','createAccessToken','11axUCAq','ERR_OUT_OF_HOURS','3TmRJxS','22398zVvlhk','findByPk','checkPassword','10605864BuMVbG','../../models/Company','__esModule','2748710EvNpWE'];a545_0x2de5=function(){return _0x44cefd;};return a545_0x2de5();}exports[a545_0x3f67a2(0x1b6)]=AuthUserService;