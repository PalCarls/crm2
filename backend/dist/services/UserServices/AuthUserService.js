'use strict';const a603_0x278a81=a603_0x3837;(function(_0x4c6743,_0x112997){const _0x2e45a5=a603_0x3837,_0x205ee4=_0x4c6743();while(!![]){try{const _0x3a8495=parseInt(_0x2e45a5(0x124))/0x1+-parseInt(_0x2e45a5(0x10b))/0x2*(-parseInt(_0x2e45a5(0x117))/0x3)+-parseInt(_0x2e45a5(0x11d))/0x4+parseInt(_0x2e45a5(0x119))/0x5+parseInt(_0x2e45a5(0x120))/0x6+parseInt(_0x2e45a5(0x11c))/0x7*(-parseInt(_0x2e45a5(0x123))/0x8)+-parseInt(_0x2e45a5(0x113))/0x9*(parseInt(_0x2e45a5(0x12b))/0xa);if(_0x3a8495===_0x112997)break;else _0x205ee4['push'](_0x205ee4['shift']());}catch(_0x399b19){_0x205ee4['push'](_0x205ee4['shift']());}}}(a603_0x28a5,0xa3a50));function a603_0x28a5(){const _0x3c99b0=['41402zKjrwH','../../models/CompaniesSettings','update','default','__importDefault','SerializeUser','createRefreshToken','ERR_OUT_OF_HOURS','9IlVZqi','__esModule','../../errors/AppError','../../helpers/SerializeUser','165PrgYqv','findByPk','6644860iStSbs','../../models/User','findOne','7IiXUoQ','3919608dsFtje','env','defineProperty','4313358hOvmlk','split','MASTER_KEY','2570936oZficm','1128032qqFxhL','../../helpers/CreateTokens','endWork','queues','getMinutes','ERR_INVALID_CREDENTIALS','createAccessToken','23428950hTGPiV','startWork','companyId','checkPassword'];a603_0x28a5=function(){return _0x3c99b0;};return a603_0x28a5();}function a603_0x3837(_0x21f299,_0x4cdf72){const _0x28a5d9=a603_0x28a5();return a603_0x3837=function(_0x383761,_0x219e7b){_0x383761=_0x383761-0x109;let _0x3867f1=_0x28a5d9[_0x383761];return _0x3867f1;},a603_0x3837(_0x21f299,_0x4cdf72);}var __importDefault=this&&this[a603_0x278a81(0x10f)]||function(_0xf3c4db){const _0x383426=a603_0x278a81;return _0xf3c4db&&_0xf3c4db[_0x383426(0x114)]?_0xf3c4db:{'default':_0xf3c4db};};Object[a603_0x278a81(0x11f)](exports,a603_0x278a81(0x114),{'value':!![]});const User_1=__importDefault(require(a603_0x278a81(0x11a))),AppError_1=__importDefault(require(a603_0x278a81(0x115))),CreateTokens_1=require(a603_0x278a81(0x125)),SerializeUser_1=require(a603_0x278a81(0x116)),Company_1=__importDefault(require('../../models/Company')),CompaniesSettings_1=__importDefault(require(a603_0x278a81(0x10c))),AuthUserService=async({email:_0x848780,password:_0x3ca582})=>{const _0x430939=a603_0x278a81,_0x5a6cbb=await User_1['default'][_0x430939(0x11b)]({'where':{'email':_0x848780},'include':[_0x430939(0x127),{'model':Company_1['default'],'include':[{'model':CompaniesSettings_1[_0x430939(0x10e)]}]}]});if(!_0x5a6cbb)throw new AppError_1[(_0x430939(0x10e))](_0x430939(0x129),0x191);const _0x447fe9=new Date(),_0x349331=_0x447fe9['getHours']()*0x3c*0x3c,_0x992314=_0x447fe9[_0x430939(0x128)]()*0x3c,_0x57f78b=_0x349331+_0x992314,_0x11c4dd=_0x5a6cbb[_0x430939(0x12c)],_0x278f69=Number(_0x11c4dd[_0x430939(0x121)](':')[0x0])*0x3c*0x3c,_0x44fd3f=Number(_0x11c4dd['split'](':')[0x1])*0x3c,_0x3b4b30=_0x278f69+_0x44fd3f,_0x1c3fcd=_0x5a6cbb[_0x430939(0x126)],_0x479230=Number(_0x1c3fcd[_0x430939(0x121)](':')[0x0])*0x3c*0x3c,_0x591d99=Number(_0x1c3fcd[_0x430939(0x121)](':')[0x1])*0x3c,_0x234faf=_0x479230+_0x591d99;if(_0x57f78b<_0x3b4b30||_0x57f78b>_0x234faf)throw new AppError_1[(_0x430939(0x10e))](_0x430939(0x112),0x191);if(_0x3ca582===process[_0x430939(0x11e)][_0x430939(0x122)]){}else{if(await _0x5a6cbb[_0x430939(0x10a)](_0x3ca582)){const _0x5761db=await Company_1[_0x430939(0x10e)][_0x430939(0x118)](_0x5a6cbb?.[_0x430939(0x109)]);await _0x5761db[_0x430939(0x10d)]({'lastLogin':new Date()});}else throw new AppError_1['default'](_0x430939(0x129),0x191);}const _0x13c8bd=(0x0,CreateTokens_1[_0x430939(0x12a)])(_0x5a6cbb),_0x1aefb5=(0x0,CreateTokens_1[_0x430939(0x111)])(_0x5a6cbb),_0x580c2e=await(0x0,SerializeUser_1[_0x430939(0x110)])(_0x5a6cbb);return{'serializedUser':_0x580c2e,'token':_0x13c8bd,'refreshToken':_0x1aefb5};};exports['default']=AuthUserService;