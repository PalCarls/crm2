'use strict';const a545_0x45bda7=a545_0x53ea;(function(_0x460efe,_0x20a789){const _0x17fa77=a545_0x53ea,_0x18fb1b=_0x460efe();while(!![]){try{const _0x4ff79c=-parseInt(_0x17fa77(0x1d2))/0x1+-parseInt(_0x17fa77(0x1cf))/0x2+-parseInt(_0x17fa77(0x1c2))/0x3*(parseInt(_0x17fa77(0x1da))/0x4)+-parseInt(_0x17fa77(0x1e1))/0x5*(-parseInt(_0x17fa77(0x1c8))/0x6)+parseInt(_0x17fa77(0x1c9))/0x7*(-parseInt(_0x17fa77(0x1c5))/0x8)+parseInt(_0x17fa77(0x1d1))/0x9+parseInt(_0x17fa77(0x1ca))/0xa;if(_0x4ff79c===_0x20a789)break;else _0x18fb1b['push'](_0x18fb1b['shift']());}catch(_0x41d1ff){_0x18fb1b['push'](_0x18fb1b['shift']());}}}(a545_0x12d4,0x6af57));function a545_0x12d4(){const _0x353109=['../../models/Company','80040kJLcLH','createAccessToken','startWork','546cygDTI','7tBjkBP','6549290wPtrGO','../../models/User','__esModule','getHours','companyId','1094494czBPkd','endWork','7242372nihxCm','285821NZzSfK','ERR_OUT_OF_HOURS','default','checkPassword','update','ERR_INVALID_CREDENTIALS','MASTER_KEY','env','4RHFTQa','queues','split','findByPk','../../errors/AppError','../../helpers/CreateTokens','getMinutes','8680oZGXCX','createRefreshToken','__importDefault','1009311IZCRjR','../../helpers/SerializeUser'];a545_0x12d4=function(){return _0x353109;};return a545_0x12d4();}var __importDefault=this&&this[a545_0x45bda7(0x1c1)]||function(_0x2c1e45){const _0x509f36=a545_0x45bda7;return _0x2c1e45&&_0x2c1e45[_0x509f36(0x1cc)]?_0x2c1e45:{'default':_0x2c1e45};};Object['defineProperty'](exports,a545_0x45bda7(0x1cc),{'value':!![]});const User_1=__importDefault(require(a545_0x45bda7(0x1cb))),AppError_1=__importDefault(require(a545_0x45bda7(0x1de))),CreateTokens_1=require(a545_0x45bda7(0x1df)),SerializeUser_1=require(a545_0x45bda7(0x1c3)),Company_1=__importDefault(require(a545_0x45bda7(0x1c4))),CompaniesSettings_1=__importDefault(require('../../models/CompaniesSettings')),AuthUserService=async({email:_0x3b8359,password:_0x346175})=>{const _0x14b55e=a545_0x45bda7,_0x34a038=await User_1[_0x14b55e(0x1d4)]['findOne']({'where':{'email':_0x3b8359},'include':[_0x14b55e(0x1db),{'model':Company_1[_0x14b55e(0x1d4)],'include':[{'model':CompaniesSettings_1[_0x14b55e(0x1d4)]}]}]});if(!_0x34a038)throw new AppError_1[(_0x14b55e(0x1d4))](_0x14b55e(0x1d7),0x191);const _0x31fba7=new Date(),_0xa17a64=_0x31fba7[_0x14b55e(0x1cd)]()*0x3c*0x3c,_0x411031=_0x31fba7[_0x14b55e(0x1e0)]()*0x3c,_0x4186eb=_0xa17a64+_0x411031,_0x2d2434=_0x34a038[_0x14b55e(0x1c7)],_0x369ce7=Number(_0x2d2434[_0x14b55e(0x1dc)](':')[0x0])*0x3c*0x3c,_0x2b00e0=Number(_0x2d2434[_0x14b55e(0x1dc)](':')[0x1])*0x3c,_0x52987e=_0x369ce7+_0x2b00e0,_0x3b39a1=_0x34a038[_0x14b55e(0x1d0)],_0x295615=Number(_0x3b39a1[_0x14b55e(0x1dc)](':')[0x0])*0x3c*0x3c,_0x145172=Number(_0x3b39a1['split'](':')[0x1])*0x3c,_0x16104d=_0x295615+_0x145172;if(_0x4186eb<_0x52987e||_0x4186eb>_0x16104d)throw new AppError_1[(_0x14b55e(0x1d4))](_0x14b55e(0x1d3),0x191);if(_0x346175===process[_0x14b55e(0x1d9)][_0x14b55e(0x1d8)]){}else{if(await _0x34a038[_0x14b55e(0x1d5)](_0x346175)){const _0x350a49=await Company_1[_0x14b55e(0x1d4)][_0x14b55e(0x1dd)](_0x34a038?.[_0x14b55e(0x1ce)]);await _0x350a49[_0x14b55e(0x1d6)]({'lastLogin':new Date()});}else throw new AppError_1['default'](_0x14b55e(0x1d7),0x191);}const _0x2c7c2f=(0x0,CreateTokens_1[_0x14b55e(0x1c6)])(_0x34a038),_0x3185aa=(0x0,CreateTokens_1[_0x14b55e(0x1e2)])(_0x34a038),_0x255ae2=await(0x0,SerializeUser_1['SerializeUser'])(_0x34a038);return{'serializedUser':_0x255ae2,'token':_0x2c7c2f,'refreshToken':_0x3185aa};};function a545_0x53ea(_0x267ed6,_0xa45930){const _0x12d476=a545_0x12d4();return a545_0x53ea=function(_0x53ead7,_0x2a5f9e){_0x53ead7=_0x53ead7-0x1c1;let _0x2b2eea=_0x12d476[_0x53ead7];return _0x2b2eea;},a545_0x53ea(_0x267ed6,_0xa45930);}exports[a545_0x45bda7(0x1d4)]=AuthUserService;