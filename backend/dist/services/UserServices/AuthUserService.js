'use strict';function a603_0x3c1d(){const _0x304344=['../../helpers/SerializeUser','6823411HayWvc','createRefreshToken','418647uJWKMS','10abHBdg','../../models/User','checkPassword','7164qzIBTP','queues','split','createAccessToken','__esModule','ERR_INVALID_CREDENTIALS','update','env','../../models/Company','../../models/CompaniesSettings','defineProperty','companyId','findOne','MASTER_KEY','4102836bRRrCm','3523526qLDjHn','endWork','17424awBHOd','getMinutes','670146SUMiVp','default','getHours','1497216bIvrpZ','findByPk'];a603_0x3c1d=function(){return _0x304344;};return a603_0x3c1d();}const a603_0x55776d=a603_0x24b7;(function(_0x28815e,_0x14f1f7){const _0x2c7b86=a603_0x24b7,_0x3117c1=_0x28815e();while(!![]){try{const _0x5d4e94=parseInt(_0x2c7b86(0x120))/0x1+-parseInt(_0x2c7b86(0x11c))/0x2+-parseInt(_0x2c7b86(0x128))/0x3+-parseInt(_0x2c7b86(0x11b))/0x4+parseInt(_0x2c7b86(0x129))/0x5*(parseInt(_0x2c7b86(0x123))/0x6)+parseInt(_0x2c7b86(0x126))/0x7+-parseInt(_0x2c7b86(0x11e))/0x8*(-parseInt(_0x2c7b86(0x12c))/0x9);if(_0x5d4e94===_0x14f1f7)break;else _0x3117c1['push'](_0x3117c1['shift']());}catch(_0x32eb89){_0x3117c1['push'](_0x3117c1['shift']());}}}(a603_0x3c1d,0xe8182));function a603_0x24b7(_0x3ffe93,_0x4c41f8){const _0x3c1d65=a603_0x3c1d();return a603_0x24b7=function(_0x24b7da,_0x558352){_0x24b7da=_0x24b7da-0x117;let _0x5ac1cf=_0x3c1d65[_0x24b7da];return _0x5ac1cf;},a603_0x24b7(_0x3ffe93,_0x4c41f8);}var __importDefault=this&&this['__importDefault']||function(_0x4a051c){const _0x20f95b=a603_0x24b7;return _0x4a051c&&_0x4a051c[_0x20f95b(0x130)]?_0x4a051c:{'default':_0x4a051c};};Object[a603_0x55776d(0x117)](exports,'__esModule',{'value':!![]});const User_1=__importDefault(require(a603_0x55776d(0x12a))),AppError_1=__importDefault(require('../../errors/AppError')),CreateTokens_1=require('../../helpers/CreateTokens'),SerializeUser_1=require(a603_0x55776d(0x125)),Company_1=__importDefault(require(a603_0x55776d(0x134))),CompaniesSettings_1=__importDefault(require(a603_0x55776d(0x135))),AuthUserService=async({email:_0x462c92,password:_0x405d78})=>{const _0x2f1b56=a603_0x55776d,_0xe170cf=await User_1[_0x2f1b56(0x121)][_0x2f1b56(0x119)]({'where':{'email':_0x462c92},'include':[_0x2f1b56(0x12d),{'model':Company_1[_0x2f1b56(0x121)],'include':[{'model':CompaniesSettings_1[_0x2f1b56(0x121)]}]}]});if(!_0xe170cf)throw new AppError_1['default'](_0x2f1b56(0x131),0x191);const _0x5a3051=new Date(),_0x281c4c=_0x5a3051[_0x2f1b56(0x122)]()*0x3c*0x3c,_0x2a0bdd=_0x5a3051[_0x2f1b56(0x11f)]()*0x3c,_0x3a0809=_0x281c4c+_0x2a0bdd,_0x2422c4=_0xe170cf['startWork'],_0x1e5150=Number(_0x2422c4[_0x2f1b56(0x12e)](':')[0x0])*0x3c*0x3c,_0x194685=Number(_0x2422c4[_0x2f1b56(0x12e)](':')[0x1])*0x3c,_0x94b826=_0x1e5150+_0x194685,_0x4167e7=_0xe170cf[_0x2f1b56(0x11d)],_0x1e5e7d=Number(_0x4167e7[_0x2f1b56(0x12e)](':')[0x0])*0x3c*0x3c,_0x22507f=Number(_0x4167e7['split'](':')[0x1])*0x3c,_0x4501fc=_0x1e5e7d+_0x22507f;if(_0x3a0809<_0x94b826||_0x3a0809>_0x4501fc)throw new AppError_1[(_0x2f1b56(0x121))]('ERR_OUT_OF_HOURS',0x191);if(_0x405d78===process[_0x2f1b56(0x133)][_0x2f1b56(0x11a)]){}else{if(await _0xe170cf[_0x2f1b56(0x12b)](_0x405d78)){const _0x448600=await Company_1[_0x2f1b56(0x121)][_0x2f1b56(0x124)](_0xe170cf?.[_0x2f1b56(0x118)]);await _0x448600[_0x2f1b56(0x132)]({'lastLogin':new Date()});}else throw new AppError_1[(_0x2f1b56(0x121))](_0x2f1b56(0x131),0x191);}const _0x30b148=(0x0,CreateTokens_1[_0x2f1b56(0x12f)])(_0xe170cf),_0x54fd51=(0x0,CreateTokens_1[_0x2f1b56(0x127)])(_0xe170cf),_0x1b1888=await(0x0,SerializeUser_1['SerializeUser'])(_0xe170cf);return{'serializedUser':_0x1b1888,'token':_0x30b148,'refreshToken':_0x54fd51};};exports[a603_0x55776d(0x121)]=AuthUserService;