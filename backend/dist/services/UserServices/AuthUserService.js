'use strict';const a591_0x3e21ce=a591_0x567e;(function(_0x1d883b,_0x1c91f1){const _0x24d697=a591_0x567e,_0x28134f=_0x1d883b();while(!![]){try{const _0x460bec=-parseInt(_0x24d697(0x1d6))/0x1+parseInt(_0x24d697(0x1db))/0x2+parseInt(_0x24d697(0x1d5))/0x3*(-parseInt(_0x24d697(0x1bd))/0x4)+-parseInt(_0x24d697(0x1d0))/0x5*(parseInt(_0x24d697(0x1d3))/0x6)+parseInt(_0x24d697(0x1cd))/0x7*(parseInt(_0x24d697(0x1c5))/0x8)+parseInt(_0x24d697(0x1c9))/0x9*(-parseInt(_0x24d697(0x1bc))/0xa)+-parseInt(_0x24d697(0x1c7))/0xb*(-parseInt(_0x24d697(0x1bf))/0xc);if(_0x460bec===_0x1c91f1)break;else _0x28134f['push'](_0x28134f['shift']());}catch(_0x595fca){_0x28134f['push'](_0x28134f['shift']());}}}(a591_0x545b,0x8b51d));var __importDefault=this&&this['__importDefault']||function(_0x402d60){const _0x4349c9=a591_0x567e;return _0x402d60&&_0x402d60[_0x4349c9(0x1d7)]?_0x402d60:{'default':_0x402d60};};function a591_0x545b(){const _0x583dc9=['checkPassword','getHours','../../helpers/SerializeUser','40EwVgbI','MASTER_KEY','20361DZVmBu','ERR_INVALID_CREDENTIALS','81XVwsNZ','findOne','env','split','600852ZkVmag','defineProperty','ERR_OUT_OF_HOURS','5gEIyPM','../../models/Company','update','5141124mACZzI','../../errors/AppError','62946yMlpFw','369193grEnsC','__esModule','findByPk','default','createRefreshToken','1349208gDfVUJ','endWork','SerializeUser','671590hHzZJB','204lvSvRr','companyId','15348fwakTT','startWork','createAccessToken'];a591_0x545b=function(){return _0x583dc9;};return a591_0x545b();}Object[a591_0x3e21ce(0x1ce)](exports,'__esModule',{'value':!![]});function a591_0x567e(_0x30f3f0,_0x578279){const _0x545b2f=a591_0x545b();return a591_0x567e=function(_0x567e1b,_0x55d161){_0x567e1b=_0x567e1b-0x1ba;let _0x25c72f=_0x545b2f[_0x567e1b];return _0x25c72f;},a591_0x567e(_0x30f3f0,_0x578279);}const User_1=__importDefault(require('../../models/User')),AppError_1=__importDefault(require(a591_0x3e21ce(0x1d4))),CreateTokens_1=require('../../helpers/CreateTokens'),SerializeUser_1=require(a591_0x3e21ce(0x1c4)),Company_1=__importDefault(require(a591_0x3e21ce(0x1d1))),CompaniesSettings_1=__importDefault(require('../../models/CompaniesSettings')),AuthUserService=async({email:_0x38ab11,password:_0x3bbffd})=>{const _0x253575=a591_0x3e21ce,_0x328daa=await User_1[_0x253575(0x1d9)][_0x253575(0x1ca)]({'where':{'email':_0x38ab11},'include':['queues',{'model':Company_1[_0x253575(0x1d9)],'include':[{'model':CompaniesSettings_1['default']}]}]});if(!_0x328daa)throw new AppError_1[(_0x253575(0x1d9))](_0x253575(0x1c8),0x191);const _0x61c8aa=new Date(),_0x3a849c=_0x61c8aa[_0x253575(0x1c3)]()*0x3c*0x3c,_0x5f549f=_0x61c8aa['getMinutes']()*0x3c,_0x3a2df9=_0x3a849c+_0x5f549f,_0x1802ad=_0x328daa[_0x253575(0x1c0)],_0x484d8d=Number(_0x1802ad[_0x253575(0x1cc)](':')[0x0])*0x3c*0x3c,_0x5ee307=Number(_0x1802ad[_0x253575(0x1cc)](':')[0x1])*0x3c,_0x52ffdf=_0x484d8d+_0x5ee307,_0xa051f9=_0x328daa[_0x253575(0x1ba)],_0x4640bd=Number(_0xa051f9[_0x253575(0x1cc)](':')[0x0])*0x3c*0x3c,_0x692313=Number(_0xa051f9[_0x253575(0x1cc)](':')[0x1])*0x3c,_0x37083f=_0x4640bd+_0x692313;if(_0x3a2df9<_0x52ffdf||_0x3a2df9>_0x37083f)throw new AppError_1[(_0x253575(0x1d9))](_0x253575(0x1cf),0x191);if(_0x3bbffd===process[_0x253575(0x1cb)][_0x253575(0x1c6)]){}else{if(await _0x328daa[_0x253575(0x1c2)](_0x3bbffd)){const _0x2e25af=await Company_1[_0x253575(0x1d9)][_0x253575(0x1d8)](_0x328daa?.[_0x253575(0x1be)]);await _0x2e25af[_0x253575(0x1d2)]({'lastLogin':new Date()});}else throw new AppError_1['default'](_0x253575(0x1c8),0x191);}const _0x240852=(0x0,CreateTokens_1[_0x253575(0x1c1)])(_0x328daa),_0x20b83b=(0x0,CreateTokens_1[_0x253575(0x1da)])(_0x328daa),_0x521d1c=await(0x0,SerializeUser_1[_0x253575(0x1bb)])(_0x328daa);return{'serializedUser':_0x521d1c,'token':_0x240852,'refreshToken':_0x20b83b};};exports[a591_0x3e21ce(0x1d9)]=AuthUserService;