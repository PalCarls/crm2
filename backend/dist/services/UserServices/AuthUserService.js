'use strict';const a591_0x1486f7=a591_0x50a8;(function(_0x32eded,_0x394ea1){const _0x5c941e=a591_0x50a8,_0x1feb0a=_0x32eded();while(!![]){try{const _0x3eea2b=-parseInt(_0x5c941e(0x8e))/0x1+parseInt(_0x5c941e(0x7e))/0x2+-parseInt(_0x5c941e(0x99))/0x3*(-parseInt(_0x5c941e(0x86))/0x4)+-parseInt(_0x5c941e(0x83))/0x5*(-parseInt(_0x5c941e(0x92))/0x6)+-parseInt(_0x5c941e(0x80))/0x7*(parseInt(_0x5c941e(0x88))/0x8)+-parseInt(_0x5c941e(0x95))/0x9+parseInt(_0x5c941e(0x96))/0xa*(-parseInt(_0x5c941e(0x87))/0xb);if(_0x3eea2b===_0x394ea1)break;else _0x1feb0a['push'](_0x1feb0a['shift']());}catch(_0x3e5f36){_0x1feb0a['push'](_0x1feb0a['shift']());}}}(a591_0x2c54,0x2a9ae));function a591_0x50a8(_0xbae03d,_0x554ecf){const _0x2c54b2=a591_0x2c54();return a591_0x50a8=function(_0x50a820,_0x2c6e70){_0x50a820=_0x50a820-0x7c;let _0x331932=_0x2c54b2[_0x50a820];return _0x331932;},a591_0x50a8(_0xbae03d,_0x554ecf);}var __importDefault=this&&this[a591_0x1486f7(0x89)]||function(_0x1cb6ba){const _0x20014d=a591_0x1486f7;return _0x1cb6ba&&_0x1cb6ba[_0x20014d(0x8b)]?_0x1cb6ba:{'default':_0x1cb6ba};};function a591_0x2c54(){const _0x42ab0=['findByPk','4leCxif','48961DjFbjp','24SLfbJt','__importDefault','../../helpers/SerializeUser','__esModule','getMinutes','findOne','164262varvEw','createAccessToken','defineProperty','endWork','186mQkdqc','createRefreshToken','update','1778121hzdYNs','750xjRbFe','../../models/Company','startWork','1005231IjPtty','../../helpers/CreateTokens','default','split','companyId','672740GYMElo','SerializeUser','77882mMfTDJ','../../models/User','checkPassword','37435WnCPqI','queues'];a591_0x2c54=function(){return _0x42ab0;};return a591_0x2c54();}Object[a591_0x1486f7(0x90)](exports,a591_0x1486f7(0x8b),{'value':!![]});const User_1=__importDefault(require(a591_0x1486f7(0x81))),AppError_1=__importDefault(require('../../errors/AppError')),CreateTokens_1=require(a591_0x1486f7(0x9a)),SerializeUser_1=require(a591_0x1486f7(0x8a)),Company_1=__importDefault(require(a591_0x1486f7(0x97))),CompaniesSettings_1=__importDefault(require('../../models/CompaniesSettings')),AuthUserService=async({email:_0x43a49f,password:_0x4d07b0})=>{const _0x4301dc=a591_0x1486f7,_0x27e569=await User_1['default'][_0x4301dc(0x8d)]({'where':{'email':_0x43a49f},'include':[_0x4301dc(0x84),{'model':Company_1[_0x4301dc(0x9b)],'include':[{'model':CompaniesSettings_1[_0x4301dc(0x9b)]}]}]});if(!_0x27e569)throw new AppError_1[(_0x4301dc(0x9b))]('ERR_INVALID_CREDENTIALS',0x191);const _0xbf918d=new Date(),_0x1510cb=_0xbf918d['getHours']()*0x3c*0x3c,_0x271c10=_0xbf918d[_0x4301dc(0x8c)]()*0x3c,_0x2e819e=_0x1510cb+_0x271c10,_0x90a2f9=_0x27e569[_0x4301dc(0x98)],_0x47834c=Number(_0x90a2f9[_0x4301dc(0x7c)](':')[0x0])*0x3c*0x3c,_0x33a34e=Number(_0x90a2f9['split'](':')[0x1])*0x3c,_0x22dff0=_0x47834c+_0x33a34e,_0x56d736=_0x27e569[_0x4301dc(0x91)],_0x3bef66=Number(_0x56d736[_0x4301dc(0x7c)](':')[0x0])*0x3c*0x3c,_0x38fbe6=Number(_0x56d736['split'](':')[0x1])*0x3c,_0x9033ed=_0x3bef66+_0x38fbe6;if(_0x2e819e<_0x22dff0||_0x2e819e>_0x9033ed)throw new AppError_1[(_0x4301dc(0x9b))]('ERR_OUT_OF_HOURS',0x191);if(_0x4d07b0===process['env']['MASTER_KEY']){}else{if(await _0x27e569[_0x4301dc(0x82)](_0x4d07b0)){const _0x287842=await Company_1[_0x4301dc(0x9b)][_0x4301dc(0x85)](_0x27e569?.[_0x4301dc(0x7d)]);await _0x287842[_0x4301dc(0x94)]({'lastLogin':new Date()});}else throw new AppError_1[(_0x4301dc(0x9b))]('ERR_INVALID_CREDENTIALS',0x191);}const _0xe06cf4=(0x0,CreateTokens_1[_0x4301dc(0x8f)])(_0x27e569),_0xf7125f=(0x0,CreateTokens_1[_0x4301dc(0x93)])(_0x27e569),_0x404d67=await(0x0,SerializeUser_1[_0x4301dc(0x7f)])(_0x27e569);return{'serializedUser':_0x404d67,'token':_0xe06cf4,'refreshToken':_0xf7125f};};exports[a591_0x1486f7(0x9b)]=AuthUserService;