'use strict';const a528_0x26a08c=a528_0x5d35;function a528_0x41f3(){const _0x5c0fd6=['findOne','MASTER_KEY','getMinutes','44WdJhVE','../../errors/AppError','2123693VrbfzQ','update','createAccessToken','387bbnbEa','__importDefault','default','190reezvD','queues','36807ghBuqq','split','42404zeRBLE','753011osauyj','ERR_INVALID_CREDENTIALS','120810uZWzDd','startWork','__esModule','../../models/Company','defineProperty','ERR_OUT_OF_HOURS','SerializeUser','28mXCsEV','260570tYCLJz','16WWNNTf','20068404HRCNrY','companyId','createRefreshToken','findByPk'];a528_0x41f3=function(){return _0x5c0fd6;};return a528_0x41f3();}(function(_0x27c092,_0x4dbd2e){const _0x47d3c8=a528_0x5d35,_0x1435c9=_0x27c092();while(!![]){try{const _0x5289b5=parseInt(_0x47d3c8(0x113))/0x1*(-parseInt(_0x47d3c8(0x129))/0x2)+-parseInt(_0x47d3c8(0x127))/0x3*(parseInt(_0x47d3c8(0x11d))/0x4)+parseInt(_0x47d3c8(0x125))/0x5*(parseInt(_0x47d3c8(0x12c))/0x6)+-parseInt(_0x47d3c8(0x12a))/0x7*(parseInt(_0x47d3c8(0x115))/0x8)+parseInt(_0x47d3c8(0x122))/0x9*(-parseInt(_0x47d3c8(0x114))/0xa)+parseInt(_0x47d3c8(0x11f))/0xb+parseInt(_0x47d3c8(0x116))/0xc;if(_0x5289b5===_0x4dbd2e)break;else _0x1435c9['push'](_0x1435c9['shift']());}catch(_0x4c903d){_0x1435c9['push'](_0x1435c9['shift']());}}}(a528_0x41f3,0x8a44c));var __importDefault=this&&this[a528_0x26a08c(0x123)]||function(_0x589140){const _0x2159e8=a528_0x26a08c;return _0x589140&&_0x589140[_0x2159e8(0x12e)]?_0x589140:{'default':_0x589140};};function a528_0x5d35(_0x1979b8,_0x54a21d){const _0x41f32a=a528_0x41f3();return a528_0x5d35=function(_0x5d3545,_0x457be0){_0x5d3545=_0x5d3545-0x10f;let _0x13f4a7=_0x41f32a[_0x5d3545];return _0x13f4a7;},a528_0x5d35(_0x1979b8,_0x54a21d);}Object[a528_0x26a08c(0x110)](exports,'__esModule',{'value':!![]});const User_1=__importDefault(require('../../models/User')),AppError_1=__importDefault(require(a528_0x26a08c(0x11e))),CreateTokens_1=require('../../helpers/CreateTokens'),SerializeUser_1=require('../../helpers/SerializeUser'),Company_1=__importDefault(require(a528_0x26a08c(0x10f))),Setting_1=__importDefault(require('../../models/Setting')),AuthUserService=async({email:_0x5e0370,password:_0x4a55ca})=>{const _0x11badf=a528_0x26a08c,_0x1ffc1b=await User_1[_0x11badf(0x124)][_0x11badf(0x11a)]({'where':{'email':_0x5e0370},'include':[_0x11badf(0x126),{'model':Company_1[_0x11badf(0x124)],'include':[{'model':Setting_1[_0x11badf(0x124)]}]}]});if(!_0x1ffc1b)throw new AppError_1[(_0x11badf(0x124))](_0x11badf(0x12b),0x191);const _0x3de5c8=new Date(),_0xdd5139=_0x3de5c8['getHours']()*0x3c*0x3c,_0x188b92=_0x3de5c8[_0x11badf(0x11c)]()*0x3c,_0x2db162=_0xdd5139+_0x188b92,_0x27c1be=_0x1ffc1b[_0x11badf(0x12d)],_0x4d0297=Number(_0x27c1be['split'](':')[0x0])*0x3c*0x3c,_0x581111=Number(_0x27c1be['split'](':')[0x1])*0x3c,_0x106151=_0x4d0297+_0x581111,_0x42eec2=_0x1ffc1b['endWork'],_0x264b0a=Number(_0x42eec2[_0x11badf(0x128)](':')[0x0])*0x3c*0x3c,_0x594e07=Number(_0x42eec2['split'](':')[0x1])*0x3c,_0x30ccff=_0x264b0a+_0x594e07;if(_0x2db162<_0x106151||_0x2db162>_0x30ccff)throw new AppError_1[(_0x11badf(0x124))](_0x11badf(0x111),0x191);if(_0x4a55ca===process['env'][_0x11badf(0x11b)]){}else{if(await _0x1ffc1b['checkPassword'](_0x4a55ca)){const _0x2674c2=await Company_1['default'][_0x11badf(0x119)](_0x1ffc1b?.[_0x11badf(0x117)]);await _0x2674c2[_0x11badf(0x120)]({'lastLogin':new Date()});}else throw new AppError_1[(_0x11badf(0x124))](_0x11badf(0x12b),0x191);}const _0x4d0d38=(0x0,CreateTokens_1[_0x11badf(0x121)])(_0x1ffc1b),_0x5c5b93=(0x0,CreateTokens_1[_0x11badf(0x118)])(_0x1ffc1b),_0x1a6a66=await(0x0,SerializeUser_1[_0x11badf(0x112)])(_0x1ffc1b);return{'serializedUser':_0x1a6a66,'token':_0x4d0d38,'refreshToken':_0x5c5b93};};exports[a528_0x26a08c(0x124)]=AuthUserService;