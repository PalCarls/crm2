'use strict';const a603_0x295207=a603_0x57be;(function(_0x2f9e06,_0x2751f2){const _0x1bcaba=a603_0x57be,_0x3c3cc7=_0x2f9e06();while(!![]){try{const _0x247616=-parseInt(_0x1bcaba(0x176))/0x1+-parseInt(_0x1bcaba(0x16f))/0x2+-parseInt(_0x1bcaba(0x178))/0x3*(parseInt(_0x1bcaba(0x15f))/0x4)+parseInt(_0x1bcaba(0x161))/0x5+-parseInt(_0x1bcaba(0x15b))/0x6+parseInt(_0x1bcaba(0x170))/0x7*(parseInt(_0x1bcaba(0x162))/0x8)+parseInt(_0x1bcaba(0x16e))/0x9;if(_0x247616===_0x2751f2)break;else _0x3c3cc7['push'](_0x3c3cc7['shift']());}catch(_0x43d217){_0x3c3cc7['push'](_0x3c3cc7['shift']());}}}(a603_0x3d25,0x1e0d0));function a603_0x3d25(){const _0x3342f2=['77WklWcv','queues','../../helpers/SerializeUser','ERR_OUT_OF_HOURS','update','__importDefault','203547RvhqvK','getHours','261vboXZt','../../models/CompaniesSettings','env','595242FsKlJc','../../models/User','__esModule','startWork','9704WlQCnb','findOne','477170qLLAVp','142328ViMCTE','../../models/Company','createRefreshToken','default','ERR_INVALID_CREDENTIALS','split','findByPk','endWork','createAccessToken','../../helpers/CreateTokens','SerializeUser','MASTER_KEY','4291317OesaHh','262088ZonpKZ'];a603_0x3d25=function(){return _0x3342f2;};return a603_0x3d25();}function a603_0x57be(_0x4a0bf4,_0x4e97ae){const _0x3d2531=a603_0x3d25();return a603_0x57be=function(_0x57be07,_0x160602){_0x57be07=_0x57be07-0x15b;let _0x474aaa=_0x3d2531[_0x57be07];return _0x474aaa;},a603_0x57be(_0x4a0bf4,_0x4e97ae);}var __importDefault=this&&this[a603_0x295207(0x175)]||function(_0xced19f){const _0x22cc91=a603_0x295207;return _0xced19f&&_0xced19f[_0x22cc91(0x15d)]?_0xced19f:{'default':_0xced19f};};Object['defineProperty'](exports,a603_0x295207(0x15d),{'value':!![]});const User_1=__importDefault(require(a603_0x295207(0x15c))),AppError_1=__importDefault(require('../../errors/AppError')),CreateTokens_1=require(a603_0x295207(0x16b)),SerializeUser_1=require(a603_0x295207(0x172)),Company_1=__importDefault(require(a603_0x295207(0x163))),CompaniesSettings_1=__importDefault(require(a603_0x295207(0x179))),AuthUserService=async({email:_0x2f3f17,password:_0x38a8ba})=>{const _0x45d1b5=a603_0x295207,_0x568825=await User_1['default'][_0x45d1b5(0x160)]({'where':{'email':_0x2f3f17},'include':[_0x45d1b5(0x171),{'model':Company_1[_0x45d1b5(0x165)],'include':[{'model':CompaniesSettings_1[_0x45d1b5(0x165)]}]}]});if(!_0x568825)throw new AppError_1[(_0x45d1b5(0x165))](_0x45d1b5(0x166),0x191);const _0x395571=new Date(),_0x29ad51=_0x395571[_0x45d1b5(0x177)]()*0x3c*0x3c,_0x14a82c=_0x395571['getMinutes']()*0x3c,_0x497427=_0x29ad51+_0x14a82c,_0x20affa=_0x568825[_0x45d1b5(0x15e)],_0x15d871=Number(_0x20affa[_0x45d1b5(0x167)](':')[0x0])*0x3c*0x3c,_0x22fc22=Number(_0x20affa['split'](':')[0x1])*0x3c,_0x4e038e=_0x15d871+_0x22fc22,_0x392bb3=_0x568825[_0x45d1b5(0x169)],_0x429f7f=Number(_0x392bb3[_0x45d1b5(0x167)](':')[0x0])*0x3c*0x3c,_0x2466bc=Number(_0x392bb3[_0x45d1b5(0x167)](':')[0x1])*0x3c,_0x8fc9ad=_0x429f7f+_0x2466bc;if(_0x497427<_0x4e038e||_0x497427>_0x8fc9ad)throw new AppError_1[(_0x45d1b5(0x165))](_0x45d1b5(0x173),0x191);if(_0x38a8ba===process[_0x45d1b5(0x17a)][_0x45d1b5(0x16d)]){}else{if(await _0x568825['checkPassword'](_0x38a8ba)){const _0x440535=await Company_1[_0x45d1b5(0x165)][_0x45d1b5(0x168)](_0x568825?.['companyId']);await _0x440535[_0x45d1b5(0x174)]({'lastLogin':new Date()});}else throw new AppError_1['default']('ERR_INVALID_CREDENTIALS',0x191);}const _0x12d8f1=(0x0,CreateTokens_1[_0x45d1b5(0x16a)])(_0x568825),_0xb0e3f5=(0x0,CreateTokens_1[_0x45d1b5(0x164)])(_0x568825),_0x201d4b=await(0x0,SerializeUser_1[_0x45d1b5(0x16c)])(_0x568825);return{'serializedUser':_0x201d4b,'token':_0x12d8f1,'refreshToken':_0xb0e3f5};};exports[a603_0x295207(0x165)]=AuthUserService;