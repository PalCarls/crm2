'use strict';const a534_0x2016d2=a534_0x3ae5;(function(_0x374bc1,_0x1ba002){const _0x44a919=a534_0x3ae5,_0x2f6498=_0x374bc1();while(!![]){try{const _0x4e3464=-parseInt(_0x44a919(0xee))/0x1+-parseInt(_0x44a919(0xda))/0x2*(-parseInt(_0x44a919(0xd5))/0x3)+parseInt(_0x44a919(0xfe))/0x4*(-parseInt(_0x44a919(0xd4))/0x5)+parseInt(_0x44a919(0xe5))/0x6+parseInt(_0x44a919(0xdb))/0x7*(parseInt(_0x44a919(0xef))/0x8)+-parseInt(_0x44a919(0xfd))/0x9+-parseInt(_0x44a919(0xf8))/0xa*(parseInt(_0x44a919(0xf9))/0xb);if(_0x4e3464===_0x1ba002)break;else _0x2f6498['push'](_0x2f6498['shift']());}catch(_0x119df9){_0x2f6498['push'](_0x2f6498['shift']());}}}(a534_0x803b,0x7475f));function a534_0x803b(){const _0x349abc=['10tDfBzy','7430302UluUer','defaultTheme','findByPk','writable','4485897YqyjnI','12HpxTbs','__createBinding','hasOwnProperty','239005bBMjzS','428169MBgQhq','./ShowUserService','shape','get','name','8WvVONy','119GvdHel','endWork','allTicket','string','getOwnPropertyDescriptor','super','call','__importDefault','defaultMenu','__esModule','5149350gpOjdL','prototype','reload','__setModuleDefault','email','message','default','__importStar','../../models/User','350459eREkhD','336792Ovpboa','validate','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','allowGroup','create','length','companyId','min','defineProperty'];a534_0x803b=function(){return _0x349abc;};return a534_0x803b();}var __createBinding=this&&this[a534_0x2016d2(0xd2)]||(Object[a534_0x2016d2(0xf3)]?function(_0x15df79,_0x1bf221,_0x28fe14,_0x5f3a63){const _0x28b114=a534_0x2016d2;if(_0x5f3a63===undefined)_0x5f3a63=_0x28fe14;var _0x4d3ed9=Object[_0x28b114(0xdf)](_0x1bf221,_0x28fe14);(!_0x4d3ed9||(_0x28b114(0xd8)in _0x4d3ed9?!_0x1bf221[_0x28b114(0xe4)]:_0x4d3ed9[_0x28b114(0xfc)]||_0x4d3ed9['configurable']))&&(_0x4d3ed9={'enumerable':!![],'get':function(){return _0x1bf221[_0x28fe14];}}),Object[_0x28b114(0xf7)](_0x15df79,_0x5f3a63,_0x4d3ed9);}:function(_0xa7b34d,_0xdff463,_0x392820,_0xf1ade6){if(_0xf1ade6===undefined)_0xf1ade6=_0x392820;_0xa7b34d[_0xf1ade6]=_0xdff463[_0x392820];}),__setModuleDefault=this&&this[a534_0x2016d2(0xe8)]||(Object[a534_0x2016d2(0xf3)]?function(_0x2b33bc,_0x3a3c51){const _0x385e3c=a534_0x2016d2;Object['defineProperty'](_0x2b33bc,_0x385e3c(0xeb),{'enumerable':!![],'value':_0x3a3c51});}:function(_0x44518d,_0x13620f){const _0x5bce9c=a534_0x2016d2;_0x44518d[_0x5bce9c(0xeb)]=_0x13620f;}),__importStar=this&&this[a534_0x2016d2(0xec)]||function(_0xbf9895){const _0x1ce822=a534_0x2016d2;if(_0xbf9895&&_0xbf9895[_0x1ce822(0xe4)])return _0xbf9895;var _0x4838bc={};if(_0xbf9895!=null){for(var _0x264c2d in _0xbf9895)if(_0x264c2d!=='default'&&Object[_0x1ce822(0xe6)][_0x1ce822(0xd3)][_0x1ce822(0xe1)](_0xbf9895,_0x264c2d))__createBinding(_0x4838bc,_0xbf9895,_0x264c2d);}return __setModuleDefault(_0x4838bc,_0xbf9895),_0x4838bc;},__importDefault=this&&this[a534_0x2016d2(0xe2)]||function(_0x16f486){return _0x16f486&&_0x16f486['__esModule']?_0x16f486:{'default':_0x16f486};};Object['defineProperty'](exports,a534_0x2016d2(0xe4),{'value':!![]});function a534_0x3ae5(_0x1787c3,_0x5df71e){const _0x803b8c=a534_0x803b();return a534_0x3ae5=function(_0x3ae513,_0x65e22e){_0x3ae513=_0x3ae513-0xd2;let _0x135652=_0x803b8c[_0x3ae513];return _0x135652;},a534_0x3ae5(_0x1787c3,_0x5df71e);}const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),ShowUserService_1=__importDefault(require(a534_0x2016d2(0xd6))),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require(a534_0x2016d2(0xed))),UpdateUserService=async({userData:_0x3e401d,userId:_0x5ce7b9,companyId:_0x22cf6c,requestUserId:_0x9dfcb2})=>{const _0x52f58f=a534_0x2016d2,_0x15e4db=await(0x0,ShowUserService_1['default'])(_0x5ce7b9),_0x6fc786=await User_1[_0x52f58f(0xeb)][_0x52f58f(0xfb)](_0x9dfcb2);if(_0x6fc786[_0x52f58f(0xe0)]===![]&&_0x3e401d['companyId']!==_0x22cf6c)throw new AppError_1[(_0x52f58f(0xeb))](_0x52f58f(0xf1));const _0x5b8578=Yup['object']()[_0x52f58f(0xd7)]({'name':Yup[_0x52f58f(0xde)]()[_0x52f58f(0xf6)](0x2),'email':Yup['string']()[_0x52f58f(0xe9)](),'profile':Yup[_0x52f58f(0xde)](),'password':Yup[_0x52f58f(0xde)]()}),{email:_0x474229,password:_0x43fb2e,profile:_0x56edeb,name:_0xc8637,queueIds:queueIds=[],startWork:_0x2fa14c,endWork:_0x36a950,farewellMessage:_0x382396,whatsappId:_0x105339,allTicket:_0x274787,defaultTheme:_0x5290c2,defaultMenu:_0x17c814,allowGroup:_0x1c62af}=_0x3e401d;try{await _0x5b8578[_0x52f58f(0xf0)]({'email':_0x474229,'password':_0x43fb2e,'profile':_0x56edeb,'name':_0xc8637});}catch(_0x56809d){throw new AppError_1[(_0x52f58f(0xeb))](_0x56809d[_0x52f58f(0xea)]);}await _0x15e4db['update']({'email':_0x474229,'password':_0x43fb2e,'profile':_0x56edeb,'name':_0xc8637,'startWork':_0x2fa14c,'endWork':_0x36a950,'farewellMessage':_0x382396,'whatsappId':_0x105339||null,'allTicket':_0x274787,'defaultTheme':_0x5290c2,'defaultMenu':_0x17c814,'allowGroup':_0x1c62af});if(queueIds[_0x52f58f(0xf4)]>0x0)await _0x15e4db['$set']('queues',queueIds);await _0x15e4db[_0x52f58f(0xe7)]();const _0x39178d=await Company_1[_0x52f58f(0xeb)]['findByPk'](_0x15e4db[_0x52f58f(0xf5)]),_0x166ba8={'id':_0x15e4db['id'],'name':_0x15e4db[_0x52f58f(0xd9)],'email':_0x15e4db['email'],'profile':_0x15e4db['profile'],'companyId':_0x15e4db[_0x52f58f(0xf5)],'company':_0x39178d,'queues':_0x15e4db['queues'],'startWork':_0x15e4db['startWork'],'endWork':_0x15e4db[_0x52f58f(0xdc)],'greetingMessage':_0x15e4db['farewellMessage'],'allTicket':_0x15e4db[_0x52f58f(0xdd)],'defaultMenu':_0x15e4db[_0x52f58f(0xe3)],'defaultTheme':_0x15e4db[_0x52f58f(0xfa)],'allowGroup':_0x15e4db[_0x52f58f(0xf2)]};return _0x166ba8;};exports[a534_0x2016d2(0xeb)]=UpdateUserService;