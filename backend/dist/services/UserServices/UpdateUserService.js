'use strict';const a557_0x4a8da7=a557_0x559b;(function(_0x3bea2a,_0x5df71b){const _0x385140=a557_0x559b,_0x1c29d4=_0x3bea2a();while(!![]){try{const _0x18b6ec=-parseInt(_0x385140(0x13a))/0x1*(-parseInt(_0x385140(0x14b))/0x2)+parseInt(_0x385140(0x14e))/0x3*(parseInt(_0x385140(0x132))/0x4)+parseInt(_0x385140(0x135))/0x5*(-parseInt(_0x385140(0x13f))/0x6)+-parseInt(_0x385140(0x148))/0x7+-parseInt(_0x385140(0x141))/0x8+-parseInt(_0x385140(0x12f))/0x9+parseInt(_0x385140(0x140))/0xa;if(_0x18b6ec===_0x5df71b)break;else _0x1c29d4['push'](_0x1c29d4['shift']());}catch(_0x1c8463){_0x1c29d4['push'](_0x1c29d4['shift']());}}}(a557_0x4070,0xe905d));function a557_0x4070(){const _0x12ceee=['2251170DVhohr','companyId','__setModuleDefault','1348IGqRFb','reload','shape','455EAvcHj','__importDefault','name','startWork','profile','33746kgKBqK','findByPk','__createBinding','call','create','744QXsbtn','12476530KJsbwo','7091456lhsnhy','hasOwnProperty','__esModule','defaultMenu','default','yup','farewellMessage','7601083POTRvi','defaultTheme','allTicket','18VHMvSl','../../errors/AppError','validate','14571fsyGse','writable','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','get','defineProperty','string','prototype','length','allowGroup','email','getOwnPropertyDescriptor','configurable'];a557_0x4070=function(){return _0x12ceee;};return a557_0x4070();}var __createBinding=this&&this[a557_0x4a8da7(0x13c)]||(Object[a557_0x4a8da7(0x13e)]?function(_0x452e7a,_0x41c19e,_0x1e7541,_0x2a0791){const _0x560731=a557_0x4a8da7;if(_0x2a0791===undefined)_0x2a0791=_0x1e7541;var _0x7cb6d=Object[_0x560731(0x12d)](_0x41c19e,_0x1e7541);(!_0x7cb6d||(_0x560731(0x151)in _0x7cb6d?!_0x41c19e['__esModule']:_0x7cb6d[_0x560731(0x14f)]||_0x7cb6d[_0x560731(0x12e)]))&&(_0x7cb6d={'enumerable':!![],'get':function(){return _0x41c19e[_0x1e7541];}}),Object[_0x560731(0x152)](_0x452e7a,_0x2a0791,_0x7cb6d);}:function(_0x592637,_0x17c261,_0x599489,_0xe4830e){if(_0xe4830e===undefined)_0xe4830e=_0x599489;_0x592637[_0xe4830e]=_0x17c261[_0x599489];}),__setModuleDefault=this&&this[a557_0x4a8da7(0x131)]||(Object[a557_0x4a8da7(0x13e)]?function(_0x5d574b,_0x5947f8){const _0x525c3b=a557_0x4a8da7;Object[_0x525c3b(0x152)](_0x5d574b,_0x525c3b(0x145),{'enumerable':!![],'value':_0x5947f8});}:function(_0x15148b,_0x1fa8ff){_0x15148b['default']=_0x1fa8ff;}),__importStar=this&&this['__importStar']||function(_0x550f23){const _0x2a8628=a557_0x4a8da7;if(_0x550f23&&_0x550f23[_0x2a8628(0x143)])return _0x550f23;var _0x5510b7={};if(_0x550f23!=null){for(var _0x18a644 in _0x550f23)if(_0x18a644!==_0x2a8628(0x145)&&Object[_0x2a8628(0x154)][_0x2a8628(0x142)][_0x2a8628(0x13d)](_0x550f23,_0x18a644))__createBinding(_0x5510b7,_0x550f23,_0x18a644);}return __setModuleDefault(_0x5510b7,_0x550f23),_0x5510b7;},__importDefault=this&&this[a557_0x4a8da7(0x136)]||function(_0x5b9b3b){return _0x5b9b3b&&_0x5b9b3b['__esModule']?_0x5b9b3b:{'default':_0x5b9b3b};};Object[a557_0x4a8da7(0x152)](exports,a557_0x4a8da7(0x143),{'value':!![]});function a557_0x559b(_0x26ff4f,_0x22f198){const _0x407046=a557_0x4070();return a557_0x559b=function(_0x559b2e,_0x5a1b06){_0x559b2e=_0x559b2e-0x12b;let _0x5d1689=_0x407046[_0x559b2e];return _0x5d1689;},a557_0x559b(_0x26ff4f,_0x22f198);}const Yup=__importStar(require(a557_0x4a8da7(0x146))),AppError_1=__importDefault(require(a557_0x4a8da7(0x14c))),ShowUserService_1=__importDefault(require('./ShowUserService')),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require('../../models/User')),UpdateUserService=async({userData:_0x482d61,userId:_0x4ae480,companyId:_0x38aa70,requestUserId:_0x30f6c3})=>{const _0x3ba18e=a557_0x4a8da7,_0x2546ce=await(0x0,ShowUserService_1[_0x3ba18e(0x145)])(_0x4ae480),_0x4b6334=await User_1[_0x3ba18e(0x145)]['findByPk'](_0x30f6c3);if(_0x4b6334['super']===![]&&_0x482d61[_0x3ba18e(0x130)]!==_0x38aa70)throw new AppError_1[(_0x3ba18e(0x145))](_0x3ba18e(0x150));const _0x1f7cd5=Yup['object']()[_0x3ba18e(0x134)]({'name':Yup[_0x3ba18e(0x153)]()['min'](0x2),'email':Yup[_0x3ba18e(0x153)]()[_0x3ba18e(0x12c)](),'profile':Yup['string'](),'password':Yup[_0x3ba18e(0x153)]()}),{email:_0x5a18a7,password:_0x53d5eb,profile:_0x41deb2,name:_0x39fcac,queueIds:queueIds=[],startWork:_0x23542e,endWork:_0x48b99c,farewellMessage:_0x200d0b,whatsappId:_0x432019,allTicket:_0x206d71,defaultTheme:_0x110fc8,defaultMenu:_0x2752b3,allowGroup:_0x17b5f6}=_0x482d61;try{await _0x1f7cd5[_0x3ba18e(0x14d)]({'email':_0x5a18a7,'password':_0x53d5eb,'profile':_0x41deb2,'name':_0x39fcac});}catch(_0x14c6d2){throw new AppError_1[(_0x3ba18e(0x145))](_0x14c6d2['message']);}await _0x2546ce['update']({'email':_0x5a18a7,'password':_0x53d5eb,'profile':_0x41deb2,'name':_0x39fcac,'startWork':_0x23542e,'endWork':_0x48b99c,'farewellMessage':_0x200d0b,'whatsappId':_0x432019||null,'allTicket':_0x206d71,'defaultTheme':_0x110fc8,'defaultMenu':_0x2752b3,'allowGroup':_0x17b5f6});if(queueIds[_0x3ba18e(0x155)]>0x0)await _0x2546ce['$set']('queues',queueIds);await _0x2546ce[_0x3ba18e(0x133)]();const _0x3e5f47=await Company_1[_0x3ba18e(0x145)][_0x3ba18e(0x13b)](_0x2546ce[_0x3ba18e(0x130)]),_0x77ccaa={'id':_0x2546ce['id'],'name':_0x2546ce[_0x3ba18e(0x137)],'email':_0x2546ce[_0x3ba18e(0x12c)],'profile':_0x2546ce[_0x3ba18e(0x139)],'companyId':_0x2546ce[_0x3ba18e(0x130)],'company':_0x3e5f47,'queues':_0x2546ce['queues'],'startWork':_0x2546ce[_0x3ba18e(0x138)],'endWork':_0x2546ce['endWork'],'greetingMessage':_0x2546ce[_0x3ba18e(0x147)],'allTicket':_0x2546ce[_0x3ba18e(0x14a)],'defaultMenu':_0x2546ce[_0x3ba18e(0x144)],'defaultTheme':_0x2546ce[_0x3ba18e(0x149)],'allowGroup':_0x2546ce[_0x3ba18e(0x12b)]};return _0x77ccaa;};exports[a557_0x4a8da7(0x145)]=UpdateUserService;