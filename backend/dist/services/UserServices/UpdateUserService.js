'use strict';const a534_0x3e33cc=a534_0x249e;(function(_0x2b90da,_0x490850){const _0x55d36b=a534_0x249e,_0x2c3f9b=_0x2b90da();while(!![]){try{const _0x21abba=-parseInt(_0x55d36b(0x1bb))/0x1+-parseInt(_0x55d36b(0x1a3))/0x2*(parseInt(_0x55d36b(0x19f))/0x3)+parseInt(_0x55d36b(0x198))/0x4*(parseInt(_0x55d36b(0x1b7))/0x5)+-parseInt(_0x55d36b(0x1aa))/0x6+-parseInt(_0x55d36b(0x19a))/0x7+-parseInt(_0x55d36b(0x1bf))/0x8*(-parseInt(_0x55d36b(0x1be))/0x9)+parseInt(_0x55d36b(0x1a5))/0xa;if(_0x21abba===_0x490850)break;else _0x2c3f9b['push'](_0x2c3f9b['shift']());}catch(_0x30f8bb){_0x2c3f9b['push'](_0x2c3f9b['shift']());}}}(a534_0x1045,0x95d08));function a534_0x249e(_0x131034,_0x5bbb37){const _0x104514=a534_0x1045();return a534_0x249e=function(_0x249e04,_0x4dc5ac){_0x249e04=_0x249e04-0x193;let _0x451f3c=_0x104514[_0x249e04];return _0x451f3c;},a534_0x249e(_0x131034,_0x5bbb37);}var __createBinding=this&&this['__createBinding']||(Object[a534_0x3e33cc(0x1ad)]?function(_0x21eb9c,_0x31f89a,_0x29b079,_0x5613ef){const _0x51c8aa=a534_0x3e33cc;if(_0x5613ef===undefined)_0x5613ef=_0x29b079;var _0x221276=Object[_0x51c8aa(0x19c)](_0x31f89a,_0x29b079);(!_0x221276||(_0x51c8aa(0x1b5)in _0x221276?!_0x31f89a[_0x51c8aa(0x195)]:_0x221276[_0x51c8aa(0x1ba)]||_0x221276['configurable']))&&(_0x221276={'enumerable':!![],'get':function(){return _0x31f89a[_0x29b079];}}),Object[_0x51c8aa(0x1b1)](_0x21eb9c,_0x5613ef,_0x221276);}:function(_0x43836d,_0x3458c1,_0x5261db,_0x3d6a0d){if(_0x3d6a0d===undefined)_0x3d6a0d=_0x5261db;_0x43836d[_0x3d6a0d]=_0x3458c1[_0x5261db];}),__setModuleDefault=this&&this[a534_0x3e33cc(0x1a4)]||(Object[a534_0x3e33cc(0x1ad)]?function(_0x1cdc6c,_0x3abe46){const _0x1d419f=a534_0x3e33cc;Object[_0x1d419f(0x1b1)](_0x1cdc6c,'default',{'enumerable':!![],'value':_0x3abe46});}:function(_0x23131a,_0x18cf5f){const _0x58dd19=a534_0x3e33cc;_0x23131a[_0x58dd19(0x1a2)]=_0x18cf5f;}),__importStar=this&&this[a534_0x3e33cc(0x1b2)]||function(_0x19a46d){const _0xf6ac21=a534_0x3e33cc;if(_0x19a46d&&_0x19a46d[_0xf6ac21(0x195)])return _0x19a46d;var _0x59366b={};if(_0x19a46d!=null){for(var _0x207934 in _0x19a46d)if(_0x207934!==_0xf6ac21(0x1a2)&&Object[_0xf6ac21(0x1a6)][_0xf6ac21(0x1ac)]['call'](_0x19a46d,_0x207934))__createBinding(_0x59366b,_0x19a46d,_0x207934);}return __setModuleDefault(_0x59366b,_0x19a46d),_0x59366b;},__importDefault=this&&this[a534_0x3e33cc(0x1ae)]||function(_0x174045){return _0x174045&&_0x174045['__esModule']?_0x174045:{'default':_0x174045};};Object[a534_0x3e33cc(0x1b1)](exports,'__esModule',{'value':!![]});function a534_0x1045(){const _0x32e84d=['object','hasOwnProperty','create','__importDefault','shape','yup','defineProperty','__importStar','../../models/Company','super','get','defaultTheme','1415005AOemkA','allTicket','./ShowUserService','writable','144453JOJYRx','farewellMessage','allowGroup','4764789bGzKuI','16xjhNTO','string','findByPk','__esModule','validate','endWork','12sdIyzQ','../../errors/AppError','7152600iSJYyg','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','getOwnPropertyDescriptor','reload','startWork','3tqvRHd','companyId','name','default','1045270PvRqzf','__setModuleDefault','7615120clUtVD','prototype','queues','email','message','2200974fgWYRU'];a534_0x1045=function(){return _0x32e84d;};return a534_0x1045();}const Yup=__importStar(require(a534_0x3e33cc(0x1b0))),AppError_1=__importDefault(require(a534_0x3e33cc(0x199))),ShowUserService_1=__importDefault(require(a534_0x3e33cc(0x1b9))),Company_1=__importDefault(require(a534_0x3e33cc(0x1b3))),User_1=__importDefault(require('../../models/User')),UpdateUserService=async({userData:_0x14f0c9,userId:_0x15e48e,companyId:_0x55a275,requestUserId:_0x48b40b})=>{const _0x3b66f1=a534_0x3e33cc,_0x29f886=await(0x0,ShowUserService_1[_0x3b66f1(0x1a2)])(_0x15e48e),_0x5c7347=await User_1[_0x3b66f1(0x1a2)][_0x3b66f1(0x194)](_0x48b40b);if(_0x5c7347[_0x3b66f1(0x1b4)]===![]&&_0x14f0c9['companyId']!==_0x55a275)throw new AppError_1[(_0x3b66f1(0x1a2))](_0x3b66f1(0x19b));const _0xc80966=Yup[_0x3b66f1(0x1ab)]()[_0x3b66f1(0x1af)]({'name':Yup[_0x3b66f1(0x193)]()['min'](0x2),'email':Yup[_0x3b66f1(0x193)]()[_0x3b66f1(0x1a8)](),'profile':Yup[_0x3b66f1(0x193)](),'password':Yup[_0x3b66f1(0x193)]()}),{email:_0x5cf16f,password:_0x597f11,profile:_0x1be736,name:_0x48f61c,queueIds:queueIds=[],startWork:_0x258591,endWork:_0x2e87de,farewellMessage:_0x2c44bb,whatsappId:_0x4c9e8d,allTicket:_0x3c7d1c,defaultTheme:_0x3bb070,defaultMenu:_0x476a41,allowGroup:_0x156f69}=_0x14f0c9;try{await _0xc80966[_0x3b66f1(0x196)]({'email':_0x5cf16f,'password':_0x597f11,'profile':_0x1be736,'name':_0x48f61c});}catch(_0x226e60){throw new AppError_1[(_0x3b66f1(0x1a2))](_0x226e60[_0x3b66f1(0x1a9)]);}await _0x29f886['update']({'email':_0x5cf16f,'password':_0x597f11,'profile':_0x1be736,'name':_0x48f61c,'startWork':_0x258591,'endWork':_0x2e87de,'farewellMessage':_0x2c44bb,'whatsappId':_0x4c9e8d||null,'allTicket':_0x3c7d1c,'defaultTheme':_0x3bb070,'defaultMenu':_0x476a41,'allowGroup':_0x156f69});if(queueIds['length']>0x0)await _0x29f886['$set'](_0x3b66f1(0x1a7),queueIds);await _0x29f886[_0x3b66f1(0x19d)]();const _0x48ac24=await Company_1['default'][_0x3b66f1(0x194)](_0x29f886[_0x3b66f1(0x1a0)]),_0x443d23={'id':_0x29f886['id'],'name':_0x29f886[_0x3b66f1(0x1a1)],'email':_0x29f886[_0x3b66f1(0x1a8)],'profile':_0x29f886['profile'],'companyId':_0x29f886[_0x3b66f1(0x1a0)],'company':_0x48ac24,'queues':_0x29f886[_0x3b66f1(0x1a7)],'startWork':_0x29f886[_0x3b66f1(0x19e)],'endWork':_0x29f886[_0x3b66f1(0x197)],'greetingMessage':_0x29f886[_0x3b66f1(0x1bc)],'allTicket':_0x29f886[_0x3b66f1(0x1b8)],'defaultMenu':_0x29f886['defaultMenu'],'defaultTheme':_0x29f886[_0x3b66f1(0x1b6)],'allowGroup':_0x29f886[_0x3b66f1(0x1bd)]};return _0x443d23;};exports['default']=UpdateUserService;