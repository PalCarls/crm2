'use strict';const a609_0x2bc864=a609_0xb573;function a609_0x3c34(){const _0x2f3253=['hasOwnProperty','allowGroup','./ShowUserService','$set','findByPk','writable','prototype','message','default','__esModule','5imtVsh','shape','endWork','string','email','update','allHistoric','startWork','1200848lSfpmS','name','create','defineProperty','get','object','min','16dBRuHN','7267818rlhgye','profile','1735405NQphzJ','493864UDLfQH','super','validate','1146318CUURgw','19273914UsDyuX','queues','call','yup','companyId','140928OTodHG','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','allTicket','__setModuleDefault'];a609_0x3c34=function(){return _0x2f3253;};return a609_0x3c34();}(function(_0x218ee4,_0x21d556){const _0x5e7ea1=a609_0xb573,_0x431117=_0x218ee4();while(!![]){try{const _0x283c04=-parseInt(_0x5e7ea1(0xf5))/0x1+-parseInt(_0x5e7ea1(0xee))/0x2*(-parseInt(_0x5e7ea1(0xfb))/0x3)+parseInt(_0x5e7ea1(0x111))/0x4+-parseInt(_0x5e7ea1(0x109))/0x5*(parseInt(_0x5e7ea1(0xef))/0x6)+parseInt(_0x5e7ea1(0xf1))/0x7+-parseInt(_0x5e7ea1(0xf2))/0x8+parseInt(_0x5e7ea1(0xf6))/0x9;if(_0x283c04===_0x21d556)break;else _0x431117['push'](_0x431117['shift']());}catch(_0x46936c){_0x431117['push'](_0x431117['shift']());}}}(a609_0x3c34,0x9dbef));var __createBinding=this&&this['__createBinding']||(Object[a609_0x2bc864(0x113)]?function(_0x56f10c,_0xec5308,_0x25692e,_0x12f610){const _0xedfcc5=a609_0x2bc864;if(_0x12f610===undefined)_0x12f610=_0x25692e;var _0x437bd2=Object['getOwnPropertyDescriptor'](_0xec5308,_0x25692e);(!_0x437bd2||(_0xedfcc5(0x115)in _0x437bd2?!_0xec5308['__esModule']:_0x437bd2[_0xedfcc5(0x104)]||_0x437bd2['configurable']))&&(_0x437bd2={'enumerable':!![],'get':function(){return _0xec5308[_0x25692e];}}),Object[_0xedfcc5(0x114)](_0x56f10c,_0x12f610,_0x437bd2);}:function(_0x223761,_0xe7e094,_0x1d775a,_0x3483ef){if(_0x3483ef===undefined)_0x3483ef=_0x1d775a;_0x223761[_0x3483ef]=_0xe7e094[_0x1d775a];}),__setModuleDefault=this&&this[a609_0x2bc864(0xfe)]||(Object[a609_0x2bc864(0x113)]?function(_0x1824f1,_0x45e29d){const _0x1967e9=a609_0x2bc864;Object[_0x1967e9(0x114)](_0x1824f1,'default',{'enumerable':!![],'value':_0x45e29d});}:function(_0x46f1af,_0x3f4dc2){_0x46f1af['default']=_0x3f4dc2;}),__importStar=this&&this['__importStar']||function(_0x4c0273){const _0x171191=a609_0x2bc864;if(_0x4c0273&&_0x4c0273['__esModule'])return _0x4c0273;var _0x84b38c={};if(_0x4c0273!=null){for(var _0x3b274b in _0x4c0273)if(_0x3b274b!=='default'&&Object[_0x171191(0x105)][_0x171191(0xff)][_0x171191(0xf8)](_0x4c0273,_0x3b274b))__createBinding(_0x84b38c,_0x4c0273,_0x3b274b);}return __setModuleDefault(_0x84b38c,_0x4c0273),_0x84b38c;},__importDefault=this&&this['__importDefault']||function(_0x225c39){const _0x15e3cd=a609_0x2bc864;return _0x225c39&&_0x225c39[_0x15e3cd(0x108)]?_0x225c39:{'default':_0x225c39};};Object[a609_0x2bc864(0x114)](exports,a609_0x2bc864(0x108),{'value':!![]});function a609_0xb573(_0x53a509,_0xd4ac4d){const _0x3c3454=a609_0x3c34();return a609_0xb573=function(_0xb57370,_0x2954cb){_0xb57370=_0xb57370-0xed;let _0x123282=_0x3c3454[_0xb57370];return _0x123282;},a609_0xb573(_0x53a509,_0xd4ac4d);}const Yup=__importStar(require(a609_0x2bc864(0xf9))),AppError_1=__importDefault(require('../../errors/AppError')),ShowUserService_1=__importDefault(require(a609_0x2bc864(0x101))),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require('../../models/User')),UpdateUserService=async({userData:_0x1bd801,userId:_0xd03272,companyId:_0x3bfc32,requestUserId:_0x84b683})=>{const _0x17619d=a609_0x2bc864,_0x4f57ca=await(0x0,ShowUserService_1['default'])(_0xd03272,_0x3bfc32),_0x27676c=await User_1[_0x17619d(0x107)][_0x17619d(0x103)](_0x84b683);if(_0x27676c[_0x17619d(0xf3)]===![]&&_0x1bd801[_0x17619d(0xfa)]!==_0x3bfc32)throw new AppError_1[(_0x17619d(0x107))](_0x17619d(0xfc));const _0x365fdd=Yup[_0x17619d(0x116)]()[_0x17619d(0x10a)]({'name':Yup[_0x17619d(0x10c)]()[_0x17619d(0xed)](0x2),'allHistoric':Yup['string'](),'email':Yup['string']()[_0x17619d(0x10d)](),'profile':Yup[_0x17619d(0x10c)](),'password':Yup[_0x17619d(0x10c)]()}),_0x21e96e=_0x4f57ca[_0x17619d(0x10d)],{email:_0x1cfacf,password:_0x322cf6,profile:_0x252576,name:_0x5dce24,queueIds:queueIds=[],startWork:_0x1b9014,endWork:_0x3e1cf1,farewellMessage:_0x3b4509,whatsappId:_0x5c45ca,allTicket:_0x2701f2,defaultTheme:_0x39c6b7,defaultMenu:_0x3c3b94,allowGroup:_0x14e030,allHistoric:_0xfb2a31,allUserChat:_0x2ba8d2}=_0x1bd801;try{await _0x365fdd[_0x17619d(0xf4)]({'email':_0x1cfacf,'password':_0x322cf6,'profile':_0x252576,'name':_0x5dce24});}catch(_0x4df326){throw new AppError_1['default'](_0x4df326[_0x17619d(0x106)]);}await _0x4f57ca[_0x17619d(0x10e)]({'email':_0x1cfacf,'password':_0x322cf6,'profile':_0x252576,'name':_0x5dce24,'startWork':_0x1b9014,'endWork':_0x3e1cf1,'farewellMessage':_0x3b4509,'whatsappId':_0x5c45ca||null,'allTicket':_0x2701f2,'defaultTheme':_0x39c6b7,'defaultMenu':_0x3c3b94,'allowGroup':_0x14e030,'allHistoric':_0xfb2a31,'allUserChat':_0x2ba8d2}),await _0x4f57ca[_0x17619d(0x102)](_0x17619d(0xf7),queueIds),await _0x4f57ca['reload']();const _0x4d3a98=await Company_1[_0x17619d(0x107)][_0x17619d(0x103)](_0x4f57ca[_0x17619d(0xfa)]);_0x4d3a98['email']===_0x21e96e&&await _0x4d3a98['update']({'email':_0x1cfacf,'password':_0x322cf6});const _0x2586e1={'id':_0x4f57ca['id'],'name':_0x4f57ca[_0x17619d(0x112)],'email':_0x4f57ca[_0x17619d(0x10d)],'profile':_0x4f57ca[_0x17619d(0xf0)],'companyId':_0x4f57ca[_0x17619d(0xfa)],'company':_0x4d3a98,'queues':_0x4f57ca[_0x17619d(0xf7)],'startWork':_0x4f57ca[_0x17619d(0x110)],'endWork':_0x4f57ca[_0x17619d(0x10b)],'greetingMessage':_0x4f57ca['farewellMessage'],'allTicket':_0x4f57ca[_0x17619d(0xfd)],'defaultMenu':_0x4f57ca['defaultMenu'],'defaultTheme':_0x4f57ca['defaultTheme'],'allowGroup':_0x4f57ca[_0x17619d(0x100)],'allHistoric':_0x4f57ca[_0x17619d(0x10f)]};return _0x2586e1;};exports[a609_0x2bc864(0x107)]=UpdateUserService;