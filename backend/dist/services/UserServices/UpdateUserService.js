'use strict';const a515_0x4877ec=a515_0x9afa;function a515_0x25fc(){const _0x4074c3=['84LeTmwn','email','75021FEyVBk','537018CNvynz','defaultTheme','470qEnrPZ','queues','__setModuleDefault','370068YQBnqJ','7FSqEPA','__esModule','companyId','allTicket','length','super','shape','hasOwnProperty','defaultMenu','default','503285NdGWcr','startWork','configurable','5uUrqTh','min','findByPk','reload','writable','../../models/User','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','prototype','update','../../errors/AppError','string','1714493mkSYQQ','farewellMessage','3065560GhGYVj','8RcsTHs','defineProperty','create','object','50724XxjxDx','../../models/Company','__importStar','./ShowUserService','yup'];a515_0x25fc=function(){return _0x4074c3;};return a515_0x25fc();}(function(_0x41c0ce,_0x2b0bd1){const _0x82e3a0=a515_0x9afa,_0x232d3e=_0x41c0ce();while(!![]){try{const _0x2b6383=-parseInt(_0x82e3a0(0x12b))/0x1+parseInt(_0x82e3a0(0x120))/0x2+-parseInt(_0x82e3a0(0x11a))/0x3*(-parseInt(_0x82e3a0(0x10f))/0x4)+-parseInt(_0x82e3a0(0x12e))/0x5*(-parseInt(_0x82e3a0(0x11b))/0x6)+parseInt(_0x82e3a0(0x121))/0x7*(-parseInt(_0x82e3a0(0x13b))/0x8)+parseInt(_0x82e3a0(0x113))/0x9*(-parseInt(_0x82e3a0(0x11d))/0xa)+parseInt(_0x82e3a0(0x139))/0xb*(parseInt(_0x82e3a0(0x118))/0xc);if(_0x2b6383===_0x2b0bd1)break;else _0x232d3e['push'](_0x232d3e['shift']());}catch(_0x2c763b){_0x232d3e['push'](_0x232d3e['shift']());}}}(a515_0x25fc,0x4081c));function a515_0x9afa(_0xbe93a3,_0x24bbf5){const _0x25fc70=a515_0x25fc();return a515_0x9afa=function(_0x9afa4d,_0x194354){_0x9afa4d=_0x9afa4d-0x10f;let _0x240035=_0x25fc70[_0x9afa4d];return _0x240035;},a515_0x9afa(_0xbe93a3,_0x24bbf5);}var __createBinding=this&&this['__createBinding']||(Object[a515_0x4877ec(0x111)]?function(_0x247511,_0xa437d3,_0x2f1af9,_0x48327f){const _0x59cb7a=a515_0x4877ec;if(_0x48327f===undefined)_0x48327f=_0x2f1af9;var _0x27865a=Object['getOwnPropertyDescriptor'](_0xa437d3,_0x2f1af9);(!_0x27865a||('get'in _0x27865a?!_0xa437d3[_0x59cb7a(0x122)]:_0x27865a[_0x59cb7a(0x132)]||_0x27865a[_0x59cb7a(0x12d)]))&&(_0x27865a={'enumerable':!![],'get':function(){return _0xa437d3[_0x2f1af9];}}),Object[_0x59cb7a(0x110)](_0x247511,_0x48327f,_0x27865a);}:function(_0x4a7778,_0x481ebc,_0x3aceb6,_0x593070){if(_0x593070===undefined)_0x593070=_0x3aceb6;_0x4a7778[_0x593070]=_0x481ebc[_0x3aceb6];}),__setModuleDefault=this&&this[a515_0x4877ec(0x11f)]||(Object[a515_0x4877ec(0x111)]?function(_0x368004,_0x3e9591){const _0x4c008d=a515_0x4877ec;Object['defineProperty'](_0x368004,_0x4c008d(0x12a),{'enumerable':!![],'value':_0x3e9591});}:function(_0x1bf692,_0x43f876){const _0x1fce62=a515_0x4877ec;_0x1bf692[_0x1fce62(0x12a)]=_0x43f876;}),__importStar=this&&this[a515_0x4877ec(0x115)]||function(_0x22be58){const _0x3c6489=a515_0x4877ec;if(_0x22be58&&_0x22be58[_0x3c6489(0x122)])return _0x22be58;var _0x148206={};if(_0x22be58!=null){for(var _0x6bbb10 in _0x22be58)if(_0x6bbb10!=='default'&&Object[_0x3c6489(0x135)][_0x3c6489(0x128)]['call'](_0x22be58,_0x6bbb10))__createBinding(_0x148206,_0x22be58,_0x6bbb10);}return __setModuleDefault(_0x148206,_0x22be58),_0x148206;},__importDefault=this&&this['__importDefault']||function(_0x4c66c1){const _0x201c1b=a515_0x4877ec;return _0x4c66c1&&_0x4c66c1[_0x201c1b(0x122)]?_0x4c66c1:{'default':_0x4c66c1};};Object[a515_0x4877ec(0x110)](exports,a515_0x4877ec(0x122),{'value':!![]});const Yup=__importStar(require(a515_0x4877ec(0x117))),AppError_1=__importDefault(require(a515_0x4877ec(0x137))),ShowUserService_1=__importDefault(require(a515_0x4877ec(0x116))),Company_1=__importDefault(require(a515_0x4877ec(0x114))),User_1=__importDefault(require(a515_0x4877ec(0x133))),UpdateUserService=async({userData:_0x13a474,userId:_0x10775e,companyId:_0x1a8616,requestUserId:_0x20e5f5})=>{const _0xd1103d=a515_0x4877ec,_0x4aad09=await(0x0,ShowUserService_1[_0xd1103d(0x12a)])(_0x10775e),_0x57a633=await User_1[_0xd1103d(0x12a)][_0xd1103d(0x130)](_0x20e5f5);if(_0x57a633[_0xd1103d(0x126)]===![]&&_0x13a474[_0xd1103d(0x123)]!==_0x1a8616)throw new AppError_1[(_0xd1103d(0x12a))](_0xd1103d(0x134));const _0x31ee6d=Yup[_0xd1103d(0x112)]()[_0xd1103d(0x127)]({'name':Yup[_0xd1103d(0x138)]()[_0xd1103d(0x12f)](0x2),'email':Yup[_0xd1103d(0x138)]()[_0xd1103d(0x119)](),'profile':Yup[_0xd1103d(0x138)](),'password':Yup[_0xd1103d(0x138)]()}),{email:_0x2d5066,password:_0x46d378,profile:_0x22d4e8,name:_0x205cf5,queueIds:queueIds=[],startWork:_0x4164bc,endWork:_0x46eb9c,farewellMessage:_0x6e543f,whatsappId:_0x285734,allTicket:_0x862de2,defaultTheme:_0x2526dc,defaultMenu:_0x548fac,allowGroup:_0x6748}=_0x13a474;try{await _0x31ee6d['validate']({'email':_0x2d5066,'password':_0x46d378,'profile':_0x22d4e8,'name':_0x205cf5});}catch(_0x3f5a90){throw new AppError_1['default'](_0x3f5a90['message']);}await _0x4aad09[_0xd1103d(0x136)]({'email':_0x2d5066,'password':_0x46d378,'profile':_0x22d4e8,'name':_0x205cf5,'startWork':_0x4164bc,'endWork':_0x46eb9c,'farewellMessage':_0x6e543f,'whatsappId':_0x285734||null,'allTicket':_0x862de2,'defaultTheme':_0x2526dc,'defaultMenu':_0x548fac,'allowGroup':_0x6748});if(queueIds[_0xd1103d(0x125)]>0x0)await _0x4aad09['$set'](_0xd1103d(0x11e),queueIds);await _0x4aad09[_0xd1103d(0x131)]();const _0x258651=await Company_1[_0xd1103d(0x12a)][_0xd1103d(0x130)](_0x4aad09['companyId']),_0x11d33e={'id':_0x4aad09['id'],'name':_0x4aad09['name'],'email':_0x4aad09[_0xd1103d(0x119)],'profile':_0x4aad09['profile'],'companyId':_0x4aad09['companyId'],'company':_0x258651,'queues':_0x4aad09[_0xd1103d(0x11e)],'startWork':_0x4aad09[_0xd1103d(0x12c)],'endWork':_0x4aad09['endWork'],'greetingMessage':_0x4aad09[_0xd1103d(0x13a)],'allTicket':_0x4aad09[_0xd1103d(0x124)],'defaultMenu':_0x4aad09[_0xd1103d(0x129)],'defaultTheme':_0x4aad09[_0xd1103d(0x11c)],'allowGroup':_0x4aad09['allowGroup']};return _0x11d33e;};exports[a515_0x4877ec(0x12a)]=UpdateUserService;