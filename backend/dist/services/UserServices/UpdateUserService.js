'use strict';const a534_0x2e5dc5=a534_0x2843;function a534_0x2a58(){const _0x4f7bb1=['farewellMessage','findByPk','queues','__esModule','yup','call','__createBinding','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','writable','132312nNTbdz','default','get','prototype','configurable','name','__setModuleDefault','message','defineProperty','validate','__importDefault','email','../../models/Company','super','9SSreEG','allowGroup','1887344Gsfmhy','profile','3807450wCNDhx','__importStar','../../errors/AppError','2211237BATgau','./ShowUserService','3989830QtMGgl','companyId','startWork','getOwnPropertyDescriptor','7ofnoto','update','endWork','object','string','223239UpbhHk','393462YXdTKE','shape'];a534_0x2a58=function(){return _0x4f7bb1;};return a534_0x2a58();}(function(_0x31636d,_0x3fd203){const _0x3d6492=a534_0x2843,_0x37a996=_0x31636d();while(!![]){try{const _0x36c1cd=-parseInt(_0x3d6492(0x148))/0x1+parseInt(_0x3d6492(0x149))/0x2*(parseInt(_0x3d6492(0x162))/0x3)+-parseInt(_0x3d6492(0x154))/0x4+parseInt(_0x3d6492(0x13f))/0x5+-parseInt(_0x3d6492(0x166))/0x6+parseInt(_0x3d6492(0x143))/0x7*(parseInt(_0x3d6492(0x164))/0x8)+-parseInt(_0x3d6492(0x13d))/0x9;if(_0x36c1cd===_0x3fd203)break;else _0x37a996['push'](_0x37a996['shift']());}catch(_0x1f4ef5){_0x37a996['push'](_0x37a996['shift']());}}}(a534_0x2a58,0x77044));function a534_0x2843(_0x526702,_0x46997b){const _0x2a58e0=a534_0x2a58();return a534_0x2843=function(_0x284360,_0x3a50e1){_0x284360=_0x284360-0x13b;let _0x244447=_0x2a58e0[_0x284360];return _0x244447;},a534_0x2843(_0x526702,_0x46997b);}var __createBinding=this&&this[a534_0x2e5dc5(0x151)]||(Object['create']?function(_0x5c3d15,_0x5d369a,_0x4cc1e,_0x17494d){const _0x5e4090=a534_0x2e5dc5;if(_0x17494d===undefined)_0x17494d=_0x4cc1e;var _0x6f2c0b=Object[_0x5e4090(0x142)](_0x5d369a,_0x4cc1e);(!_0x6f2c0b||(_0x5e4090(0x156)in _0x6f2c0b?!_0x5d369a['__esModule']:_0x6f2c0b[_0x5e4090(0x153)]||_0x6f2c0b[_0x5e4090(0x158)]))&&(_0x6f2c0b={'enumerable':!![],'get':function(){return _0x5d369a[_0x4cc1e];}}),Object['defineProperty'](_0x5c3d15,_0x17494d,_0x6f2c0b);}:function(_0x5109e7,_0x2021c4,_0x4f3113,_0x5bacf6){if(_0x5bacf6===undefined)_0x5bacf6=_0x4f3113;_0x5109e7[_0x5bacf6]=_0x2021c4[_0x4f3113];}),__setModuleDefault=this&&this[a534_0x2e5dc5(0x15a)]||(Object['create']?function(_0x116f10,_0x268877){const _0x50e0a5=a534_0x2e5dc5;Object[_0x50e0a5(0x15c)](_0x116f10,'default',{'enumerable':!![],'value':_0x268877});}:function(_0x1bbead,_0x46e992){const _0x558a5f=a534_0x2e5dc5;_0x1bbead[_0x558a5f(0x155)]=_0x46e992;}),__importStar=this&&this[a534_0x2e5dc5(0x13b)]||function(_0x2c505f){const _0x2bcde8=a534_0x2e5dc5;if(_0x2c505f&&_0x2c505f[_0x2bcde8(0x14e)])return _0x2c505f;var _0x4e1259={};if(_0x2c505f!=null){for(var _0x58a714 in _0x2c505f)if(_0x58a714!==_0x2bcde8(0x155)&&Object[_0x2bcde8(0x157)]['hasOwnProperty'][_0x2bcde8(0x150)](_0x2c505f,_0x58a714))__createBinding(_0x4e1259,_0x2c505f,_0x58a714);}return __setModuleDefault(_0x4e1259,_0x2c505f),_0x4e1259;},__importDefault=this&&this[a534_0x2e5dc5(0x15e)]||function(_0x5bbf7b){const _0x45a295=a534_0x2e5dc5;return _0x5bbf7b&&_0x5bbf7b[_0x45a295(0x14e)]?_0x5bbf7b:{'default':_0x5bbf7b};};Object[a534_0x2e5dc5(0x15c)](exports,a534_0x2e5dc5(0x14e),{'value':!![]});const Yup=__importStar(require(a534_0x2e5dc5(0x14f))),AppError_1=__importDefault(require(a534_0x2e5dc5(0x13c))),ShowUserService_1=__importDefault(require(a534_0x2e5dc5(0x13e))),Company_1=__importDefault(require(a534_0x2e5dc5(0x160))),User_1=__importDefault(require('../../models/User')),UpdateUserService=async({userData:_0x50e463,userId:_0x36f931,companyId:_0x47bdd8,requestUserId:_0x22c5f8})=>{const _0x2568f4=a534_0x2e5dc5,_0x288f8d=await(0x0,ShowUserService_1[_0x2568f4(0x155)])(_0x36f931),_0x58e8ed=await User_1[_0x2568f4(0x155)][_0x2568f4(0x14c)](_0x22c5f8);if(_0x58e8ed[_0x2568f4(0x161)]===![]&&_0x50e463[_0x2568f4(0x140)]!==_0x47bdd8)throw new AppError_1['default'](_0x2568f4(0x152));const _0x3fb2c5=Yup[_0x2568f4(0x146)]()[_0x2568f4(0x14a)]({'name':Yup[_0x2568f4(0x147)]()['min'](0x2),'email':Yup[_0x2568f4(0x147)]()['email'](),'profile':Yup['string'](),'password':Yup[_0x2568f4(0x147)]()}),{email:_0x79940,password:_0x1d54ed,profile:_0x23646b,name:_0x2c2d3b,queueIds:queueIds=[],startWork:_0x1477dd,endWork:_0x43a7d5,farewellMessage:_0x4ba9e7,whatsappId:_0x116051,allTicket:_0x271770,defaultTheme:_0xc8038b,defaultMenu:_0x5c55b4,allowGroup:_0x4e9812}=_0x50e463;try{await _0x3fb2c5[_0x2568f4(0x15d)]({'email':_0x79940,'password':_0x1d54ed,'profile':_0x23646b,'name':_0x2c2d3b});}catch(_0x1c977a){throw new AppError_1[(_0x2568f4(0x155))](_0x1c977a[_0x2568f4(0x15b)]);}await _0x288f8d[_0x2568f4(0x144)]({'email':_0x79940,'password':_0x1d54ed,'profile':_0x23646b,'name':_0x2c2d3b,'startWork':_0x1477dd,'endWork':_0x43a7d5,'farewellMessage':_0x4ba9e7,'whatsappId':_0x116051||null,'allTicket':_0x271770,'defaultTheme':_0xc8038b,'defaultMenu':_0x5c55b4,'allowGroup':_0x4e9812});if(queueIds['length']>0x0)await _0x288f8d['$set'](_0x2568f4(0x14d),queueIds);await _0x288f8d['reload']();const _0xfca519=await Company_1[_0x2568f4(0x155)][_0x2568f4(0x14c)](_0x288f8d[_0x2568f4(0x140)]),_0xe44cbe={'id':_0x288f8d['id'],'name':_0x288f8d[_0x2568f4(0x159)],'email':_0x288f8d[_0x2568f4(0x15f)],'profile':_0x288f8d[_0x2568f4(0x165)],'companyId':_0x288f8d[_0x2568f4(0x140)],'company':_0xfca519,'queues':_0x288f8d['queues'],'startWork':_0x288f8d[_0x2568f4(0x141)],'endWork':_0x288f8d[_0x2568f4(0x145)],'greetingMessage':_0x288f8d[_0x2568f4(0x14b)],'allTicket':_0x288f8d['allTicket'],'defaultMenu':_0x288f8d['defaultMenu'],'defaultTheme':_0x288f8d['defaultTheme'],'allowGroup':_0x288f8d[_0x2568f4(0x163)]};return _0xe44cbe;};exports[a534_0x2e5dc5(0x155)]=UpdateUserService;