'use strict';function a609_0x3484(){const _0x381d73=['prototype','object','14CWdfUu','__esModule','1382604iGqzMr','queues','string','35wgyiPy','10989160uZMjTk','defineProperty','getOwnPropertyDescriptor','629352uiAmpa','get','../../errors/AppError','2JCiRBB','shape','name','./ShowUserService','endWork','$set','allTicket','default','1869273kuuqJZ','create','__setModuleDefault','defaultMenu','1214080rBiHpq','__importDefault','yup','update','writable','defaultTheme','hasOwnProperty','validate','profile','configurable','findByPk','email','message','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','allowGroup','min','968774TtQlex','reload','__createBinding','__importStar','667036TzCUoI'];a609_0x3484=function(){return _0x381d73;};return a609_0x3484();}const a609_0x2007e5=a609_0x3305;(function(_0x4b25fc,_0x3a6e51){const _0x56bb96=a609_0x3305,_0x2b62dd=_0x4b25fc();while(!![]){try{const _0x2df27a=-parseInt(_0x56bb96(0x124))/0x1*(-parseInt(_0x56bb96(0x111))/0x2)+parseInt(_0x56bb96(0x12c))/0x3+parseInt(_0x56bb96(0x115))/0x4*(parseInt(_0x56bb96(0x11d))/0x5)+parseInt(_0x56bb96(0x11a))/0x6*(-parseInt(_0x56bb96(0x118))/0x7)+-parseInt(_0x56bb96(0x11e))/0x8+-parseInt(_0x56bb96(0x121))/0x9+-parseInt(_0x56bb96(0x130))/0xa;if(_0x2df27a===_0x3a6e51)break;else _0x2b62dd['push'](_0x2b62dd['shift']());}catch(_0x3cc363){_0x2b62dd['push'](_0x2b62dd['shift']());}}}(a609_0x3484,0xb3091));var __createBinding=this&&this[a609_0x2007e5(0x113)]||(Object[a609_0x2007e5(0x12d)]?function(_0x11e141,_0x27bb7b,_0xbb50b3,_0x2dc035){const _0x5841e8=a609_0x2007e5;if(_0x2dc035===undefined)_0x2dc035=_0xbb50b3;var _0x289a27=Object[_0x5841e8(0x120)](_0x27bb7b,_0xbb50b3);(!_0x289a27||(_0x5841e8(0x122)in _0x289a27?!_0x27bb7b[_0x5841e8(0x119)]:_0x289a27[_0x5841e8(0x105)]||_0x289a27[_0x5841e8(0x10a)]))&&(_0x289a27={'enumerable':!![],'get':function(){return _0x27bb7b[_0xbb50b3];}}),Object['defineProperty'](_0x11e141,_0x2dc035,_0x289a27);}:function(_0x34a501,_0x351aba,_0x4ef29a,_0x191cb7){if(_0x191cb7===undefined)_0x191cb7=_0x4ef29a;_0x34a501[_0x191cb7]=_0x351aba[_0x4ef29a];}),__setModuleDefault=this&&this[a609_0x2007e5(0x12e)]||(Object['create']?function(_0x175772,_0x26cde1){const _0x455997=a609_0x2007e5;Object[_0x455997(0x11f)](_0x175772,_0x455997(0x12b),{'enumerable':!![],'value':_0x26cde1});}:function(_0x460892,_0x5ca6f0){_0x460892['default']=_0x5ca6f0;}),__importStar=this&&this[a609_0x2007e5(0x114)]||function(_0x3602ff){const _0x2aed5a=a609_0x2007e5;if(_0x3602ff&&_0x3602ff[_0x2aed5a(0x119)])return _0x3602ff;var _0x1757e3={};if(_0x3602ff!=null){for(var _0xebe016 in _0x3602ff)if(_0xebe016!==_0x2aed5a(0x12b)&&Object[_0x2aed5a(0x116)][_0x2aed5a(0x107)]['call'](_0x3602ff,_0xebe016))__createBinding(_0x1757e3,_0x3602ff,_0xebe016);}return __setModuleDefault(_0x1757e3,_0x3602ff),_0x1757e3;},__importDefault=this&&this[a609_0x2007e5(0x131)]||function(_0x24c05f){const _0x4666ed=a609_0x2007e5;return _0x24c05f&&_0x24c05f[_0x4666ed(0x119)]?_0x24c05f:{'default':_0x24c05f};};Object[a609_0x2007e5(0x11f)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a609_0x2007e5(0x132))),AppError_1=__importDefault(require(a609_0x2007e5(0x123))),ShowUserService_1=__importDefault(require(a609_0x2007e5(0x127))),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require('../../models/User')),UpdateUserService=async({userData:_0x4c118a,userId:_0x313b2b,companyId:_0x4d29d3,requestUserId:_0x19349b})=>{const _0x37fdc4=a609_0x2007e5,_0x593bfe=await(0x0,ShowUserService_1[_0x37fdc4(0x12b)])(_0x313b2b,_0x4d29d3),_0x8260b7=await User_1['default'][_0x37fdc4(0x10b)](_0x19349b);if(_0x8260b7['super']===![]&&_0x4c118a['companyId']!==_0x4d29d3)throw new AppError_1['default'](_0x37fdc4(0x10e));const _0x25fff4=Yup[_0x37fdc4(0x117)]()[_0x37fdc4(0x125)]({'name':Yup[_0x37fdc4(0x11c)]()[_0x37fdc4(0x110)](0x2),'allHistoric':Yup['string'](),'email':Yup[_0x37fdc4(0x11c)]()['email'](),'profile':Yup[_0x37fdc4(0x11c)](),'password':Yup['string']()}),_0x4f2237=_0x593bfe[_0x37fdc4(0x10c)],{email:_0x27aeaa,password:_0x3cf383,profile:_0x48d0cd,name:_0x182841,queueIds:queueIds=[],startWork:_0x55d2af,endWork:_0x368280,farewellMessage:_0xccf84c,whatsappId:_0x371cb0,allTicket:_0x4809af,defaultTheme:_0x490717,defaultMenu:_0x4ec725,allowGroup:_0x93a6c0,allHistoric:_0x1ab503,allUserChat:_0x38ce1c}=_0x4c118a;try{await _0x25fff4[_0x37fdc4(0x108)]({'email':_0x27aeaa,'password':_0x3cf383,'profile':_0x48d0cd,'name':_0x182841});}catch(_0x299f17){throw new AppError_1[(_0x37fdc4(0x12b))](_0x299f17[_0x37fdc4(0x10d)]);}await _0x593bfe[_0x37fdc4(0x104)]({'email':_0x27aeaa,'password':_0x3cf383,'profile':_0x48d0cd,'name':_0x182841,'startWork':_0x55d2af,'endWork':_0x368280,'farewellMessage':_0xccf84c,'whatsappId':_0x371cb0||null,'allTicket':_0x4809af,'defaultTheme':_0x490717,'defaultMenu':_0x4ec725,'allowGroup':_0x93a6c0,'allHistoric':_0x1ab503,'allUserChat':_0x38ce1c}),await _0x593bfe[_0x37fdc4(0x129)](_0x37fdc4(0x11b),queueIds),await _0x593bfe[_0x37fdc4(0x112)]();const _0x904b2e=await Company_1[_0x37fdc4(0x12b)][_0x37fdc4(0x10b)](_0x593bfe['companyId']);_0x904b2e['email']===_0x4f2237&&await _0x904b2e[_0x37fdc4(0x104)]({'email':_0x27aeaa,'password':_0x3cf383});const _0x4e8a69={'id':_0x593bfe['id'],'name':_0x593bfe[_0x37fdc4(0x126)],'email':_0x593bfe[_0x37fdc4(0x10c)],'profile':_0x593bfe[_0x37fdc4(0x109)],'companyId':_0x593bfe['companyId'],'company':_0x904b2e,'queues':_0x593bfe[_0x37fdc4(0x11b)],'startWork':_0x593bfe['startWork'],'endWork':_0x593bfe[_0x37fdc4(0x128)],'greetingMessage':_0x593bfe['farewellMessage'],'allTicket':_0x593bfe[_0x37fdc4(0x12a)],'defaultMenu':_0x593bfe[_0x37fdc4(0x12f)],'defaultTheme':_0x593bfe[_0x37fdc4(0x106)],'allowGroup':_0x593bfe[_0x37fdc4(0x10f)],'allHistoric':_0x593bfe['allHistoric']};return _0x4e8a69;};function a609_0x3305(_0x55f4ee,_0x316818){const _0x348453=a609_0x3484();return a609_0x3305=function(_0x3305b3,_0x46138c){_0x3305b3=_0x3305b3-0x104;let _0x1b7984=_0x348453[_0x3305b3];return _0x1b7984;},a609_0x3305(_0x55f4ee,_0x316818);}exports[a609_0x2007e5(0x12b)]=UpdateUserService;