'use strict';function a551_0xc051(){const _0x58f1d0=['3180PsCvJV','allowGroup','prototype','call','update','10klTbAn','create','717363joXXxT','get','./ShowUserService','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','queues','min','profile','configurable','message','30dPxgEC','allTicket','default','defineProperty','super','__setModuleDefault','reload','validate','3341GzgSmp','farewellMessage','defaultTheme','30052AfqzoP','34xasXhh','name','4153941bNzCpn','__createBinding','8WvCSWO','../../models/Company','$set','string','getOwnPropertyDescriptor','1332pgUUSR','__esModule','email','hasOwnProperty','writable','8685TkdOcw','endWork','findByPk','../../models/User','companyId','898527zApEEO','length','2925189foNvEo','../../errors/AppError'];a551_0xc051=function(){return _0x58f1d0;};return a551_0xc051();}function a551_0x4b24(_0x1426aa,_0x27053f){const _0xc05139=a551_0xc051();return a551_0x4b24=function(_0x4b24ed,_0x577116){_0x4b24ed=_0x4b24ed-0x15d;let _0x50b340=_0xc05139[_0x4b24ed];return _0x50b340;},a551_0x4b24(_0x1426aa,_0x27053f);}const a551_0x5e4758=a551_0x4b24;(function(_0x2a91c0,_0x1dd467){const _0x1e11b5=a551_0x4b24,_0x3f7d8d=_0x2a91c0();while(!![]){try{const _0x4d629e=parseInt(_0x1e11b5(0x161))/0x1*(parseInt(_0x1e11b5(0x160))/0x2)+-parseInt(_0x1e11b5(0x17f))/0x3+parseInt(_0x1e11b5(0x16a))/0x4*(parseInt(_0x1e11b5(0x16f))/0x5)+parseInt(_0x1e11b5(0x188))/0x6*(-parseInt(_0x1e11b5(0x174))/0x7)+parseInt(_0x1e11b5(0x165))/0x8*(-parseInt(_0x1e11b5(0x176))/0x9)+-parseInt(_0x1e11b5(0x17d))/0xa*(-parseInt(_0x1e11b5(0x163))/0xb)+-parseInt(_0x1e11b5(0x178))/0xc*(-parseInt(_0x1e11b5(0x15d))/0xd);if(_0x4d629e===_0x1dd467)break;else _0x3f7d8d['push'](_0x3f7d8d['shift']());}catch(_0x495023){_0x3f7d8d['push'](_0x3f7d8d['shift']());}}}(a551_0xc051,0x50586));var __createBinding=this&&this[a551_0x5e4758(0x164)]||(Object[a551_0x5e4758(0x17e)]?function(_0x30bf67,_0x319442,_0x283940,_0x2851f6){const _0x1f0ff6=a551_0x5e4758;if(_0x2851f6===undefined)_0x2851f6=_0x283940;var _0x5db832=Object[_0x1f0ff6(0x169)](_0x319442,_0x283940);(!_0x5db832||(_0x1f0ff6(0x180)in _0x5db832?!_0x319442[_0x1f0ff6(0x16b)]:_0x5db832[_0x1f0ff6(0x16e)]||_0x5db832[_0x1f0ff6(0x186)]))&&(_0x5db832={'enumerable':!![],'get':function(){return _0x319442[_0x283940];}}),Object[_0x1f0ff6(0x18b)](_0x30bf67,_0x2851f6,_0x5db832);}:function(_0x261db9,_0x2ca845,_0x41aa4e,_0x279862){if(_0x279862===undefined)_0x279862=_0x41aa4e;_0x261db9[_0x279862]=_0x2ca845[_0x41aa4e];}),__setModuleDefault=this&&this[a551_0x5e4758(0x18d)]||(Object[a551_0x5e4758(0x17e)]?function(_0xf89da5,_0x22850d){const _0x148f36=a551_0x5e4758;Object[_0x148f36(0x18b)](_0xf89da5,_0x148f36(0x18a),{'enumerable':!![],'value':_0x22850d});}:function(_0x700288,_0x33bb16){const _0x388d4d=a551_0x5e4758;_0x700288[_0x388d4d(0x18a)]=_0x33bb16;}),__importStar=this&&this['__importStar']||function(_0x3b7063){const _0x3084a5=a551_0x5e4758;if(_0x3b7063&&_0x3b7063[_0x3084a5(0x16b)])return _0x3b7063;var _0x28894b={};if(_0x3b7063!=null){for(var _0x442c8 in _0x3b7063)if(_0x442c8!==_0x3084a5(0x18a)&&Object[_0x3084a5(0x17a)][_0x3084a5(0x16d)][_0x3084a5(0x17b)](_0x3b7063,_0x442c8))__createBinding(_0x28894b,_0x3b7063,_0x442c8);}return __setModuleDefault(_0x28894b,_0x3b7063),_0x28894b;},__importDefault=this&&this['__importDefault']||function(_0x1dc31e){const _0x444ac6=a551_0x5e4758;return _0x1dc31e&&_0x1dc31e[_0x444ac6(0x16b)]?_0x1dc31e:{'default':_0x1dc31e};};Object[a551_0x5e4758(0x18b)](exports,a551_0x5e4758(0x16b),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a551_0x5e4758(0x177))),ShowUserService_1=__importDefault(require(a551_0x5e4758(0x181))),Company_1=__importDefault(require(a551_0x5e4758(0x166))),User_1=__importDefault(require(a551_0x5e4758(0x172))),UpdateUserService=async({userData:_0x3dbdec,userId:_0x28967a,companyId:_0x38c6d7,requestUserId:_0x11ad72})=>{const _0x1a73cf=a551_0x5e4758,_0x5690f9=await(0x0,ShowUserService_1['default'])(_0x28967a),_0x379235=await User_1[_0x1a73cf(0x18a)]['findByPk'](_0x11ad72);if(_0x379235[_0x1a73cf(0x18c)]===![]&&_0x3dbdec[_0x1a73cf(0x173)]!==_0x38c6d7)throw new AppError_1[(_0x1a73cf(0x18a))](_0x1a73cf(0x182));const _0x5d0833=Yup['object']()['shape']({'name':Yup[_0x1a73cf(0x168)]()[_0x1a73cf(0x184)](0x2),'email':Yup[_0x1a73cf(0x168)]()[_0x1a73cf(0x16c)](),'profile':Yup[_0x1a73cf(0x168)](),'password':Yup[_0x1a73cf(0x168)]()}),{email:_0x2e0460,password:_0x1d3f61,profile:_0x5cafb2,name:_0x5eed75,queueIds:queueIds=[],startWork:_0x5f524a,endWork:_0xb0426b,farewellMessage:_0xed1c02,whatsappId:_0x3eb396,allTicket:_0x5e9caf,defaultTheme:_0x8ea0ad,defaultMenu:_0x570ff1,allowGroup:_0x3d0e73}=_0x3dbdec;try{await _0x5d0833[_0x1a73cf(0x18f)]({'email':_0x2e0460,'password':_0x1d3f61,'profile':_0x5cafb2,'name':_0x5eed75});}catch(_0x2d9c43){throw new AppError_1[(_0x1a73cf(0x18a))](_0x2d9c43[_0x1a73cf(0x187)]);}await _0x5690f9[_0x1a73cf(0x17c)]({'email':_0x2e0460,'password':_0x1d3f61,'profile':_0x5cafb2,'name':_0x5eed75,'startWork':_0x5f524a,'endWork':_0xb0426b,'farewellMessage':_0xed1c02,'whatsappId':_0x3eb396||null,'allTicket':_0x5e9caf,'defaultTheme':_0x8ea0ad,'defaultMenu':_0x570ff1,'allowGroup':_0x3d0e73});if(queueIds[_0x1a73cf(0x175)]>0x0)await _0x5690f9[_0x1a73cf(0x167)](_0x1a73cf(0x183),queueIds);await _0x5690f9[_0x1a73cf(0x18e)]();const _0x421786=await Company_1['default'][_0x1a73cf(0x171)](_0x5690f9[_0x1a73cf(0x173)]),_0x29e431={'id':_0x5690f9['id'],'name':_0x5690f9[_0x1a73cf(0x162)],'email':_0x5690f9[_0x1a73cf(0x16c)],'profile':_0x5690f9[_0x1a73cf(0x185)],'companyId':_0x5690f9['companyId'],'company':_0x421786,'queues':_0x5690f9[_0x1a73cf(0x183)],'startWork':_0x5690f9['startWork'],'endWork':_0x5690f9[_0x1a73cf(0x170)],'greetingMessage':_0x5690f9[_0x1a73cf(0x15e)],'allTicket':_0x5690f9[_0x1a73cf(0x189)],'defaultMenu':_0x5690f9['defaultMenu'],'defaultTheme':_0x5690f9[_0x1a73cf(0x15f)],'allowGroup':_0x5690f9[_0x1a73cf(0x179)]};return _0x29e431;};exports['default']=UpdateUserService;