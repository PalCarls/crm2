'use strict';const a411_0x4b7b4c=a411_0x231c;(function(_0x309037,_0x370b8a){const _0x4a3c39=a411_0x231c,_0x5a84e5=_0x309037();while(!![]){try{const _0x995e67=parseInt(_0x4a3c39(0xe7))/0x1+-parseInt(_0x4a3c39(0xcb))/0x2*(parseInt(_0x4a3c39(0xd9))/0x3)+parseInt(_0x4a3c39(0xd3))/0x4*(parseInt(_0x4a3c39(0xdc))/0x5)+parseInt(_0x4a3c39(0xe6))/0x6+-parseInt(_0x4a3c39(0xd7))/0x7+-parseInt(_0x4a3c39(0xe9))/0x8+parseInt(_0x4a3c39(0xe4))/0x9;if(_0x995e67===_0x370b8a)break;else _0x5a84e5['push'](_0x5a84e5['shift']());}catch(_0x569fc3){_0x5a84e5['push'](_0x5a84e5['shift']());}}}(a411_0x2777,0xef742));function a411_0x231c(_0x4ac7a2,_0x5c6a02){const _0x277766=a411_0x2777();return a411_0x231c=function(_0x231ca5,_0x1f96f3){_0x231ca5=_0x231ca5-0xca;let _0x266ac4=_0x277766[_0x231ca5];return _0x266ac4;},a411_0x231c(_0x4ac7a2,_0x5c6a02);}var __importDefault=this&&this[a411_0x4b7b4c(0xca)]||function(_0x57d2e8){const _0x5dad51=a411_0x4b7b4c;return _0x57d2e8&&_0x57d2e8[_0x5dad51(0xe2)]?_0x57d2e8:{'default':_0x57d2e8};};function a411_0x2777(){const _0xb23e26=['Não\x20consegui\x20bloquear\x20o\x20contato','active','updateBlockStatus','../../errors/AppError','isInteger','__esModule','findByPk','27182358KfStMy','whatsappCompany.id','8001834wtmgNP','118311dDUeIt','companyId','3696568KNpNkM','__importDefault','1754854wFUwwF','number','getWbot','update','default','parseInt','block','@s.whatsapp.net','1108064STwCzz','includes','../../libs/wbot','defineProperty','10860507xzikpa','log','6MlBWMz','Não\x20consegui\x20desbloquear\x20o\x20contato','jid','5wQBGjH'];a411_0x2777=function(){return _0xb23e26;};return a411_0x2777();}Object[a411_0x4b7b4c(0xd6)](exports,a411_0x4b7b4c(0xe2),{'value':!![]});const AppError_1=__importDefault(require(a411_0x4b7b4c(0xe0))),GetDefaultWhatsApp_1=__importDefault(require('../../helpers/GetDefaultWhatsApp')),wbot_1=require(a411_0x4b7b4c(0xd5)),Contact_1=__importDefault(require('../../models/Contact'));function formatBRNumber(_0x49b7c6){const _0x5afe17=a411_0x4b7b4c,_0x1cb147=new RegExp(/^(\d{2})(\d{2})\d{1}(\d{8})$/);if(_0x1cb147['test'](_0x49b7c6)){const _0x31b2eb=_0x1cb147['exec'](_0x49b7c6);if(_0x31b2eb&&_0x31b2eb[0x1]==='55'&&Number[_0x5afe17(0xe1)](Number[_0x5afe17(0xd0)](_0x31b2eb[0x2]))){const _0x1271d1=Number[_0x5afe17(0xd0)](_0x31b2eb[0x2]);if(_0x1271d1<0x1f)return _0x31b2eb[0x0];else{if(_0x1271d1>=0x1f)return _0x31b2eb[0x1]+_0x31b2eb[0x2]+_0x31b2eb[0x3];}}}else return _0x49b7c6;}function createJid(_0x2c0f0f){const _0x5966fd=a411_0x4b7b4c;if(_0x2c0f0f[_0x5966fd(0xd4)]('@g.us')||_0x2c0f0f[_0x5966fd(0xd4)](_0x5966fd(0xd2)))return formatBRNumber(_0x2c0f0f);return _0x2c0f0f['includes']('-')?_0x2c0f0f+'@g.us':formatBRNumber(_0x2c0f0f)+_0x5966fd(0xd2);}const BlockUnblockContactService=async({contactId:_0x1f9df1,companyId:_0x579cf4,active:_0x40cbae})=>{const _0x556ddc=a411_0x4b7b4c,_0x1157a0=await Contact_1[_0x556ddc(0xcf)][_0x556ddc(0xe3)](_0x1f9df1);if(!_0x1157a0)throw new AppError_1['default']('ERR_NO_CONTACT_FOUND',0x194);console['log'](_0x556ddc(0xde),_0x40cbae),console['log'](_0x556ddc(0xe8),_0x579cf4),console[_0x556ddc(0xd8)]('contact.number',_0x1157a0[_0x556ddc(0xcc)]);if(_0x40cbae)try{const _0x506557=await(0x0,GetDefaultWhatsApp_1[_0x556ddc(0xcf)])(Number(_0x579cf4));console['log'](_0x556ddc(0xe5),_0x506557['id']);const _0x5490e7=(0x0,wbot_1[_0x556ddc(0xcd)])(_0x506557['id']),_0x11fac4=createJid(_0x1157a0[_0x556ddc(0xcc)]);console['log'](_0x556ddc(0xdb),_0x11fac4);const _0x2e343e=await _0x5490e7[_0x556ddc(0xdf)](_0x11fac4,'unblock');console[_0x556ddc(0xd8)](_0x2e343e),await _0x1157a0[_0x556ddc(0xce)]({'active':!![]});}catch(_0x2300b4){console['log'](_0x556ddc(0xda));}if(!_0x40cbae)try{const _0x1dc72d=await(0x0,GetDefaultWhatsApp_1['default'])(Number(_0x579cf4));console[_0x556ddc(0xd8)](_0x556ddc(0xe5),_0x1dc72d['id']);const _0x57dfde=(0x0,wbot_1[_0x556ddc(0xcd)])(_0x1dc72d['id']),_0x273d52=createJid(_0x1157a0[_0x556ddc(0xcc)]);console[_0x556ddc(0xd8)](_0x556ddc(0xdb),_0x273d52);const _0x43f2b3=await _0x57dfde['updateBlockStatus'](_0x273d52,_0x556ddc(0xd1));console[_0x556ddc(0xd8)](_0x556ddc(0xd1),_0x43f2b3),await _0x1157a0[_0x556ddc(0xce)]({'active':![]});}catch(_0x5e9cd7){console[_0x556ddc(0xd8)](_0x556ddc(0xdd));}return _0x1157a0;};exports[a411_0x4b7b4c(0xcf)]=BlockUnblockContactService;