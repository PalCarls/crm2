'use strict';const a381_0x7ac340=a381_0x38b3;function a381_0x38b3(_0x4045a2,_0x5a1774){const _0x193b9f=a381_0x193b();return a381_0x38b3=function(_0x38b33e,_0x3cc823){_0x38b33e=_0x38b33e-0x165;let _0x541f12=_0x193b9f[_0x38b33e];return _0x541f12;},a381_0x38b3(_0x4045a2,_0x5a1774);}(function(_0x339093,_0x33f258){const _0x1fdf37=a381_0x38b3,_0x407bcb=_0x339093();while(!![]){try{const _0x21d53d=-parseInt(_0x1fdf37(0x173))/0x1+-parseInt(_0x1fdf37(0x182))/0x2*(parseInt(_0x1fdf37(0x166))/0x3)+-parseInt(_0x1fdf37(0x186))/0x4+parseInt(_0x1fdf37(0x177))/0x5*(-parseInt(_0x1fdf37(0x16c))/0x6)+-parseInt(_0x1fdf37(0x179))/0x7+parseInt(_0x1fdf37(0x16a))/0x8+-parseInt(_0x1fdf37(0x174))/0x9*(-parseInt(_0x1fdf37(0x171))/0xa);if(_0x21d53d===_0x33f258)break;else _0x407bcb['push'](_0x407bcb['shift']());}catch(_0x454fe4){_0x407bcb['push'](_0x407bcb['shift']());}}}(a381_0x193b,0x50d50));var __importDefault=this&&this['__importDefault']||function(_0x369dd8){const _0x10b1a1=a381_0x38b3;return _0x369dd8&&_0x369dd8[_0x10b1a1(0x16d)]?_0x369dd8:{'default':_0x369dd8};};Object['defineProperty'](exports,a381_0x7ac340(0x16d),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),wbot_1=require(a381_0x7ac340(0x170)),Contact_1=__importDefault(require('../../models/Contact')),FindCompaniesWhatsappService_1=__importDefault(require(a381_0x7ac340(0x165)));function formatBRNumber(_0x562461){const _0xc1b37c=a381_0x7ac340,_0xeaa47=new RegExp(/^(\d{2})(\d{2})\d{1}(\d{8})$/);if(_0xeaa47['test'](_0x562461)){const _0x868bb9=_0xeaa47[_0xc1b37c(0x17a)](_0x562461);if(_0x868bb9&&_0x868bb9[0x1]==='55'&&Number['isInteger'](Number[_0xc1b37c(0x17c)](_0x868bb9[0x2]))){const _0x15e9b5=Number[_0xc1b37c(0x17c)](_0x868bb9[0x2]);if(_0x15e9b5<0x1f)return _0x868bb9[0x0];else{if(_0x15e9b5>=0x1f)return _0x868bb9[0x1]+_0x868bb9[0x2]+_0x868bb9[0x3];}}}else return _0x562461;}function createJid(_0x302e82){const _0x2206cc=a381_0x7ac340;if(_0x302e82[_0x2206cc(0x16e)](_0x2206cc(0x180))||_0x302e82[_0x2206cc(0x16e)](_0x2206cc(0x181)))return formatBRNumber(_0x302e82);return _0x302e82['includes']('-')?_0x302e82+_0x2206cc(0x180):formatBRNumber(_0x302e82)+'@s.whatsapp.net';}const BlockUnblockContactService=async({contactId:_0x141b14,companyId:_0x511320,active:_0x2203ce})=>{const _0xc213e3=a381_0x7ac340,_0x383775=await Contact_1['default'][_0xc213e3(0x169)]({'where':{'id':_0x141b14},'attributes':[_0xc213e3(0x168)]});if(!_0x383775)throw new AppError_1[(_0xc213e3(0x16f))](_0xc213e3(0x183),0x194);console[_0xc213e3(0x178)]('active',_0x2203ce),console[_0xc213e3(0x178)](_0xc213e3(0x176),_0x511320),console['log'](_0xc213e3(0x17d),_0x383775[_0xc213e3(0x168)]);if(_0x2203ce)try{const _0x252bc2=await(0x0,FindCompaniesWhatsappService_1[_0xc213e3(0x16f)])(_0x511320);console['log'](_0xc213e3(0x175),_0x252bc2['id']);const _0x58e7f0=(0x0,wbot_1['getWbot'])(_0x252bc2['id']),_0x176757=createJid(_0x383775[_0xc213e3(0x168)]);console['log'](_0xc213e3(0x17b),_0x176757),await _0x58e7f0[_0xc213e3(0x184)](_0x176757,_0xc213e3(0x16b)),await _0x383775[_0xc213e3(0x172)]({'active':!![]});}catch(_0x2d8aba){console[_0xc213e3(0x178)](_0xc213e3(0x167));}if(!_0x2203ce)try{const _0x45f394=await(0x0,FindCompaniesWhatsappService_1[_0xc213e3(0x16f)])(_0x511320);console[_0xc213e3(0x178)](_0xc213e3(0x175),_0x45f394['id']);const _0x33f34c=(0x0,wbot_1[_0xc213e3(0x17f)])(_0x45f394['id']),_0x532ff4=createJid(_0x383775['number']);console[_0xc213e3(0x178)](_0xc213e3(0x17b),_0x532ff4);const _0x28ad81=await _0x33f34c['updateBlockStatus'](_0x532ff4,_0xc213e3(0x17e));console[_0xc213e3(0x178)](_0xc213e3(0x17e),_0x28ad81),await _0x383775[_0xc213e3(0x172)]({'active':![]});}catch(_0x597729){console['log'](_0xc213e3(0x185));}return _0x383775;};function a381_0x193b(){const _0x45334a=['636831CebILO','whatsappCompany.id','companyId','31805rapOGJ','log','1980265oNyYXW','exec','jid','parseInt','contact.number','block','getWbot','@g.us','@s.whatsapp.net','890DISVdl','ERR_NO_CONTACT_FOUND','updateBlockStatus','Não\x20consegui\x20bloquear\x20o\x20contato','934884fJPmBK','../CompanyService/FindCompaniesWhatsappService','75uTadmA','Não\x20consegui\x20desbloquear\x20o\x20contato','number','findOne','3293576xlming','unblock','564VikvaB','__esModule','includes','default','../../libs/wbot','210LTyczI','update','440873CDyYOd'];a381_0x193b=function(){return _0x45334a;};return a381_0x193b();}exports[a381_0x7ac340(0x16f)]=BlockUnblockContactService;