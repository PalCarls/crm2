'use strict';const a396_0x1b6694=a396_0xa428;(function(_0x3abec8,_0x4f99a9){const _0x1836b6=a396_0xa428,_0xcc22d=_0x3abec8();while(!![]){try{const _0xf56af5=-parseInt(_0x1836b6(0x1fd))/0x1+-parseInt(_0x1836b6(0x20a))/0x2+-parseInt(_0x1836b6(0x1f1))/0x3+parseInt(_0x1836b6(0x201))/0x4+-parseInt(_0x1836b6(0x213))/0x5*(-parseInt(_0x1836b6(0x208))/0x6)+parseInt(_0x1836b6(0x1f3))/0x7+-parseInt(_0x1836b6(0x206))/0x8*(-parseInt(_0x1836b6(0x1f8))/0x9);if(_0xf56af5===_0x4f99a9)break;else _0xcc22d['push'](_0xcc22d['shift']());}catch(_0xd0bdc6){_0xcc22d['push'](_0xcc22d['shift']());}}}(a396_0xd60e,0xd4d9f));var __importDefault=this&&this[a396_0x1b6694(0x1f9)]||function(_0x2f539c){const _0x59f5f0=a396_0x1b6694;return _0x2f539c&&_0x2f539c[_0x59f5f0(0x20b)]?_0x2f539c:{'default':_0x2f539c};};Object[a396_0x1b6694(0x202)](exports,a396_0x1b6694(0x20b),{'value':!![]});function a396_0xa428(_0xd32216,_0x265547){const _0xd60e01=a396_0xd60e();return a396_0xa428=function(_0xa428f3,_0x271193){_0xa428f3=_0xa428f3-0x1f0;let _0x53e3ef=_0xd60e01[_0xa428f3];return _0x53e3ef;},a396_0xa428(_0xd32216,_0x265547);}const AppError_1=__importDefault(require(a396_0x1b6694(0x1f4))),wbot_1=require('../../libs/wbot'),Contact_1=__importDefault(require(a396_0x1b6694(0x214))),FindCompaniesWhatsappService_1=__importDefault(require(a396_0x1b6694(0x1f7)));function formatBRNumber(_0x4d6b){const _0xb03ba2=a396_0x1b6694,_0x388c53=new RegExp(/^(\d{2})(\d{2})\d{1}(\d{8})$/);if(_0x388c53[_0xb03ba2(0x1fe)](_0x4d6b)){const _0x2581c3=_0x388c53[_0xb03ba2(0x207)](_0x4d6b);if(_0x2581c3&&_0x2581c3[0x1]==='55'&&Number[_0xb03ba2(0x205)](Number[_0xb03ba2(0x1f0)](_0x2581c3[0x2]))){const _0xe772c9=Number['parseInt'](_0x2581c3[0x2]);if(_0xe772c9<0x1f)return _0x2581c3[0x0];else{if(_0xe772c9>=0x1f)return _0x2581c3[0x1]+_0x2581c3[0x2]+_0x2581c3[0x3];}}}else return _0x4d6b;}function createJid(_0x53bde9){const _0x32d5fe=a396_0x1b6694;if(_0x53bde9[_0x32d5fe(0x211)](_0x32d5fe(0x20d))||_0x53bde9[_0x32d5fe(0x211)](_0x32d5fe(0x20e)))return formatBRNumber(_0x53bde9);return _0x53bde9[_0x32d5fe(0x211)]('-')?_0x53bde9+_0x32d5fe(0x20d):formatBRNumber(_0x53bde9)+_0x32d5fe(0x20e);}const BlockUnblockContactService=async({contactId:_0x5e3b8a,companyId:_0x249868,active:_0x5b54da})=>{const _0x313857=a396_0x1b6694,_0x551193=await Contact_1[_0x313857(0x1f2)][_0x313857(0x1fb)]({'where':{'id':_0x5e3b8a},'attributes':[_0x313857(0x20c)]});if(!_0x551193)throw new AppError_1[(_0x313857(0x1f2))]('ERR_NO_CONTACT_FOUND',0x194);console[_0x313857(0x204)](_0x313857(0x209),_0x5b54da),console['log'](_0x313857(0x20f),_0x249868),console['log']('contact.number',_0x551193[_0x313857(0x20c)]);if(_0x5b54da)try{const _0x3ae1a6=await(0x0,FindCompaniesWhatsappService_1[_0x313857(0x1f2)])(_0x249868);console[_0x313857(0x204)](_0x313857(0x212),_0x3ae1a6['id']);const _0x6de5a9=(0x0,wbot_1[_0x313857(0x210)])(_0x3ae1a6['id']),_0x4fd8df=createJid(_0x551193[_0x313857(0x20c)]);console[_0x313857(0x204)](_0x313857(0x200),_0x4fd8df),await _0x6de5a9[_0x313857(0x1fc)](_0x4fd8df,_0x313857(0x1ff)),await _0x551193[_0x313857(0x1f6)]({'active':!![]});}catch(_0x5c032b){console[_0x313857(0x204)](_0x313857(0x203));}if(!_0x5b54da)try{const _0x5b7d86=await(0x0,FindCompaniesWhatsappService_1[_0x313857(0x1f2)])(_0x249868);console['log'](_0x313857(0x212),_0x5b7d86['id']);const _0x22977d=(0x0,wbot_1[_0x313857(0x210)])(_0x5b7d86['id']),_0x52c866=createJid(_0x551193[_0x313857(0x20c)]);console[_0x313857(0x204)](_0x313857(0x200),_0x52c866);const _0x2a178d=await _0x22977d['updateBlockStatus'](_0x52c866,_0x313857(0x1fa));console[_0x313857(0x204)](_0x313857(0x1fa),_0x2a178d),await _0x551193['update']({'active':![]});}catch(_0x54dc89){console[_0x313857(0x204)](_0x313857(0x1f5));}return _0x551193;};exports[a396_0x1b6694(0x1f2)]=BlockUnblockContactService;function a396_0xd60e(){const _0x4cb877=['companyId','getWbot','includes','whatsappCompany.id','8005IPsNaS','../../models/Contact','parseInt','5037903VVEfQk','default','4369008sxzcYD','../../errors/AppError','Não\x20consegui\x20bloquear\x20o\x20contato','update','../CompanyService/FindCompaniesWhatsappService','4685301OdZBPC','__importDefault','block','findOne','updateBlockStatus','118683CewuCz','test','unblock','jid','1283176DRLfmB','defineProperty','Não\x20consegui\x20desbloquear\x20o\x20contato','log','isInteger','32gwObNv','exec','642MjiXRM','active','1057556lfuAkq','__esModule','number','@g.us','@s.whatsapp.net'];a396_0xd60e=function(){return _0x4cb877;};return a396_0xd60e();}