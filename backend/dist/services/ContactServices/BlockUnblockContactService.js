'use strict';function a411_0x369f(){const _0x437ebc=['2768238gUCAzr','active','contact.number','3083535AaIAmt','getWbot','parseInt','includes','number','../../errors/AppError','__importDefault','log','jid','470leEkwM','update','block','4022984rSSNBi','2465319AAcigX','test','updateBlockStatus','265820zLpuxt','default','exec','Não\x20consegui\x20bloquear\x20o\x20contato','companyId','34156mubHPA','../../helpers/GetDefaultWhatsApp','unblock','451478dGOnYs','__esModule','isInteger','defineProperty','@g.us','whatsappCompany.id'];a411_0x369f=function(){return _0x437ebc;};return a411_0x369f();}function a411_0x39cf(_0x4dfec7,_0x11dbd7){const _0x369fb8=a411_0x369f();return a411_0x39cf=function(_0x39cf78,_0x455963){_0x39cf78=_0x39cf78-0x151;let _0x41cdab=_0x369fb8[_0x39cf78];return _0x41cdab;},a411_0x39cf(_0x4dfec7,_0x11dbd7);}const a411_0x1cc1ef=a411_0x39cf;(function(_0x41e1fd,_0x3d8c90){const _0x5ec631=a411_0x39cf,_0x568b15=_0x41e1fd();while(!![]){try{const _0x2ae62f=-parseInt(_0x5ec631(0x157))/0x1+parseInt(_0x5ec631(0x15f))/0x2+parseInt(_0x5ec631(0x154))/0x3+-parseInt(_0x5ec631(0x15c))/0x4*(parseInt(_0x5ec631(0x171))/0x5)+parseInt(_0x5ec631(0x165))/0x6+-parseInt(_0x5ec631(0x168))/0x7+parseInt(_0x5ec631(0x153))/0x8;if(_0x2ae62f===_0x3d8c90)break;else _0x568b15['push'](_0x568b15['shift']());}catch(_0x496dbc){_0x568b15['push'](_0x568b15['shift']());}}}(a411_0x369f,0x7abef));var __importDefault=this&&this[a411_0x1cc1ef(0x16e)]||function(_0x345e33){const _0x291350=a411_0x1cc1ef;return _0x345e33&&_0x345e33[_0x291350(0x160)]?_0x345e33:{'default':_0x345e33};};Object[a411_0x1cc1ef(0x162)](exports,a411_0x1cc1ef(0x160),{'value':!![]});const AppError_1=__importDefault(require(a411_0x1cc1ef(0x16d))),GetDefaultWhatsApp_1=__importDefault(require(a411_0x1cc1ef(0x15d))),wbot_1=require('../../libs/wbot'),Contact_1=__importDefault(require('../../models/Contact'));function formatBRNumber(_0x1524ca){const _0x1aae97=a411_0x1cc1ef,_0x417132=new RegExp(/^(\d{2})(\d{2})\d{1}(\d{8})$/);if(_0x417132[_0x1aae97(0x155)](_0x1524ca)){const _0x16fea3=_0x417132[_0x1aae97(0x159)](_0x1524ca);if(_0x16fea3&&_0x16fea3[0x1]==='55'&&Number[_0x1aae97(0x161)](Number[_0x1aae97(0x16a)](_0x16fea3[0x2]))){const _0x4f0145=Number['parseInt'](_0x16fea3[0x2]);if(_0x4f0145<0x1f)return _0x16fea3[0x0];else{if(_0x4f0145>=0x1f)return _0x16fea3[0x1]+_0x16fea3[0x2]+_0x16fea3[0x3];}}}else return _0x1524ca;}function createJid(_0x383e2b){const _0x5625c0=a411_0x1cc1ef;if(_0x383e2b[_0x5625c0(0x16b)]('@g.us')||_0x383e2b[_0x5625c0(0x16b)]('@s.whatsapp.net'))return formatBRNumber(_0x383e2b);return _0x383e2b[_0x5625c0(0x16b)]('-')?_0x383e2b+_0x5625c0(0x163):formatBRNumber(_0x383e2b)+'@s.whatsapp.net';}const BlockUnblockContactService=async({contactId:_0x283769,companyId:_0x3e4066,active:_0x21d323})=>{const _0x363275=a411_0x1cc1ef,_0x4d607f=await Contact_1[_0x363275(0x158)]['findByPk'](_0x283769);if(!_0x4d607f)throw new AppError_1['default']('ERR_NO_CONTACT_FOUND',0x194);console[_0x363275(0x16f)](_0x363275(0x166),_0x21d323),console[_0x363275(0x16f)](_0x363275(0x15b),_0x3e4066),console[_0x363275(0x16f)](_0x363275(0x167),_0x4d607f[_0x363275(0x16c)]);if(_0x21d323)try{const _0x133a7d=await(0x0,GetDefaultWhatsApp_1['default'])(Number(_0x3e4066));console[_0x363275(0x16f)](_0x363275(0x164),_0x133a7d['id']);const _0x28701b=(0x0,wbot_1[_0x363275(0x169)])(_0x133a7d['id']),_0x5ef827=createJid(_0x4d607f[_0x363275(0x16c)]);console[_0x363275(0x16f)](_0x363275(0x170),_0x5ef827);const _0x8bcae=await _0x28701b[_0x363275(0x156)](_0x5ef827,_0x363275(0x15e));console['log'](_0x8bcae),await _0x4d607f[_0x363275(0x151)]({'active':!![]});}catch(_0x250a15){console[_0x363275(0x16f)]('Não\x20consegui\x20desbloquear\x20o\x20contato');}if(!_0x21d323)try{const _0x158db4=await(0x0,GetDefaultWhatsApp_1[_0x363275(0x158)])(Number(_0x3e4066));console[_0x363275(0x16f)](_0x363275(0x164),_0x158db4['id']);const _0x22a4e1=(0x0,wbot_1[_0x363275(0x169)])(_0x158db4['id']),_0x4d886c=createJid(_0x4d607f['number']);console[_0x363275(0x16f)](_0x363275(0x170),_0x4d886c);const _0x43c97e=await _0x22a4e1['updateBlockStatus'](_0x4d886c,_0x363275(0x152));console[_0x363275(0x16f)](_0x363275(0x152),_0x43c97e),await _0x4d607f[_0x363275(0x151)]({'active':![]});}catch(_0x19ce4a){console[_0x363275(0x16f)](_0x363275(0x15a));}return _0x4d607f;};exports['default']=BlockUnblockContactService;