'use strict';function a472_0x2da3(){const _0x478cd6=['8qlVxYB','wallets','../../errors/AppError','__esModule','8FpWuAx','bulkCreate','active','findIndex','all','24dxNIrx','forEach','default','acceptAudioMessage','update','findOne','55103YxlPiP','785832NQzCaH','urlPicture','defineProperty','../../models/ContactWallet','map','profilePicUrl','1068704eqIVaj','10WuYZNS','../../models/Contact','148210FhBEAB','tags','push','upsert','450348uIUXwB','110KxDOJT','destroy','channel','154917SibKYk','reload','name','Não\x20é\x20possível\x20alterar\x20registros\x20de\x20outra\x20empresa','email','extraInfo','1629126rYeJFQ','remoteJid','number','companyId'];a472_0x2da3=function(){return _0x478cd6;};return a472_0x2da3();}const a472_0x4689d3=a472_0x9e15;(function(_0x3a650d,_0x2ffa10){const _0x311e82=a472_0x9e15,_0x572211=_0x3a650d();while(!![]){try{const _0x44fb86=parseInt(_0x311e82(0x1b7))/0x1*(-parseInt(_0x311e82(0x1d3))/0x2)+parseInt(_0x311e82(0x1c9))/0x3+-parseInt(_0x311e82(0x1dc))/0x4*(parseInt(_0x311e82(0x1c1))/0x5)+parseInt(_0x311e82(0x1b8))/0x6+-parseInt(_0x311e82(0x1be))/0x7*(-parseInt(_0x311e82(0x1d7))/0x8)+-parseInt(_0x311e82(0x1cf))/0x9*(parseInt(_0x311e82(0x1bf))/0xa)+-parseInt(_0x311e82(0x1c6))/0xb*(-parseInt(_0x311e82(0x1c5))/0xc);if(_0x44fb86===_0x2ffa10)break;else _0x572211['push'](_0x572211['shift']());}catch(_0x23754d){_0x572211['push'](_0x572211['shift']());}}}(a472_0x2da3,0x200df));function a472_0x9e15(_0x1f74fa,_0x15a158){const _0x2da378=a472_0x2da3();return a472_0x9e15=function(_0x9e15d0,_0x20b063){_0x9e15d0=_0x9e15d0-0x1b6;let _0x3e104d=_0x2da378[_0x9e15d0];return _0x3e104d;},a472_0x9e15(_0x1f74fa,_0x15a158);}var __importDefault=this&&this['__importDefault']||function(_0xe16a8a){const _0x17d1c6=a472_0x9e15;return _0xe16a8a&&_0xe16a8a[_0x17d1c6(0x1d6)]?_0xe16a8a:{'default':_0xe16a8a};};Object[a472_0x4689d3(0x1ba)](exports,a472_0x4689d3(0x1d6),{'value':!![]});const AppError_1=__importDefault(require(a472_0x4689d3(0x1d5))),Contact_1=__importDefault(require(a472_0x4689d3(0x1c0))),ContactCustomField_1=__importDefault(require('../../models/ContactCustomField')),ContactWallet_1=__importDefault(require(a472_0x4689d3(0x1bb))),UpdateContactService=async({contactData:_0xfa92f6,contactId:_0x269aaf,companyId:_0x2ce112})=>{const _0x16391a=a472_0x4689d3,{email:_0x554047,name:_0xf84d41,number:_0x52c7ae,extraInfo:_0x10f83f,acceptAudioMessage:_0x24970d,active:_0x65839d,disableBot:_0x24dc8a,remoteJid:_0x32397f,wallets:_0x1792da}=_0xfa92f6,_0x190e8c=await Contact_1[_0x16391a(0x1de)][_0x16391a(0x1b6)]({'where':{'id':_0x269aaf},'attributes':['id',_0x16391a(0x1cb),_0x16391a(0x1d1),_0x16391a(0x1c8),_0x16391a(0x1cd),'companyId',_0x16391a(0x1df),_0x16391a(0x1d9),_0x16391a(0x1bd),'remoteJid',_0x16391a(0x1b9)],'include':[_0x16391a(0x1ce),_0x16391a(0x1c2),{'association':_0x16391a(0x1d4),'attributes':['id',_0x16391a(0x1cb)]}]});if(_0x190e8c?.[_0x16391a(0x1d2)]!==_0x2ce112)throw new AppError_1[(_0x16391a(0x1de))](_0x16391a(0x1cc));if(!_0x190e8c)throw new AppError_1[(_0x16391a(0x1de))]('ERR_NO_CONTACT_FOUND',0x194);_0x10f83f&&(await Promise[_0x16391a(0x1db)](_0x10f83f[_0x16391a(0x1bc)](async _0x3db293=>{const _0x456ed3=_0x16391a;await ContactCustomField_1[_0x456ed3(0x1de)][_0x456ed3(0x1c4)]({..._0x3db293,'contactId':_0x190e8c['id']});})),await Promise['all'](_0x190e8c[_0x16391a(0x1ce)][_0x16391a(0x1bc)](async _0x3cf71b=>{const _0x1f8102=_0x16391a,_0x39f326=_0x10f83f[_0x1f8102(0x1da)](_0x13f13e=>_0x13f13e['id']===_0x3cf71b['id']);_0x39f326===-0x1&&await ContactCustomField_1[_0x1f8102(0x1de)][_0x1f8102(0x1c7)]({'where':{'id':_0x3cf71b['id']}});})));if(_0x1792da){await ContactWallet_1[_0x16391a(0x1de)][_0x16391a(0x1c7)]({'where':{'companyId':_0x2ce112,'contactId':_0x269aaf}});const _0x1088be=[];_0x1792da[_0x16391a(0x1dd)](_0x41137e=>{const _0x54b232=_0x16391a;_0x1088be[_0x54b232(0x1c3)]({'walletId':!_0x41137e['id']?_0x41137e:_0x41137e['id'],'contactId':_0x269aaf,'companyId':_0x2ce112});}),await ContactWallet_1[_0x16391a(0x1de)][_0x16391a(0x1d8)](_0x1088be);}return await _0x190e8c[_0x16391a(0x1e0)]({'name':_0xf84d41,'number':_0x52c7ae,'email':_0x554047,'acceptAudioMessage':_0x24970d,'active':_0x65839d,'disableBot':_0x24dc8a,'remoteJid':_0x32397f}),await _0x190e8c[_0x16391a(0x1ca)]({'attributes':['id',_0x16391a(0x1cb),_0x16391a(0x1c8),_0x16391a(0x1d1),_0x16391a(0x1cd),_0x16391a(0x1df),_0x16391a(0x1d9),_0x16391a(0x1bd),_0x16391a(0x1d0)],'include':[_0x16391a(0x1ce),'tags',{'association':_0x16391a(0x1d4),'attributes':['id',_0x16391a(0x1cb)]}]}),_0x190e8c;};exports['default']=UpdateContactService;