'use strict';const a472_0x15fe32=a472_0x3922;function a472_0x44fe(){const _0x125db3=['1190012JbYcaZ','update','3122004daGzif','3730388FZMBci','11iXntvS','141366oaIuGC','__esModule','email','map','18CMMcvI','default','channel','profilePicUrl','active','acceptAudioMessage','7IinGha','ERR_NO_CONTACT_FOUND','reload','findOne','tags','forEach','all','17273860zGonnk','1oRDWIu','extraInfo','findIndex','../../errors/AppError','10jNhoMH','push','wallets','remoteJid','17394588aSySSb','../../models/Contact','number','companyId','Não\x20é\x20possível\x20alterar\x20registros\x20de\x20outra\x20empresa','upsert','bulkCreate','__importDefault','name','destroy','2109072TCwPAs','urlPicture','../../models/ContactWallet'];a472_0x44fe=function(){return _0x125db3;};return a472_0x44fe();}function a472_0x3922(_0x8e11a3,_0x457c13){const _0x44fe08=a472_0x44fe();return a472_0x3922=function(_0x392202,_0x5ded1f){_0x392202=_0x392202-0x176;let _0x39659b=_0x44fe08[_0x392202];return _0x39659b;},a472_0x3922(_0x8e11a3,_0x457c13);}(function(_0x392c6c,_0x4a6d67){const _0x3657fa=a472_0x3922,_0x1844ea=_0x392c6c();while(!![]){try{const _0x4653b0=parseInt(_0x3657fa(0x18a))/0x1*(parseInt(_0x3657fa(0x176))/0x2)+-parseInt(_0x3657fa(0x178))/0x3+-parseInt(_0x3657fa(0x19f))/0x4*(parseInt(_0x3657fa(0x18e))/0x5)+-parseInt(_0x3657fa(0x1a1))/0x6*(-parseInt(_0x3657fa(0x182))/0x7)+-parseInt(_0x3657fa(0x19c))/0x8*(parseInt(_0x3657fa(0x17c))/0x9)+parseInt(_0x3657fa(0x189))/0xa*(-parseInt(_0x3657fa(0x177))/0xb)+parseInt(_0x3657fa(0x192))/0xc;if(_0x4653b0===_0x4a6d67)break;else _0x1844ea['push'](_0x1844ea['shift']());}catch(_0x51efae){_0x1844ea['push'](_0x1844ea['shift']());}}}(a472_0x44fe,0xe5137));var __importDefault=this&&this[a472_0x15fe32(0x199)]||function(_0x5ee66f){const _0x20a700=a472_0x15fe32;return _0x5ee66f&&_0x5ee66f[_0x20a700(0x179)]?_0x5ee66f:{'default':_0x5ee66f};};Object['defineProperty'](exports,a472_0x15fe32(0x179),{'value':!![]});const AppError_1=__importDefault(require(a472_0x15fe32(0x18d))),Contact_1=__importDefault(require(a472_0x15fe32(0x193))),ContactCustomField_1=__importDefault(require('../../models/ContactCustomField')),ContactWallet_1=__importDefault(require(a472_0x15fe32(0x19e))),UpdateContactService=async({contactData:_0x2c02b9,contactId:_0xbf0c95,companyId:_0x28f2a4})=>{const _0x5792b0=a472_0x15fe32,{email:_0x2fbe96,name:_0x336ff1,number:_0x1b8252,extraInfo:_0x23f702,acceptAudioMessage:_0x6ae1fb,active:_0x3a0d22,disableBot:_0x4ec72c,remoteJid:_0x476ef1,wallets:_0x295136}=_0x2c02b9,_0x26f500=await Contact_1[_0x5792b0(0x17d)][_0x5792b0(0x185)]({'where':{'id':_0xbf0c95},'attributes':['id',_0x5792b0(0x19a),'number',_0x5792b0(0x17e),'email',_0x5792b0(0x195),'acceptAudioMessage','active',_0x5792b0(0x17f),_0x5792b0(0x191),_0x5792b0(0x19d)],'include':[_0x5792b0(0x18b),'tags',{'association':_0x5792b0(0x190),'attributes':['id','name']}]});if(_0x26f500?.[_0x5792b0(0x195)]!==_0x28f2a4)throw new AppError_1[(_0x5792b0(0x17d))](_0x5792b0(0x196));if(!_0x26f500)throw new AppError_1[(_0x5792b0(0x17d))](_0x5792b0(0x183),0x194);_0x23f702&&(await Promise['all'](_0x23f702[_0x5792b0(0x17b)](async _0x5331f3=>{const _0xceca3=_0x5792b0;await ContactCustomField_1['default'][_0xceca3(0x197)]({..._0x5331f3,'contactId':_0x26f500['id']});})),await Promise[_0x5792b0(0x188)](_0x26f500[_0x5792b0(0x18b)][_0x5792b0(0x17b)](async _0x556a11=>{const _0x35b992=_0x5792b0,_0xb40f98=_0x23f702[_0x35b992(0x18c)](_0x49e4fd=>_0x49e4fd['id']===_0x556a11['id']);_0xb40f98===-0x1&&await ContactCustomField_1[_0x35b992(0x17d)]['destroy']({'where':{'id':_0x556a11['id']}});})));if(_0x295136){await ContactWallet_1[_0x5792b0(0x17d)][_0x5792b0(0x19b)]({'where':{'companyId':_0x28f2a4,'contactId':_0xbf0c95}});const _0x365f3c=[];_0x295136[_0x5792b0(0x187)](_0x2fafb3=>{const _0x26f623=_0x5792b0;_0x365f3c[_0x26f623(0x18f)]({'walletId':!_0x2fafb3['id']?_0x2fafb3:_0x2fafb3['id'],'contactId':_0xbf0c95,'companyId':_0x28f2a4});}),await ContactWallet_1[_0x5792b0(0x17d)][_0x5792b0(0x198)](_0x365f3c);}return await _0x26f500[_0x5792b0(0x1a0)]({'name':_0x336ff1,'number':_0x1b8252,'email':_0x2fbe96,'acceptAudioMessage':_0x6ae1fb,'active':_0x3a0d22,'disableBot':_0x4ec72c,'remoteJid':_0x476ef1}),await _0x26f500[_0x5792b0(0x184)]({'attributes':['id','name','channel',_0x5792b0(0x194),_0x5792b0(0x17a),_0x5792b0(0x181),_0x5792b0(0x180),_0x5792b0(0x17f),_0x5792b0(0x191)],'include':[_0x5792b0(0x18b),_0x5792b0(0x186),{'association':_0x5792b0(0x190),'attributes':['id','name']}]}),_0x26f500;};exports[a472_0x15fe32(0x17d)]=UpdateContactService;