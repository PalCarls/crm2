'use strict';function a440_0x58f3(){const _0x299c8c=['companyId','__esModule','14lYsARG','ERR_NO_CONTACT_FOUND','destroy','1834544kiIGNv','profilePicUrl','number','134316zWBdSd','default','extraInfo','remoteJid','map','acceptAudioMessage','Não\x20é\x20possível\x20alterar\x20registros\x20de\x20outra\x20empresa','../../errors/AppError','all','2602260zLFySH','138HPqypc','active','136765qZXhWN','update','findIndex','name','findOne','475326givZiP','1830291LrXxcF','../../models/Contact','email','688395bAunsd'];a440_0x58f3=function(){return _0x299c8c;};return a440_0x58f3();}const a440_0xdb09be=a440_0x48d7;(function(_0x590316,_0x23b0c7){const _0x45bb6a=a440_0x48d7,_0x30414a=_0x590316();while(!![]){try{const _0x5eb541=parseInt(_0x45bb6a(0x1fc))/0x1+-parseInt(_0x45bb6a(0x205))/0x2+-parseInt(_0x45bb6a(0x1f9))/0x3+parseInt(_0x45bb6a(0x1f0))/0x4+parseInt(_0x45bb6a(0x1f3))/0x5*(-parseInt(_0x45bb6a(0x1f1))/0x6)+-parseInt(_0x45bb6a(0x1ff))/0x7*(-parseInt(_0x45bb6a(0x202))/0x8)+parseInt(_0x45bb6a(0x1f8))/0x9;if(_0x5eb541===_0x23b0c7)break;else _0x30414a['push'](_0x30414a['shift']());}catch(_0x13fd47){_0x30414a['push'](_0x30414a['shift']());}}}(a440_0x58f3,0x84d24));var __importDefault=this&&this['__importDefault']||function(_0x3d7ec4){const _0x4d8bac=a440_0x48d7;return _0x3d7ec4&&_0x3d7ec4[_0x4d8bac(0x1fe)]?_0x3d7ec4:{'default':_0x3d7ec4};};Object['defineProperty'](exports,a440_0xdb09be(0x1fe),{'value':!![]});function a440_0x48d7(_0x10c0ff,_0xcb3a54){const _0x58f364=a440_0x58f3();return a440_0x48d7=function(_0x48d762,_0x2cee52){_0x48d762=_0x48d762-0x1ea;let _0x59794f=_0x58f364[_0x48d762];return _0x59794f;},a440_0x48d7(_0x10c0ff,_0xcb3a54);}const AppError_1=__importDefault(require(a440_0xdb09be(0x1ee))),Contact_1=__importDefault(require(a440_0xdb09be(0x1fa))),ContactCustomField_1=__importDefault(require('../../models/ContactCustomField')),UpdateContactService=async({contactData:_0x355de6,contactId:_0x3c4fdd,companyId:_0x2b742a})=>{const _0x4132c2=a440_0xdb09be,{email:_0x330c9f,name:_0x26b571,number:_0x434e93,extraInfo:_0x4d09bd,acceptAudioMessage:_0x1b5fd6,active:_0x5c0129,disableBot:_0x494001,remoteJid:_0x1bf082}=_0x355de6,_0x3a1db7=await Contact_1[_0x4132c2(0x206)][_0x4132c2(0x1f7)]({'where':{'id':_0x3c4fdd},'attributes':['id',_0x4132c2(0x1f6),_0x4132c2(0x204),'email','companyId',_0x4132c2(0x1ec),_0x4132c2(0x1f2),_0x4132c2(0x203),'remoteJid'],'include':[_0x4132c2(0x207)]});if(_0x3a1db7?.[_0x4132c2(0x1fd)]!==_0x2b742a)throw new AppError_1['default'](_0x4132c2(0x1ed));if(!_0x3a1db7)throw new AppError_1[(_0x4132c2(0x206))](_0x4132c2(0x200),0x194);return _0x4d09bd&&(await Promise[_0x4132c2(0x1ef)](_0x4d09bd[_0x4132c2(0x1eb)](async _0x2919d6=>{const _0x208793=_0x4132c2;await ContactCustomField_1[_0x208793(0x206)]['upsert']({..._0x2919d6,'contactId':_0x3a1db7['id']});})),await Promise['all'](_0x3a1db7[_0x4132c2(0x207)][_0x4132c2(0x1eb)](async _0x3f8083=>{const _0x486f46=_0x4132c2,_0x4ddba4=_0x4d09bd[_0x486f46(0x1f5)](_0x47194f=>_0x47194f['id']===_0x3f8083['id']);_0x4ddba4===-0x1&&await ContactCustomField_1['default'][_0x486f46(0x201)]({'where':{'id':_0x3f8083['id']}});}))),await _0x3a1db7[_0x4132c2(0x1f4)]({'name':_0x26b571,'number':_0x434e93,'email':_0x330c9f,'acceptAudioMessage':_0x1b5fd6,'active':_0x5c0129,'disableBot':_0x494001,'remoteJid':_0x1bf082}),await _0x3a1db7['reload']({'attributes':['id','name',_0x4132c2(0x204),_0x4132c2(0x1fb),_0x4132c2(0x1ec),_0x4132c2(0x1f2),'profilePicUrl',_0x4132c2(0x1ea)],'include':[_0x4132c2(0x207)]}),_0x3a1db7;};exports[a440_0xdb09be(0x206)]=UpdateContactService;