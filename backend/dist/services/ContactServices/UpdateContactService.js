'use strict';const a479_0x333dbf=a479_0x3fc6;(function(_0x7a9914,_0x2082a0){const _0x45e9bf=a479_0x3fc6,_0x38d684=_0x7a9914();while(!![]){try{const _0x1bc171=-parseInt(_0x45e9bf(0x1dd))/0x1+parseInt(_0x45e9bf(0x1ed))/0x2*(parseInt(_0x45e9bf(0x200))/0x3)+parseInt(_0x45e9bf(0x1db))/0x4+parseInt(_0x45e9bf(0x1ec))/0x5+-parseInt(_0x45e9bf(0x1f4))/0x6*(-parseInt(_0x45e9bf(0x1f9))/0x7)+-parseInt(_0x45e9bf(0x1f6))/0x8*(-parseInt(_0x45e9bf(0x1e8))/0x9)+-parseInt(_0x45e9bf(0x1ee))/0xa*(parseInt(_0x45e9bf(0x1dc))/0xb);if(_0x1bc171===_0x2082a0)break;else _0x38d684['push'](_0x38d684['shift']());}catch(_0x478cfb){_0x38d684['push'](_0x38d684['shift']());}}}(a479_0x4583,0xae72a));var __importDefault=this&&this[a479_0x333dbf(0x1e0)]||function(_0xdef3b9){return _0xdef3b9&&_0xdef3b9['__esModule']?_0xdef3b9:{'default':_0xdef3b9};};function a479_0x3fc6(_0x4a4d19,_0x2d945d){const _0x4583dc=a479_0x4583();return a479_0x3fc6=function(_0x3fc601,_0xe901f4){_0x3fc601=_0x3fc601-0x1da;let _0x225a5e=_0x4583dc[_0x3fc601];return _0x225a5e;},a479_0x3fc6(_0x4a4d19,_0x2d945d);}function a479_0x4583(){const _0x3c6bf8=['3846yjLoop','default','Não\x20é\x20possível\x20alterar\x20registros\x20de\x20outra\x20empresa','701492nIxoeB','20650157feDOFC','1346841SZSrVH','findIndex','wallets','__importDefault','remoteJid','urlPicture','email','extraInfo','upsert','push','update','9wZCmpH','number','forEach','name','3093900VIsrQm','1766hjtixr','10EqNmvF','../../models/ContactWallet','../../models/ContactCustomField','all','findOne','../../errors/AppError','516IusIia','map','10588488VrzIep','channel','ERR_NO_CONTACT_FOUND','56077lsAuJC','active','companyId','defineProperty','../../models/Contact','profilePicUrl','acceptAudioMessage'];a479_0x4583=function(){return _0x3c6bf8;};return a479_0x4583();}Object[a479_0x333dbf(0x1fc)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a479_0x333dbf(0x1f3))),Contact_1=__importDefault(require(a479_0x333dbf(0x1fd))),ContactCustomField_1=__importDefault(require(a479_0x333dbf(0x1f0))),ContactWallet_1=__importDefault(require(a479_0x333dbf(0x1ef))),UpdateContactService=async({contactData:_0x5bb05f,contactId:_0x115c4e,companyId:_0x8f2593})=>{const _0xa2414=a479_0x333dbf,{email:_0x52057b,name:_0x107fe4,number:_0x228468,extraInfo:_0x1310f1,acceptAudioMessage:_0xe5e6ac,active:_0x2b0e88,disableBot:_0x14baca,remoteJid:_0x215b06,wallets:_0x55dad4}=_0x5bb05f,_0x2a10be=await Contact_1[_0xa2414(0x201)][_0xa2414(0x1f2)]({'where':{'id':_0x115c4e},'attributes':['id',_0xa2414(0x1eb),'number',_0xa2414(0x1f7),_0xa2414(0x1e3),_0xa2414(0x1fb),_0xa2414(0x1ff),_0xa2414(0x1fa),_0xa2414(0x1fe),_0xa2414(0x1e1),_0xa2414(0x1e2)],'include':[_0xa2414(0x1e4),'tags',{'association':'wallets','attributes':['id',_0xa2414(0x1eb)]}]});if(_0x2a10be?.[_0xa2414(0x1fb)]!==_0x8f2593)throw new AppError_1['default'](_0xa2414(0x1da));if(!_0x2a10be)throw new AppError_1['default'](_0xa2414(0x1f8),0x194);_0x1310f1&&(await Promise['all'](_0x1310f1['map'](async _0x3d3005=>{const _0x175738=_0xa2414;await ContactCustomField_1[_0x175738(0x201)][_0x175738(0x1e5)]({..._0x3d3005,'contactId':_0x2a10be['id']});})),await Promise[_0xa2414(0x1f1)](_0x2a10be[_0xa2414(0x1e4)][_0xa2414(0x1f5)](async _0x550c46=>{const _0x2be64f=_0xa2414,_0x48b4f2=_0x1310f1[_0x2be64f(0x1de)](_0x33aac4=>_0x33aac4['id']===_0x550c46['id']);_0x48b4f2===-0x1&&await ContactCustomField_1['default']['destroy']({'where':{'id':_0x550c46['id']}});})));if(_0x55dad4){await ContactWallet_1[_0xa2414(0x201)]['destroy']({'where':{'companyId':_0x8f2593,'contactId':_0x115c4e}});const _0x4d874b=[];_0x55dad4[_0xa2414(0x1ea)](_0x8612cb=>{const _0x2266df=_0xa2414;_0x4d874b[_0x2266df(0x1e6)]({'walletId':!_0x8612cb['id']?_0x8612cb:_0x8612cb['id'],'contactId':_0x115c4e,'companyId':_0x8f2593});}),await ContactWallet_1[_0xa2414(0x201)]['bulkCreate'](_0x4d874b);}return await _0x2a10be[_0xa2414(0x1e7)]({'name':_0x107fe4,'number':_0x228468,'email':_0x52057b,'acceptAudioMessage':_0xe5e6ac,'active':_0x2b0e88,'disableBot':_0x14baca,'remoteJid':_0x215b06}),await _0x2a10be['reload']({'attributes':['id','name',_0xa2414(0x1f7),_0xa2414(0x1e9),_0xa2414(0x1e3),_0xa2414(0x1ff),_0xa2414(0x1fa),_0xa2414(0x1fe),_0xa2414(0x1e1)],'include':[_0xa2414(0x1e4),'tags',{'association':_0xa2414(0x1df),'attributes':['id',_0xa2414(0x1eb)]}]}),_0x2a10be;};exports[a479_0x333dbf(0x201)]=UpdateContactService;