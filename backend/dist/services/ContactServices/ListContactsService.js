'use strict';const a421_0x16483c=a421_0x3313;(function(_0x32f209,_0x196184){const _0xff8585=a421_0x3313,_0x277746=_0x32f209();while(!![]){try{const _0x41622a=-parseInt(_0xff8585(0x7e))/0x1+parseInt(_0xff8585(0x7c))/0x2*(parseInt(_0xff8585(0x7f))/0x3)+-parseInt(_0xff8585(0x74))/0x4*(-parseInt(_0xff8585(0x8f))/0x5)+-parseInt(_0xff8585(0x8a))/0x6*(parseInt(_0xff8585(0x71))/0x7)+-parseInt(_0xff8585(0x87))/0x8*(parseInt(_0xff8585(0x84))/0x9)+parseInt(_0xff8585(0x80))/0xa+-parseInt(_0xff8585(0x73))/0xb*(-parseInt(_0xff8585(0x79))/0xc);if(_0x41622a===_0x196184)break;else _0x277746['push'](_0x277746['shift']());}catch(_0x5975e5){_0x277746['push'](_0x277746['shift']());}}}(a421_0x4ed8,0x9561a));function a421_0x3313(_0x3e502c,_0x144fd0){const _0x4ed886=a421_0x4ed8();return a421_0x3313=function(_0x331388,_0xc93226){_0x331388=_0x331388-0x69;let _0x2ad6e8=_0x4ed886[_0x331388];return _0x2ad6e8;},a421_0x3313(_0x3e502c,_0x144fd0);}var __importDefault=this&&this['__importDefault']||function(_0x5466bb){const _0x4fd66e=a421_0x3313;return _0x5466bb&&_0x5466bb[_0x4fd66e(0x8b)]?_0x5466bb:{'default':_0x5466bb};};Object[a421_0x16483c(0x69)](exports,a421_0x16483c(0x8b),{'value':!![]});const sequelize_1=require(a421_0x16483c(0x89)),Contact_1=__importDefault(require(a421_0x16483c(0x76))),Ticket_1=__importDefault(require(a421_0x16483c(0x85))),ContactTag_1=__importDefault(require(a421_0x16483c(0x6e))),lodash_1=require('lodash'),Tag_1=__importDefault(require(a421_0x16483c(0x6f))),ListContactsService=async({searchParam:searchParam='',pageNumber:pageNumber='1',companyId:_0x13a84b,tagsIds:_0x10c4a8,isGroup:_0x13d719})=>{const _0x563ec1=a421_0x16483c;let _0x2b87cf={[sequelize_1['Op']['or']]:[{'name':sequelize_1[_0x563ec1(0x78)]['where'](sequelize_1[_0x563ec1(0x78)]['fn'](_0x563ec1(0x7b),sequelize_1[_0x563ec1(0x78)][_0x563ec1(0x77)](_0x563ec1(0x75))),_0x563ec1(0x6b),'%'+searchParam[_0x563ec1(0x86)]()[_0x563ec1(0x82)]()+'%')},{'number':{[sequelize_1['Op'][_0x563ec1(0x6d)]]:'%'+searchParam[_0x563ec1(0x86)]()[_0x563ec1(0x82)]()+'%'}}]};_0x2b87cf={..._0x2b87cf,'companyId':_0x13a84b};if(Array[_0x563ec1(0x6c)](_0x10c4a8)&&_0x10c4a8[_0x563ec1(0x8e)]>0x0){const _0x343521=[],_0x4659f9=await ContactTag_1['default']['findAll']({'where':{'tagId':{[sequelize_1['Op']['in']]:_0x10c4a8}}});_0x4659f9&&_0x343521['push'](_0x4659f9[_0x563ec1(0x70)](_0x3d86b5=>_0x3d86b5[_0x563ec1(0x7d)]));const _0x3bdc1e=(0x0,lodash_1[_0x563ec1(0x7a)])(..._0x343521);_0x2b87cf={..._0x2b87cf,'id':{[sequelize_1['Op']['in']]:_0x3bdc1e}};}_0x13d719===_0x563ec1(0x8d)&&(_0x2b87cf={..._0x2b87cf,'isGroup':![]});const _0xf42d8e=0x64,_0x2f5dee=_0xf42d8e*(+pageNumber-0x1),{count:_0x58e602,rows:_0x30332c}=await Contact_1[_0x563ec1(0x81)][_0x563ec1(0x6a)]({'where':_0x2b87cf,'limit':_0xf42d8e,'include':[{'model':Ticket_1[_0x563ec1(0x81)],'as':'tickets','attributes':['id',_0x563ec1(0x88),'createdAt',_0x563ec1(0x8c)]},{'model':Tag_1[_0x563ec1(0x81)],'as':_0x563ec1(0x83)}],'offset':_0x2f5dee,'order':[['name',_0x563ec1(0x72)]]}),_0x179786=_0x58e602>_0x2f5dee+_0x30332c[_0x563ec1(0x8e)];return{'contacts':_0x30332c,'count':_0x58e602,'hasMore':_0x179786};};exports['default']=ListContactsService;function a421_0x4ed8(){const _0x114152=['default','trim','tags','3631302VgkZIA','../../models/Ticket','toLowerCase','8kqSNMs','status','sequelize','1311858bwenDS','__esModule','updatedAt','false','length','249005xjsUAU','defineProperty','findAndCountAll','LIKE','isArray','like','../../models/ContactTag','../../models/Tag','map','14jotbEj','ASC','11gwNqZa','8tNWXWN','Contact.name','../../models/Contact','col','Sequelize','54996PazBXi','intersection','LOWER','2cnZmRR','contactId','125155ndmKWK','1570431hgQKUd','9501230tfdVTw'];a421_0x4ed8=function(){return _0x114152;};return a421_0x4ed8();}