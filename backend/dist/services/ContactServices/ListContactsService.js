<<<<<<< HEAD
'use strict';const a457_0x395ae2=a457_0x5740;(function(_0x1503da,_0x5a2d7c){const _0xd6ca06=a457_0x5740,_0x30418c=_0x1503da();while(!![]){try{const _0x5947b7=-parseInt(_0xd6ca06(0x161))/0x1*(parseInt(_0xd6ca06(0x15b))/0x2)+-parseInt(_0xd6ca06(0x17c))/0x3+parseInt(_0xd6ca06(0x17a))/0x4*(-parseInt(_0xd6ca06(0x15c))/0x5)+-parseInt(_0xd6ca06(0x170))/0x6*(parseInt(_0xd6ca06(0x16e))/0x7)+parseInt(_0xd6ca06(0x162))/0x8+parseInt(_0xd6ca06(0x169))/0x9+-parseInt(_0xd6ca06(0x15a))/0xa*(-parseInt(_0xd6ca06(0x172))/0xb);if(_0x5947b7===_0x5a2d7c)break;else _0x30418c['push'](_0x30418c['shift']());}catch(_0x27cd80){_0x30418c['push'](_0x30418c['shift']());}}}(a457_0x3cc3,0xd597f));var __importDefault=this&&this[a457_0x395ae2(0x179)]||function(_0x431f46){const _0x74f35e=a457_0x395ae2;return _0x431f46&&_0x431f46[_0x74f35e(0x17b)]?_0x431f46:{'default':_0x431f46};};function a457_0x3cc3(){const _0x3a4dd5=['8170MQIavZ','intersection','ASC','isArray','LIKE','1622THXQfy','3953720lBCQfh','../../models/Contact','trim','createdAt','tags','col','defineProperty','5455629feYOiA','../../models/Ticket','map','length','contactId','7xPYJGn','sequelize','7857636yxmUFn','../../models/Tag','11febqQN','false','Contact.name','unaccent','name','like','remove-accents','__importDefault','1564jbtnKr','__esModule','4399098lCrmvX','default','tickets','33823670qULaTm','238InlzNj'];a457_0x3cc3=function(){return _0x3a4dd5;};return a457_0x3cc3();}Object[a457_0x395ae2(0x168)](exports,a457_0x395ae2(0x17b),{'value':!![]});const sequelize_1=require(a457_0x395ae2(0x16f)),Contact_1=__importDefault(require(a457_0x395ae2(0x163))),Ticket_1=__importDefault(require(a457_0x395ae2(0x16a))),ContactTag_1=__importDefault(require('../../models/ContactTag')),lodash_1=require('lodash'),Tag_1=__importDefault(require(a457_0x395ae2(0x171))),remove_accents_1=__importDefault(require(a457_0x395ae2(0x178))),ListContactsService=async({searchParam:searchParam='',pageNumber:pageNumber='1',companyId:_0x1c837c,tagsIds:_0x44755a,isGroup:_0x13768a})=>{const _0x2d194d=a457_0x395ae2,_0x1d7e13=(0x0,remove_accents_1[_0x2d194d(0x17d)])(searchParam['toLocaleLowerCase']()[_0x2d194d(0x164)]());let _0x15329f={[sequelize_1['Op']['or']]:[{'name':(0x0,sequelize_1['where'])((0x0,sequelize_1['fn'])('LOWER',(0x0,sequelize_1['fn'])(_0x2d194d(0x175),(0x0,sequelize_1[_0x2d194d(0x167)])(_0x2d194d(0x174)))),_0x2d194d(0x160),'%'+_0x1d7e13+'%')},{'number':{[sequelize_1['Op'][_0x2d194d(0x177)]]:'%'+_0x1d7e13+'%'}}]};_0x15329f={..._0x15329f,'companyId':_0x1c837c};if(Array[_0x2d194d(0x15f)](_0x44755a)&&_0x44755a[_0x2d194d(0x16c)]>0x0){const _0x39a90d=[],_0x5dd94a=await ContactTag_1[_0x2d194d(0x17d)]['findAll']({'where':{'tagId':{[sequelize_1['Op']['in']]:_0x44755a}}});_0x5dd94a&&_0x39a90d['push'](_0x5dd94a[_0x2d194d(0x16b)](_0x559f00=>_0x559f00[_0x2d194d(0x16d)]));const _0x310b38=(0x0,lodash_1[_0x2d194d(0x15d)])(..._0x39a90d);_0x15329f={..._0x15329f,'id':{[sequelize_1['Op']['in']]:_0x310b38}};}_0x13768a===_0x2d194d(0x173)&&(_0x15329f={..._0x15329f,'isGroup':![]});const _0x405dd1=0x64,_0xa5d276=_0x405dd1*(+pageNumber-0x1),{count:_0x50992a,rows:_0x52e12b}=await Contact_1[_0x2d194d(0x17d)]['findAndCountAll']({'where':_0x15329f,'limit':_0x405dd1,'include':[{'model':Ticket_1[_0x2d194d(0x17d)],'as':_0x2d194d(0x159),'attributes':['id','status',_0x2d194d(0x165),'updatedAt']},{'model':Tag_1[_0x2d194d(0x17d)],'as':_0x2d194d(0x166)}],'offset':_0xa5d276,'order':[[_0x2d194d(0x176),_0x2d194d(0x15e)]]}),_0x2993a7=_0x50992a>_0xa5d276+_0x52e12b[_0x2d194d(0x16c)];return{'contacts':_0x52e12b,'count':_0x50992a,'hasMore':_0x2993a7};};function a457_0x5740(_0x5d74af,_0x5fb72b){const _0x3cc37f=a457_0x3cc3();return a457_0x5740=function(_0x574073,_0x34e196){_0x574073=_0x574073-0x159;let _0xda3341=_0x3cc37f[_0x574073];return _0xda3341;},a457_0x5740(_0x5d74af,_0x5fb72b);}exports[a457_0x395ae2(0x17d)]=ListContactsService;
=======
'use strict';const a457_0x5a25e7=a457_0x299d;(function(_0x47132e,_0x35c92d){const _0x3c5f4b=a457_0x299d,_0x527edc=_0x47132e();while(!![]){try{const _0x2e76fb=-parseInt(_0x3c5f4b(0x99))/0x1+parseInt(_0x3c5f4b(0x76))/0x2+parseInt(_0x3c5f4b(0x8d))/0x3+-parseInt(_0x3c5f4b(0x75))/0x4*(parseInt(_0x3c5f4b(0x87))/0x5)+parseInt(_0x3c5f4b(0x78))/0x6*(-parseInt(_0x3c5f4b(0x83))/0x7)+parseInt(_0x3c5f4b(0x88))/0x8*(-parseInt(_0x3c5f4b(0x8c))/0x9)+parseInt(_0x3c5f4b(0x7b))/0xa*(parseInt(_0x3c5f4b(0x90))/0xb);if(_0x2e76fb===_0x35c92d)break;else _0x527edc['push'](_0x527edc['shift']());}catch(_0x140cfb){_0x527edc['push'](_0x527edc['shift']());}}}(a457_0x2243,0x24c72));var __importDefault=this&&this[a457_0x5a25e7(0x93)]||function(_0x41d706){const _0x580280=a457_0x5a25e7;return _0x41d706&&_0x41d706[_0x580280(0x9a)]?_0x41d706:{'default':_0x41d706};};function a457_0x2243(){const _0x4c058b=['__importDefault','default','tags','sequelize','defineProperty','findAll','197374rQYypk','__esModule','unaccent','lodash','updatedAt','LOWER','12wwVeGk','338808KcIwtp','../../models/Ticket','7806rbEJDz','col','contactId','2710rCYvlC','Contact.name','map','../../models/ContactTag','name','LIKE','remove-accents','tickets','14bHlhZo','createdAt','false','where','103810zTfWDP','216AWpiKN','ASC','toLocaleLowerCase','length','47214TvDeTa','795267zrVSoM','trim','findAndCountAll','4873iDRWDw','status','intersection'];a457_0x2243=function(){return _0x4c058b;};return a457_0x2243();}function a457_0x299d(_0x39aa28,_0xe103b7){const _0x2243a3=a457_0x2243();return a457_0x299d=function(_0x299dbb,_0x32c337){_0x299dbb=_0x299dbb-0x75;let _0x2611bc=_0x2243a3[_0x299dbb];return _0x2611bc;},a457_0x299d(_0x39aa28,_0xe103b7);}Object[a457_0x5a25e7(0x97)](exports,'__esModule',{'value':!![]});const sequelize_1=require(a457_0x5a25e7(0x96)),Contact_1=__importDefault(require('../../models/Contact')),Ticket_1=__importDefault(require(a457_0x5a25e7(0x77))),ContactTag_1=__importDefault(require(a457_0x5a25e7(0x7e))),lodash_1=require(a457_0x5a25e7(0x9c)),Tag_1=__importDefault(require('../../models/Tag')),remove_accents_1=__importDefault(require(a457_0x5a25e7(0x81))),ListContactsService=async({searchParam:searchParam='',pageNumber:pageNumber='1',companyId:_0x460add,tagsIds:_0x589df9,isGroup:_0x289c48})=>{const _0x406a59=a457_0x5a25e7,_0xd249a2=(0x0,remove_accents_1[_0x406a59(0x94)])(searchParam[_0x406a59(0x8a)]()[_0x406a59(0x8e)]());let _0xe16f0b={[sequelize_1['Op']['or']]:[{'name':(0x0,sequelize_1[_0x406a59(0x86)])((0x0,sequelize_1['fn'])(_0x406a59(0x9e),(0x0,sequelize_1['fn'])(_0x406a59(0x9b),(0x0,sequelize_1[_0x406a59(0x79)])(_0x406a59(0x7c)))),_0x406a59(0x80),'%'+_0xd249a2+'%')},{'number':{[sequelize_1['Op']['like']]:'%'+_0xd249a2+'%'}}]};_0xe16f0b={..._0xe16f0b,'companyId':_0x460add};if(Array['isArray'](_0x589df9)&&_0x589df9[_0x406a59(0x8b)]>0x0){const _0x63b18=[],_0x436200=await ContactTag_1[_0x406a59(0x94)][_0x406a59(0x98)]({'where':{'tagId':{[sequelize_1['Op']['in']]:_0x589df9}}});_0x436200&&_0x63b18['push'](_0x436200[_0x406a59(0x7d)](_0x258297=>_0x258297[_0x406a59(0x7a)]));const _0x229070=(0x0,lodash_1[_0x406a59(0x92)])(..._0x63b18);_0xe16f0b={..._0xe16f0b,'id':{[sequelize_1['Op']['in']]:_0x229070}};}_0x289c48===_0x406a59(0x85)&&(_0xe16f0b={..._0xe16f0b,'isGroup':![]});const _0x154fb4=0x64,_0x4e119d=_0x154fb4*(+pageNumber-0x1),{count:_0x5a40a4,rows:_0x51bfc1}=await Contact_1[_0x406a59(0x94)][_0x406a59(0x8f)]({'where':_0xe16f0b,'limit':_0x154fb4,'include':[{'model':Ticket_1[_0x406a59(0x94)],'as':_0x406a59(0x82),'attributes':['id',_0x406a59(0x91),_0x406a59(0x84),_0x406a59(0x9d)]},{'model':Tag_1[_0x406a59(0x94)],'as':_0x406a59(0x95)}],'offset':_0x4e119d,'order':[[_0x406a59(0x7f),_0x406a59(0x89)]]}),_0x23ca54=_0x5a40a4>_0x4e119d+_0x51bfc1[_0x406a59(0x8b)];return{'contacts':_0x51bfc1,'count':_0x5a40a4,'hasMore':_0x23ca54};};exports[a457_0x5a25e7(0x94)]=ListContactsService;
>>>>>>> ab722bfbcf394d74dd0b99a984c0dcf6ffbcff7f
