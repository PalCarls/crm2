'use strict';const a420_0x2d7a59=a420_0x1e1e;(function(_0x3a884d,_0x102e38){const _0x2c0fa2=a420_0x1e1e,_0x4b101a=_0x3a884d();while(!![]){try{const _0x4e974b=parseInt(_0x2c0fa2(0x135))/0x1*(parseInt(_0x2c0fa2(0x14d))/0x2)+-parseInt(_0x2c0fa2(0x151))/0x3*(-parseInt(_0x2c0fa2(0x136))/0x4)+parseInt(_0x2c0fa2(0x12e))/0x5+-parseInt(_0x2c0fa2(0x147))/0x6+parseInt(_0x2c0fa2(0x148))/0x7+-parseInt(_0x2c0fa2(0x13a))/0x8*(-parseInt(_0x2c0fa2(0x131))/0x9)+-parseInt(_0x2c0fa2(0x146))/0xa*(parseInt(_0x2c0fa2(0x134))/0xb);if(_0x4e974b===_0x102e38)break;else _0x4b101a['push'](_0x4b101a['shift']());}catch(_0x3c78b8){_0x4b101a['push'](_0x4b101a['shift']());}}}(a420_0x57d9,0x3d69a));var __importDefault=this&&this[a420_0x2d7a59(0x153)]||function(_0x6e18c2){const _0x388c7b=a420_0x2d7a59;return _0x6e18c2&&_0x6e18c2[_0x388c7b(0x13c)]?_0x6e18c2:{'default':_0x6e18c2};};Object[a420_0x2d7a59(0x13b)](exports,'__esModule',{'value':!![]});const sequelize_1=require('sequelize'),Contact_1=__importDefault(require(a420_0x2d7a59(0x140))),Ticket_1=__importDefault(require(a420_0x2d7a59(0x150))),ContactTag_1=__importDefault(require(a420_0x2d7a59(0x14b))),lodash_1=require('lodash'),Tag_1=__importDefault(require('../../models/Tag')),ListContactsService=async({searchParam:searchParam='',pageNumber:pageNumber='1',companyId:_0x5a74e1,tagsIds:_0x4e14cd,isGroup:_0xd3a9bb})=>{const _0x397210=a420_0x2d7a59;let _0x11aef9={[sequelize_1['Op']['or']]:[{'name':sequelize_1['Sequelize']['where'](sequelize_1[_0x397210(0x143)]['fn'](_0x397210(0x138),sequelize_1[_0x397210(0x143)][_0x397210(0x12f)](_0x397210(0x144))),'LIKE','%'+searchParam['toLowerCase']()[_0x397210(0x14c)]()+'%')},{'number':{[sequelize_1['Op'][_0x397210(0x14a)]]:'%'+searchParam[_0x397210(0x13f)]()[_0x397210(0x14c)]()+'%'}}]};_0x11aef9={..._0x11aef9,'companyId':_0x5a74e1};if(Array[_0x397210(0x132)](_0x4e14cd)&&_0x4e14cd[_0x397210(0x145)]>0x0){const _0x2bb3ff=[],_0x471774=await ContactTag_1[_0x397210(0x130)][_0x397210(0x141)]({'where':{'tagId':{[sequelize_1['Op']['in']]:_0x4e14cd}}});_0x471774&&_0x2bb3ff['push'](_0x471774[_0x397210(0x13e)](_0x27c941=>_0x27c941['contactId']));const _0x3e7908=(0x0,lodash_1[_0x397210(0x142)])(..._0x2bb3ff);_0x11aef9={..._0x11aef9,'id':{[sequelize_1['Op']['in']]:_0x3e7908}};}_0xd3a9bb===_0x397210(0x14e)&&(_0x11aef9={..._0x11aef9,'isGroup':![]});const _0x2fc8a0=0x64,_0x53da09=_0x2fc8a0*(+pageNumber-0x1),{count:_0x3784df,rows:_0x831ef4}=await Contact_1['default'][_0x397210(0x152)]({'where':_0x11aef9,'limit':_0x2fc8a0,'include':[{'model':Ticket_1['default'],'as':_0x397210(0x139),'attributes':['id',_0x397210(0x137),_0x397210(0x149),_0x397210(0x13d)]},{'model':Tag_1['default'],'as':'tags'}],'offset':_0x53da09,'order':[[_0x397210(0x14f),_0x397210(0x133)]]}),_0x12e9bf=_0x3784df>_0x53da09+_0x831ef4['length'];return{'contacts':_0x831ef4,'count':_0x3784df,'hasMore':_0x12e9bf};};exports['default']=ListContactsService;function a420_0x1e1e(_0x4197f6,_0xca72ac){const _0x57d932=a420_0x57d9();return a420_0x1e1e=function(_0x1e1e7a,_0x8a4362){_0x1e1e7a=_0x1e1e7a-0x12e;let _0xae3ccd=_0x57d932[_0x1e1e7a];return _0xae3ccd;},a420_0x1e1e(_0x4197f6,_0xca72ac);}function a420_0x57d9(){const _0x37a4e5=['__esModule','updatedAt','map','toLowerCase','../../models/Contact','findAll','intersection','Sequelize','Contact.name','length','2006630AHjYXI','2382714fReBHy','2933686NqHmzW','createdAt','like','../../models/ContactTag','trim','807704CVVvhd','false','name','../../models/Ticket','12SsfSYf','findAndCountAll','__importDefault','2349735sctReZ','col','default','3243789jbTJjO','isArray','ASC','77KcypbK','1BcKahs','399988jiKnsX','status','LOWER','tickets','8Lghxzq','defineProperty'];a420_0x57d9=function(){return _0x37a4e5;};return a420_0x57d9();}