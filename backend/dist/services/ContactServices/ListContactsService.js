'use strict';const a466_0x175680=a466_0x3f56;(function(_0x38f550,_0x53012f){const _0x3d8934=a466_0x3f56,_0x534646=_0x38f550();while(!![]){try{const _0x243db2=-parseInt(_0x3d8934(0x1c0))/0x1+parseInt(_0x3d8934(0x1d1))/0x2+-parseInt(_0x3d8934(0x1cd))/0x3*(parseInt(_0x3d8934(0x1c9))/0x4)+-parseInt(_0x3d8934(0x1c5))/0x5*(-parseInt(_0x3d8934(0x1c2))/0x6)+parseInt(_0x3d8934(0x1bb))/0x7*(parseInt(_0x3d8934(0x1af))/0x8)+parseInt(_0x3d8934(0x1ce))/0x9+parseInt(_0x3d8934(0x1cf))/0xa;if(_0x243db2===_0x53012f)break;else _0x534646['push'](_0x534646['shift']());}catch(_0x160340){_0x534646['push'](_0x534646['shift']());}}}(a466_0x5838,0xcf553));var __importDefault=this&&this[a466_0x175680(0x1d0)]||function(_0xea68bf){return _0xea68bf&&_0xea68bf['__esModule']?_0xea68bf:{'default':_0xea68bf};};Object[a466_0x175680(0x1d2)](exports,a466_0x175680(0x1be),{'value':!![]});function a466_0x3f56(_0x48966f,_0x4bdca1){const _0x583882=a466_0x5838();return a466_0x3f56=function(_0x3f5685,_0x5c58e5){_0x3f5685=_0x3f5685-0x1ab;let _0x2d3e96=_0x583882[_0x3f5685];return _0x2d3e96;},a466_0x3f56(_0x48966f,_0x4bdca1);}const sequelize_1=require(a466_0x175680(0x1c1)),Contact_1=__importDefault(require(a466_0x175680(0x1b8))),Ticket_1=__importDefault(require(a466_0x175680(0x1b6))),ContactTag_1=__importDefault(require(a466_0x175680(0x1b5))),lodash_1=require(a466_0x175680(0x1cb)),Tag_1=__importDefault(require(a466_0x175680(0x1b9))),remove_accents_1=__importDefault(require('remove-accents')),ListContactsService=async({searchParam:searchParam='',pageNumber:pageNumber='1',companyId:_0x1c8a39,tagsIds:_0x2d782d,isGroup:_0x36c329})=>{const _0x3a66d4=a466_0x175680,_0x471931=(0x0,remove_accents_1['default'])(searchParam[_0x3a66d4(0x1c4)]()[_0x3a66d4(0x1c6)]());let _0x3f9f59={[sequelize_1['Op']['or']]:[{'name':(0x0,sequelize_1[_0x3a66d4(0x1c7)])((0x0,sequelize_1['fn'])(_0x3a66d4(0x1c3),(0x0,sequelize_1['fn'])(_0x3a66d4(0x1ac),(0x0,sequelize_1['col'])(_0x3a66d4(0x1ab)))),_0x3a66d4(0x1ae),'%'+_0x471931+'%')},{'number':{[sequelize_1['Op'][_0x3a66d4(0x1b3)]]:'%'+_0x471931+'%'}}]};_0x3f9f59={..._0x3f9f59,'companyId':_0x1c8a39};if(Array[_0x3a66d4(0x1b0)](_0x2d782d)&&_0x2d782d[_0x3a66d4(0x1b2)]>0x0){const _0x3ce8cd=[],_0xa00f97=await ContactTag_1[_0x3a66d4(0x1bd)]['findAll']({'where':{'tagId':{[sequelize_1['Op']['in']]:_0x2d782d}}});_0xa00f97&&_0x3ce8cd[_0x3a66d4(0x1c8)](_0xa00f97['map'](_0x1f4013=>_0x1f4013[_0x3a66d4(0x1ba)]));const _0x3da79e=(0x0,lodash_1[_0x3a66d4(0x1ca)])(..._0x3ce8cd);_0x3f9f59={..._0x3f9f59,'id':{[sequelize_1['Op']['in']]:_0x3da79e}};}_0x36c329==='false'&&(_0x3f9f59={..._0x3f9f59,'isGroup':![]});const _0x1fa48d=0x64,_0x131dd1=_0x1fa48d*(+pageNumber-0x1),{count:_0x58dfc3,rows:_0x2a9999}=await Contact_1[_0x3a66d4(0x1bd)][_0x3a66d4(0x1bf)]({'where':_0x3f9f59,'limit':_0x1fa48d,'include':[{'model':Ticket_1['default'],'as':_0x3a66d4(0x1b7),'attributes':['id',_0x3a66d4(0x1b4),_0x3a66d4(0x1d3),_0x3a66d4(0x1ad)]},{'model':Tag_1[_0x3a66d4(0x1bd)],'as':_0x3a66d4(0x1cc)}],'offset':_0x131dd1,'order':[[_0x3a66d4(0x1bc),_0x3a66d4(0x1b1)]]}),_0x101d62=_0x58dfc3>_0x131dd1+_0x2a9999['length'];return{'contacts':_0x2a9999,'count':_0x58dfc3,'hasMore':_0x101d62};};function a466_0x5838(){const _0x5c97e2=['createdAt','Contact.name','unaccent','updatedAt','LIKE','336968TEMHvp','isArray','ASC','length','like','status','../../models/ContactTag','../../models/Ticket','tickets','../../models/Contact','../../models/Tag','contactId','168zLbOxb','name','default','__esModule','findAndCountAll','971406tjbngw','sequelize','88230UCxCjA','LOWER','toLocaleLowerCase','335KrQudv','trim','where','push','916ZUlIsf','intersection','lodash','tags','18465ZkqMiD','1473984rcgNfv','1948120xwKadp','__importDefault','1750818fRMUHs','defineProperty'];a466_0x5838=function(){return _0x5c97e2;};return a466_0x5838();}exports[a466_0x175680(0x1bd)]=ListContactsService;