'use strict';const a457_0x5a25e7=a457_0x299d;(function(_0x47132e,_0x35c92d){const _0x3c5f4b=a457_0x299d,_0x527edc=_0x47132e();while(!![]){try{const _0x2e76fb=-parseInt(_0x3c5f4b(0x99))/0x1+parseInt(_0x3c5f4b(0x76))/0x2+parseInt(_0x3c5f4b(0x8d))/0x3+-parseInt(_0x3c5f4b(0x75))/0x4*(parseInt(_0x3c5f4b(0x87))/0x5)+parseInt(_0x3c5f4b(0x78))/0x6*(-parseInt(_0x3c5f4b(0x83))/0x7)+parseInt(_0x3c5f4b(0x88))/0x8*(-parseInt(_0x3c5f4b(0x8c))/0x9)+parseInt(_0x3c5f4b(0x7b))/0xa*(parseInt(_0x3c5f4b(0x90))/0xb);if(_0x2e76fb===_0x35c92d)break;else _0x527edc['push'](_0x527edc['shift']());}catch(_0x140cfb){_0x527edc['push'](_0x527edc['shift']());}}}(a457_0x2243,0x24c72));var __importDefault=this&&this[a457_0x5a25e7(0x93)]||function(_0x41d706){const _0x580280=a457_0x5a25e7;return _0x41d706&&_0x41d706[_0x580280(0x9a)]?_0x41d706:{'default':_0x41d706};};function a457_0x2243(){const _0x4c058b=['__importDefault','default','tags','sequelize','defineProperty','findAll','197374rQYypk','__esModule','unaccent','lodash','updatedAt','LOWER','12wwVeGk','338808KcIwtp','../../models/Ticket','7806rbEJDz','col','contactId','2710rCYvlC','Contact.name','map','../../models/ContactTag','name','LIKE','remove-accents','tickets','14bHlhZo','createdAt','false','where','103810zTfWDP','216AWpiKN','ASC','toLocaleLowerCase','length','47214TvDeTa','795267zrVSoM','trim','findAndCountAll','4873iDRWDw','status','intersection'];a457_0x2243=function(){return _0x4c058b;};return a457_0x2243();}function a457_0x299d(_0x39aa28,_0xe103b7){const _0x2243a3=a457_0x2243();return a457_0x299d=function(_0x299dbb,_0x32c337){_0x299dbb=_0x299dbb-0x75;let _0x2611bc=_0x2243a3[_0x299dbb];return _0x2611bc;},a457_0x299d(_0x39aa28,_0xe103b7);}Object[a457_0x5a25e7(0x97)](exports,'__esModule',{'value':!![]});const sequelize_1=require(a457_0x5a25e7(0x96)),Contact_1=__importDefault(require('../../models/Contact')),Ticket_1=__importDefault(require(a457_0x5a25e7(0x77))),ContactTag_1=__importDefault(require(a457_0x5a25e7(0x7e))),lodash_1=require(a457_0x5a25e7(0x9c)),Tag_1=__importDefault(require('../../models/Tag')),remove_accents_1=__importDefault(require(a457_0x5a25e7(0x81))),ListContactsService=async({searchParam:searchParam='',pageNumber:pageNumber='1',companyId:_0x460add,tagsIds:_0x589df9,isGroup:_0x289c48})=>{const _0x406a59=a457_0x5a25e7,_0xd249a2=(0x0,remove_accents_1[_0x406a59(0x94)])(searchParam[_0x406a59(0x8a)]()[_0x406a59(0x8e)]());let _0xe16f0b={[sequelize_1['Op']['or']]:[{'name':(0x0,sequelize_1[_0x406a59(0x86)])((0x0,sequelize_1['fn'])(_0x406a59(0x9e),(0x0,sequelize_1['fn'])(_0x406a59(0x9b),(0x0,sequelize_1[_0x406a59(0x79)])(_0x406a59(0x7c)))),_0x406a59(0x80),'%'+_0xd249a2+'%')},{'number':{[sequelize_1['Op']['like']]:'%'+_0xd249a2+'%'}}]};_0xe16f0b={..._0xe16f0b,'companyId':_0x460add};if(Array['isArray'](_0x589df9)&&_0x589df9[_0x406a59(0x8b)]>0x0){const _0x63b18=[],_0x436200=await ContactTag_1[_0x406a59(0x94)][_0x406a59(0x98)]({'where':{'tagId':{[sequelize_1['Op']['in']]:_0x589df9}}});_0x436200&&_0x63b18['push'](_0x436200[_0x406a59(0x7d)](_0x258297=>_0x258297[_0x406a59(0x7a)]));const _0x229070=(0x0,lodash_1[_0x406a59(0x92)])(..._0x63b18);_0xe16f0b={..._0xe16f0b,'id':{[sequelize_1['Op']['in']]:_0x229070}};}_0x289c48===_0x406a59(0x85)&&(_0xe16f0b={..._0xe16f0b,'isGroup':![]});const _0x154fb4=0x64,_0x4e119d=_0x154fb4*(+pageNumber-0x1),{count:_0x5a40a4,rows:_0x51bfc1}=await Contact_1[_0x406a59(0x94)][_0x406a59(0x8f)]({'where':_0xe16f0b,'limit':_0x154fb4,'include':[{'model':Ticket_1[_0x406a59(0x94)],'as':_0x406a59(0x82),'attributes':['id',_0x406a59(0x91),_0x406a59(0x84),_0x406a59(0x9d)]},{'model':Tag_1[_0x406a59(0x94)],'as':_0x406a59(0x95)}],'offset':_0x4e119d,'order':[[_0x406a59(0x7f),_0x406a59(0x89)]]}),_0x23ca54=_0x5a40a4>_0x4e119d+_0x51bfc1[_0x406a59(0x8b)];return{'contacts':_0x51bfc1,'count':_0x5a40a4,'hasMore':_0x23ca54};};exports[a457_0x5a25e7(0x94)]=ListContactsService;