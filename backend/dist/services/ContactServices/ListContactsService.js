'use strict';function a466_0x2dd6(_0x22068b,_0x5c35e5){const _0x550e12=a466_0x550e();return a466_0x2dd6=function(_0x2dd66e,_0x10b8ee){_0x2dd66e=_0x2dd66e-0x78;let _0x1c4b10=_0x550e12[_0x2dd66e];return _0x1c4b10;},a466_0x2dd6(_0x22068b,_0x5c35e5);}const a466_0x27e628=a466_0x2dd6;(function(_0x2ce0cc,_0x3e188a){const _0x28d960=a466_0x2dd6,_0x285d74=_0x2ce0cc();while(!![]){try{const _0x315aaf=-parseInt(_0x28d960(0x8f))/0x1*(parseInt(_0x28d960(0x7a))/0x2)+-parseInt(_0x28d960(0x92))/0x3+parseInt(_0x28d960(0x7e))/0x4*(parseInt(_0x28d960(0x90))/0x5)+-parseInt(_0x28d960(0x85))/0x6*(parseInt(_0x28d960(0x8a))/0x7)+-parseInt(_0x28d960(0x95))/0x8*(parseInt(_0x28d960(0x9e))/0x9)+-parseInt(_0x28d960(0x8e))/0xa+parseInt(_0x28d960(0x80))/0xb;if(_0x315aaf===_0x3e188a)break;else _0x285d74['push'](_0x285d74['shift']());}catch(_0x558319){_0x285d74['push'](_0x285d74['shift']());}}}(a466_0x550e,0xe7a2f));var __importDefault=this&&this[a466_0x27e628(0x91)]||function(_0x32de4a){const _0x527a10=a466_0x27e628;return _0x32de4a&&_0x32de4a[_0x527a10(0x8b)]?_0x32de4a:{'default':_0x32de4a};};Object[a466_0x27e628(0x79)](exports,a466_0x27e628(0x8b),{'value':!![]});const sequelize_1=require('sequelize'),Contact_1=__importDefault(require(a466_0x27e628(0x9b))),Ticket_1=__importDefault(require(a466_0x27e628(0x9a))),ContactTag_1=__importDefault(require(a466_0x27e628(0x97))),lodash_1=require(a466_0x27e628(0x98)),Tag_1=__importDefault(require('../../models/Tag')),remove_accents_1=__importDefault(require(a466_0x27e628(0x9d))),ListContactsService=async({searchParam:searchParam='',pageNumber:pageNumber='1',companyId:_0x3b1d56,tagsIds:_0x5d862c,isGroup:_0x3343f1})=>{const _0x32cd80=a466_0x27e628,_0x2c72cf=(0x0,remove_accents_1['default'])(searchParam[_0x32cd80(0x88)]()[_0x32cd80(0x78)]());let _0xe5e304={[sequelize_1['Op']['or']]:[{'name':(0x0,sequelize_1[_0x32cd80(0x94)])((0x0,sequelize_1['fn'])('LOWER',(0x0,sequelize_1['fn'])(_0x32cd80(0x9c),(0x0,sequelize_1[_0x32cd80(0x81)])(_0x32cd80(0x83)))),_0x32cd80(0x99),'%'+_0x2c72cf+'%')},{'number':{[sequelize_1['Op'][_0x32cd80(0x7c)]]:'%'+_0x2c72cf+'%'}}]};_0xe5e304={..._0xe5e304,'companyId':_0x3b1d56};if(Array['isArray'](_0x5d862c)&&_0x5d862c[_0x32cd80(0x87)]>0x0){const _0x5f5fc5=[],_0x5973a5=await ContactTag_1[_0x32cd80(0x7f)][_0x32cd80(0x93)]({'where':{'tagId':{[sequelize_1['Op']['in']]:_0x5d862c}}});_0x5973a5&&_0x5f5fc5[_0x32cd80(0x86)](_0x5973a5[_0x32cd80(0x7b)](_0x125e4d=>_0x125e4d['contactId']));const _0x5af8f3=(0x0,lodash_1[_0x32cd80(0x8d)])(..._0x5f5fc5);_0xe5e304={..._0xe5e304,'id':{[sequelize_1['Op']['in']]:_0x5af8f3}};}_0x3343f1==='false'&&(_0xe5e304={..._0xe5e304,'isGroup':![]});const _0x39dece=0x64,_0x30584c=_0x39dece*(+pageNumber-0x1),{count:_0x4d6242,rows:_0x47175a}=await Contact_1[_0x32cd80(0x7f)]['findAndCountAll']({'where':_0xe5e304,'limit':_0x39dece,'include':[{'model':Ticket_1[_0x32cd80(0x7f)],'as':_0x32cd80(0x7d),'attributes':['id','status',_0x32cd80(0x8c),_0x32cd80(0x96)]},{'model':Tag_1['default'],'as':_0x32cd80(0x84)}],'offset':_0x30584c,'order':[[_0x32cd80(0x89),_0x32cd80(0x82)]]}),_0x11144c=_0x4d6242>_0x30584c+_0x47175a['length'];return{'contacts':_0x47175a,'count':_0x4d6242,'hasMore':_0x11144c};};exports[a466_0x27e628(0x7f)]=ListContactsService;function a466_0x550e(){const _0x2e2f9b=['Contact.name','tags','2454mCmVTN','push','length','toLocaleLowerCase','name','11095awzQvQ','__esModule','createdAt','intersection','671980qxykmq','739jPGDhj','135VMzUFN','__importDefault','3487377KVYtgT','findAll','where','8EDsPYg','updatedAt','../../models/ContactTag','lodash','LIKE','../../models/Ticket','../../models/Contact','unaccent','remove-accents','10890171IHOkgQ','trim','defineProperty','694EHVhKi','map','like','tickets','86364hIPGbI','default','40812200RAWDyI','col','ASC'];a466_0x550e=function(){return _0x2e2f9b;};return a466_0x550e();}