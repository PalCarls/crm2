'use strict';const a440_0x114620=a440_0x1521;(function(_0x2da570,_0x3f4ec6){const _0x109190=a440_0x1521,_0x15d3d6=_0x2da570();while(!![]){try{const _0x285b57=parseInt(_0x109190(0xca))/0x1+parseInt(_0x109190(0xc5))/0x2*(-parseInt(_0x109190(0xcc))/0x3)+parseInt(_0x109190(0xbb))/0x4*(-parseInt(_0x109190(0xc4))/0x5)+parseInt(_0x109190(0xb3))/0x6*(parseInt(_0x109190(0xc2))/0x7)+-parseInt(_0x109190(0xaf))/0x8*(parseInt(_0x109190(0xa8))/0x9)+-parseInt(_0x109190(0xb7))/0xa+parseInt(_0x109190(0xcd))/0xb;if(_0x285b57===_0x3f4ec6)break;else _0x15d3d6['push'](_0x15d3d6['shift']());}catch(_0x211886){_0x15d3d6['push'](_0x15d3d6['shift']());}}}(a440_0x3cc7,0x1fa2e));function a440_0x3cc7(){const _0x158655=['../../models/ContactTag','584sjairi','false','trim','__esModule','317598MdVFrl','contactId','findAll','lodash','1701620gkAwrF','Contact.name','Sequelize','intersection','508sNQolN','status','like','length','name','remove-accents','sequelize','28UcEDFy','col','1165LmcPqX','2GHqRya','where','map','tags','updatedAt','1790oLBdUQ','LIKE','463737rGdZpK','4163555IlFiiP','ASC','../../models/Contact','createdAt','LOWER','13329DKeBDA','tickets','isArray','findAndCountAll','default','push'];a440_0x3cc7=function(){return _0x158655;};return a440_0x3cc7();}var __importDefault=this&&this['__importDefault']||function(_0x4c44c9){const _0x20052a=a440_0x1521;return _0x4c44c9&&_0x4c44c9[_0x20052a(0xb2)]?_0x4c44c9:{'default':_0x4c44c9};};function a440_0x1521(_0x477304,_0x38d0cd){const _0x3cc70f=a440_0x3cc7();return a440_0x1521=function(_0x1521d6,_0x4ebb5e){_0x1521d6=_0x1521d6-0xa7;let _0x5e7e41=_0x3cc70f[_0x1521d6];return _0x5e7e41;},a440_0x1521(_0x477304,_0x38d0cd);}Object['defineProperty'](exports,'__esModule',{'value':!![]});const sequelize_1=require(a440_0x114620(0xc1)),Contact_1=__importDefault(require(a440_0x114620(0xcf))),Ticket_1=__importDefault(require('../../models/Ticket')),ContactTag_1=__importDefault(require(a440_0x114620(0xae))),lodash_1=require(a440_0x114620(0xb6)),Tag_1=__importDefault(require('../../models/Tag')),remove_accents_1=__importDefault(require(a440_0x114620(0xc0))),ListContactsService=async({searchParam:searchParam='',pageNumber:pageNumber='1',companyId:_0xea8eb2,tagsIds:_0x503fb9,isGroup:_0x233ce0})=>{const _0x45d955=a440_0x114620,_0x348dea=(0x0,remove_accents_1['default'])(searchParam['toLocaleLowerCase']()[_0x45d955(0xb1)]());let _0x38bc67={[sequelize_1['Op']['or']]:[{'name':sequelize_1[_0x45d955(0xb9)][_0x45d955(0xc6)](sequelize_1[_0x45d955(0xb9)]['fn'](_0x45d955(0xa7),sequelize_1[_0x45d955(0xb9)][_0x45d955(0xc3)](_0x45d955(0xb8))),_0x45d955(0xcb),'%'+_0x348dea+'%')},{'number':{[sequelize_1['Op'][_0x45d955(0xbd)]]:'%'+_0x348dea+'%'}}]};_0x38bc67={..._0x38bc67,'companyId':_0xea8eb2};if(Array[_0x45d955(0xaa)](_0x503fb9)&&_0x503fb9['length']>0x0){const _0x18265a=[],_0xa2351d=await ContactTag_1['default'][_0x45d955(0xb5)]({'where':{'tagId':{[sequelize_1['Op']['in']]:_0x503fb9}}});_0xa2351d&&_0x18265a[_0x45d955(0xad)](_0xa2351d[_0x45d955(0xc7)](_0x476875=>_0x476875[_0x45d955(0xb4)]));const _0x2250af=(0x0,lodash_1[_0x45d955(0xba)])(..._0x18265a);_0x38bc67={..._0x38bc67,'id':{[sequelize_1['Op']['in']]:_0x2250af}};}_0x233ce0===_0x45d955(0xb0)&&(_0x38bc67={..._0x38bc67,'isGroup':![]});const _0x3c35a0=0x64,_0x527d3c=_0x3c35a0*(+pageNumber-0x1),{count:_0x555245,rows:_0x12d9db}=await Contact_1['default'][_0x45d955(0xab)]({'where':_0x38bc67,'limit':_0x3c35a0,'include':[{'model':Ticket_1[_0x45d955(0xac)],'as':_0x45d955(0xa9),'attributes':['id',_0x45d955(0xbc),_0x45d955(0xd0),_0x45d955(0xc9)]},{'model':Tag_1[_0x45d955(0xac)],'as':_0x45d955(0xc8)}],'offset':_0x527d3c,'order':[[_0x45d955(0xbf),_0x45d955(0xce)]]}),_0x4616bd=_0x555245>_0x527d3c+_0x12d9db[_0x45d955(0xbe)];return{'contacts':_0x12d9db,'count':_0x555245,'hasMore':_0x4616bd};};exports['default']=ListContactsService;