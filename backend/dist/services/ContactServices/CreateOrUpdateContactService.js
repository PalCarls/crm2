'use strict';function a413_0x15f5(){const _0x2bf7d4=['replace','121689zSxTZc','path','chmodSync','create','5206050ZDxkQe','../../libs/socket','resolve','reload','get','2EXMInF','__createBinding','23831400BOTcxp','getIO','prototype','public','acceptAudioMessageContact','4072978jjMqER','default','whatsapp','2656YrrNZa','__importDefault','424YUXgWe','update','nopicture','data','contacts','hasOwnProperty','writable','existsSync','configurable','nopicture.png','5060CmuysB','__esModule','findOne','518795ZefxpR','call','arraybuffer','-contact','writeFileSync','includes','defineProperty','save','emit','company-','../../helpers/CheckSettings','__importStar','861861fpridp'];a413_0x15f5=function(){return _0x2bf7d4;};return a413_0x15f5();}const a413_0x3bad43=a413_0x3391;(function(_0x39e995,_0x1bf248){const _0x5bdd40=a413_0x3391,_0x4fcebb=_0x39e995();while(!![]){try{const _0x4d110b=-parseInt(_0x5bdd40(0x161))/0x1*(parseInt(_0x5bdd40(0x178))/0x2)+-parseInt(_0x5bdd40(0x16d))/0x3+-parseInt(_0x5bdd40(0x152))/0x4*(parseInt(_0x5bdd40(0x15e))/0x5)+parseInt(_0x5bdd40(0x173))/0x6+-parseInt(_0x5bdd40(0x14f))/0x7+-parseInt(_0x5bdd40(0x154))/0x8*(parseInt(_0x5bdd40(0x16f))/0x9)+parseInt(_0x5bdd40(0x14a))/0xa;if(_0x4d110b===_0x1bf248)break;else _0x4fcebb['push'](_0x4fcebb['shift']());}catch(_0x1f341d){_0x4fcebb['push'](_0x4fcebb['shift']());}}}(a413_0x15f5,0x73cba));var __createBinding=this&&this[a413_0x3bad43(0x179)]||(Object[a413_0x3bad43(0x172)]?function(_0xd0e4a5,_0x1cc601,_0x3b4b4a,_0xc05518){const _0x10f1e5=a413_0x3bad43;if(_0xc05518===undefined)_0xc05518=_0x3b4b4a;var _0x10486d=Object['getOwnPropertyDescriptor'](_0x1cc601,_0x3b4b4a);(!_0x10486d||('get'in _0x10486d?!_0x1cc601['__esModule']:_0x10486d[_0x10f1e5(0x15a)]||_0x10486d[_0x10f1e5(0x15c)]))&&(_0x10486d={'enumerable':!![],'get':function(){return _0x1cc601[_0x3b4b4a];}}),Object[_0x10f1e5(0x167)](_0xd0e4a5,_0xc05518,_0x10486d);}:function(_0x2b2d1b,_0x20607b,_0x2b4ddc,_0x27efc7){if(_0x27efc7===undefined)_0x27efc7=_0x2b4ddc;_0x2b2d1b[_0x27efc7]=_0x20607b[_0x2b4ddc];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a413_0x3bad43(0x172)]?function(_0x3e52f3,_0x504842){const _0x5589a7=a413_0x3bad43;Object['defineProperty'](_0x3e52f3,_0x5589a7(0x150),{'enumerable':!![],'value':_0x504842});}:function(_0x43668c,_0x3f9141){const _0x304ae3=a413_0x3bad43;_0x43668c[_0x304ae3(0x150)]=_0x3f9141;}),__importStar=this&&this[a413_0x3bad43(0x16c)]||function(_0x418c58){const _0x3fd1e1=a413_0x3bad43;if(_0x418c58&&_0x418c58[_0x3fd1e1(0x15f)])return _0x418c58;var _0x2bb209={};if(_0x418c58!=null){for(var _0x17dc13 in _0x418c58)if(_0x17dc13!=='default'&&Object[_0x3fd1e1(0x14c)][_0x3fd1e1(0x159)][_0x3fd1e1(0x162)](_0x418c58,_0x17dc13))__createBinding(_0x2bb209,_0x418c58,_0x17dc13);}return __setModuleDefault(_0x2bb209,_0x418c58),_0x2bb209;},__importDefault=this&&this[a413_0x3bad43(0x153)]||function(_0x733b8f){const _0x1084d2=a413_0x3bad43;return _0x733b8f&&_0x733b8f[_0x1084d2(0x15f)]?_0x733b8f:{'default':_0x733b8f};};Object[a413_0x3bad43(0x167)](exports,a413_0x3bad43(0x15f),{'value':!![]});function a413_0x3391(_0x5055d3,_0x37eacb){const _0x15f546=a413_0x15f5();return a413_0x3391=function(_0x339113,_0x298484){_0x339113=_0x339113-0x14a;let _0xe4aa9c=_0x15f546[_0x339113];return _0xe4aa9c;},a413_0x3391(_0x5055d3,_0x37eacb);}const CheckSettings_1=__importDefault(require(a413_0x3bad43(0x16b))),socket_1=require(a413_0x3bad43(0x174)),Contact_1=__importDefault(require('../../models/Contact')),fs_1=__importDefault(require('fs')),path_1=__importStar(require(a413_0x3bad43(0x170))),axios=require('axios'),CreateOrUpdateContactService=async({name:_0x5ad8a7,number:_0x4a8466,profilePicUrl:_0x22b68e,isGroup:_0x130f14,email:email='',channel:channel=a413_0x3bad43(0x151),companyId:_0x564300,extraInfo:extraInfo=[],remoteJid:remoteJid=''})=>{const _0x5eae09=a413_0x3bad43,_0x590808=path_1['default'][_0x5eae09(0x175)](__dirname,'..','..','..',_0x5eae09(0x14d)),_0x54cf49=_0x130f14?_0x4a8466:_0x4a8466[_0x5eae09(0x16e)](/[^0-9]/g,''),_0x36aafc=(0x0,socket_1[_0x5eae09(0x14b)])();let _0x4044d8;const _0x1f0d43=_0x4044d8?.['profilePicUrl']||''!==_0x22b68e;_0x4044d8=await Contact_1[_0x5eae09(0x150)][_0x5eae09(0x160)]({'where':{'number':_0x54cf49,'companyId':_0x564300}});if(_0x4044d8)_0x4044d8['remoteJid']=remoteJid,_0x4044d8['profilePicUrl']=_0x22b68e,(_0x130f14||_0x4044d8['name']===_0x54cf49)&&(_0x4044d8['name']=_0x5ad8a7),_0x4044d8[_0x5eae09(0x168)](),_0x4044d8[_0x5eae09(0x176)](),_0x36aafc[_0x5eae09(0x169)](_0x5eae09(0x16a)+_0x564300+_0x5eae09(0x164),{'action':_0x5eae09(0x155),'contact':_0x4044d8});else{const _0x3fb996=await(0x0,CheckSettings_1['default'])(_0x5eae09(0x14e));_0x4044d8=await Contact_1[_0x5eae09(0x150)][_0x5eae09(0x172)]({'name':_0x5ad8a7,'number':_0x54cf49,'email':email,'isGroup':_0x130f14,'extraInfo':extraInfo,'companyId':_0x564300,'channel':channel,'acceptAudioMessage':_0x3fb996==='enabled'?!![]:![],'remoteJid':remoteJid,'urlPicture':_0x22b68e}),_0x36aafc[_0x5eae09(0x169)](_0x5eae09(0x16a)+_0x564300+_0x5eae09(0x164),{'action':_0x5eae09(0x172),'contact':_0x4044d8});}const _0x4d2772=path_1['default'][_0x5eae09(0x175)](_0x590808,'company'+_0x564300,_0x5eae09(0x158));!fs_1[_0x5eae09(0x150)][_0x5eae09(0x15b)](_0x4d2772)&&(fs_1['default']['mkdirSync'](_0x4d2772,{'recursive':!![]}),fs_1[_0x5eae09(0x150)][_0x5eae09(0x171)](_0x4d2772,0x1ff));if(_0x1f0d43){let _0x5e9cf0;if(_0x22b68e[_0x5eae09(0x166)](_0x5eae09(0x156)))_0x5e9cf0=_0x5eae09(0x15d);else{const _0x16f5fe=await axios[_0x5eae09(0x177)](_0x22b68e,{'responseType':_0x5eae09(0x163)});_0x5e9cf0=_0x4044d8['id']+'.jpeg',fs_1[_0x5eae09(0x150)][_0x5eae09(0x165)]((0x0,path_1['join'])(_0x4d2772,_0x5e9cf0),_0x16f5fe[_0x5eae09(0x157)]);}_0x4044d8[_0x5eae09(0x155)]({'urlPicture':_0x5e9cf0}),_0x36aafc[_0x5eae09(0x169)](_0x5eae09(0x16a)+_0x564300+_0x5eae09(0x164),{'action':'update','contact':_0x4044d8});}return _0x4044d8;};exports[a413_0x3bad43(0x150)]=CreateOrUpdateContactService;