'use strict';const a428_0x93efaf=a428_0x572b;(function(_0x44a7d5,_0x5f1a24){const _0x4be4b9=a428_0x572b,_0x34f6cd=_0x44a7d5();while(!![]){try{const _0x41b9f7=-parseInt(_0x4be4b9(0x1e2))/0x1*(-parseInt(_0x4be4b9(0x1d2))/0x2)+parseInt(_0x4be4b9(0x1e6))/0x3+parseInt(_0x4be4b9(0x1ec))/0x4*(-parseInt(_0x4be4b9(0x1eb))/0x5)+parseInt(_0x4be4b9(0x1e7))/0x6*(-parseInt(_0x4be4b9(0x1e4))/0x7)+parseInt(_0x4be4b9(0x1df))/0x8+-parseInt(_0x4be4b9(0x1e0))/0x9*(-parseInt(_0x4be4b9(0x1d3))/0xa)+-parseInt(_0x4be4b9(0x1f6))/0xb;if(_0x41b9f7===_0x5f1a24)break;else _0x34f6cd['push'](_0x34f6cd['shift']());}catch(_0x6f0ad5){_0x34f6cd['push'](_0x34f6cd['shift']());}}}(a428_0xb4a9,0x2a227));var __createBinding=this&&this[a428_0x93efaf(0x1dc)]||(Object[a428_0x93efaf(0x1ea)]?function(_0x3ce2e0,_0xcd9d4a,_0x5830a2,_0x181272){const _0x48051e=a428_0x93efaf;if(_0x181272===undefined)_0x181272=_0x5830a2;var _0x4fb1a1=Object[_0x48051e(0x1e1)](_0xcd9d4a,_0x5830a2);(!_0x4fb1a1||('get'in _0x4fb1a1?!_0xcd9d4a[_0x48051e(0x1da)]:_0x4fb1a1['writable']||_0x4fb1a1[_0x48051e(0x1d9)]))&&(_0x4fb1a1={'enumerable':!![],'get':function(){return _0xcd9d4a[_0x5830a2];}}),Object[_0x48051e(0x1f0)](_0x3ce2e0,_0x181272,_0x4fb1a1);}:function(_0x1f31bf,_0x38e2ce,_0x6775a9,_0x4d836c){if(_0x4d836c===undefined)_0x4d836c=_0x6775a9;_0x1f31bf[_0x4d836c]=_0x38e2ce[_0x6775a9];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a428_0x93efaf(0x1ea)]?function(_0x3a2dc4,_0x50b8ee){const _0x3b055c=a428_0x93efaf;Object[_0x3b055c(0x1f0)](_0x3a2dc4,_0x3b055c(0x1cb),{'enumerable':!![],'value':_0x50b8ee});}:function(_0x39d060,_0x28d102){const _0x1770e1=a428_0x93efaf;_0x39d060[_0x1770e1(0x1cb)]=_0x28d102;}),__importStar=this&&this['__importStar']||function(_0x180836){const _0x5086ee=a428_0x93efaf;if(_0x180836&&_0x180836[_0x5086ee(0x1da)])return _0x180836;var _0x109d32={};if(_0x180836!=null){for(var _0x29297d in _0x180836)if(_0x29297d!=='default'&&Object[_0x5086ee(0x1fa)][_0x5086ee(0x1d6)][_0x5086ee(0x1f3)](_0x180836,_0x29297d))__createBinding(_0x109d32,_0x180836,_0x29297d);}return __setModuleDefault(_0x109d32,_0x180836),_0x109d32;},__importDefault=this&&this[a428_0x93efaf(0x1cd)]||function(_0x3c1f9e){const _0x7fea49=a428_0x93efaf;return _0x3c1f9e&&_0x3c1f9e[_0x7fea49(0x1da)]?_0x3c1f9e:{'default':_0x3c1f9e};};function a428_0x572b(_0x2897f8,_0x568d6b){const _0xb4a937=a428_0xb4a9();return a428_0x572b=function(_0x572b21,_0x1800e8){_0x572b21=_0x572b21-0x1ca;let _0x4bd5cc=_0xb4a937[_0x572b21];return _0x4bd5cc;},a428_0x572b(_0x2897f8,_0x568d6b);}function a428_0xb4a9(){const _0x77280f=['__createBinding','enabled','../../libs/socket','248472uEdgZc','9kuhnxO','getOwnPropertyDescriptor','2SEtKUc','resolve','17815GVASoP','get','573552uenJot','42REWqtr','update','company-','create','1285lojyza','3228jMOklx','reload','../../models/Contact','name','defineProperty','.jpeg','profilePicUrl','call','nopicture.png','axios','2864642GEajxH','writeFileSync','company','arraybuffer','prototype','path','remoteJid','default','findOne','__importDefault','nopicture','join','replace','emit','208542MtHKmW','2274340IzmmHE','includes','save','hasOwnProperty','-contact','contacts','configurable','__esModule','../../models/CompaniesSettings'];a428_0xb4a9=function(){return _0x77280f;};return a428_0xb4a9();}Object['defineProperty'](exports,a428_0x93efaf(0x1da),{'value':!![]});const socket_1=require(a428_0x93efaf(0x1de)),CompaniesSettings_1=__importDefault(require(a428_0x93efaf(0x1db))),Contact_1=__importDefault(require(a428_0x93efaf(0x1ee))),fs_1=__importDefault(require('fs')),path_1=__importStar(require(a428_0x93efaf(0x1fb))),axios=require(a428_0x93efaf(0x1f5)),CreateOrUpdateContactService=async({name:_0x41fb65,number:_0x53cbaa,profilePicUrl:_0x2d925c,isGroup:_0x2d180b,email:email='',channel:channel='whatsapp',companyId:_0x16a0e0,extraInfo:extraInfo=[],remoteJid:remoteJid=''})=>{const _0x4f6656=a428_0x93efaf,_0x4a8eca=path_1['default'][_0x4f6656(0x1e3)](__dirname,'..','..','..','public'),_0x255b65=_0x2d180b?_0x53cbaa:_0x53cbaa[_0x4f6656(0x1d0)](/[^0-9]/g,''),_0x449fe2=(0x0,socket_1['getIO'])();let _0x1706bc;const _0x4ca94a=_0x1706bc?.[_0x4f6656(0x1f2)]||''!==_0x2d925c;_0x1706bc=await Contact_1[_0x4f6656(0x1cb)][_0x4f6656(0x1cc)]({'where':{'number':_0x255b65,'companyId':_0x16a0e0}});if(_0x1706bc)_0x1706bc[_0x4f6656(0x1ca)]=remoteJid,_0x1706bc[_0x4f6656(0x1f2)]=_0x2d925c,(_0x2d180b||_0x1706bc['name']===_0x255b65)&&(_0x1706bc[_0x4f6656(0x1ef)]=_0x41fb65),_0x1706bc[_0x4f6656(0x1d5)](),_0x1706bc[_0x4f6656(0x1ed)](),_0x449fe2[_0x4f6656(0x1d1)](_0x4f6656(0x1e9)+_0x16a0e0+_0x4f6656(0x1d7),{'action':_0x4f6656(0x1e8),'contact':_0x1706bc});else{const _0x2b3039=await CompaniesSettings_1[_0x4f6656(0x1cb)][_0x4f6656(0x1cc)]({'where':{'companyId':_0x16a0e0}}),{acceptAudioMessageContact:_0x523b60}=_0x2b3039;_0x1706bc=await Contact_1[_0x4f6656(0x1cb)][_0x4f6656(0x1ea)]({'name':_0x41fb65,'number':_0x255b65,'email':email,'isGroup':_0x2d180b,'extraInfo':extraInfo,'companyId':_0x16a0e0,'channel':channel,'acceptAudioMessage':_0x523b60===_0x4f6656(0x1dd)?!![]:![],'remoteJid':remoteJid,'urlPicture':_0x2d925c}),_0x449fe2[_0x4f6656(0x1d1)](_0x4f6656(0x1e9)+_0x16a0e0+'-contact',{'action':_0x4f6656(0x1ea),'contact':_0x1706bc});}const _0xa1ec80=path_1[_0x4f6656(0x1cb)][_0x4f6656(0x1e3)](_0x4a8eca,_0x4f6656(0x1f8)+_0x16a0e0,_0x4f6656(0x1d8));!fs_1[_0x4f6656(0x1cb)]['existsSync'](_0xa1ec80)&&(fs_1[_0x4f6656(0x1cb)]['mkdirSync'](_0xa1ec80,{'recursive':!![]}),fs_1[_0x4f6656(0x1cb)]['chmodSync'](_0xa1ec80,0x1ff));if(_0x4ca94a){let _0x2b57dd;if(_0x2d925c[_0x4f6656(0x1d4)](_0x4f6656(0x1ce)))_0x2b57dd=_0x4f6656(0x1f4);else{const _0x423698=await axios[_0x4f6656(0x1e5)](_0x2d925c,{'responseType':_0x4f6656(0x1f9)});_0x2b57dd=_0x1706bc['id']+_0x4f6656(0x1f1),fs_1[_0x4f6656(0x1cb)][_0x4f6656(0x1f7)]((0x0,path_1[_0x4f6656(0x1cf)])(_0xa1ec80,_0x2b57dd),_0x423698['data']);}_0x1706bc[_0x4f6656(0x1e8)]({'urlPicture':_0x2b57dd,'pictureUpdated':!![]}),_0x449fe2['emit'](_0x4f6656(0x1e9)+_0x16a0e0+'-contact',{'action':_0x4f6656(0x1e8),'contact':_0x1706bc});}return _0x1706bc;};exports[a428_0x93efaf(0x1cb)]=CreateOrUpdateContactService;