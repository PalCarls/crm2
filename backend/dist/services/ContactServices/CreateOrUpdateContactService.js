'use strict';function a414_0x5da3(_0x636113,_0xbcca5c){const _0x36c20b=a414_0x36c2();return a414_0x5da3=function(_0x5da3e6,_0x6ffd74){_0x5da3e6=_0x5da3e6-0x12e;let _0x74a57b=_0x36c20b[_0x5da3e6];return _0x74a57b;},a414_0x5da3(_0x636113,_0xbcca5c);}const a414_0x3d9efc=a414_0x5da3;(function(_0x5cdf6e,_0x4dec2c){const _0x5aab29=a414_0x5da3,_0x487ddb=_0x5cdf6e();while(!![]){try{const _0x118c8e=-parseInt(_0x5aab29(0x15d))/0x1*(parseInt(_0x5aab29(0x13e))/0x2)+parseInt(_0x5aab29(0x15f))/0x3+parseInt(_0x5aab29(0x13a))/0x4*(-parseInt(_0x5aab29(0x140))/0x5)+-parseInt(_0x5aab29(0x156))/0x6+parseInt(_0x5aab29(0x13b))/0x7+-parseInt(_0x5aab29(0x15e))/0x8*(-parseInt(_0x5aab29(0x154))/0x9)+-parseInt(_0x5aab29(0x12f))/0xa;if(_0x118c8e===_0x4dec2c)break;else _0x487ddb['push'](_0x487ddb['shift']());}catch(_0x34f19b){_0x487ddb['push'](_0x487ddb['shift']());}}}(a414_0x36c2,0x975dd));var __createBinding=this&&this[a414_0x3d9efc(0x13d)]||(Object[a414_0x3d9efc(0x152)]?function(_0x4077e2,_0x1efe95,_0x5b6d1a,_0x5daddd){const _0x4ed658=a414_0x3d9efc;if(_0x5daddd===undefined)_0x5daddd=_0x5b6d1a;var _0xfa54c=Object['getOwnPropertyDescriptor'](_0x1efe95,_0x5b6d1a);(!_0xfa54c||('get'in _0xfa54c?!_0x1efe95['__esModule']:_0xfa54c[_0x4ed658(0x143)]||_0xfa54c[_0x4ed658(0x139)]))&&(_0xfa54c={'enumerable':!![],'get':function(){return _0x1efe95[_0x5b6d1a];}}),Object[_0x4ed658(0x14c)](_0x4077e2,_0x5daddd,_0xfa54c);}:function(_0x33bea7,_0x730ecb,_0x51e108,_0xf29ff2){if(_0xf29ff2===undefined)_0xf29ff2=_0x51e108;_0x33bea7[_0xf29ff2]=_0x730ecb[_0x51e108];}),__setModuleDefault=this&&this[a414_0x3d9efc(0x147)]||(Object[a414_0x3d9efc(0x152)]?function(_0x3a9beb,_0x39e242){const _0x20b527=a414_0x3d9efc;Object[_0x20b527(0x14c)](_0x3a9beb,'default',{'enumerable':!![],'value':_0x39e242});}:function(_0x4165f4,_0x26f992){const _0x465137=a414_0x3d9efc;_0x4165f4[_0x465137(0x153)]=_0x26f992;}),__importStar=this&&this[a414_0x3d9efc(0x12e)]||function(_0x4b06eb){const _0x45be0c=a414_0x3d9efc;if(_0x4b06eb&&_0x4b06eb['__esModule'])return _0x4b06eb;var _0x190d07={};if(_0x4b06eb!=null){for(var _0x1d559b in _0x4b06eb)if(_0x1d559b!==_0x45be0c(0x153)&&Object[_0x45be0c(0x155)][_0x45be0c(0x130)][_0x45be0c(0x14f)](_0x4b06eb,_0x1d559b))__createBinding(_0x190d07,_0x4b06eb,_0x1d559b);}return __setModuleDefault(_0x190d07,_0x4b06eb),_0x190d07;},__importDefault=this&&this[a414_0x3d9efc(0x158)]||function(_0x12fcd8){const _0x1a942f=a414_0x3d9efc;return _0x12fcd8&&_0x12fcd8[_0x1a942f(0x15c)]?_0x12fcd8:{'default':_0x12fcd8};};Object[a414_0x3d9efc(0x14c)](exports,'__esModule',{'value':!![]});const CheckSettings_1=__importDefault(require(a414_0x3d9efc(0x144))),socket_1=require('../../libs/socket'),Contact_1=__importDefault(require(a414_0x3d9efc(0x14a))),fs_1=__importDefault(require('fs')),path_1=__importStar(require(a414_0x3d9efc(0x133))),axios=require(a414_0x3d9efc(0x137)),CreateOrUpdateContactService=async({name:_0x58922e,number:_0x5bb92b,profilePicUrl:_0x5e6d83,isGroup:_0x7dc7bf,email:email='',channel:channel=a414_0x3d9efc(0x149),companyId:_0x5924fa,extraInfo:extraInfo=[],remoteJid:remoteJid=''})=>{const _0x13d9d4=a414_0x3d9efc,_0x136e87=path_1['default'][_0x13d9d4(0x159)](__dirname,'..','..','..',_0x13d9d4(0x148)),_0x24554a=_0x7dc7bf?_0x5bb92b:_0x5bb92b[_0x13d9d4(0x132)](/[^0-9]/g,''),_0xc66561=(0x0,socket_1[_0x13d9d4(0x13f)])();let _0x5d9117;const _0x2d196d=_0x5d9117?.[_0x13d9d4(0x15a)]||''!==_0x5e6d83;_0x5d9117=await Contact_1[_0x13d9d4(0x153)][_0x13d9d4(0x145)]({'where':{'number':_0x24554a,'companyId':_0x5924fa}});if(_0x5d9117)_0x5d9117[_0x13d9d4(0x146)]=remoteJid,_0x5d9117['profilePicUrl']=_0x5e6d83,(_0x7dc7bf||_0x5d9117[_0x13d9d4(0x14e)]===_0x24554a)&&(_0x5d9117['name']=_0x58922e),_0x5d9117['save'](),_0x5d9117['reload'](),_0xc66561['emit']('company-'+_0x5924fa+_0x13d9d4(0x142),{'action':'update','contact':_0x5d9117});else{const _0xcb471d=await(0x0,CheckSettings_1[_0x13d9d4(0x153)])(_0x13d9d4(0x14b));_0x5d9117=await Contact_1[_0x13d9d4(0x153)][_0x13d9d4(0x152)]({'name':_0x58922e,'number':_0x24554a,'email':email,'isGroup':_0x7dc7bf,'extraInfo':extraInfo,'companyId':_0x5924fa,'channel':channel,'acceptAudioMessage':_0xcb471d===_0x13d9d4(0x136)?!![]:![],'remoteJid':remoteJid,'urlPicture':_0x5e6d83}),_0xc66561['emit']('company-'+_0x5924fa+'-contact',{'action':'create','contact':_0x5d9117});}const _0x160e91=path_1[_0x13d9d4(0x153)][_0x13d9d4(0x159)](_0x136e87,_0x13d9d4(0x151)+_0x5924fa,_0x13d9d4(0x13c));!fs_1[_0x13d9d4(0x153)]['existsSync'](_0x160e91)&&(fs_1[_0x13d9d4(0x153)][_0x13d9d4(0x150)](_0x160e91,{'recursive':!![]}),fs_1[_0x13d9d4(0x153)][_0x13d9d4(0x135)](_0x160e91,0x1ff));if(_0x2d196d){let _0xa88ea2;if(_0x5e6d83['includes']('nopicture'))_0xa88ea2='nopicture.png';else{const _0x31136e=await axios['get'](_0x5e6d83,{'responseType':_0x13d9d4(0x15b)});_0xa88ea2=_0x5d9117['id']+_0x13d9d4(0x14d),fs_1['default']['writeFileSync']((0x0,path_1[_0x13d9d4(0x138)])(_0x160e91,_0xa88ea2),_0x31136e[_0x13d9d4(0x134)]);}_0x5d9117[_0x13d9d4(0x131)]({'urlPicture':_0xa88ea2,'pictureUpdated':!![]}),_0xc66561[_0x13d9d4(0x157)](_0x13d9d4(0x141)+_0x5924fa+_0x13d9d4(0x142),{'action':_0x13d9d4(0x131),'contact':_0x5d9117});}return _0x5d9117;};function a414_0x36c2(){const _0x192572=['3634764UxBgbI','__importStar','3638140lDvvjW','hasOwnProperty','update','replace','path','data','chmodSync','enabled','axios','join','configurable','8XZrTNi','3940825jfUhxB','contacts','__createBinding','26412CqbDOI','getIO','2128155nlZxIL','company-','-contact','writable','../../helpers/CheckSettings','findOne','remoteJid','__setModuleDefault','public','whatsapp','../../models/Contact','acceptAudioMessageContact','defineProperty','.jpeg','name','call','mkdirSync','company','create','default','36819BnDmrl','prototype','431028CMzzfy','emit','__importDefault','resolve','profilePicUrl','arraybuffer','__esModule','16JYVTEa','672CKOiXG'];a414_0x36c2=function(){return _0x192572;};return a414_0x36c2();}exports[a414_0x3d9efc(0x153)]=CreateOrUpdateContactService;