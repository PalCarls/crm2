'use strict';const a458_0x2a8054=a458_0xf3d3;function a458_0x4367(){const _0x3db9f6=['defineProperty','2876AOfjlH','extraInfo','1873730TkUpmu','findOne','../../models/Contact','__importDefault','927GKxYQV','1395675dRCsHC','1651706oePAhB','name','bulkCreate','forEach','459297XjIidt','1838zgittl','806268ekepVq','453pokmgT','16pJzOMl','destroy','default'];a458_0x4367=function(){return _0x3db9f6;};return a458_0x4367();}(function(_0x4748c8,_0x102dc9){const _0x1c0753=a458_0xf3d3,_0x3b0846=_0x4748c8();while(!![]){try{const _0x1e4dba=-parseInt(_0x1c0753(0xad))/0x1*(-parseInt(_0x1c0753(0xab))/0x2)+parseInt(_0x1c0753(0xa4))/0x3*(parseInt(_0x1c0753(0xb2))/0x4)+-parseInt(_0x1c0753(0xa5))/0x5+parseInt(_0x1c0753(0xac))/0x6+parseInt(_0x1c0753(0xa6))/0x7*(-parseInt(_0x1c0753(0xae))/0x8)+parseInt(_0x1c0753(0xaa))/0x9+parseInt(_0x1c0753(0xa0))/0xa;if(_0x1e4dba===_0x102dc9)break;else _0x3b0846['push'](_0x3b0846['shift']());}catch(_0x467317){_0x3b0846['push'](_0x3b0846['shift']());}}}(a458_0x4367,0x3f873));var __importDefault=this&&this[a458_0x2a8054(0xa3)]||function(_0x5e2715){return _0x5e2715&&_0x5e2715['__esModule']?_0x5e2715:{'default':_0x5e2715};};Object[a458_0x2a8054(0xb1)](exports,'__esModule',{'value':!![]});function a458_0xf3d3(_0x38cdd7,_0x920e2){const _0x4367cd=a458_0x4367();return a458_0xf3d3=function(_0xf3d3fb,_0x2d8686){_0xf3d3fb=_0xf3d3fb-0xa0;let _0x57a53d=_0x4367cd[_0xf3d3fb];return _0x57a53d;},a458_0xf3d3(_0x38cdd7,_0x920e2);}const AppError_1=__importDefault(require('../../errors/AppError')),CompaniesSettings_1=__importDefault(require('../../models/CompaniesSettings')),Contact_1=__importDefault(require(a458_0x2a8054(0xa2))),ContactWallet_1=__importDefault(require('../../models/ContactWallet')),CreateContactService=async({name:_0x51f98,number:_0x376a76,email:email='',acceptAudioMessage:_0x1823ae,active:_0xeb8e90,companyId:_0x505770,extraInfo:extraInfo=[],remoteJid:remoteJid='',wallets:_0x41a2b1})=>{const _0x518220=a458_0x2a8054,_0x4a4189=await Contact_1[_0x518220(0xb0)][_0x518220(0xa1)]({'where':{'number':_0x376a76,'companyId':_0x505770}});if(_0x4a4189)throw new AppError_1[(_0x518220(0xb0))]('ERR_DUPLICATED_CONTACT');const _0x22a946=await CompaniesSettings_1[_0x518220(0xb0)]['findOne']({'where':{'companyId':_0x505770}}),{acceptAudioMessageContact:_0x11019c}=_0x22a946,_0x3f3b3e=await Contact_1[_0x518220(0xb0)]['create']({'name':_0x51f98,'number':_0x376a76,'email':email,'acceptAudioMessage':_0x11019c==='enabled'?!![]:![],'active':_0xeb8e90,'extraInfo':extraInfo,'companyId':_0x505770,'remoteJid':remoteJid},{'include':[_0x518220(0xb3),{'association':'wallets','attributes':['id',_0x518220(0xa7)]}]});if(_0x41a2b1){await ContactWallet_1[_0x518220(0xb0)][_0x518220(0xaf)]({'where':{'companyId':_0x505770,'contactId':_0x3f3b3e['id']}});const _0x7d27b3=[];_0x41a2b1[_0x518220(0xa9)](_0xdb46c8=>{_0x7d27b3['push']({'walletId':!_0xdb46c8['id']?_0xdb46c8:_0xdb46c8['id'],'contactId':_0x3f3b3e['id'],'companyId':_0x505770});}),await ContactWallet_1[_0x518220(0xb0)][_0x518220(0xa8)](_0x7d27b3);}return _0x3f3b3e;};exports[a458_0x2a8054(0xb0)]=CreateContactService;