'use strict';const a465_0xe60d9b=a465_0x5de1;(function(_0x33f465,_0x250ce6){const _0x485425=a465_0x5de1,_0x136f28=_0x33f465();while(!![]){try{const _0x1eb179=parseInt(_0x485425(0x89))/0x1*(-parseInt(_0x485425(0x8b))/0x2)+parseInt(_0x485425(0x99))/0x3+parseInt(_0x485425(0x9a))/0x4*(parseInt(_0x485425(0x91))/0x5)+parseInt(_0x485425(0x8e))/0x6*(parseInt(_0x485425(0x96))/0x7)+-parseInt(_0x485425(0x9b))/0x8*(parseInt(_0x485425(0x93))/0x9)+parseInt(_0x485425(0x8d))/0xa+parseInt(_0x485425(0x94))/0xb*(-parseInt(_0x485425(0x84))/0xc);if(_0x1eb179===_0x250ce6)break;else _0x136f28['push'](_0x136f28['shift']());}catch(_0x3cd386){_0x136f28['push'](_0x136f28['shift']());}}}(a465_0x2896,0x5d747));function a465_0x2896(){const _0x30d49d=['push','17465NumOGg','__importDefault','6806043wieRkC','1214741DAVhzn','../../models/Contact','882juteCE','name','default','1984365rwqCug','328lVfcry','8ILeZZe','defineProperty','forEach','../../models/ContactWallet','bulkCreate','36naLPrh','../../models/CompaniesSettings','extraInfo','../../errors/AppError','findOne','267469fwtVii','__esModule','4wQAmJV','destroy','3680220ZaBYij','32826fZQDyj','create'];a465_0x2896=function(){return _0x30d49d;};return a465_0x2896();}function a465_0x5de1(_0x543a4f,_0x2b0e04){const _0x28969e=a465_0x2896();return a465_0x5de1=function(_0x5de178,_0x2cdd34){_0x5de178=_0x5de178-0x83;let _0x5893bc=_0x28969e[_0x5de178];return _0x5893bc;},a465_0x5de1(_0x543a4f,_0x2b0e04);}var __importDefault=this&&this[a465_0xe60d9b(0x92)]||function(_0x225ab1){const _0x3c04e9=a465_0xe60d9b;return _0x225ab1&&_0x225ab1[_0x3c04e9(0x8a)]?_0x225ab1:{'default':_0x225ab1};};Object[a465_0xe60d9b(0x9c)](exports,a465_0xe60d9b(0x8a),{'value':!![]});const AppError_1=__importDefault(require(a465_0xe60d9b(0x87))),CompaniesSettings_1=__importDefault(require(a465_0xe60d9b(0x85))),Contact_1=__importDefault(require(a465_0xe60d9b(0x95))),ContactWallet_1=__importDefault(require(a465_0xe60d9b(0x9e))),CreateContactService=async({name:_0x53ba12,number:_0x3913ce,email:email='',acceptAudioMessage:_0x56672c,active:_0x5238d0,companyId:_0x5a6fdd,extraInfo:extraInfo=[],remoteJid:remoteJid='',wallets:_0x4803f5})=>{const _0x59ab82=a465_0xe60d9b,_0x3bf2c8=await Contact_1[_0x59ab82(0x98)][_0x59ab82(0x88)]({'where':{'number':_0x3913ce,'companyId':_0x5a6fdd}});if(_0x3bf2c8)throw new AppError_1[(_0x59ab82(0x98))]('ERR_DUPLICATED_CONTACT');const _0x293e0b=await CompaniesSettings_1[_0x59ab82(0x98)][_0x59ab82(0x88)]({'where':{'companyId':_0x5a6fdd}}),{acceptAudioMessageContact:_0x8e00c7}=_0x293e0b,_0x36c1d5=await Contact_1[_0x59ab82(0x98)][_0x59ab82(0x8f)]({'name':_0x53ba12,'number':_0x3913ce,'email':email,'acceptAudioMessage':_0x8e00c7==='enabled'?!![]:![],'active':_0x5238d0,'extraInfo':extraInfo,'companyId':_0x5a6fdd,'remoteJid':remoteJid},{'include':[_0x59ab82(0x86),{'association':'wallets','attributes':['id',_0x59ab82(0x97)]}]});if(_0x4803f5){await ContactWallet_1[_0x59ab82(0x98)][_0x59ab82(0x8c)]({'where':{'companyId':_0x5a6fdd,'contactId':_0x36c1d5['id']}});const _0x457e59=[];_0x4803f5[_0x59ab82(0x9d)](_0x5b3253=>{const _0x15ef05=_0x59ab82;_0x457e59[_0x15ef05(0x90)]({'walletId':!_0x5b3253['id']?_0x5b3253:_0x5b3253['id'],'contactId':_0x36c1d5['id'],'companyId':_0x5a6fdd});}),await ContactWallet_1[_0x59ab82(0x98)][_0x59ab82(0x83)](_0x457e59);}return _0x36c1d5;};exports['default']=CreateContactService;