'use strict';const a458_0x3e317f=a458_0x417f;function a458_0x417f(_0x18cfc4,_0x771caf){const _0x267c80=a458_0x267c();return a458_0x417f=function(_0x417f,_0x1ffb02){_0x417f=_0x417f-0x16e;let _0x5b8908=_0x267c80[_0x417f];return _0x5b8908;},a458_0x417f(_0x18cfc4,_0x771caf);}(function(_0x5f57bd,_0x3d74ca){const _0x1ee706=a458_0x417f,_0x28dc07=_0x5f57bd();while(!![]){try{const _0x32cc4c=-parseInt(_0x1ee706(0x178))/0x1*(-parseInt(_0x1ee706(0x17b))/0x2)+-parseInt(_0x1ee706(0x186))/0x3*(parseInt(_0x1ee706(0x17c))/0x4)+parseInt(_0x1ee706(0x16e))/0x5+-parseInt(_0x1ee706(0x17a))/0x6+parseInt(_0x1ee706(0x181))/0x7+-parseInt(_0x1ee706(0x17d))/0x8*(-parseInt(_0x1ee706(0x183))/0x9)+-parseInt(_0x1ee706(0x187))/0xa*(parseInt(_0x1ee706(0x180))/0xb);if(_0x32cc4c===_0x3d74ca)break;else _0x28dc07['push'](_0x28dc07['shift']());}catch(_0x46e759){_0x28dc07['push'](_0x28dc07['shift']());}}}(a458_0x267c,0x4b86f));var __importDefault=this&&this[a458_0x3e317f(0x184)]||function(_0x22818b){return _0x22818b&&_0x22818b['__esModule']?_0x22818b:{'default':_0x22818b};};function a458_0x267c(){const _0x56cdac=['forEach','push','create','destroy','ERR_DUPLICATED_CONTACT','32037ZkRLvh','wallets','1620744OTJCws','4kYsqsE','24AMJnQn','4056632rsXDut','bulkCreate','default','20911rQtvFq','1683269TxJRUg','defineProperty','9XkNauL','__importDefault','../../errors/AppError','264879oXjzMc','360vsGgci','1830285eakJpy','../../models/CompaniesSettings','../../models/ContactWallet','extraInfo','../../models/Contact'];a458_0x267c=function(){return _0x56cdac;};return a458_0x267c();}Object[a458_0x3e317f(0x182)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a458_0x3e317f(0x185))),CompaniesSettings_1=__importDefault(require(a458_0x3e317f(0x16f))),Contact_1=__importDefault(require(a458_0x3e317f(0x172))),ContactWallet_1=__importDefault(require(a458_0x3e317f(0x170))),CreateContactService=async({name:_0x247dd1,number:_0x59990a,email:email='',acceptAudioMessage:_0x473225,active:_0xc8cc0a,companyId:_0x496e98,extraInfo:extraInfo=[],remoteJid:remoteJid='',wallets:_0x411fe0})=>{const _0x5482ad=a458_0x3e317f,_0x52698b=await Contact_1[_0x5482ad(0x17f)]['findOne']({'where':{'number':_0x59990a,'companyId':_0x496e98}});if(_0x52698b)throw new AppError_1[(_0x5482ad(0x17f))](_0x5482ad(0x177));const _0x392f7d=await CompaniesSettings_1['default']['findOne']({'where':{'companyId':_0x496e98}}),{acceptAudioMessageContact:_0x4967ba}=_0x392f7d,_0x520c1a=await Contact_1['default'][_0x5482ad(0x175)]({'name':_0x247dd1,'number':_0x59990a,'email':email,'acceptAudioMessage':_0x4967ba==='enabled'?!![]:![],'active':_0xc8cc0a,'extraInfo':extraInfo,'companyId':_0x496e98,'remoteJid':remoteJid},{'include':[_0x5482ad(0x171),{'association':_0x5482ad(0x179),'attributes':['id','name']}]});if(_0x411fe0){await ContactWallet_1[_0x5482ad(0x17f)][_0x5482ad(0x176)]({'where':{'companyId':_0x496e98,'contactId':_0x520c1a['id']}});const _0x490f67=[];_0x411fe0[_0x5482ad(0x173)](_0x32cf0e=>{const _0x59aff7=_0x5482ad;_0x490f67[_0x59aff7(0x174)]({'walletId':!_0x32cf0e['id']?_0x32cf0e:_0x32cf0e['id'],'contactId':_0x520c1a['id'],'companyId':_0x496e98});}),await ContactWallet_1['default'][_0x5482ad(0x17e)](_0x490f67);}return _0x520c1a;};exports[a458_0x3e317f(0x17f)]=CreateContactService;