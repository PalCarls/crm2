'use strict';const a525_0x91e6a2=a525_0x35fa;(function(_0x20b841,_0x42f4b7){const _0x47c643=a525_0x35fa,_0x2583cb=_0x20b841();while(!![]){try{const _0x46d012=-parseInt(_0x47c643(0xf6))/0x1*(-parseInt(_0x47c643(0xfe))/0x2)+parseInt(_0x47c643(0xfb))/0x3+-parseInt(_0x47c643(0xf9))/0x4+-parseInt(_0x47c643(0xf7))/0x5+-parseInt(_0x47c643(0x105))/0x6+-parseInt(_0x47c643(0x106))/0x7+parseInt(_0x47c643(0x108))/0x8;if(_0x46d012===_0x42f4b7)break;else _0x2583cb['push'](_0x2583cb['shift']());}catch(_0x2d9f1f){_0x2583cb['push'](_0x2583cb['shift']());}}}(a525_0x4695,0x463f5));function a525_0x35fa(_0x489b07,_0x3a0012){const _0x46958d=a525_0x4695();return a525_0x35fa=function(_0x35fa6f,_0x28d29e){_0x35fa6f=_0x35fa6f-0xf3;let _0x3f8547=_0x46958d[_0x35fa6f];return _0x3f8547;},a525_0x35fa(_0x489b07,_0x3a0012);}var __importDefault=this&&this['__importDefault']||function(_0x4a87ae){return _0x4a87ae&&_0x4a87ae['__esModule']?_0x4a87ae:{'default':_0x4a87ae};};Object['defineProperty'](exports,a525_0x91e6a2(0x109),{'value':!![]});function a525_0x4695(){const _0x319661=['../../models/TicketTag','like','color','contactTags','Tag.id','col','2508756avAYRD','2943304tEQeoC','findAndCountAll','9056632GefzAv','__esModule','sequelize','count','contactTags.tagId','name','ASC','../../models/ContactTag','5127KPOOvR','2243365rtzPZK','../../models/Tag','1833340oqqKYj','length','1657872pcpyJG','ticketTags','default','136JqirKZ'];a525_0x4695=function(){return _0x319661;};return a525_0x4695();}const sequelize_1=require(a525_0x91e6a2(0x10a)),Tag_1=__importDefault(require(a525_0x91e6a2(0xf8))),ContactTag_1=__importDefault(require(a525_0x91e6a2(0xf5))),TicketTag_1=__importDefault(require(a525_0x91e6a2(0xff))),ListService=async({companyId:_0x3c9cde,searchParam:_0x475ce8,pageNumber:pageNumber='1',kanban:kanban=0x0})=>{const _0xab2527=a525_0x91e6a2;let _0x296dc4={};if(Number(kanban)===0x0){_0x475ce8&&(_0x296dc4={[sequelize_1['Op']['or']]:[{'name':{[sequelize_1['Op'][_0xab2527(0x100)]]:'%'+_0x475ce8+'%'}},{'color':{[sequelize_1['Op']['like']]:'%'+_0x475ce8+'%'}}]});const _0x516365=0x14,_0x3ac94a=_0x516365*(+pageNumber-0x1),{count:_0x4b4948,rows:_0xd9ec48}=await Tag_1['default'][_0xab2527(0x107)]({'where':{..._0x296dc4,'companyId':_0x3c9cde,'kanban':kanban},'limit':_0x516365,'offset':_0x3ac94a,'order':[['name',_0xab2527(0xf4)]],'subQuery':![],'include':[{'model':ContactTag_1['default'],'as':_0xab2527(0x102),'attributes':[],'required':![]}],'attributes':['id',_0xab2527(0xf3),_0xab2527(0x101),[(0x0,sequelize_1['fn'])(_0xab2527(0x10b),(0x0,sequelize_1['col'])(_0xab2527(0x10c))),'contactsCount']],'group':[_0xab2527(0x103)]}),_0x25ed58=_0x4b4948>_0x3ac94a+_0xd9ec48[_0xab2527(0xfa)];return{'tags':_0xd9ec48,'count':_0x4b4948,'hasMore':_0x25ed58};}else{_0x475ce8&&(_0x296dc4={[sequelize_1['Op']['or']]:[{'name':{[sequelize_1['Op'][_0xab2527(0x100)]]:'%'+_0x475ce8+'%'}},{'color':{[sequelize_1['Op'][_0xab2527(0x100)]]:'%'+_0x475ce8+'%'}}]});const _0x457d35=0x14,_0x4c0ff2=_0x457d35*(+pageNumber-0x1),{count:_0x3ec534,rows:_0x574328}=await Tag_1[_0xab2527(0xfd)][_0xab2527(0x107)]({'where':{..._0x296dc4,'companyId':_0x3c9cde,'kanban':kanban},'limit':_0x457d35,'offset':_0x4c0ff2,'order':[[_0xab2527(0xf3),_0xab2527(0xf4)]],'subQuery':![],'include':[{'model':TicketTag_1[_0xab2527(0xfd)],'as':_0xab2527(0xfc),'attributes':[],'required':![]}],'attributes':['id',_0xab2527(0xf3),_0xab2527(0x101),[(0x0,sequelize_1['fn'])(_0xab2527(0x10b),(0x0,sequelize_1[_0xab2527(0x104)])('ticketTags.tagId')),'ticketsCount']],'group':[_0xab2527(0x103)]}),_0xbc48c2=_0x3ec534>_0x4c0ff2+_0x574328['length'];return{'tags':_0x574328,'count':_0x3ec534,'hasMore':_0xbc48c2};}};exports[a525_0x91e6a2(0xfd)]=ListService;