'use strict';function a504_0x522c(){const _0xd0b815=['__importDefault','sequelize','6ItxCbs','ASC','1793368LVVTer','contactTags.tagId','../../models/TicketTag','1281034PzjMhQ','contactTags.contactId','../../models/Tag','contactTags','like','728775kVWHwN','ticketTags.tagId','652BUPHyc','Tag.id','../../models/ContactTag','9540423KQXlPa','10435qKamYa','771072lKluOs','1744519GroGqS','findAndCountAll','__esModule','ticketTags.ticketId','name','default','tagId','length'];a504_0x522c=function(){return _0xd0b815;};return a504_0x522c();}const a504_0x2146e0=a504_0x1152;(function(_0x1a7820,_0x353ff5){const _0x342674=a504_0x1152,_0x3197a4=_0x1a7820();while(!![]){try{const _0x1514ec=parseInt(_0x342674(0xca))/0x1+parseInt(_0x342674(0xbe))/0x2+parseInt(_0x342674(0xc3))/0x3+parseInt(_0x342674(0xc5))/0x4*(parseInt(_0x342674(0xc9))/0x5)+-parseInt(_0x342674(0xb9))/0x6*(parseInt(_0x342674(0xcb))/0x7)+-parseInt(_0x342674(0xbb))/0x8+-parseInt(_0x342674(0xc8))/0x9;if(_0x1514ec===_0x353ff5)break;else _0x3197a4['push'](_0x3197a4['shift']());}catch(_0x2b5799){_0x3197a4['push'](_0x3197a4['shift']());}}}(a504_0x522c,0x709cc));function a504_0x1152(_0x52bba4,_0x1c3f04){const _0x522c9c=a504_0x522c();return a504_0x1152=function(_0x115261,_0x2414a1){_0x115261=_0x115261-0xb9;let _0x5016db=_0x522c9c[_0x115261];return _0x5016db;},a504_0x1152(_0x52bba4,_0x1c3f04);}var __importDefault=this&&this[a504_0x2146e0(0xd3)]||function(_0x12e910){const _0x333640=a504_0x2146e0;return _0x12e910&&_0x12e910[_0x333640(0xcd)]?_0x12e910:{'default':_0x12e910};};Object['defineProperty'](exports,a504_0x2146e0(0xcd),{'value':!![]});const sequelize_1=require(a504_0x2146e0(0xd4)),Tag_1=__importDefault(require(a504_0x2146e0(0xc0))),ContactTag_1=__importDefault(require(a504_0x2146e0(0xc7))),TicketTag_1=__importDefault(require(a504_0x2146e0(0xbd))),ListService=async({companyId:_0x30fca2,searchParam:_0x3df3c1,pageNumber:pageNumber='1',kanban:kanban=0x0})=>{const _0x20c448=a504_0x2146e0;let _0x5c160b={};const _0x2f3083=0x14,_0x1e4ce7=_0x2f3083*(+pageNumber-0x1);if(Number(kanban)===0x0){_0x3df3c1&&(_0x5c160b={[sequelize_1['Op']['or']]:[{'name':{[sequelize_1['Op'][_0x20c448(0xc2)]]:'%'+_0x3df3c1+'%'}},{'color':{[sequelize_1['Op'][_0x20c448(0xc2)]]:'%'+_0x3df3c1+'%'}}]});const {count:_0x390950,rows:_0xc97214}=await Tag_1[_0x20c448(0xd0)][_0x20c448(0xcc)]({'where':{..._0x5c160b,'companyId':_0x30fca2,'kanban':kanban},'limit':_0x2f3083,'offset':_0x1e4ce7,'order':[['name',_0x20c448(0xba)]],'subQuery':![],'include':[{'model':ContactTag_1[_0x20c448(0xd0)],'as':_0x20c448(0xc1),'attributes':['tagId']}],'group':['Tag.id',_0x20c448(0xbc),_0x20c448(0xbf)]}),_0x1e8f82=_0x390950>_0x1e4ce7+_0xc97214['length'];return{'tags':_0xc97214,'count':_0x390950,'hasMore':_0x1e8f82};}else{_0x3df3c1&&(_0x5c160b={[sequelize_1['Op']['or']]:[{'name':{[sequelize_1['Op'][_0x20c448(0xc2)]]:'%'+_0x3df3c1+'%'}},{'color':{[sequelize_1['Op']['like']]:'%'+_0x3df3c1+'%'}}]});const {count:_0xdf9af2,rows:_0x2a6187}=await Tag_1[_0x20c448(0xd0)][_0x20c448(0xcc)]({'where':{..._0x5c160b,'companyId':_0x30fca2,'kanban':kanban},'limit':_0x2f3083,'offset':_0x1e4ce7,'order':[[_0x20c448(0xcf),_0x20c448(0xba)]],'subQuery':![],'include':[{'model':TicketTag_1[_0x20c448(0xd0)],'as':'ticketTags','attributes':[_0x20c448(0xd1)]}],'group':[_0x20c448(0xc6),_0x20c448(0xc4),_0x20c448(0xce)]}),_0x54db77=_0xdf9af2>_0x1e4ce7+_0x2a6187[_0x20c448(0xd2)];return{'tags':_0x2a6187,'count':_0xdf9af2,'hasMore':_0x54db77};}};exports[a504_0x2146e0(0xd0)]=ListService;