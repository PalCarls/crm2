'use strict';function a576_0x2159(){const _0x1dfa66=['LIKE','Sequelize','where','1310884GGAKNA','../../models/Tag','findAndCountAll','trim','LOWER','150910XvdGNK','1PwfhhK','3SjpwVp','414700PghsLx','../../models/TicketTag','length','98GzTtDf','2107323FHXsOv','remove-accents','name','default','30HxPSAO','2037145XecFCT','87592myhKkT','defineProperty','__esModule','ASC','col','2408270irXzND','__importDefault','Tag.name','contactTags','ticketTags','like'];a576_0x2159=function(){return _0x1dfa66;};return a576_0x2159();}const a576_0x5627c8=a576_0x4e67;function a576_0x4e67(_0x2b5520,_0x5e4fe2){const _0x215949=a576_0x2159();return a576_0x4e67=function(_0x4e671a,_0x129207){_0x4e671a=_0x4e671a-0x8e;let _0x3fe65c=_0x215949[_0x4e671a];return _0x3fe65c;},a576_0x4e67(_0x2b5520,_0x5e4fe2);}(function(_0x1ff8b4,_0x6474d1){const _0x4c6f89=a576_0x4e67,_0x4e4c2f=_0x1ff8b4();while(!![]){try{const _0x20d689=parseInt(_0x4c6f89(0x9c))/0x1*(parseInt(_0x4c6f89(0x9e))/0x2)+parseInt(_0x4c6f89(0x9d))/0x3*(-parseInt(_0x4c6f89(0x96))/0x4)+parseInt(_0x4c6f89(0x9b))/0x5*(-parseInt(_0x4c6f89(0xa6))/0x6)+parseInt(_0x4c6f89(0xa1))/0x7*(parseInt(_0x4c6f89(0xa8))/0x8)+parseInt(_0x4c6f89(0xa2))/0x9+parseInt(_0x4c6f89(0xad))/0xa+-parseInt(_0x4c6f89(0xa7))/0xb;if(_0x20d689===_0x6474d1)break;else _0x4e4c2f['push'](_0x4e4c2f['shift']());}catch(_0x555379){_0x4e4c2f['push'](_0x4e4c2f['shift']());}}}(a576_0x2159,0x29f08));var __importDefault=this&&this[a576_0x5627c8(0x8e)]||function(_0x29f0ac){const _0x133b8a=a576_0x5627c8;return _0x29f0ac&&_0x29f0ac[_0x133b8a(0xaa)]?_0x29f0ac:{'default':_0x29f0ac};};Object[a576_0x5627c8(0xa9)](exports,'__esModule',{'value':!![]});const sequelize_1=require('sequelize'),Tag_1=__importDefault(require(a576_0x5627c8(0x97))),ContactTag_1=__importDefault(require('../../models/ContactTag')),TicketTag_1=__importDefault(require(a576_0x5627c8(0x9f))),remove_accents_1=__importDefault(require(a576_0x5627c8(0xa3))),ListService=async({companyId:_0x8bfd5,searchParam:searchParam='',pageNumber:pageNumber='1',kanban:kanban=0x0})=>{const _0x5585f8=a576_0x5627c8;let _0x594cce={};const _0x1f636a=0x64,_0x67b5f2=_0x1f636a*(+pageNumber-0x1),_0x25b1c5=(0x0,remove_accents_1[_0x5585f8(0xa5)])(searchParam['toLocaleLowerCase']()[_0x5585f8(0x99)]());if(Number(kanban)===0x0){searchParam&&(_0x594cce={[sequelize_1['Op']['or']]:[{'name':sequelize_1['Sequelize']['where'](sequelize_1[_0x5585f8(0x94)]['fn'](_0x5585f8(0x9a),sequelize_1[_0x5585f8(0x94)][_0x5585f8(0xac)]('Tag.name')),_0x5585f8(0x93),'%'+_0x25b1c5+'%')},{'color':{[sequelize_1['Op'][_0x5585f8(0x92)]]:'%'+_0x25b1c5+'%'}}]});const {count:_0x25fe79,rows:_0x39e148}=await Tag_1['default'][_0x5585f8(0x98)]({'where':{..._0x594cce,'companyId':_0x8bfd5,'kanban':kanban},'limit':_0x1f636a,'include':[{'model':ContactTag_1['default'],'as':_0x5585f8(0x90)}],'attributes':['id',_0x5585f8(0xa4),'color'],'offset':_0x67b5f2,'order':[[_0x5585f8(0xa4),'ASC']]}),_0x40c50a=_0x25fe79>_0x67b5f2+_0x39e148[_0x5585f8(0xa0)];return{'tags':_0x39e148,'count':_0x25fe79,'hasMore':_0x40c50a};}else{searchParam&&(_0x594cce={[sequelize_1['Op']['or']]:[{'name':sequelize_1[_0x5585f8(0x94)][_0x5585f8(0x95)](sequelize_1['Sequelize']['fn'](_0x5585f8(0x9a),sequelize_1['Sequelize']['col'](_0x5585f8(0x8f))),_0x5585f8(0x93),'%'+_0x25b1c5+'%')},{'color':{[sequelize_1['Op'][_0x5585f8(0x92)]]:'%'+_0x25b1c5+'%'}}]});const {count:_0x96756a,rows:_0x82356c}=await Tag_1['default'][_0x5585f8(0x98)]({'where':{..._0x594cce,'companyId':_0x8bfd5,'kanban':kanban},'limit':_0x1f636a,'offset':_0x67b5f2,'order':[[_0x5585f8(0xa4),_0x5585f8(0xab)]],'include':[{'model':TicketTag_1[_0x5585f8(0xa5)],'as':_0x5585f8(0x91)}],'attributes':['id',_0x5585f8(0xa4),'color']}),_0x290ec9=_0x96756a>_0x67b5f2+_0x82356c[_0x5585f8(0xa0)];return{'tags':_0x82356c,'count':_0x96756a,'hasMore':_0x290ec9};}};exports[a576_0x5627c8(0xa5)]=ListService;