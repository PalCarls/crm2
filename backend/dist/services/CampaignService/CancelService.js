'use strict';const a369_0x28942a=a369_0x5dfc;function a369_0x484b(){const _0x3e7afa=['14168zRuAtY','update','1845bLzdvb','findByPk','__esModule','../../models/Campaign','jobId','findAll','../../models/CampaignShipping','11846eDwcPR','push','sequelize','869817JUvDFp','CancelService','4RzGqtO','330468KlkFJR','defineProperty','remove','4792060bCpDYI','CANCELADA','getJob','not','default','__importDefault','3495870cNqtpH','../../queues','8UetAjN','1623349rKmVlR'];a369_0x484b=function(){return _0x3e7afa;};return a369_0x484b();}(function(_0x853c9d,_0x426bec){const _0x55440e=a369_0x5dfc,_0xaa5442=_0x853c9d();while(!![]){try{const _0x3e8b4e=parseInt(_0x55440e(0x1b5))/0x1*(-parseInt(_0x55440e(0x1aa))/0x2)+-parseInt(_0x55440e(0x1b8))/0x3*(parseInt(_0x55440e(0x1ba))/0x4)+parseInt(_0x55440e(0x1a8))/0x5+-parseInt(_0x55440e(0x1bb))/0x6+parseInt(_0x55440e(0x1ab))/0x7+parseInt(_0x55440e(0x1ac))/0x8*(parseInt(_0x55440e(0x1ae))/0x9)+-parseInt(_0x55440e(0x1a2))/0xa;if(_0x3e8b4e===_0x426bec)break;else _0xaa5442['push'](_0xaa5442['shift']());}catch(_0x48974e){_0xaa5442['push'](_0xaa5442['shift']());}}}(a369_0x484b,0x67281));function a369_0x5dfc(_0x557d51,_0x288cb8){const _0x484b1a=a369_0x484b();return a369_0x5dfc=function(_0x5dfc8a,_0x4ed774){_0x5dfc8a=_0x5dfc8a-0x1a0;let _0x46b023=_0x484b1a[_0x5dfc8a];return _0x46b023;},a369_0x5dfc(_0x557d51,_0x288cb8);}var __importDefault=this&&this[a369_0x28942a(0x1a7)]||function(_0x44bba7){const _0xaca2b8=a369_0x28942a;return _0x44bba7&&_0x44bba7[_0xaca2b8(0x1b0)]?_0x44bba7:{'default':_0x44bba7};};Object[a369_0x28942a(0x1a0)](exports,a369_0x28942a(0x1b0),{'value':!![]}),exports[a369_0x28942a(0x1b9)]=void 0x0;const sequelize_1=require(a369_0x28942a(0x1b7)),Campaign_1=__importDefault(require(a369_0x28942a(0x1b1))),CampaignShipping_1=__importDefault(require(a369_0x28942a(0x1b4))),queues_1=require(a369_0x28942a(0x1a9));async function CancelService(_0x2a902c){const _0x3e8691=a369_0x28942a,_0x18bfa3=await Campaign_1[_0x3e8691(0x1a6)][_0x3e8691(0x1af)](_0x2a902c);await _0x18bfa3[_0x3e8691(0x1ad)]({'status':_0x3e8691(0x1a3)});const _0x539f04=await CampaignShipping_1[_0x3e8691(0x1a6)][_0x3e8691(0x1b3)]({'where':{'campaignId':_0x18bfa3['id'],'jobId':{[sequelize_1['Op'][_0x3e8691(0x1a5)]]:null},'deliveredAt':null}}),_0x3fbc2e=[];for(let _0x3e9105 of _0x539f04){const _0x447823=await queues_1['campaignQueue'][_0x3e8691(0x1a4)](+_0x3e9105[_0x3e8691(0x1b2)]);_0x3fbc2e[_0x3e8691(0x1b6)](_0x447823[_0x3e8691(0x1a1)]());}await Promise['all'](_0x3fbc2e);}exports[a369_0x28942a(0x1b9)]=CancelService;