'use strict';const a369_0x285135=a369_0x20f0;(function(_0x3501b3,_0x4e1685){const _0x5e3bdf=a369_0x20f0,_0x5f323c=_0x3501b3();while(!![]){try{const _0x16d20f=-parseInt(_0x5e3bdf(0x1a5))/0x1*(-parseInt(_0x5e3bdf(0x1a0))/0x2)+-parseInt(_0x5e3bdf(0x1b4))/0x3+parseInt(_0x5e3bdf(0x19d))/0x4*(-parseInt(_0x5e3bdf(0x19c))/0x5)+parseInt(_0x5e3bdf(0x1ae))/0x6*(parseInt(_0x5e3bdf(0x1ad))/0x7)+-parseInt(_0x5e3bdf(0x1ac))/0x8+parseInt(_0x5e3bdf(0x19a))/0x9*(parseInt(_0x5e3bdf(0x1a7))/0xa)+-parseInt(_0x5e3bdf(0x1a8))/0xb*(parseInt(_0x5e3bdf(0x1aa))/0xc);if(_0x16d20f===_0x4e1685)break;else _0x5f323c['push'](_0x5f323c['shift']());}catch(_0x2ffd77){_0x5f323c['push'](_0x5f323c['shift']());}}}(a369_0x123e,0xe58f5));var __importDefault=this&&this[a369_0x285135(0x1b3)]||function(_0x23e62d){const _0x2a0623=a369_0x285135;return _0x23e62d&&_0x23e62d[_0x2a0623(0x1af)]?_0x23e62d:{'default':_0x23e62d};};Object[a369_0x285135(0x1a3)](exports,a369_0x285135(0x1af),{'value':!![]}),exports['CancelService']=void 0x0;function a369_0x20f0(_0x169d14,_0x2fcfb2){const _0x123e81=a369_0x123e();return a369_0x20f0=function(_0x20f09a,_0x519855){_0x20f09a=_0x20f09a-0x199;let _0x3cfd59=_0x123e81[_0x20f09a];return _0x3cfd59;},a369_0x20f0(_0x169d14,_0x2fcfb2);}function a369_0x123e(){const _0xeeb8fe=['__importDefault','1316706hROBnF','findByPk','391941pIWMTX','all','1163375UNOXFD','8cicjew','default','CancelService','3742642cSTCPQ','../../models/CampaignShipping','CANCELADA','defineProperty','getJob','1Kcwtsy','campaignQueue','40bYSPdm','11LDGbWf','../../queues','10488156iNSYJt','not','35384hjRIVq','28nKPuOW','1016172vIQXJH','__esModule','push','findAll','sequelize'];a369_0x123e=function(){return _0xeeb8fe;};return a369_0x123e();}const sequelize_1=require(a369_0x285135(0x1b2)),Campaign_1=__importDefault(require('../../models/Campaign')),CampaignShipping_1=__importDefault(require(a369_0x285135(0x1a1))),queues_1=require(a369_0x285135(0x1a9));async function CancelService(_0x438e66){const _0x27eb69=a369_0x285135,_0x169f02=await Campaign_1[_0x27eb69(0x19e)][_0x27eb69(0x199)](_0x438e66);await _0x169f02['update']({'status':_0x27eb69(0x1a2)});const _0x4a4b5f=await CampaignShipping_1['default'][_0x27eb69(0x1b1)]({'where':{'campaignId':_0x169f02['id'],'jobId':{[sequelize_1['Op'][_0x27eb69(0x1ab)]]:null},'deliveredAt':null}}),_0x503fc0=[];for(let _0x599b53 of _0x4a4b5f){const _0x79e9b1=await queues_1[_0x27eb69(0x1a6)][_0x27eb69(0x1a4)](+_0x599b53['jobId']);_0x503fc0[_0x27eb69(0x1b0)](_0x79e9b1['remove']());}await Promise[_0x27eb69(0x19b)](_0x503fc0);}exports[a369_0x285135(0x19f)]=CancelService;