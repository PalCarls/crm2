'use strict';const a568_0x54d0ce=a568_0x3dd5;(function(_0x50673a,_0x4fe26f){const _0xefd357=a568_0x3dd5,_0xed8e0c=_0x50673a();while(!![]){try{const _0x314242=parseInt(_0xefd357(0x1d7))/0x1*(parseInt(_0xefd357(0x1df))/0x2)+parseInt(_0xefd357(0x1d8))/0x3+-parseInt(_0xefd357(0x1e4))/0x4+parseInt(_0xefd357(0x1d9))/0x5+-parseInt(_0xefd357(0x1e8))/0x6*(-parseInt(_0xefd357(0x1e5))/0x7)+parseInt(_0xefd357(0x1e6))/0x8+-parseInt(_0xefd357(0x1dc))/0x9;if(_0x314242===_0x4fe26f)break;else _0xed8e0c['push'](_0xed8e0c['shift']());}catch(_0x5cfd36){_0xed8e0c['push'](_0xed8e0c['shift']());}}}(a568_0x3a06,0x9ed50));var __importDefault=this&&this[a568_0x54d0ce(0x1de)]||function(_0x3ae954){const _0xbc4f26=a568_0x54d0ce;return _0x3ae954&&_0x3ae954[_0xbc4f26(0x1e7)]?_0x3ae954:{'default':_0x3ae954};};Object[a568_0x54d0ce(0x1e2)](exports,a568_0x54d0ce(0x1e7),{'value':!![]});const sequelize_1=require('sequelize'),database_1=__importDefault(require(a568_0x54d0ce(0x1da))),query='\x0a\x20\x20select\x20dt_ref,\x20to_char(dt_ref,\x20\x27DD/MM/YYYY\x27)\x20dt_referencia\x20,\x20label,\x20qtd,\x20ROUND(100.0*(qtd/sum(qtd)\x20over\x20()),\x202)\x20pertentual\x20\x20from\x20(\x0a\x20\x20select\x0a\x20\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20dt_ref,\x0a\x20\x20--to_char(date_trunc(\x27day\x27,\x20t.\x22createdAt\x22),\x20\x27DD/MM/YYYY\x27)\x20,\x0a\x20\x20t.channel\x20as\x20label,\x0a\x20\x20count(1)\x20as\x20qtd\x0a\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20INNER\x20JOIN\x20\x22LogTickets\x22\x20lt\x20ON\x20lt.\x22ticketId\x22\x20=\x20t.\x22id\x22\x0a\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x20\x20AND\x20lt.\x22userId\x22\x20=\x20:userId\x0a\x20\x20and\x20(lt.\x22type\x22\x20LIKE\x20\x27open\x27\x20OR\x20lt.\x22type\x22\x20LIKE\x20\x27receivedTransfer\x27)\x0a\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20group\x20by\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22),\x20t.channel\x0a\x20\x20)\x20a\x0a\x20\x20order\x20by\x201\x0a',queryAdmin=a568_0x54d0ce(0x1e0),DashTicketsEvolutionChannels=async({startDate:_0x994b70,endDate:_0x2e4df7,companyId:_0x1363a1,userId:_0x529c34,userProfile:_0x9373e2})=>{const _0xd2bc84=a568_0x54d0ce,_0xa2df86=await database_1[_0xd2bc84(0x1dd)][_0xd2bc84(0x1db)](_0x9373e2==_0xd2bc84(0x1e3)?queryAdmin:query,{'replacements':{'companyId':_0x1363a1,'startDate':_0x994b70,'endDate':_0x2e4df7,'userId':_0x529c34},'type':sequelize_1[_0xd2bc84(0x1e1)]['SELECT']});return _0xa2df86;};function a568_0x3a06(){const _0x27ce49=['defineProperty','admin','2525432SDalTQ','5411273cZXQcQ','2781104dsmpcd','__esModule','6uoRWgQ','131fnmsUq','747330aXxXQC','2363160ZgAoHC','../../database','query','9425529mJYzHU','default','__importDefault','7432pvajqx','\x0a\x20\x20select\x20dt_ref,\x20to_char(dt_ref,\x20\x27DD/MM/YYYY\x27)\x20dt_referencia\x20,\x20label,\x20qtd,\x20ROUND(100.0*(qtd/sum(qtd)\x20over\x20()),\x202)\x20pertentual\x20\x20from\x20(\x0a\x20\x20select\x0a\x20\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20dt_ref,\x0a\x20\x20--to_char(date_trunc(\x27day\x27,\x20t.\x22createdAt\x22),\x20\x27DD/MM/YYYY\x27)\x20,\x0a\x20\x20t.channel\x20as\x20label,\x0a\x20\x20count(1)\x20as\x20qtd\x0a\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20INNER\x20JOIN\x20\x22LogTickets\x22\x20lt\x20ON\x20lt.\x22ticketId\x22\x20=\x20t.\x22id\x22\x0a\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20and\x20(lt.\x22type\x22\x20LIKE\x20\x27open\x27\x20OR\x20lt.\x22type\x22\x20LIKE\x20\x27receivedTransfer\x27)\x0a\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20group\x20by\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22),\x20t.channel\x0a\x20\x20)\x20a\x0a\x20\x20order\x20by\x201\x0a','QueryTypes'];a568_0x3a06=function(){return _0x27ce49;};return a568_0x3a06();}function a568_0x3dd5(_0x3346a2,_0xe4c41e){const _0x3a0603=a568_0x3a06();return a568_0x3dd5=function(_0x3dd52e,_0x22b6d5){_0x3dd52e=_0x3dd52e-0x1d7;let _0x586d30=_0x3a0603[_0x3dd52e];return _0x586d30;},a568_0x3dd5(_0x3346a2,_0xe4c41e);}exports['default']=DashTicketsEvolutionChannels;