'use strict';function a567_0x2627(){const _0x4f2355=['41061gACFqN','default','sequelize','SELECT','__esModule','\x0a\x20\x20select\x0a\x20\x20dt_ref,\x0a\x20\x20to_char(dt_ref,\x20\x27DD/MM/YYYY\x27)\x20as\x20label,\x0a\x20\x20qtd\x0a\x20\x20--ROUND(100.0*(qtd/sum(qtd)\x20over\x20()),\x202)\x20pertentual\x0a\x20\x20from\x20(\x0a\x20\x20select\x0a\x20\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20dt_ref,\x0a\x20\x20count(1)\x20as\x20qtd\x0a\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20INNER\x20JOIN\x20\x22LogTickets\x22\x20lt\x20ON\x20lt.\x22ticketId\x22\x20=\x20t.\x22id\x22\x0a\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x20and\x20lt.\x22userId\x22\x20=\x20:userId\x0a\x20\x20and\x20(lt.\x22type\x22\x20LIKE\x20\x27open\x27\x20OR\x20lt.\x22type\x22\x20LIKE\x20\x27receivedTransfer\x27)\x0a\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20group\x20by\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x0a\x20\x20)\x20a\x0a\x20\x20order\x20by\x201\x0a','../../database','4220052OdApcL','__importDefault','50agvkma','query','1905WpmTDT','1316798ekKevK','6088008sTxmzv','3396845KCtBaA','19438902CfcQVM','admin','1712tIyPhM'];a567_0x2627=function(){return _0x4f2355;};return a567_0x2627();}function a567_0x34f6(_0x2db0a5,_0x306fb0){const _0x2627d5=a567_0x2627();return a567_0x34f6=function(_0x34f6ef,_0x54cd14){_0x34f6ef=_0x34f6ef-0xf8;let _0x1a928b=_0x2627d5[_0x34f6ef];return _0x1a928b;},a567_0x34f6(_0x2db0a5,_0x306fb0);}const a567_0x784b2=a567_0x34f6;(function(_0x16c1ac,_0x86b729){const _0x4ebaad=a567_0x34f6,_0x231695=_0x16c1ac();while(!![]){try{const _0x2c1caa=-parseInt(_0x4ebaad(0x108))/0x1*(-parseInt(_0x4ebaad(0xff))/0x2)+-parseInt(_0x4ebaad(0x101))/0x3*(parseInt(_0x4ebaad(0x107))/0x4)+-parseInt(_0x4ebaad(0x104))/0x5+-parseInt(_0x4ebaad(0xfd))/0x6+parseInt(_0x4ebaad(0x102))/0x7+-parseInt(_0x4ebaad(0x103))/0x8+parseInt(_0x4ebaad(0x105))/0x9;if(_0x2c1caa===_0x86b729)break;else _0x231695['push'](_0x231695['shift']());}catch(_0x659a33){_0x231695['push'](_0x231695['shift']());}}}(a567_0x2627,0xea231));var __importDefault=this&&this[a567_0x784b2(0xfe)]||function(_0x15b10d){const _0x210209=a567_0x784b2;return _0x15b10d&&_0x15b10d[_0x210209(0xfa)]?_0x15b10d:{'default':_0x15b10d};};Object['defineProperty'](exports,a567_0x784b2(0xfa),{'value':!![]});const sequelize_1=require(a567_0x784b2(0xf8)),database_1=__importDefault(require(a567_0x784b2(0xfc))),queryAdmin='\x0a\x20\x20select\x0a\x20\x20dt_ref,\x0a\x20\x20to_char(dt_ref,\x20\x27DD/MM/YYYY\x27)\x20as\x20label,\x0a\x20\x20qtd\x0a\x20\x20--ROUND(100.0*(qtd/sum(qtd)\x20over\x20()),\x202)\x20pertentual\x0a\x20\x20from\x20(\x0a\x20\x20select\x0a\x20\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20dt_ref,\x0a\x20\x20count(1)\x20as\x20qtd\x0a\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20INNER\x20JOIN\x20\x22LogTickets\x22\x20lt\x20ON\x20lt.\x22ticketId\x22\x20=\x20t.\x22id\x22\x0a\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20and\x20(lt.\x22type\x22\x20LIKE\x20\x27open\x27\x20OR\x20lt.\x22type\x22\x20LIKE\x20\x27receivedTransfer\x27)\x0a\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20group\x20by\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x0a\x20\x20)\x20a\x0a\x20\x20order\x20by\x201\x0a',query=a567_0x784b2(0xfb),DashTicketsEvolutionByPeriod=async({startDate:_0x11653e,endDate:_0x80aa12,companyId:_0x3c287a,userId:_0x36c88f,userProfile:_0x45d4e3})=>{const _0x49ff7c=a567_0x784b2,_0x1372c6=await database_1[_0x49ff7c(0x109)][_0x49ff7c(0x100)](_0x45d4e3==_0x49ff7c(0x106)?queryAdmin:query,{'replacements':{'companyId':_0x3c287a,'startDate':_0x11653e,'endDate':_0x80aa12,'userId':_0x36c88f},'type':sequelize_1['QueryTypes'][_0x49ff7c(0xf9)]});return _0x1372c6;};exports['default']=DashTicketsEvolutionByPeriod;