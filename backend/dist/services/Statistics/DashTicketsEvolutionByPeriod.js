'use strict';const a567_0x1b2e85=a567_0x14ef;function a567_0x14ef(_0x14e086,_0xa7d21){const _0xf96de9=a567_0xf96d();return a567_0x14ef=function(_0x14ef83,_0x395be8){_0x14ef83=_0x14ef83-0x126;let _0x522a72=_0xf96de9[_0x14ef83];return _0x522a72;},a567_0x14ef(_0x14e086,_0xa7d21);}function a567_0xf96d(){const _0x4f3872=['8BxTHpi','20QJiEOa','1837gwRGvR','84624faoFmF','207265cnfOsg','3661860QVpkEI','__importDefault','\x0a\x20\x20select\x0a\x20\x20dt_ref,\x0a\x20\x20to_char(dt_ref,\x20\x27DD/MM/YYYY\x27)\x20as\x20label,\x0a\x20\x20qtd\x0a\x20\x20--ROUND(100.0*(qtd/sum(qtd)\x20over\x20()),\x202)\x20pertentual\x0a\x20\x20from\x20(\x0a\x20\x20select\x0a\x20\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20dt_ref,\x0a\x20\x20count(1)\x20as\x20qtd\x0a\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20INNER\x20JOIN\x20\x22LogTickets\x22\x20lt\x20ON\x20lt.\x22ticketId\x22\x20=\x20t.\x22id\x22\x0a\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20and\x20(lt.\x22type\x22\x20LIKE\x20\x27open\x27\x20OR\x20lt.\x22type\x22\x20LIKE\x20\x27receivedTransfer\x27)\x0a\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20group\x20by\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x0a\x20\x20)\x20a\x0a\x20\x20order\x20by\x201\x0a','4hvmyGY','39850DAxleP','defineProperty','SELECT','QueryTypes','default','admin','1512IPfRXz','10895227jOLZyb','\x0a\x20\x20select\x0a\x20\x20dt_ref,\x0a\x20\x20to_char(dt_ref,\x20\x27DD/MM/YYYY\x27)\x20as\x20label,\x0a\x20\x20qtd\x0a\x20\x20--ROUND(100.0*(qtd/sum(qtd)\x20over\x20()),\x202)\x20pertentual\x0a\x20\x20from\x20(\x0a\x20\x20select\x0a\x20\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20dt_ref,\x0a\x20\x20count(1)\x20as\x20qtd\x0a\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20INNER\x20JOIN\x20\x22LogTickets\x22\x20lt\x20ON\x20lt.\x22ticketId\x22\x20=\x20t.\x22id\x22\x0a\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x20and\x20lt.\x22userId\x22\x20=\x20:userId\x0a\x20\x20and\x20(lt.\x22type\x22\x20LIKE\x20\x27open\x27\x20OR\x20lt.\x22type\x22\x20LIKE\x20\x27receivedTransfer\x27)\x0a\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20group\x20by\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x0a\x20\x20)\x20a\x0a\x20\x20order\x20by\x201\x0a','2242752jInhQY','59184HRJvic'];a567_0xf96d=function(){return _0x4f3872;};return a567_0xf96d();}(function(_0x58645c,_0x308d12){const _0x1ea5b2=a567_0x14ef,_0x4fe4e5=_0x58645c();while(!![]){try{const _0x293b50=parseInt(_0x1ea5b2(0x129))/0x1*(-parseInt(_0x1ea5b2(0x12d))/0x2)+-parseInt(_0x1ea5b2(0x137))/0x3+parseInt(_0x1ea5b2(0x128))/0x4*(parseInt(_0x1ea5b2(0x126))/0x5)+parseInt(_0x1ea5b2(0x12a))/0x6+-parseInt(_0x1ea5b2(0x135))/0x7*(-parseInt(_0x1ea5b2(0x139))/0x8)+-parseInt(_0x1ea5b2(0x134))/0x9*(-parseInt(_0x1ea5b2(0x12e))/0xa)+-parseInt(_0x1ea5b2(0x127))/0xb*(parseInt(_0x1ea5b2(0x138))/0xc);if(_0x293b50===_0x308d12)break;else _0x4fe4e5['push'](_0x4fe4e5['shift']());}catch(_0x35c650){_0x4fe4e5['push'](_0x4fe4e5['shift']());}}}(a567_0xf96d,0xe44cd));var __importDefault=this&&this[a567_0x1b2e85(0x12b)]||function(_0x53f826){return _0x53f826&&_0x53f826['__esModule']?_0x53f826:{'default':_0x53f826};};Object[a567_0x1b2e85(0x12f)](exports,'__esModule',{'value':!![]});const sequelize_1=require('sequelize'),database_1=__importDefault(require('../../database')),queryAdmin=a567_0x1b2e85(0x12c),query=a567_0x1b2e85(0x136),DashTicketsEvolutionByPeriod=async({startDate:_0x16bc4e,endDate:_0x1748b0,companyId:_0x5acbcf,userId:_0x24b7d7,userProfile:_0x2ea094})=>{const _0x9ff409=a567_0x1b2e85,_0x3f0a30=await database_1[_0x9ff409(0x132)]['query'](_0x2ea094==_0x9ff409(0x133)?queryAdmin:query,{'replacements':{'companyId':_0x5acbcf,'startDate':_0x16bc4e,'endDate':_0x1748b0,'userId':_0x24b7d7},'type':sequelize_1[_0x9ff409(0x131)][_0x9ff409(0x130)]});return _0x3f0a30;};exports['default']=DashTicketsEvolutionByPeriod;