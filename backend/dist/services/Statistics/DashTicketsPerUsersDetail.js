'use strict';const a569_0x5a875d=a569_0x5446;function a569_0x3e67(){const _0xec0104=['7155516GaYvQB','admin','741708cIqAdn','117981SBqrpC','\x0a\x20\x20\x20\x20select\x0a\x20\x20\x20\x20distinct(email),\x0a\x20\x20\x20\x20name,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27open\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_em_atendimento,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27pending\x27)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_pendentes,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27closed\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_resolvidos,\x0a\x20\x20\x20\x20count(*)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_por_usuario,\x0a\x20\x20\x20\x20--ROUND(MIN(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20menor_tma,\x0a\x20\x20\x20\x20--ROUND(MAX(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20maior_tma,\x0a\x20\x20\x20\x20concat(coalesce(ROUND(AVG(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200),\x200),\x20\x27minutes\x27)::interval\x20tma,\x0a\x20\x20\x20\x20--ROUND(MIN(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20menor_tme,\x0a\x20\x20\x20\x20--ROUND(MAX(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20maior_tme,\x0a\x20\x20\x20\x20concat(coalesce(ROUND(AVG(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200),\x200),\x20\x27minutes\x27)::interval\x20tme\x0a\x20\x20\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20\x20\x20left\x20join\x20\x22Users\x22\x20u\x20on\x20t.\x22userId\x22\x20=\x20\x22u\x22.\x22id\x22\x0a\x20\x20\x20\x20left\x20join\x20\x22Queues\x22\x20q\x20on\x20q.id\x20\x20=\x20t.\x22queueId\x22\x0a\x20\x20\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20\x20\x20order\x20by\x206\x20Desc\x0a','SELECT','1379BvWaeM','12864MCbFAi','1644420ypxoUV','QueryTypes','11RGFutz','../../database','608875uILACm','__esModule','__importDefault','\x0a\x20\x20\x20\x20select\x0a\x20\x20\x20\x20distinct(email),\x0a\x20\x20\x20\x20name,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27open\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_em_atendimento,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27pending\x27)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_pendentes,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27closed\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_resolvidos,\x0a\x20\x20\x20\x20count(*)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_por_usuario,\x0a\x20\x20\x20\x20--ROUND(MIN(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20menor_tma,\x0a\x20\x20\x20\x20--ROUND(MAX(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20maior_tma,\x0a\x20\x20\x20\x20concat(coalesce(ROUND(AVG(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200),\x200),\x20\x27minutes\x27)::interval\x20tma,\x0a\x20\x20\x20\x20--ROUND(MIN(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20menor_tme,\x0a\x20\x20\x20\x20--ROUND(MAX(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20maior_tme,\x0a\x20\x20\x20\x20concat(coalesce(ROUND(AVG(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200),\x200),\x20\x27minutes\x27)::interval\x20tme\x0a\x20\x20\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20\x20\x20left\x20join\x20\x22Users\x22\x20u\x20on\x20t.\x22userId\x22\x20=\x20\x22u\x22.\x22id\x22\x0a\x20\x20\x20\x20left\x20join\x20\x22Queues\x22\x20q\x20on\x20q.id\x20\x20=\x20t.\x22queueId\x22\x0a\x20\x20\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x20\x20AND\x20t.\x22userId\x22\x20=\x20:userId\x0a\x20\x20\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20\x20\x20order\x20by\x206\x20Desc\x0a','32JukWEY','4530vUAFJF','query','4zNocLg','40VHmmxg'];a569_0x3e67=function(){return _0xec0104;};return a569_0x3e67();}(function(_0x3069a8,_0xa9d5e5){const _0x511078=a569_0x5446,_0x280b14=_0x3069a8();while(!![]){try{const _0x1942ff=parseInt(_0x511078(0x101))/0x1*(-parseInt(_0x511078(0x10d))/0x2)+parseInt(_0x511078(0x108))/0x3+-parseInt(_0x511078(0x104))/0x4*(parseInt(_0x511078(0x112))/0x5)+-parseInt(_0x511078(0x102))/0x6*(parseInt(_0x511078(0x10c))/0x7)+-parseInt(_0x511078(0x105))/0x8*(parseInt(_0x511078(0x109))/0x9)+-parseInt(_0x511078(0x10e))/0xa*(parseInt(_0x511078(0x110))/0xb)+parseInt(_0x511078(0x106))/0xc;if(_0x1942ff===_0xa9d5e5)break;else _0x280b14['push'](_0x280b14['shift']());}catch(_0x473f42){_0x280b14['push'](_0x280b14['shift']());}}}(a569_0x3e67,0x217f8));function a569_0x5446(_0x419dbd,_0x27ad5a){const _0x3e676a=a569_0x3e67();return a569_0x5446=function(_0x544661,_0x1e7de6){_0x544661=_0x544661-0x100;let _0x5e3386=_0x3e676a[_0x544661];return _0x5e3386;},a569_0x5446(_0x419dbd,_0x27ad5a);}var __importDefault=this&&this[a569_0x5a875d(0x114)]||function(_0x374031){const _0x5cfe57=a569_0x5a875d;return _0x374031&&_0x374031[_0x5cfe57(0x113)]?_0x374031:{'default':_0x374031};};Object['defineProperty'](exports,a569_0x5a875d(0x113),{'value':!![]});const sequelize_1=require('sequelize'),database_1=__importDefault(require(a569_0x5a875d(0x111))),query=a569_0x5a875d(0x100),queryAdmin=a569_0x5a875d(0x10a),DashTicketsPerUsersDetail=async({startDate:_0x2dad7a,endDate:_0x4940ee,companyId:_0x3410e8,userId:_0x447189,userProfile:_0x47e9e1})=>{const _0x2457dd=a569_0x5a875d,_0x3d2a7c=await database_1['default'][_0x2457dd(0x103)](_0x47e9e1==_0x2457dd(0x107)?queryAdmin:query,{'replacements':{'companyId':_0x3410e8,'startDate':_0x2dad7a,'endDate':_0x4940ee,'userId':_0x447189},'type':sequelize_1[_0x2457dd(0x10f)][_0x2457dd(0x10b)]});return _0x3d2a7c;};exports['default']=DashTicketsPerUsersDetail;