'use strict';const a558_0x17e14b=a558_0x2573;(function(_0x3eefd1,_0x3adf29){const _0x4c5ec1=a558_0x2573,_0x1b7a16=_0x3eefd1();while(!![]){try{const _0x5f0c67=-parseInt(_0x4c5ec1(0x82))/0x1*(-parseInt(_0x4c5ec1(0x78))/0x2)+parseInt(_0x4c5ec1(0x7d))/0x3*(parseInt(_0x4c5ec1(0x89))/0x4)+-parseInt(_0x4c5ec1(0x84))/0x5*(-parseInt(_0x4c5ec1(0x76))/0x6)+parseInt(_0x4c5ec1(0x87))/0x7+-parseInt(_0x4c5ec1(0x83))/0x8+-parseInt(_0x4c5ec1(0x81))/0x9*(parseInt(_0x4c5ec1(0x7e))/0xa)+parseInt(_0x4c5ec1(0x79))/0xb*(-parseInt(_0x4c5ec1(0x74))/0xc);if(_0x5f0c67===_0x3adf29)break;else _0x1b7a16['push'](_0x1b7a16['shift']());}catch(_0x573ff8){_0x1b7a16['push'](_0x1b7a16['shift']());}}}(a558_0x1787,0x29193));function a558_0x2573(_0x2cb1a1,_0x55752b){const _0x178772=a558_0x1787();return a558_0x2573=function(_0x2573f5,_0x2a4a03){_0x2573f5=_0x2573f5-0x74;let _0x4448ab=_0x178772[_0x2573f5];return _0x4448ab;},a558_0x2573(_0x2cb1a1,_0x55752b);}var __importDefault=this&&this[a558_0x17e14b(0x7c)]||function(_0x3236f0){return _0x3236f0&&_0x3236f0['__esModule']?_0x3236f0:{'default':_0x3236f0};};Object[a558_0x17e14b(0x7b)](exports,'__esModule',{'value':!![]});function a558_0x1787(){const _0x1e9fd9=['default','\x0a\x20\x20\x20\x20select\x0a\x20\x20\x20\x20distinct(email),\x0a\x20\x20\x20\x20name,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27open\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_em_atendimento,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27pending\x27)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_pendentes,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27closed\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_resolvidos,\x0a\x20\x20\x20\x20count(*)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_por_usuario,\x0a\x20\x20\x20\x20--ROUND(MIN(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20menor_tma,\x0a\x20\x20\x20\x20--ROUND(MAX(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20maior_tma,\x0a\x20\x20\x20\x20concat(coalesce(ROUND(AVG(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200),\x200),\x20\x27minutes\x27)::interval\x20tma,\x0a\x20\x20\x20\x20--ROUND(MIN(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20menor_tme,\x0a\x20\x20\x20\x20--ROUND(MAX(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20maior_tme,\x0a\x20\x20\x20\x20concat(coalesce(ROUND(AVG(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200),\x200),\x20\x27minutes\x27)::interval\x20tme\x0a\x20\x20\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20\x20\x20left\x20join\x20\x22Users\x22\x20u\x20on\x20t.\x22userId\x22\x20=\x20\x22u\x22.\x22id\x22\x0a\x20\x20\x20\x20left\x20join\x20\x22Queues\x22\x20q\x20on\x20q.id\x20\x20=\x20t.\x22queueId\x22\x0a\x20\x20\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20\x20\x20order\x20by\x206\x20Desc\x0a','862398eSuRlw','21682BzxCHm','2602584cesFMj','790YbmDvS','QueryTypes','query','1827721uQiKkx','sequelize','1636YuEGKW','3330384MDfalP','admin','10932cofljb','\x0a\x20\x20\x20\x20select\x0a\x20\x20\x20\x20distinct(email),\x0a\x20\x20\x20\x20name,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27open\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_em_atendimento,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27pending\x27)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_pendentes,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27closed\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_resolvidos,\x0a\x20\x20\x20\x20count(*)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_por_usuario,\x0a\x20\x20\x20\x20--ROUND(MIN(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20menor_tma,\x0a\x20\x20\x20\x20--ROUND(MAX(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20maior_tma,\x0a\x20\x20\x20\x20concat(coalesce(ROUND(AVG(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200),\x200),\x20\x27minutes\x27)::interval\x20tma,\x0a\x20\x20\x20\x20--ROUND(MIN(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20menor_tme,\x0a\x20\x20\x20\x20--ROUND(MAX(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200)\x20maior_tme,\x0a\x20\x20\x20\x20concat(coalesce(ROUND(AVG(extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60)\x20OVER\x20(PARTITION\x20by\x20email)::decimal,\x200),\x200),\x20\x27minutes\x27)::interval\x20tme\x0a\x20\x20\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20\x20\x20left\x20join\x20\x22Users\x22\x20u\x20on\x20t.\x22userId\x22\x20=\x20\x22u\x22.\x22id\x22\x0a\x20\x20\x20\x20left\x20join\x20\x22Queues\x22\x20q\x20on\x20q.id\x20\x20=\x20t.\x22queueId\x22\x0a\x20\x20\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x20\x20AND\x20t.\x22userId\x22\x20=\x20:userId\x0a\x20\x20\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20\x20\x20order\x20by\x206\x20Desc\x0a','26QMdXpe','22wfBOXT','../../database','defineProperty','__importDefault','2301AoTXWr','10rCPusd'];a558_0x1787=function(){return _0x1e9fd9;};return a558_0x1787();}const sequelize_1=require(a558_0x17e14b(0x88)),database_1=__importDefault(require(a558_0x17e14b(0x7a))),query=a558_0x17e14b(0x77),queryAdmin=a558_0x17e14b(0x80),DashTicketsPerUsersDetail=async({startDate:_0x3a3b55,endDate:_0x135b0c,companyId:_0x52d8ed,userId:_0x8c8843,userProfile:_0x45a54f})=>{const _0x1c6206=a558_0x17e14b,_0x2ce544=await database_1[_0x1c6206(0x7f)][_0x1c6206(0x86)](_0x45a54f==_0x1c6206(0x75)?queryAdmin:query,{'replacements':{'companyId':_0x52d8ed,'startDate':_0x3a3b55,'endDate':_0x135b0c,'userId':_0x8c8843},'type':sequelize_1[_0x1c6206(0x85)]['SELECT']});return _0x2ce544;};exports[a558_0x17e14b(0x7f)]=DashTicketsPerUsersDetail;