'use strict';const a571_0x2c2bf0=a571_0x53eb;(function(_0x5b03c3,_0x5a61de){const _0xd8e335=a571_0x53eb,_0x53ad40=_0x5b03c3();while(!![]){try{const _0x21211f=-parseInt(_0xd8e335(0x184))/0x1*(-parseInt(_0xd8e335(0x18b))/0x2)+-parseInt(_0xd8e335(0x188))/0x3+-parseInt(_0xd8e335(0x185))/0x4+parseInt(_0xd8e335(0x192))/0x5*(parseInt(_0xd8e335(0x18c))/0x6)+parseInt(_0xd8e335(0x18f))/0x7+-parseInt(_0xd8e335(0x183))/0x8+-parseInt(_0xd8e335(0x190))/0x9*(-parseInt(_0xd8e335(0x181))/0xa);if(_0x21211f===_0x5a61de)break;else _0x53ad40['push'](_0x53ad40['shift']());}catch(_0x199f8e){_0x53ad40['push'](_0x53ad40['shift']());}}}(a571_0x55f5,0x699e0));var __importDefault=this&&this[a571_0x2c2bf0(0x18e)]||function(_0x315ba8){const _0x446f7d=a571_0x2c2bf0;return _0x315ba8&&_0x315ba8[_0x446f7d(0x182)]?_0x315ba8:{'default':_0x315ba8};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const sequelize_1=require(a571_0x2c2bf0(0x18d)),database_1=__importDefault(require(a571_0x2c2bf0(0x187))),query='\x0a\x20\x20\x20\x20select\x0a\x20\x20\x20\x20distinct(email),\x0a\x20\x20\x20\x20name,\x0a\x20\x20\x20\x20--,\x20email,)\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27open\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_em_atendimento,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27pending\x27)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_pendentes,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27closed\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_resolvidos,\x0a\x20\x20\x20\x20count(*)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_por_usuario,\x0a\x20\x20\x20\x20min((DATE_PART(\x27day\x27,\x20\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000))\x20*\x2024\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27hour\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20*\x2060\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27minute\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20menor_tempo_por_usuario,\x0a\x20\x20\x20\x20max((DATE_PART(\x27day\x27,\x20\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000))\x20*\x2024\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27hour\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20*\x2060\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27minute\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20maior_tempo_por_usuario,\x0a\x20\x20\x20\x20avg((DATE_PART(\x27day\x27,\x20\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000))\x20*\x2024\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27hour\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20*\x2060\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27minute\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20OVER\x20(PARTITION\x20by\x20email)\x20\x20as\x20tempo_medio_por_usuario\x0a\x20\x20\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20\x20\x20left\x20join\x20\x22Users\x22\x20u\x20on\x20t.\x22userId\x22\x20=\x20\x22u\x22.\x22id\x22\x0a\x20\x20\x20\x20left\x20join\x20\x22Queues\x22\x20q\x20on\x20q.id\x20\x20=\x20t.\x22queueId\x22\x0a\x20\x20\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20\x20\x20order\x20by\x206\x20Desc\x0a',StatisticsPerUser=async({startDate:_0x4ead7f,endDate:_0x1ff550,companyId:_0x2e9663})=>{const _0x7ab22e=a571_0x2c2bf0,_0x54ce38=await database_1[_0x7ab22e(0x186)][_0x7ab22e(0x189)](query,{'replacements':{'companyId':_0x2e9663,'startDate':_0x4ead7f,'endDate':_0x1ff550},'type':sequelize_1[_0x7ab22e(0x191)][_0x7ab22e(0x18a)]});return _0x54ce38;};function a571_0x55f5(){const _0xe72fb4=['__importDefault','583212zbnJvG','16587rFaWWO','QueryTypes','5tEUlKV','4280fSDfEL','__esModule','5667136rVyulZ','236955ZxITlv','270780wOpGLc','default','../../database','1038528HqTOIQ','query','SELECT','2uFqnvY','2674776hPaOsY','sequelize'];a571_0x55f5=function(){return _0xe72fb4;};return a571_0x55f5();}function a571_0x53eb(_0x44366b,_0x1592ff){const _0x55f5f7=a571_0x55f5();return a571_0x53eb=function(_0x53ebbb,_0x3119f9){_0x53ebbb=_0x53ebbb-0x181;let _0x2e42e1=_0x55f5f7[_0x53ebbb];return _0x2e42e1;},a571_0x53eb(_0x44366b,_0x1592ff);}exports[a571_0x2c2bf0(0x186)]=StatisticsPerUser;