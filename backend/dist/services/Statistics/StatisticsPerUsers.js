'use strict';const a578_0x553e31=a578_0x1020;function a578_0x1020(_0x130756,_0x35a308){const _0x436894=a578_0x4368();return a578_0x1020=function(_0x1020c7,_0x737c52){_0x1020c7=_0x1020c7-0xec;let _0x486134=_0x436894[_0x1020c7];return _0x486134;},a578_0x1020(_0x130756,_0x35a308);}(function(_0x297f5b,_0x31c528){const _0x1b24a0=a578_0x1020,_0x230c4e=_0x297f5b();while(!![]){try{const _0x4bb026=-parseInt(_0x1b24a0(0xf7))/0x1*(parseInt(_0x1b24a0(0xf4))/0x2)+parseInt(_0x1b24a0(0xff))/0x3+-parseInt(_0x1b24a0(0xf6))/0x4*(parseInt(_0x1b24a0(0x101))/0x5)+parseInt(_0x1b24a0(0xf3))/0x6*(-parseInt(_0x1b24a0(0xec))/0x7)+parseInt(_0x1b24a0(0xed))/0x8*(-parseInt(_0x1b24a0(0xee))/0x9)+-parseInt(_0x1b24a0(0xfc))/0xa*(parseInt(_0x1b24a0(0xf1))/0xb)+parseInt(_0x1b24a0(0xfb))/0xc*(parseInt(_0x1b24a0(0xfe))/0xd);if(_0x4bb026===_0x31c528)break;else _0x230c4e['push'](_0x230c4e['shift']());}catch(_0x83172f){_0x230c4e['push'](_0x230c4e['shift']());}}}(a578_0x4368,0xbb2f8));var __importDefault=this&&this['__importDefault']||function(_0x3cdce0){const _0x3c4b28=a578_0x1020;return _0x3cdce0&&_0x3cdce0[_0x3c4b28(0xf8)]?_0x3cdce0:{'default':_0x3cdce0};};function a578_0x4368(){const _0x29df03=['__esModule','QueryTypes','SELECT','1444404TFXXDN','1586180vWbIyr','sequelize','403jQZnpL','2699406paLsfC','../../database','445CRYxwh','7IRZZCx','8509560uzjjEp','9whUiZx','default','query','88IbQNcZ','\x0a\x20\x20\x20\x20select\x0a\x20\x20\x20\x20distinct(email),\x0a\x20\x20\x20\x20name,\x0a\x20\x20\x20\x20--,\x20email,)\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27open\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_em_atendimento,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27pending\x27)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_pendentes,\x0a\x20\x20\x20\x20count(*)\x20FILTER\x20(where\x20t.status\x20=\x20\x27closed\x27)\x20OVER\x20(PARTITION\x20by\x20email\x20)\x20as\x20qtd_resolvidos,\x0a\x20\x20\x20\x20count(*)\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20qtd_por_usuario,\x0a\x20\x20\x20\x20min((DATE_PART(\x27day\x27,\x20\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000))\x20*\x2024\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27hour\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20*\x2060\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27minute\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20menor_tempo_por_usuario,\x0a\x20\x20\x20\x20max((DATE_PART(\x27day\x27,\x20\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000))\x20*\x2024\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27hour\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20*\x2060\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27minute\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20OVER\x20(PARTITION\x20by\x20email)\x20as\x20maior_tempo_por_usuario,\x0a\x20\x20\x20\x20avg((DATE_PART(\x27day\x27,\x20\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000))\x20*\x2024\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27hour\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20*\x2060\x20+\x0a\x20\x20\x20\x20DATE_PART(\x27minute\x27,\x20to_timestamp(t.\x22closedAt\x22/1000)\x20-\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)))\x20OVER\x20(PARTITION\x20by\x20email)\x20\x20as\x20tempo_medio_por_usuario\x0a\x20\x20\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20\x20\x20left\x20join\x20\x22Users\x22\x20u\x20on\x20t.\x22userId\x22\x20=\x20\x22u\x22.\x22id\x22\x0a\x20\x20\x20\x20left\x20join\x20\x22Queues\x22\x20q\x20on\x20q.id\x20\x20=\x20t.\x22queueId\x22\x0a\x20\x20\x20\x20where\x20t.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20\x20\x20order\x20by\x206\x20Desc\x0a','1695990FbmULg','44918hCUMQd','defineProperty','19804ddfrhm','36BzQwZE'];a578_0x4368=function(){return _0x29df03;};return a578_0x4368();}Object[a578_0x553e31(0xf5)](exports,a578_0x553e31(0xf8),{'value':!![]});const sequelize_1=require(a578_0x553e31(0xfd)),database_1=__importDefault(require(a578_0x553e31(0x100))),query=a578_0x553e31(0xf2),StatisticsPerUser=async({startDate:_0x5d1f6f,endDate:_0x274104,companyId:_0x24991e})=>{const _0x468960=a578_0x553e31,_0x352a97=await database_1[_0x468960(0xef)][_0x468960(0xf0)](query,{'replacements':{'companyId':_0x24991e,'startDate':_0x5d1f6f,'endDate':_0x274104},'type':sequelize_1[_0x468960(0xf9)][_0x468960(0xfa)]});return _0x352a97;};exports[a578_0x553e31(0xef)]=StatisticsPerUser;