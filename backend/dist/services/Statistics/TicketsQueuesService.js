'use strict';const a572_0x15cab5=a572_0x22ae;(function(_0x22601e,_0x5608ec){const _0x541bdc=a572_0x22ae,_0x48e6ae=_0x22601e();while(!![]){try{const _0x569c00=-parseInt(_0x541bdc(0x180))/0x1+-parseInt(_0x541bdc(0x184))/0x2+-parseInt(_0x541bdc(0x171))/0x3+-parseInt(_0x541bdc(0x18a))/0x4+parseInt(_0x541bdc(0x172))/0x5*(parseInt(_0x541bdc(0x175))/0x6)+parseInt(_0x541bdc(0x176))/0x7+parseInt(_0x541bdc(0x18e))/0x8*(parseInt(_0x541bdc(0x16c))/0x9);if(_0x569c00===_0x5608ec)break;else _0x48e6ae['push'](_0x48e6ae['shift']());}catch(_0x302a80){_0x48e6ae['push'](_0x48e6ae['shift']());}}}(a572_0x43c8,0xd788d));var __importDefault=this&&this[a572_0x15cab5(0x16f)]||function(_0x1f6b23){const _0x41604a=a572_0x15cab5;return _0x1f6b23&&_0x1f6b23[_0x41604a(0x18c)]?_0x1f6b23:{'default':_0x1f6b23};};Object[a572_0x15cab5(0x190)](exports,a572_0x15cab5(0x18c),{'value':!![]});const sequelize_1=require(a572_0x15cab5(0x192)),date_fns_1=require(a572_0x15cab5(0x177)),Ticket_1=__importDefault(require('../../models/Ticket')),UserQueue_1=__importDefault(require(a572_0x15cab5(0x18b))),User_1=__importDefault(require(a572_0x15cab5(0x17a))),Contact_1=__importDefault(require(a572_0x15cab5(0x189))),Queue_1=__importDefault(require(a572_0x15cab5(0x183))),TicketsQueuesService=async({dateStart:_0x9275cc,dateEnd:_0x1763f4,status:_0x37f148,userId:_0x2e31ff,queuesIds:_0xb08146,companyId:_0x58adb2,showAll:_0x1afbb1})=>{const _0x63059f=a572_0x15cab5;let _0x1dda01={};const _0x52b697=[{'model':User_1['default'],'as':_0x63059f(0x186),'attributes':['id',_0x63059f(0x181),_0x63059f(0x17e),_0x63059f(0x17f),'profileImage']},{'model':Contact_1[_0x63059f(0x179)],'as':_0x63059f(0x188),'attributes':['id','name',_0x63059f(0x17c),_0x63059f(0x182),_0x63059f(0x16d),'urlPicture']},{'model':Queue_1['default'],'as':_0x63059f(0x18d),'attributes':['id',_0x63059f(0x181),'color']},{'association':'whatsapp','attributes':['id',_0x63059f(0x181)]}],_0x64494d=await Queue_1[_0x63059f(0x179)]['count']({'where':{'companyId':_0x58adb2}});if(_0x64494d){const _0x3223cc=await UserQueue_1['default'][_0x63059f(0x17b)]({'where':{'userId':_0x2e31ff}});let _0x42e8d0=_0x3223cc[_0x63059f(0x191)](_0x1e4312=>_0x1e4312[_0x63059f(0x173)]);if(_0xb08146){const _0x247591=[];_0xb08146[_0x63059f(0x193)](_0x9a5acb=>{const _0x48c601=_0x63059f,_0x37700c=_0x42e8d0[_0x48c601(0x178)](+_0x9a5acb);_0x37700c&&_0x247591[_0x48c601(0x170)](+_0x9a5acb);}),_0x42e8d0=_0x247591;}_0x1dda01={..._0x1dda01,'queueId':{[sequelize_1['Op']['in']]:_0x42e8d0}};}_0x1afbb1==_0x63059f(0x174)&&(_0x1dda01={});_0x1dda01={..._0x1dda01,'status':{[sequelize_1['Op']['in']]:[_0x63059f(0x18f),_0x63059f(0x17d)]},'companyId':_0x58adb2};_0x9275cc&&_0x1763f4&&(_0x1dda01={..._0x1dda01,'createdAt':{[sequelize_1['Op'][_0x63059f(0x16b)]]:[+(0x0,date_fns_1[_0x63059f(0x169)])((0x0,date_fns_1[_0x63059f(0x16e)])(_0x9275cc)),+(0x0,date_fns_1[_0x63059f(0x185)])((0x0,date_fns_1[_0x63059f(0x16e)])(_0x1763f4))]}});const {count:_0x4ac96c,rows:_0x2f0951}=await Ticket_1['default']['findAndCountAll']({'where':_0x1dda01,'include':_0x52b697,'distinct':!![],'subQuery':![],'order':[['user',_0x63059f(0x181),'ASC'],[_0x63059f(0x16a),_0x63059f(0x187)]]});return _0x2f0951;};function a572_0x22ae(_0x45893b,_0x2135fc){const _0x43c8c1=a572_0x43c8();return a572_0x22ae=function(_0x22ae05,_0x138c12){_0x22ae05=_0x22ae05-0x169;let _0x2fd7c8=_0x43c8c1[_0x22ae05];return _0x2fd7c8;},a572_0x22ae(_0x45893b,_0x2135fc);}function a572_0x43c8(){const _0x668164=['map','sequelize','forEach','startOfDay','updatedAt','between','1168362zGUSsJ','companyId','parseISO','__importDefault','push','2730006ANytSX','3755zzNjqI','queueId','true','2646HntLoi','12061735PtvxTe','date-fns','indexOf','default','../../models/User','findAll','number','pending','profile','online','423306IVaAxb','name','profilePicUrl','../../models/Queue','2680338HOpmON','endOfDay','user','DESC','contact','../../models/Contact','2300312LJFGJS','../../models/UserQueue','__esModule','queue','128xTFNyQ','open','defineProperty'];a572_0x43c8=function(){return _0x668164;};return a572_0x43c8();}exports[a572_0x15cab5(0x179)]=TicketsQueuesService;