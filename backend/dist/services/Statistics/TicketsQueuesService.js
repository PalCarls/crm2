'use strict';function a579_0x49b7(_0x460a59,_0x1840a3){const _0x5df31d=a579_0x5df3();return a579_0x49b7=function(_0x49b768,_0x1b7c8c){_0x49b768=_0x49b768-0x18a;let _0x279147=_0x5df31d[_0x49b768];return _0x279147;},a579_0x49b7(_0x460a59,_0x1840a3);}const a579_0x178e12=a579_0x49b7;(function(_0x427682,_0x505741){const _0x3381d2=a579_0x49b7,_0x8b2a22=_0x427682();while(!![]){try{const _0x4da62f=parseInt(_0x3381d2(0x19f))/0x1+parseInt(_0x3381d2(0x1a7))/0x2*(-parseInt(_0x3381d2(0x1b1))/0x3)+-parseInt(_0x3381d2(0x1b2))/0x4*(parseInt(_0x3381d2(0x193))/0x5)+-parseInt(_0x3381d2(0x18e))/0x6+parseInt(_0x3381d2(0x1ab))/0x7+-parseInt(_0x3381d2(0x198))/0x8+parseInt(_0x3381d2(0x19c))/0x9*(parseInt(_0x3381d2(0x1a1))/0xa);if(_0x4da62f===_0x505741)break;else _0x8b2a22['push'](_0x8b2a22['shift']());}catch(_0x1b3efa){_0x8b2a22['push'](_0x8b2a22['shift']());}}}(a579_0x5df3,0x9a16a));var __importDefault=this&&this['__importDefault']||function(_0x3c3d3a){return _0x3c3d3a&&_0x3c3d3a['__esModule']?_0x3c3d3a:{'default':_0x3c3d3a};};function a579_0x5df3(){const _0x599942=['975289xbSSnx','urlPicture','name','parseISO','indexOf','startOfDay','15DvZrZI','4rxcUIi','defineProperty','contact','ASC','endOfDay','3121008HVdTok','forEach','map','updatedAt','../../models/Contact','5607545cBESaS','companyId','open','queue','online','9697400JSDjki','count','../../models/User','number','28497159eRnClX','default','../../models/Queue','1036640zrCbUV','push','10qRRjTA','sequelize','true','__esModule','profile','profileImage','342928JNgaPz','whatsapp','user','pending'];a579_0x5df3=function(){return _0x599942;};return a579_0x5df3();}Object[a579_0x178e12(0x18a)](exports,a579_0x178e12(0x1a4),{'value':!![]});const sequelize_1=require(a579_0x178e12(0x1a2)),date_fns_1=require('date-fns'),Ticket_1=__importDefault(require('../../models/Ticket')),UserQueue_1=__importDefault(require('../../models/UserQueue')),User_1=__importDefault(require(a579_0x178e12(0x19a))),Contact_1=__importDefault(require(a579_0x178e12(0x192))),Queue_1=__importDefault(require(a579_0x178e12(0x19e))),TicketsQueuesService=async({dateStart:_0x3653f6,dateEnd:_0x10fc15,status:_0xe364ba,userId:_0x3b7f54,queuesIds:_0x3017b4,companyId:_0x50c740,showAll:_0xda66ff})=>{const _0x2c909a=a579_0x178e12;let _0x32c7f7={};const _0x25a3d2=[{'model':User_1['default'],'as':_0x2c909a(0x1a9),'attributes':['id',_0x2c909a(0x1ad),_0x2c909a(0x1a5),_0x2c909a(0x197),_0x2c909a(0x1a6)]},{'model':Contact_1[_0x2c909a(0x19d)],'as':_0x2c909a(0x18b),'attributes':['id',_0x2c909a(0x1ad),_0x2c909a(0x19b),'profilePicUrl',_0x2c909a(0x194),_0x2c909a(0x1ac)]},{'model':Queue_1[_0x2c909a(0x19d)],'as':_0x2c909a(0x196),'attributes':['id',_0x2c909a(0x1ad),'color']},{'association':_0x2c909a(0x1a8),'attributes':['id','name']}],_0xbf35c3=await Queue_1[_0x2c909a(0x19d)][_0x2c909a(0x199)]({'where':{'companyId':_0x50c740}});if(_0xbf35c3){const _0x36d8e9=await UserQueue_1[_0x2c909a(0x19d)]['findAll']({'where':{'userId':_0x3b7f54}});let _0x52f8d5=_0x36d8e9[_0x2c909a(0x190)](_0x252957=>_0x252957['queueId']);if(_0x3017b4){const _0x291129=[];_0x3017b4[_0x2c909a(0x18f)](_0x43060c=>{const _0x43bda6=_0x2c909a,_0x3b8936=_0x52f8d5[_0x43bda6(0x1af)](+_0x43060c);_0x3b8936&&_0x291129[_0x43bda6(0x1a0)](+_0x43060c);}),_0x52f8d5=_0x291129;}_0x32c7f7={..._0x32c7f7,'queueId':{[sequelize_1['Op']['in']]:_0x52f8d5}};}_0xda66ff==_0x2c909a(0x1a3)&&(_0x32c7f7={});_0x32c7f7={..._0x32c7f7,'status':{[sequelize_1['Op']['in']]:[_0x2c909a(0x195),_0x2c909a(0x1aa)]},'companyId':_0x50c740};_0x3653f6&&_0x10fc15&&(_0x32c7f7={..._0x32c7f7,'createdAt':{[sequelize_1['Op']['between']]:[+(0x0,date_fns_1[_0x2c909a(0x1b0)])((0x0,date_fns_1['parseISO'])(_0x3653f6)),+(0x0,date_fns_1[_0x2c909a(0x18d)])((0x0,date_fns_1[_0x2c909a(0x1ae)])(_0x10fc15))]}});const {count:_0x1ecc8a,rows:_0x42ece5}=await Ticket_1[_0x2c909a(0x19d)]['findAndCountAll']({'where':_0x32c7f7,'include':_0x25a3d2,'distinct':!![],'subQuery':![],'order':[[_0x2c909a(0x1a9),_0x2c909a(0x1ad),_0x2c909a(0x18c)],[_0x2c909a(0x191),'DESC']]});return _0x42ece5;};exports[a579_0x178e12(0x19d)]=TicketsQueuesService;