'use strict';const a572_0x53b826=a572_0x3997;(function(_0x8542eb,_0x18a5b0){const _0x2ec93f=a572_0x3997,_0x3a40bd=_0x8542eb();while(!![]){try{const _0x265e62=-parseInt(_0x2ec93f(0x8f))/0x1+-parseInt(_0x2ec93f(0x85))/0x2*(-parseInt(_0x2ec93f(0x92))/0x3)+-parseInt(_0x2ec93f(0x93))/0x4*(parseInt(_0x2ec93f(0x8b))/0x5)+-parseInt(_0x2ec93f(0x8d))/0x6+parseInt(_0x2ec93f(0x88))/0x7+parseInt(_0x2ec93f(0x6d))/0x8+parseInt(_0x2ec93f(0x74))/0x9;if(_0x265e62===_0x18a5b0)break;else _0x3a40bd['push'](_0x3a40bd['shift']());}catch(_0x50b3f5){_0x3a40bd['push'](_0x3a40bd['shift']());}}}(a572_0x5b5e,0x5e292));function a572_0x5b5e(){const _0x19c9e4=['map','default','../../models/Queue','2554QFffig','parseISO','count','1499834HTBZWR','open','pending','1631285PkwKsd','queue','1777944bbNwnK','number','616851NOHRDA','__esModule','true','1227hGRYGd','8ynMoIH','../../models/Contact','urlPicture','205232gOUnbo','online','push','endOfDay','../../models/UserQueue','profileImage','defineProperty','10702458lEVxgK','queueId','companyId','../../models/User','name','updatedAt','profilePicUrl','findAll','color','contact','indexOf','sequelize','DESC','whatsapp'];a572_0x5b5e=function(){return _0x19c9e4;};return a572_0x5b5e();}var __importDefault=this&&this['__importDefault']||function(_0x213794){const _0x3974e2=a572_0x3997;return _0x213794&&_0x213794[_0x3974e2(0x90)]?_0x213794:{'default':_0x213794};};function a572_0x3997(_0x2a4cb1,_0x27563a){const _0x5b5e8d=a572_0x5b5e();return a572_0x3997=function(_0x399780,_0x5d96e8){_0x399780=_0x399780-0x6c;let _0x4e059d=_0x5b5e8d[_0x399780];return _0x4e059d;},a572_0x3997(_0x2a4cb1,_0x27563a);}Object[a572_0x53b826(0x73)](exports,'__esModule',{'value':!![]});const sequelize_1=require(a572_0x53b826(0x7f)),date_fns_1=require('date-fns'),Ticket_1=__importDefault(require('../../models/Ticket')),UserQueue_1=__importDefault(require(a572_0x53b826(0x71))),User_1=__importDefault(require(a572_0x53b826(0x77))),Contact_1=__importDefault(require(a572_0x53b826(0x94))),Queue_1=__importDefault(require(a572_0x53b826(0x84))),TicketsQueuesService=async({dateStart:_0x43b002,dateEnd:_0x863ca1,status:_0x3c4269,userId:_0x53fbc5,queuesIds:_0x3afa3d,companyId:_0x3e0c9a,showAll:_0x25c0dd})=>{const _0x184bc5=a572_0x53b826;let _0x31a696={};const _0x2b2a3f=[{'model':User_1[_0x184bc5(0x83)],'as':'user','attributes':['id',_0x184bc5(0x78),'profile',_0x184bc5(0x6e),_0x184bc5(0x72)]},{'model':Contact_1[_0x184bc5(0x83)],'as':_0x184bc5(0x7d),'attributes':['id',_0x184bc5(0x78),_0x184bc5(0x8e),_0x184bc5(0x7a),_0x184bc5(0x76),_0x184bc5(0x6c)]},{'model':Queue_1[_0x184bc5(0x83)],'as':_0x184bc5(0x8c),'attributes':['id',_0x184bc5(0x78),_0x184bc5(0x7c)]},{'association':_0x184bc5(0x81),'attributes':['id',_0x184bc5(0x78)]}],_0x4d4de2=await Queue_1[_0x184bc5(0x83)][_0x184bc5(0x87)]({'where':{'companyId':_0x3e0c9a}});if(_0x4d4de2){const _0x671c1c=await UserQueue_1[_0x184bc5(0x83)][_0x184bc5(0x7b)]({'where':{'userId':_0x53fbc5}});let _0xadfa4c=_0x671c1c[_0x184bc5(0x82)](_0x28fa95=>_0x28fa95[_0x184bc5(0x75)]);if(_0x3afa3d){const _0x33346f=[];_0x3afa3d['forEach'](_0xb61d6d=>{const _0x105121=_0x184bc5,_0x39d679=_0xadfa4c[_0x105121(0x7e)](+_0xb61d6d);_0x39d679&&_0x33346f[_0x105121(0x6f)](+_0xb61d6d);}),_0xadfa4c=_0x33346f;}_0x31a696={..._0x31a696,'queueId':{[sequelize_1['Op']['in']]:_0xadfa4c}};}_0x25c0dd==_0x184bc5(0x91)&&(_0x31a696={});_0x31a696={..._0x31a696,'status':{[sequelize_1['Op']['in']]:[_0x184bc5(0x89),_0x184bc5(0x8a)]},'companyId':_0x3e0c9a};_0x43b002&&_0x863ca1&&(_0x31a696={..._0x31a696,'createdAt':{[sequelize_1['Op']['between']]:[+(0x0,date_fns_1['startOfDay'])((0x0,date_fns_1['parseISO'])(_0x43b002)),+(0x0,date_fns_1[_0x184bc5(0x70)])((0x0,date_fns_1[_0x184bc5(0x86)])(_0x863ca1))]}});const {count:_0x49cefc,rows:_0x168a3e}=await Ticket_1[_0x184bc5(0x83)]['findAndCountAll']({'where':_0x31a696,'include':_0x2b2a3f,'distinct':!![],'subQuery':![],'order':[['user',_0x184bc5(0x78),'ASC'],[_0x184bc5(0x79),_0x184bc5(0x80)]]});return _0x168a3e;};exports[a572_0x53b826(0x83)]=TicketsQueuesService;