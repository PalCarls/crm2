'use strict';const a561_0x5652f3=a561_0xe6a1;(function(_0x2a49d5,_0x3736df){const _0x12d7d9=a561_0xe6a1,_0x55b0f6=_0x2a49d5();while(!![]){try{const _0x165974=-parseInt(_0x12d7d9(0xa1))/0x1+-parseInt(_0x12d7d9(0xb3))/0x2+-parseInt(_0x12d7d9(0xa8))/0x3+-parseInt(_0x12d7d9(0xb7))/0x4+-parseInt(_0x12d7d9(0xb0))/0x5*(parseInt(_0x12d7d9(0xb5))/0x6)+parseInt(_0x12d7d9(0xab))/0x7+parseInt(_0x12d7d9(0xa3))/0x8;if(_0x165974===_0x3736df)break;else _0x55b0f6['push'](_0x55b0f6['shift']());}catch(_0x53ff35){_0x55b0f6['push'](_0x55b0f6['shift']());}}}(a561_0x3e93,0x8acef));var __importDefault=this&&this['__importDefault']||function(_0xc5f382){const _0x1c03a3=a561_0xe6a1;return _0xc5f382&&_0xc5f382[_0x1c03a3(0xaf)]?_0xc5f382:{'default':_0xc5f382};};Object[a561_0x5652f3(0xbc)](exports,'__esModule',{'value':!![]});function a561_0xe6a1(_0x249434,_0x183827){const _0x3e93af=a561_0x3e93();return a561_0xe6a1=function(_0xe6a172,_0x28cb2d){_0xe6a172=_0xe6a172-0x96;let _0x5ba1e5=_0x3e93af[_0xe6a172];return _0x5ba1e5;},a561_0xe6a1(_0x249434,_0x183827);}const sequelize_1=require('sequelize'),date_fns_1=require(a561_0x5652f3(0xa2)),Ticket_1=__importDefault(require(a561_0x5652f3(0x97))),UserQueue_1=__importDefault(require('../../models/UserQueue')),User_1=__importDefault(require(a561_0x5652f3(0x9f))),Contact_1=__importDefault(require(a561_0x5652f3(0xb6))),Queue_1=__importDefault(require(a561_0x5652f3(0xa7))),TicketsQueuesService=async({dateStart:_0x4dee64,dateEnd:_0x49130b,status:_0x15d30f,userId:_0x581e0d,queuesIds:_0x58bafa,companyId:_0x28c88f,showAll:_0x1fd6ef})=>{const _0x21da78=a561_0x5652f3;let _0x52c934={};const _0x1e2677=[{'model':User_1['default'],'as':_0x21da78(0xba),'attributes':['id',_0x21da78(0x9b),_0x21da78(0xae),'online',_0x21da78(0xad)]},{'model':Contact_1[_0x21da78(0xaa)],'as':'contact','attributes':['id',_0x21da78(0x9b),_0x21da78(0xbd),_0x21da78(0xa4),_0x21da78(0x9d),_0x21da78(0xb8)]},{'model':Queue_1[_0x21da78(0xaa)],'as':_0x21da78(0x98),'attributes':['id','name',_0x21da78(0x9e)]},{'association':'whatsapp','attributes':['id','name']}],_0x530f31=await Queue_1[_0x21da78(0xaa)][_0x21da78(0xb4)]({'where':{'companyId':_0x28c88f}});if(_0x530f31){const _0x12288d=await UserQueue_1['default']['findAll']({'where':{'userId':_0x581e0d}});let _0x5da04e=_0x12288d[_0x21da78(0xbb)](_0x38bb21=>_0x38bb21[_0x21da78(0xa5)]);if(_0x58bafa){const _0x263d81=[];_0x58bafa['forEach'](_0x1f57af=>{const _0x56b450=_0x21da78,_0x4bcf1c=_0x5da04e[_0x56b450(0xb1)](+_0x1f57af);_0x4bcf1c&&_0x263d81[_0x56b450(0xa9)](+_0x1f57af);}),_0x5da04e=_0x263d81;}_0x52c934={..._0x52c934,'queueId':{[sequelize_1['Op']['in']]:_0x5da04e}};}_0x1fd6ef==_0x21da78(0x9a)&&(_0x52c934={});_0x52c934={..._0x52c934,'status':{[sequelize_1['Op']['in']]:[_0x21da78(0x96),'pending']},'companyId':_0x28c88f};_0x4dee64&&_0x49130b&&(_0x52c934={..._0x52c934,'createdAt':{[sequelize_1['Op'][_0x21da78(0xac)]]:[+(0x0,date_fns_1[_0x21da78(0xb2)])((0x0,date_fns_1[_0x21da78(0x9c)])(_0x4dee64)),+(0x0,date_fns_1[_0x21da78(0x99)])((0x0,date_fns_1['parseISO'])(_0x49130b))]}});const {count:_0x51b396,rows:_0xf09084}=await Ticket_1[_0x21da78(0xaa)][_0x21da78(0xb9)]({'where':_0x52c934,'include':_0x1e2677,'distinct':!![],'subQuery':![],'order':[[_0x21da78(0xba),_0x21da78(0x9b),'ASC'],[_0x21da78(0xa6),_0x21da78(0xa0)]]});return _0xf09084;};exports[a561_0x5652f3(0xaa)]=TicketsQueuesService;function a561_0x3e93(){const _0x46bc77=['profile','__esModule','175rBqRZw','indexOf','startOfDay','1982894kkByfj','count','192342utBSmT','../../models/Contact','3316368KTzLeZ','urlPicture','findAndCountAll','user','map','defineProperty','number','open','../../models/Ticket','queue','endOfDay','true','name','parseISO','companyId','color','../../models/User','DESC','1069634jUpkYV','date-fns','35392640AJggdh','profilePicUrl','queueId','updatedAt','../../models/Queue','257553vHakrP','push','default','1697486iTqTiK','between','profileImage'];a561_0x3e93=function(){return _0x46bc77;};return a561_0x3e93();}