'use strict';function a572_0x4c32(){const _0x1fa127=['1808628KRhUTr','profileImage','../../models/UserQueue','count','../../models/Contact','findAndCountAll','queue','forEach','26408WrjcfK','companyId','8194242JyTUxM','850848fRRnbY','../../models/Queue','pending','../../models/User','parseISO','open','urlPicture','402284pEDTqI','number','between','2457AUJTMo','DESC','name','true','profile','map','ASC','15ItGvoz','3588735ZDesUv','__esModule','findAll','user','default','1499830lHGlpA','../../models/Ticket','whatsapp','updatedAt'];a572_0x4c32=function(){return _0x1fa127;};return a572_0x4c32();}const a572_0x1e4b21=a572_0x2ab0;(function(_0x153208,_0x22b10e){const _0x45696b=a572_0x2ab0,_0x2eceb6=_0x153208();while(!![]){try{const _0x391321=-parseInt(_0x45696b(0x17a))/0x1+parseInt(_0x45696b(0x17e))/0x2+parseInt(_0x45696b(0x175))/0x3+parseInt(_0x45696b(0x16a))/0x4*(parseInt(_0x45696b(0x174))/0x5)+parseInt(_0x45696b(0x163))/0x6+-parseInt(_0x45696b(0x162))/0x7+parseInt(_0x45696b(0x160))/0x8*(parseInt(_0x45696b(0x16d))/0x9);if(_0x391321===_0x22b10e)break;else _0x2eceb6['push'](_0x2eceb6['shift']());}catch(_0xd4e2b7){_0x2eceb6['push'](_0x2eceb6['shift']());}}}(a572_0x4c32,0xbd2a1));function a572_0x2ab0(_0x528cdf,_0x5ec186){const _0x4c321e=a572_0x4c32();return a572_0x2ab0=function(_0x2ab08f,_0x1ac3b1){_0x2ab08f=_0x2ab08f-0x15e;let _0xa8365d=_0x4c321e[_0x2ab08f];return _0xa8365d;},a572_0x2ab0(_0x528cdf,_0x5ec186);}var __importDefault=this&&this['__importDefault']||function(_0x572e9a){const _0x3ab279=a572_0x2ab0;return _0x572e9a&&_0x572e9a[_0x3ab279(0x176)]?_0x572e9a:{'default':_0x572e9a};};Object['defineProperty'](exports,a572_0x1e4b21(0x176),{'value':!![]});const sequelize_1=require('sequelize'),date_fns_1=require('date-fns'),Ticket_1=__importDefault(require(a572_0x1e4b21(0x17b))),UserQueue_1=__importDefault(require(a572_0x1e4b21(0x180))),User_1=__importDefault(require(a572_0x1e4b21(0x166))),Contact_1=__importDefault(require(a572_0x1e4b21(0x182))),Queue_1=__importDefault(require(a572_0x1e4b21(0x164))),TicketsQueuesService=async({dateStart:_0x40d5e2,dateEnd:_0x5a3f15,status:_0x444b12,userId:_0x1eebc9,queuesIds:_0x45707a,companyId:_0x1ba8fd,showAll:_0x3da0ed})=>{const _0xbbec3a=a572_0x1e4b21;let _0x27b207={};const _0x323442=[{'model':User_1[_0xbbec3a(0x179)],'as':'user','attributes':['id',_0xbbec3a(0x16f),_0xbbec3a(0x171),'online',_0xbbec3a(0x17f)]},{'model':Contact_1[_0xbbec3a(0x179)],'as':'contact','attributes':['id','name',_0xbbec3a(0x16b),'profilePicUrl',_0xbbec3a(0x161),_0xbbec3a(0x169)]},{'model':Queue_1[_0xbbec3a(0x179)],'as':_0xbbec3a(0x15e),'attributes':['id',_0xbbec3a(0x16f),'color']},{'association':_0xbbec3a(0x17c),'attributes':['id',_0xbbec3a(0x16f)]}],_0x5b97e7=await Queue_1[_0xbbec3a(0x179)][_0xbbec3a(0x181)]({'where':{'companyId':_0x1ba8fd}});if(_0x5b97e7){const _0x2264a5=await UserQueue_1[_0xbbec3a(0x179)][_0xbbec3a(0x177)]({'where':{'userId':_0x1eebc9}});let _0x2b8beb=_0x2264a5[_0xbbec3a(0x172)](_0x3cb41e=>_0x3cb41e['queueId']);if(_0x45707a){const _0x482fd9=[];_0x45707a[_0xbbec3a(0x15f)](_0x26f169=>{const _0x2cf2fb=_0x2b8beb['indexOf'](+_0x26f169);_0x2cf2fb&&_0x482fd9['push'](+_0x26f169);}),_0x2b8beb=_0x482fd9;}_0x27b207={..._0x27b207,'queueId':{[sequelize_1['Op']['in']]:_0x2b8beb}};}_0x3da0ed==_0xbbec3a(0x170)&&(_0x27b207={});_0x27b207={..._0x27b207,'status':{[sequelize_1['Op']['in']]:[_0xbbec3a(0x168),_0xbbec3a(0x165)]},'companyId':_0x1ba8fd};_0x40d5e2&&_0x5a3f15&&(_0x27b207={..._0x27b207,'createdAt':{[sequelize_1['Op'][_0xbbec3a(0x16c)]]:[+(0x0,date_fns_1['startOfDay'])((0x0,date_fns_1[_0xbbec3a(0x167)])(_0x40d5e2)),+(0x0,date_fns_1['endOfDay'])((0x0,date_fns_1[_0xbbec3a(0x167)])(_0x5a3f15))]}});const {count:_0x5bfda6,rows:_0x1ced8f}=await Ticket_1['default'][_0xbbec3a(0x183)]({'where':_0x27b207,'include':_0x323442,'distinct':!![],'subQuery':![],'order':[[_0xbbec3a(0x178),_0xbbec3a(0x16f),_0xbbec3a(0x173)],[_0xbbec3a(0x17d),_0xbbec3a(0x16e)]]});return _0x1ced8f;};exports[a572_0x1e4b21(0x179)]=TicketsQueuesService;