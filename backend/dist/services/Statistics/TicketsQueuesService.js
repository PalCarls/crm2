'use strict';const a561_0x298eb5=a561_0xb436;(function(_0x227fe4,_0x2514f5){const _0x4d0002=a561_0xb436,_0x4b1347=_0x227fe4();while(!![]){try{const _0x6f62aa=-parseInt(_0x4d0002(0x1e5))/0x1+-parseInt(_0x4d0002(0x1e6))/0x2+parseInt(_0x4d0002(0x1fb))/0x3+-parseInt(_0x4d0002(0x1f5))/0x4+-parseInt(_0x4d0002(0x1ee))/0x5+-parseInt(_0x4d0002(0x1db))/0x6*(-parseInt(_0x4d0002(0x203))/0x7)+parseInt(_0x4d0002(0x1dd))/0x8;if(_0x6f62aa===_0x2514f5)break;else _0x4b1347['push'](_0x4b1347['shift']());}catch(_0x32bbee){_0x4b1347['push'](_0x4b1347['shift']());}}}(a561_0x1108,0x9e62c));var __importDefault=this&&this[a561_0x298eb5(0x1eb)]||function(_0xb0c3aa){const _0xc44864=a561_0x298eb5;return _0xb0c3aa&&_0xb0c3aa[_0xc44864(0x201)]?_0xb0c3aa:{'default':_0xb0c3aa};};function a561_0x1108(){const _0x34a630=['contact','queueId','1657092jdEHYO','number','profile','../../models/Contact','endOfDay','user','3439593MyGvgW','ASC','updatedAt','open','map','findAndCountAll','__esModule','findAll','1185191DZvnCA','date-fns','6aSNign','online','10819144AKDplL','color','../../models/UserQueue','default','DESC','between','startOfDay','forEach','1008078QPeIqA','570162WHsxDl','profilePicUrl','whatsapp','name','push','__importDefault','defineProperty','true','1560285AZgnYg','urlPicture','../../models/User','pending','../../models/Queue'];a561_0x1108=function(){return _0x34a630;};return a561_0x1108();}Object[a561_0x298eb5(0x1ec)](exports,'__esModule',{'value':!![]});function a561_0xb436(_0x598835,_0x2d61ba){const _0x1108f1=a561_0x1108();return a561_0xb436=function(_0xb4367e,_0x54b308){_0xb4367e=_0xb4367e-0x1da;let _0x1e0815=_0x1108f1[_0xb4367e];return _0x1e0815;},a561_0xb436(_0x598835,_0x2d61ba);}const sequelize_1=require('sequelize'),date_fns_1=require(a561_0x298eb5(0x1da)),Ticket_1=__importDefault(require('../../models/Ticket')),UserQueue_1=__importDefault(require(a561_0x298eb5(0x1df))),User_1=__importDefault(require(a561_0x298eb5(0x1f0))),Contact_1=__importDefault(require(a561_0x298eb5(0x1f8))),Queue_1=__importDefault(require(a561_0x298eb5(0x1f2))),TicketsQueuesService=async({dateStart:_0x4a7259,dateEnd:_0x3df6a5,status:_0x2caad8,userId:_0x8473a3,queuesIds:_0x2c5bec,companyId:_0x1a91b0,showAll:_0x453b3a})=>{const _0x42f8f3=a561_0x298eb5;let _0x5ca5e2={};const _0x2c0cbc=[{'model':User_1[_0x42f8f3(0x1e0)],'as':_0x42f8f3(0x1fa),'attributes':['id',_0x42f8f3(0x1e9),_0x42f8f3(0x1f7),_0x42f8f3(0x1dc),'profileImage']},{'model':Contact_1[_0x42f8f3(0x1e0)],'as':_0x42f8f3(0x1f3),'attributes':['id',_0x42f8f3(0x1e9),_0x42f8f3(0x1f6),_0x42f8f3(0x1e7),'companyId',_0x42f8f3(0x1ef)]},{'model':Queue_1[_0x42f8f3(0x1e0)],'as':'queue','attributes':['id',_0x42f8f3(0x1e9),_0x42f8f3(0x1de)]},{'association':_0x42f8f3(0x1e8),'attributes':['id',_0x42f8f3(0x1e9)]}],_0x3f4be4=await Queue_1[_0x42f8f3(0x1e0)]['count']({'where':{'companyId':_0x1a91b0}});if(_0x3f4be4){const _0x16e41d=await UserQueue_1['default'][_0x42f8f3(0x202)]({'where':{'userId':_0x8473a3}});let _0x20138e=_0x16e41d[_0x42f8f3(0x1ff)](_0x2c148b=>_0x2c148b[_0x42f8f3(0x1f4)]);if(_0x2c5bec){const _0x3317e6=[];_0x2c5bec[_0x42f8f3(0x1e4)](_0x387be2=>{const _0x414d9d=_0x42f8f3,_0x45895f=_0x20138e['indexOf'](+_0x387be2);_0x45895f&&_0x3317e6[_0x414d9d(0x1ea)](+_0x387be2);}),_0x20138e=_0x3317e6;}_0x5ca5e2={..._0x5ca5e2,'queueId':{[sequelize_1['Op']['in']]:_0x20138e}};}_0x453b3a==_0x42f8f3(0x1ed)&&(_0x5ca5e2={});_0x5ca5e2={..._0x5ca5e2,'status':{[sequelize_1['Op']['in']]:[_0x42f8f3(0x1fe),_0x42f8f3(0x1f1)]},'companyId':_0x1a91b0};_0x4a7259&&_0x3df6a5&&(_0x5ca5e2={..._0x5ca5e2,'createdAt':{[sequelize_1['Op'][_0x42f8f3(0x1e2)]]:[+(0x0,date_fns_1[_0x42f8f3(0x1e3)])((0x0,date_fns_1['parseISO'])(_0x4a7259)),+(0x0,date_fns_1[_0x42f8f3(0x1f9)])((0x0,date_fns_1['parseISO'])(_0x3df6a5))]}});const {count:_0x41a134,rows:_0x6125f8}=await Ticket_1[_0x42f8f3(0x1e0)][_0x42f8f3(0x200)]({'where':_0x5ca5e2,'include':_0x2c0cbc,'distinct':!![],'subQuery':![],'order':[[_0x42f8f3(0x1fa),'name',_0x42f8f3(0x1fc)],[_0x42f8f3(0x1fd),_0x42f8f3(0x1e1)]]});return _0x6125f8;};exports[a561_0x298eb5(0x1e0)]=TicketsQueuesService;