'use strict';function a460_0xe8e6(){const _0x48ff7f=['configurable','457686tbSAJY','Check-unique-name','default','278340sEJKmg','required','6816336tvtHGx','hasOwnProperty','1863108MMBRrW','object','writable','call','__importStar','message','2246525VaZZqe','findOne','__esModule','__setModuleDefault','__createBinding','ERR_PLAN_INVALID_NAME','yup','prototype','5711742pihjqq','defineProperty','2JiIfzH','shape','../../models/Plan','2184092uearvf','ERR_PLAN_NAME_ALREADY_EXISTS','create','7BPIhda'];a460_0xe8e6=function(){return _0x48ff7f;};return a460_0xe8e6();}function a460_0x1005(_0x3b7540,_0x58303a){const _0xe8e69b=a460_0xe8e6();return a460_0x1005=function(_0x1005eb,_0x721238){_0x1005eb=_0x1005eb-0x79;let _0xf3a463=_0xe8e69b[_0x1005eb];return _0xf3a463;},a460_0x1005(_0x3b7540,_0x58303a);}const a460_0x1b89bd=a460_0x1005;(function(_0xb6af2d,_0x22f991){const _0x2b7f7c=a460_0x1005,_0x5da84c=_0xb6af2d();while(!![]){try{const _0x3e4a18=-parseInt(_0x2b7f7c(0x87))/0x1*(parseInt(_0x2b7f7c(0x7c))/0x2)+-parseInt(_0x2b7f7c(0x84))/0x3+parseInt(_0x2b7f7c(0x7f))/0x4+parseInt(_0x2b7f7c(0x91))/0x5+-parseInt(_0x2b7f7c(0x8b))/0x6+parseInt(_0x2b7f7c(0x82))/0x7*(parseInt(_0x2b7f7c(0x89))/0x8)+-parseInt(_0x2b7f7c(0x7a))/0x9;if(_0x3e4a18===_0x22f991)break;else _0x5da84c['push'](_0x5da84c['shift']());}catch(_0x148e37){_0x5da84c['push'](_0x5da84c['shift']());}}}(a460_0xe8e6,0x73110));var __createBinding=this&&this[a460_0x1b89bd(0x95)]||(Object['create']?function(_0x3a4e28,_0x4299dc,_0x2763b0,_0x280800){const _0x28a805=a460_0x1b89bd;if(_0x280800===undefined)_0x280800=_0x2763b0;var _0x15ff5e=Object['getOwnPropertyDescriptor'](_0x4299dc,_0x2763b0);(!_0x15ff5e||('get'in _0x15ff5e?!_0x4299dc['__esModule']:_0x15ff5e[_0x28a805(0x8d)]||_0x15ff5e[_0x28a805(0x83)]))&&(_0x15ff5e={'enumerable':!![],'get':function(){return _0x4299dc[_0x2763b0];}}),Object[_0x28a805(0x7b)](_0x3a4e28,_0x280800,_0x15ff5e);}:function(_0x544f65,_0x392b04,_0x91b596,_0x158c1d){if(_0x158c1d===undefined)_0x158c1d=_0x91b596;_0x544f65[_0x158c1d]=_0x392b04[_0x91b596];}),__setModuleDefault=this&&this[a460_0x1b89bd(0x94)]||(Object[a460_0x1b89bd(0x81)]?function(_0xc02f65,_0x59fd56){const _0xa9677c=a460_0x1b89bd;Object[_0xa9677c(0x7b)](_0xc02f65,_0xa9677c(0x86),{'enumerable':!![],'value':_0x59fd56});}:function(_0x32dbe5,_0x530073){const _0x4c6041=a460_0x1b89bd;_0x32dbe5[_0x4c6041(0x86)]=_0x530073;}),__importStar=this&&this[a460_0x1b89bd(0x8f)]||function(_0x5751c1){const _0x3d38c4=a460_0x1b89bd;if(_0x5751c1&&_0x5751c1[_0x3d38c4(0x93)])return _0x5751c1;var _0x32d573={};if(_0x5751c1!=null){for(var _0x17d7f0 in _0x5751c1)if(_0x17d7f0!==_0x3d38c4(0x86)&&Object[_0x3d38c4(0x79)][_0x3d38c4(0x8a)][_0x3d38c4(0x8e)](_0x5751c1,_0x17d7f0))__createBinding(_0x32d573,_0x5751c1,_0x17d7f0);}return __setModuleDefault(_0x32d573,_0x5751c1),_0x32d573;},__importDefault=this&&this['__importDefault']||function(_0xba1f42){const _0x1e20a4=a460_0x1b89bd;return _0xba1f42&&_0xba1f42[_0x1e20a4(0x93)]?_0xba1f42:{'default':_0xba1f42};};Object[a460_0x1b89bd(0x7b)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a460_0x1b89bd(0x97))),AppError_1=__importDefault(require('../../errors/AppError')),Plan_1=__importDefault(require(a460_0x1b89bd(0x7e))),CreatePlanService=async _0x28c06d=>{const _0x32b20d=a460_0x1b89bd,{name:_0x562d79}=_0x28c06d,_0x4de253=Yup[_0x32b20d(0x8c)]()[_0x32b20d(0x7d)]({'name':Yup['string']()['min'](0x2,'ERR_PLAN_INVALID_NAME')[_0x32b20d(0x88)](_0x32b20d(0x96))['test'](_0x32b20d(0x85),_0x32b20d(0x80),async _0x4b5088=>{const _0x24fc31=_0x32b20d;if(_0x4b5088){const _0x4cf6aa=await Plan_1[_0x24fc31(0x86)][_0x24fc31(0x92)]({'where':{'name':_0x4b5088}});return!_0x4cf6aa;}return![];})});try{await _0x4de253['validate']({'name':_0x562d79});}catch(_0x172de4){throw new AppError_1['default'](_0x172de4[_0x32b20d(0x90)]);}const _0x3ceec2=await Plan_1[_0x32b20d(0x86)][_0x32b20d(0x81)](_0x28c06d);return _0x3ceec2;};exports['default']=CreatePlanService;