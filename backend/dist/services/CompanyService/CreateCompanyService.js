'use strict';const a384_0x284902=a384_0x1ef4;function a384_0x1ef4(_0x8c29ea,_0x1a1d08){const _0x33bfb4=a384_0x33bf();return a384_0x1ef4=function(_0x1ef4fb,_0x5a2e22){_0x1ef4fb=_0x1ef4fb-0xc9;let _0x142b80=_0x33bfb4[_0x1ef4fb];return _0x142b80;},a384_0x1ef4(_0x8c29ea,_0x1a1d08);}(function(_0x1a02b5,_0x415bcf){const _0xf4fa6=a384_0x1ef4,_0xe56e02=_0x1a02b5();while(!![]){try{const _0x51dc7a=-parseInt(_0xf4fa6(0xdd))/0x1+parseInt(_0xf4fa6(0x101))/0x2*(parseInt(_0xf4fa6(0xe7))/0x3)+parseInt(_0xf4fa6(0xcd))/0x4*(parseInt(_0xf4fa6(0xd6))/0x5)+-parseInt(_0xf4fa6(0xf7))/0x6+parseInt(_0xf4fa6(0xe6))/0x7+parseInt(_0xf4fa6(0xf5))/0x8*(-parseInt(_0xf4fa6(0xce))/0x9)+parseInt(_0xf4fa6(0xfa))/0xa;if(_0x51dc7a===_0x415bcf)break;else _0xe56e02['push'](_0xe56e02['shift']());}catch(_0x29dd0f){_0xe56e02['push'](_0xe56e02['shift']());}}}(a384_0x33bf,0x9e7ff));function a384_0x33bf(){const _0x4bd38a=['Não\x20foi\x20possível\x20criar\x20a\x20empresa!','get','text','call','501132byyXhP','2590362NWQFYn','lgpdHideNumber','defineProperty','transaction','configurable','../../database','rollback','enableLGPD','10KtOCJT','message','../../models/User','enabled','required','commit','getOwnPropertyDescriptor','1271693BXAfvn','shape','__createBinding','admin','yup','disabled','acceptCallWhatsapp','../../errors/AppError','chatBotType','2348003UaQelc','15Nfasiv','ERR_COMPANY_INVALID_NAME','sendGreetingAccepted','../../models/Setting','prototype','sendMsgTransfTicket','default','string','hasOwnProperty','scheduleType','userRandom','__importStar','validate','../../models/Company','8HBZtVT','email','5018820jBHBet','lgpdDeleteMessage','create','17586260FoUEQc','lgpdConsent','__setModuleDefault','userRating','__importDefault','mudar123','__esModule','280230FiRHhU','min','writable'];a384_0x33bf=function(){return _0x4bd38a;};return a384_0x33bf();}var __createBinding=this&&this[a384_0x284902(0xdf)]||(Object[a384_0x284902(0xf9)]?function(_0x308fe1,_0x478747,_0x9ec1a8,_0x2c6543){const _0x45039f=a384_0x284902;if(_0x2c6543===undefined)_0x2c6543=_0x9ec1a8;var _0x3a242d=Object[_0x45039f(0xdc)](_0x478747,_0x9ec1a8);(!_0x3a242d||(_0x45039f(0xca)in _0x3a242d?!_0x478747[_0x45039f(0x100)]:_0x3a242d[_0x45039f(0x103)]||_0x3a242d[_0x45039f(0xd2)]))&&(_0x3a242d={'enumerable':!![],'get':function(){return _0x478747[_0x9ec1a8];}}),Object[_0x45039f(0xd0)](_0x308fe1,_0x2c6543,_0x3a242d);}:function(_0x54169c,_0x5b9876,_0x4831f6,_0x43296b){if(_0x43296b===undefined)_0x43296b=_0x4831f6;_0x54169c[_0x43296b]=_0x5b9876[_0x4831f6];}),__setModuleDefault=this&&this[a384_0x284902(0xfc)]||(Object[a384_0x284902(0xf9)]?function(_0x12a95f,_0x3fe5ca){const _0x40ca6b=a384_0x284902;Object[_0x40ca6b(0xd0)](_0x12a95f,_0x40ca6b(0xed),{'enumerable':!![],'value':_0x3fe5ca});}:function(_0x2b9edd,_0x5cc6bc){const _0x2014fb=a384_0x284902;_0x2b9edd[_0x2014fb(0xed)]=_0x5cc6bc;}),__importStar=this&&this[a384_0x284902(0xf2)]||function(_0x39e37e){const _0x55a10f=a384_0x284902;if(_0x39e37e&&_0x39e37e[_0x55a10f(0x100)])return _0x39e37e;var _0x161bfd={};if(_0x39e37e!=null){for(var _0xd96680 in _0x39e37e)if(_0xd96680!==_0x55a10f(0xed)&&Object[_0x55a10f(0xeb)][_0x55a10f(0xef)][_0x55a10f(0xcc)](_0x39e37e,_0xd96680))__createBinding(_0x161bfd,_0x39e37e,_0xd96680);}return __setModuleDefault(_0x161bfd,_0x39e37e),_0x161bfd;},__importDefault=this&&this[a384_0x284902(0xfe)]||function(_0x503d03){return _0x503d03&&_0x503d03['__esModule']?_0x503d03:{'default':_0x503d03};};Object[a384_0x284902(0xd0)](exports,a384_0x284902(0x100),{'value':!![]});const Yup=__importStar(require(a384_0x284902(0xe1))),AppError_1=__importDefault(require(a384_0x284902(0xe4))),Company_1=__importDefault(require(a384_0x284902(0xf4))),User_1=__importDefault(require(a384_0x284902(0xd8))),Setting_1=__importDefault(require(a384_0x284902(0xea))),database_1=__importDefault(require(a384_0x284902(0xd3))),CreateCompanyService=async _0x4ec8a0=>{const _0x1e3f62=a384_0x284902,{name:_0x4332eb,phone:_0x412bd4,password:_0x41b97b,email:_0x27637a,status:_0x577b1e,planId:_0x4aab,dueDate:_0x19f6a3,recurrence:_0xbe3fc0,document:_0xf59e71,paymentMethod:_0x367948,companyUserName:_0x2aa489}=_0x4ec8a0,_0x1c66e7=Yup['object']()[_0x1e3f62(0xde)]({'name':Yup[_0x1e3f62(0xee)]()[_0x1e3f62(0x102)](0x2,_0x1e3f62(0xe8))[_0x1e3f62(0xda)](_0x1e3f62(0xe8))});try{await _0x1c66e7[_0x1e3f62(0xf3)]({'name':_0x4332eb});}catch(_0x251e5d){throw new AppError_1[(_0x1e3f62(0xed))](_0x251e5d[_0x1e3f62(0xd7)]);}const _0x30ecfb=await database_1[_0x1e3f62(0xed)][_0x1e3f62(0xd1)]();try{const _0x9f9278=await Company_1[_0x1e3f62(0xed)][_0x1e3f62(0xf9)]({'name':_0x4332eb,'phone':_0x412bd4,'email':_0x27637a,'status':_0x577b1e,'planId':_0x4aab,'dueDate':_0x19f6a3,'recurrence':_0xbe3fc0,'document':_0xf59e71,'paymentMethod':_0x367948},{'transaction':_0x30ecfb});return await User_1[_0x1e3f62(0xed)][_0x1e3f62(0xf9)]({'name':_0x2aa489?_0x2aa489:_0x4332eb,'email':_0x9f9278[_0x1e3f62(0xf6)],'password':_0x41b97b?_0x41b97b:_0x1e3f62(0xff),'profile':_0x1e3f62(0xe0),'companyId':_0x9f9278['id']},{'transaction':_0x30ecfb}),await Setting_1[_0x1e3f62(0xed)][_0x1e3f62(0xf9)]({'companyId':_0x9f9278['id'],'key':'sendSignMessage','value':_0x1e3f62(0xd9)},{'transaction':_0x30ecfb}),await Setting_1['default'][_0x1e3f62(0xf9)]({'companyId':_0x9f9278['id'],'key':_0x1e3f62(0xe3),'value':_0x1e3f62(0xe2)},{'transaction':_0x30ecfb}),await Setting_1[_0x1e3f62(0xed)]['create']({'companyId':_0x9f9278['id'],'key':_0x1e3f62(0xf0),'value':_0x1e3f62(0xe2)},{'transaction':_0x30ecfb}),await Setting_1['default'][_0x1e3f62(0xf9)]({'companyId':_0x9f9278['id'],'key':_0x1e3f62(0xfd),'value':_0x1e3f62(0xe2)},{'transaction':_0x30ecfb}),await Setting_1['default'][_0x1e3f62(0xf9)]({'companyId':_0x9f9278['id'],'key':_0x1e3f62(0xe5),'value':_0x1e3f62(0xcb)},{'transaction':_0x30ecfb}),await Setting_1['default'][_0x1e3f62(0xf9)]({'companyId':_0x9f9278['id'],'key':_0x1e3f62(0xf1),'value':_0x1e3f62(0xe2)},{'transaction':_0x30ecfb}),await Setting_1['default'][_0x1e3f62(0xf9)]({'companyId':_0x9f9278['id'],'key':_0x1e3f62(0xec),'value':_0x1e3f62(0xe2)},{'transaction':_0x30ecfb}),await Setting_1[_0x1e3f62(0xed)][_0x1e3f62(0xf9)]({'companyId':_0x9f9278['id'],'key':_0x1e3f62(0xe9),'value':_0x1e3f62(0xe2)},{'transaction':_0x30ecfb}),await Setting_1['default'][_0x1e3f62(0xf9)]({'companyId':_0x9f9278['id'],'key':_0x1e3f62(0xd5),'value':'disabled'},{'transaction':_0x30ecfb}),await Setting_1[_0x1e3f62(0xed)][_0x1e3f62(0xf9)]({'companyId':_0x9f9278['id'],'key':_0x1e3f62(0xfb),'value':_0x1e3f62(0xe2)},{'transaction':_0x30ecfb}),await Setting_1[_0x1e3f62(0xed)]['create']({'companyId':_0x9f9278['id'],'key':_0x1e3f62(0xf8),'value':_0x1e3f62(0xe2)},{'transaction':_0x30ecfb}),await Setting_1[_0x1e3f62(0xed)]['create']({'companyId':_0x9f9278['id'],'key':_0x1e3f62(0xcf),'value':_0x1e3f62(0xe2)},{'transaction':_0x30ecfb}),await Setting_1['default'][_0x1e3f62(0xf9)]({'companyId':_0x9f9278['id'],'key':'requiredTag','value':_0x1e3f62(0xe2)},{'transaction':_0x30ecfb}),await _0x30ecfb[_0x1e3f62(0xdb)](),_0x9f9278;}catch(_0x185dff){await _0x30ecfb[_0x1e3f62(0xd4)]();throw new AppError_1[(_0x1e3f62(0xed))](_0x1e3f62(0xc9));}};exports['default']=CreateCompanyService;