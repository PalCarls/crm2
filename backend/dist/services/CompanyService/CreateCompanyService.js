'use strict';const a354_0x4985f6=a354_0x3807;(function(_0x453ac9,_0xe2b0a){const _0x421ed7=a354_0x3807,_0x4f8395=_0x453ac9();while(!![]){try{const _0x4dc215=parseInt(_0x421ed7(0x11b))/0x1+-parseInt(_0x421ed7(0x108))/0x2*(-parseInt(_0x421ed7(0x10a))/0x3)+-parseInt(_0x421ed7(0x107))/0x4*(-parseInt(_0x421ed7(0x117))/0x5)+parseInt(_0x421ed7(0x12a))/0x6*(parseInt(_0x421ed7(0x11f))/0x7)+parseInt(_0x421ed7(0x131))/0x8+parseInt(_0x421ed7(0x123))/0x9*(-parseInt(_0x421ed7(0x127))/0xa)+-parseInt(_0x421ed7(0x120))/0xb*(parseInt(_0x421ed7(0x121))/0xc);if(_0x4dc215===_0xe2b0a)break;else _0x4f8395['push'](_0x4f8395['shift']());}catch(_0xfd12c0){_0x4f8395['push'](_0x4f8395['shift']());}}}(a354_0x15f2,0xb782c));function a354_0x3807(_0x522329,_0x1c84ee){const _0x15f208=a354_0x15f2();return a354_0x3807=function(_0x38076b,_0x12bc1e){_0x38076b=_0x38076b-0x106;let _0x19c510=_0x15f208[_0x38076b];return _0x19c510;},a354_0x3807(_0x522329,_0x1c84ee);}function a354_0x15f2(){const _0x47dbcf=['get','10593312fUDDla','__setModuleDefault','mudar123','__createBinding','CheckMsgIsGroup','transaction','prototype','../../models/Company','create','473880pNgkCx','272WGBkrx','chatBotType','6057NCaqwf','__esModule','../../models/User','enableLGPD','scheduleType','string','enabled','hoursCloseTicketsAuto','ERR_COMPANY_INVALID_NAME','../../models/Setting','admin','rollback','email','45PNqeVL','__importStar','sendSignMessage','disabled','1304056JaYwru','text','sendMsgTransfTicket','call','3941819JyuZLB','11yflsbz','43666908ELkdbM','yup','9dwdlkM','default','Não\x20foi\x20possível\x20criar\x20a\x20empresa!','sendGreetingAccepted','7046990QZthcr','hasOwnProperty','required','12LySWxL','../../errors/AppError','min','defineProperty','shape','writable'];a354_0x15f2=function(){return _0x47dbcf;};return a354_0x15f2();}var __createBinding=this&&this[a354_0x4985f6(0x134)]||(Object['create']?function(_0xdc9b01,_0x27f1ad,_0x27b9f9,_0xf6acaa){const _0x619c7f=a354_0x4985f6;if(_0xf6acaa===undefined)_0xf6acaa=_0x27b9f9;var _0x1ba3fa=Object['getOwnPropertyDescriptor'](_0x27f1ad,_0x27b9f9);(!_0x1ba3fa||(_0x619c7f(0x130)in _0x1ba3fa?!_0x27f1ad['__esModule']:_0x1ba3fa[_0x619c7f(0x12f)]||_0x1ba3fa['configurable']))&&(_0x1ba3fa={'enumerable':!![],'get':function(){return _0x27f1ad[_0x27b9f9];}}),Object[_0x619c7f(0x12d)](_0xdc9b01,_0xf6acaa,_0x1ba3fa);}:function(_0x2a207c,_0x43c230,_0x5a0a93,_0x2e5df3){if(_0x2e5df3===undefined)_0x2e5df3=_0x5a0a93;_0x2a207c[_0x2e5df3]=_0x43c230[_0x5a0a93];}),__setModuleDefault=this&&this[a354_0x4985f6(0x132)]||(Object['create']?function(_0x47f4de,_0x1bb0b4){const _0x3ae633=a354_0x4985f6;Object[_0x3ae633(0x12d)](_0x47f4de,_0x3ae633(0x124),{'enumerable':!![],'value':_0x1bb0b4});}:function(_0x579c7e,_0x27ddcc){const _0x2f3d9a=a354_0x4985f6;_0x579c7e[_0x2f3d9a(0x124)]=_0x27ddcc;}),__importStar=this&&this[a354_0x4985f6(0x118)]||function(_0x503eea){const _0xa8770e=a354_0x4985f6;if(_0x503eea&&_0x503eea[_0xa8770e(0x10b)])return _0x503eea;var _0xb3b4={};if(_0x503eea!=null){for(var _0x308eab in _0x503eea)if(_0x308eab!==_0xa8770e(0x124)&&Object[_0xa8770e(0x137)][_0xa8770e(0x128)][_0xa8770e(0x11e)](_0x503eea,_0x308eab))__createBinding(_0xb3b4,_0x503eea,_0x308eab);}return __setModuleDefault(_0xb3b4,_0x503eea),_0xb3b4;},__importDefault=this&&this['__importDefault']||function(_0x43b28a){const _0x27c398=a354_0x4985f6;return _0x43b28a&&_0x43b28a[_0x27c398(0x10b)]?_0x43b28a:{'default':_0x43b28a};};Object[a354_0x4985f6(0x12d)](exports,a354_0x4985f6(0x10b),{'value':!![]});const Yup=__importStar(require(a354_0x4985f6(0x122))),AppError_1=__importDefault(require(a354_0x4985f6(0x12b))),Company_1=__importDefault(require(a354_0x4985f6(0x138))),User_1=__importDefault(require(a354_0x4985f6(0x10c))),Setting_1=__importDefault(require(a354_0x4985f6(0x113))),database_1=__importDefault(require('../../database')),CreateCompanyService=async _0x236764=>{const _0x5bd271=a354_0x4985f6,{name:_0x25b9e1,phone:_0x5f3749,password:_0x19091c,email:_0x46ad8b,status:_0x49364d,planId:_0x351783,dueDate:_0x3db6f9,recurrence:_0x3a6a84,document:_0x7410df,paymentMethod:_0x9c1a37,companyUserName:_0x9533b5}=_0x236764,_0x5efc88=Yup['object']()[_0x5bd271(0x12e)]({'name':Yup[_0x5bd271(0x10f)]()[_0x5bd271(0x12c)](0x2,_0x5bd271(0x112))[_0x5bd271(0x129)]('ERR_COMPANY_INVALID_NAME')});try{await _0x5efc88['validate']({'name':_0x25b9e1});}catch(_0x52d551){throw new AppError_1[(_0x5bd271(0x124))](_0x52d551['message']);}const _0x4a0908=await database_1[_0x5bd271(0x124)][_0x5bd271(0x136)]();try{const _0x45c9e2=await Company_1[_0x5bd271(0x124)][_0x5bd271(0x106)]({'name':_0x25b9e1,'phone':_0x5f3749,'email':_0x46ad8b,'status':_0x49364d,'planId':_0x351783,'dueDate':_0x3db6f9,'recurrence':_0x3a6a84,'document':_0x7410df,'paymentMethod':_0x9c1a37},{'transaction':_0x4a0908});return await User_1[_0x5bd271(0x124)]['create']({'name':_0x9533b5?_0x9533b5:_0x25b9e1,'email':_0x45c9e2[_0x5bd271(0x116)],'password':_0x19091c?_0x19091c:_0x5bd271(0x133),'profile':_0x5bd271(0x114),'companyId':_0x45c9e2['id']},{'transaction':_0x4a0908}),await Setting_1[_0x5bd271(0x124)][_0x5bd271(0x106)]({'companyId':_0x45c9e2['id'],'key':_0x5bd271(0x111),'value':'9999999999'},{'transaction':_0x4a0908}),await Setting_1[_0x5bd271(0x124)][_0x5bd271(0x106)]({'companyId':_0x45c9e2['id'],'key':_0x5bd271(0x135),'value':'enabled'},{'transaction':_0x4a0908}),await Setting_1[_0x5bd271(0x124)][_0x5bd271(0x106)]({'companyId':_0x45c9e2['id'],'key':_0x5bd271(0x119),'value':_0x5bd271(0x110)},{'transaction':_0x4a0908}),await Setting_1[_0x5bd271(0x124)][_0x5bd271(0x106)]({'companyId':_0x45c9e2['id'],'key':'acceptCallWhatsapp','value':'disabled'},{'transaction':_0x4a0908}),await Setting_1[_0x5bd271(0x124)][_0x5bd271(0x106)]({'companyId':_0x45c9e2['id'],'key':_0x5bd271(0x10e),'value':_0x5bd271(0x11a)},{'transaction':_0x4a0908}),await Setting_1[_0x5bd271(0x124)]['create']({'companyId':_0x45c9e2['id'],'key':'userRating','value':_0x5bd271(0x11a)},{'transaction':_0x4a0908}),await Setting_1[_0x5bd271(0x124)][_0x5bd271(0x106)]({'companyId':_0x45c9e2['id'],'key':_0x5bd271(0x109),'value':_0x5bd271(0x11c)},{'transaction':_0x4a0908}),await Setting_1[_0x5bd271(0x124)][_0x5bd271(0x106)]({'companyId':_0x45c9e2['id'],'key':'userRandom','value':_0x5bd271(0x11a)},{'transaction':_0x4a0908}),await Setting_1[_0x5bd271(0x124)][_0x5bd271(0x106)]({'companyId':_0x45c9e2['id'],'key':_0x5bd271(0x11d),'value':_0x5bd271(0x11a)},{'transaction':_0x4a0908}),await Setting_1[_0x5bd271(0x124)][_0x5bd271(0x106)]({'companyId':_0x45c9e2['id'],'key':_0x5bd271(0x126),'value':'disabled'},{'transaction':_0x4a0908}),await Setting_1['default'][_0x5bd271(0x106)]({'companyId':_0x45c9e2['id'],'key':_0x5bd271(0x10d),'value':'disabled'},{'transaction':_0x4a0908}),await _0x4a0908['commit'](),_0x45c9e2;}catch(_0x21ef59){await _0x4a0908[_0x5bd271(0x115)]();throw new AppError_1[(_0x5bd271(0x124))](_0x5bd271(0x125));}};exports[a354_0x4985f6(0x124)]=CreateCompanyService;