'use strict';function a422_0x36c6(){const _0x718b36=['../../database','call','1965OhjPcS','email','message','945675DXwoFP','create','enabled','__importDefault','../../errors/AppError','hasOwnProperty','disabled','transaction','configurable','validate','1489eLkvRc','../../models/User','get','4214144aWlXBT','ERR_COMPANY_INVALID_NAME','14etYgTp','9999999999','defineProperty','object','min','244FwIsAB','__setModuleDefault','shape','../../models/Company','4690mpewGy','1493544CwZGUw','656euoKwi','string','text','default','2169ykZJeU','__esModule','12355tDjmVb','getOwnPropertyDescriptor'];a422_0x36c6=function(){return _0x718b36;};return a422_0x36c6();}const a422_0x590c31=a422_0x18be;function a422_0x18be(_0x453dae,_0x42453b){const _0x36c6cf=a422_0x36c6();return a422_0x18be=function(_0x18be05,_0x3f2715){_0x18be05=_0x18be05-0x162;let _0xb75e7e=_0x36c6cf[_0x18be05];return _0xb75e7e;},a422_0x18be(_0x453dae,_0x42453b);}(function(_0x13e520,_0x5e5c42){const _0x4c4e50=a422_0x18be,_0x99b06a=_0x13e520();while(!![]){try{const _0x24c3f9=parseInt(_0x4c4e50(0x167))/0x1*(parseInt(_0x4c4e50(0x16c))/0x2)+-parseInt(_0x4c4e50(0x181))/0x3*(-parseInt(_0x4c4e50(0x171))/0x4)+parseInt(_0x4c4e50(0x184))/0x5+parseInt(_0x4c4e50(0x176))/0x6+-parseInt(_0x4c4e50(0x17d))/0x7*(-parseInt(_0x4c4e50(0x177))/0x8)+parseInt(_0x4c4e50(0x17b))/0x9*(-parseInt(_0x4c4e50(0x175))/0xa)+-parseInt(_0x4c4e50(0x16a))/0xb;if(_0x24c3f9===_0x5e5c42)break;else _0x99b06a['push'](_0x99b06a['shift']());}catch(_0xc203d1){_0x99b06a['push'](_0x99b06a['shift']());}}}(a422_0x36c6,0x2174a));var __createBinding=this&&this['__createBinding']||(Object[a422_0x590c31(0x185)]?function(_0x51a460,_0x38b079,_0x2ea408,_0x416331){const _0x76f11b=a422_0x590c31;if(_0x416331===undefined)_0x416331=_0x2ea408;var _0xb24368=Object[_0x76f11b(0x17e)](_0x38b079,_0x2ea408);(!_0xb24368||(_0x76f11b(0x169)in _0xb24368?!_0x38b079[_0x76f11b(0x17c)]:_0xb24368['writable']||_0xb24368[_0x76f11b(0x165)]))&&(_0xb24368={'enumerable':!![],'get':function(){return _0x38b079[_0x2ea408];}}),Object[_0x76f11b(0x16e)](_0x51a460,_0x416331,_0xb24368);}:function(_0x1eec41,_0x4a17c3,_0x1223dd,_0x2e6ec1){if(_0x2e6ec1===undefined)_0x2e6ec1=_0x1223dd;_0x1eec41[_0x2e6ec1]=_0x4a17c3[_0x1223dd];}),__setModuleDefault=this&&this[a422_0x590c31(0x172)]||(Object['create']?function(_0x1cb397,_0x3fe1a9){const _0x3d22e2=a422_0x590c31;Object[_0x3d22e2(0x16e)](_0x1cb397,_0x3d22e2(0x17a),{'enumerable':!![],'value':_0x3fe1a9});}:function(_0x2644d6,_0x2622fe){const _0x39fb8d=a422_0x590c31;_0x2644d6[_0x39fb8d(0x17a)]=_0x2622fe;}),__importStar=this&&this['__importStar']||function(_0x8ac7a1){const _0x3cb78c=a422_0x590c31;if(_0x8ac7a1&&_0x8ac7a1[_0x3cb78c(0x17c)])return _0x8ac7a1;var _0xc081c5={};if(_0x8ac7a1!=null){for(var _0x171220 in _0x8ac7a1)if(_0x171220!==_0x3cb78c(0x17a)&&Object['prototype'][_0x3cb78c(0x162)][_0x3cb78c(0x180)](_0x8ac7a1,_0x171220))__createBinding(_0xc081c5,_0x8ac7a1,_0x171220);}return __setModuleDefault(_0xc081c5,_0x8ac7a1),_0xc081c5;},__importDefault=this&&this[a422_0x590c31(0x187)]||function(_0x5c6cc7){const _0x577383=a422_0x590c31;return _0x5c6cc7&&_0x5c6cc7[_0x577383(0x17c)]?_0x5c6cc7:{'default':_0x5c6cc7};};Object[a422_0x590c31(0x16e)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a422_0x590c31(0x188))),Company_1=__importDefault(require(a422_0x590c31(0x174))),User_1=__importDefault(require(a422_0x590c31(0x168))),database_1=__importDefault(require(a422_0x590c31(0x17f))),CompaniesSettings_1=__importDefault(require('../../models/CompaniesSettings')),CreateCompanyService=async _0x30d6ed=>{const _0x385f2c=a422_0x590c31,{name:_0x4091c8,phone:_0x57b760,password:_0x4a4d41,email:_0x4d7b37,status:_0x2bdc6c,planId:_0x142dd8,dueDate:_0x4cfab6,recurrence:_0x25ac78,document:_0x2eefc5,paymentMethod:_0xee011d,companyUserName:_0x5129a2}=_0x30d6ed,_0x5f43b8=Yup[_0x385f2c(0x16f)]()[_0x385f2c(0x173)]({'name':Yup[_0x385f2c(0x178)]()[_0x385f2c(0x170)](0x2,'ERR_COMPANY_INVALID_NAME')['required'](_0x385f2c(0x16b))});try{await _0x5f43b8[_0x385f2c(0x166)]({'name':_0x4091c8});}catch(_0x1c60bc){throw new AppError_1['default'](_0x1c60bc[_0x385f2c(0x183)]);}const _0x190d60=await database_1[_0x385f2c(0x17a)][_0x385f2c(0x164)]();try{const _0x5ea910=await Company_1[_0x385f2c(0x17a)][_0x385f2c(0x185)]({'name':_0x4091c8,'phone':_0x57b760,'email':_0x4d7b37,'status':_0x2bdc6c,'planId':_0x142dd8,'dueDate':_0x4cfab6,'recurrence':_0x25ac78,'document':_0x2eefc5,'paymentMethod':_0xee011d},{'transaction':_0x190d60}),_0xe92a7e=await User_1[_0x385f2c(0x17a)][_0x385f2c(0x185)]({'name':_0x5129a2?_0x5129a2:_0x4091c8,'email':_0x5ea910[_0x385f2c(0x182)],'password':_0x4a4d41?_0x4a4d41:'mudar123','profile':'admin','companyId':_0x5ea910['id']},{'transaction':_0x190d60}),_0x4eccb3=await CompaniesSettings_1[_0x385f2c(0x17a)]['create']({'companyId':_0x5ea910['id'],'hoursCloseTicketsAuto':_0x385f2c(0x16d),'chatBotType':_0x385f2c(0x179),'acceptCallWhatsapp':_0x385f2c(0x186),'userRandom':_0x385f2c(0x186),'sendGreetingMessageOneQueues':'enabled','sendSignMessage':_0x385f2c(0x186),'sendFarewellWaitingTicket':_0x385f2c(0x163),'userRating':'disabled','sendGreetingAccepted':_0x385f2c(0x186),'CheckMsgIsGroup':_0x385f2c(0x186),'sendQueuePosition':_0x385f2c(0x163),'scheduleType':_0x385f2c(0x163),'acceptAudioMessageContact':_0x385f2c(0x186),'sendMsgTransfTicket':'disabled','enableLGPD':_0x385f2c(0x163),'requiredTag':'disabled','lgpdDeleteMessage':_0x385f2c(0x163),'lgpdHideNumber':_0x385f2c(0x163),'lgpdConsent':'disabled','lgpdLink':'','lgpdMessage':'','createdAt':new Date(),'updatedAt':new Date()},{'transaction':_0x190d60});return await _0x190d60['commit'](),_0x5ea910;}catch(_0x3f55d0){await _0x190d60['rollback']();throw new AppError_1[(_0x385f2c(0x17a))]('Não\x20foi\x20possível\x20criar\x20a\x20empresa!',_0x3f55d0);}};exports[a422_0x590c31(0x17a)]=CreateCompanyService;