'use strict';const a431_0x4476e6=a431_0x38a5;(function(_0x7bf94f,_0x4f5326){const _0xd7d719=a431_0x38a5,_0x239398=_0x7bf94f();while(!![]){try{const _0x3b0ca5=-parseInt(_0xd7d719(0x161))/0x1+-parseInt(_0xd7d719(0x177))/0x2+parseInt(_0xd7d719(0x165))/0x3+parseInt(_0xd7d719(0x160))/0x4+-parseInt(_0xd7d719(0x172))/0x5+-parseInt(_0xd7d719(0x16f))/0x6*(-parseInt(_0xd7d719(0x15d))/0x7)+-parseInt(_0xd7d719(0x170))/0x8*(-parseInt(_0xd7d719(0x17b))/0x9);if(_0x3b0ca5===_0x4f5326)break;else _0x239398['push'](_0x239398['shift']());}catch(_0x2c46b6){_0x239398['push'](_0x239398['shift']());}}}(a431_0x24fb,0x5eb99));function a431_0x38a5(_0x322649,_0x1634f0){const _0x24fb0b=a431_0x24fb();return a431_0x38a5=function(_0x38a5f2,_0x5e6ff){_0x38a5f2=_0x38a5f2-0x159;let _0x5e074e=_0x24fb0b[_0x38a5f2];return _0x5e074e;},a431_0x38a5(_0x322649,_0x1634f0);}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x279da9,_0x3b782f,_0x4100b0,_0xef7236){const _0x399767=a431_0x38a5;if(_0xef7236===undefined)_0xef7236=_0x4100b0;var _0x4f96ff=Object['getOwnPropertyDescriptor'](_0x3b782f,_0x4100b0);(!_0x4f96ff||('get'in _0x4f96ff?!_0x3b782f[_0x399767(0x178)]:_0x4f96ff[_0x399767(0x162)]||_0x4f96ff[_0x399767(0x16e)]))&&(_0x4f96ff={'enumerable':!![],'get':function(){return _0x3b782f[_0x4100b0];}}),Object['defineProperty'](_0x279da9,_0xef7236,_0x4f96ff);}:function(_0x8e3b91,_0x1859fa,_0x2f49a9,_0x185fa0){if(_0x185fa0===undefined)_0x185fa0=_0x2f49a9;_0x8e3b91[_0x185fa0]=_0x1859fa[_0x2f49a9];}),__setModuleDefault=this&&this[a431_0x4476e6(0x15e)]||(Object[a431_0x4476e6(0x16c)]?function(_0x19eaee,_0x58ffad){const _0xee2eed=a431_0x4476e6;Object['defineProperty'](_0x19eaee,_0xee2eed(0x15f),{'enumerable':!![],'value':_0x58ffad});}:function(_0x3a7c6f,_0x166456){const _0x219799=a431_0x4476e6;_0x3a7c6f[_0x219799(0x15f)]=_0x166456;}),__importStar=this&&this[a431_0x4476e6(0x17d)]||function(_0x3b0b1f){const _0x394821=a431_0x4476e6;if(_0x3b0b1f&&_0x3b0b1f[_0x394821(0x178)])return _0x3b0b1f;var _0x45a6e7={};if(_0x3b0b1f!=null){for(var _0x31ce9e in _0x3b0b1f)if(_0x31ce9e!==_0x394821(0x15f)&&Object[_0x394821(0x173)][_0x394821(0x175)]['call'](_0x3b0b1f,_0x31ce9e))__createBinding(_0x45a6e7,_0x3b0b1f,_0x31ce9e);}return __setModuleDefault(_0x45a6e7,_0x3b0b1f),_0x45a6e7;},__importDefault=this&&this['__importDefault']||function(_0x4885b5){return _0x4885b5&&_0x4885b5['__esModule']?_0x4885b5:{'default':_0x4885b5};};Object[a431_0x4476e6(0x163)](exports,a431_0x4476e6(0x178),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a431_0x4476e6(0x16d))),Company_1=__importDefault(require(a431_0x4476e6(0x174))),User_1=__importDefault(require('../../models/User')),database_1=__importDefault(require(a431_0x4476e6(0x166))),CompaniesSettings_1=__importDefault(require('../../models/CompaniesSettings')),CreateCompanyService=async _0x834a20=>{const _0x16387e=a431_0x4476e6,{name:_0x14e9d5,phone:_0x5687bd,password:_0x2a1918,email:_0x336c37,status:_0x5789bf,planId:_0x5d0fc4,dueDate:_0x2f1fa1,recurrence:_0x5ca046,document:_0x14ac24,paymentMethod:_0x4c6e4c,companyUserName:_0x104745}=_0x834a20,_0x2b54be=Yup[_0x16387e(0x176)]()[_0x16387e(0x15c)]({'name':Yup[_0x16387e(0x164)]()[_0x16387e(0x169)](0x2,_0x16387e(0x179))['required'](_0x16387e(0x179))});try{await _0x2b54be[_0x16387e(0x17a)]({'name':_0x14e9d5});}catch(_0x503eac){throw new AppError_1['default'](_0x503eac[_0x16387e(0x159)]);}const _0x400737=await database_1[_0x16387e(0x15f)][_0x16387e(0x16a)]();try{const _0x296446=await Company_1['default'][_0x16387e(0x16c)]({'name':_0x14e9d5,'phone':_0x5687bd,'email':_0x336c37,'status':_0x5789bf,'planId':_0x5d0fc4,'dueDate':_0x2f1fa1,'recurrence':_0x5ca046,'document':_0x14ac24,'paymentMethod':_0x4c6e4c},{'transaction':_0x400737}),_0xba19e1=await User_1[_0x16387e(0x15f)][_0x16387e(0x16c)]({'name':_0x104745?_0x104745:_0x14e9d5,'email':_0x296446[_0x16387e(0x171)],'password':_0x2a1918?_0x2a1918:_0x16387e(0x167),'profile':_0x16387e(0x16b),'companyId':_0x296446['id']},{'transaction':_0x400737}),_0x5dcc89=await CompaniesSettings_1[_0x16387e(0x15f)]['create']({'companyId':_0x296446['id'],'hoursCloseTicketsAuto':'9999999999','chatBotType':_0x16387e(0x168),'acceptCallWhatsapp':_0x16387e(0x15b),'userRandom':_0x16387e(0x15b),'sendGreetingMessageOneQueues':_0x16387e(0x15b),'sendSignMessage':'enabled','sendFarewellWaitingTicket':'disabled','userRating':_0x16387e(0x17c),'sendGreetingAccepted':'enabled','CheckMsgIsGroup':_0x16387e(0x15b),'sendQueuePosition':_0x16387e(0x17c),'scheduleType':_0x16387e(0x17c),'acceptAudioMessageContact':'enabled','sendMsgTransfTicket':'disabled','enableLGPD':_0x16387e(0x17c),'requiredTag':'disabled','lgpdDeleteMessage':_0x16387e(0x17c),'lgpdHideNumber':'disabled','lgpdConsent':'disabled','lgpdLink':'','lgpdMessage':'','createdAt':new Date(),'updatedAt':new Date(),'closeTicketOnTransfer':![],'DirectTicketsToWallets':![]},{'transaction':_0x400737});return await _0x400737['commit'](),_0x296446;}catch(_0x48388e){await _0x400737[_0x16387e(0x15a)]();throw new AppError_1[(_0x16387e(0x15f))]('Não\x20foi\x20possível\x20criar\x20a\x20empresa!',_0x48388e);}};exports[a431_0x4476e6(0x15f)]=CreateCompanyService;function a431_0x24fb(){const _0x1155c5=['min','transaction','admin','create','../../errors/AppError','configurable','42DFwsVU','8geiKMp','email','1742550WcFXfo','prototype','../../models/Company','hasOwnProperty','object','912782EhNSVD','__esModule','ERR_COMPANY_INVALID_NAME','validate','7200603UmUDAW','disabled','__importStar','message','rollback','enabled','shape','223650ovKlBk','__setModuleDefault','default','1278664uVEhVU','544969ofaaUz','writable','defineProperty','string','1183440hGqPHf','../../database','mudar123','text'];a431_0x24fb=function(){return _0x1155c5;};return a431_0x24fb();}