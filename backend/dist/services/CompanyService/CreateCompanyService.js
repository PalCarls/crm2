'use strict';const a400_0x21e48c=a400_0x5278;function a400_0x5278(_0x425e82,_0x1d681a){const _0x4a5f01=a400_0x4a5f();return a400_0x5278=function(_0x5278fd,_0x3177ff){_0x5278fd=_0x5278fd-0x125;let _0x20548b=_0x4a5f01[_0x5278fd];return _0x20548b;},a400_0x5278(_0x425e82,_0x1d681a);}(function(_0xaaea9b,_0x22b29e){const _0xe9136f=a400_0x5278,_0x1f9579=_0xaaea9b();while(!![]){try{const _0x340d6e=-parseInt(_0xe9136f(0x135))/0x1+parseInt(_0xe9136f(0x129))/0x2+parseInt(_0xe9136f(0x143))/0x3+-parseInt(_0xe9136f(0x140))/0x4+-parseInt(_0xe9136f(0x131))/0x5*(parseInt(_0xe9136f(0x13b))/0x6)+parseInt(_0xe9136f(0x141))/0x7*(parseInt(_0xe9136f(0x13d))/0x8)+parseInt(_0xe9136f(0x12a))/0x9;if(_0x340d6e===_0x22b29e)break;else _0x1f9579['push'](_0x1f9579['shift']());}catch(_0x455408){_0x1f9579['push'](_0x1f9579['shift']());}}}(a400_0x4a5f,0x62e25));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x13dc23,_0x48c6bc,_0x381283,_0x1c94b4){const _0x40b943=a400_0x5278;if(_0x1c94b4===undefined)_0x1c94b4=_0x381283;var _0x4e087e=Object['getOwnPropertyDescriptor'](_0x48c6bc,_0x381283);(!_0x4e087e||(_0x40b943(0x12e)in _0x4e087e?!_0x48c6bc[_0x40b943(0x146)]:_0x4e087e['writable']||_0x4e087e[_0x40b943(0x138)]))&&(_0x4e087e={'enumerable':!![],'get':function(){return _0x48c6bc[_0x381283];}}),Object[_0x40b943(0x132)](_0x13dc23,_0x1c94b4,_0x4e087e);}:function(_0x4edcab,_0x521da6,_0x3ec87d,_0x14956e){if(_0x14956e===undefined)_0x14956e=_0x3ec87d;_0x4edcab[_0x14956e]=_0x521da6[_0x3ec87d];}),__setModuleDefault=this&&this[a400_0x21e48c(0x128)]||(Object[a400_0x21e48c(0x137)]?function(_0x345f50,_0x462dea){const _0x2c9ebc=a400_0x21e48c;Object['defineProperty'](_0x345f50,_0x2c9ebc(0x145),{'enumerable':!![],'value':_0x462dea});}:function(_0x183e7f,_0x53a4cb){const _0x2af52f=a400_0x21e48c;_0x183e7f[_0x2af52f(0x145)]=_0x53a4cb;}),__importStar=this&&this[a400_0x21e48c(0x136)]||function(_0x367e6e){const _0xdbf891=a400_0x21e48c;if(_0x367e6e&&_0x367e6e[_0xdbf891(0x146)])return _0x367e6e;var _0x3c826b={};if(_0x367e6e!=null){for(var _0xfd8b8e in _0x367e6e)if(_0xfd8b8e!==_0xdbf891(0x145)&&Object[_0xdbf891(0x148)]['hasOwnProperty']['call'](_0x367e6e,_0xfd8b8e))__createBinding(_0x3c826b,_0x367e6e,_0xfd8b8e);}return __setModuleDefault(_0x3c826b,_0x367e6e),_0x3c826b;},__importDefault=this&&this[a400_0x21e48c(0x13c)]||function(_0x5345df){const _0xf60a80=a400_0x21e48c;return _0x5345df&&_0x5345df[_0xf60a80(0x146)]?_0x5345df:{'default':_0x5345df};};Object['defineProperty'](exports,a400_0x21e48c(0x146),{'value':!![]});const Yup=__importStar(require(a400_0x21e48c(0x12f))),AppError_1=__importDefault(require(a400_0x21e48c(0x125))),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require(a400_0x21e48c(0x147))),database_1=__importDefault(require(a400_0x21e48c(0x139))),CompaniesSettings_1=__importDefault(require('../../models/CompaniesSettings')),CreateCompanyService=async _0x526720=>{const _0x400934=a400_0x21e48c,{name:_0x45d7aa,phone:_0x3346a0,password:_0x1b37c7,email:_0x1ed287,status:_0x2ba424,planId:_0x1f3c51,dueDate:_0x5d1299,recurrence:_0x1969dc,document:_0x2d191c,paymentMethod:_0x5acfe6,companyUserName:_0x1a063b}=_0x526720,_0x3d3993=Yup[_0x400934(0x127)]()[_0x400934(0x12d)]({'name':Yup[_0x400934(0x12c)]()['min'](0x2,'ERR_COMPANY_INVALID_NAME')['required'](_0x400934(0x133))});try{await _0x3d3993['validate']({'name':_0x45d7aa});}catch(_0x467e88){throw new AppError_1[(_0x400934(0x145))](_0x467e88[_0x400934(0x13e)]);}const _0x4b942a=await database_1[_0x400934(0x145)][_0x400934(0x13f)]();try{const _0x1a2342=await Company_1[_0x400934(0x145)][_0x400934(0x137)]({'name':_0x45d7aa,'phone':_0x3346a0,'email':_0x1ed287,'status':_0x2ba424,'planId':_0x1f3c51,'dueDate':_0x5d1299,'recurrence':_0x1969dc,'document':_0x2d191c,'paymentMethod':_0x5acfe6},{'transaction':_0x4b942a});return await User_1[_0x400934(0x145)][_0x400934(0x137)]({'name':_0x1a063b?_0x1a063b:_0x45d7aa,'email':_0x1a2342[_0x400934(0x142)],'password':_0x1b37c7?_0x1b37c7:_0x400934(0x12b),'profile':'admin','companyId':_0x1a2342['id']},{'transaction':_0x4b942a}),await CompaniesSettings_1['default']['create']({'companyId':_0x1a2342['id'],'hoursCloseTicketsAuto':_0x400934(0x134),'chatBotType':'text','acceptCallWhatsapp':'enabled','userRandom':_0x400934(0x126),'sendGreetingMessageOneQueues':_0x400934(0x126),'sendSignMessage':_0x400934(0x126),'sendFarewellWaitingTicket':_0x400934(0x126),'userRating':_0x400934(0x126),'sendGreetingAccepted':'enabled','CheckMsgIsGroup':_0x400934(0x126),'sendQueuePosition':_0x400934(0x126),'scheduleType':_0x400934(0x13a),'acceptAudioMessageContact':_0x400934(0x126),'sendMsgTransfTicket':_0x400934(0x126),'enableLGPD':_0x400934(0x13a),'requiredTag':'disabled','lgpdDeleteMessage':_0x400934(0x13a),'lgpdHideNumber':_0x400934(0x13a),'lgpdConsent':_0x400934(0x13a),'lgpdLink':'','lgpdMessage':'','createdAt':new Date(),'updatedAt':new Date()},{'transaction':_0x4b942a}),await _0x4b942a[_0x400934(0x144)](),_0x1a2342;}catch(_0x58cc61){await _0x4b942a[_0x400934(0x130)]();throw new AppError_1[(_0x400934(0x145))]('Não\x20foi\x20possível\x20criar\x20a\x20empresa!');}};function a400_0x4a5f(){const _0x3bed4f=['rollback','5CGGszr','defineProperty','ERR_COMPANY_INVALID_NAME','9999999999','367692wRITxJ','__importStar','create','configurable','../../database','disabled','2078160AiPjrQ','__importDefault','16IYzLCk','message','transaction','1507100ewhBZU','1236914ZKekNd','email','885189rgXKNt','commit','default','__esModule','../../models/User','prototype','../../errors/AppError','enabled','object','__setModuleDefault','1063136KruJqZ','2842389ENYUOj','mudar123','string','shape','get','yup'];a400_0x4a5f=function(){return _0x3bed4f;};return a400_0x4a5f();}exports[a400_0x21e48c(0x145)]=CreateCompanyService;