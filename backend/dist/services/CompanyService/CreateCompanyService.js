'use strict';const a384_0x2753d2=a384_0x214b;(function(_0x206270,_0x55da37){const _0x46e245=a384_0x214b,_0x3c8313=_0x206270();while(!![]){try{const _0x3fc569=-parseInt(_0x46e245(0x194))/0x1*(parseInt(_0x46e245(0x17d))/0x2)+-parseInt(_0x46e245(0x19f))/0x3+-parseInt(_0x46e245(0x1a2))/0x4*(parseInt(_0x46e245(0x191))/0x5)+parseInt(_0x46e245(0x17e))/0x6*(parseInt(_0x46e245(0x18c))/0x7)+-parseInt(_0x46e245(0x1a3))/0x8+-parseInt(_0x46e245(0x192))/0x9*(-parseInt(_0x46e245(0x193))/0xa)+parseInt(_0x46e245(0x19d))/0xb*(parseInt(_0x46e245(0x17b))/0xc);if(_0x3fc569===_0x55da37)break;else _0x3c8313['push'](_0x3c8313['shift']());}catch(_0xd95332){_0x3c8313['push'](_0x3c8313['shift']());}}}(a384_0x32c5,0x6d56a));var __createBinding=this&&this[a384_0x2753d2(0x195)]||(Object['create']?function(_0x3bb2cc,_0x5e0b0e,_0x23f25d,_0x3f3825){const _0x175459=a384_0x2753d2;if(_0x3f3825===undefined)_0x3f3825=_0x23f25d;var _0x77919=Object['getOwnPropertyDescriptor'](_0x5e0b0e,_0x23f25d);(!_0x77919||(_0x175459(0x188)in _0x77919?!_0x5e0b0e[_0x175459(0x183)]:_0x77919[_0x175459(0x187)]||_0x77919[_0x175459(0x185)]))&&(_0x77919={'enumerable':!![],'get':function(){return _0x5e0b0e[_0x23f25d];}}),Object[_0x175459(0x199)](_0x3bb2cc,_0x3f3825,_0x77919);}:function(_0x3416ee,_0xec5c4a,_0x33d81f,_0x50ab15){if(_0x50ab15===undefined)_0x50ab15=_0x33d81f;_0x3416ee[_0x50ab15]=_0xec5c4a[_0x33d81f];}),__setModuleDefault=this&&this[a384_0x2753d2(0x186)]||(Object['create']?function(_0x888e21,_0x8a76cb){const _0x15e17b=a384_0x2753d2;Object[_0x15e17b(0x199)](_0x888e21,_0x15e17b(0x198),{'enumerable':!![],'value':_0x8a76cb});}:function(_0x38a03e,_0x9f7621){const _0x58d4b8=a384_0x2753d2;_0x38a03e[_0x58d4b8(0x198)]=_0x9f7621;}),__importStar=this&&this[a384_0x2753d2(0x18e)]||function(_0xd716eb){const _0x2ac168=a384_0x2753d2;if(_0xd716eb&&_0xd716eb[_0x2ac168(0x183)])return _0xd716eb;var _0x46762c={};if(_0xd716eb!=null){for(var _0x268bf0 in _0xd716eb)if(_0x268bf0!==_0x2ac168(0x198)&&Object['prototype'][_0x2ac168(0x18f)][_0x2ac168(0x18a)](_0xd716eb,_0x268bf0))__createBinding(_0x46762c,_0xd716eb,_0x268bf0);}return __setModuleDefault(_0x46762c,_0xd716eb),_0x46762c;},__importDefault=this&&this[a384_0x2753d2(0x17c)]||function(_0x3aa203){return _0x3aa203&&_0x3aa203['__esModule']?_0x3aa203:{'default':_0x3aa203};};function a384_0x32c5(){const _0x43acc4=['1262697kLyouB','create','enableLGPD','1225852KLSCKv','2345232CUJVOX','acceptCallWhatsapp','../../models/User','sendGreetingAccepted','scheduleType','60VeGtXL','__importDefault','202vwKvoA','6VmUDij','text','transaction','object','shape','__esModule','enabled','configurable','__setModuleDefault','writable','get','ERR_COMPANY_INVALID_NAME','call','min','1246357kbnQbQ','lgpdDeleteMessage','__importStar','hasOwnProperty','userRandom','10PzWiuM','4582404QQBdTR','10EJPYKH','2153GmBven','__createBinding','string','lgpdHideNumber','default','defineProperty','disabled','admin','rollback','2871165OLrKiO','../../models/Company'];a384_0x32c5=function(){return _0x43acc4;};return a384_0x32c5();}function a384_0x214b(_0xec6870,_0x283127){const _0x32c591=a384_0x32c5();return a384_0x214b=function(_0x214b1c,_0x330071){_0x214b1c=_0x214b1c-0x177;let _0x46e954=_0x32c591[_0x214b1c];return _0x46e954;},a384_0x214b(_0xec6870,_0x283127);}Object[a384_0x2753d2(0x199)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),Company_1=__importDefault(require(a384_0x2753d2(0x19e))),User_1=__importDefault(require(a384_0x2753d2(0x178))),Setting_1=__importDefault(require('../../models/Setting')),database_1=__importDefault(require('../../database')),CreateCompanyService=async _0x4a817f=>{const _0x30ccb3=a384_0x2753d2,{name:_0x258862,phone:_0x4d66f5,password:_0x3abac2,email:_0x28e796,status:_0x1f3064,planId:_0x5eb490,dueDate:_0x5b6445,recurrence:_0x1fb7eb,document:_0x467117,paymentMethod:_0x5eb74a,companyUserName:_0x594bb4}=_0x4a817f,_0x4d8869=Yup[_0x30ccb3(0x181)]()[_0x30ccb3(0x182)]({'name':Yup[_0x30ccb3(0x196)]()[_0x30ccb3(0x18b)](0x2,_0x30ccb3(0x189))['required'](_0x30ccb3(0x189))});try{await _0x4d8869['validate']({'name':_0x258862});}catch(_0x3b1ccf){throw new AppError_1[(_0x30ccb3(0x198))](_0x3b1ccf['message']);}const _0x43f1c4=await database_1[_0x30ccb3(0x198)][_0x30ccb3(0x180)]();try{const _0x20c228=await Company_1[_0x30ccb3(0x198)][_0x30ccb3(0x1a0)]({'name':_0x258862,'phone':_0x4d66f5,'email':_0x28e796,'status':_0x1f3064,'planId':_0x5eb490,'dueDate':_0x5b6445,'recurrence':_0x1fb7eb,'document':_0x467117,'paymentMethod':_0x5eb74a},{'transaction':_0x43f1c4});return await User_1[_0x30ccb3(0x198)][_0x30ccb3(0x1a0)]({'name':_0x594bb4?_0x594bb4:_0x258862,'email':_0x20c228['email'],'password':_0x3abac2?_0x3abac2:'mudar123','profile':_0x30ccb3(0x19b),'companyId':_0x20c228['id']},{'transaction':_0x43f1c4}),await Setting_1[_0x30ccb3(0x198)][_0x30ccb3(0x1a0)]({'companyId':_0x20c228['id'],'key':'sendSignMessage','value':_0x30ccb3(0x184)},{'transaction':_0x43f1c4}),await Setting_1[_0x30ccb3(0x198)]['create']({'companyId':_0x20c228['id'],'key':_0x30ccb3(0x177),'value':_0x30ccb3(0x19a)},{'transaction':_0x43f1c4}),await Setting_1[_0x30ccb3(0x198)][_0x30ccb3(0x1a0)]({'companyId':_0x20c228['id'],'key':_0x30ccb3(0x17a),'value':'disabled'},{'transaction':_0x43f1c4}),await Setting_1[_0x30ccb3(0x198)][_0x30ccb3(0x1a0)]({'companyId':_0x20c228['id'],'key':'userRating','value':_0x30ccb3(0x19a)},{'transaction':_0x43f1c4}),await Setting_1['default']['create']({'companyId':_0x20c228['id'],'key':'chatBotType','value':_0x30ccb3(0x17f)},{'transaction':_0x43f1c4}),await Setting_1[_0x30ccb3(0x198)][_0x30ccb3(0x1a0)]({'companyId':_0x20c228['id'],'key':_0x30ccb3(0x190),'value':_0x30ccb3(0x19a)},{'transaction':_0x43f1c4}),await Setting_1[_0x30ccb3(0x198)][_0x30ccb3(0x1a0)]({'companyId':_0x20c228['id'],'key':'sendMsgTransfTicket','value':_0x30ccb3(0x19a)},{'transaction':_0x43f1c4}),await Setting_1[_0x30ccb3(0x198)][_0x30ccb3(0x1a0)]({'companyId':_0x20c228['id'],'key':_0x30ccb3(0x179),'value':_0x30ccb3(0x19a)},{'transaction':_0x43f1c4}),await Setting_1['default'][_0x30ccb3(0x1a0)]({'companyId':_0x20c228['id'],'key':_0x30ccb3(0x1a1),'value':'disabled'},{'transaction':_0x43f1c4}),await Setting_1['default'][_0x30ccb3(0x1a0)]({'companyId':_0x20c228['id'],'key':'lgpdConsent','value':_0x30ccb3(0x19a)},{'transaction':_0x43f1c4}),await Setting_1['default']['create']({'companyId':_0x20c228['id'],'key':_0x30ccb3(0x18d),'value':_0x30ccb3(0x19a)},{'transaction':_0x43f1c4}),await Setting_1[_0x30ccb3(0x198)]['create']({'companyId':_0x20c228['id'],'key':_0x30ccb3(0x197),'value':'disabled'},{'transaction':_0x43f1c4}),await Setting_1[_0x30ccb3(0x198)][_0x30ccb3(0x1a0)]({'companyId':_0x20c228['id'],'key':'requiredTag','value':'disabled'},{'transaction':_0x43f1c4}),await _0x43f1c4['commit'](),_0x20c228;}catch(_0x20b6a3){await _0x43f1c4[_0x30ccb3(0x19c)]();throw new AppError_1[(_0x30ccb3(0x198))]('Não\x20foi\x20possível\x20criar\x20a\x20empresa!');}};exports['default']=CreateCompanyService;