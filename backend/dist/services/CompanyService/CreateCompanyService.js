'use strict';const a422_0x13942d=a422_0x318e;function a422_0x318e(_0x543900,_0x5838aa){const _0x335c27=a422_0x335c();return a422_0x318e=function(_0x318eba,_0x15d7e7){_0x318eba=_0x318eba-0x1db;let _0x4f3522=_0x335c27[_0x318eba];return _0x4f3522;},a422_0x318e(_0x543900,_0x5838aa);}(function(_0x578065,_0x145d46){const _0x5c3d34=a422_0x318e,_0x1e09a8=_0x578065();while(!![]){try{const _0x19f43b=-parseInt(_0x5c3d34(0x1fd))/0x1+parseInt(_0x5c3d34(0x1dc))/0x2+parseInt(_0x5c3d34(0x1ea))/0x3+-parseInt(_0x5c3d34(0x1e9))/0x4+-parseInt(_0x5c3d34(0x1e4))/0x5*(parseInt(_0x5c3d34(0x1f6))/0x6)+-parseInt(_0x5c3d34(0x201))/0x7+parseInt(_0x5c3d34(0x1df))/0x8;if(_0x19f43b===_0x145d46)break;else _0x1e09a8['push'](_0x1e09a8['shift']());}catch(_0x55156d){_0x1e09a8['push'](_0x1e09a8['shift']());}}}(a422_0x335c,0x50fcd));function a422_0x335c(){const _0x599705=['__esModule','__importStar','30FDEDwW','required','writable','enabled','__createBinding','prototype','message','123517mzbiqF','__setModuleDefault','create','get','3395889YpofBo','admin','disabled','126256wlxHFR','min','__importDefault','8736056ljZHBa','hasOwnProperty','call','../../database','Não\x20foi\x20possível\x20criar\x20a\x20empresa!','137755qHPfzJ','yup','getOwnPropertyDescriptor','../../models/CompaniesSettings','ERR_COMPANY_INVALID_NAME','2568632PTCpiY','1695441DxmiNq','validate','defineProperty','../../models/User','object','transaction','../../models/Company','commit','string','default'];a422_0x335c=function(){return _0x599705;};return a422_0x335c();}var __createBinding=this&&this[a422_0x13942d(0x1fa)]||(Object[a422_0x13942d(0x1ff)]?function(_0x1155bf,_0x25d92e,_0xac0b76,_0x353e67){const _0x3a7fa0=a422_0x13942d;if(_0x353e67===undefined)_0x353e67=_0xac0b76;var _0x4519f5=Object[_0x3a7fa0(0x1e6)](_0x25d92e,_0xac0b76);(!_0x4519f5||(_0x3a7fa0(0x200)in _0x4519f5?!_0x25d92e[_0x3a7fa0(0x1f4)]:_0x4519f5[_0x3a7fa0(0x1f8)]||_0x4519f5['configurable']))&&(_0x4519f5={'enumerable':!![],'get':function(){return _0x25d92e[_0xac0b76];}}),Object[_0x3a7fa0(0x1ec)](_0x1155bf,_0x353e67,_0x4519f5);}:function(_0x58cc18,_0x43d8d7,_0x419d85,_0x7edd3){if(_0x7edd3===undefined)_0x7edd3=_0x419d85;_0x58cc18[_0x7edd3]=_0x43d8d7[_0x419d85];}),__setModuleDefault=this&&this[a422_0x13942d(0x1fe)]||(Object[a422_0x13942d(0x1ff)]?function(_0x5c9d92,_0x5e40cb){const _0x24d8b4=a422_0x13942d;Object[_0x24d8b4(0x1ec)](_0x5c9d92,_0x24d8b4(0x1f3),{'enumerable':!![],'value':_0x5e40cb});}:function(_0x596d68,_0x1efcf5){const _0x1f6e49=a422_0x13942d;_0x596d68[_0x1f6e49(0x1f3)]=_0x1efcf5;}),__importStar=this&&this[a422_0x13942d(0x1f5)]||function(_0x5e9d7c){const _0x5300f9=a422_0x13942d;if(_0x5e9d7c&&_0x5e9d7c[_0x5300f9(0x1f4)])return _0x5e9d7c;var _0x2abff6={};if(_0x5e9d7c!=null){for(var _0x4f5bb3 in _0x5e9d7c)if(_0x4f5bb3!==_0x5300f9(0x1f3)&&Object[_0x5300f9(0x1fb)][_0x5300f9(0x1e0)][_0x5300f9(0x1e1)](_0x5e9d7c,_0x4f5bb3))__createBinding(_0x2abff6,_0x5e9d7c,_0x4f5bb3);}return __setModuleDefault(_0x2abff6,_0x5e9d7c),_0x2abff6;},__importDefault=this&&this[a422_0x13942d(0x1de)]||function(_0x520db5){const _0x4f0de6=a422_0x13942d;return _0x520db5&&_0x520db5[_0x4f0de6(0x1f4)]?_0x520db5:{'default':_0x520db5};};Object[a422_0x13942d(0x1ec)](exports,a422_0x13942d(0x1f4),{'value':!![]});const Yup=__importStar(require(a422_0x13942d(0x1e5))),AppError_1=__importDefault(require('../../errors/AppError')),Company_1=__importDefault(require(a422_0x13942d(0x1f0))),User_1=__importDefault(require(a422_0x13942d(0x1ed))),database_1=__importDefault(require(a422_0x13942d(0x1e2))),CompaniesSettings_1=__importDefault(require(a422_0x13942d(0x1e7))),CreateCompanyService=async _0x3acca6=>{const _0x562c39=a422_0x13942d,{name:_0x3bfd11,phone:_0x4600ca,password:_0x33e833,email:_0x15fbfe,status:_0x1d8c2d,planId:_0x28ab74,dueDate:_0x529397,recurrence:_0x381abb,document:_0x52db52,paymentMethod:_0x25e5f8,companyUserName:_0x44e264}=_0x3acca6,_0x20c0db=Yup[_0x562c39(0x1ee)]()['shape']({'name':Yup[_0x562c39(0x1f2)]()[_0x562c39(0x1dd)](0x2,_0x562c39(0x1e8))[_0x562c39(0x1f7)](_0x562c39(0x1e8))});try{await _0x20c0db[_0x562c39(0x1eb)]({'name':_0x3bfd11});}catch(_0x4eb775){throw new AppError_1[(_0x562c39(0x1f3))](_0x4eb775[_0x562c39(0x1fc)]);}const _0x335413=await database_1[_0x562c39(0x1f3)][_0x562c39(0x1ef)]();try{const _0x5ca2c1=await Company_1[_0x562c39(0x1f3)][_0x562c39(0x1ff)]({'name':_0x3bfd11,'phone':_0x4600ca,'email':_0x15fbfe,'status':_0x1d8c2d,'planId':_0x28ab74,'dueDate':_0x529397,'recurrence':_0x381abb,'document':_0x52db52,'paymentMethod':_0x25e5f8},{'transaction':_0x335413}),_0x1c7c4c=await User_1[_0x562c39(0x1f3)][_0x562c39(0x1ff)]({'name':_0x44e264?_0x44e264:_0x3bfd11,'email':_0x5ca2c1['email'],'password':_0x33e833?_0x33e833:'mudar123','profile':_0x562c39(0x202),'companyId':_0x5ca2c1['id']},{'transaction':_0x335413}),_0x1b990a=await CompaniesSettings_1[_0x562c39(0x1f3)][_0x562c39(0x1ff)]({'companyId':_0x5ca2c1['id'],'hoursCloseTicketsAuto':'9999999999','chatBotType':'text','acceptCallWhatsapp':_0x562c39(0x1f9),'userRandom':'enabled','sendGreetingMessageOneQueues':_0x562c39(0x1f9),'sendSignMessage':_0x562c39(0x1f9),'sendFarewellWaitingTicket':'disabled','userRating':_0x562c39(0x1db),'sendGreetingAccepted':'enabled','CheckMsgIsGroup':_0x562c39(0x1f9),'sendQueuePosition':_0x562c39(0x1db),'scheduleType':'disabled','acceptAudioMessageContact':_0x562c39(0x1f9),'sendMsgTransfTicket':'disabled','enableLGPD':_0x562c39(0x1db),'requiredTag':'disabled','lgpdDeleteMessage':_0x562c39(0x1db),'lgpdHideNumber':_0x562c39(0x1db),'lgpdConsent':_0x562c39(0x1db),'lgpdLink':'','lgpdMessage':'','createdAt':new Date(),'updatedAt':new Date()},{'transaction':_0x335413});return await _0x335413[_0x562c39(0x1f1)](),_0x5ca2c1;}catch(_0x24bb0b){await _0x335413['rollback']();throw new AppError_1[(_0x562c39(0x1f3))](_0x562c39(0x1e3),_0x24bb0b);}};exports[a422_0x13942d(0x1f3)]=CreateCompanyService;