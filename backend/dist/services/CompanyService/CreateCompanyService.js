'use strict';const a400_0x4e780a=a400_0xdfde;function a400_0xdfde(_0x179a68,_0x32a9d9){const _0x2d969f=a400_0x2d96();return a400_0xdfde=function(_0xdfdebc,_0x316afb){_0xdfdebc=_0xdfdebc-0x1a7;let _0x41b7fe=_0x2d969f[_0xdfdebc];return _0x41b7fe;},a400_0xdfde(_0x179a68,_0x32a9d9);}(function(_0x12e274,_0x367f4c){const _0x1a8944=a400_0xdfde,_0x41a765=_0x12e274();while(!![]){try{const _0x26729c=parseInt(_0x1a8944(0x1c2))/0x1*(parseInt(_0x1a8944(0x1bd))/0x2)+parseInt(_0x1a8944(0x1c3))/0x3+parseInt(_0x1a8944(0x1c6))/0x4+parseInt(_0x1a8944(0x1b8))/0x5*(parseInt(_0x1a8944(0x1ab))/0x6)+parseInt(_0x1a8944(0x1c4))/0x7+parseInt(_0x1a8944(0x1b1))/0x8*(parseInt(_0x1a8944(0x1ce))/0x9)+-parseInt(_0x1a8944(0x1b4))/0xa;if(_0x26729c===_0x367f4c)break;else _0x41a765['push'](_0x41a765['shift']());}catch(_0x1de0b0){_0x41a765['push'](_0x41a765['shift']());}}}(a400_0x2d96,0xe8d51));function a400_0x2d96(){const _0x1b0728=['string','call','enabled','525DzTRQA','../../database','create','yup','validate','36kLDhyp','defineProperty','text','default','__createBinding','2757wfGiVp','3297636TVOThA','12931065rQzaqc','object','6465872imbApV','../../models/CompaniesSettings','rollback','../../models/User','ERR_COMPANY_INVALID_NAME','configurable','../../errors/AppError','__importDefault','35829CfcjdL','disabled','../../models/Company','__importStar','__setModuleDefault','76938kPOncS','admin','prototype','__esModule','shape','required','1576WKFdFh','transaction','mudar123','57895920JgyiNb'];a400_0x2d96=function(){return _0x1b0728;};return a400_0x2d96();}var __createBinding=this&&this[a400_0x4e780a(0x1c1)]||(Object[a400_0x4e780a(0x1ba)]?function(_0x1c4e77,_0x345eff,_0x433876,_0x5ae1cf){const _0x40fd25=a400_0x4e780a;if(_0x5ae1cf===undefined)_0x5ae1cf=_0x433876;var _0x5244b5=Object['getOwnPropertyDescriptor'](_0x345eff,_0x433876);(!_0x5244b5||('get'in _0x5244b5?!_0x345eff[_0x40fd25(0x1ae)]:_0x5244b5['writable']||_0x5244b5[_0x40fd25(0x1cb)]))&&(_0x5244b5={'enumerable':!![],'get':function(){return _0x345eff[_0x433876];}}),Object[_0x40fd25(0x1be)](_0x1c4e77,_0x5ae1cf,_0x5244b5);}:function(_0x18ce3b,_0x185002,_0x4a189f,_0x455552){if(_0x455552===undefined)_0x455552=_0x4a189f;_0x18ce3b[_0x455552]=_0x185002[_0x4a189f];}),__setModuleDefault=this&&this[a400_0x4e780a(0x1aa)]||(Object[a400_0x4e780a(0x1ba)]?function(_0xc34236,_0x32b8b5){const _0x1db545=a400_0x4e780a;Object[_0x1db545(0x1be)](_0xc34236,_0x1db545(0x1c0),{'enumerable':!![],'value':_0x32b8b5});}:function(_0x30f0e6,_0x4a877b){const _0x58d71a=a400_0x4e780a;_0x30f0e6[_0x58d71a(0x1c0)]=_0x4a877b;}),__importStar=this&&this[a400_0x4e780a(0x1a9)]||function(_0xf11721){const _0x1bc9b4=a400_0x4e780a;if(_0xf11721&&_0xf11721['__esModule'])return _0xf11721;var _0xf36542={};if(_0xf11721!=null){for(var _0x595398 in _0xf11721)if(_0x595398!==_0x1bc9b4(0x1c0)&&Object[_0x1bc9b4(0x1ad)]['hasOwnProperty'][_0x1bc9b4(0x1b6)](_0xf11721,_0x595398))__createBinding(_0xf36542,_0xf11721,_0x595398);}return __setModuleDefault(_0xf36542,_0xf11721),_0xf36542;},__importDefault=this&&this[a400_0x4e780a(0x1cd)]||function(_0x1ae6b8){const _0x6bc775=a400_0x4e780a;return _0x1ae6b8&&_0x1ae6b8[_0x6bc775(0x1ae)]?_0x1ae6b8:{'default':_0x1ae6b8};};Object[a400_0x4e780a(0x1be)](exports,a400_0x4e780a(0x1ae),{'value':!![]});const Yup=__importStar(require(a400_0x4e780a(0x1bb))),AppError_1=__importDefault(require(a400_0x4e780a(0x1cc))),Company_1=__importDefault(require(a400_0x4e780a(0x1a8))),User_1=__importDefault(require(a400_0x4e780a(0x1c9))),database_1=__importDefault(require(a400_0x4e780a(0x1b9))),CompaniesSettings_1=__importDefault(require(a400_0x4e780a(0x1c7))),CreateCompanyService=async _0x2b8ef4=>{const _0x51278f=a400_0x4e780a,{name:_0x2914f4,phone:_0x5d7b6a,password:_0x505cb0,email:_0xf96fc0,status:_0x44b794,planId:_0x4c499b,dueDate:_0x51e946,recurrence:_0x16a19b,document:_0x14efa0,paymentMethod:_0xd1f0d0,companyUserName:_0x1a20ee}=_0x2b8ef4,_0xf3ea50=Yup[_0x51278f(0x1c5)]()[_0x51278f(0x1af)]({'name':Yup[_0x51278f(0x1b5)]()['min'](0x2,_0x51278f(0x1ca))[_0x51278f(0x1b0)](_0x51278f(0x1ca))});try{await _0xf3ea50[_0x51278f(0x1bc)]({'name':_0x2914f4});}catch(_0x23b2c9){throw new AppError_1[(_0x51278f(0x1c0))](_0x23b2c9['message']);}const _0x24a790=await database_1[_0x51278f(0x1c0)][_0x51278f(0x1b2)]();try{const _0x5e55e9=await Company_1[_0x51278f(0x1c0)][_0x51278f(0x1ba)]({'name':_0x2914f4,'phone':_0x5d7b6a,'email':_0xf96fc0,'status':_0x44b794,'planId':_0x4c499b,'dueDate':_0x51e946,'recurrence':_0x16a19b,'document':_0x14efa0,'paymentMethod':_0xd1f0d0},{'transaction':_0x24a790});return await User_1['default'][_0x51278f(0x1ba)]({'name':_0x1a20ee?_0x1a20ee:_0x2914f4,'email':_0x5e55e9['email'],'password':_0x505cb0?_0x505cb0:_0x51278f(0x1b3),'profile':_0x51278f(0x1ac),'companyId':_0x5e55e9['id']},{'transaction':_0x24a790}),await CompaniesSettings_1[_0x51278f(0x1c0)][_0x51278f(0x1ba)]({'companyId':_0x5e55e9['id'],'hoursCloseTicketsAuto':'9999999999','chatBotType':_0x51278f(0x1bf),'acceptCallWhatsapp':_0x51278f(0x1b7),'userRandom':'enabled','sendGreetingMessageOneQueues':_0x51278f(0x1b7),'sendSignMessage':'enabled','sendFarewellWaitingTicket':_0x51278f(0x1b7),'userRating':_0x51278f(0x1b7),'sendGreetingAccepted':_0x51278f(0x1b7),'CheckMsgIsGroup':_0x51278f(0x1b7),'sendQueuePosition':'enabled','scheduleType':_0x51278f(0x1a7),'acceptAudioMessageContact':'enabled','sendMsgTransfTicket':_0x51278f(0x1b7),'enableLGPD':_0x51278f(0x1a7),'requiredTag':_0x51278f(0x1a7),'lgpdDeleteMessage':_0x51278f(0x1a7),'lgpdHideNumber':'disabled','lgpdConsent':_0x51278f(0x1a7),'lgpdLink':'','lgpdMessage':'','createdAt':new Date(),'updatedAt':new Date()},{'transaction':_0x24a790}),await _0x24a790['commit'](),_0x5e55e9;}catch(_0x1916ca){await _0x24a790[_0x51278f(0x1c8)]();throw new AppError_1[(_0x51278f(0x1c0))]('Não\x20foi\x20possível\x20criar\x20a\x20empresa!');}};exports['default']=CreateCompanyService;