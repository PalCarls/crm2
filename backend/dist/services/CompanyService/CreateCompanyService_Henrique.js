'use strict';function a386_0x3864(){const _0x52b593=['admin','log','ðŸš€\x20Console\x20Log\x20:\x20companyData.password','6980lplVKw','8088787gbmJFT','22368467dHisYL','object','create','validate','string','getOwnPropertyDescriptor','__importDefault','20QgUeyu','shape','../../models/User','../../models/Company','__createBinding','password','8fWFQWz','test','151MpRAuC','get','3714005LUfxrr','findOrCreate','__esModule','defineProperty','required','ERR_COMPANY_INVALID_NAME','ERR_COMPANY_NAME_ALREADY_EXISTS','default','call','3536292HMgYav','4gtPiOu','hasOwnProperty','7418286GTqsOU','prototype','../../models/Setting','__setModuleDefault','findOne','1219971DPTZZU','campaignsEnabled'];a386_0x3864=function(){return _0x52b593;};return a386_0x3864();}const a386_0xd616b0=a386_0x355e;(function(_0x31b16f,_0x28d0ad){const _0x58cde3=a386_0x355e,_0xc0fa64=_0x31b16f();while(!![]){try{const _0x177594=-parseInt(_0x58cde3(0x196))/0x1*(parseInt(_0x58cde3(0x185))/0x2)+parseInt(_0x58cde3(0x1a9))/0x3+parseInt(_0x58cde3(0x1a2))/0x4*(-parseInt(_0x58cde3(0x198))/0x5)+-parseInt(_0x58cde3(0x1a1))/0x6+-parseInt(_0x58cde3(0x186))/0x7+-parseInt(_0x58cde3(0x194))/0x8*(parseInt(_0x58cde3(0x1a4))/0x9)+parseInt(_0x58cde3(0x18e))/0xa*(parseInt(_0x58cde3(0x187))/0xb);if(_0x177594===_0x28d0ad)break;else _0xc0fa64['push'](_0xc0fa64['shift']());}catch(_0x52f281){_0xc0fa64['push'](_0xc0fa64['shift']());}}}(a386_0x3864,0x9af3b));var __createBinding=this&&this[a386_0xd616b0(0x192)]||(Object['create']?function(_0x30ae69,_0x881937,_0x20da14,_0x9f8f90){const _0xe262e9=a386_0xd616b0;if(_0x9f8f90===undefined)_0x9f8f90=_0x20da14;var _0x1daf8a=Object[_0xe262e9(0x18c)](_0x881937,_0x20da14);(!_0x1daf8a||(_0xe262e9(0x197)in _0x1daf8a?!_0x881937['__esModule']:_0x1daf8a['writable']||_0x1daf8a['configurable']))&&(_0x1daf8a={'enumerable':!![],'get':function(){return _0x881937[_0x20da14];}}),Object['defineProperty'](_0x30ae69,_0x9f8f90,_0x1daf8a);}:function(_0x371869,_0x337d10,_0x24e15a,_0x2c022e){if(_0x2c022e===undefined)_0x2c022e=_0x24e15a;_0x371869[_0x2c022e]=_0x337d10[_0x24e15a];}),__setModuleDefault=this&&this[a386_0xd616b0(0x1a7)]||(Object[a386_0xd616b0(0x189)]?function(_0x4965d6,_0x2786d6){const _0x2ba5f6=a386_0xd616b0;Object[_0x2ba5f6(0x19b)](_0x4965d6,_0x2ba5f6(0x19f),{'enumerable':!![],'value':_0x2786d6});}:function(_0x1037f5,_0x5e8341){const _0x5e4951=a386_0xd616b0;_0x1037f5[_0x5e4951(0x19f)]=_0x5e8341;}),__importStar=this&&this['__importStar']||function(_0x40b071){const _0x1455e7=a386_0xd616b0;if(_0x40b071&&_0x40b071[_0x1455e7(0x19a)])return _0x40b071;var _0x32c71e={};if(_0x40b071!=null){for(var _0x5e1150 in _0x40b071)if(_0x5e1150!==_0x1455e7(0x19f)&&Object[_0x1455e7(0x1a5)][_0x1455e7(0x1a3)][_0x1455e7(0x1a0)](_0x40b071,_0x5e1150))__createBinding(_0x32c71e,_0x40b071,_0x5e1150);}return __setModuleDefault(_0x32c71e,_0x40b071),_0x32c71e;},__importDefault=this&&this[a386_0xd616b0(0x18d)]||function(_0x407735){const _0x312d4f=a386_0xd616b0;return _0x407735&&_0x407735[_0x312d4f(0x19a)]?_0x407735:{'default':_0x407735};};Object[a386_0xd616b0(0x19b)](exports,a386_0xd616b0(0x19a),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),Company_1=__importDefault(require(a386_0xd616b0(0x191))),User_1=__importDefault(require(a386_0xd616b0(0x190))),Setting_1=__importDefault(require(a386_0xd616b0(0x1a6))),CreateCompanyService=async _0x5640f3=>{const _0x3485e1=a386_0xd616b0,{name:_0x3a1cc4,phone:_0x23759f,email:_0x3a23fc,status:_0x2525d0,planId:_0x144bda,password:_0x51c427,campaignsEnabled:_0x23665b,dueDate:_0x24ec82,recurrence:_0x2c7f7a}=_0x5640f3;console[_0x3485e1(0x183)](_0x3485e1(0x184),_0x5640f3['password']);const _0x3ef30d=Yup[_0x3485e1(0x188)]()[_0x3485e1(0x18f)]({'name':Yup[_0x3485e1(0x18b)]()['min'](0x2,_0x3485e1(0x19d))[_0x3485e1(0x19c)](_0x3485e1(0x19d))[_0x3485e1(0x195)]('Check-unique-name',_0x3485e1(0x19e),async _0x11e857=>{const _0x11235b=_0x3485e1;if(_0x11e857){const _0x1b19b1=await Company_1[_0x11235b(0x19f)][_0x11235b(0x1a8)]({'where':{'name':_0x11e857}});return!_0x1b19b1;}return![];})});try{await _0x3ef30d[_0x3485e1(0x18a)]({'name':_0x3a1cc4});}catch(_0x59b87f){throw new AppError_1[(_0x3485e1(0x19f))](_0x59b87f['message']);}const _0x2bc891=await Company_1[_0x3485e1(0x19f)]['create']({'name':_0x3a1cc4,'phone':_0x23759f,'email':_0x3a23fc,'status':_0x2525d0,'planId':_0x144bda,'dueDate':_0x24ec82,'recurrence':_0x2c7f7a}),_0x147f9c=await User_1[_0x3485e1(0x19f)]['create']({'name':_0x2bc891['name'],'email':_0x2bc891['email'],'password':_0x5640f3[_0x3485e1(0x193)],'profile':_0x3485e1(0x1ab),'companyId':_0x2bc891['id']});if(_0x5640f3[_0x3485e1(0x1aa)]!==undefined){const [_0x58b787,_0xe9bc8]=await Setting_1['default'][_0x3485e1(0x199)]({'where':{'companyId':_0x2bc891['id'],'key':_0x3485e1(0x1aa)},'defaults':{'companyId':_0x2bc891['id'],'key':_0x3485e1(0x1aa),'value':''+_0x23665b}});!_0xe9bc8&&await _0x58b787['update']({'value':''+_0x23665b});}return _0x2bc891;};function a386_0x355e(_0x4077b8,_0x25a537){const _0x3864b3=a386_0x3864();return a386_0x355e=function(_0x355e93,_0x246ef7){_0x355e93=_0x355e93-0x183;let _0x36bcb2=_0x3864b3[_0x355e93];return _0x36bcb2;},a386_0x355e(_0x4077b8,_0x25a537);}exports[a386_0xd616b0(0x19f)]=CreateCompanyService;