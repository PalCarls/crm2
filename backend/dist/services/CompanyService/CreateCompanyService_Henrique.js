'use strict';const a370_0x811566=a370_0x5c98;(function(_0xa4a86b,_0x4c405c){const _0x282295=a370_0x5c98,_0x52227d=_0xa4a86b();while(!![]){try{const _0x1d5b2e=-parseInt(_0x282295(0xbb))/0x1+parseInt(_0x282295(0xbc))/0x2+-parseInt(_0x282295(0xc7))/0x3+-parseInt(_0x282295(0xa4))/0x4*(parseInt(_0x282295(0xbe))/0x5)+parseInt(_0x282295(0xa1))/0x6+parseInt(_0x282295(0xad))/0x7*(parseInt(_0x282295(0xae))/0x8)+-parseInt(_0x282295(0xaa))/0x9*(-parseInt(_0x282295(0xac))/0xa);if(_0x1d5b2e===_0x4c405c)break;else _0x52227d['push'](_0x52227d['shift']());}catch(_0x3c973c){_0x52227d['push'](_0x52227d['shift']());}}}(a370_0x1911,0x234ac));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x393885,_0x4b807e,_0x11e4b3,_0x4e23e1){const _0x4b7c0c=a370_0x5c98;if(_0x4e23e1===undefined)_0x4e23e1=_0x11e4b3;var _0x1461bb=Object[_0x4b7c0c(0xb0)](_0x4b807e,_0x11e4b3);(!_0x1461bb||(_0x4b7c0c(0xc0)in _0x1461bb?!_0x4b807e[_0x4b7c0c(0xa8)]:_0x1461bb['writable']||_0x1461bb['configurable']))&&(_0x1461bb={'enumerable':!![],'get':function(){return _0x4b807e[_0x11e4b3];}}),Object[_0x4b7c0c(0xa2)](_0x393885,_0x4e23e1,_0x1461bb);}:function(_0x5d690f,_0x576902,_0x5823f4,_0x394159){if(_0x394159===undefined)_0x394159=_0x5823f4;_0x5d690f[_0x394159]=_0x576902[_0x5823f4];}),__setModuleDefault=this&&this[a370_0x811566(0xc9)]||(Object['create']?function(_0x454eb7,_0x279f57){const _0x59a8a0=a370_0x811566;Object[_0x59a8a0(0xa2)](_0x454eb7,_0x59a8a0(0xc6),{'enumerable':!![],'value':_0x279f57});}:function(_0x3d3e18,_0x1d5519){_0x3d3e18['default']=_0x1d5519;}),__importStar=this&&this['__importStar']||function(_0x8fe6c1){const _0x9fe8a0=a370_0x811566;if(_0x8fe6c1&&_0x8fe6c1[_0x9fe8a0(0xa8)])return _0x8fe6c1;var _0x339cd4={};if(_0x8fe6c1!=null){for(var _0x2d660b in _0x8fe6c1)if(_0x2d660b!==_0x9fe8a0(0xc6)&&Object[_0x9fe8a0(0xb6)][_0x9fe8a0(0xba)][_0x9fe8a0(0xa7)](_0x8fe6c1,_0x2d660b))__createBinding(_0x339cd4,_0x8fe6c1,_0x2d660b);}return __setModuleDefault(_0x339cd4,_0x8fe6c1),_0x339cd4;},__importDefault=this&&this[a370_0x811566(0xb3)]||function(_0x1c5280){const _0x1d14e5=a370_0x811566;return _0x1c5280&&_0x1c5280[_0x1d14e5(0xa8)]?_0x1c5280:{'default':_0x1c5280};};Object[a370_0x811566(0xa2)](exports,a370_0x811566(0xa8),{'value':!![]});function a370_0x5c98(_0x1e6480,_0x1bae50){const _0x19110a=a370_0x1911();return a370_0x5c98=function(_0x5c985b,_0x2ee285){_0x5c985b=_0x5c985b-0x9e;let _0x4c3fbe=_0x19110a[_0x5c985b];return _0x4c3fbe;},a370_0x5c98(_0x1e6480,_0x1bae50);}function a370_0x1911(){const _0x4852c0=['defineProperty','min','10220JEvcHE','admin','password','call','__esModule','test','747kVctCU','update','23620rjLkIO','980ioOznI','96bhcsaL','findOne','getOwnPropertyDescriptor','ERR_COMPANY_NAME_ALREADY_EXISTS','required','__importDefault','../../models/User','object','prototype','email','ERR_COMPANY_INVALID_NAME','campaignsEnabled','hasOwnProperty','255449bNXXyB','537186XmyALx','string','85YzRpDK','log','get','../../models/Setting','validate','create','../../models/Company','shape','default','804483SmnGYX','message','__setModuleDefault','name','ðŸš€\x20Console\x20Log\x20:\x20companyData.password','yup','1471692FzTrAZ'];a370_0x1911=function(){return _0x4852c0;};return a370_0x1911();}const Yup=__importStar(require(a370_0x811566(0xa0))),AppError_1=__importDefault(require('../../errors/AppError')),Company_1=__importDefault(require(a370_0x811566(0xc4))),User_1=__importDefault(require(a370_0x811566(0xb4))),Setting_1=__importDefault(require(a370_0x811566(0xc1))),CreateCompanyService=async _0x138aed=>{const _0x526e24=a370_0x811566,{name:_0xc29ae,phone:_0x58e8ed,email:_0x1bbc87,status:_0x164f82,planId:_0x13d139,password:_0x5609e9,campaignsEnabled:_0x3576b6,dueDate:_0x1d1c32,recurrence:_0x48729a}=_0x138aed;console[_0x526e24(0xbf)](_0x526e24(0x9f),_0x138aed[_0x526e24(0xa6)]);const _0x572002=Yup[_0x526e24(0xb5)]()[_0x526e24(0xc5)]({'name':Yup[_0x526e24(0xbd)]()[_0x526e24(0xa3)](0x2,_0x526e24(0xb8))[_0x526e24(0xb2)]('ERR_COMPANY_INVALID_NAME')[_0x526e24(0xa9)]('Check-unique-name',_0x526e24(0xb1),async _0x61dd8a=>{const _0x441483=_0x526e24;if(_0x61dd8a){const _0x2f228c=await Company_1['default'][_0x441483(0xaf)]({'where':{'name':_0x61dd8a}});return!_0x2f228c;}return![];})});try{await _0x572002[_0x526e24(0xc2)]({'name':_0xc29ae});}catch(_0x30185){throw new AppError_1[(_0x526e24(0xc6))](_0x30185[_0x526e24(0xc8)]);}const _0x56fb52=await Company_1[_0x526e24(0xc6)][_0x526e24(0xc3)]({'name':_0xc29ae,'phone':_0x58e8ed,'email':_0x1bbc87,'status':_0x164f82,'planId':_0x13d139,'dueDate':_0x1d1c32,'recurrence':_0x48729a}),_0x3eac7a=await User_1[_0x526e24(0xc6)]['create']({'name':_0x56fb52[_0x526e24(0x9e)],'email':_0x56fb52[_0x526e24(0xb7)],'password':_0x138aed['password'],'profile':_0x526e24(0xa5),'companyId':_0x56fb52['id']});if(_0x138aed[_0x526e24(0xb9)]!==undefined){const [_0x502702,_0x54bd9a]=await Setting_1[_0x526e24(0xc6)]['findOrCreate']({'where':{'companyId':_0x56fb52['id'],'key':_0x526e24(0xb9)},'defaults':{'companyId':_0x56fb52['id'],'key':_0x526e24(0xb9),'value':''+_0x3576b6}});!_0x54bd9a&&await _0x502702[_0x526e24(0xab)]({'value':''+_0x3576b6});}return _0x56fb52;};exports['default']=CreateCompanyService;