'use strict';const a385_0x1aec2f=a385_0x138e;(function(_0x5bb436,_0x5bfac7){const _0x1a09ae=a385_0x138e,_0x2f6238=_0x5bb436();while(!![]){try{const _0xa466f3=parseInt(_0x1a09ae(0x121))/0x1*(parseInt(_0x1a09ae(0x111))/0x2)+parseInt(_0x1a09ae(0x11f))/0x3*(-parseInt(_0x1a09ae(0x114))/0x4)+-parseInt(_0x1a09ae(0x103))/0x5+parseInt(_0x1a09ae(0x10f))/0x6*(-parseInt(_0x1a09ae(0x11e))/0x7)+parseInt(_0x1a09ae(0x11d))/0x8*(parseInt(_0x1a09ae(0x10d))/0x9)+-parseInt(_0x1a09ae(0x10e))/0xa+-parseInt(_0x1a09ae(0x117))/0xb*(-parseInt(_0x1a09ae(0x11c))/0xc);if(_0xa466f3===_0x5bfac7)break;else _0x2f6238['push'](_0x2f6238['shift']());}catch(_0xe864db){_0x2f6238['push'](_0x2f6238['shift']());}}}(a385_0x3c69,0x90090));function a385_0x138e(_0x262106,_0x88d362){const _0x3c6961=a385_0x3c69();return a385_0x138e=function(_0x138ee5,_0x5750de){_0x138ee5=_0x138ee5-0x103;let _0x382344=_0x3c6961[_0x138ee5];return _0x382344;},a385_0x138e(_0x262106,_0x88d362);}function a385_0x3c69(){const _0x23e357=['campaignsEnabled','36oliimo','10280ooqlbJ','17843RDuZea','3XquLgh','../../models/User','14nBGZIq','default','findOrCreate','__esModule','Check-unique-name','ERR_COMPANY_NAME_ALREADY_EXISTS','log','call','findOne','get','password','__importStar','required','name','__createBinding','defineProperty','1324505zyJzzq','../../errors/AppError','validate','getOwnPropertyDescriptor','shape','__importDefault','configurable','create','ðŸš€\x20Console\x20Log\x20:\x20companyData.password','yup','4275WMdqtd','11638920hoLoxD','1452gZxITe','__setModuleDefault','4098LOXuDV','../../models/Setting','writable','4141460NjCSnZ','string','ERR_COMPANY_INVALID_NAME','11117051HeMAAg','update','prototype','email'];a385_0x3c69=function(){return _0x23e357;};return a385_0x3c69();}var __createBinding=this&&this[a385_0x1aec2f(0x12f)]||(Object[a385_0x1aec2f(0x10a)]?function(_0x2c2431,_0x586501,_0x4ddb75,_0xb4d8f3){const _0x5345fa=a385_0x1aec2f;if(_0xb4d8f3===undefined)_0xb4d8f3=_0x4ddb75;var _0x16f948=Object[_0x5345fa(0x106)](_0x586501,_0x4ddb75);(!_0x16f948||(_0x5345fa(0x12a)in _0x16f948?!_0x586501[_0x5345fa(0x124)]:_0x16f948[_0x5345fa(0x113)]||_0x16f948[_0x5345fa(0x109)]))&&(_0x16f948={'enumerable':!![],'get':function(){return _0x586501[_0x4ddb75];}}),Object['defineProperty'](_0x2c2431,_0xb4d8f3,_0x16f948);}:function(_0x1975ce,_0x495a49,_0x2e6bb1,_0x4ff137){if(_0x4ff137===undefined)_0x4ff137=_0x2e6bb1;_0x1975ce[_0x4ff137]=_0x495a49[_0x2e6bb1];}),__setModuleDefault=this&&this[a385_0x1aec2f(0x110)]||(Object[a385_0x1aec2f(0x10a)]?function(_0x323af3,_0x166df0){const _0x4b64c7=a385_0x1aec2f;Object[_0x4b64c7(0x130)](_0x323af3,_0x4b64c7(0x122),{'enumerable':!![],'value':_0x166df0});}:function(_0x1cb137,_0x1eb0e5){_0x1cb137['default']=_0x1eb0e5;}),__importStar=this&&this[a385_0x1aec2f(0x12c)]||function(_0x1258dd){const _0x3c31b5=a385_0x1aec2f;if(_0x1258dd&&_0x1258dd[_0x3c31b5(0x124)])return _0x1258dd;var _0x118741={};if(_0x1258dd!=null){for(var _0x5f4263 in _0x1258dd)if(_0x5f4263!=='default'&&Object[_0x3c31b5(0x119)]['hasOwnProperty'][_0x3c31b5(0x128)](_0x1258dd,_0x5f4263))__createBinding(_0x118741,_0x1258dd,_0x5f4263);}return __setModuleDefault(_0x118741,_0x1258dd),_0x118741;},__importDefault=this&&this[a385_0x1aec2f(0x108)]||function(_0x7944f0){const _0xe96082=a385_0x1aec2f;return _0x7944f0&&_0x7944f0[_0xe96082(0x124)]?_0x7944f0:{'default':_0x7944f0};};Object['defineProperty'](exports,a385_0x1aec2f(0x124),{'value':!![]});const Yup=__importStar(require(a385_0x1aec2f(0x10c))),AppError_1=__importDefault(require(a385_0x1aec2f(0x104))),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require(a385_0x1aec2f(0x120))),Setting_1=__importDefault(require(a385_0x1aec2f(0x112))),CreateCompanyService=async _0x39e60e=>{const _0x1338e1=a385_0x1aec2f,{name:_0x362946,phone:_0x1c6a25,email:_0x17596e,status:_0x34f9c9,planId:_0x55ac48,password:_0x53fbc4,campaignsEnabled:_0x3cd977,dueDate:_0x5ca605,recurrence:_0x166d8f}=_0x39e60e;console[_0x1338e1(0x127)](_0x1338e1(0x10b),_0x39e60e[_0x1338e1(0x12b)]);const _0x5c483c=Yup['object']()[_0x1338e1(0x107)]({'name':Yup[_0x1338e1(0x115)]()['min'](0x2,_0x1338e1(0x116))[_0x1338e1(0x12d)](_0x1338e1(0x116))['test'](_0x1338e1(0x125),_0x1338e1(0x126),async _0x224a18=>{const _0x1ef3bb=_0x1338e1;if(_0x224a18){const _0x1a5259=await Company_1[_0x1ef3bb(0x122)][_0x1ef3bb(0x129)]({'where':{'name':_0x224a18}});return!_0x1a5259;}return![];})});try{await _0x5c483c[_0x1338e1(0x105)]({'name':_0x362946});}catch(_0x426295){throw new AppError_1[(_0x1338e1(0x122))](_0x426295['message']);}const _0x4720e2=await Company_1[_0x1338e1(0x122)][_0x1338e1(0x10a)]({'name':_0x362946,'phone':_0x1c6a25,'email':_0x17596e,'status':_0x34f9c9,'planId':_0x55ac48,'dueDate':_0x5ca605,'recurrence':_0x166d8f}),_0x48e3d8=await User_1[_0x1338e1(0x122)][_0x1338e1(0x10a)]({'name':_0x4720e2[_0x1338e1(0x12e)],'email':_0x4720e2[_0x1338e1(0x11a)],'password':_0x39e60e[_0x1338e1(0x12b)],'profile':'admin','companyId':_0x4720e2['id']});if(_0x39e60e[_0x1338e1(0x11b)]!==undefined){const [_0xa4405d,_0x4f3041]=await Setting_1[_0x1338e1(0x122)][_0x1338e1(0x123)]({'where':{'companyId':_0x4720e2['id'],'key':_0x1338e1(0x11b)},'defaults':{'companyId':_0x4720e2['id'],'key':_0x1338e1(0x11b),'value':''+_0x3cd977}});!_0x4f3041&&await _0xa4405d[_0x1338e1(0x118)]({'value':''+_0x3cd977});}return _0x4720e2;};exports['default']=CreateCompanyService;