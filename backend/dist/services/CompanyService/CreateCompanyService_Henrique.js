'use strict';const a355_0x583049=a355_0x58e5;(function(_0x315fc0,_0x20cdf6){const _0x22905e=a355_0x58e5,_0x276a7e=_0x315fc0();while(!![]){try{const _0x10b4ab=parseInt(_0x22905e(0x157))/0x1*(-parseInt(_0x22905e(0x141))/0x2)+-parseInt(_0x22905e(0x150))/0x3+parseInt(_0x22905e(0x146))/0x4+parseInt(_0x22905e(0x160))/0x5*(-parseInt(_0x22905e(0x13c))/0x6)+-parseInt(_0x22905e(0x163))/0x7*(-parseInt(_0x22905e(0x162))/0x8)+parseInt(_0x22905e(0x148))/0x9*(parseInt(_0x22905e(0x13f))/0xa)+parseInt(_0x22905e(0x164))/0xb;if(_0x10b4ab===_0x20cdf6)break;else _0x276a7e['push'](_0x276a7e['shift']());}catch(_0x470283){_0x276a7e['push'](_0x276a7e['shift']());}}}(a355_0x531a,0x54577));var __createBinding=this&&this[a355_0x583049(0x14a)]||(Object['create']?function(_0x113e58,_0x2958ca,_0xe4884f,_0x2a138a){const _0x45c795=a355_0x583049;if(_0x2a138a===undefined)_0x2a138a=_0xe4884f;var _0x138978=Object[_0x45c795(0x13a)](_0x2958ca,_0xe4884f);(!_0x138978||('get'in _0x138978?!_0x2958ca[_0x45c795(0x158)]:_0x138978[_0x45c795(0x15b)]||_0x138978[_0x45c795(0x147)]))&&(_0x138978={'enumerable':!![],'get':function(){return _0x2958ca[_0xe4884f];}}),Object[_0x45c795(0x142)](_0x113e58,_0x2a138a,_0x138978);}:function(_0x554f57,_0x244c3d,_0x45428b,_0x547ad3){if(_0x547ad3===undefined)_0x547ad3=_0x45428b;_0x554f57[_0x547ad3]=_0x244c3d[_0x45428b];}),__setModuleDefault=this&&this[a355_0x583049(0x14b)]||(Object['create']?function(_0x26718e,_0x132b0f){const _0x29dd82=a355_0x583049;Object[_0x29dd82(0x142)](_0x26718e,_0x29dd82(0x143),{'enumerable':!![],'value':_0x132b0f});}:function(_0x3069d7,_0x280403){const _0x17dd90=a355_0x583049;_0x3069d7[_0x17dd90(0x143)]=_0x280403;}),__importStar=this&&this[a355_0x583049(0x151)]||function(_0xc968c0){const _0x15c25b=a355_0x583049;if(_0xc968c0&&_0xc968c0[_0x15c25b(0x158)])return _0xc968c0;var _0x4e415a={};if(_0xc968c0!=null){for(var _0x353e47 in _0xc968c0)if(_0x353e47!==_0x15c25b(0x143)&&Object[_0x15c25b(0x149)][_0x15c25b(0x14d)][_0x15c25b(0x154)](_0xc968c0,_0x353e47))__createBinding(_0x4e415a,_0xc968c0,_0x353e47);}return __setModuleDefault(_0x4e415a,_0xc968c0),_0x4e415a;},__importDefault=this&&this[a355_0x583049(0x14f)]||function(_0x555216){const _0xc873d8=a355_0x583049;return _0x555216&&_0x555216[_0xc873d8(0x158)]?_0x555216:{'default':_0x555216};};function a355_0x58e5(_0x176a81,_0x302ea7){const _0x531adb=a355_0x531a();return a355_0x58e5=function(_0x58e581,_0x29adaf){_0x58e581=_0x58e581-0x13a;let _0x1fc596=_0x531adb[_0x58e581];return _0x1fc596;},a355_0x58e5(_0x176a81,_0x302ea7);}function a355_0x531a(){const _0x4b64ea=['prototype','__createBinding','__setModuleDefault','Check-unique-name','hasOwnProperty','admin','__importDefault','2039205dppNOr','__importStar','update','ERR_COMPANY_INVALID_NAME','call','findOrCreate','message','2714gPYvzd','__esModule','test','campaignsEnabled','writable','string','required','email','name','5195loaDUz','object','2201576jDfpRa','7Yxdniq','14471050QClUFe','getOwnPropertyDescriptor','create','3870wdOXOL','ERR_COMPANY_NAME_ALREADY_EXISTS','../../models/User','250JuaEff','../../errors/AppError','494eGYhhU','defineProperty','default','yup','shape','2628156ponOUW','configurable','42453jFPbEo'];a355_0x531a=function(){return _0x4b64ea;};return a355_0x531a();}Object[a355_0x583049(0x142)](exports,a355_0x583049(0x158),{'value':!![]});const Yup=__importStar(require(a355_0x583049(0x144))),AppError_1=__importDefault(require(a355_0x583049(0x140))),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require(a355_0x583049(0x13e))),Setting_1=__importDefault(require('../../models/Setting')),CreateCompanyService=async _0xa8bd2a=>{const _0x51b997=a355_0x583049,{name:_0x2f3a65,phone:_0x4a1de0,email:_0x3c51b7,status:_0x5e3bea,planId:_0x3f3b83,password:_0x12c932,campaignsEnabled:_0x235720,dueDate:_0x2975fc,recurrence:_0x5c6e46}=_0xa8bd2a;console['log']('ðŸš€\x20Console\x20Log\x20:\x20companyData.password',_0xa8bd2a['password']);const _0xd8a528=Yup[_0x51b997(0x161)]()[_0x51b997(0x145)]({'name':Yup[_0x51b997(0x15c)]()['min'](0x2,_0x51b997(0x153))[_0x51b997(0x15d)](_0x51b997(0x153))[_0x51b997(0x159)](_0x51b997(0x14c),_0x51b997(0x13d),async _0x1a4803=>{const _0x75ac88=_0x51b997;if(_0x1a4803){const _0x550438=await Company_1[_0x75ac88(0x143)]['findOne']({'where':{'name':_0x1a4803}});return!_0x550438;}return![];})});try{await _0xd8a528['validate']({'name':_0x2f3a65});}catch(_0x2aa5b6){throw new AppError_1['default'](_0x2aa5b6[_0x51b997(0x156)]);}const _0xe74b28=await Company_1['default'][_0x51b997(0x13b)]({'name':_0x2f3a65,'phone':_0x4a1de0,'email':_0x3c51b7,'status':_0x5e3bea,'planId':_0x3f3b83,'dueDate':_0x2975fc,'recurrence':_0x5c6e46}),_0x38c1e7=await User_1['default'][_0x51b997(0x13b)]({'name':_0xe74b28[_0x51b997(0x15f)],'email':_0xe74b28[_0x51b997(0x15e)],'password':_0xa8bd2a['password'],'profile':_0x51b997(0x14e),'companyId':_0xe74b28['id']});if(_0xa8bd2a[_0x51b997(0x15a)]!==undefined){const [_0x5816cb,_0x334da7]=await Setting_1[_0x51b997(0x143)][_0x51b997(0x155)]({'where':{'companyId':_0xe74b28['id'],'key':'campaignsEnabled'},'defaults':{'companyId':_0xe74b28['id'],'key':_0x51b997(0x15a),'value':''+_0x235720}});!_0x334da7&&await _0x5816cb[_0x51b997(0x152)]({'value':''+_0x235720});}return _0xe74b28;};exports[a355_0x583049(0x143)]=CreateCompanyService;