'use strict';const a430_0x50192f=a430_0x57be;(function(_0x1d18ef,_0x2482e1){const _0x253b63=a430_0x57be,_0x2fd1ab=_0x1d18ef();while(!![]){try{const _0x493959=parseInt(_0x253b63(0xf5))/0x1*(parseInt(_0x253b63(0x100))/0x2)+parseInt(_0x253b63(0xf4))/0x3*(parseInt(_0x253b63(0xf2))/0x4)+-parseInt(_0x253b63(0xef))/0x5+-parseInt(_0x253b63(0x102))/0x6*(parseInt(_0x253b63(0xf6))/0x7)+-parseInt(_0x253b63(0xee))/0x8+parseInt(_0x253b63(0xf0))/0x9+parseInt(_0x253b63(0xf9))/0xa*(parseInt(_0x253b63(0xf1))/0xb);if(_0x493959===_0x2482e1)break;else _0x2fd1ab['push'](_0x2fd1ab['shift']());}catch(_0x58b30b){_0x2fd1ab['push'](_0x2fd1ab['shift']());}}}(a430_0x2413,0x92a2f));var __importDefault=this&&this[a430_0x50192f(0xfd)]||function(_0x398f42){const _0x5a7097=a430_0x50192f;return _0x398f42&&_0x398f42[_0x5a7097(0x101)]?_0x398f42:{'default':_0x398f42};};Object[a430_0x50192f(0xed)](exports,a430_0x50192f(0x101),{'value':!![]});const AppError_1=__importDefault(require(a430_0x50192f(0xfc))),Company_1=__importDefault(require(a430_0x50192f(0x103))),Setting_1=__importDefault(require('../../models/Setting')),User_1=__importDefault(require(a430_0x50192f(0xec))),UpdateCompanyService=async _0x261305=>{const _0x4c9e2c=a430_0x50192f,_0x225883=await Company_1['default'][_0x4c9e2c(0xf7)](_0x261305['id']),{name:_0x36c721,phone:_0x7d39c4,email:_0x6c2f43,status:_0x5562a5,planId:_0xfc4384,campaignsEnabled:_0x498d1f,dueDate:_0x1ea142,recurrence:_0x5cf8c3,document:_0x4838ae,paymentMethod:_0x1ad210,password:_0x451495}=_0x261305;if(!_0x225883)throw new AppError_1['default'](_0x4c9e2c(0xf3),0x194);const _0x58de28=await User_1['default'][_0x4c9e2c(0xfe)]({'where':{'companyId':_0x225883['id'],'email':_0x6c2f43}});if(_0x58de28&&_0x58de28[_0x4c9e2c(0xfa)]!==_0x225883['email'])throw new AppError_1[(_0x4c9e2c(0xfb))]('Usuário\x20já\x20existe\x20com\x20esse\x20e-mail!',0x194);const _0x53e054=await User_1[_0x4c9e2c(0xfb)]['findOne']({'where':{'companyId':_0x225883['id'],'email':_0x225883[_0x4c9e2c(0xfa)]}});if(!_0x53e054)throw new AppError_1[(_0x4c9e2c(0xfb))]('ERR_NO_USER_FOUND',0x194);await _0x53e054[_0x4c9e2c(0xff)]({'email':_0x6c2f43,'password':_0x451495}),await _0x225883[_0x4c9e2c(0xff)]({'name':_0x36c721,'phone':_0x7d39c4,'email':_0x6c2f43,'status':_0x5562a5,'planId':_0xfc4384,'dueDate':_0x1ea142,'recurrence':_0x5cf8c3,'document':_0x4838ae,'paymentMethod':_0x1ad210});if(_0x261305['campaignsEnabled']!==undefined){const [_0x493e7f,_0x5c2de6]=await Setting_1[_0x4c9e2c(0xfb)]['findOrCreate']({'where':{'companyId':_0x225883['id'],'key':_0x4c9e2c(0xf8)},'defaults':{'companyId':_0x225883['id'],'key':'campaignsEnabled','value':''+_0x498d1f}});!_0x5c2de6&&await _0x493e7f[_0x4c9e2c(0xff)]({'value':''+_0x498d1f});}return _0x225883;};function a430_0x57be(_0x346d2e,_0x1d08d5){const _0x2413c6=a430_0x2413();return a430_0x57be=function(_0x57bee3,_0x1c309c){_0x57bee3=_0x57bee3-0xec;let _0x525568=_0x2413c6[_0x57bee3];return _0x525568;},a430_0x57be(_0x346d2e,_0x1d08d5);}function a430_0x2413(){const _0x27dc96=['findByPk','campaignsEnabled','2165870tiEXMb','email','default','../../errors/AppError','__importDefault','findOne','update','1316VdjXbC','__esModule','6AioZoN','../../models/Company','../../models/User','defineProperty','242656fgMUAR','4374770boLQga','8581734HaIdQK','11ryMwuT','1180292ywvXZc','ERR_NO_COMPANY_FOUND','6JlkdbI','326EAgkWN','3282006YvvHwA'];a430_0x2413=function(){return _0x27dc96;};return a430_0x2413();}exports[a430_0x50192f(0xfb)]=UpdateCompanyService;