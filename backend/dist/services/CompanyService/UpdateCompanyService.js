'use strict';const a439_0x208015=a439_0x1de9;(function(_0x4f55ee,_0x52cb10){const _0x15540d=a439_0x1de9,_0x522b7=_0x4f55ee();while(!![]){try{const _0x34f2fa=-parseInt(_0x15540d(0x15d))/0x1+-parseInt(_0x15540d(0x159))/0x2+-parseInt(_0x15540d(0x155))/0x3+-parseInt(_0x15540d(0x150))/0x4+parseInt(_0x15540d(0x14c))/0x5+-parseInt(_0x15540d(0x15a))/0x6+parseInt(_0x15540d(0x14e))/0x7;if(_0x34f2fa===_0x52cb10)break;else _0x522b7['push'](_0x522b7['shift']());}catch(_0x3ccdce){_0x522b7['push'](_0x522b7['shift']());}}}(a439_0x1d72,0x606f0));function a439_0x1d72(){const _0x35e043=['9277219vEptzk','../../models/Company','2373144IscBQI','update','default','findByPk','__importDefault','1094607xCIcPN','findOne','../../errors/AppError','ERR_NO_USER_FOUND','50404nfAZnG','1129806feaEhU','ERR_NO_COMPANY_FOUND','defineProperty','143904LBoUKq','__esModule','email','../../models/Setting','campaignsEnabled','Usuário\x20já\x20existe\x20com\x20esse\x20e-mail!','1926185BIeIGf','findOrCreate'];a439_0x1d72=function(){return _0x35e043;};return a439_0x1d72();}function a439_0x1de9(_0xc0997,_0x426886){const _0x1d7224=a439_0x1d72();return a439_0x1de9=function(_0x1de930,_0x203d1c){_0x1de930=_0x1de930-0x14b;let _0x385495=_0x1d7224[_0x1de930];return _0x385495;},a439_0x1de9(_0xc0997,_0x426886);}var __importDefault=this&&this[a439_0x208015(0x154)]||function(_0x442c06){const _0x1b05c2=a439_0x208015;return _0x442c06&&_0x442c06[_0x1b05c2(0x15e)]?_0x442c06:{'default':_0x442c06};};Object[a439_0x208015(0x15c)](exports,a439_0x208015(0x15e),{'value':!![]});const AppError_1=__importDefault(require(a439_0x208015(0x157))),Company_1=__importDefault(require(a439_0x208015(0x14f))),Setting_1=__importDefault(require(a439_0x208015(0x160))),User_1=__importDefault(require('../../models/User')),UpdateCompanyService=async _0x52bcfd=>{const _0x1c784a=a439_0x208015,_0x431037=await Company_1[_0x1c784a(0x152)][_0x1c784a(0x153)](_0x52bcfd['id']),{name:_0x1fbc46,phone:_0x10f5a3,email:_0x536715,status:_0x46e5fe,planId:_0x1dce6d,campaignsEnabled:_0x4f3392,dueDate:_0x4901e9,recurrence:_0x46b199,document:_0x36c9b2,paymentMethod:_0x45227d,password:_0x4c030f}=_0x52bcfd;if(!_0x431037)throw new AppError_1[(_0x1c784a(0x152))](_0x1c784a(0x15b),0x194);const _0x485a6c=await User_1[_0x1c784a(0x152)]['findOne']({'where':{'companyId':_0x431037['id'],'email':_0x536715}});if(_0x485a6c&&_0x485a6c['email']!==_0x431037[_0x1c784a(0x15f)])throw new AppError_1['default'](_0x1c784a(0x14b),0x194);const _0x4b7ec8=await User_1[_0x1c784a(0x152)][_0x1c784a(0x156)]({'where':{'companyId':_0x431037['id'],'email':_0x431037['email']}});if(!_0x4b7ec8)throw new AppError_1[(_0x1c784a(0x152))](_0x1c784a(0x158),0x194);await _0x4b7ec8[_0x1c784a(0x151)]({'email':_0x536715,'password':_0x4c030f}),await _0x431037[_0x1c784a(0x151)]({'name':_0x1fbc46,'phone':_0x10f5a3,'email':_0x536715,'status':_0x46e5fe,'planId':_0x1dce6d,'dueDate':_0x4901e9,'recurrence':_0x46b199,'document':_0x36c9b2,'paymentMethod':_0x45227d});if(_0x52bcfd['campaignsEnabled']!==undefined){const [_0x5d893d,_0x1cde65]=await Setting_1[_0x1c784a(0x152)][_0x1c784a(0x14d)]({'where':{'companyId':_0x431037['id'],'key':_0x1c784a(0x161)},'defaults':{'companyId':_0x431037['id'],'key':_0x1c784a(0x161),'value':''+_0x4f3392}});!_0x1cde65&&await _0x5d893d[_0x1c784a(0x151)]({'value':''+_0x4f3392});}return _0x431037;};exports['default']=UpdateCompanyService;