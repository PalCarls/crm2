'use strict';const a446_0xef44c0=a446_0x8680;function a446_0x29a1(){const _0x48600b=['1170360nNDABG','48257HkPFij','36iTlZoa','32MGIbWC','update','7150800eQRWKD','email','20ZnlstA','findByPk','findOrCreate','3357574DuNhTx','27230hNYDyj','ERR_NO_COMPANY_FOUND','867390qpsjZf','1812KpVGoC','findOne','campaignsEnabled','6687999KDIQSq','../../models/Company','1jgxtHZ','__importDefault','ERR_NO_USER_FOUND','../../models/Setting','../../models/User','default'];a446_0x29a1=function(){return _0x48600b;};return a446_0x29a1();}(function(_0x1be753,_0x59de90){const _0x450f85=a446_0x8680,_0x28a475=_0x1be753();while(!![]){try{const _0x3e0835=-parseInt(_0x450f85(0x1b0))/0x1*(-parseInt(_0x450f85(0x1a7))/0x2)+parseInt(_0x450f85(0x1b6))/0x3+parseInt(_0x450f85(0x1b8))/0x4*(-parseInt(_0x450f85(0x1aa))/0x5)+parseInt(_0x450f85(0x1bb))/0x6+-parseInt(_0x450f85(0x1a8))/0x7*(parseInt(_0x450f85(0x1b9))/0x8)+parseInt(_0x450f85(0x1ae))/0x9*(-parseInt(_0x450f85(0x1a4))/0xa)+-parseInt(_0x450f85(0x1b7))/0xb*(-parseInt(_0x450f85(0x1ab))/0xc);if(_0x3e0835===_0x59de90)break;else _0x28a475['push'](_0x28a475['shift']());}catch(_0x3f7902){_0x28a475['push'](_0x28a475['shift']());}}}(a446_0x29a1,0xd1f9c));function a446_0x8680(_0x56e632,_0x52eee1){const _0x29a1a2=a446_0x29a1();return a446_0x8680=function(_0x8680d,_0x1d0659){_0x8680d=_0x8680d-0x1a4;let _0x3ef2d6=_0x29a1a2[_0x8680d];return _0x3ef2d6;},a446_0x8680(_0x56e632,_0x52eee1);}var __importDefault=this&&this[a446_0xef44c0(0x1b1)]||function(_0x5dbcee){return _0x5dbcee&&_0x5dbcee['__esModule']?_0x5dbcee:{'default':_0x5dbcee};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),Company_1=__importDefault(require(a446_0xef44c0(0x1af))),Setting_1=__importDefault(require(a446_0xef44c0(0x1b3))),User_1=__importDefault(require(a446_0xef44c0(0x1b4))),UpdateCompanyService=async _0x2e8b1a=>{const _0x4dc921=a446_0xef44c0,_0x39ae21=await Company_1[_0x4dc921(0x1b5)][_0x4dc921(0x1a5)](_0x2e8b1a['id']),{name:_0xc5715a,phone:_0x376534,email:_0x1d5053,status:_0x11dc53,planId:_0x201cc0,campaignsEnabled:_0x4d40f0,dueDate:_0x4a1336,recurrence:_0x2eaf1c,document:_0x3ffb70,paymentMethod:_0x324fcc,password:_0x2ad566}=_0x2e8b1a;if(!_0x39ae21)throw new AppError_1[(_0x4dc921(0x1b5))](_0x4dc921(0x1a9),0x194);const _0x5746f2=await User_1[_0x4dc921(0x1b5)][_0x4dc921(0x1ac)]({'where':{'companyId':_0x39ae21['id'],'email':_0x1d5053}});if(_0x5746f2&&_0x5746f2[_0x4dc921(0x1bc)]!==_0x39ae21[_0x4dc921(0x1bc)])throw new AppError_1['default']('Usuário\x20já\x20existe\x20com\x20esse\x20e-mail!',0x194);const _0x1cecc7=await User_1[_0x4dc921(0x1b5)][_0x4dc921(0x1ac)]({'where':{'companyId':_0x39ae21['id'],'email':_0x39ae21[_0x4dc921(0x1bc)]}});if(!_0x1cecc7)throw new AppError_1[(_0x4dc921(0x1b5))](_0x4dc921(0x1b2),0x194);await _0x1cecc7[_0x4dc921(0x1ba)]({'email':_0x1d5053,'password':_0x2ad566}),await _0x39ae21[_0x4dc921(0x1ba)]({'name':_0xc5715a,'phone':_0x376534,'email':_0x1d5053,'status':_0x11dc53,'planId':_0x201cc0,'dueDate':_0x4a1336,'recurrence':_0x2eaf1c,'document':_0x3ffb70,'paymentMethod':_0x324fcc});if(_0x2e8b1a[_0x4dc921(0x1ad)]!==undefined){const [_0x4d64b0,_0x2a3843]=await Setting_1[_0x4dc921(0x1b5)][_0x4dc921(0x1a6)]({'where':{'companyId':_0x39ae21['id'],'key':'campaignsEnabled'},'defaults':{'companyId':_0x39ae21['id'],'key':_0x4dc921(0x1ad),'value':''+_0x4d40f0}});!_0x2a3843&&await _0x4d64b0[_0x4dc921(0x1ba)]({'value':''+_0x4d40f0});}return _0x39ae21;};exports['default']=UpdateCompanyService;