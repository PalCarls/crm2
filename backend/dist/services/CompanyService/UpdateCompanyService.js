'use strict';const a439_0x58dee7=a439_0x24e2;(function(_0x45380c,_0x4cea1c){const _0x8da15e=a439_0x24e2,_0x466e0d=_0x45380c();while(!![]){try{const _0x3d8c6f=-parseInt(_0x8da15e(0x7e))/0x1*(parseInt(_0x8da15e(0x6b))/0x2)+parseInt(_0x8da15e(0x71))/0x3+-parseInt(_0x8da15e(0x6d))/0x4*(-parseInt(_0x8da15e(0x72))/0x5)+-parseInt(_0x8da15e(0x7b))/0x6*(parseInt(_0x8da15e(0x7c))/0x7)+parseInt(_0x8da15e(0x77))/0x8*(parseInt(_0x8da15e(0x76))/0x9)+-parseInt(_0x8da15e(0x69))/0xa*(parseInt(_0x8da15e(0x7d))/0xb)+-parseInt(_0x8da15e(0x78))/0xc;if(_0x3d8c6f===_0x4cea1c)break;else _0x466e0d['push'](_0x466e0d['shift']());}catch(_0x6033d0){_0x466e0d['push'](_0x466e0d['shift']());}}}(a439_0x4141,0xdb99d));var __importDefault=this&&this[a439_0x58dee7(0x6a)]||function(_0x508010){return _0x508010&&_0x508010['__esModule']?_0x508010:{'default':_0x508010};};function a439_0x4141(){const _0x6f9d9=['Usuário\x20já\x20existe\x20com\x20esse\x20e-mail!','ERR_NO_COMPANY_FOUND','14110461MuTfVR','8euWndg','12254364qRsgYo','campaignsEnabled','findOne','126RHsCMr','22841yqVLBQ','3641MyVLLg','86888bCMTsr','29070hlOEYG','__importDefault','34EhGlms','ERR_NO_USER_FOUND','200CevRYV','email','findByPk','../../models/Setting','4201617oqwOvy','146015TKLZcG','default'];a439_0x4141=function(){return _0x6f9d9;};return a439_0x4141();}function a439_0x24e2(_0x49fe75,_0x471a3a){const _0x4141fd=a439_0x4141();return a439_0x24e2=function(_0x24e297,_0x4a0a89){_0x24e297=_0x24e297-0x69;let _0x4ee494=_0x4141fd[_0x24e297];return _0x4ee494;},a439_0x24e2(_0x49fe75,_0x471a3a);}Object['defineProperty'](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),Company_1=__importDefault(require('../../models/Company')),Setting_1=__importDefault(require(a439_0x58dee7(0x70))),User_1=__importDefault(require('../../models/User')),UpdateCompanyService=async _0x117c54=>{const _0x57abcf=a439_0x58dee7,_0x1428b8=await Company_1['default'][_0x57abcf(0x6f)](_0x117c54['id']),{name:_0x2b5fdc,phone:_0x26d4e5,email:_0x365847,status:_0xec3cdd,planId:_0x22e1c9,campaignsEnabled:_0x194756,dueDate:_0x5075d,recurrence:_0xe63958,document:_0x5e425e,paymentMethod:_0x56ea63,password:_0x483d1c}=_0x117c54;if(!_0x1428b8)throw new AppError_1[(_0x57abcf(0x73))](_0x57abcf(0x75),0x194);const _0x479e52=await User_1[_0x57abcf(0x73)][_0x57abcf(0x7a)]({'where':{'companyId':_0x1428b8['id'],'email':_0x365847}});if(_0x479e52&&_0x479e52[_0x57abcf(0x6e)]!==_0x1428b8['email'])throw new AppError_1['default'](_0x57abcf(0x74),0x194);const _0x5bc3d7=await User_1[_0x57abcf(0x73)][_0x57abcf(0x7a)]({'where':{'companyId':_0x1428b8['id'],'email':_0x1428b8['email']}});if(!_0x5bc3d7)throw new AppError_1['default'](_0x57abcf(0x6c),0x194);await _0x5bc3d7['update']({'email':_0x365847,'password':_0x483d1c}),await _0x1428b8['update']({'name':_0x2b5fdc,'phone':_0x26d4e5,'email':_0x365847,'status':_0xec3cdd,'planId':_0x22e1c9,'dueDate':_0x5075d,'recurrence':_0xe63958,'document':_0x5e425e,'paymentMethod':_0x56ea63});if(_0x117c54[_0x57abcf(0x79)]!==undefined){const [_0x5e1400,_0x5577bb]=await Setting_1[_0x57abcf(0x73)]['findOrCreate']({'where':{'companyId':_0x1428b8['id'],'key':_0x57abcf(0x79)},'defaults':{'companyId':_0x1428b8['id'],'key':'campaignsEnabled','value':''+_0x194756}});!_0x5577bb&&await _0x5e1400['update']({'value':''+_0x194756});}return _0x1428b8;};exports[a439_0x58dee7(0x73)]=UpdateCompanyService;