'use strict';function a439_0x3087(_0x466feb,_0x15d254){const _0x1f3b7d=a439_0x1f3b();return a439_0x3087=function(_0x308788,_0xeba218){_0x308788=_0x308788-0x1f2;let _0x56341a=_0x1f3b7d[_0x308788];return _0x56341a;},a439_0x3087(_0x466feb,_0x15d254);}const a439_0x2c7357=a439_0x3087;(function(_0x3f2c03,_0x2c04f5){const _0xcd6f7e=a439_0x3087,_0x5ae470=_0x3f2c03();while(!![]){try{const _0x369870=parseInt(_0xcd6f7e(0x1fc))/0x1*(parseInt(_0xcd6f7e(0x204))/0x2)+-parseInt(_0xcd6f7e(0x1f6))/0x3*(-parseInt(_0xcd6f7e(0x1fb))/0x4)+parseInt(_0xcd6f7e(0x1fe))/0x5*(parseInt(_0xcd6f7e(0x1f8))/0x6)+-parseInt(_0xcd6f7e(0x1f7))/0x7+-parseInt(_0xcd6f7e(0x208))/0x8+parseInt(_0xcd6f7e(0x1f4))/0x9*(-parseInt(_0xcd6f7e(0x1f2))/0xa)+parseInt(_0xcd6f7e(0x201))/0xb;if(_0x369870===_0x2c04f5)break;else _0x5ae470['push'](_0x5ae470['shift']());}catch(_0x3b44e9){_0x5ae470['push'](_0x5ae470['shift']());}}}(a439_0x1f3b,0x89f1b));function a439_0x1f3b(){const _0x4566fc=['4231240vybeyp','default','18oxpByM','ERR_NO_COMPANY_FOUND','3000HxTGVu','3677856HZGmWX','1446HdeHEP','__importDefault','ERR_NO_USER_FOUND','1520mYnMeY','40837tpTTUE','findOne','19255IMStad','Usuário\x20já\x20existe\x20com\x20esse\x20e-mail!','defineProperty','7104174tOYVjM','__esModule','../../errors/AppError','26DEFFQv','email','../../models/Setting','campaignsEnabled','4385048dnPNid','update','findByPk','findOrCreate','../../models/Company'];a439_0x1f3b=function(){return _0x4566fc;};return a439_0x1f3b();}var __importDefault=this&&this[a439_0x2c7357(0x1f9)]||function(_0x32d91e){const _0x330e50=a439_0x2c7357;return _0x32d91e&&_0x32d91e[_0x330e50(0x202)]?_0x32d91e:{'default':_0x32d91e};};Object[a439_0x2c7357(0x200)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a439_0x2c7357(0x203))),Company_1=__importDefault(require(a439_0x2c7357(0x20c))),Setting_1=__importDefault(require(a439_0x2c7357(0x206))),User_1=__importDefault(require('../../models/User')),UpdateCompanyService=async _0x1fe460=>{const _0x438d59=a439_0x2c7357,_0x246a89=await Company_1['default'][_0x438d59(0x20a)](_0x1fe460['id']),{name:_0x46e2b9,phone:_0xd80509,email:_0x3dd8e6,status:_0xaef594,planId:_0x7424ac,campaignsEnabled:_0x20a710,dueDate:_0x642905,recurrence:_0x2910a9,document:_0x4782ef,paymentMethod:_0x119640,password:_0x3642c9}=_0x1fe460;if(!_0x246a89)throw new AppError_1[(_0x438d59(0x1f3))](_0x438d59(0x1f5),0x194);const _0x570daa=await User_1['default'][_0x438d59(0x1fd)]({'where':{'companyId':_0x246a89['id'],'email':_0x3dd8e6}});if(_0x570daa&&_0x570daa[_0x438d59(0x205)]!==_0x246a89['email'])throw new AppError_1['default'](_0x438d59(0x1ff),0x194);const _0x4ee1f7=await User_1[_0x438d59(0x1f3)][_0x438d59(0x1fd)]({'where':{'companyId':_0x246a89['id'],'email':_0x246a89['email']}});if(!_0x4ee1f7)throw new AppError_1['default'](_0x438d59(0x1fa),0x194);await _0x4ee1f7[_0x438d59(0x209)]({'email':_0x3dd8e6,'password':_0x3642c9}),await _0x246a89['update']({'name':_0x46e2b9,'phone':_0xd80509,'email':_0x3dd8e6,'status':_0xaef594,'planId':_0x7424ac,'dueDate':_0x642905,'recurrence':_0x2910a9,'document':_0x4782ef,'paymentMethod':_0x119640});if(_0x1fe460[_0x438d59(0x207)]!==undefined){const [_0x374601,_0x1ac2d0]=await Setting_1['default'][_0x438d59(0x20b)]({'where':{'companyId':_0x246a89['id'],'key':'campaignsEnabled'},'defaults':{'companyId':_0x246a89['id'],'key':_0x438d59(0x207),'value':''+_0x20a710}});!_0x1ac2d0&&await _0x374601['update']({'value':''+_0x20a710});}return _0x246a89;};exports[a439_0x2c7357(0x1f3)]=UpdateCompanyService;