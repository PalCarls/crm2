'use strict';const a352_0x33b66b=a352_0x5d4e;(function(_0x582471,_0x3b88d7){const _0x336517=a352_0x5d4e,_0x5de19c=_0x582471();while(!![]){try{const _0x5b4488=parseInt(_0x336517(0x17b))/0x1*(parseInt(_0x336517(0x184))/0x2)+-parseInt(_0x336517(0x182))/0x3*(-parseInt(_0x336517(0x181))/0x4)+parseInt(_0x336517(0x185))/0x5*(-parseInt(_0x336517(0x179))/0x6)+-parseInt(_0x336517(0x172))/0x7+-parseInt(_0x336517(0x16f))/0x8+-parseInt(_0x336517(0x17f))/0x9+parseInt(_0x336517(0x174))/0xa;if(_0x5b4488===_0x3b88d7)break;else _0x5de19c['push'](_0x5de19c['shift']());}catch(_0x464e56){_0x5de19c['push'](_0x5de19c['shift']());}}}(a352_0x21ad,0x4e0ac));var __importDefault=this&&this[a352_0x33b66b(0x180)]||function(_0x456578){return _0x456578&&_0x456578['__esModule']?_0x456578:{'default':_0x456578};};function a352_0x21ad(){const _0x216bee=['2549493dMrsJD','__importDefault','288300ejyPnZ','15odWesb','jsonwebtoken','412UiRlaH','190MUpOvz','1433848RXLdYV','../../errors/AppError','createRefreshToken','909188JxKdof','refreshSecret','7210170IMxZKL','../../helpers/CreateTokens','default','jrt','ERR_SESSION_EXPIRED','67038PoNPAe','tokenVersion','1239hgjsQS','createAccessToken','clearCookie','RefreshTokenService'];a352_0x21ad=function(){return _0x216bee;};return a352_0x21ad();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a352_0x33b66b(0x17e)]=void 0x0;function a352_0x5d4e(_0x1df878,_0x3bc62b){const _0x21ad53=a352_0x21ad();return a352_0x5d4e=function(_0x5d4eee,_0x431a39){_0x5d4eee=_0x5d4eee-0x16f;let _0x3c011a=_0x21ad53[_0x5d4eee];return _0x3c011a;},a352_0x5d4e(_0x1df878,_0x3bc62b);}const jsonwebtoken_1=require(a352_0x33b66b(0x183)),AppError_1=__importDefault(require(a352_0x33b66b(0x170))),ShowUserService_1=__importDefault(require('../UserServices/ShowUserService')),auth_1=__importDefault(require('../../config/auth')),CreateTokens_1=require(a352_0x33b66b(0x175)),RefreshTokenService=async(_0x16eccf,_0x5ab06b)=>{const _0xac5e4d=a352_0x33b66b;try{const _0x52497a=(0x0,jsonwebtoken_1['verify'])(_0x5ab06b,auth_1['default'][_0xac5e4d(0x173)]),{id:_0x38ea61,tokenVersion:_0x112d9f,companyId:_0x52301b}=_0x52497a,_0x444410=await(0x0,ShowUserService_1[_0xac5e4d(0x176)])(_0x38ea61);if(_0x444410[_0xac5e4d(0x17a)]!==_0x112d9f){_0x16eccf[_0xac5e4d(0x17d)](_0xac5e4d(0x177));throw new AppError_1[(_0xac5e4d(0x176))](_0xac5e4d(0x178),0x191);}const _0x36eecd=(0x0,CreateTokens_1[_0xac5e4d(0x17c)])(_0x444410),_0x1a23d4=(0x0,CreateTokens_1[_0xac5e4d(0x171)])(_0x444410);return{'user':_0x444410,'newToken':_0x36eecd,'refreshToken':_0x1a23d4};}catch(_0x4482bb){_0x16eccf[_0xac5e4d(0x17d)](_0xac5e4d(0x177));throw new AppError_1['default']('ERR_SESSION_EXPIRED',0x191);}};exports[a352_0x33b66b(0x17e)]=RefreshTokenService;