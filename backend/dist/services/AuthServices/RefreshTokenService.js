'use strict';const a387_0x49777b=a387_0x48b2;(function(_0xb24737,_0x244952){const _0x3f7c82=a387_0x48b2,_0x177bad=_0xb24737();while(!![]){try{const _0x57b1bb=parseInt(_0x3f7c82(0x7e))/0x1+parseInt(_0x3f7c82(0x7f))/0x2+-parseInt(_0x3f7c82(0x7b))/0x3*(-parseInt(_0x3f7c82(0x77))/0x4)+-parseInt(_0x3f7c82(0x73))/0x5*(parseInt(_0x3f7c82(0x82))/0x6)+parseInt(_0x3f7c82(0x79))/0x7*(-parseInt(_0x3f7c82(0x83))/0x8)+parseInt(_0x3f7c82(0x78))/0x9*(-parseInt(_0x3f7c82(0x6f))/0xa)+parseInt(_0x3f7c82(0x7d))/0xb;if(_0x57b1bb===_0x244952)break;else _0x177bad['push'](_0x177bad['shift']());}catch(_0x5e652f){_0x177bad['push'](_0x177bad['shift']());}}}(a387_0x58b4,0x508c0));function a387_0x58b4(){const _0x590430=['__esModule','4xpySHG','21582VieNRu','7XdxLTD','jsonwebtoken','1849371cTmksu','__importDefault','546590MJnikR','303184okGwCm','1102694nKooHg','createRefreshToken','tokenVersion','6VCPeMI','2502152hDZdEm','RefreshTokenService','createAccessToken','refreshSecret','ERR_SESSION_EXPIRED','../UserServices/ShowUserService','1310mjtJha','default','jrt','verify','2819255aZVsjV','../../helpers/CreateTokens','../../errors/AppError'];a387_0x58b4=function(){return _0x590430;};return a387_0x58b4();}function a387_0x48b2(_0x34a4b3,_0x23f4d0){const _0x58b4c7=a387_0x58b4();return a387_0x48b2=function(_0x48b2b5,_0x806322){_0x48b2b5=_0x48b2b5-0x6e;let _0x443e0b=_0x58b4c7[_0x48b2b5];return _0x443e0b;},a387_0x48b2(_0x34a4b3,_0x23f4d0);}var __importDefault=this&&this[a387_0x49777b(0x7c)]||function(_0x3dde07){return _0x3dde07&&_0x3dde07['__esModule']?_0x3dde07:{'default':_0x3dde07};};Object['defineProperty'](exports,a387_0x49777b(0x76),{'value':!![]}),exports[a387_0x49777b(0x84)]=void 0x0;const jsonwebtoken_1=require(a387_0x49777b(0x7a)),AppError_1=__importDefault(require(a387_0x49777b(0x75))),ShowUserService_1=__importDefault(require(a387_0x49777b(0x6e))),auth_1=__importDefault(require('../../config/auth')),CreateTokens_1=require(a387_0x49777b(0x74)),RefreshTokenService=async(_0x4f6c63,_0x8e0398)=>{const _0x3cb278=a387_0x49777b;try{const _0x22baee=(0x0,jsonwebtoken_1[_0x3cb278(0x72)])(_0x8e0398,auth_1[_0x3cb278(0x70)][_0x3cb278(0x86)]),{id:_0x1fa6ba,tokenVersion:_0x144afe,companyId:_0x2216b7}=_0x22baee,_0x4a7e5d=await(0x0,ShowUserService_1[_0x3cb278(0x70)])(_0x1fa6ba,_0x2216b7);if(_0x4a7e5d[_0x3cb278(0x81)]!==_0x144afe){_0x4f6c63['clearCookie'](_0x3cb278(0x71));throw new AppError_1[(_0x3cb278(0x70))](_0x3cb278(0x87),0x191);}const _0x55241a=(0x0,CreateTokens_1[_0x3cb278(0x85)])(_0x4a7e5d),_0x166c15=(0x0,CreateTokens_1[_0x3cb278(0x80)])(_0x4a7e5d);return{'user':_0x4a7e5d,'newToken':_0x55241a,'refreshToken':_0x166c15};}catch(_0x198ed6){_0x4f6c63['clearCookie'](_0x3cb278(0x71));throw new AppError_1[(_0x3cb278(0x70))](_0x3cb278(0x87),0x191);}};exports[a387_0x49777b(0x84)]=RefreshTokenService;