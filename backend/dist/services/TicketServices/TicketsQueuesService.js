'use strict';const a599_0x307b08=a599_0x2411;(function(_0x529ed7,_0x69192d){const _0x3515c3=a599_0x2411,_0x27837a=_0x529ed7();while(!![]){try{const _0x368211=parseInt(_0x3515c3(0x14c))/0x1+-parseInt(_0x3515c3(0x14d))/0x2*(parseInt(_0x3515c3(0x148))/0x3)+parseInt(_0x3515c3(0x138))/0x4+parseInt(_0x3515c3(0x13b))/0x5*(-parseInt(_0x3515c3(0x136))/0x6)+-parseInt(_0x3515c3(0x145))/0x7*(-parseInt(_0x3515c3(0x142))/0x8)+-parseInt(_0x3515c3(0x14e))/0x9+parseInt(_0x3515c3(0x129))/0xa*(parseInt(_0x3515c3(0x13c))/0xb);if(_0x368211===_0x69192d)break;else _0x27837a['push'](_0x27837a['shift']());}catch(_0x1b263e){_0x27837a['push'](_0x27837a['shift']());}}}(a599_0x2f85,0xbac8c));var __importDefault=this&&this[a599_0x307b08(0x149)]||function(_0x1a776e){return _0x1a776e&&_0x1a776e['__esModule']?_0x1a776e:{'default':_0x1a776e};};Object[a599_0x307b08(0x12d)](exports,a599_0x307b08(0x14b),{'value':!![]});function a599_0x2411(_0x3b4bb4,_0xd9dc0e){const _0x2f852a=a599_0x2f85();return a599_0x2411=function(_0x241174,_0x78a3e9){_0x241174=_0x241174-0x127;let _0x32bb7d=_0x2f852a[_0x241174];return _0x32bb7d;},a599_0x2411(_0x3b4bb4,_0xd9dc0e);}function a599_0x2f85(){const _0x4f4a1f=['121583rdFcVF','between','name','queueId','push','endOfDay','24SFmhCR','user','parseISO','2460745MQvTji','queue','urlPicture','934497BIOwDA','__importDefault','../../models/Contact','__esModule','1272588FtPmEU','8pELBnz','6762348NVGWUZ','whatsappId','intersection','550wsBoeU','findAll','max','col','defineProperty','lodash','../../models/Queue','contact','contactId','default','companyId','open','date-fns','4686702jqmgJB','profile','2433780lDpVYm','sequelize','updatedAt','5pQkxKK'];a599_0x2f85=function(){return _0x4f4a1f;};return a599_0x2f85();}const sequelize_1=require(a599_0x307b08(0x139)),date_fns_1=require(a599_0x307b08(0x135)),Ticket_1=__importDefault(require('../../models/Ticket')),User_1=__importDefault(require('../../models/User')),Contact_1=__importDefault(require(a599_0x307b08(0x14a))),Queue_1=__importDefault(require(a599_0x307b08(0x12f))),lodash_1=require(a599_0x307b08(0x12e)),TicketsQueuesService=async({dateStart:_0xfa84d,dateEnd:_0x3ade4d,status:_0x266700,userId:_0x31bb5c,queuesIds:_0x5b4a34,companyId:_0x4360ef,showAll:_0x48d459,profile:_0x4d2241})=>{const _0xff1ee1=a599_0x307b08;let _0x5ca76={};const _0x44e283=[{'model':Contact_1[_0xff1ee1(0x132)],'as':_0xff1ee1(0x130),'attributes':['id',_0xff1ee1(0x13e),'number','profilePicUrl',_0xff1ee1(0x133),_0xff1ee1(0x147)]},{'model':User_1[_0xff1ee1(0x132)],'as':_0xff1ee1(0x143),'attributes':['id','name',_0xff1ee1(0x137)]},{'model':Queue_1[_0xff1ee1(0x132)],'as':_0xff1ee1(0x146)}];if(_0x266700){const _0xeacc99=[],_0x30a47f=await Ticket_1['default'][_0xff1ee1(0x12a)]({'where':{'status':_0xff1ee1(0x134)},'group':[_0xff1ee1(0x133),_0xff1ee1(0x131),'queueId',_0xff1ee1(0x127)],'attributes':[_0xff1ee1(0x133),_0xff1ee1(0x131),_0xff1ee1(0x13f),_0xff1ee1(0x127),[(0x0,sequelize_1['fn'])(_0xff1ee1(0x12b),(0x0,sequelize_1[_0xff1ee1(0x12c)])('id')),'id']]});_0x30a47f&&_0xeacc99[_0xff1ee1(0x140)](_0x30a47f['map'](_0x14bc88=>_0x14bc88['id']));const _0x3321ce=(0x0,lodash_1[_0xff1ee1(0x128)])(..._0xeacc99);_0x5ca76={..._0x5ca76,'id':{[sequelize_1['Op']['in']]:_0x3321ce}};}_0x4d2241==='user'&&(_0x5ca76={..._0x5ca76,'userId':_0x31bb5c});_0xfa84d&&_0x3ade4d&&(_0x5ca76={..._0x5ca76,'createdAt':{[sequelize_1['Op'][_0xff1ee1(0x13d)]]:[+(0x0,date_fns_1['startOfDay'])((0x0,date_fns_1[_0xff1ee1(0x144)])(_0xfa84d)),+(0x0,date_fns_1[_0xff1ee1(0x141)])((0x0,date_fns_1[_0xff1ee1(0x144)])(_0x3ade4d))]}});const _0x474b8f=await Ticket_1[_0xff1ee1(0x132)]['findAll']({'where':{..._0x5ca76,'companyId':_0x4360ef},'include':_0x44e283,'order':[[_0xff1ee1(0x13a),'DESC']]});return _0x474b8f;};exports[a599_0x307b08(0x132)]=TicketsQueuesService;