'use strict';const a588_0x210b24=a588_0x3a74;(function(_0x536bb6,_0x5195e5){const _0x23586a=a588_0x3a74,_0x507bef=_0x536bb6();while(!![]){try{const _0x1ed7e1=-parseInt(_0x23586a(0x16d))/0x1*(parseInt(_0x23586a(0x157))/0x2)+parseInt(_0x23586a(0x156))/0x3*(parseInt(_0x23586a(0x166))/0x4)+-parseInt(_0x23586a(0x15b))/0x5+-parseInt(_0x23586a(0x15e))/0x6*(-parseInt(_0x23586a(0x153))/0x7)+parseInt(_0x23586a(0x175))/0x8*(parseInt(_0x23586a(0x15a))/0x9)+parseInt(_0x23586a(0x165))/0xa*(-parseInt(_0x23586a(0x151))/0xb)+parseInt(_0x23586a(0x150))/0xc;if(_0x1ed7e1===_0x5195e5)break;else _0x507bef['push'](_0x507bef['shift']());}catch(_0x241e10){_0x507bef['push'](_0x507bef['shift']());}}}(a588_0x879d,0xc1de9));function a588_0x3a74(_0x1fd401,_0x5a8ec1){const _0x879d02=a588_0x879d();return a588_0x3a74=function(_0x3a7423,_0x5b0a41){_0x3a7423=_0x3a7423-0x14c;let _0x207465=_0x879d02[_0x3a7423];return _0x207465;},a588_0x3a74(_0x1fd401,_0x5a8ec1);}function a588_0x879d(){const _0x56fea9=['__importDefault','contactId','8DPsnko','contact','queue','map','open','17957088PcJuQS','1119602fYsgGQ','DESC','2121SBfFPG','default','../../models/Ticket','51BTOYGJ','4GocMez','parseISO','startOfDay','28197SgmVaU','1573320UInLVn','__esModule','lodash','14130HSUhXQ','../../models/Contact','companyId','intersection','defineProperty','sequelize','queueId','130SLCnLz','282652NtTrjH','endOfDay','user','whatsappId','updatedAt','urlPicture','findAll','491237KFPuSR','name','../../models/Queue','push','max','date-fns'];a588_0x879d=function(){return _0x56fea9;};return a588_0x879d();}var __importDefault=this&&this[a588_0x210b24(0x173)]||function(_0x1eaed4){const _0x26887b=a588_0x210b24;return _0x1eaed4&&_0x1eaed4[_0x26887b(0x15c)]?_0x1eaed4:{'default':_0x1eaed4};};Object[a588_0x210b24(0x162)](exports,a588_0x210b24(0x15c),{'value':!![]});const sequelize_1=require(a588_0x210b24(0x163)),date_fns_1=require(a588_0x210b24(0x172)),Ticket_1=__importDefault(require(a588_0x210b24(0x155))),User_1=__importDefault(require('../../models/User')),Contact_1=__importDefault(require(a588_0x210b24(0x15f))),Queue_1=__importDefault(require(a588_0x210b24(0x16f))),lodash_1=require(a588_0x210b24(0x15d)),TicketsQueuesService=async({dateStart:_0x842df5,dateEnd:_0x3d9dd0,status:_0x1c329c,userId:_0x1b6797,queuesIds:_0xb5a0f7,companyId:_0xa18257,showAll:_0x248eef,profile:_0x1c501c})=>{const _0x579f88=a588_0x210b24;let _0x2c82ac={};const _0x412a4a=[{'model':Contact_1[_0x579f88(0x154)],'as':_0x579f88(0x14c),'attributes':['id',_0x579f88(0x16e),'number','profilePicUrl','companyId',_0x579f88(0x16b)]},{'model':User_1[_0x579f88(0x154)],'as':_0x579f88(0x168),'attributes':['id',_0x579f88(0x16e),'profile']},{'model':Queue_1[_0x579f88(0x154)],'as':_0x579f88(0x14d)}];if(_0x1c329c){const _0x3e2bab=[],_0x31f893=await Ticket_1[_0x579f88(0x154)][_0x579f88(0x16c)]({'where':{'status':_0x579f88(0x14f)},'group':[_0x579f88(0x160),_0x579f88(0x174),'queueId',_0x579f88(0x169)],'attributes':['companyId',_0x579f88(0x174),_0x579f88(0x164),_0x579f88(0x169),[(0x0,sequelize_1['fn'])(_0x579f88(0x171),(0x0,sequelize_1['col'])('id')),'id']]});_0x31f893&&_0x3e2bab[_0x579f88(0x170)](_0x31f893[_0x579f88(0x14e)](_0x11d21b=>_0x11d21b['id']));const _0xa4deba=(0x0,lodash_1[_0x579f88(0x161)])(..._0x3e2bab);_0x2c82ac={..._0x2c82ac,'id':{[sequelize_1['Op']['in']]:_0xa4deba}};}_0x1c501c==='user'&&(_0x2c82ac={..._0x2c82ac,'userId':_0x1b6797});_0x842df5&&_0x3d9dd0&&(_0x2c82ac={..._0x2c82ac,'createdAt':{[sequelize_1['Op']['between']]:[+(0x0,date_fns_1[_0x579f88(0x159)])((0x0,date_fns_1[_0x579f88(0x158)])(_0x842df5)),+(0x0,date_fns_1[_0x579f88(0x167)])((0x0,date_fns_1['parseISO'])(_0x3d9dd0))]}});const _0x2fbe3e=await Ticket_1[_0x579f88(0x154)]['findAll']({'where':{..._0x2c82ac,'companyId':_0xa18257},'include':_0x412a4a,'order':[[_0x579f88(0x16a),_0x579f88(0x152)]]});return _0x2fbe3e;};exports[a588_0x210b24(0x154)]=TicketsQueuesService;