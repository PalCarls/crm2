'use strict';const a525_0x42ef17=a525_0x22cd;(function(_0x37c62f,_0x1cb8f4){const _0x28ac4e=a525_0x22cd,_0x359d06=_0x37c62f();while(!![]){try{const _0x4cb3f5=-parseInt(_0x28ac4e(0x17b))/0x1+-parseInt(_0x28ac4e(0x161))/0x2+parseInt(_0x28ac4e(0x184))/0x3+parseInt(_0x28ac4e(0x16b))/0x4+-parseInt(_0x28ac4e(0x17e))/0x5*(-parseInt(_0x28ac4e(0x170))/0x6)+parseInt(_0x28ac4e(0x168))/0x7+-parseInt(_0x28ac4e(0x16f))/0x8;if(_0x4cb3f5===_0x1cb8f4)break;else _0x359d06['push'](_0x359d06['shift']());}catch(_0x4b5d26){_0x359d06['push'](_0x359d06['shift']());}}}(a525_0x3750,0x7c11f));function a525_0x3750(){const _0x32d8be=['contact','intersection','between','queue','map','6729289rTPWCf','../../models/User','../../models/Contact','2370804bQOmot','__esModule','contactId','parseISO','18478000KAWISq','11910DrdMrs','queueId','DESC','__importDefault','profilePicUrl','updatedAt','findAll','user','name','endOfDay','whatsappId','78631ZVIJtx','push','date-fns','1400tCKPQZ','default','lodash','sequelize','companyId','number','2474766qgrHOD','Sequelize','76356YQgAPG','../../models/Queue'];a525_0x3750=function(){return _0x32d8be;};return a525_0x3750();}var __importDefault=this&&this[a525_0x42ef17(0x173)]||function(_0x4b990d){const _0x35d791=a525_0x42ef17;return _0x4b990d&&_0x4b990d[_0x35d791(0x16c)]?_0x4b990d:{'default':_0x4b990d};};Object['defineProperty'](exports,a525_0x42ef17(0x16c),{'value':!![]});const sequelize_1=require(a525_0x42ef17(0x181)),date_fns_1=require(a525_0x42ef17(0x17d)),Ticket_1=__importDefault(require('../../models/Ticket')),User_1=__importDefault(require(a525_0x42ef17(0x169))),Contact_1=__importDefault(require(a525_0x42ef17(0x16a))),Queue_1=__importDefault(require(a525_0x42ef17(0x162))),lodash_1=require(a525_0x42ef17(0x180)),TicketsQueuesService=async({dateStart:_0x19695b,dateEnd:_0x248c7e,status:_0x51d7a8,userId:_0x54a921,queuesIds:_0xf0b594,companyId:_0x29cc49,showAll:_0x3ef26e,profile:_0x388a5a})=>{const _0x1658b0=a525_0x42ef17;let _0x478f5a={};const _0x34b6b9=[{'model':Contact_1[_0x1658b0(0x17f)],'as':_0x1658b0(0x163),'attributes':['id',_0x1658b0(0x178),_0x1658b0(0x183),_0x1658b0(0x174)]},{'model':User_1[_0x1658b0(0x17f)],'as':_0x1658b0(0x177),'attributes':['id',_0x1658b0(0x178),'profile']},{'model':Queue_1[_0x1658b0(0x17f)],'as':_0x1658b0(0x166)}];if(_0x51d7a8){const _0x39f55b=[],_0x393dc2=await Ticket_1['default'][_0x1658b0(0x176)]({'where':{'status':'open'},'group':[_0x1658b0(0x182),_0x1658b0(0x16d),_0x1658b0(0x171),_0x1658b0(0x17a)],'attributes':[_0x1658b0(0x182),_0x1658b0(0x16d),_0x1658b0(0x171),'whatsappId',[sequelize_1[_0x1658b0(0x185)]['fn']('max',sequelize_1[_0x1658b0(0x185)]['col']('id')),'id']]});_0x393dc2&&_0x39f55b[_0x1658b0(0x17c)](_0x393dc2[_0x1658b0(0x167)](_0x368f23=>_0x368f23['id']));const _0x433898=(0x0,lodash_1[_0x1658b0(0x164)])(..._0x39f55b);_0x478f5a={..._0x478f5a,'id':{[sequelize_1['Op']['in']]:_0x433898}};}_0x388a5a===_0x1658b0(0x177)&&(_0x478f5a={..._0x478f5a,'userId':_0x54a921});_0x19695b&&_0x248c7e&&(_0x478f5a={..._0x478f5a,'createdAt':{[sequelize_1['Op'][_0x1658b0(0x165)]]:[+(0x0,date_fns_1['startOfDay'])((0x0,date_fns_1[_0x1658b0(0x16e)])(_0x19695b)),+(0x0,date_fns_1[_0x1658b0(0x179)])((0x0,date_fns_1[_0x1658b0(0x16e)])(_0x248c7e))]}});const _0x1f688a=await Ticket_1[_0x1658b0(0x17f)][_0x1658b0(0x176)]({'where':{..._0x478f5a,'companyId':_0x29cc49},'include':_0x34b6b9,'order':[[_0x1658b0(0x175),_0x1658b0(0x172)]]});return _0x1f688a;};function a525_0x22cd(_0x57791c,_0x13c544){const _0x375090=a525_0x3750();return a525_0x22cd=function(_0x22cdb4,_0x11b73a){_0x22cdb4=_0x22cdb4-0x161;let _0xca8efa=_0x375090[_0x22cdb4];return _0xca8efa;},a525_0x22cd(_0x57791c,_0x13c544);}exports[a525_0x42ef17(0x17f)]=TicketsQueuesService;