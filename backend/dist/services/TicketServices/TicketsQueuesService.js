'use strict';const a599_0x52fd5c=a599_0x56f9;(function(_0x104219,_0x4e820b){const _0x5df94a=a599_0x56f9,_0x4e8f97=_0x104219();while(!![]){try{const _0x546920=parseInt(_0x5df94a(0x124))/0x1*(parseInt(_0x5df94a(0x12c))/0x2)+-parseInt(_0x5df94a(0x144))/0x3+-parseInt(_0x5df94a(0x136))/0x4*(parseInt(_0x5df94a(0x142))/0x5)+-parseInt(_0x5df94a(0x13b))/0x6+parseInt(_0x5df94a(0x137))/0x7*(parseInt(_0x5df94a(0x13e))/0x8)+-parseInt(_0x5df94a(0x138))/0x9+-parseInt(_0x5df94a(0x127))/0xa*(-parseInt(_0x5df94a(0x149))/0xb);if(_0x546920===_0x4e820b)break;else _0x4e8f97['push'](_0x4e8f97['shift']());}catch(_0x39cb00){_0x4e8f97['push'](_0x4e8f97['shift']());}}}(a599_0x1b2d,0x9cc35));function a599_0x1b2d(){const _0x1ce64b=['13680Miwigh','../../models/User','576528hfWZXa','col','default','defineProperty','../../models/Contact','11ZfENrW','parseISO','number','27724cyaRvg','endOfDay','open','14036140hJPBSK','contactId','../../models/Queue','queueId','__esModule','16iOctQR','user','DESC','profile','contact','companyId','urlPicture','name','whatsappId','__importDefault','1056zKIpTW','25004rZtqgd','10450422OwBVKO','findAll','max','239946IkkSaN','push','date-fns','2536CzoILU','lodash','sequelize','between'];a599_0x1b2d=function(){return _0x1ce64b;};return a599_0x1b2d();}var __importDefault=this&&this[a599_0x52fd5c(0x135)]||function(_0x1fd14c){const _0x4ad755=a599_0x52fd5c;return _0x1fd14c&&_0x1fd14c[_0x4ad755(0x12b)]?_0x1fd14c:{'default':_0x1fd14c};};function a599_0x56f9(_0xda2b1f,_0x218b1a){const _0x1b2d65=a599_0x1b2d();return a599_0x56f9=function(_0x56f9e9,_0x43af35){_0x56f9e9=_0x56f9e9-0x124;let _0x127ef5=_0x1b2d65[_0x56f9e9];return _0x127ef5;},a599_0x56f9(_0xda2b1f,_0x218b1a);}Object[a599_0x52fd5c(0x147)](exports,a599_0x52fd5c(0x12b),{'value':!![]});const sequelize_1=require(a599_0x52fd5c(0x140)),date_fns_1=require(a599_0x52fd5c(0x13d)),Ticket_1=__importDefault(require('../../models/Ticket')),User_1=__importDefault(require(a599_0x52fd5c(0x143))),Contact_1=__importDefault(require(a599_0x52fd5c(0x148))),Queue_1=__importDefault(require(a599_0x52fd5c(0x129))),lodash_1=require(a599_0x52fd5c(0x13f)),TicketsQueuesService=async({dateStart:_0x316eea,dateEnd:_0x2746c2,status:_0xf0cb2c,userId:_0x46b51e,queuesIds:_0x212f1e,companyId:_0x1a2a19,showAll:_0x407aa5,profile:_0x5c9020})=>{const _0x228012=a599_0x52fd5c;let _0x225f46={};const _0x1a996c=[{'model':Contact_1[_0x228012(0x146)],'as':_0x228012(0x130),'attributes':['id',_0x228012(0x133),_0x228012(0x14b),'profilePicUrl',_0x228012(0x131),_0x228012(0x132)]},{'model':User_1['default'],'as':_0x228012(0x12d),'attributes':['id','name',_0x228012(0x12f)]},{'model':Queue_1[_0x228012(0x146)],'as':'queue'}];if(_0xf0cb2c){const _0x5f397a=[],_0x1a52a6=await Ticket_1[_0x228012(0x146)]['findAll']({'where':{'status':_0x228012(0x126)},'group':['companyId',_0x228012(0x128),_0x228012(0x12a),_0x228012(0x134)],'attributes':[_0x228012(0x131),_0x228012(0x128),_0x228012(0x12a),_0x228012(0x134),[(0x0,sequelize_1['fn'])(_0x228012(0x13a),(0x0,sequelize_1[_0x228012(0x145)])('id')),'id']]});_0x1a52a6&&_0x5f397a[_0x228012(0x13c)](_0x1a52a6['map'](_0x58e800=>_0x58e800['id']));const _0x21aaec=(0x0,lodash_1['intersection'])(..._0x5f397a);_0x225f46={..._0x225f46,'id':{[sequelize_1['Op']['in']]:_0x21aaec}};}_0x5c9020===_0x228012(0x12d)&&(_0x225f46={..._0x225f46,'userId':_0x46b51e});_0x316eea&&_0x2746c2&&(_0x225f46={..._0x225f46,'createdAt':{[sequelize_1['Op'][_0x228012(0x141)]]:[+(0x0,date_fns_1['startOfDay'])((0x0,date_fns_1[_0x228012(0x14a)])(_0x316eea)),+(0x0,date_fns_1[_0x228012(0x125)])((0x0,date_fns_1[_0x228012(0x14a)])(_0x2746c2))]}});const _0x1dbd42=await Ticket_1[_0x228012(0x146)][_0x228012(0x139)]({'where':{..._0x225f46,'companyId':_0x1a2a19},'include':_0x1a996c,'order':[['updatedAt',_0x228012(0x12e)]]});return _0x1dbd42;};exports[a599_0x52fd5c(0x146)]=TicketsQueuesService;