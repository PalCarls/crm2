'use strict';function a489_0x3ab7(){const _0x3ae5d7=['companyId','../../models/User','lodash','findAll','map','defineProperty','1312iOcCcj','3160kTRKNH','col','open','12eEVPGH','push','contact','__importDefault','1425325EDWaEf','name','Sequelize','3967232tgKWDK','../../models/Ticket','log','whatsappId','__esModule','default','1434eFMSLD','9UMGSuf','9adkown','parseISO','user','profile','endOfDay','DESC','profilePicUrl','597820SbpVIp','957642mtuBEN','contactId','114632RmyEWN','max','sequelize','22484mHVEFm','startOfDay'];a489_0x3ab7=function(){return _0x3ae5d7;};return a489_0x3ab7();}const a489_0x37a653=a489_0x51d9;(function(_0x362ece,_0x14c6db){const _0x570a9c=a489_0x51d9,_0x420fae=_0x362ece();while(!![]){try{const _0x1a5268=parseInt(_0x570a9c(0x1ef))/0x1*(parseInt(_0x570a9c(0x1fa))/0x2)+-parseInt(_0x570a9c(0x1f8))/0x3+-parseInt(_0x570a9c(0x205))/0x4*(-parseInt(_0x570a9c(0x206))/0x5)+parseInt(_0x570a9c(0x1ee))/0x6*(parseInt(_0x570a9c(0x1fd))/0x7)+-parseInt(_0x570a9c(0x1e8))/0x8*(parseInt(_0x570a9c(0x1f0))/0x9)+parseInt(_0x570a9c(0x1f7))/0xa+parseInt(_0x570a9c(0x1e5))/0xb*(-parseInt(_0x570a9c(0x209))/0xc);if(_0x1a5268===_0x14c6db)break;else _0x420fae['push'](_0x420fae['shift']());}catch(_0xe5c9e){_0x420fae['push'](_0x420fae['shift']());}}}(a489_0x3ab7,0x93ec9));var __importDefault=this&&this[a489_0x37a653(0x1e4)]||function(_0x502c53){const _0x29147f=a489_0x37a653;return _0x502c53&&_0x502c53[_0x29147f(0x1ec)]?_0x502c53:{'default':_0x502c53};};Object[a489_0x37a653(0x204)](exports,a489_0x37a653(0x1ec),{'value':!![]});function a489_0x51d9(_0x4d10fe,_0x382c81){const _0x3ab7c1=a489_0x3ab7();return a489_0x51d9=function(_0x51d956,_0xb60b18){_0x51d956=_0x51d956-0x1e2;let _0x1a79df=_0x3ab7c1[_0x51d956];return _0x1a79df;},a489_0x51d9(_0x4d10fe,_0x382c81);}const sequelize_1=require(a489_0x37a653(0x1fc)),date_fns_1=require('date-fns'),Ticket_1=__importDefault(require(a489_0x37a653(0x1e9))),User_1=__importDefault(require(a489_0x37a653(0x200))),Contact_1=__importDefault(require('../../models/Contact')),Queue_1=__importDefault(require('../../models/Queue')),lodash_1=require(a489_0x37a653(0x201)),TicketsQueuesService=async({dateStart:_0x2265e9,dateEnd:_0x237012,status:_0x2651e3,userId:_0x58e3ca,queuesIds:_0x10efff,companyId:_0x290ecb,showAll:_0x5ec2c6,profile:_0x17b019})=>{const _0x52a508=a489_0x37a653;let _0x48cc66={};const _0x17a398=[{'model':Contact_1[_0x52a508(0x1ed)],'as':_0x52a508(0x1e3),'attributes':['id','name','number',_0x52a508(0x1f6)]},{'model':User_1[_0x52a508(0x1ed)],'as':_0x52a508(0x1f2),'attributes':['id',_0x52a508(0x1e6),_0x52a508(0x1f3)]},{'model':Queue_1['default'],'as':'queue'}];if(_0x2651e3){const _0x19220c=[],_0x3e4840=await Ticket_1[_0x52a508(0x1ed)]['findAll']({'where':{'status':_0x52a508(0x208)},'group':[_0x52a508(0x1ff),_0x52a508(0x1f9),'queueId','whatsappId'],'attributes':['companyId',_0x52a508(0x1f9),'queueId',_0x52a508(0x1eb),[sequelize_1[_0x52a508(0x1e7)]['fn'](_0x52a508(0x1fb),sequelize_1[_0x52a508(0x1e7)][_0x52a508(0x207)]('id')),'id']]});_0x3e4840&&_0x19220c[_0x52a508(0x1e2)](_0x3e4840[_0x52a508(0x203)](_0x3a357a=>_0x3a357a['id']));const _0x22590c=(0x0,lodash_1['intersection'])(..._0x19220c);_0x48cc66={..._0x48cc66,'id':{[sequelize_1['Op']['in']]:_0x22590c}};}_0x17b019==='user'&&(_0x48cc66={..._0x48cc66,'userId':_0x58e3ca});_0x2265e9&&_0x237012&&(_0x48cc66={..._0x48cc66,'createdAt':{[sequelize_1['Op']['between']]:[+(0x0,date_fns_1[_0x52a508(0x1fe)])((0x0,date_fns_1[_0x52a508(0x1f1)])(_0x2265e9)),+(0x0,date_fns_1[_0x52a508(0x1f4)])((0x0,date_fns_1[_0x52a508(0x1f1)])(_0x237012))]}});const _0x521c79=await Ticket_1['default'][_0x52a508(0x202)]({'where':{..._0x48cc66,'companyId':_0x290ecb},'include':_0x17a398,'order':[['updatedAt',_0x52a508(0x1f5)]]});return console[_0x52a508(0x1ea)](_0x521c79),_0x521c79;};exports[a489_0x37a653(0x1ed)]=TicketsQueuesService;