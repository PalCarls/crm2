'use strict';const a506_0x59a9c7=a506_0x1aa6;(function(_0x52c6dd,_0x4cb542){const _0x5ac7d0=a506_0x1aa6,_0x279914=_0x52c6dd();while(!![]){try{const _0x40d7d3=-parseInt(_0x5ac7d0(0x1b3))/0x1+parseInt(_0x5ac7d0(0x1be))/0x2+parseInt(_0x5ac7d0(0x1c4))/0x3*(parseInt(_0x5ac7d0(0x1c8))/0x4)+-parseInt(_0x5ac7d0(0x1d2))/0x5+parseInt(_0x5ac7d0(0x1c6))/0x6+parseInt(_0x5ac7d0(0x1c1))/0x7+-parseInt(_0x5ac7d0(0x1ca))/0x8;if(_0x40d7d3===_0x4cb542)break;else _0x279914['push'](_0x279914['shift']());}catch(_0x143486){_0x279914['push'](_0x279914['shift']());}}}(a506_0x29df,0x49402));var __importDefault=this&&this[a506_0x59a9c7(0x1bf)]||function(_0x1c285b){const _0x16217e=a506_0x59a9c7;return _0x1c285b&&_0x1c285b[_0x16217e(0x1ba)]?_0x1c285b:{'default':_0x1c285b};};Object[a506_0x59a9c7(0x1d0)](exports,a506_0x59a9c7(0x1ba),{'value':!![]});function a506_0x29df(){const _0x574b7e=['949510SLMJxO','__importDefault','default','3452512aVsHMp','../../models/User','between','36588oURZNj','whatsappId','326712dIlBgu','../../models/Contact','156KtGyem','parseISO','1829184QKBySt','push','lodash','name','map','col','defineProperty','queueId','2829380mNBhjS','profile','contactId','user','max','sequelize','Sequelize','403509ZGhScy','open','endOfDay','contact','startOfDay','DESC','log','__esModule','findAll','queue','date-fns'];a506_0x29df=function(){return _0x574b7e;};return a506_0x29df();}const sequelize_1=require(a506_0x59a9c7(0x1d7)),date_fns_1=require(a506_0x59a9c7(0x1bd)),Ticket_1=__importDefault(require('../../models/Ticket')),User_1=__importDefault(require(a506_0x59a9c7(0x1c2))),Contact_1=__importDefault(require(a506_0x59a9c7(0x1c7))),Queue_1=__importDefault(require('../../models/Queue')),lodash_1=require(a506_0x59a9c7(0x1cc)),TicketsQueuesService=async({dateStart:_0x48ad7a,dateEnd:_0x1d49c2,status:_0x2a078b,userId:_0x290222,queuesIds:_0x494e7c,companyId:_0x39a0eb,showAll:_0x11ef45,profile:_0x2d7f53})=>{const _0x2cf25f=a506_0x59a9c7;let _0xad0303={};const _0x1589db=[{'model':Contact_1[_0x2cf25f(0x1c0)],'as':_0x2cf25f(0x1b6),'attributes':['id',_0x2cf25f(0x1cd),'number','profilePicUrl']},{'model':User_1[_0x2cf25f(0x1c0)],'as':_0x2cf25f(0x1d5),'attributes':['id','name',_0x2cf25f(0x1d3)]},{'model':Queue_1[_0x2cf25f(0x1c0)],'as':_0x2cf25f(0x1bc)}];if(_0x2a078b){const _0x484b21=[],_0x561cba=await Ticket_1[_0x2cf25f(0x1c0)][_0x2cf25f(0x1bb)]({'where':{'status':_0x2cf25f(0x1b4)},'group':['companyId',_0x2cf25f(0x1d4),_0x2cf25f(0x1d1),_0x2cf25f(0x1c5)],'attributes':['companyId',_0x2cf25f(0x1d4),_0x2cf25f(0x1d1),_0x2cf25f(0x1c5),[sequelize_1[_0x2cf25f(0x1d8)]['fn'](_0x2cf25f(0x1d6),sequelize_1[_0x2cf25f(0x1d8)][_0x2cf25f(0x1cf)]('id')),'id']]});_0x561cba&&_0x484b21[_0x2cf25f(0x1cb)](_0x561cba[_0x2cf25f(0x1ce)](_0x40550e=>_0x40550e['id']));const _0x44298a=(0x0,lodash_1['intersection'])(..._0x484b21);_0xad0303={..._0xad0303,'id':{[sequelize_1['Op']['in']]:_0x44298a}};}_0x2d7f53==='user'&&(_0xad0303={..._0xad0303,'userId':_0x290222});_0x48ad7a&&_0x1d49c2&&(_0xad0303={..._0xad0303,'createdAt':{[sequelize_1['Op'][_0x2cf25f(0x1c3)]]:[+(0x0,date_fns_1[_0x2cf25f(0x1b7)])((0x0,date_fns_1[_0x2cf25f(0x1c9)])(_0x48ad7a)),+(0x0,date_fns_1[_0x2cf25f(0x1b5)])((0x0,date_fns_1[_0x2cf25f(0x1c9)])(_0x1d49c2))]}});const _0x1af79a=await Ticket_1['default'][_0x2cf25f(0x1bb)]({'where':{..._0xad0303,'companyId':_0x39a0eb},'include':_0x1589db,'order':[['updatedAt',_0x2cf25f(0x1b8)]]});return console[_0x2cf25f(0x1b9)](_0x1af79a),_0x1af79a;};function a506_0x1aa6(_0x2f713c,_0x186c87){const _0x29dfee=a506_0x29df();return a506_0x1aa6=function(_0x1aa6b5,_0x1779d7){_0x1aa6b5=_0x1aa6b5-0x1b3;let _0xa57eb2=_0x29dfee[_0x1aa6b5];return _0xa57eb2;},a506_0x1aa6(_0x2f713c,_0x186c87);}exports[a506_0x59a9c7(0x1c0)]=TicketsQueuesService;