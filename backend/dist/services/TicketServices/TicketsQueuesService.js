'use strict';const a525_0x40dd07=a525_0x52cf;function a525_0x4e15(){const _0xf80aca=['contact','date-fns','name','1754388GHXaIN','profilePicUrl','max','270OhspUa','col','default','profile','651787oBasnV','queue','33uuDvfj','user','contactId','updatedAt','753530DAKBZI','queueId','Sequelize','951XvQMPe','139436GpsYCl','../../models/Contact','parseISO','86190GShMrD','intersection','number','__importDefault','11848uWuSdW','18HaLToo','6812QbLNlu','defineProperty','../../models/Ticket','companyId','findAll','push','DESC','startOfDay','2009MscyiT','endOfDay','whatsappId','sequelize','open'];a525_0x4e15=function(){return _0xf80aca;};return a525_0x4e15();}(function(_0x10a2f1,_0x1e1f32){const _0x5dae3f=a525_0x52cf,_0x197570=_0x10a2f1();while(!![]){try{const _0x402b47=parseInt(_0x5dae3f(0xf5))/0x1+parseInt(_0x5dae3f(0xff))/0x2+parseInt(_0x5dae3f(0xfe))/0x3*(-parseInt(_0x5dae3f(0x108))/0x4)+-parseInt(_0x5dae3f(0xfb))/0x5*(parseInt(_0x5dae3f(0x107))/0x6)+parseInt(_0x5dae3f(0x110))/0x7*(parseInt(_0x5dae3f(0x106))/0x8)+parseInt(_0x5dae3f(0xf1))/0x9*(-parseInt(_0x5dae3f(0x102))/0xa)+-parseInt(_0x5dae3f(0xf7))/0xb*(-parseInt(_0x5dae3f(0xee))/0xc);if(_0x402b47===_0x1e1f32)break;else _0x197570['push'](_0x197570['shift']());}catch(_0x3c4189){_0x197570['push'](_0x197570['shift']());}}}(a525_0x4e15,0x51b12));function a525_0x52cf(_0x5b6daa,_0x37dea0){const _0x4e1555=a525_0x4e15();return a525_0x52cf=function(_0x52cf82,_0x1c781b){_0x52cf82=_0x52cf82-0xe9;let _0x16f4d5=_0x4e1555[_0x52cf82];return _0x16f4d5;},a525_0x52cf(_0x5b6daa,_0x37dea0);}var __importDefault=this&&this[a525_0x40dd07(0x105)]||function(_0x12a71a){return _0x12a71a&&_0x12a71a['__esModule']?_0x12a71a:{'default':_0x12a71a};};Object[a525_0x40dd07(0x109)](exports,'__esModule',{'value':!![]});const sequelize_1=require(a525_0x40dd07(0xe9)),date_fns_1=require(a525_0x40dd07(0xec)),Ticket_1=__importDefault(require(a525_0x40dd07(0x10a))),User_1=__importDefault(require('../../models/User')),Contact_1=__importDefault(require(a525_0x40dd07(0x100))),Queue_1=__importDefault(require('../../models/Queue')),lodash_1=require('lodash'),TicketsQueuesService=async({dateStart:_0x8d373e,dateEnd:_0x495aec,status:_0x37a8d1,userId:_0x5b4e3f,queuesIds:_0x184376,companyId:_0x1d01ed,showAll:_0x3e2efa,profile:_0x92ed0c})=>{const _0x475b4d=a525_0x40dd07;let _0xd18aa5={};const _0x565abf=[{'model':Contact_1[_0x475b4d(0xf3)],'as':_0x475b4d(0xeb),'attributes':['id','name',_0x475b4d(0x104),_0x475b4d(0xef)]},{'model':User_1['default'],'as':_0x475b4d(0xf8),'attributes':['id',_0x475b4d(0xed),_0x475b4d(0xf4)]},{'model':Queue_1[_0x475b4d(0xf3)],'as':_0x475b4d(0xf6)}];if(_0x37a8d1){const _0x18d634=[],_0x431f29=await Ticket_1['default'][_0x475b4d(0x10c)]({'where':{'status':_0x475b4d(0xea)},'group':['companyId',_0x475b4d(0xf9),'queueId',_0x475b4d(0x112)],'attributes':[_0x475b4d(0x10b),_0x475b4d(0xf9),_0x475b4d(0xfc),'whatsappId',[sequelize_1[_0x475b4d(0xfd)]['fn'](_0x475b4d(0xf0),sequelize_1[_0x475b4d(0xfd)][_0x475b4d(0xf2)]('id')),'id']]});_0x431f29&&_0x18d634[_0x475b4d(0x10d)](_0x431f29['map'](_0x1b8f77=>_0x1b8f77['id']));const _0x396501=(0x0,lodash_1[_0x475b4d(0x103)])(..._0x18d634);_0xd18aa5={..._0xd18aa5,'id':{[sequelize_1['Op']['in']]:_0x396501}};}_0x92ed0c==='user'&&(_0xd18aa5={..._0xd18aa5,'userId':_0x5b4e3f});_0x8d373e&&_0x495aec&&(_0xd18aa5={..._0xd18aa5,'createdAt':{[sequelize_1['Op']['between']]:[+(0x0,date_fns_1[_0x475b4d(0x10f)])((0x0,date_fns_1[_0x475b4d(0x101)])(_0x8d373e)),+(0x0,date_fns_1[_0x475b4d(0x111)])((0x0,date_fns_1['parseISO'])(_0x495aec))]}});const _0x5f2ff9=await Ticket_1[_0x475b4d(0xf3)][_0x475b4d(0x10c)]({'where':{..._0xd18aa5,'companyId':_0x1d01ed},'include':_0x565abf,'order':[[_0x475b4d(0xfa),_0x475b4d(0x10e)]]});return _0x5f2ff9;};exports[a525_0x40dd07(0xf3)]=TicketsQueuesService;