'use strict';function a542_0x23c9(_0x3a5970,_0x698a5d){const _0x4595e5=a542_0x4595();return a542_0x23c9=function(_0x23c982,_0x4c9bc3){_0x23c982=_0x23c982-0x10f;let _0x3f6bcd=_0x4595e5[_0x23c982];return _0x3f6bcd;},a542_0x23c9(_0x3a5970,_0x698a5d);}function a542_0x4595(){const _0x8b56c7=['__esModule','companyId','max','sequelize','1289462FGXKwE','3916960yntznF','map','user','findAll','queueId','179022lNPSQo','number','2835582aOtuls','DESC','../../models/Ticket','351784tqJFPt','profile','intersection','whatsappId','default','../../models/User','12006909XtnAns','7lhpXol','between','parseISO','10bgPNXU','updatedAt','145NggvFQ','push','contact','name','date-fns','contactId','defineProperty','endOfDay','lodash','6732808JhYgnK','__importDefault'];a542_0x4595=function(){return _0x8b56c7;};return a542_0x4595();}const a542_0x58c99c=a542_0x23c9;(function(_0x5ce851,_0x894b0f){const _0x254431=a542_0x23c9,_0x1cf17c=_0x5ce851();while(!![]){try{const _0x3f98a5=parseInt(_0x254431(0x11c))/0x1+parseInt(_0x254431(0x111))/0x2+parseInt(_0x254431(0x119))/0x3+-parseInt(_0x254431(0x112))/0x4+-parseInt(_0x254431(0x128))/0x5*(parseInt(_0x254431(0x117))/0x6)+parseInt(_0x254431(0x123))/0x7*(-parseInt(_0x254431(0x131))/0x8)+parseInt(_0x254431(0x122))/0x9*(parseInt(_0x254431(0x126))/0xa);if(_0x3f98a5===_0x894b0f)break;else _0x1cf17c['push'](_0x1cf17c['shift']());}catch(_0x449f41){_0x1cf17c['push'](_0x1cf17c['shift']());}}}(a542_0x4595,0x8ff80));var __importDefault=this&&this[a542_0x58c99c(0x132)]||function(_0x2577cc){const _0x4b628e=a542_0x58c99c;return _0x2577cc&&_0x2577cc[_0x4b628e(0x133)]?_0x2577cc:{'default':_0x2577cc};};Object[a542_0x58c99c(0x12e)](exports,'__esModule',{'value':!![]});const sequelize_1=require(a542_0x58c99c(0x110)),date_fns_1=require(a542_0x58c99c(0x12c)),Ticket_1=__importDefault(require(a542_0x58c99c(0x11b))),User_1=__importDefault(require(a542_0x58c99c(0x121))),Contact_1=__importDefault(require('../../models/Contact')),Queue_1=__importDefault(require('../../models/Queue')),lodash_1=require(a542_0x58c99c(0x130)),TicketsQueuesService=async({dateStart:_0x3de4dd,dateEnd:_0xee1f2d,status:_0x2f7b67,userId:_0x3dc4fe,queuesIds:_0x128ae2,companyId:_0x52615c,showAll:_0x14305e,profile:_0x247360})=>{const _0x28ac11=a542_0x58c99c;let _0x5465f3={};const _0x59a089=[{'model':Contact_1['default'],'as':_0x28ac11(0x12a),'attributes':['id',_0x28ac11(0x12b),_0x28ac11(0x118),'profilePicUrl']},{'model':User_1[_0x28ac11(0x120)],'as':_0x28ac11(0x114),'attributes':['id','name',_0x28ac11(0x11d)]},{'model':Queue_1[_0x28ac11(0x120)],'as':'queue'}];if(_0x2f7b67){const _0x2986fb=[],_0x2b769f=await Ticket_1[_0x28ac11(0x120)][_0x28ac11(0x115)]({'where':{'status':'open'},'group':[_0x28ac11(0x134),_0x28ac11(0x12d),'queueId',_0x28ac11(0x11f)],'attributes':['companyId',_0x28ac11(0x12d),_0x28ac11(0x116),'whatsappId',[(0x0,sequelize_1['fn'])(_0x28ac11(0x10f),(0x0,sequelize_1['col'])('id')),'id']]});_0x2b769f&&_0x2986fb[_0x28ac11(0x129)](_0x2b769f[_0x28ac11(0x113)](_0x3ab8ea=>_0x3ab8ea['id']));const _0x27aff0=(0x0,lodash_1[_0x28ac11(0x11e)])(..._0x2986fb);_0x5465f3={..._0x5465f3,'id':{[sequelize_1['Op']['in']]:_0x27aff0}};}_0x247360==='user'&&(_0x5465f3={..._0x5465f3,'userId':_0x3dc4fe});_0x3de4dd&&_0xee1f2d&&(_0x5465f3={..._0x5465f3,'createdAt':{[sequelize_1['Op'][_0x28ac11(0x124)]]:[+(0x0,date_fns_1['startOfDay'])((0x0,date_fns_1['parseISO'])(_0x3de4dd)),+(0x0,date_fns_1[_0x28ac11(0x12f)])((0x0,date_fns_1[_0x28ac11(0x125)])(_0xee1f2d))]}});const _0xe59a0a=await Ticket_1[_0x28ac11(0x120)][_0x28ac11(0x115)]({'where':{..._0x5465f3,'companyId':_0x52615c},'include':_0x59a089,'order':[[_0x28ac11(0x127),_0x28ac11(0x11a)]]});return _0xe59a0a;};exports['default']=TicketsQueuesService;