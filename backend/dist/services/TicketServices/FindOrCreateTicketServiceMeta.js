'use strict';const a542_0x1c24f1=a542_0x1a07;function a542_0x1a07(_0x103d4d,_0x580cf2){const _0x3755e7=a542_0x3755();return a542_0x1a07=function(_0x1a07ed,_0x8088cc){_0x1a07ed=_0x1a07ed-0x16d;let _0x35b9eb=_0x3755e7[_0x1a07ed];return _0x35b9eb;},a542_0x1a07(_0x103d4d,_0x580cf2);}(function(_0xdfe748,_0x5f0d3e){const _0xc82093=a542_0x1a07,_0x29de2a=_0xdfe748();while(!![]){try{const _0x266048=parseInt(_0xc82093(0x17d))/0x1+-parseInt(_0xc82093(0x173))/0x2+-parseInt(_0xc82093(0x17a))/0x3*(parseInt(_0xc82093(0x17f))/0x4)+-parseInt(_0xc82093(0x180))/0x5*(parseInt(_0xc82093(0x186))/0x6)+-parseInt(_0xc82093(0x189))/0x7*(parseInt(_0xc82093(0x16f))/0x8)+parseInt(_0xc82093(0x177))/0x9*(parseInt(_0xc82093(0x18a))/0xa)+-parseInt(_0xc82093(0x17c))/0xb*(-parseInt(_0xc82093(0x17b))/0xc);if(_0x266048===_0x5f0d3e)break;else _0x29de2a['push'](_0x29de2a['shift']());}catch(_0x4f8b0e){_0x29de2a['push'](_0x29de2a['shift']());}}}(a542_0x3755,0x68e82));var __importDefault=this&&this[a542_0x1c24f1(0x174)]||function(_0x5f20bf){const _0x2a9c9d=a542_0x1c24f1;return _0x5f20bf&&_0x5f20bf[_0x2a9c9d(0x185)]?_0x5f20bf:{'default':_0x5f20bf};};Object['defineProperty'](exports,a542_0x1c24f1(0x185),{'value':!![]});const date_fns_1=require(a542_0x1c24f1(0x171)),sequelize_1=require(a542_0x1c24f1(0x175)),Ticket_1=__importDefault(require(a542_0x1c24f1(0x181))),ShowTicketService_1=__importDefault(require(a542_0x1c24f1(0x17e))),FindOrCreateATicketTrakingService_1=__importDefault(require(a542_0x1c24f1(0x187))),Setting_1=__importDefault(require(a542_0x1c24f1(0x178))),FindOrCreateTicketServiceMeta=async(_0x38dfe6,_0xb7d1b3,_0x54854a,_0x144ff5,_0x4940d8)=>{const _0x38f557=a542_0x1c24f1;let _0x3503c4=await Ticket_1[_0x38f557(0x16e)][_0x38f557(0x170)]({'where':{'status':{[sequelize_1['Op']['or']]:[_0x38f557(0x18d),_0x38f557(0x179),_0x38f557(0x172)]},'contactId':_0x38dfe6['id'],'companyId':_0x144ff5,'channel':_0x4940d8},'order':[['id',_0x38f557(0x188)]]});_0x3503c4&&await _0x3503c4[_0x38f557(0x18c)]({'unreadMessages':_0x54854a});if(!_0x3503c4){_0x3503c4=await Ticket_1[_0x38f557(0x16e)][_0x38f557(0x170)]({'where':{'contactId':_0x38dfe6['id'],'channel':_0x4940d8},'order':[[_0x38f557(0x183),_0x38f557(0x188)]]});_0x3503c4&&(await _0x3503c4[_0x38f557(0x18c)]({'status':_0x38f557(0x179),'userId':null,'unreadMessages':_0x54854a,'companyId':_0x144ff5,'channel':_0x4940d8}),await(0x0,FindOrCreateATicketTrakingService_1[_0x38f557(0x16e)])({'ticketId':_0x3503c4['id'],'companyId':_0x144ff5,'whatsappId':_0x3503c4[_0x38f557(0x18b)],'userId':_0x3503c4[_0x38f557(0x176)]}));const _0x27a739=await Setting_1[_0x38f557(0x16e)][_0x38f557(0x170)]({'where':{'key':_0x38f557(0x16d)}}),_0x99dd20=_0x27a739?parseInt(_0x27a739['value'],0xa):0x1c20;}return!_0x3503c4&&(_0x3503c4=await Ticket_1['default'][_0x38f557(0x170)]({'where':{'updatedAt':{[sequelize_1['Op']['between']]:[+(0x0,date_fns_1[_0x38f557(0x184)])(new Date(),0x2),+new Date()]},'contactId':_0x38dfe6['id']},'order':[['updatedAt','DESC']]}),_0x3503c4&&(await _0x3503c4[_0x38f557(0x18c)]({'status':_0x38f557(0x179),'userId':null,'unreadMessages':_0x54854a,'companyId':_0x144ff5,'channel':_0x4940d8}),await(0x0,FindOrCreateATicketTrakingService_1[_0x38f557(0x16e)])({'ticketId':_0x3503c4['id'],'companyId':_0x144ff5,'whatsappId':_0x3503c4[_0x38f557(0x18b)],'userId':_0x3503c4[_0x38f557(0x176)]}))),!_0x3503c4?(_0x3503c4=await Ticket_1[_0x38f557(0x16e)][_0x38f557(0x182)]({'contactId':_0x38dfe6['id'],'status':_0x38f557(0x179),'isGroup':![],'unreadMessages':_0x54854a,'whatsappId':_0xb7d1b3,'companyId':_0x144ff5,'channel':_0x4940d8}),await(0x0,FindOrCreateATicketTrakingService_1[_0x38f557(0x16e)])({'ticketId':_0x3503c4['id'],'companyId':_0x144ff5,'whatsappId':_0xb7d1b3,'userId':_0x3503c4['userId']})):await _0x3503c4[_0x38f557(0x18c)]({'whatsappId':_0xb7d1b3}),_0x3503c4=await(0x0,ShowTicketService_1[_0x38f557(0x16e)])(_0x3503c4['id'],_0x144ff5),_0x3503c4;};exports['default']=FindOrCreateTicketServiceMeta;function a542_0x3755(){const _0x5f23db=['1690233EqbHoz','20947260nBsRWc','11wGsIyb','273292KoUDYz','./ShowTicketService','4hNxqNn','8690UIkWec','../../models/Ticket','create','updatedAt','subHours','__esModule','1002oErwVz','./FindOrCreateATicketTrakingService','DESC','3403288blosqn','12890QhTPRv','whatsappId','update','open','timeCreateNewTicket','default','8qkexZR','findOne','date-fns','closed','872526PvQgSK','__importDefault','sequelize','userId','1305onsLAB','../../models/Setting','pending'];a542_0x3755=function(){return _0x5f23db;};return a542_0x3755();}