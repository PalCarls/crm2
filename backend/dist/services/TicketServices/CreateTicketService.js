'use strict';const a589_0x42f2ea=a589_0xffa0;(function(_0xdd46dd,_0x298aad){const _0x1282f9=a589_0xffa0,_0x55dd1b=_0xdd46dd();while(!![]){try{const _0x35774a=parseInt(_0x1282f9(0xff))/0x1+-parseInt(_0x1282f9(0xf9))/0x2+-parseInt(_0x1282f9(0xf6))/0x3*(-parseInt(_0x1282f9(0xef))/0x4)+parseInt(_0x1282f9(0xf2))/0x5+-parseInt(_0x1282f9(0xfe))/0x6*(parseInt(_0x1282f9(0xfc))/0x7)+-parseInt(_0x1282f9(0x106))/0x8*(-parseInt(_0x1282f9(0x102))/0x9)+-parseInt(_0x1282f9(0xf7))/0xa;if(_0x35774a===_0x298aad)break;else _0x55dd1b['push'](_0x55dd1b['shift']());}catch(_0x154b8d){_0x55dd1b['push'](_0x55dd1b['shift']());}}}(a589_0x3be2,0x20a87));function a589_0x3be2(){const _0x56d524=['../../errors/AppError','group','./CreateLogTicketService','24906PDOZAO','580380YKJEUc','./ShowTicketService','395058GNkJwR','update','../WhatsappService/ShowWhatsAppService','718277pQvJIe','../ContactServices/ShowContactService','6EHXvgp','128828TokoBs','-ticket','../../helpers/GetDefaultWhatsAppByUser','27SiegtW','../../helpers/CheckContactOpenTickets','defineProperty','status','422768DPjKYH','../../libs/socket','__esModule','notification','emit','getIO','toString','company-','28dsadPb','default','create','732325RvsDFv'];a589_0x3be2=function(){return _0x56d524;};return a589_0x3be2();}var __importDefault=this&&this['__importDefault']||function(_0x21a6db){const _0x468510=a589_0xffa0;return _0x21a6db&&_0x21a6db[_0x468510(0x108)]?_0x21a6db:{'default':_0x21a6db};};function a589_0xffa0(_0x44ea52,_0x533ee6){const _0x3be281=a589_0x3be2();return a589_0xffa0=function(_0xffa06e,_0x3123b7){_0xffa06e=_0xffa06e-0xea;let _0x2e6993=_0x3be281[_0xffa06e];return _0x2e6993;},a589_0xffa0(_0x44ea52,_0x533ee6);}Object[a589_0x42f2ea(0x104)](exports,a589_0x42f2ea(0x108),{'value':!![]});const AppError_1=__importDefault(require(a589_0x42f2ea(0xf3))),GetDefaultWhatsApp_1=__importDefault(require('../../helpers/GetDefaultWhatsApp')),GetDefaultWhatsAppByUser_1=__importDefault(require(a589_0x42f2ea(0x101))),Ticket_1=__importDefault(require('../../models/Ticket')),ShowContactService_1=__importDefault(require(a589_0x42f2ea(0xfd))),socket_1=require(a589_0x42f2ea(0x107)),ShowWhatsAppService_1=__importDefault(require(a589_0x42f2ea(0xfb))),CheckContactOpenTickets_1=__importDefault(require(a589_0x42f2ea(0x103))),CreateLogTicketService_1=__importDefault(require(a589_0x42f2ea(0xf5))),ShowTicketService_1=__importDefault(require(a589_0x42f2ea(0xf8))),CreateTicketService=async({contactId:_0x469efe,status:_0x218c50,userId:_0x1ecd17,queueId:_0x575642,companyId:_0x480e02,whatsappId:_0x5ad971})=>{const _0x1c31cf=a589_0x42f2ea,_0x1b2a24=(0x0,socket_1[_0x1c31cf(0xec)])();let _0x4a4f1c;_0x5ad971!==undefined&&_0x5ad971!==null&&_0x5ad971!==''&&(_0x4a4f1c=await(0x0,ShowWhatsAppService_1[_0x1c31cf(0xf0)])(_0x5ad971,_0x480e02));let _0xee2bbd=await(0x0,GetDefaultWhatsAppByUser_1['default'])(_0x1ecd17);_0x4a4f1c&&(_0xee2bbd=_0x4a4f1c);if(!_0xee2bbd)_0xee2bbd=await(0x0,GetDefaultWhatsApp_1[_0x1c31cf(0xf0)])(_0x480e02);await(0x0,CheckContactOpenTickets_1[_0x1c31cf(0xf0)])(_0x469efe,_0xee2bbd['id']);const {isGroup:_0x11d7b0}=await(0x0,ShowContactService_1['default'])(_0x469efe,_0x480e02);let _0x7935e3=await Ticket_1[_0x1c31cf(0xf0)]['create']({'contactId':_0x469efe,'companyId':_0x480e02,'whatsappId':_0xee2bbd['id'],'isGroup':_0x11d7b0,'userId':_0x1ecd17,'isBot':!![],'queueId':_0x575642,'status':_0x11d7b0?_0x1c31cf(0xf4):'open','isActiveDemand':!![]});_0x7935e3=await(0x0,ShowTicketService_1[_0x1c31cf(0xf0)])(_0x7935e3['id'],_0x480e02);if(!_0x7935e3)throw new AppError_1[(_0x1c31cf(0xf0))]('ERR_CREATING_TICKET');return _0x1b2a24['to'](_0x7935e3[_0x1c31cf(0x105)])['to'](_0x1c31cf(0xea))['to'](_0x7935e3['id'][_0x1c31cf(0xed)]())[_0x1c31cf(0xeb)](_0x1c31cf(0xee)+_0x480e02+_0x1c31cf(0x100),{'action':_0x1c31cf(0xfa),'ticket':_0x7935e3}),await(0x0,CreateLogTicketService_1['default'])({'userId':_0x1ecd17,'queueId':_0x575642,'ticketId':_0x7935e3['id'],'type':_0x1c31cf(0xf1)}),_0x7935e3;};exports[a589_0x42f2ea(0xf0)]=CreateTicketService;