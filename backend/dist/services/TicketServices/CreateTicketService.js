'use strict';const a578_0x54d0cd=a578_0x32ab;(function(_0x4d7070,_0x4b1812){const _0x1eb1df=a578_0x32ab,_0x119e8f=_0x4d7070();while(!![]){try{const _0x45ac9d=-parseInt(_0x1eb1df(0xfb))/0x1*(-parseInt(_0x1eb1df(0xe6))/0x2)+-parseInt(_0x1eb1df(0xee))/0x3*(-parseInt(_0x1eb1df(0xf9))/0x4)+parseInt(_0x1eb1df(0x106))/0x5*(-parseInt(_0x1eb1df(0xe8))/0x6)+parseInt(_0x1eb1df(0x102))/0x7*(parseInt(_0x1eb1df(0xf7))/0x8)+-parseInt(_0x1eb1df(0xfd))/0x9+-parseInt(_0x1eb1df(0xfa))/0xa*(parseInt(_0x1eb1df(0xed))/0xb)+-parseInt(_0x1eb1df(0x101))/0xc*(-parseInt(_0x1eb1df(0xf3))/0xd);if(_0x45ac9d===_0x4b1812)break;else _0x119e8f['push'](_0x119e8f['shift']());}catch(_0x1e26a8){_0x119e8f['push'](_0x119e8f['shift']());}}}(a578_0xf097,0x300ed));var __importDefault=this&&this[a578_0x54d0cd(0x105)]||function(_0x123b53){const _0x17b86a=a578_0x54d0cd;return _0x123b53&&_0x123b53[_0x17b86a(0xfe)]?_0x123b53:{'default':_0x123b53};};Object[a578_0x54d0cd(0xf6)](exports,a578_0x54d0cd(0xfe),{'value':!![]});function a578_0x32ab(_0x197db7,_0x5e345f){const _0xf097ef=a578_0xf097();return a578_0x32ab=function(_0x32ab59,_0x4e05fc){_0x32ab59=_0x32ab59-0xe3;let _0x359d8a=_0xf097ef[_0x32ab59];return _0x359d8a;},a578_0x32ab(_0x197db7,_0x5e345f);}const AppError_1=__importDefault(require(a578_0x54d0cd(0xf0))),GetDefaultWhatsApp_1=__importDefault(require(a578_0x54d0cd(0xf2))),GetDefaultWhatsAppByUser_1=__importDefault(require(a578_0x54d0cd(0x104))),Ticket_1=__importDefault(require(a578_0x54d0cd(0xe9))),ShowContactService_1=__importDefault(require(a578_0x54d0cd(0xe3))),socket_1=require(a578_0x54d0cd(0xef)),ShowWhatsAppService_1=__importDefault(require(a578_0x54d0cd(0xe4))),CheckContactOpenTickets_1=__importDefault(require(a578_0x54d0cd(0xeb))),CreateLogTicketService_1=__importDefault(require(a578_0x54d0cd(0x100))),ShowTicketService_1=__importDefault(require(a578_0x54d0cd(0xe7))),CreateTicketService=async({contactId:_0x41cd97,status:_0xcad79b,userId:_0x411831,queueId:_0x58c875,companyId:_0x19c266,whatsappId:_0x511b81})=>{const _0x5b8cd7=a578_0x54d0cd,_0x9992=(0x0,socket_1[_0x5b8cd7(0xf1)])();let _0x345da3;_0x511b81!==undefined&&_0x511b81!==null&&_0x511b81!==''&&(_0x345da3=await(0x0,ShowWhatsAppService_1[_0x5b8cd7(0xec)])(_0x511b81,_0x19c266));let _0x461ff8=await(0x0,GetDefaultWhatsAppByUser_1[_0x5b8cd7(0xec)])(_0x411831);_0x345da3&&(_0x461ff8=_0x345da3);if(!_0x461ff8)_0x461ff8=await(0x0,GetDefaultWhatsApp_1[_0x5b8cd7(0xec)])(_0x19c266);await(0x0,CheckContactOpenTickets_1['default'])(_0x41cd97,_0x461ff8['id']);const {isGroup:_0x47b404}=await(0x0,ShowContactService_1['default'])(_0x41cd97,_0x19c266);let _0x4840a7=await Ticket_1[_0x5b8cd7(0xec)][_0x5b8cd7(0xf5)]({'contactId':_0x41cd97,'companyId':_0x19c266,'whatsappId':_0x461ff8['id'],'isGroup':_0x47b404,'userId':_0x411831,'isBot':!![],'queueId':_0x58c875,'status':_0x47b404?'group':_0x5b8cd7(0xea)});_0x4840a7=await(0x0,ShowTicketService_1[_0x5b8cd7(0xec)])(_0x4840a7['id'],_0x19c266);if(!_0x4840a7)throw new AppError_1[(_0x5b8cd7(0xec))]('ERR_CREATING_TICKET');return _0x9992['to'](_0x4840a7['status'])['to'](_0x5b8cd7(0xf8))['to'](_0x4840a7['id'][_0x5b8cd7(0xe5)]())[_0x5b8cd7(0xff)](_0x5b8cd7(0x103)+_0x19c266+_0x5b8cd7(0xfc),{'action':_0x5b8cd7(0xf4),'ticket':_0x4840a7}),await(0x0,CreateLogTicketService_1['default'])({'userId':_0x411831,'queueId':_0x58c875,'ticketId':_0x4840a7['id'],'type':'create'}),_0x4840a7;};exports['default']=CreateTicketService;function a578_0xf097(){const _0x360fc8=['15651lEgLEN','__esModule','emit','./CreateLogTicketService','60HMdJud','56fZZTMU','company-','../../helpers/GetDefaultWhatsAppByUser','__importDefault','5AFRBbW','../ContactServices/ShowContactService','../WhatsappService/ShowWhatsAppService','toString','128lkPMDy','./ShowTicketService','1159926VeQjdB','../../models/Ticket','open','../../helpers/CheckContactOpenTickets','default','9878NjvdcZ','67563ETGRsu','../../libs/socket','../../errors/AppError','getIO','../../helpers/GetDefaultWhatsApp','788333HEHPkb','update','create','defineProperty','55096alLYXZ','notification','24bjcafr','2650AnUEEL','2132dBNJPU','-ticket'];a578_0xf097=function(){return _0x360fc8;};return a578_0xf097();}