'use strict';const a374_0x80842f=a374_0x2ed6;(function(_0x48dd9c,_0x3619a6){const _0x5ba62c=a374_0x2ed6,_0x4e6f6a=_0x48dd9c();while(!![]){try{const _0x434d93=parseInt(_0x5ba62c(0x1e6))/0x1+parseInt(_0x5ba62c(0x1d7))/0x2+parseInt(_0x5ba62c(0x1dc))/0x3*(-parseInt(_0x5ba62c(0x1ca))/0x4)+parseInt(_0x5ba62c(0x1cd))/0x5+parseInt(_0x5ba62c(0x1cf))/0x6+-parseInt(_0x5ba62c(0x1e7))/0x7+parseInt(_0x5ba62c(0x1db))/0x8;if(_0x434d93===_0x3619a6)break;else _0x4e6f6a['push'](_0x4e6f6a['shift']());}catch(_0x500d9e){_0x4e6f6a['push'](_0x4e6f6a['shift']());}}}(a374_0x3b88,0x2b9c0));var __importDefault=this&&this[a374_0x80842f(0x1cb)]||function(_0x1978a2){return _0x1978a2&&_0x1978a2['__esModule']?_0x1978a2:{'default':_0x1978a2};};function a374_0x2ed6(_0x32f90b,_0x37a134){const _0x3b8878=a374_0x3b88();return a374_0x2ed6=function(_0x2ed67b,_0x2b47ff){_0x2ed67b=_0x2ed67b-0x1ca;let _0x1e07d1=_0x3b8878[_0x2ed67b];return _0x1e07d1;},a374_0x2ed6(_0x32f90b,_0x37a134);}function a374_0x3b88(){const _0x5101e3=['options','449616uEIEID','reload','optFileId','ASC','118136WpYwyv','866766bCZhLT','optUserId','queueType','optQueueId','../../models/Chatbot','../../errors/AppError','default','all','defineProperty','update','306358ztSkYk','2150225yrJrvG','4jCldeC','__importDefault','findIndex','731505SpCciZ','ERR_NO_CHATBOT_FOUND','494922reXAFP','map','name','mainChatbot','optIntegrationId','greetingMessage','asc'];a374_0x3b88=function(){return _0x5101e3;};return a374_0x3b88();}Object[a374_0x80842f(0x1e4)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a374_0x80842f(0x1e1))),Chatbot_1=__importDefault(require(a374_0x80842f(0x1e0))),UpdateChatBotServices=async(_0x4358e0,_0x95c623)=>{const _0x35b716=a374_0x80842f,{options:_0x365195}=_0x95c623,_0x486126=await Chatbot_1[_0x35b716(0x1e2)]['findOne']({'where':{'id':_0x4358e0},'include':[_0x35b716(0x1d6)],'order':[['id','asc']]});if(!_0x486126)throw new AppError_1['default'](_0x35b716(0x1ce),0x194);return _0x365195&&(await Promise[_0x35b716(0x1e3)](_0x365195[_0x35b716(0x1d0)](async _0x296b23=>{const _0x2ac7e0=_0x35b716;await Chatbot_1[_0x2ac7e0(0x1e2)]['upsert']({..._0x296b23,'chatbotId':_0x486126['id']});})),await Promise[_0x35b716(0x1e3)](_0x486126[_0x35b716(0x1d6)][_0x35b716(0x1d0)](async _0x1dc4a6=>{const _0x44f6fe=_0x35b716,_0x5e0141=_0x365195[_0x44f6fe(0x1cc)](_0xbf5b47=>_0xbf5b47['id']===_0x1dc4a6['id']);_0x5e0141===-0x1&&await Chatbot_1[_0x44f6fe(0x1e2)]['destroy']({'where':{'id':_0x1dc4a6['id']}});}))),await _0x486126[_0x35b716(0x1e5)](_0x95c623),await _0x486126[_0x35b716(0x1d8)]({'include':[{'model':Chatbot_1[_0x35b716(0x1e2)],'as':_0x35b716(0x1d2),'attributes':['id',_0x35b716(0x1d1),_0x35b716(0x1d4),_0x35b716(0x1de),_0x35b716(0x1d3),_0x35b716(0x1df),_0x35b716(0x1dd),_0x35b716(0x1d9)],'order':[[{'model':Chatbot_1[_0x35b716(0x1e2)],'as':_0x35b716(0x1d2)},'id',_0x35b716(0x1da)]]},{'model':Chatbot_1[_0x35b716(0x1e2)],'as':_0x35b716(0x1d6),'order':[[{'model':Chatbot_1[_0x35b716(0x1e2)],'as':_0x35b716(0x1d6)},'id','ASC']],'attributes':['id',_0x35b716(0x1d1),_0x35b716(0x1d4),'queueType',_0x35b716(0x1d3),_0x35b716(0x1df),_0x35b716(0x1dd),_0x35b716(0x1d9)]}],'order':[['id',_0x35b716(0x1d5)]]}),_0x486126;};exports['default']=UpdateChatBotServices;