'use strict';function a391_0x2466(_0x254f0f,_0x937bcb){const _0x4c777a=a391_0x4c77();return a391_0x2466=function(_0x2466b8,_0x1a8e30){_0x2466b8=_0x2466b8-0xf3;let _0x104747=_0x4c777a[_0x2466b8];return _0x104747;},a391_0x2466(_0x254f0f,_0x937bcb);}const a391_0x57bdaf=a391_0x2466;(function(_0x44b7b0,_0x58b9b0){const _0x1f07f3=a391_0x2466,_0x5cf721=_0x44b7b0();while(!![]){try{const _0x3d164f=parseInt(_0x1f07f3(0xfc))/0x1+-parseInt(_0x1f07f3(0x106))/0x2*(-parseInt(_0x1f07f3(0xf8))/0x3)+parseInt(_0x1f07f3(0x10f))/0x4*(-parseInt(_0x1f07f3(0xfd))/0x5)+parseInt(_0x1f07f3(0xf9))/0x6*(parseInt(_0x1f07f3(0xf3))/0x7)+parseInt(_0x1f07f3(0x102))/0x8+-parseInt(_0x1f07f3(0xf7))/0x9+-parseInt(_0x1f07f3(0xf5))/0xa;if(_0x3d164f===_0x58b9b0)break;else _0x5cf721['push'](_0x5cf721['shift']());}catch(_0x4daeac){_0x5cf721['push'](_0x5cf721['shift']());}}}(a391_0x4c77,0x6924a));var __importDefault=this&&this['__importDefault']||function(_0x20ed8c){const _0x46f284=a391_0x2466;return _0x20ed8c&&_0x20ed8c[_0x46f284(0x10c)]?_0x20ed8c:{'default':_0x20ed8c};};function a391_0x4c77(){const _0x4bd6d8=['findOne','name','default','4cfGNfi','all','../../errors/AppError','mainChatbot','ASC','update','__esModule','upsert','map','1964hTVpwR','optUserId','optQueueId','optIntegrationId','70ecMJGn','../../models/Chatbot','2285170SckxnP','greetingMessage','5575068apLkFX','926643dITTKz','195942jOhKaW','options','queueType','242128MgFjEn','3395gNMeQH','defineProperty','optFileId','asc','destroy','3404512EWnxEs'];a391_0x4c77=function(){return _0x4bd6d8;};return a391_0x4c77();}Object[a391_0x57bdaf(0xfe)](exports,a391_0x57bdaf(0x10c),{'value':!![]});const AppError_1=__importDefault(require(a391_0x57bdaf(0x108))),Chatbot_1=__importDefault(require(a391_0x57bdaf(0xf4))),UpdateChatBotServices=async(_0x1b34dd,_0x5d6c14)=>{const _0x3ede95=a391_0x57bdaf,{options:_0x27f15a}=_0x5d6c14,_0x51c187=await Chatbot_1[_0x3ede95(0x105)][_0x3ede95(0x103)]({'where':{'id':_0x1b34dd},'include':['options'],'order':[['id','asc']]});if(!_0x51c187)throw new AppError_1[(_0x3ede95(0x105))]('ERR_NO_CHATBOT_FOUND',0x194);return _0x27f15a&&(await Promise['all'](_0x27f15a[_0x3ede95(0x10e)](async _0x3a96d4=>{const _0x2c3461=_0x3ede95;await Chatbot_1[_0x2c3461(0x105)][_0x2c3461(0x10d)]({..._0x3a96d4,'chatbotId':_0x51c187['id']});})),await Promise[_0x3ede95(0x107)](_0x51c187[_0x3ede95(0xfa)]['map'](async _0x59414b=>{const _0x111b43=_0x3ede95,_0x2eecab=_0x27f15a['findIndex'](_0x260f0b=>_0x260f0b['id']===_0x59414b['id']);_0x2eecab===-0x1&&await Chatbot_1[_0x111b43(0x105)][_0x111b43(0x101)]({'where':{'id':_0x59414b['id']}});}))),await _0x51c187[_0x3ede95(0x10b)](_0x5d6c14),await _0x51c187['reload']({'include':[{'model':Chatbot_1['default'],'as':_0x3ede95(0x109),'attributes':['id','name',_0x3ede95(0xf6),'queueType',_0x3ede95(0x112),_0x3ede95(0x111),_0x3ede95(0x110),_0x3ede95(0xff)],'order':[[{'model':Chatbot_1[_0x3ede95(0x105)],'as':_0x3ede95(0x109)},'id',_0x3ede95(0x10a)]]},{'model':Chatbot_1[_0x3ede95(0x105)],'as':_0x3ede95(0xfa),'order':[[{'model':Chatbot_1[_0x3ede95(0x105)],'as':'options'},'id',_0x3ede95(0x10a)]],'attributes':['id',_0x3ede95(0x104),'greetingMessage',_0x3ede95(0xfb),_0x3ede95(0x112),_0x3ede95(0x111),_0x3ede95(0x110),_0x3ede95(0xff)]}],'order':[['id',_0x3ede95(0x100)]]}),_0x51c187;};exports[a391_0x57bdaf(0x105)]=UpdateChatBotServices;