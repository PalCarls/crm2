'use strict';const a373_0x38cf33=a373_0x48b1;function a373_0x3f73(){const _0x2665c7=['1836265UPeAmT','optFileId','1910mAXFlQ','name','destroy','742ZPbnSn','queueType','56193990FPSCIW','2266719IbUNIL','default','asc','ASC','../../models/Chatbot','reload','75012mfglpF','options','optIntegrationId','findIndex','optQueueId','all','10100TjxUjK','2003972dqGxqX','11175408yilmXE','__esModule','mainChatbot','update','defineProperty','9iuZEEZ'];a373_0x3f73=function(){return _0x2665c7;};return a373_0x3f73();}function a373_0x48b1(_0x58f5cd,_0x2dcb51){const _0x3f73a5=a373_0x3f73();return a373_0x48b1=function(_0x48b15b,_0x28c5c1){_0x48b15b=_0x48b15b-0x64;let _0x16208b=_0x3f73a5[_0x48b15b];return _0x16208b;},a373_0x48b1(_0x58f5cd,_0x2dcb51);}(function(_0x3a5779,_0x139573){const _0x1471b4=a373_0x48b1,_0x4cf95f=_0x3a5779();while(!![]){try{const _0x17bd24=-parseInt(_0x1471b4(0x65))/0x1+-parseInt(_0x1471b4(0x7a))/0x2+-parseInt(_0x1471b4(0x6d))/0x3+parseInt(_0x1471b4(0x79))/0x4*(-parseInt(_0x1471b4(0x67))/0x5)+parseInt(_0x1471b4(0x73))/0x6*(parseInt(_0x1471b4(0x6a))/0x7)+-parseInt(_0x1471b4(0x7b))/0x8+-parseInt(_0x1471b4(0x64))/0x9*(-parseInt(_0x1471b4(0x6c))/0xa);if(_0x17bd24===_0x139573)break;else _0x4cf95f['push'](_0x4cf95f['shift']());}catch(_0x262da2){_0x4cf95f['push'](_0x4cf95f['shift']());}}}(a373_0x3f73,0xf187f));var __importDefault=this&&this['__importDefault']||function(_0x53b2fc){const _0x92d787=a373_0x48b1;return _0x53b2fc&&_0x53b2fc[_0x92d787(0x7c)]?_0x53b2fc:{'default':_0x53b2fc};};Object[a373_0x38cf33(0x7f)](exports,a373_0x38cf33(0x7c),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),Chatbot_1=__importDefault(require(a373_0x38cf33(0x71))),UpdateChatBotServices=async(_0x366905,_0x2dbd16)=>{const _0x24461f=a373_0x38cf33,{options:_0x3911be}=_0x2dbd16,_0x5c5a48=await Chatbot_1[_0x24461f(0x6e)]['findOne']({'where':{'id':_0x366905},'include':['options'],'order':[['id',_0x24461f(0x6f)]]});if(!_0x5c5a48)throw new AppError_1[(_0x24461f(0x6e))]('ERR_NO_CHATBOT_FOUND',0x194);return _0x3911be&&(await Promise['all'](_0x3911be['map'](async _0x3f2d0e=>{const _0x5eab5c=_0x24461f;await Chatbot_1[_0x5eab5c(0x6e)]['upsert']({..._0x3f2d0e,'chatbotId':_0x5c5a48['id']});})),await Promise[_0x24461f(0x78)](_0x5c5a48[_0x24461f(0x74)]['map'](async _0x5879cf=>{const _0x28824c=_0x24461f,_0x55c9cc=_0x3911be[_0x28824c(0x76)](_0x227103=>_0x227103['id']===_0x5879cf['id']);_0x55c9cc===-0x1&&await Chatbot_1[_0x28824c(0x6e)][_0x28824c(0x69)]({'where':{'id':_0x5879cf['id']}});}))),await _0x5c5a48[_0x24461f(0x7e)](_0x2dbd16),await _0x5c5a48[_0x24461f(0x72)]({'include':[{'model':Chatbot_1[_0x24461f(0x6e)],'as':_0x24461f(0x7d),'attributes':['id',_0x24461f(0x68),'greetingMessage',_0x24461f(0x6b),_0x24461f(0x75),_0x24461f(0x77),'optUserId',_0x24461f(0x66)],'order':[[{'model':Chatbot_1[_0x24461f(0x6e)],'as':_0x24461f(0x7d)},'id',_0x24461f(0x70)]]},{'model':Chatbot_1['default'],'as':_0x24461f(0x74),'order':[[{'model':Chatbot_1[_0x24461f(0x6e)],'as':'options'},'id',_0x24461f(0x70)]],'attributes':['id',_0x24461f(0x68),'greetingMessage','queueType',_0x24461f(0x75),_0x24461f(0x77),'optUserId',_0x24461f(0x66)]}],'order':[['id',_0x24461f(0x6f)]]}),_0x5c5a48;};exports[a373_0x38cf33(0x6e)]=UpdateChatBotServices;