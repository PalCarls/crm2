'use strict';const a424_0x59332d=a424_0x4567;(function(_0x1d5bc4,_0x58dce8){const _0x84d69=a424_0x4567,_0x5afe21=_0x1d5bc4();while(!![]){try{const _0x19e2ef=parseInt(_0x84d69(0xf3))/0x1+-parseInt(_0x84d69(0xe9))/0x2+parseInt(_0x84d69(0xfa))/0x3*(parseInt(_0x84d69(0xfd))/0x4)+parseInt(_0x84d69(0x104))/0x5*(parseInt(_0x84d69(0xeb))/0x6)+-parseInt(_0x84d69(0xf6))/0x7+-parseInt(_0x84d69(0x102))/0x8*(parseInt(_0x84d69(0xe7))/0x9)+-parseInt(_0x84d69(0xfe))/0xa*(-parseInt(_0x84d69(0xea))/0xb);if(_0x19e2ef===_0x58dce8)break;else _0x5afe21['push'](_0x5afe21['shift']());}catch(_0x1dc220){_0x5afe21['push'](_0x5afe21['shift']());}}}(a424_0xea3a,0xa59d9));var __importDefault=this&&this[a424_0x59332d(0xf8)]||function(_0xaf7fbf){const _0x4614d3=a424_0x59332d;return _0xaf7fbf&&_0xaf7fbf[_0x4614d3(0x101)]?_0xaf7fbf:{'default':_0xaf7fbf};};function a424_0x4567(_0x175b9b,_0x3f78d6){const _0xea3a78=a424_0xea3a();return a424_0x4567=function(_0x4567dd,_0xa39af5){_0x4567dd=_0x4567dd-0xe4;let _0x4b78c6=_0xea3a78[_0x4567dd];return _0x4b78c6;},a424_0x4567(_0x175b9b,_0x3f78d6);}Object[a424_0x59332d(0xe5)](exports,a424_0x59332d(0x101),{'value':!![]});function a424_0xea3a(){const _0x18cf0f=['704WtwLQK','update','15sOaJJu','map','ERR_NO_CHATBOT_FOUND','defineProperty','default','7353wiajIz','ASC','1930542pbHrha','4015qfntKL','1033968XTQxAb','optIntegrationId','findIndex','optUserId','optQueueId','reload','asc','optFileId','843392EIHIay','destroy','../../errors/AppError','4366194nevJhG','name','__importDefault','queueType','11463gjNMrZ','all','options','76vqUTlc','24830oxRutP','greetingMessage','../../models/Chatbot','__esModule'];a424_0xea3a=function(){return _0x18cf0f;};return a424_0xea3a();}const AppError_1=__importDefault(require(a424_0x59332d(0xf5))),Chatbot_1=__importDefault(require(a424_0x59332d(0x100))),UpdateChatBotServices=async(_0x45eeb3,_0x128205)=>{const _0x498fc8=a424_0x59332d,{options:_0x434ba2}=_0x128205,_0x3353ae=await Chatbot_1[_0x498fc8(0xe6)]['findOne']({'where':{'id':_0x45eeb3},'include':[_0x498fc8(0xfc)],'order':[['id',_0x498fc8(0xf1)]]});if(!_0x3353ae)throw new AppError_1[(_0x498fc8(0xe6))](_0x498fc8(0xe4),0x194);return _0x434ba2&&(await Promise[_0x498fc8(0xfb)](_0x434ba2[_0x498fc8(0x105)](async _0x4c733d=>{await Chatbot_1['default']['upsert']({..._0x4c733d,'chatbotId':_0x3353ae['id']});})),await Promise[_0x498fc8(0xfb)](_0x3353ae[_0x498fc8(0xfc)][_0x498fc8(0x105)](async _0x539413=>{const _0x40e1ec=_0x498fc8,_0x541605=_0x434ba2[_0x40e1ec(0xed)](_0x1e8719=>_0x1e8719['id']===_0x539413['id']);_0x541605===-0x1&&await Chatbot_1[_0x40e1ec(0xe6)][_0x40e1ec(0xf4)]({'where':{'id':_0x539413['id']}});}))),await _0x3353ae[_0x498fc8(0x103)](_0x128205),await _0x3353ae[_0x498fc8(0xf0)]({'include':[{'model':Chatbot_1['default'],'as':'mainChatbot','attributes':['id','name',_0x498fc8(0xff),'queueType',_0x498fc8(0xec),'optQueueId',_0x498fc8(0xee),_0x498fc8(0xf2)],'order':[[{'model':Chatbot_1[_0x498fc8(0xe6)],'as':'mainChatbot'},'id',_0x498fc8(0xe8)]]},{'model':Chatbot_1['default'],'as':'options','order':[[{'model':Chatbot_1[_0x498fc8(0xe6)],'as':_0x498fc8(0xfc)},'id','ASC']],'attributes':['id',_0x498fc8(0xf7),_0x498fc8(0xff),_0x498fc8(0xf9),_0x498fc8(0xec),_0x498fc8(0xef),_0x498fc8(0xee),_0x498fc8(0xf2)]}],'order':[['id',_0x498fc8(0xf1)]]}),_0x3353ae;};exports['default']=UpdateChatBotServices;