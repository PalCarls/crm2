'use strict';function a417_0x4ee5(_0x7153c,_0x2bc7fb){const _0x33481a=a417_0x3348();return a417_0x4ee5=function(_0x4ee56f,_0x25e7b8){_0x4ee56f=_0x4ee56f-0x1af;let _0x42c5d9=_0x33481a[_0x4ee56f];return _0x42c5d9;},a417_0x4ee5(_0x7153c,_0x2bc7fb);}function a417_0x3348(){const _0x51b5bf=['1961469dhChfJ','__importDefault','optUserId','all','default','upsert','findOne','ASC','8dijPFz','queueType','options','optIntegrationId','greetingMessage','__esModule','optQueueId','defineProperty','16754XkdwCt','reload','mainChatbot','map','6170725rSyxeG','10DcVCMt','1178928eFuHAA','asc','69RswuJe','8752EXAiHr','optFileId','485964qgIQkw','5CFftbA','../../errors/AppError','ERR_NO_CHATBOT_FOUND','6559ltbhuH'];a417_0x3348=function(){return _0x51b5bf;};return a417_0x3348();}const a417_0x75f807=a417_0x4ee5;(function(_0x916e6a,_0x38d559){const _0x374e32=a417_0x4ee5,_0x262c00=_0x916e6a();while(!![]){try{const _0x26c320=parseInt(_0x374e32(0x1ca))/0x1+parseInt(_0x374e32(0x1b5))/0x2+parseInt(_0x374e32(0x1b2))/0x3*(parseInt(_0x374e32(0x1b3))/0x4)+-parseInt(_0x374e32(0x1b6))/0x5*(-parseInt(_0x374e32(0x1b0))/0x6)+parseInt(_0x374e32(0x1b9))/0x7*(parseInt(_0x374e32(0x1c2))/0x8)+parseInt(_0x374e32(0x1ba))/0x9*(parseInt(_0x374e32(0x1af))/0xa)+-parseInt(_0x374e32(0x1ce))/0xb;if(_0x26c320===_0x38d559)break;else _0x262c00['push'](_0x262c00['shift']());}catch(_0xe9d5){_0x262c00['push'](_0x262c00['shift']());}}}(a417_0x3348,0x28263));var __importDefault=this&&this[a417_0x75f807(0x1bb)]||function(_0xc766a8){return _0xc766a8&&_0xc766a8['__esModule']?_0xc766a8:{'default':_0xc766a8};};Object[a417_0x75f807(0x1c9)](exports,a417_0x75f807(0x1c7),{'value':!![]});const AppError_1=__importDefault(require(a417_0x75f807(0x1b7))),Chatbot_1=__importDefault(require('../../models/Chatbot')),UpdateChatBotServices=async(_0x5ee544,_0x186934)=>{const _0x885c02=a417_0x75f807,{options:_0x6955d6}=_0x186934,_0x29145e=await Chatbot_1['default'][_0x885c02(0x1c0)]({'where':{'id':_0x5ee544},'include':[_0x885c02(0x1c4)],'order':[['id','asc']]});if(!_0x29145e)throw new AppError_1['default'](_0x885c02(0x1b8),0x194);return _0x6955d6&&(await Promise[_0x885c02(0x1bd)](_0x6955d6[_0x885c02(0x1cd)](async _0x10e07e=>{const _0x1d63e9=_0x885c02;await Chatbot_1[_0x1d63e9(0x1be)][_0x1d63e9(0x1bf)]({..._0x10e07e,'chatbotId':_0x29145e['id']});})),await Promise[_0x885c02(0x1bd)](_0x29145e[_0x885c02(0x1c4)]['map'](async _0x2be128=>{const _0x48543c=_0x885c02,_0x38cdc4=_0x6955d6['findIndex'](_0x2657ff=>_0x2657ff['id']===_0x2be128['id']);_0x38cdc4===-0x1&&await Chatbot_1[_0x48543c(0x1be)]['destroy']({'where':{'id':_0x2be128['id']}});}))),await _0x29145e['update'](_0x186934),await _0x29145e[_0x885c02(0x1cb)]({'include':[{'model':Chatbot_1['default'],'as':'mainChatbot','attributes':['id','name',_0x885c02(0x1c6),_0x885c02(0x1c3),_0x885c02(0x1c5),_0x885c02(0x1c8),_0x885c02(0x1bc),_0x885c02(0x1b4)],'order':[[{'model':Chatbot_1[_0x885c02(0x1be)],'as':_0x885c02(0x1cc)},'id',_0x885c02(0x1c1)]]},{'model':Chatbot_1['default'],'as':'options','order':[[{'model':Chatbot_1['default'],'as':'options'},'id','ASC']],'attributes':['id','name',_0x885c02(0x1c6),_0x885c02(0x1c3),_0x885c02(0x1c5),'optQueueId',_0x885c02(0x1bc),_0x885c02(0x1b4)]}],'order':[['id',_0x885c02(0x1b1)]]}),_0x29145e;};exports['default']=UpdateChatBotServices;