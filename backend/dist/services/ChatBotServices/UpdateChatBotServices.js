'use strict';const a408_0x566603=a408_0x2ebd;(function(_0x14ede9,_0x167707){const _0x4182a2=a408_0x2ebd,_0x2904c2=_0x14ede9();while(!![]){try{const _0x2f6bf6=parseInt(_0x4182a2(0x168))/0x1+-parseInt(_0x4182a2(0x16a))/0x2+-parseInt(_0x4182a2(0x16e))/0x3*(-parseInt(_0x4182a2(0x169))/0x4)+parseInt(_0x4182a2(0x178))/0x5*(parseInt(_0x4182a2(0x16c))/0x6)+parseInt(_0x4182a2(0x166))/0x7*(-parseInt(_0x4182a2(0x162))/0x8)+-parseInt(_0x4182a2(0x183))/0x9+-parseInt(_0x4182a2(0x177))/0xa*(-parseInt(_0x4182a2(0x16f))/0xb);if(_0x2f6bf6===_0x167707)break;else _0x2904c2['push'](_0x2904c2['shift']());}catch(_0x18a72e){_0x2904c2['push'](_0x2904c2['shift']());}}}(a408_0x2cc6,0xaba8f));function a408_0x2ebd(_0xe25afc,_0x1605ba){const _0x2cc65e=a408_0x2cc6();return a408_0x2ebd=function(_0x2ebd77,_0x20fcec){_0x2ebd77=_0x2ebd77-0x162;let _0x26aa19=_0x2cc65e[_0x2ebd77];return _0x26aa19;},a408_0x2ebd(_0xe25afc,_0x1605ba);}var __importDefault=this&&this[a408_0x566603(0x167)]||function(_0xb4f7aa){return _0xb4f7aa&&_0xb4f7aa['__esModule']?_0xb4f7aa:{'default':_0xb4f7aa};};Object[a408_0x566603(0x171)](exports,a408_0x566603(0x17d),{'value':!![]});function a408_0x2cc6(){const _0x1452a8=['all','reload','mainChatbot','findIndex','20egDRDQ','1460IiXfDh','greetingMessage','ASC','map','optUserId','__esModule','update','ERR_NO_CHATBOT_FOUND','optQueueId','../../models/Chatbot','default','518184rtRMAF','optIntegrationId','6791072QOqaWi','destroy','name','findOne','7EqPRwg','__importDefault','419433pvdmza','980eZfpUk','325138boxmva','options','5646PAjzSM','optFileId','255fNEUjT','5814149KScqsH','upsert','defineProperty','queueType'];a408_0x2cc6=function(){return _0x1452a8;};return a408_0x2cc6();}const AppError_1=__importDefault(require('../../errors/AppError')),Chatbot_1=__importDefault(require(a408_0x566603(0x181))),UpdateChatBotServices=async(_0x2f4bc7,_0x253031)=>{const _0x3ccfca=a408_0x566603,{options:_0x3c307f}=_0x253031,_0x15fc4c=await Chatbot_1[_0x3ccfca(0x182)][_0x3ccfca(0x165)]({'where':{'id':_0x2f4bc7},'include':[_0x3ccfca(0x16b)],'order':[['id','asc']]});if(!_0x15fc4c)throw new AppError_1['default'](_0x3ccfca(0x17f),0x194);return _0x3c307f&&(await Promise['all'](_0x3c307f[_0x3ccfca(0x17b)](async _0x1b03ee=>{const _0x427e12=_0x3ccfca;await Chatbot_1['default'][_0x427e12(0x170)]({..._0x1b03ee,'chatbotId':_0x15fc4c['id']});})),await Promise[_0x3ccfca(0x173)](_0x15fc4c['options']['map'](async _0x4eb771=>{const _0x3dd82c=_0x3ccfca,_0x24532c=_0x3c307f[_0x3dd82c(0x176)](_0xe79797=>_0xe79797['id']===_0x4eb771['id']);_0x24532c===-0x1&&await Chatbot_1[_0x3dd82c(0x182)][_0x3dd82c(0x163)]({'where':{'id':_0x4eb771['id']}});}))),await _0x15fc4c[_0x3ccfca(0x17e)](_0x253031),await _0x15fc4c[_0x3ccfca(0x174)]({'include':[{'model':Chatbot_1['default'],'as':_0x3ccfca(0x175),'attributes':['id','name','greetingMessage',_0x3ccfca(0x172),_0x3ccfca(0x184),'optQueueId',_0x3ccfca(0x17c),_0x3ccfca(0x16d)],'order':[[{'model':Chatbot_1['default'],'as':'mainChatbot'},'id',_0x3ccfca(0x17a)]]},{'model':Chatbot_1[_0x3ccfca(0x182)],'as':_0x3ccfca(0x16b),'order':[[{'model':Chatbot_1[_0x3ccfca(0x182)],'as':'options'},'id','ASC']],'attributes':['id',_0x3ccfca(0x164),_0x3ccfca(0x179),'queueType','optIntegrationId',_0x3ccfca(0x180),_0x3ccfca(0x17c),_0x3ccfca(0x16d)]}],'order':[['id','asc']]}),_0x15fc4c;};exports[a408_0x566603(0x182)]=UpdateChatBotServices;