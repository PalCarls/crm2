'use strict';const a343_0x379b55=a343_0x506d;(function(_0x3e1a56,_0x55b198){const _0x192021=a343_0x506d,_0x213b81=_0x3e1a56();while(!![]){try{const _0x2fe2bb=parseInt(_0x192021(0x186))/0x1*(parseInt(_0x192021(0x18b))/0x2)+parseInt(_0x192021(0x1a0))/0x3*(-parseInt(_0x192021(0x18e))/0x4)+parseInt(_0x192021(0x189))/0x5*(parseInt(_0x192021(0x19d))/0x6)+parseInt(_0x192021(0x18f))/0x7+-parseInt(_0x192021(0x19e))/0x8*(parseInt(_0x192021(0x19a))/0x9)+parseInt(_0x192021(0x1a1))/0xa+-parseInt(_0x192021(0x197))/0xb;if(_0x2fe2bb===_0x55b198)break;else _0x213b81['push'](_0x213b81['shift']());}catch(_0x359df4){_0x213b81['push'](_0x213b81['shift']());}}}(a343_0x54d0,0x40c83));var __importDefault=this&&this[a343_0x379b55(0x18a)]||function(_0x2b8e4f){const _0x4ec3ea=a343_0x379b55;return _0x2b8e4f&&_0x2b8e4f[_0x4ec3ea(0x194)]?_0x2b8e4f:{'default':_0x2b8e4f};};Object[a343_0x379b55(0x193)](exports,a343_0x379b55(0x194),{'value':!![]});const AppError_1=__importDefault(require(a343_0x379b55(0x187))),Chatbot_1=__importDefault(require(a343_0x379b55(0x19b))),UpdateChatBotServices=async(_0x41c4cc,_0x1be9d2)=>{const _0x1bbff4=a343_0x379b55,{options:_0x3a6f3b}=_0x1be9d2,_0x4ae051=await Chatbot_1[_0x1bbff4(0x185)][_0x1bbff4(0x18d)]({'where':{'id':_0x41c4cc},'include':['options'],'order':[['id',_0x1bbff4(0x1a2)]]});if(!_0x4ae051)throw new AppError_1['default'](_0x1bbff4(0x192),0x194);return _0x3a6f3b&&(await Promise[_0x1bbff4(0x196)](_0x3a6f3b[_0x1bbff4(0x198)](async _0x52bac=>{const _0x1a1ee6=_0x1bbff4;await Chatbot_1[_0x1a1ee6(0x185)]['upsert']({..._0x52bac,'chatbotId':_0x4ae051['id']});})),await Promise[_0x1bbff4(0x196)](_0x4ae051['options'][_0x1bbff4(0x198)](async _0x24fe6=>{const _0x670f04=_0x1bbff4,_0x17e854=_0x3a6f3b[_0x670f04(0x19f)](_0x4cc55e=>_0x4cc55e['id']===_0x24fe6['id']);_0x17e854===-0x1&&await Chatbot_1[_0x670f04(0x185)][_0x670f04(0x195)]({'where':{'id':_0x24fe6['id']}});}))),await _0x4ae051[_0x1bbff4(0x180)](_0x1be9d2),await _0x4ae051[_0x1bbff4(0x181)]({'include':[{'model':Chatbot_1[_0x1bbff4(0x185)],'as':_0x1bbff4(0x182),'attributes':['id',_0x1bbff4(0x19c),'greetingMessage',_0x1bbff4(0x191),'optIntegrationId',_0x1bbff4(0x199),'optUserId'],'order':[[{'model':Chatbot_1['default'],'as':'mainChatbot'},'id',_0x1bbff4(0x184)]]},{'model':Chatbot_1[_0x1bbff4(0x185)],'as':'options','order':[[{'model':Chatbot_1[_0x1bbff4(0x185)],'as':_0x1bbff4(0x190)},'id',_0x1bbff4(0x184)]],'attributes':['id',_0x1bbff4(0x19c),_0x1bbff4(0x188),_0x1bbff4(0x191),_0x1bbff4(0x183),'optQueueId',_0x1bbff4(0x18c)]}],'order':[['id','asc']]}),_0x4ae051;};function a343_0x506d(_0x5eaeb9,_0x49ae80){const _0x54d00f=a343_0x54d0();return a343_0x506d=function(_0x506d4c,_0x257f26){_0x506d4c=_0x506d4c-0x180;let _0x116956=_0x54d00f[_0x506d4c];return _0x116956;},a343_0x506d(_0x5eaeb9,_0x49ae80);}function a343_0x54d0(){const _0x3eb313=['221752UHGevd','findIndex','21015XYXwDe','4549070ZHQKcg','asc','update','reload','mainChatbot','optIntegrationId','ASC','default','32wIkfTQ','../../errors/AppError','greetingMessage','5EpIMQX','__importDefault','23150EObiZP','optUserId','findOne','160RtwWUa','1765932VHgZRX','options','queueType','ERR_NO_CHATBOT_FOUND','defineProperty','__esModule','destroy','all','4045602UhNKWy','map','optQueueId','54GMNOHc','../../models/Chatbot','name','12360iKSIxX'];a343_0x54d0=function(){return _0x3eb313;};return a343_0x54d0();}exports[a343_0x379b55(0x185)]=UpdateChatBotServices;