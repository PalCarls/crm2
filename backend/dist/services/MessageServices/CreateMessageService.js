'use strict';const a492_0x17ad6d=a492_0x42c2;(function(_0x2031a5,_0x9c4d86){const _0x15aea4=a492_0x42c2,_0x3e880c=_0x2031a5();while(!![]){try{const _0x9a074=-parseInt(_0x15aea4(0xe8))/0x1*(-parseInt(_0x15aea4(0xdd))/0x2)+-parseInt(_0x15aea4(0xd1))/0x3*(parseInt(_0x15aea4(0xd9))/0x4)+-parseInt(_0x15aea4(0xd7))/0x5+parseInt(_0x15aea4(0xef))/0x6*(parseInt(_0x15aea4(0xee))/0x7)+-parseInt(_0x15aea4(0xca))/0x8*(-parseInt(_0x15aea4(0xe7))/0x9)+-parseInt(_0x15aea4(0xe3))/0xa*(-parseInt(_0x15aea4(0xcc))/0xb)+parseInt(_0x15aea4(0xc8))/0xc;if(_0x9a074===_0x9c4d86)break;else _0x3e880c['push'](_0x3e880c['shift']());}catch(_0xb1e4b2){_0x3e880c['push'](_0x3e880c['shift']());}}}(a492_0x4ec7,0xd803f));var __importDefault=this&&this[a492_0x17ad6d(0xe4)]||function(_0x2acf91){const _0x35041c=a492_0x17ad6d;return _0x2acf91&&_0x2acf91[_0x35041c(0xec)]?_0x2acf91:{'default':_0x2acf91};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const socket_1=require(a492_0x17ad6d(0xc9)),Message_1=__importDefault(require(a492_0x17ad6d(0xe0))),Ticket_1=__importDefault(require(a492_0x17ad6d(0xda))),CreateMessageService=async({messageData:_0x31b4e1,companyId:_0x2737c2})=>{const _0x3c2a2f=a492_0x17ad6d;await Message_1[_0x3c2a2f(0xd8)][_0x3c2a2f(0xdc)]({..._0x31b4e1,'companyId':_0x2737c2});const _0xa390c3=await Message_1[_0x3c2a2f(0xd8)][_0x3c2a2f(0xd6)]({'where':{'wid':_0x31b4e1[_0x3c2a2f(0xdb)],'companyId':_0x2737c2},'include':['contact',{'model':Ticket_1[_0x3c2a2f(0xd8)],'as':_0x3c2a2f(0xcd),'include':[_0x3c2a2f(0xeb),_0x3c2a2f(0xd0),_0x3c2a2f(0xdf)]},{'model':Message_1[_0x3c2a2f(0xd8)],'as':_0x3c2a2f(0xcf),'include':['contact']}]});_0xa390c3[_0x3c2a2f(0xcd)][_0x3c2a2f(0xd5)]!==null&&_0xa390c3[_0x3c2a2f(0xd5)]===null&&await _0xa390c3[_0x3c2a2f(0xe5)]({'queueId':_0xa390c3[_0x3c2a2f(0xcd)][_0x3c2a2f(0xd5)]});_0xa390c3[_0x3c2a2f(0xd2)]&&await _0xa390c3[_0x3c2a2f(0xe5)]({'wid':_0x3c2a2f(0xea)+_0xa390c3['id']});if(!_0xa390c3)throw new Error(_0x3c2a2f(0xce));const _0x31ac76=(0x0,socket_1[_0x3c2a2f(0xcb)])();return!_0x31b4e1?.[_0x3c2a2f(0xde)]&&_0x31ac76['to'](_0xa390c3[_0x3c2a2f(0xed)][_0x3c2a2f(0xe2)]())['to'](_0xa390c3['ticket'][_0x3c2a2f(0xe6)])['to'](_0x3c2a2f(0xe9))[_0x3c2a2f(0xd4)]('company-'+_0x2737c2+_0x3c2a2f(0xd3),{'action':_0x3c2a2f(0xe1),'message':_0xa390c3,'ticket':_0xa390c3['ticket'],'contact':_0xa390c3[_0x3c2a2f(0xcd)][_0x3c2a2f(0xeb)]}),_0xa390c3;};function a492_0x42c2(_0x127334,_0x1598d1){const _0x4ec7fc=a492_0x4ec7();return a492_0x42c2=function(_0x42c266,_0x8fd6e){_0x42c266=_0x42c266-0xc8;let _0x55a8ce=_0x4ec7fc[_0x42c266];return _0x55a8ce;},a492_0x42c2(_0x127334,_0x1598d1);}exports['default']=CreateMessageService;function a492_0x4ec7(){const _0x3b9ba1=['default','28wqVYvi','../../models/Ticket','wid','upsert','15652LUwpvS','ticketImported','whatsapp','../../models/Message','create','toString','20aHzbmx','__importDefault','update','status','36HEriSD','55QcfmfP','notification','PVT','contact','__esModule','ticketId','928914WkQxyP','12ttllzI','15066540rMUXeC','../../libs/socket','524408vzCcic','getIO','2160323DqhnKv','ticket','ERR_CREATING_MESSAGE','quotedMsg','queue','161232SMfbCg','isPrivate','-appMessage','emit','queueId','findOne','6726810AdRxmX'];a492_0x4ec7=function(){return _0x3b9ba1;};return a492_0x4ec7();}