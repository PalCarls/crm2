'use strict';const a475_0x4fed96=a475_0x9a45;(function(_0x2bf36a,_0x4a2d65){const _0x3d9343=a475_0x9a45,_0xfe60a7=_0x2bf36a();while(!![]){try{const _0x2c4a40=parseInt(_0x3d9343(0xbe))/0x1+-parseInt(_0x3d9343(0xb9))/0x2*(parseInt(_0x3d9343(0xc3))/0x3)+parseInt(_0x3d9343(0xb5))/0x4*(-parseInt(_0x3d9343(0xb4))/0x5)+-parseInt(_0x3d9343(0xad))/0x6+parseInt(_0x3d9343(0xc0))/0x7*(parseInt(_0x3d9343(0xb1))/0x8)+parseInt(_0x3d9343(0xa4))/0x9+parseInt(_0x3d9343(0xbf))/0xa;if(_0x2c4a40===_0x4a2d65)break;else _0xfe60a7['push'](_0xfe60a7['shift']());}catch(_0x3df6bb){_0xfe60a7['push'](_0xfe60a7['shift']());}}}(a475_0x482a,0x1d67f));function a475_0x9a45(_0x1139e3,_0x29a075){const _0x482a21=a475_0x482a();return a475_0x9a45=function(_0x9a4579,_0x4b30d6){_0x9a4579=_0x9a4579-0xa2;let _0x19aa67=_0x482a21[_0x9a4579];return _0x19aa67;},a475_0x9a45(_0x1139e3,_0x29a075);}var __importDefault=this&&this[a475_0x4fed96(0xb2)]||function(_0x39561d){const _0x125d27=a475_0x4fed96;return _0x39561d&&_0x39561d[_0x125d27(0xbb)]?_0x39561d:{'default':_0x39561d};};Object[a475_0x4fed96(0xba)](exports,a475_0x4fed96(0xbb),{'value':!![]});const socket_1=require(a475_0x4fed96(0xaa)),Message_1=__importDefault(require(a475_0x4fed96(0xb8))),Ticket_1=__importDefault(require(a475_0x4fed96(0xa7))),CreateMessageService=async({messageData:_0x4c86c4,companyId:_0x3cd415})=>{const _0x599926=a475_0x4fed96;await Message_1['default'][_0x599926(0xb7)]({..._0x4c86c4,'companyId':_0x3cd415});const _0x8853e0=await Message_1[_0x599926(0xbc)][_0x599926(0xae)]({'where':{'wid':_0x4c86c4['wid'],'companyId':_0x3cd415},'include':[_0x599926(0xa6),{'model':Ticket_1[_0x599926(0xbc)],'as':_0x599926(0xb3),'include':[_0x599926(0xa6),_0x599926(0xb0),_0x599926(0xc1)]},{'model':Message_1[_0x599926(0xbc)],'as':_0x599926(0xaf),'include':[_0x599926(0xa6)]}]});_0x8853e0['ticket'][_0x599926(0xab)]!==null&&_0x8853e0[_0x599926(0xab)]===null&&await _0x8853e0[_0x599926(0xb6)]({'queueId':_0x8853e0[_0x599926(0xb3)]['queueId']});_0x8853e0[_0x599926(0xa8)]&&await _0x8853e0[_0x599926(0xb6)]({'wid':_0x599926(0xc2)+_0x8853e0['id']});if(!_0x8853e0)throw new Error(_0x599926(0xa9));const _0x1615f7=(0x0,socket_1[_0x599926(0xa2)])();return!_0x4c86c4?.[_0x599926(0xac)]&&_0x1615f7['to'](_0x8853e0['ticketId']['toString']())['to'](_0x8853e0[_0x599926(0xb3)]['status'])['to'](_0x599926(0xbd))['emit'](_0x599926(0xa5)+_0x3cd415+'-appMessage',{'action':_0x599926(0xa3),'message':_0x8853e0,'ticket':_0x8853e0[_0x599926(0xb3)],'contact':_0x8853e0[_0x599926(0xb3)][_0x599926(0xa6)]}),_0x8853e0;};function a475_0x482a(){const _0x48b831=['contact','../../models/Ticket','isPrivate','ERR_CREATING_MESSAGE','../../libs/socket','queueId','ticketImported','794994yiGmHK','findOne','quotedMsg','queue','923976PIbGdc','__importDefault','ticket','5XqFDUv','411116nsbQca','update','upsert','../../models/Message','44058tBiJiQ','defineProperty','__esModule','default','notification','52269eczBOK','3359950YqmqRx','7DaNTuc','whatsapp','PVT','21wHTJUZ','getIO','create','55503skbpYg','company-'];a475_0x482a=function(){return _0x48b831;};return a475_0x482a();}exports[a475_0x4fed96(0xbc)]=CreateMessageService;