'use strict';function a421_0x1c41(_0x594c7f,_0x34bdc2){const _0x4ffc40=a421_0x4ffc();return a421_0x1c41=function(_0x1c41d6,_0x571e1a){_0x1c41d6=_0x1c41d6-0xaf;let _0x3f7af0=_0x4ffc40[_0x1c41d6];return _0x3f7af0;},a421_0x1c41(_0x594c7f,_0x34bdc2);}const a421_0x460fa7=a421_0x1c41;(function(_0x4fa4c7,_0x39dc55){const _0x8fc019=a421_0x1c41,_0x2aac02=_0x4fa4c7();while(!![]){try{const _0x3a0b60=-parseInt(_0x8fc019(0xcf))/0x1+-parseInt(_0x8fc019(0xb0))/0x2+parseInt(_0x8fc019(0xc0))/0x3*(parseInt(_0x8fc019(0xbc))/0x4)+parseInt(_0x8fc019(0xba))/0x5+parseInt(_0x8fc019(0xb5))/0x6*(parseInt(_0x8fc019(0xb4))/0x7)+parseInt(_0x8fc019(0xcb))/0x8*(parseInt(_0x8fc019(0xc2))/0x9)+-parseInt(_0x8fc019(0xc7))/0xa;if(_0x3a0b60===_0x39dc55)break;else _0x2aac02['push'](_0x2aac02['shift']());}catch(_0x2d5af4){_0x2aac02['push'](_0x2aac02['shift']());}}}(a421_0x4ffc,0x18aaf));var __importDefault=this&&this[a421_0x460fa7(0xce)]||function(_0x5298e8){const _0xe778a4=a421_0x460fa7;return _0x5298e8&&_0x5298e8[_0xe778a4(0xc6)]?_0x5298e8:{'default':_0x5298e8};};Object[a421_0x460fa7(0xbd)](exports,a421_0x460fa7(0xc6),{'value':!![]});function a421_0x4ffc(){const _0x1ad4a6=['getIO','queueId','queue','327570felsek','contact','31940IlBpSL','defineProperty','quotedMsg','company-','3kOfZUf','PVT','45qRuPql','ticket','ERR_CREATING_MESSAGE','default','__esModule','339600QADfmU','status','update','findOne','81160szmFMQ','wid','ticketId','__importDefault','92979zMpwsv','../../models/Ticket','48722nVQLTX','emit','isPrivate','../../models/Message','298935UMmkvK','18gHEszT','create'];a421_0x4ffc=function(){return _0x1ad4a6;};return a421_0x4ffc();}const socket_1=require('../../libs/socket'),Message_1=__importDefault(require(a421_0x460fa7(0xb3))),Ticket_1=__importDefault(require(a421_0x460fa7(0xaf))),CreateMessageService=async({messageData:_0x2c082d,companyId:_0x13e850})=>{const _0x492625=a421_0x460fa7;await Message_1[_0x492625(0xc5)]['upsert']({..._0x2c082d,'companyId':_0x13e850});const _0x5b9dfb=await Message_1[_0x492625(0xc5)][_0x492625(0xca)]({'where':{'wid':_0x2c082d[_0x492625(0xcc)],'companyId':_0x13e850},'include':[_0x492625(0xbb),{'model':Ticket_1[_0x492625(0xc5)],'as':_0x492625(0xc3),'include':[_0x492625(0xbb),_0x492625(0xb9)]},{'model':Message_1['default'],'as':_0x492625(0xbe),'include':[_0x492625(0xbb)]}]});_0x5b9dfb[_0x492625(0xc3)][_0x492625(0xb8)]!==null&&_0x5b9dfb[_0x492625(0xb8)]===null&&await _0x5b9dfb[_0x492625(0xc9)]({'queueId':_0x5b9dfb[_0x492625(0xc3)][_0x492625(0xb8)]});_0x5b9dfb[_0x492625(0xb2)]&&await _0x5b9dfb[_0x492625(0xc9)]({'wid':_0x492625(0xc1)+_0x5b9dfb['id']});if(!_0x5b9dfb)throw new Error(_0x492625(0xc4));const _0x3d5be4=(0x0,socket_1[_0x492625(0xb7)])();return _0x3d5be4['to'](_0x5b9dfb[_0x492625(0xcd)]['toString']())['to'](_0x5b9dfb[_0x492625(0xc3)][_0x492625(0xc8)])['to']('notification')[_0x492625(0xb1)](_0x492625(0xbf)+_0x13e850+'-appMessage',{'action':_0x492625(0xb6),'message':_0x5b9dfb,'ticket':_0x5b9dfb['ticket'],'contact':_0x5b9dfb['ticket'][_0x492625(0xbb)]}),_0x5b9dfb;};exports[a421_0x460fa7(0xc5)]=CreateMessageService;