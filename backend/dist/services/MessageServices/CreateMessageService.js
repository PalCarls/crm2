'use strict';const a454_0x505c03=a454_0x2b30;function a454_0x2b30(_0xba204a,_0x462656){const _0x46d780=a454_0x46d7();return a454_0x2b30=function(_0x2b3098,_0x3d8d5c){_0x2b3098=_0x2b3098-0x125;let _0xdb3143=_0x46d780[_0x2b3098];return _0xdb3143;},a454_0x2b30(_0xba204a,_0x462656);}(function(_0x59ed8a,_0x55df63){const _0x74d095=a454_0x2b30,_0x32be05=_0x59ed8a();while(!![]){try{const _0x1bd80b=-parseInt(_0x74d095(0x127))/0x1+parseInt(_0x74d095(0x139))/0x2+-parseInt(_0x74d095(0x12c))/0x3+parseInt(_0x74d095(0x133))/0x4+parseInt(_0x74d095(0x12f))/0x5*(-parseInt(_0x74d095(0x145))/0x6)+parseInt(_0x74d095(0x136))/0x7+-parseInt(_0x74d095(0x12a))/0x8*(-parseInt(_0x74d095(0x13c))/0x9);if(_0x1bd80b===_0x55df63)break;else _0x32be05['push'](_0x32be05['shift']());}catch(_0x500792){_0x32be05['push'](_0x32be05['shift']());}}}(a454_0x46d7,0x54caa));var __importDefault=this&&this[a454_0x505c03(0x142)]||function(_0x22d031){return _0x22d031&&_0x22d031['__esModule']?_0x22d031:{'default':_0x22d031};};function a454_0x46d7(){const _0x4f4479=['getIO','887373SlkrCJ','PVT','create','default','upsert','ticketImported','__importDefault','status','notification','3924204IjhpoI','../../models/Message','company-','90328QrWalx','quotedMsg','queue','8QixgIc','ERR_CREATING_MESSAGE','522258KlozpU','defineProperty','../../libs/socket','5ysnueW','-appMessage','ticket','queueId','1858404tlFYsd','contact','emit','3101434FMxoGL','wid','isPrivate','518988zXMHqj','update'];a454_0x46d7=function(){return _0x4f4479;};return a454_0x46d7();}Object[a454_0x505c03(0x12d)](exports,'__esModule',{'value':!![]});const socket_1=require(a454_0x505c03(0x12e)),Message_1=__importDefault(require(a454_0x505c03(0x125))),Ticket_1=__importDefault(require('../../models/Ticket')),CreateMessageService=async({messageData:_0x51e5e3,companyId:_0x4bdbde})=>{const _0x40da8e=a454_0x505c03;await Message_1[_0x40da8e(0x13f)][_0x40da8e(0x140)]({..._0x51e5e3,'companyId':_0x4bdbde});const _0x5189ba=await Message_1[_0x40da8e(0x13f)]['findOne']({'where':{'wid':_0x51e5e3[_0x40da8e(0x137)],'companyId':_0x4bdbde},'include':['contact',{'model':Ticket_1[_0x40da8e(0x13f)],'as':'ticket','include':[_0x40da8e(0x134),_0x40da8e(0x129)]},{'model':Message_1['default'],'as':_0x40da8e(0x128),'include':[_0x40da8e(0x134)]}]});_0x5189ba[_0x40da8e(0x131)]['queueId']!==null&&_0x5189ba['queueId']===null&&await _0x5189ba[_0x40da8e(0x13a)]({'queueId':_0x5189ba[_0x40da8e(0x131)][_0x40da8e(0x132)]});_0x5189ba[_0x40da8e(0x138)]&&await _0x5189ba[_0x40da8e(0x13a)]({'wid':_0x40da8e(0x13d)+_0x5189ba['id']});if(!_0x5189ba)throw new Error(_0x40da8e(0x12b));const _0x4d784c=(0x0,socket_1[_0x40da8e(0x13b)])();return!_0x51e5e3?.[_0x40da8e(0x141)]&&_0x4d784c['to'](_0x5189ba['ticketId']['toString']())['to'](_0x5189ba[_0x40da8e(0x131)][_0x40da8e(0x143)])['to'](_0x40da8e(0x144))[_0x40da8e(0x135)](_0x40da8e(0x126)+_0x4bdbde+_0x40da8e(0x130),{'action':_0x40da8e(0x13e),'message':_0x5189ba,'ticket':_0x5189ba[_0x40da8e(0x131)],'contact':_0x5189ba[_0x40da8e(0x131)]['contact']}),_0x5189ba;};exports[a454_0x505c03(0x13f)]=CreateMessageService;