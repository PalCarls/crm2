<<<<<<< HEAD
'use strict';const a492_0x29705a=a492_0x48cf;(function(_0x530e52,_0x5df3f3){const _0xfc7739=a492_0x48cf,_0x41dfb5=_0x530e52();while(!![]){try{const _0x25fd3d=parseInt(_0xfc7739(0x8d))/0x1*(parseInt(_0xfc7739(0x99))/0x2)+-parseInt(_0xfc7739(0x92))/0x3+-parseInt(_0xfc7739(0x89))/0x4+-parseInt(_0xfc7739(0x82))/0x5*(parseInt(_0xfc7739(0x8a))/0x6)+-parseInt(_0xfc7739(0x80))/0x7*(-parseInt(_0xfc7739(0x7c))/0x8)+-parseInt(_0xfc7739(0x81))/0x9+-parseInt(_0xfc7739(0x85))/0xa*(-parseInt(_0xfc7739(0x90))/0xb);if(_0x25fd3d===_0x5df3f3)break;else _0x41dfb5['push'](_0x41dfb5['shift']());}catch(_0x103aa2){_0x41dfb5['push'](_0x41dfb5['shift']());}}}(a492_0x25f9,0x43b77));function a492_0x25f9(){const _0x5671b4=['2407182sLornV','findOne','__importDefault','102707Gweois','queue','contact','11SGzMQw','ticketId','1576971xvxbjg','PVT','isPrivate','getIO','defineProperty','toString','quotedMsg','2NKJJuA','ticket','queueId','whatsapp','48lZChmt','../../models/Message','__esModule','emit','344365jZWJnI','2477727TDVgCH','5LyzzxZ','../../libs/socket','ERR_CREATING_MESSAGE','11794370rEMgnv','update','company-','default','391160QcLuuk'];a492_0x25f9=function(){return _0x5671b4;};return a492_0x25f9();}var __importDefault=this&&this[a492_0x29705a(0x8c)]||function(_0x477b48){const _0x4efc2e=a492_0x29705a;return _0x477b48&&_0x477b48[_0x4efc2e(0x7e)]?_0x477b48:{'default':_0x477b48};};Object[a492_0x29705a(0x96)](exports,a492_0x29705a(0x7e),{'value':!![]});const socket_1=require(a492_0x29705a(0x83)),Message_1=__importDefault(require(a492_0x29705a(0x7d))),Ticket_1=__importDefault(require('../../models/Ticket')),CreateMessageService=async({messageData:_0xe4e550,companyId:_0x401793})=>{const _0x4d52c0=a492_0x29705a;await Message_1[_0x4d52c0(0x88)]['upsert']({..._0xe4e550,'companyId':_0x401793});const _0x534a09=await Message_1[_0x4d52c0(0x88)][_0x4d52c0(0x8b)]({'where':{'wid':_0xe4e550['wid'],'companyId':_0x401793},'include':[_0x4d52c0(0x8f),{'model':Ticket_1[_0x4d52c0(0x88)],'as':_0x4d52c0(0x9a),'include':[_0x4d52c0(0x8f),_0x4d52c0(0x8e),_0x4d52c0(0x7b)]},{'model':Message_1['default'],'as':_0x4d52c0(0x98),'include':[_0x4d52c0(0x8f)]}]});_0x534a09[_0x4d52c0(0x9a)]['queueId']!==null&&_0x534a09[_0x4d52c0(0x9b)]===null&&await _0x534a09[_0x4d52c0(0x86)]({'queueId':_0x534a09['ticket'][_0x4d52c0(0x9b)]});_0x534a09[_0x4d52c0(0x94)]&&await _0x534a09[_0x4d52c0(0x86)]({'wid':_0x4d52c0(0x93)+_0x534a09['id']});if(!_0x534a09)throw new Error(_0x4d52c0(0x84));const _0x575e69=(0x0,socket_1[_0x4d52c0(0x95)])();return!_0xe4e550?.['ticketImported']&&_0x575e69['to'](_0x534a09[_0x4d52c0(0x91)][_0x4d52c0(0x97)]())['to'](_0x534a09[_0x4d52c0(0x9a)]['status'])['to']('notification')[_0x4d52c0(0x7f)](_0x4d52c0(0x87)+_0x401793+'-appMessage',{'action':'create','message':_0x534a09,'ticket':_0x534a09[_0x4d52c0(0x9a)],'contact':_0x534a09[_0x4d52c0(0x9a)][_0x4d52c0(0x8f)]}),_0x534a09;};function a492_0x48cf(_0x5f0f33,_0x3e70a8){const _0x25f914=a492_0x25f9();return a492_0x48cf=function(_0x48cfa1,_0x128c69){_0x48cfa1=_0x48cfa1-0x7b;let _0x15e863=_0x25f914[_0x48cfa1];return _0x15e863;},a492_0x48cf(_0x5f0f33,_0x3e70a8);}exports[a492_0x29705a(0x88)]=CreateMessageService;
=======
'use strict';function a492_0x2636(){const _0x307bbe=['-appMessage','ERR_CREATING_MESSAGE','PVT','ticketId','10784334zbXEZE','update','2625789LgPwTE','findOne','wid','240TvKKvN','../../libs/socket','1607255DTjFMc','isPrivate','../../models/Message','default','47672WVMoXD','2MsdYqQ','defineProperty','toString','ticket','status','getIO','contact','70dPepuZ','1730355wWrZWz','__importDefault','3408232vHPIZl','889263bpIJxf','notification','queueId','quotedMsg','ticketImported','../../models/Ticket','__esModule','create','queue','upsert'];a492_0x2636=function(){return _0x307bbe;};return a492_0x2636();}const a492_0x29b70f=a492_0x2fad;(function(_0x53a497,_0x44f2f4){const _0x16432c=a492_0x2fad,_0x460c2d=_0x53a497();while(!![]){try{const _0x75b2ff=-parseInt(_0x16432c(0x1f7))/0x1+parseInt(_0x16432c(0x1ef))/0x2*(-parseInt(_0x16432c(0x20a))/0x3)+-parseInt(_0x16432c(0x1f9))/0x4+parseInt(_0x16432c(0x1ea))/0x5+parseInt(_0x16432c(0x208))/0x6+parseInt(_0x16432c(0x1f6))/0x7*(-parseInt(_0x16432c(0x1ee))/0x8)+-parseInt(_0x16432c(0x1fa))/0x9*(-parseInt(_0x16432c(0x1e8))/0xa);if(_0x75b2ff===_0x44f2f4)break;else _0x460c2d['push'](_0x460c2d['shift']());}catch(_0x50ec24){_0x460c2d['push'](_0x460c2d['shift']());}}}(a492_0x2636,0xed88e));function a492_0x2fad(_0x58a799,_0x1df613){const _0x263684=a492_0x2636();return a492_0x2fad=function(_0x2fad26,_0x1a9311){_0x2fad26=_0x2fad26-0x1e7;let _0x1496bc=_0x263684[_0x2fad26];return _0x1496bc;},a492_0x2fad(_0x58a799,_0x1df613);}var __importDefault=this&&this[a492_0x29b70f(0x1f8)]||function(_0x51a687){const _0x42d60e=a492_0x29b70f;return _0x51a687&&_0x51a687[_0x42d60e(0x200)]?_0x51a687:{'default':_0x51a687};};Object[a492_0x29b70f(0x1f0)](exports,a492_0x29b70f(0x200),{'value':!![]});const socket_1=require(a492_0x29b70f(0x1e9)),Message_1=__importDefault(require(a492_0x29b70f(0x1ec))),Ticket_1=__importDefault(require(a492_0x29b70f(0x1ff))),CreateMessageService=async({messageData:_0x3057a1,companyId:_0x185bfe})=>{const _0xa0ef5a=a492_0x29b70f;await Message_1[_0xa0ef5a(0x1ed)][_0xa0ef5a(0x203)]({..._0x3057a1,'companyId':_0x185bfe});const _0x52eec6=await Message_1[_0xa0ef5a(0x1ed)][_0xa0ef5a(0x20b)]({'where':{'wid':_0x3057a1[_0xa0ef5a(0x1e7)],'companyId':_0x185bfe},'include':['contact',{'model':Ticket_1['default'],'as':_0xa0ef5a(0x1f2),'include':[_0xa0ef5a(0x1f5),_0xa0ef5a(0x202),'whatsapp']},{'model':Message_1[_0xa0ef5a(0x1ed)],'as':_0xa0ef5a(0x1fd),'include':['contact']}]});_0x52eec6[_0xa0ef5a(0x1f2)][_0xa0ef5a(0x1fc)]!==null&&_0x52eec6[_0xa0ef5a(0x1fc)]===null&&await _0x52eec6[_0xa0ef5a(0x209)]({'queueId':_0x52eec6['ticket'][_0xa0ef5a(0x1fc)]});_0x52eec6[_0xa0ef5a(0x1eb)]&&await _0x52eec6[_0xa0ef5a(0x209)]({'wid':_0xa0ef5a(0x206)+_0x52eec6['id']});if(!_0x52eec6)throw new Error(_0xa0ef5a(0x205));const _0x3ba37a=(0x0,socket_1[_0xa0ef5a(0x1f4)])();return!_0x3057a1?.[_0xa0ef5a(0x1fe)]&&_0x3ba37a['to'](_0x52eec6[_0xa0ef5a(0x207)][_0xa0ef5a(0x1f1)]())['to'](_0x52eec6[_0xa0ef5a(0x1f2)][_0xa0ef5a(0x1f3)])['to'](_0xa0ef5a(0x1fb))['emit']('company-'+_0x185bfe+_0xa0ef5a(0x204),{'action':_0xa0ef5a(0x201),'message':_0x52eec6,'ticket':_0x52eec6[_0xa0ef5a(0x1f2)],'contact':_0x52eec6[_0xa0ef5a(0x1f2)][_0xa0ef5a(0x1f5)]}),_0x52eec6;};exports[a492_0x29b70f(0x1ed)]=CreateMessageService;
>>>>>>> ab722bfbcf394d74dd0b99a984c0dcf6ffbcff7f
