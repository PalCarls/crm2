'use strict';const a456_0x589ff9=a456_0x40e6;(function(_0x37389e,_0x1e04bb){const _0x33397c=a456_0x40e6,_0x359997=_0x37389e();while(!![]){try{const _0x22ec7f=-parseInt(_0x33397c(0xca))/0x1+parseInt(_0x33397c(0xc5))/0x2*(-parseInt(_0x33397c(0xcf))/0x3)+parseInt(_0x33397c(0xc9))/0x4*(-parseInt(_0x33397c(0xd4))/0x5)+-parseInt(_0x33397c(0xc1))/0x6*(-parseInt(_0x33397c(0xce))/0x7)+-parseInt(_0x33397c(0xcd))/0x8+parseInt(_0x33397c(0xc7))/0x9+-parseInt(_0x33397c(0xc3))/0xa*(-parseInt(_0x33397c(0xc4))/0xb);if(_0x22ec7f===_0x1e04bb)break;else _0x359997['push'](_0x359997['shift']());}catch(_0x45ca03){_0x359997['push'](_0x359997['shift']());}}}(a456_0xce0b,0xdfa40));function a456_0x40e6(_0x100d3a,_0x245828){const _0xce0bf1=a456_0xce0b();return a456_0x40e6=function(_0x40e67e,_0x107fde){_0x40e67e=_0x40e67e-0xb6;let _0x2cb53c=_0xce0bf1[_0x40e67e];return _0x2cb53c;},a456_0x40e6(_0x100d3a,_0x245828);}var __importDefault=this&&this[a456_0x589ff9(0xbf)]||function(_0x1e8fd7){const _0x22f74c=a456_0x589ff9;return _0x1e8fd7&&_0x1e8fd7[_0x22f74c(0xc2)]?_0x1e8fd7:{'default':_0x1e8fd7};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a456_0x589ff9(0xbe))),Message_1=__importDefault(require(a456_0x589ff9(0xbc))),Ticket_1=__importDefault(require(a456_0x589ff9(0xbb))),ShowTicketService_1=__importDefault(require(a456_0x589ff9(0xcc))),sequelize_1=require('sequelize'),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x516271,companyId:_0x3ebbc5,queues:queues=[],user:_0x2dde2c})=>{const _0x13a64f=a456_0x589ff9,_0x478dc7=await(0x0,ShowTicketService_1['default'])(_0x516271,_0x3ebbc5);if(!_0x478dc7)throw new AppError_1[(_0x13a64f(0xcb))]('ERR_NO_TICKET_FOUND',0x194);const _0x121814=0x14,_0x40be85=_0x121814*(+pageNumber-0x1),{count:_0x7be0ad,rows:_0x4e98ad}=await Message_1['default'][_0x13a64f(0xc8)]({'limit':_0x121814,'include':[_0x13a64f(0xb6),{'model':Message_1[_0x13a64f(0xcb)],'as':_0x13a64f(0xc0),'include':[_0x13a64f(0xb6)]},{'model':Ticket_1['default'],'where':{'contactId':_0x478dc7[_0x13a64f(0xba)],'whatsappId':_0x478dc7[_0x13a64f(0xb8)],'isGroup':_0x478dc7[_0x13a64f(0xb9)],'queueId':_0x2dde2c[_0x13a64f(0xbd)]===_0x13a64f(0xd2)||_0x2dde2c[_0x13a64f(0xb7)]===_0x13a64f(0xc6)?{[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}}:{[sequelize_1['Op']['in']]:queues}},'required':!![],'include':[_0x13a64f(0xd1)]}],'offset':_0x40be85,'order':[[_0x13a64f(0xd0),_0x13a64f(0xd3)]]}),_0x569553=_0x7be0ad>_0x40be85+_0x4e98ad['length'];return{'messages':_0x4e98ad['reverse'](),'ticket':_0x478dc7,'count':_0x7be0ad,'hasMore':_0x569553};};function a456_0xce0b(){const _0x128e99=['112158yRxXMx','__esModule','10PqocoO','15662867BPHufF','2ojjEve','enable','9596448tariYv','findAndCountAll','292qTCmMb','796574oOJCSA','default','../TicketServices/ShowTicketService','4135976BwkyVe','49IVBjRp','235617BZISom','createdAt','queue','admin','DESC','21430YilDwi','contact','allTicket','whatsappId','isGroup','contactId','../../models/Ticket','../../models/Message','profile','../../errors/AppError','__importDefault','quotedMsg'];a456_0xce0b=function(){return _0x128e99;};return a456_0xce0b();}exports[a456_0x589ff9(0xcb)]=ListMessagesService;