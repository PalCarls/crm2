'use strict';const a471_0x4f2def=a471_0x1d9d;(function(_0x2837ce,_0x25ff3a){const _0x3dc520=a471_0x1d9d,_0x14bc74=_0x2837ce();while(!![]){try{const _0x327a51=-parseInt(_0x3dc520(0x9c))/0x1+-parseInt(_0x3dc520(0x95))/0x2+-parseInt(_0x3dc520(0xa2))/0x3*(parseInt(_0x3dc520(0xaa))/0x4)+-parseInt(_0x3dc520(0x94))/0x5+-parseInt(_0x3dc520(0xac))/0x6*(-parseInt(_0x3dc520(0x9b))/0x7)+-parseInt(_0x3dc520(0xa9))/0x8+parseInt(_0x3dc520(0x98))/0x9*(parseInt(_0x3dc520(0x99))/0xa);if(_0x327a51===_0x25ff3a)break;else _0x14bc74['push'](_0x14bc74['shift']());}catch(_0x559429){_0x14bc74['push'](_0x14bc74['shift']());}}}(a471_0x4507,0x3ebf3));function a471_0x4507(){const _0x2b9bbd=['167343LimIGv','../TicketServices/ShowTicketService','allTicket','enable','__esModule','length','67890usdYDF','whatsappId','ERR_NO_TICKET_FOUND','sequelize','queue','default','findAndCountAll','2665112dnMGtE','28TchykC','contact','18bmgkBW','admin','isGroup','562195uphIvW','602622HQmYeM','createdAt','__importDefault','1062ftlnjO','108890VWDLdp','profile','104419Njexmr'];a471_0x4507=function(){return _0x2b9bbd;};return a471_0x4507();}var __importDefault=this&&this[a471_0x4f2def(0x97)]||function(_0x343c56){const _0x340fac=a471_0x4f2def;return _0x343c56&&_0x343c56[_0x340fac(0xa0)]?_0x343c56:{'default':_0x343c56};};Object['defineProperty'](exports,a471_0x4f2def(0xa0),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),Message_1=__importDefault(require('../../models/Message')),Ticket_1=__importDefault(require('../../models/Ticket')),ShowTicketService_1=__importDefault(require(a471_0x4f2def(0x9d))),sequelize_1=require(a471_0x4f2def(0xa5)),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x4c1866,companyId:_0x20d935,queues:queues=[],user:_0x4a34bd})=>{const _0x55654a=a471_0x4f2def,_0x52a7a2=await(0x0,ShowTicketService_1[_0x55654a(0xa7)])(_0x4c1866,_0x20d935);if(!_0x52a7a2)throw new AppError_1[(_0x55654a(0xa7))](_0x55654a(0xa4),0x194);const _0x10fe1f=0x14,_0x40cf05=_0x10fe1f*(+pageNumber-0x1),{count:_0x36615c,rows:_0x5cda87}=await Message_1['default'][_0x55654a(0xa8)]({'limit':_0x10fe1f,'include':[_0x55654a(0xab),{'model':Message_1[_0x55654a(0xa7)],'as':'quotedMsg','include':['contact']},{'model':Ticket_1['default'],'where':{'contactId':_0x52a7a2['contactId'],'whatsappId':_0x52a7a2[_0x55654a(0xa3)],'isGroup':_0x52a7a2[_0x55654a(0xae)],'queueId':_0x4a34bd[_0x55654a(0x9a)]===_0x55654a(0xad)||_0x4a34bd[_0x55654a(0x9e)]===_0x55654a(0x9f)?{[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}}:{[sequelize_1['Op']['in']]:queues}},'required':!![],'include':[_0x55654a(0xa6)]}],'offset':_0x40cf05,'order':[[_0x55654a(0x96),'DESC']]}),_0x5368c3=_0x36615c>_0x40cf05+_0x5cda87[_0x55654a(0xa1)];return{'messages':_0x5cda87['reverse'](),'ticket':_0x52a7a2,'count':_0x36615c,'hasMore':_0x5368c3};};function a471_0x1d9d(_0x5803a4,_0x159289){const _0x45077f=a471_0x4507();return a471_0x1d9d=function(_0x1d9d12,_0x30d462){_0x1d9d12=_0x1d9d12-0x94;let _0xa9caa=_0x45077f[_0x1d9d12];return _0xa9caa;},a471_0x1d9d(_0x5803a4,_0x159289);}exports['default']=ListMessagesService;