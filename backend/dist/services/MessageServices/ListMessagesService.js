'use strict';const a423_0xa79498=a423_0x8efd;(function(_0x591c22,_0x2ab119){const _0x3f93c8=a423_0x8efd,_0x54beb4=_0x591c22();while(!![]){try{const _0x57d76f=parseInt(_0x3f93c8(0xa4))/0x1+-parseInt(_0x3f93c8(0x9d))/0x2*(-parseInt(_0x3f93c8(0xa2))/0x3)+-parseInt(_0x3f93c8(0x9f))/0x4+parseInt(_0x3f93c8(0xa5))/0x5+parseInt(_0x3f93c8(0x95))/0x6+parseInt(_0x3f93c8(0x8e))/0x7*(parseInt(_0x3f93c8(0xa9))/0x8)+parseInt(_0x3f93c8(0xa1))/0x9*(-parseInt(_0x3f93c8(0xaa))/0xa);if(_0x57d76f===_0x2ab119)break;else _0x54beb4['push'](_0x54beb4['shift']());}catch(_0x409624){_0x54beb4['push'](_0x54beb4['shift']());}}}(a423_0x50df,0x1db04));function a423_0x8efd(_0x19f51e,_0x2f5032){const _0x50df38=a423_0x50df();return a423_0x8efd=function(_0x8efd4d,_0x188297){_0x8efd4d=_0x8efd4d-0x89;let _0x3c2137=_0x50df38[_0x8efd4d];return _0x3c2137;},a423_0x8efd(_0x19f51e,_0x2f5032);}var __importDefault=this&&this[a423_0xa79498(0x96)]||function(_0x382857){const _0x2a7947=a423_0xa79498;return _0x382857&&_0x382857[_0x2a7947(0x99)]?_0x382857:{'default':_0x382857};};Object['defineProperty'](exports,a423_0xa79498(0x99),{'value':!![]});const AppError_1=__importDefault(require(a423_0xa79498(0x92))),Message_1=__importDefault(require(a423_0xa79498(0x8d))),Ticket_1=__importDefault(require(a423_0xa79498(0x94))),ShowTicketService_1=__importDefault(require(a423_0xa79498(0x8b))),sequelize_1=require(a423_0xa79498(0x89)),lodash_1=require(a423_0xa79498(0xa7)),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x573711,companyId:_0x5093c4,queues:queues=[]})=>{const _0x162679=a423_0xa79498,_0x41a198=await(0x0,ShowTicketService_1[_0x162679(0x91)])(_0x573711,_0x5093c4),_0xc22b5c=[],_0x3e9ee9=await Ticket_1['default'][_0x162679(0x9b)]({'where':{'status':'closed','queueId':_0x41a198[_0x162679(0xa0)],'contactId':_0x41a198[_0x162679(0xa3)],'whatsappId':_0x41a198[_0x162679(0x8a)],'companyId':_0x5093c4}});_0x3e9ee9&&_0xc22b5c[_0x162679(0x98)](_0x3e9ee9[_0x162679(0xa6)](_0x315b09=>_0x315b09['id']));const _0xc51c35=(0x0,lodash_1[_0x162679(0x97)])(..._0xc22b5c);if(!_0x41a198)throw new AppError_1[(_0x162679(0x91))](_0x162679(0x8f),0x194);const _0x32b239=0x14,_0xc5ae88=_0x32b239*(+pageNumber-0x1);console['log'](_0xc51c35);const {count:_0x154a0b,rows:_0x32e0f3}=await Message_1['default'][_0x162679(0x93)]({'limit':_0x32b239,'include':[_0x162679(0x9c),{'model':Message_1[_0x162679(0x91)],'as':_0x162679(0x8c),'include':[_0x162679(0x9c)]},{'model':Ticket_1[_0x162679(0x91)],'where':{'contactId':_0x41a198[_0x162679(0xa3)],'whatsappId':_0x41a198[_0x162679(0x8a)],'isGroup':_0x41a198[_0x162679(0x90)],'queueId':{[sequelize_1['Op']['or']]:[_0x41a198[_0x162679(0xa0)],null]}},'required':!![]}],'offset':_0xc5ae88,'order':[[_0x162679(0x9e),_0x162679(0x9a)]]}),_0x194cbf=_0x154a0b>_0xc5ae88+_0x32e0f3['length'];return{'messages':_0x32e0f3[_0x162679(0xa8)](),'ticket':_0x41a198,'count':_0x154a0b,'hasMore':_0x194cbf};};exports[a423_0xa79498(0x91)]=ListMessagesService;function a423_0x50df(){const _0x2460b5=['whatsappId','../TicketServices/ShowTicketService','quotedMsg','../../models/Message','3577eJOzeL','ERR_NO_TICKET_FOUND','isGroup','default','../../errors/AppError','findAndCountAll','../../models/Ticket','313842sPmRRd','__importDefault','intersection','push','__esModule','DESC','findAll','contact','32IjSQHY','createdAt','788964AWliLH','queueId','1278189fXHnWx','20469WMfNqq','contactId','93398pykGwG','789795HrxSkf','map','lodash','reverse','752sCdhWI','10LkxVyy','sequelize'];a423_0x50df=function(){return _0x2460b5;};return a423_0x50df();}