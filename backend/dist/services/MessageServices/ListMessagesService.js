'use strict';const a456_0xba2f9d=a456_0xaade;function a456_0x523f(){const _0x17490f=['../../models/Ticket','5522167FirZTt','3JDygJH','12yRDgNo','__importDefault','12443343VhNTir','702764afmAEA','../../models/Message','defineProperty','queue','quotedMsg','profile','default','4845850FyWOJo','../TicketServices/ShowTicketService','961010bTWQim','../../errors/AppError','35gIYeVX','isGroup','createdAt','admin','allTicket','ERR_NO_TICKET_FOUND','enable','reverse','13000CGGghq','length','__esModule','2385JFvtTI','6vfYbHc','2044236YOetrL','contact','findAndCountAll'];a456_0x523f=function(){return _0x17490f;};return a456_0x523f();}(function(_0xaf1b20,_0x1efa28){const _0x4942fd=a456_0xaade,_0x74c67e=_0xaf1b20();while(!![]){try{const _0x1d044b=-parseInt(_0x4942fd(0xa9))/0x1+parseInt(_0x4942fd(0xb8))/0x2*(parseInt(_0x4942fd(0xbd))/0x3)+parseInt(_0x4942fd(0xa0))/0x4*(-parseInt(_0x4942fd(0xab))/0x5)+parseInt(_0x4942fd(0xb7))/0x6*(parseInt(_0x4942fd(0xbc))/0x7)+parseInt(_0x4942fd(0xb3))/0x8*(parseInt(_0x4942fd(0xb6))/0x9)+-parseInt(_0x4942fd(0xa7))/0xa+-parseInt(_0x4942fd(0x9f))/0xb*(-parseInt(_0x4942fd(0x9d))/0xc);if(_0x1d044b===_0x1efa28)break;else _0x74c67e['push'](_0x74c67e['shift']());}catch(_0x404a79){_0x74c67e['push'](_0x74c67e['shift']());}}}(a456_0x523f,0xaa43d));function a456_0xaade(_0x179662,_0x1e038e){const _0x523ffb=a456_0x523f();return a456_0xaade=function(_0xaade00,_0x30bc1e){_0xaade00=_0xaade00-0x9d;let _0x1d880c=_0x523ffb[_0xaade00];return _0x1d880c;},a456_0xaade(_0x179662,_0x1e038e);}var __importDefault=this&&this[a456_0xba2f9d(0x9e)]||function(_0xe0d4c6){return _0xe0d4c6&&_0xe0d4c6['__esModule']?_0xe0d4c6:{'default':_0xe0d4c6};};Object[a456_0xba2f9d(0xa2)](exports,a456_0xba2f9d(0xb5),{'value':!![]});const AppError_1=__importDefault(require(a456_0xba2f9d(0xaa))),Message_1=__importDefault(require(a456_0xba2f9d(0xa1))),Ticket_1=__importDefault(require(a456_0xba2f9d(0xbb))),ShowTicketService_1=__importDefault(require(a456_0xba2f9d(0xa8))),sequelize_1=require('sequelize'),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x555312,companyId:_0x481c66,queues:queues=[],user:_0x183b76})=>{const _0x3dccaf=a456_0xba2f9d,_0x203d97=await(0x0,ShowTicketService_1['default'])(_0x555312,_0x481c66);if(!_0x203d97)throw new AppError_1[(_0x3dccaf(0xa6))](_0x3dccaf(0xb0),0x194);const _0xdf71b2=0x14,_0x292747=_0xdf71b2*(+pageNumber-0x1),{count:_0x2c14d9,rows:_0x7a3c5f}=await Message_1[_0x3dccaf(0xa6)][_0x3dccaf(0xba)]({'limit':_0xdf71b2,'include':[_0x3dccaf(0xb9),{'model':Message_1[_0x3dccaf(0xa6)],'as':_0x3dccaf(0xa4),'include':['contact']},{'model':Ticket_1[_0x3dccaf(0xa6)],'where':{'contactId':_0x203d97['contactId'],'whatsappId':_0x203d97['whatsappId'],'isGroup':_0x203d97[_0x3dccaf(0xac)],'queueId':_0x183b76[_0x3dccaf(0xa5)]===_0x3dccaf(0xae)||_0x183b76[_0x3dccaf(0xaf)]===_0x3dccaf(0xb1)?{[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}}:{[sequelize_1['Op']['in']]:queues}},'required':!![],'include':[_0x3dccaf(0xa3)]}],'offset':_0x292747,'order':[[_0x3dccaf(0xad),'DESC']]}),_0x32bb38=_0x2c14d9>_0x292747+_0x7a3c5f[_0x3dccaf(0xb4)];return{'messages':_0x7a3c5f[_0x3dccaf(0xb2)](),'ticket':_0x203d97,'count':_0x2c14d9,'hasMore':_0x32bb38};};exports[a456_0xba2f9d(0xa6)]=ListMessagesService;