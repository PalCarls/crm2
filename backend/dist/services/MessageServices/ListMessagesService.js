'use strict';function a471_0x8a81(_0x37a03f,_0x1d7ad9){const _0x2d4869=a471_0x2d48();return a471_0x8a81=function(_0x8a8101,_0x499baf){_0x8a8101=_0x8a8101-0x96;let _0x2ef9d8=_0x2d4869[_0x8a8101];return _0x2ef9d8;},a471_0x8a81(_0x37a03f,_0x1d7ad9);}const a471_0x8baa7=a471_0x8a81;(function(_0x4c9580,_0x1b9c1a){const _0x1cebf2=a471_0x8a81,_0x1cea9e=_0x4c9580();while(!![]){try{const _0x7a36db=parseInt(_0x1cebf2(0xa3))/0x1*(-parseInt(_0x1cebf2(0xa4))/0x2)+parseInt(_0x1cebf2(0xb1))/0x3+parseInt(_0x1cebf2(0xac))/0x4*(-parseInt(_0x1cebf2(0xa5))/0x5)+-parseInt(_0x1cebf2(0xa2))/0x6*(parseInt(_0x1cebf2(0xb3))/0x7)+parseInt(_0x1cebf2(0xae))/0x8*(-parseInt(_0x1cebf2(0xaf))/0x9)+-parseInt(_0x1cebf2(0xb2))/0xa+parseInt(_0x1cebf2(0xa8))/0xb;if(_0x7a36db===_0x1b9c1a)break;else _0x1cea9e['push'](_0x1cea9e['shift']());}catch(_0x2d8991){_0x1cea9e['push'](_0x1cea9e['shift']());}}}(a471_0x2d48,0x4d957));var __importDefault=this&&this['__importDefault']||function(_0x2f06bb){const _0x3c3856=a471_0x8a81;return _0x2f06bb&&_0x2f06bb[_0x3c3856(0x9a)]?_0x2f06bb:{'default':_0x2f06bb};};Object[a471_0x8baa7(0xa7)](exports,a471_0x8baa7(0x9a),{'value':!![]});const AppError_1=__importDefault(require(a471_0x8baa7(0x96))),Message_1=__importDefault(require('../../models/Message')),Ticket_1=__importDefault(require(a471_0x8baa7(0x98))),ShowTicketService_1=__importDefault(require(a471_0x8baa7(0x9e))),sequelize_1=require(a471_0x8baa7(0x9b)),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x37e9f9,companyId:_0x2cf0b7,queues:queues=[],user:_0x56c948})=>{const _0x829e36=a471_0x8baa7,_0x2af357=await(0x0,ShowTicketService_1['default'])(_0x37e9f9,_0x2cf0b7);if(!_0x2af357)throw new AppError_1[(_0x829e36(0x97))](_0x829e36(0x99),0x194);const _0x479dd3=0x14,_0x3cc623=_0x479dd3*(+pageNumber-0x1),{count:_0xfa82c9,rows:_0x568698}=await Message_1[_0x829e36(0x97)][_0x829e36(0x9d)]({'limit':_0x479dd3,'include':[_0x829e36(0xa1),{'model':Message_1[_0x829e36(0x97)],'as':_0x829e36(0x9c),'include':[_0x829e36(0xa1)]},{'model':Ticket_1[_0x829e36(0x97)],'where':{'contactId':_0x2af357['contactId'],'whatsappId':_0x2af357[_0x829e36(0x9f)],'isGroup':_0x2af357[_0x829e36(0xad)],'queueId':_0x56c948['profile']===_0x829e36(0xab)||_0x56c948[_0x829e36(0xa9)]==='enable'?{[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}}:{[sequelize_1['Op']['in']]:queues}},'required':!![],'include':[_0x829e36(0xb0)]}],'offset':_0x3cc623,'order':[['createdAt',_0x829e36(0xaa)]]}),_0x2d948b=_0xfa82c9>_0x3cc623+_0x568698[_0x829e36(0xa0)];return{'messages':_0x568698[_0x829e36(0xa6)](),'ticket':_0x2af357,'count':_0xfa82c9,'hasMore':_0x2d948b};};exports[a471_0x8baa7(0x97)]=ListMessagesService;function a471_0x2d48(){const _0x23e1eb=['1122UbFPjz','4bBDSUG','206392botBLp','324335fxacDm','reverse','defineProperty','18050241DaqDfM','allTicket','DESC','admin','20DebEsr','isGroup','128iNnjcP','132165yyAxBo','queue','330iQKoUy','3019980KTQivu','1841YrZqKp','../../errors/AppError','default','../../models/Ticket','ERR_NO_TICKET_FOUND','__esModule','sequelize','quotedMsg','findAndCountAll','../TicketServices/ShowTicketService','whatsappId','length','contact'];a471_0x2d48=function(){return _0x23e1eb;};return a471_0x2d48();}