'use strict';const a529_0x5be16d=a529_0x5950;(function(_0x352994,_0x1788cc){const _0x4cc5c2=a529_0x5950,_0x997bd3=_0x352994();while(!![]){try{const _0x263cc4=-parseInt(_0x4cc5c2(0x118))/0x1*(parseInt(_0x4cc5c2(0x115))/0x2)+-parseInt(_0x4cc5c2(0x110))/0x3*(parseInt(_0x4cc5c2(0x119))/0x4)+-parseInt(_0x4cc5c2(0x10f))/0x5+-parseInt(_0x4cc5c2(0x113))/0x6+parseInt(_0x4cc5c2(0x11d))/0x7+-parseInt(_0x4cc5c2(0x123))/0x8+parseInt(_0x4cc5c2(0x109))/0x9;if(_0x263cc4===_0x1788cc)break;else _0x997bd3['push'](_0x997bd3['shift']());}catch(_0x37a619){_0x997bd3['push'](_0x997bd3['shift']());}}}(a529_0x1971,0xace6d));function a529_0x5950(_0x4771ee,_0x1eb935){const _0x1971ae=a529_0x1971();return a529_0x5950=function(_0x59504f,_0x3ee3f4){_0x59504f=_0x59504f-0x105;let _0x5d6bb3=_0x1971ae[_0x59504f];return _0x5d6bb3;},a529_0x5950(_0x4771ee,_0x1eb935);}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x3e406f,_0x882c7f,_0xb4e03f,_0x5545c6){const _0x5532af=a529_0x5950;if(_0x5545c6===undefined)_0x5545c6=_0xb4e03f;var _0x36f1d3=Object['getOwnPropertyDescriptor'](_0x882c7f,_0xb4e03f);(!_0x36f1d3||(_0x5532af(0x124)in _0x36f1d3?!_0x882c7f[_0x5532af(0x11a)]:_0x36f1d3['writable']||_0x36f1d3[_0x5532af(0x11e)]))&&(_0x36f1d3={'enumerable':!![],'get':function(){return _0x882c7f[_0xb4e03f];}}),Object[_0x5532af(0x127)](_0x3e406f,_0x5545c6,_0x36f1d3);}:function(_0x366d3f,_0x119197,_0x26ab59,_0x4d8b70){if(_0x4d8b70===undefined)_0x4d8b70=_0x26ab59;_0x366d3f[_0x4d8b70]=_0x119197[_0x26ab59];}),__setModuleDefault=this&&this[a529_0x5be16d(0x117)]||(Object['create']?function(_0x4077c2,_0x4ed613){const _0x3b3d9b=a529_0x5be16d;Object['defineProperty'](_0x4077c2,_0x3b3d9b(0x111),{'enumerable':!![],'value':_0x4ed613});}:function(_0x4da85c,_0x2e4ff0){const _0x4664a5=a529_0x5be16d;_0x4da85c[_0x4664a5(0x111)]=_0x2e4ff0;}),__importStar=this&&this[a529_0x5be16d(0x116)]||function(_0x273419){const _0x31bbe5=a529_0x5be16d;if(_0x273419&&_0x273419[_0x31bbe5(0x11a)])return _0x273419;var _0x4aa3d7={};if(_0x273419!=null){for(var _0x199617 in _0x273419)if(_0x199617!=='default'&&Object[_0x31bbe5(0x105)][_0x31bbe5(0x122)][_0x31bbe5(0x10c)](_0x273419,_0x199617))__createBinding(_0x4aa3d7,_0x273419,_0x199617);}return __setModuleDefault(_0x4aa3d7,_0x273419),_0x4aa3d7;};Object[a529_0x5be16d(0x127)](exports,a529_0x5be16d(0x11a),{'value':!![]}),exports[a529_0x5be16d(0x10e)]=void 0x0;const Sentry=__importStar(require('@sentry/node')),logger_1=require(a529_0x5be16d(0x112));async function detectIntent(_0x4cca68,_0x493506,_0x4dd120,_0x5aca1b,_0x31c6f4){const _0x201bb1=a529_0x5be16d,_0x11a70f=_0x4cca68[_0x201bb1(0x11b)](_0x493506,_0x4dd120),_0x16798c={'session':_0x11a70f,'queryInput':{'text':{'text':_0x5aca1b,'languageCode':_0x31c6f4}}},_0x47944a=await _0x4cca68[_0x201bb1(0x126)](_0x16798c);return _0x47944a[0x0];}async function detectAudioIntent(_0x1298f1,_0x1ad83f,_0x269d0e,_0x5d55a9,_0x1dfc1d){const _0x578acf=a529_0x5be16d,_0x3cc2dc=_0x1298f1[_0x578acf(0x11b)](_0x1ad83f,_0x269d0e),_0x17dfd6=0x6,_0x4e4d48=0x3e80,_0x54c1b3={'session':_0x3cc2dc,'queryInput':{'audioConfig':{'audioEncoding':_0x17dfd6,'sampleRateHertz':_0x4e4d48,'languageCode':_0x5d55a9}},'inputAudio':_0x1dfc1d},_0x1bbdf3=await _0x1298f1[_0x578acf(0x126)](_0x54c1b3);return _0x1bbdf3[0x0];}async function queryDialogFlow(_0x34c0bc,_0x2465f5,_0x19b9ad,_0x2009bc,_0x4333c8,_0x53dd34){const _0x1d87a7=a529_0x5be16d;let _0x10ffbe;if(_0x53dd34){try{_0x10ffbe=await detectAudioIntent(_0x34c0bc,_0x2465f5,_0x19b9ad,_0x4333c8,_0x53dd34);const _0x41e250=_0x10ffbe?.[_0x1d87a7(0x114)]?.[_0x1d87a7(0x10a)],_0x51e9e9=_0x10ffbe?.[_0x1d87a7(0x114)]?.['diagnosticInfo']?.[_0x1d87a7(0x108)]?.[_0x1d87a7(0x11f)]?.[_0x1d87a7(0x121)],_0x30eb3a=_0x10ffbe?.['queryResult']?.[_0x1d87a7(0x107)]?.[_0x1d87a7(0x108)],_0x555f2e=_0x10ffbe?.[_0x1d87a7(0x106)];return _0x41e250?.[_0x1d87a7(0x125)]===0x0?null:{'responses':_0x41e250,'endConversation':_0x51e9e9,'parameters':_0x30eb3a,'encodedAudio':_0x555f2e};}catch(_0x214ef1){Sentry[_0x1d87a7(0x120)](_0x214ef1),logger_1['logger'][_0x1d87a7(0x10d)](_0x1d87a7(0x10b)+_0x214ef1);}return null;}else{try{_0x10ffbe=await detectIntent(_0x34c0bc,_0x2465f5,_0x19b9ad,_0x2009bc,_0x4333c8);const _0x203c37=_0x10ffbe?.[_0x1d87a7(0x114)]?.['fulfillmentMessages'],_0x319b1f=_0x10ffbe?.['queryResult']?.[_0x1d87a7(0x11c)]?.[_0x1d87a7(0x108)]?.[_0x1d87a7(0x11f)]?.[_0x1d87a7(0x121)],_0x3690a1=_0x10ffbe?.[_0x1d87a7(0x114)]?.[_0x1d87a7(0x107)]?.[_0x1d87a7(0x108)],_0x3bc15f=_0x10ffbe?.[_0x1d87a7(0x106)];return _0x203c37?.[_0x1d87a7(0x125)]===0x0?null:{'responses':_0x203c37,'endConversation':_0x319b1f,'parameters':_0x3690a1,'encodedAudio':_0x3bc15f};}catch(_0x424441){Sentry[_0x1d87a7(0x120)](_0x424441),logger_1['logger'][_0x1d87a7(0x10d)]('Error\x20handling\x20whatsapp\x20message:\x20Err:\x20'+_0x424441);}return null;}}exports[a529_0x5be16d(0x10e)]=queryDialogFlow;function a529_0x1971(){const _0x14e050=['parameters','fields','21035817BDAPzE','fulfillmentMessages','Error\x20handling\x20whatsapp\x20message:\x20Err:\x20','call','error','queryDialogFlow','607545rhCrxh','3bxMTPR','default','../../utils/logger','6576822pUVUsi','queryResult','2cONqki','__importStar','__setModuleDefault','518171ADfCnO','2555092nsPDYz','__esModule','projectAgentSessionPath','diagnosticInfo','7955773CBYKOo','configurable','end_conversation','captureException','boolValue','hasOwnProperty','3128456pbmIFS','get','length','detectIntent','defineProperty','prototype','outputAudio'];a529_0x1971=function(){return _0x14e050;};return a529_0x1971();}