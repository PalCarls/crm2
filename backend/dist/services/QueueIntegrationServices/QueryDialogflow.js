'use strict';const a519_0x3981c2=a519_0xa873;(function(_0x1ed5bd,_0x326e27){const _0x281f59=a519_0xa873,_0x57ab18=_0x1ed5bd();while(!![]){try{const _0x353319=parseInt(_0x281f59(0x20b))/0x1*(-parseInt(_0x281f59(0x201))/0x2)+-parseInt(_0x281f59(0x1f4))/0x3+-parseInt(_0x281f59(0x1fb))/0x4*(parseInt(_0x281f59(0x20e))/0x5)+-parseInt(_0x281f59(0x213))/0x6+-parseInt(_0x281f59(0x205))/0x7+-parseInt(_0x281f59(0x203))/0x8*(-parseInt(_0x281f59(0x206))/0x9)+parseInt(_0x281f59(0x20f))/0xa;if(_0x353319===_0x326e27)break;else _0x57ab18['push'](_0x57ab18['shift']());}catch(_0x58adad){_0x57ab18['push'](_0x57ab18['shift']());}}}(a519_0x1347,0xf0054));var __createBinding=this&&this[a519_0x3981c2(0x1f1)]||(Object['create']?function(_0x2fbe14,_0x411227,_0x165483,_0x1abe69){const _0x7722dc=a519_0x3981c2;if(_0x1abe69===undefined)_0x1abe69=_0x165483;var _0x2d67aa=Object[_0x7722dc(0x1fa)](_0x411227,_0x165483);(!_0x2d67aa||(_0x7722dc(0x1f0)in _0x2d67aa?!_0x411227[_0x7722dc(0x20c)]:_0x2d67aa['writable']||_0x2d67aa[_0x7722dc(0x1f5)]))&&(_0x2d67aa={'enumerable':!![],'get':function(){return _0x411227[_0x165483];}}),Object['defineProperty'](_0x2fbe14,_0x1abe69,_0x2d67aa);}:function(_0x2e9027,_0xfed100,_0xb2c57a,_0x269579){if(_0x269579===undefined)_0x269579=_0xb2c57a;_0x2e9027[_0x269579]=_0xfed100[_0xb2c57a];}),__setModuleDefault=this&&this[a519_0x3981c2(0x202)]||(Object['create']?function(_0x1b85cb,_0x25a84b){const _0x1c062e=a519_0x3981c2;Object[_0x1c062e(0x211)](_0x1b85cb,_0x1c062e(0x214),{'enumerable':!![],'value':_0x25a84b});}:function(_0x19bf6c,_0x4452d5){const _0x7754c=a519_0x3981c2;_0x19bf6c[_0x7754c(0x214)]=_0x4452d5;}),__importStar=this&&this[a519_0x3981c2(0x1fd)]||function(_0x3acbf7){const _0x378666=a519_0x3981c2;if(_0x3acbf7&&_0x3acbf7['__esModule'])return _0x3acbf7;var _0x3f5294={};if(_0x3acbf7!=null){for(var _0x277b80 in _0x3acbf7)if(_0x277b80!==_0x378666(0x214)&&Object[_0x378666(0x1f7)][_0x378666(0x1f3)][_0x378666(0x20a)](_0x3acbf7,_0x277b80))__createBinding(_0x3f5294,_0x3acbf7,_0x277b80);}return __setModuleDefault(_0x3f5294,_0x3acbf7),_0x3f5294;};Object[a519_0x3981c2(0x211)](exports,a519_0x3981c2(0x20c),{'value':!![]}),exports[a519_0x3981c2(0x208)]=void 0x0;function a519_0xa873(_0xc84656,_0x125bb3){const _0x134733=a519_0x1347();return a519_0xa873=function(_0xa873a8,_0x336ea2){_0xa873a8=_0xa873a8-0x1f0;let _0x13cd29=_0x134733[_0xa873a8];return _0x13cd29;},a519_0xa873(_0xc84656,_0x125bb3);}const Sentry=__importStar(require('@sentry/node')),logger_1=require(a519_0x3981c2(0x209));async function detectIntent(_0x3671f2,_0x16b86b,_0x13b0d9,_0x4116d3,_0x209d1a){const _0x4d42c8=a519_0x3981c2,_0x4208fa=_0x3671f2[_0x4d42c8(0x1ff)](_0x16b86b,_0x13b0d9),_0x3ec09e={'session':_0x4208fa,'queryInput':{'text':{'text':_0x4116d3,'languageCode':_0x209d1a}}},_0xeca220=await _0x3671f2[_0x4d42c8(0x1f2)](_0x3ec09e);return _0xeca220[0x0];}async function detectAudioIntent(_0x23da2,_0x5b59ba,_0x2ed893,_0x922daf,_0x1b0d96){const _0x527646=a519_0x3981c2,_0x459652=_0x23da2[_0x527646(0x1ff)](_0x5b59ba,_0x2ed893),_0x4a2c58=0x6,_0x38703b=0x3e80,_0x224708={'session':_0x459652,'queryInput':{'audioConfig':{'audioEncoding':_0x4a2c58,'sampleRateHertz':_0x38703b,'languageCode':_0x922daf}},'inputAudio':_0x1b0d96},_0x196147=await _0x23da2[_0x527646(0x1f2)](_0x224708);return _0x196147[0x0];}function a519_0x1347(){const _0x5281dd=['projectAgentSessionPath','diagnosticInfo','6406FYDFQk','__setModuleDefault','8JgGbOQ','fields','1617427lLqNEx','9866421TTcCGQ','error','queryDialogFlow','../../utils/logger','call','568yzGryA','__esModule','outputAudio','5fBMWfR','54542500ucFRoc','captureException','defineProperty','end_conversation','2394258BItgJW','default','logger','get','__createBinding','detectIntent','hasOwnProperty','3577119TmimFC','configurable','fulfillmentMessages','prototype','queryResult','boolValue','getOwnPropertyDescriptor','7702456HzlimA','length','__importStar','parameters'];a519_0x1347=function(){return _0x5281dd;};return a519_0x1347();}async function queryDialogFlow(_0x328bfe,_0x494bc9,_0xe7d787,_0x130b58,_0x3c83bf,_0x127415){const _0x28ef99=a519_0x3981c2;let _0x37eb9a;if(_0x127415){try{_0x37eb9a=await detectAudioIntent(_0x328bfe,_0x494bc9,_0xe7d787,_0x3c83bf,_0x127415);const _0x2cfe85=_0x37eb9a?.[_0x28ef99(0x1f8)]?.[_0x28ef99(0x1f6)],_0x39aef6=_0x37eb9a?.['queryResult']?.[_0x28ef99(0x200)]?.['fields']?.[_0x28ef99(0x212)]?.[_0x28ef99(0x1f9)],_0x2bbae9=_0x37eb9a?.['queryResult']?.[_0x28ef99(0x1fe)]?.[_0x28ef99(0x204)],_0x2486ec=_0x37eb9a?.[_0x28ef99(0x20d)];return _0x2cfe85?.[_0x28ef99(0x1fc)]===0x0?null:{'responses':_0x2cfe85,'endConversation':_0x39aef6,'parameters':_0x2bbae9,'encodedAudio':_0x2486ec};}catch(_0x3196ed){Sentry[_0x28ef99(0x210)](_0x3196ed),logger_1[_0x28ef99(0x215)][_0x28ef99(0x207)]('Error\x20handling\x20whatsapp\x20message:\x20Err:\x20'+_0x3196ed);}return null;}else{try{_0x37eb9a=await detectIntent(_0x328bfe,_0x494bc9,_0xe7d787,_0x130b58,_0x3c83bf);const _0x3fbafa=_0x37eb9a?.[_0x28ef99(0x1f8)]?.[_0x28ef99(0x1f6)],_0x47590f=_0x37eb9a?.[_0x28ef99(0x1f8)]?.[_0x28ef99(0x200)]?.[_0x28ef99(0x204)]?.[_0x28ef99(0x212)]?.[_0x28ef99(0x1f9)],_0x1022ad=_0x37eb9a?.[_0x28ef99(0x1f8)]?.['parameters']?.[_0x28ef99(0x204)],_0x2c5724=_0x37eb9a?.[_0x28ef99(0x20d)];return _0x3fbafa?.[_0x28ef99(0x1fc)]===0x0?null:{'responses':_0x3fbafa,'endConversation':_0x47590f,'parameters':_0x1022ad,'encodedAudio':_0x2c5724};}catch(_0x1aa45c){Sentry[_0x28ef99(0x210)](_0x1aa45c),logger_1[_0x28ef99(0x215)][_0x28ef99(0x207)]('Error\x20handling\x20whatsapp\x20message:\x20Err:\x20'+_0x1aa45c);}return null;}}exports[a519_0x3981c2(0x208)]=queryDialogFlow;