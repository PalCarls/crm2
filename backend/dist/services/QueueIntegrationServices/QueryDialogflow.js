'use strict';const a519_0x932094=a519_0x2804;(function(_0xcf0cf2,_0x23bf0e){const _0x44e8f3=a519_0x2804,_0x447baf=_0xcf0cf2();while(!![]){try{const _0x1df351=parseInt(_0x44e8f3(0x102))/0x1+-parseInt(_0x44e8f3(0x105))/0x2*(parseInt(_0x44e8f3(0xff))/0x3)+parseInt(_0x44e8f3(0xe7))/0x4*(-parseInt(_0x44e8f3(0x106))/0x5)+parseInt(_0x44e8f3(0xf2))/0x6+-parseInt(_0x44e8f3(0xf7))/0x7+-parseInt(_0x44e8f3(0xfc))/0x8*(-parseInt(_0x44e8f3(0xef))/0x9)+parseInt(_0x44e8f3(0xf1))/0xa*(-parseInt(_0x44e8f3(0xfa))/0xb);if(_0x1df351===_0x23bf0e)break;else _0x447baf['push'](_0x447baf['shift']());}catch(_0x5d2b90){_0x447baf['push'](_0x447baf['shift']());}}}(a519_0x5c3e,0xab2d8));var __createBinding=this&&this['__createBinding']||(Object[a519_0x932094(0x104)]?function(_0x12503e,_0x251400,_0x4ca46c,_0x9e3ce6){const _0x384467=a519_0x932094;if(_0x9e3ce6===undefined)_0x9e3ce6=_0x4ca46c;var _0x4bf277=Object[_0x384467(0xfb)](_0x251400,_0x4ca46c);(!_0x4bf277||(_0x384467(0xf9)in _0x4bf277?!_0x251400[_0x384467(0xf4)]:_0x4bf277[_0x384467(0x10a)]||_0x4bf277[_0x384467(0x108)]))&&(_0x4bf277={'enumerable':!![],'get':function(){return _0x251400[_0x4ca46c];}}),Object['defineProperty'](_0x12503e,_0x9e3ce6,_0x4bf277);}:function(_0x174fab,_0x4d64a0,_0x1c47c1,_0x1a0d3d){if(_0x1a0d3d===undefined)_0x1a0d3d=_0x1c47c1;_0x174fab[_0x1a0d3d]=_0x4d64a0[_0x1c47c1];}),__setModuleDefault=this&&this[a519_0x932094(0x100)]||(Object['create']?function(_0x1f7bde,_0x3aec10){const _0x2f951f=a519_0x932094;Object[_0x2f951f(0x103)](_0x1f7bde,_0x2f951f(0xe6),{'enumerable':!![],'value':_0x3aec10});}:function(_0x464f3e,_0x37449e){_0x464f3e['default']=_0x37449e;}),__importStar=this&&this[a519_0x932094(0xf6)]||function(_0x1d3990){const _0x4dd2c6=a519_0x932094;if(_0x1d3990&&_0x1d3990['__esModule'])return _0x1d3990;var _0x53f88e={};if(_0x1d3990!=null){for(var _0x22980e in _0x1d3990)if(_0x22980e!=='default'&&Object[_0x4dd2c6(0x109)][_0x4dd2c6(0xfe)][_0x4dd2c6(0xf5)](_0x1d3990,_0x22980e))__createBinding(_0x53f88e,_0x1d3990,_0x22980e);}return __setModuleDefault(_0x53f88e,_0x1d3990),_0x53f88e;};Object['defineProperty'](exports,a519_0x932094(0xf4),{'value':!![]}),exports[a519_0x932094(0xea)]=void 0x0;const Sentry=__importStar(require(a519_0x932094(0xfd))),logger_1=require('../../utils/logger');async function detectIntent(_0x5b5a7b,_0x3c7f95,_0x26a275,_0x1e3851,_0x3fb4e6){const _0x5a3656=a519_0x932094,_0x2c1bf4=_0x5b5a7b[_0x5a3656(0x101)](_0x3c7f95,_0x26a275),_0x43e1da={'session':_0x2c1bf4,'queryInput':{'text':{'text':_0x1e3851,'languageCode':_0x3fb4e6}}},_0x14070e=await _0x5b5a7b[_0x5a3656(0xf8)](_0x43e1da);return _0x14070e[0x0];}async function detectAudioIntent(_0x34244e,_0x2eb90d,_0x3380d9,_0x319251,_0x39de85){const _0x87f728=a519_0x932094,_0x14e1b5=_0x34244e[_0x87f728(0x101)](_0x2eb90d,_0x3380d9),_0x35e2f7=0x6,_0x2e2c6c=0x3e80,_0x66ef32={'session':_0x14e1b5,'queryInput':{'audioConfig':{'audioEncoding':_0x35e2f7,'sampleRateHertz':_0x2e2c6c,'languageCode':_0x319251}},'inputAudio':_0x39de85},_0x14a290=await _0x34244e[_0x87f728(0xf8)](_0x66ef32);return _0x14a290[0x0];}async function queryDialogFlow(_0x5d3d3a,_0x27ce9c,_0x3f7e57,_0x22c7fe,_0x1ce16a,_0x35a05f){const _0x86788d=a519_0x932094;let _0x1b0352;if(_0x35a05f){try{_0x1b0352=await detectAudioIntent(_0x5d3d3a,_0x27ce9c,_0x3f7e57,_0x1ce16a,_0x35a05f);const _0x49a56d=_0x1b0352?.[_0x86788d(0xe8)]?.[_0x86788d(0xed)],_0x478ae7=_0x1b0352?.[_0x86788d(0xe8)]?.['diagnosticInfo']?.[_0x86788d(0xeb)]?.[_0x86788d(0xee)]?.['boolValue'],_0x37131e=_0x1b0352?.[_0x86788d(0xe8)]?.[_0x86788d(0xe5)]?.[_0x86788d(0xeb)],_0x41c359=_0x1b0352?.[_0x86788d(0xf3)];return _0x49a56d?.[_0x86788d(0xec)]===0x0?null:{'responses':_0x49a56d,'endConversation':_0x478ae7,'parameters':_0x37131e,'encodedAudio':_0x41c359};}catch(_0x27d677){Sentry[_0x86788d(0x10c)](_0x27d677),logger_1[_0x86788d(0x107)][_0x86788d(0xe9)](_0x86788d(0xf0)+_0x27d677);}return null;}else{try{_0x1b0352=await detectIntent(_0x5d3d3a,_0x27ce9c,_0x3f7e57,_0x22c7fe,_0x1ce16a);const _0x584444=_0x1b0352?.[_0x86788d(0xe8)]?.['fulfillmentMessages'],_0x2ac288=_0x1b0352?.[_0x86788d(0xe8)]?.[_0x86788d(0xe4)]?.[_0x86788d(0xeb)]?.['end_conversation']?.[_0x86788d(0x10b)],_0x387c2e=_0x1b0352?.[_0x86788d(0xe8)]?.[_0x86788d(0xe5)]?.[_0x86788d(0xeb)],_0x5ecb95=_0x1b0352?.[_0x86788d(0xf3)];return _0x584444?.[_0x86788d(0xec)]===0x0?null:{'responses':_0x584444,'endConversation':_0x2ac288,'parameters':_0x387c2e,'encodedAudio':_0x5ecb95};}catch(_0x26966d){Sentry[_0x86788d(0x10c)](_0x26966d),logger_1[_0x86788d(0x107)][_0x86788d(0xe9)]('Error\x20handling\x20whatsapp\x20message:\x20Err:\x20'+_0x26966d);}return null;}}exports[a519_0x932094(0xea)]=queryDialogFlow;function a519_0x2804(_0x38237f,_0x50a5cf){const _0x5c3ef2=a519_0x5c3e();return a519_0x2804=function(_0x280469,_0x18c707){_0x280469=_0x280469-0xe4;let _0x17fb2a=_0x5c3ef2[_0x280469];return _0x17fb2a;},a519_0x2804(_0x38237f,_0x50a5cf);}function a519_0x5c3e(){const _0x134c91=['2111140TrEZgd','logger','configurable','prototype','writable','boolValue','captureException','diagnosticInfo','parameters','default','4GOOQFn','queryResult','error','queryDialogFlow','fields','length','fulfillmentMessages','end_conversation','2256489VFRiGB','Error\x20handling\x20whatsapp\x20message:\x20Err:\x20','421450zAnsdZ','5717256fLGdwX','outputAudio','__esModule','call','__importStar','1079897OIJRdO','detectIntent','get','132tlRMxy','getOwnPropertyDescriptor','16RXoiPZ','@sentry/node','hasOwnProperty','417fJdlLv','__setModuleDefault','projectAgentSessionPath','480714KxOHMA','defineProperty','create','2182QJibtP'];a519_0x5c3e=function(){return _0x134c91;};return a519_0x5c3e();}