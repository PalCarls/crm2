'use strict';const a469_0xc9abf1=a469_0x2e6e;(function(_0x5ad468,_0x25e097){const _0x578523=a469_0x2e6e,_0x164e8c=_0x5ad468();while(!![]){try{const _0x103134=-parseInt(_0x578523(0x96))/0x1+-parseInt(_0x578523(0xa0))/0x2+-parseInt(_0x578523(0x97))/0x3+parseInt(_0x578523(0x9e))/0x4+parseInt(_0x578523(0x8f))/0x5*(parseInt(_0x578523(0x7e))/0x6)+-parseInt(_0x578523(0x90))/0x7+parseInt(_0x578523(0x8d))/0x8;if(_0x103134===_0x25e097)break;else _0x164e8c['push'](_0x164e8c['shift']());}catch(_0x5027a0){_0x164e8c['push'](_0x164e8c['shift']());}}}(a469_0x4137,0xa8c9d));function a469_0x4137(){const _0x5b2129=['Error\x20handling\x20whatsapp\x20message:\x20Err:\x20','captureException','@sentry/node','getOwnPropertyDescriptor','create','27304992ppgCSs','configurable','435kLnzcs','7662046rTooIy','queryResult','hasOwnProperty','detectIntent','end_conversation','error','1375947zAsrTg','3829761ArOULd','get','__importStar','logger','fulfillmentMessages','parameters','boolValue','4356136JckNUL','__esModule','2000488izoNcC','64590xTdQKN','diagnosticInfo','defineProperty','length','fields','projectAgentSessionPath','../../utils/logger','default','outputAudio','writable'];a469_0x4137=function(){return _0x5b2129;};return a469_0x4137();}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x2faf25,_0x4170f3,_0x4a9d7a,_0x322d96){const _0x270528=a469_0x2e6e;if(_0x322d96===undefined)_0x322d96=_0x4a9d7a;var _0x26681e=Object[_0x270528(0x8b)](_0x4170f3,_0x4a9d7a);(!_0x26681e||(_0x270528(0x98)in _0x26681e?!_0x4170f3[_0x270528(0x9f)]:_0x26681e[_0x270528(0x87)]||_0x26681e[_0x270528(0x8e)]))&&(_0x26681e={'enumerable':!![],'get':function(){return _0x4170f3[_0x4a9d7a];}}),Object[_0x270528(0x80)](_0x2faf25,_0x322d96,_0x26681e);}:function(_0x3ebe87,_0x30777d,_0x3d5fe2,_0x37d80c){if(_0x37d80c===undefined)_0x37d80c=_0x3d5fe2;_0x3ebe87[_0x37d80c]=_0x30777d[_0x3d5fe2];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a469_0xc9abf1(0x8c)]?function(_0x456fe1,_0x38eae3){const _0x38e678=a469_0xc9abf1;Object[_0x38e678(0x80)](_0x456fe1,_0x38e678(0x85),{'enumerable':!![],'value':_0x38eae3});}:function(_0x398d28,_0xa285fb){const _0x423bfe=a469_0xc9abf1;_0x398d28[_0x423bfe(0x85)]=_0xa285fb;}),__importStar=this&&this[a469_0xc9abf1(0x99)]||function(_0x618839){const _0x591f2d=a469_0xc9abf1;if(_0x618839&&_0x618839[_0x591f2d(0x9f)])return _0x618839;var _0x17ede1={};if(_0x618839!=null){for(var _0x1889be in _0x618839)if(_0x1889be!==_0x591f2d(0x85)&&Object['prototype'][_0x591f2d(0x92)]['call'](_0x618839,_0x1889be))__createBinding(_0x17ede1,_0x618839,_0x1889be);}return __setModuleDefault(_0x17ede1,_0x618839),_0x17ede1;};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['queryDialogFlow']=void 0x0;const Sentry=__importStar(require(a469_0xc9abf1(0x8a))),logger_1=require(a469_0xc9abf1(0x84));async function detectIntent(_0x12a509,_0x2a4664,_0x807036,_0x2d1e75,_0x576a3d){const _0x43e73e=a469_0xc9abf1,_0x3664c8=_0x12a509[_0x43e73e(0x83)](_0x2a4664,_0x807036),_0xed9a8={'session':_0x3664c8,'queryInput':{'text':{'text':_0x2d1e75,'languageCode':_0x576a3d}}},_0x338e38=await _0x12a509[_0x43e73e(0x93)](_0xed9a8);return _0x338e38[0x0];}async function detectAudioIntent(_0x31af8e,_0x91f7e,_0x5db243,_0x47a1a6,_0x4b4b00){const _0x210ffd=a469_0xc9abf1,_0x5c50bd=_0x31af8e[_0x210ffd(0x83)](_0x91f7e,_0x5db243),_0x5defc3=0x6,_0xb54267=0x3e80,_0x52b78a={'session':_0x5c50bd,'queryInput':{'audioConfig':{'audioEncoding':_0x5defc3,'sampleRateHertz':_0xb54267,'languageCode':_0x47a1a6}},'inputAudio':_0x4b4b00},_0x344284=await _0x31af8e[_0x210ffd(0x93)](_0x52b78a);return _0x344284[0x0];}function a469_0x2e6e(_0x291eb2,_0x27139e){const _0x413754=a469_0x4137();return a469_0x2e6e=function(_0x2e6ef5,_0x5fd6fe){_0x2e6ef5=_0x2e6ef5-0x7e;let _0x5906ed=_0x413754[_0x2e6ef5];return _0x5906ed;},a469_0x2e6e(_0x291eb2,_0x27139e);}async function queryDialogFlow(_0x44f6e6,_0x4df611,_0x437ee6,_0x1183c7,_0x4235cd,_0x4e9600){const _0xd0bf2=a469_0xc9abf1;let _0x3a1a88;if(_0x4e9600){try{_0x3a1a88=await detectAudioIntent(_0x44f6e6,_0x4df611,_0x437ee6,_0x4235cd,_0x4e9600);const _0x34d2af=_0x3a1a88?.[_0xd0bf2(0x91)]?.[_0xd0bf2(0x9b)],_0x2615ad=_0x3a1a88?.[_0xd0bf2(0x91)]?.[_0xd0bf2(0x7f)]?.[_0xd0bf2(0x82)]?.['end_conversation']?.[_0xd0bf2(0x9d)],_0x4cfc12=_0x3a1a88?.[_0xd0bf2(0x91)]?.[_0xd0bf2(0x9c)]?.[_0xd0bf2(0x82)],_0x5124fd=_0x3a1a88?.[_0xd0bf2(0x86)];return _0x34d2af?.['length']===0x0?null:{'responses':_0x34d2af,'endConversation':_0x2615ad,'parameters':_0x4cfc12,'encodedAudio':_0x5124fd};}catch(_0x3c2c0e){Sentry['captureException'](_0x3c2c0e),logger_1[_0xd0bf2(0x9a)]['error'](_0xd0bf2(0x88)+_0x3c2c0e);}return null;}else{try{_0x3a1a88=await detectIntent(_0x44f6e6,_0x4df611,_0x437ee6,_0x1183c7,_0x4235cd);const _0x393d4d=_0x3a1a88?.['queryResult']?.[_0xd0bf2(0x9b)],_0x24cf33=_0x3a1a88?.['queryResult']?.[_0xd0bf2(0x7f)]?.['fields']?.[_0xd0bf2(0x94)]?.[_0xd0bf2(0x9d)],_0x1f0194=_0x3a1a88?.[_0xd0bf2(0x91)]?.['parameters']?.[_0xd0bf2(0x82)],_0x20e0af=_0x3a1a88?.[_0xd0bf2(0x86)];return _0x393d4d?.[_0xd0bf2(0x81)]===0x0?null:{'responses':_0x393d4d,'endConversation':_0x24cf33,'parameters':_0x1f0194,'encodedAudio':_0x20e0af};}catch(_0x151784){Sentry[_0xd0bf2(0x89)](_0x151784),logger_1[_0xd0bf2(0x9a)][_0xd0bf2(0x95)](_0xd0bf2(0x88)+_0x151784);}return null;}}exports['queryDialogFlow']=queryDialogFlow;