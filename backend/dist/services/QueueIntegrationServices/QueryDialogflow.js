'use strict';const a469_0x122182=a469_0xcde0;function a469_0xcde0(_0x24d093,_0x27f9f7){const _0x5ec221=a469_0x5ec2();return a469_0xcde0=function(_0xcde040,_0x270c8b){_0xcde040=_0xcde040-0x91;let _0x5f04a5=_0x5ec221[_0xcde040];return _0x5f04a5;},a469_0xcde0(_0x24d093,_0x27f9f7);}(function(_0x2941d1,_0x395bb0){const _0x2a1454=a469_0xcde0,_0x1d52e3=_0x2941d1();while(!![]){try{const _0x30be18=parseInt(_0x2a1454(0xb4))/0x1+-parseInt(_0x2a1454(0x9e))/0x2*(-parseInt(_0x2a1454(0x96))/0x3)+parseInt(_0x2a1454(0x95))/0x4*(-parseInt(_0x2a1454(0xab))/0x5)+-parseInt(_0x2a1454(0xa3))/0x6+parseInt(_0x2a1454(0xa1))/0x7*(parseInt(_0x2a1454(0xae))/0x8)+parseInt(_0x2a1454(0x9b))/0x9+-parseInt(_0x2a1454(0xa9))/0xa*(-parseInt(_0x2a1454(0x99))/0xb);if(_0x30be18===_0x395bb0)break;else _0x1d52e3['push'](_0x1d52e3['shift']());}catch(_0x263cbe){_0x1d52e3['push'](_0x1d52e3['shift']());}}}(a469_0x5ec2,0xd40f8));var __createBinding=this&&this['__createBinding']||(Object[a469_0x122182(0xad)]?function(_0x6c5443,_0x455d2c,_0x1f9244,_0x597f38){const _0xedf818=a469_0x122182;if(_0x597f38===undefined)_0x597f38=_0x1f9244;var _0x201184=Object[_0xedf818(0xa5)](_0x455d2c,_0x1f9244);(!_0x201184||(_0xedf818(0x93)in _0x201184?!_0x455d2c[_0xedf818(0x91)]:_0x201184['writable']||_0x201184[_0xedf818(0xb2)]))&&(_0x201184={'enumerable':!![],'get':function(){return _0x455d2c[_0x1f9244];}}),Object[_0xedf818(0xaa)](_0x6c5443,_0x597f38,_0x201184);}:function(_0x34991c,_0x282da2,_0x49497d,_0x3e55b5){if(_0x3e55b5===undefined)_0x3e55b5=_0x49497d;_0x34991c[_0x3e55b5]=_0x282da2[_0x49497d];}),__setModuleDefault=this&&this[a469_0x122182(0x9c)]||(Object[a469_0x122182(0xad)]?function(_0x28ccd8,_0x49913d){const _0x12cebf=a469_0x122182;Object[_0x12cebf(0xaa)](_0x28ccd8,_0x12cebf(0xac),{'enumerable':!![],'value':_0x49913d});}:function(_0x14f69c,_0x454bfc){const _0x38e41a=a469_0x122182;_0x14f69c[_0x38e41a(0xac)]=_0x454bfc;}),__importStar=this&&this[a469_0x122182(0xb8)]||function(_0x5bd27b){const _0x1f8035=a469_0x122182;if(_0x5bd27b&&_0x5bd27b[_0x1f8035(0x91)])return _0x5bd27b;var _0x26b040={};if(_0x5bd27b!=null){for(var _0x372b4e in _0x5bd27b)if(_0x372b4e!==_0x1f8035(0xac)&&Object[_0x1f8035(0xa7)][_0x1f8035(0xb7)][_0x1f8035(0x98)](_0x5bd27b,_0x372b4e))__createBinding(_0x26b040,_0x5bd27b,_0x372b4e);}return __setModuleDefault(_0x26b040,_0x5bd27b),_0x26b040;};Object[a469_0x122182(0xaa)](exports,'__esModule',{'value':!![]}),exports[a469_0x122182(0xa8)]=void 0x0;function a469_0x5ec2(){const _0x4c31f5=['default','create','29512YvVxvp','Error\x20handling\x20whatsapp\x20message:\x20Err:\x20','projectAgentSessionPath','error','configurable','end_conversation','276297tPLnNO','queryResult','@sentry/node','hasOwnProperty','__importStar','__esModule','boolValue','get','length','4vGYLbp','333651ZebvdT','parameters','call','17742989VMvFWF','fields','5875713WQsASR','__setModuleDefault','detectIntent','6pzHdnn','logger','captureException','427sjDUcT','diagnosticInfo','7291476POOwUq','fulfillmentMessages','getOwnPropertyDescriptor','outputAudio','prototype','queryDialogFlow','10PFkQxW','defineProperty','5084935aruIke'];a469_0x5ec2=function(){return _0x4c31f5;};return a469_0x5ec2();}const Sentry=__importStar(require(a469_0x122182(0xb6))),logger_1=require('../../utils/logger');async function detectIntent(_0x178a01,_0x283331,_0xf59bd,_0xc639c5,_0x27b183){const _0x384dc0=a469_0x122182,_0x2c8fe6=_0x178a01[_0x384dc0(0xb0)](_0x283331,_0xf59bd),_0x18527c={'session':_0x2c8fe6,'queryInput':{'text':{'text':_0xc639c5,'languageCode':_0x27b183}}},_0x4d09a0=await _0x178a01[_0x384dc0(0x9d)](_0x18527c);return _0x4d09a0[0x0];}async function detectAudioIntent(_0x2039c1,_0x9cf2f2,_0x1e36db,_0x14264e,_0x430564){const _0x3f906f=a469_0x122182,_0x4102ba=_0x2039c1[_0x3f906f(0xb0)](_0x9cf2f2,_0x1e36db),_0x360edb=0x6,_0xa95059=0x3e80,_0x4f3700={'session':_0x4102ba,'queryInput':{'audioConfig':{'audioEncoding':_0x360edb,'sampleRateHertz':_0xa95059,'languageCode':_0x14264e}},'inputAudio':_0x430564},_0x42f072=await _0x2039c1[_0x3f906f(0x9d)](_0x4f3700);return _0x42f072[0x0];}async function queryDialogFlow(_0x2d8023,_0x1973dc,_0x231733,_0x5dfe6d,_0x51362b,_0x510e3c){const _0x159f19=a469_0x122182;let _0x6033a0;if(_0x510e3c){try{_0x6033a0=await detectAudioIntent(_0x2d8023,_0x1973dc,_0x231733,_0x51362b,_0x510e3c);const _0x368497=_0x6033a0?.[_0x159f19(0xb5)]?.[_0x159f19(0xa4)],_0x56180d=_0x6033a0?.[_0x159f19(0xb5)]?.[_0x159f19(0xa2)]?.[_0x159f19(0x9a)]?.[_0x159f19(0xb3)]?.[_0x159f19(0x92)],_0x49bfb7=_0x6033a0?.[_0x159f19(0xb5)]?.[_0x159f19(0x97)]?.[_0x159f19(0x9a)],_0x408a93=_0x6033a0?.[_0x159f19(0xa6)];return _0x368497?.['length']===0x0?null:{'responses':_0x368497,'endConversation':_0x56180d,'parameters':_0x49bfb7,'encodedAudio':_0x408a93};}catch(_0x30fcad){Sentry[_0x159f19(0xa0)](_0x30fcad),logger_1['logger'][_0x159f19(0xb1)](_0x159f19(0xaf)+_0x30fcad);}return null;}else{try{_0x6033a0=await detectIntent(_0x2d8023,_0x1973dc,_0x231733,_0x5dfe6d,_0x51362b);const _0x524ff6=_0x6033a0?.[_0x159f19(0xb5)]?.[_0x159f19(0xa4)],_0x3bffc2=_0x6033a0?.[_0x159f19(0xb5)]?.[_0x159f19(0xa2)]?.[_0x159f19(0x9a)]?.[_0x159f19(0xb3)]?.[_0x159f19(0x92)],_0x19d50c=_0x6033a0?.[_0x159f19(0xb5)]?.[_0x159f19(0x97)]?.[_0x159f19(0x9a)],_0x1bf0ed=_0x6033a0?.[_0x159f19(0xa6)];return _0x524ff6?.[_0x159f19(0x94)]===0x0?null:{'responses':_0x524ff6,'endConversation':_0x3bffc2,'parameters':_0x19d50c,'encodedAudio':_0x1bf0ed};}catch(_0x220637){Sentry[_0x159f19(0xa0)](_0x220637),logger_1[_0x159f19(0x9f)]['error']('Error\x20handling\x20whatsapp\x20message:\x20Err:\x20'+_0x220637);}return null;}}exports[a469_0x122182(0xa8)]=queryDialogFlow;