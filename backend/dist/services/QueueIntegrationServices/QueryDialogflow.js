<<<<<<< HEAD
'use strict';const a519_0x537888=a519_0x5631;(function(_0x211e16,_0x10655c){const _0x225a6f=a519_0x5631,_0x56dc7c=_0x211e16();while(!![]){try{const _0xccceda=parseInt(_0x225a6f(0x1b5))/0x1+-parseInt(_0x225a6f(0x1aa))/0x2*(-parseInt(_0x225a6f(0x1a5))/0x3)+parseInt(_0x225a6f(0x1a9))/0x4+parseInt(_0x225a6f(0x1a3))/0x5+-parseInt(_0x225a6f(0x1b7))/0x6*(-parseInt(_0x225a6f(0x1a7))/0x7)+-parseInt(_0x225a6f(0x1a1))/0x8*(parseInt(_0x225a6f(0x1bc))/0x9)+-parseInt(_0x225a6f(0x1a2))/0xa;if(_0xccceda===_0x10655c)break;else _0x56dc7c['push'](_0x56dc7c['shift']());}catch(_0x3ab4c9){_0x56dc7c['push'](_0x56dc7c['shift']());}}}(a519_0x48d9,0x5fa91));function a519_0x5631(_0x34363c,_0x5c56a4){const _0x48d91a=a519_0x48d9();return a519_0x5631=function(_0x563176,_0x2bea57){_0x563176=_0x563176-0x199;let _0x4ec448=_0x48d91a[_0x563176];return _0x4ec448;},a519_0x5631(_0x34363c,_0x5c56a4);}var __createBinding=this&&this[a519_0x537888(0x1b6)]||(Object['create']?function(_0x1d719f,_0x4eabdf,_0x3ba8ff,_0x3c6b1c){const _0x1347c0=a519_0x537888;if(_0x3c6b1c===undefined)_0x3c6b1c=_0x3ba8ff;var _0x21da8c=Object[_0x1347c0(0x19a)](_0x4eabdf,_0x3ba8ff);(!_0x21da8c||(_0x1347c0(0x1ba)in _0x21da8c?!_0x4eabdf[_0x1347c0(0x19e)]:_0x21da8c['writable']||_0x21da8c[_0x1347c0(0x19f)]))&&(_0x21da8c={'enumerable':!![],'get':function(){return _0x4eabdf[_0x3ba8ff];}}),Object['defineProperty'](_0x1d719f,_0x3c6b1c,_0x21da8c);}:function(_0x1b482f,_0x51ea46,_0x504991,_0x56a573){if(_0x56a573===undefined)_0x56a573=_0x504991;_0x1b482f[_0x56a573]=_0x51ea46[_0x504991];}),__setModuleDefault=this&&this[a519_0x537888(0x1b2)]||(Object['create']?function(_0x1a53e9,_0x3192cb){const _0x55bf3c=a519_0x537888;Object[_0x55bf3c(0x1a4)](_0x1a53e9,_0x55bf3c(0x1ab),{'enumerable':!![],'value':_0x3192cb});}:function(_0x449fed,_0x27bdd9){_0x449fed['default']=_0x27bdd9;}),__importStar=this&&this['__importStar']||function(_0x559a55){const _0x475442=a519_0x537888;if(_0x559a55&&_0x559a55[_0x475442(0x19e)])return _0x559a55;var _0x3e8044={};if(_0x559a55!=null){for(var _0x5b9e88 in _0x559a55)if(_0x5b9e88!==_0x475442(0x1ab)&&Object[_0x475442(0x1a6)][_0x475442(0x1b4)][_0x475442(0x19c)](_0x559a55,_0x5b9e88))__createBinding(_0x3e8044,_0x559a55,_0x5b9e88);}return __setModuleDefault(_0x3e8044,_0x559a55),_0x3e8044;};Object[a519_0x537888(0x1a4)](exports,a519_0x537888(0x19e),{'value':!![]}),exports[a519_0x537888(0x1b9)]=void 0x0;const Sentry=__importStar(require('@sentry/node')),logger_1=require(a519_0x537888(0x199));function a519_0x48d9(){const _0x49bc16=['logger','projectAgentSessionPath','captureException','error','detectIntent','diagnosticInfo','__setModuleDefault','length','hasOwnProperty','355836UrZHpL','__createBinding','6xdyNwA','Error\x20handling\x20whatsapp\x20message:\x20Err:\x20','queryDialogFlow','get','outputAudio','43569yEYwuf','../../utils/logger','getOwnPropertyDescriptor','queryResult','call','end_conversation','__esModule','configurable','boolValue','568NUlpmu','11510590wgHKjQ','700270TbNbnF','defineProperty','513465qpNrKo','prototype','3056599etxEBK','fields','3131572OUYrSi','2qiXTrq','default'];a519_0x48d9=function(){return _0x49bc16;};return a519_0x48d9();}async function detectIntent(_0x4b7fab,_0x17364,_0x24333a,_0x573d07,_0x488229){const _0x3f8231=a519_0x537888,_0x1fe095=_0x4b7fab[_0x3f8231(0x1ad)](_0x17364,_0x24333a),_0xec6085={'session':_0x1fe095,'queryInput':{'text':{'text':_0x573d07,'languageCode':_0x488229}}},_0x123dca=await _0x4b7fab[_0x3f8231(0x1b0)](_0xec6085);return _0x123dca[0x0];}async function detectAudioIntent(_0x4c58eb,_0x183695,_0x4ca3c7,_0x141937,_0x183aad){const _0x5500af=a519_0x537888,_0x12e176=_0x4c58eb[_0x5500af(0x1ad)](_0x183695,_0x4ca3c7),_0x487370=0x6,_0x39e709=0x3e80,_0x276e55={'session':_0x12e176,'queryInput':{'audioConfig':{'audioEncoding':_0x487370,'sampleRateHertz':_0x39e709,'languageCode':_0x141937}},'inputAudio':_0x183aad},_0x30192a=await _0x4c58eb[_0x5500af(0x1b0)](_0x276e55);return _0x30192a[0x0];}async function queryDialogFlow(_0x379566,_0x4b861e,_0x5dd3f3,_0x2546aa,_0x2844e9,_0xc37436){const _0x37a5c2=a519_0x537888;let _0x2a5f86;if(_0xc37436){try{_0x2a5f86=await detectAudioIntent(_0x379566,_0x4b861e,_0x5dd3f3,_0x2844e9,_0xc37436);const _0x5aa348=_0x2a5f86?.[_0x37a5c2(0x19b)]?.['fulfillmentMessages'],_0x4e2a77=_0x2a5f86?.[_0x37a5c2(0x19b)]?.[_0x37a5c2(0x1b1)]?.[_0x37a5c2(0x1a8)]?.[_0x37a5c2(0x19d)]?.[_0x37a5c2(0x1a0)],_0x9b9bac=_0x2a5f86?.['queryResult']?.['parameters']?.[_0x37a5c2(0x1a8)],_0x4feebf=_0x2a5f86?.['outputAudio'];return _0x5aa348?.[_0x37a5c2(0x1b3)]===0x0?null:{'responses':_0x5aa348,'endConversation':_0x4e2a77,'parameters':_0x9b9bac,'encodedAudio':_0x4feebf};}catch(_0xab5fb1){Sentry[_0x37a5c2(0x1ae)](_0xab5fb1),logger_1['logger'][_0x37a5c2(0x1af)](_0x37a5c2(0x1b8)+_0xab5fb1);}return null;}else{try{_0x2a5f86=await detectIntent(_0x379566,_0x4b861e,_0x5dd3f3,_0x2546aa,_0x2844e9);const _0x163964=_0x2a5f86?.[_0x37a5c2(0x19b)]?.['fulfillmentMessages'],_0x47e9f5=_0x2a5f86?.[_0x37a5c2(0x19b)]?.['diagnosticInfo']?.[_0x37a5c2(0x1a8)]?.[_0x37a5c2(0x19d)]?.[_0x37a5c2(0x1a0)],_0x1a2e30=_0x2a5f86?.['queryResult']?.['parameters']?.['fields'],_0x81e8bb=_0x2a5f86?.[_0x37a5c2(0x1bb)];return _0x163964?.[_0x37a5c2(0x1b3)]===0x0?null:{'responses':_0x163964,'endConversation':_0x47e9f5,'parameters':_0x1a2e30,'encodedAudio':_0x81e8bb};}catch(_0x428b9a){Sentry[_0x37a5c2(0x1ae)](_0x428b9a),logger_1[_0x37a5c2(0x1ac)]['error'](_0x37a5c2(0x1b8)+_0x428b9a);}return null;}}exports['queryDialogFlow']=queryDialogFlow;
=======
'use strict';const a519_0x932094=a519_0x2804;(function(_0xcf0cf2,_0x23bf0e){const _0x44e8f3=a519_0x2804,_0x447baf=_0xcf0cf2();while(!![]){try{const _0x1df351=parseInt(_0x44e8f3(0x102))/0x1+-parseInt(_0x44e8f3(0x105))/0x2*(parseInt(_0x44e8f3(0xff))/0x3)+parseInt(_0x44e8f3(0xe7))/0x4*(-parseInt(_0x44e8f3(0x106))/0x5)+parseInt(_0x44e8f3(0xf2))/0x6+-parseInt(_0x44e8f3(0xf7))/0x7+-parseInt(_0x44e8f3(0xfc))/0x8*(-parseInt(_0x44e8f3(0xef))/0x9)+parseInt(_0x44e8f3(0xf1))/0xa*(-parseInt(_0x44e8f3(0xfa))/0xb);if(_0x1df351===_0x23bf0e)break;else _0x447baf['push'](_0x447baf['shift']());}catch(_0x5d2b90){_0x447baf['push'](_0x447baf['shift']());}}}(a519_0x5c3e,0xab2d8));var __createBinding=this&&this['__createBinding']||(Object[a519_0x932094(0x104)]?function(_0x12503e,_0x251400,_0x4ca46c,_0x9e3ce6){const _0x384467=a519_0x932094;if(_0x9e3ce6===undefined)_0x9e3ce6=_0x4ca46c;var _0x4bf277=Object[_0x384467(0xfb)](_0x251400,_0x4ca46c);(!_0x4bf277||(_0x384467(0xf9)in _0x4bf277?!_0x251400[_0x384467(0xf4)]:_0x4bf277[_0x384467(0x10a)]||_0x4bf277[_0x384467(0x108)]))&&(_0x4bf277={'enumerable':!![],'get':function(){return _0x251400[_0x4ca46c];}}),Object['defineProperty'](_0x12503e,_0x9e3ce6,_0x4bf277);}:function(_0x174fab,_0x4d64a0,_0x1c47c1,_0x1a0d3d){if(_0x1a0d3d===undefined)_0x1a0d3d=_0x1c47c1;_0x174fab[_0x1a0d3d]=_0x4d64a0[_0x1c47c1];}),__setModuleDefault=this&&this[a519_0x932094(0x100)]||(Object['create']?function(_0x1f7bde,_0x3aec10){const _0x2f951f=a519_0x932094;Object[_0x2f951f(0x103)](_0x1f7bde,_0x2f951f(0xe6),{'enumerable':!![],'value':_0x3aec10});}:function(_0x464f3e,_0x37449e){_0x464f3e['default']=_0x37449e;}),__importStar=this&&this[a519_0x932094(0xf6)]||function(_0x1d3990){const _0x4dd2c6=a519_0x932094;if(_0x1d3990&&_0x1d3990['__esModule'])return _0x1d3990;var _0x53f88e={};if(_0x1d3990!=null){for(var _0x22980e in _0x1d3990)if(_0x22980e!=='default'&&Object[_0x4dd2c6(0x109)][_0x4dd2c6(0xfe)][_0x4dd2c6(0xf5)](_0x1d3990,_0x22980e))__createBinding(_0x53f88e,_0x1d3990,_0x22980e);}return __setModuleDefault(_0x53f88e,_0x1d3990),_0x53f88e;};Object['defineProperty'](exports,a519_0x932094(0xf4),{'value':!![]}),exports[a519_0x932094(0xea)]=void 0x0;const Sentry=__importStar(require(a519_0x932094(0xfd))),logger_1=require('../../utils/logger');async function detectIntent(_0x5b5a7b,_0x3c7f95,_0x26a275,_0x1e3851,_0x3fb4e6){const _0x5a3656=a519_0x932094,_0x2c1bf4=_0x5b5a7b[_0x5a3656(0x101)](_0x3c7f95,_0x26a275),_0x43e1da={'session':_0x2c1bf4,'queryInput':{'text':{'text':_0x1e3851,'languageCode':_0x3fb4e6}}},_0x14070e=await _0x5b5a7b[_0x5a3656(0xf8)](_0x43e1da);return _0x14070e[0x0];}async function detectAudioIntent(_0x34244e,_0x2eb90d,_0x3380d9,_0x319251,_0x39de85){const _0x87f728=a519_0x932094,_0x14e1b5=_0x34244e[_0x87f728(0x101)](_0x2eb90d,_0x3380d9),_0x35e2f7=0x6,_0x2e2c6c=0x3e80,_0x66ef32={'session':_0x14e1b5,'queryInput':{'audioConfig':{'audioEncoding':_0x35e2f7,'sampleRateHertz':_0x2e2c6c,'languageCode':_0x319251}},'inputAudio':_0x39de85},_0x14a290=await _0x34244e[_0x87f728(0xf8)](_0x66ef32);return _0x14a290[0x0];}async function queryDialogFlow(_0x5d3d3a,_0x27ce9c,_0x3f7e57,_0x22c7fe,_0x1ce16a,_0x35a05f){const _0x86788d=a519_0x932094;let _0x1b0352;if(_0x35a05f){try{_0x1b0352=await detectAudioIntent(_0x5d3d3a,_0x27ce9c,_0x3f7e57,_0x1ce16a,_0x35a05f);const _0x49a56d=_0x1b0352?.[_0x86788d(0xe8)]?.[_0x86788d(0xed)],_0x478ae7=_0x1b0352?.[_0x86788d(0xe8)]?.['diagnosticInfo']?.[_0x86788d(0xeb)]?.[_0x86788d(0xee)]?.['boolValue'],_0x37131e=_0x1b0352?.[_0x86788d(0xe8)]?.[_0x86788d(0xe5)]?.[_0x86788d(0xeb)],_0x41c359=_0x1b0352?.[_0x86788d(0xf3)];return _0x49a56d?.[_0x86788d(0xec)]===0x0?null:{'responses':_0x49a56d,'endConversation':_0x478ae7,'parameters':_0x37131e,'encodedAudio':_0x41c359};}catch(_0x27d677){Sentry[_0x86788d(0x10c)](_0x27d677),logger_1[_0x86788d(0x107)][_0x86788d(0xe9)](_0x86788d(0xf0)+_0x27d677);}return null;}else{try{_0x1b0352=await detectIntent(_0x5d3d3a,_0x27ce9c,_0x3f7e57,_0x22c7fe,_0x1ce16a);const _0x584444=_0x1b0352?.[_0x86788d(0xe8)]?.['fulfillmentMessages'],_0x2ac288=_0x1b0352?.[_0x86788d(0xe8)]?.[_0x86788d(0xe4)]?.[_0x86788d(0xeb)]?.['end_conversation']?.[_0x86788d(0x10b)],_0x387c2e=_0x1b0352?.[_0x86788d(0xe8)]?.[_0x86788d(0xe5)]?.[_0x86788d(0xeb)],_0x5ecb95=_0x1b0352?.[_0x86788d(0xf3)];return _0x584444?.[_0x86788d(0xec)]===0x0?null:{'responses':_0x584444,'endConversation':_0x2ac288,'parameters':_0x387c2e,'encodedAudio':_0x5ecb95};}catch(_0x26966d){Sentry[_0x86788d(0x10c)](_0x26966d),logger_1[_0x86788d(0x107)][_0x86788d(0xe9)]('Error\x20handling\x20whatsapp\x20message:\x20Err:\x20'+_0x26966d);}return null;}}exports[a519_0x932094(0xea)]=queryDialogFlow;function a519_0x2804(_0x38237f,_0x50a5cf){const _0x5c3ef2=a519_0x5c3e();return a519_0x2804=function(_0x280469,_0x18c707){_0x280469=_0x280469-0xe4;let _0x17fb2a=_0x5c3ef2[_0x280469];return _0x17fb2a;},a519_0x2804(_0x38237f,_0x50a5cf);}function a519_0x5c3e(){const _0x134c91=['2111140TrEZgd','logger','configurable','prototype','writable','boolValue','captureException','diagnosticInfo','parameters','default','4GOOQFn','queryResult','error','queryDialogFlow','fields','length','fulfillmentMessages','end_conversation','2256489VFRiGB','Error\x20handling\x20whatsapp\x20message:\x20Err:\x20','421450zAnsdZ','5717256fLGdwX','outputAudio','__esModule','call','__importStar','1079897OIJRdO','detectIntent','get','132tlRMxy','getOwnPropertyDescriptor','16RXoiPZ','@sentry/node','hasOwnProperty','417fJdlLv','__setModuleDefault','projectAgentSessionPath','480714KxOHMA','defineProperty','create','2182QJibtP'];a519_0x5c3e=function(){return _0x134c91;};return a519_0x5c3e();}
>>>>>>> ab722bfbcf394d74dd0b99a984c0dcf6ffbcff7f
