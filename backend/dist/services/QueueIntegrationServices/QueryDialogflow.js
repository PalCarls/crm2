'use strict';const a529_0x5219a2=a529_0x2c0c;(function(_0x241d99,_0x350cbb){const _0x527b92=a529_0x2c0c,_0x30e9cf=_0x241d99();while(!![]){try{const _0x3237c2=parseInt(_0x527b92(0x17e))/0x1+-parseInt(_0x527b92(0x17b))/0x2*(-parseInt(_0x527b92(0x171))/0x3)+parseInt(_0x527b92(0x183))/0x4+-parseInt(_0x527b92(0x163))/0x5+-parseInt(_0x527b92(0x182))/0x6+-parseInt(_0x527b92(0x16b))/0x7+-parseInt(_0x527b92(0x173))/0x8*(-parseInt(_0x527b92(0x178))/0x9);if(_0x3237c2===_0x350cbb)break;else _0x30e9cf['push'](_0x30e9cf['shift']());}catch(_0x4e58a5){_0x30e9cf['push'](_0x30e9cf['shift']());}}}(a529_0x29c2,0xaf5a7));var __createBinding=this&&this[a529_0x5219a2(0x160)]||(Object[a529_0x5219a2(0x16d)]?function(_0x4907bd,_0x1996ea,_0x47ceba,_0x3a9193){const _0x36b0dc=a529_0x5219a2;if(_0x3a9193===undefined)_0x3a9193=_0x47ceba;var _0x495887=Object[_0x36b0dc(0x170)](_0x1996ea,_0x47ceba);(!_0x495887||('get'in _0x495887?!_0x1996ea[_0x36b0dc(0x179)]:_0x495887[_0x36b0dc(0x167)]||_0x495887[_0x36b0dc(0x184)]))&&(_0x495887={'enumerable':!![],'get':function(){return _0x1996ea[_0x47ceba];}}),Object[_0x36b0dc(0x162)](_0x4907bd,_0x3a9193,_0x495887);}:function(_0x220887,_0x1f5229,_0xdb4d54,_0x463c5d){if(_0x463c5d===undefined)_0x463c5d=_0xdb4d54;_0x220887[_0x463c5d]=_0x1f5229[_0xdb4d54];}),__setModuleDefault=this&&this[a529_0x5219a2(0x16a)]||(Object['create']?function(_0x29449b,_0x15e3fd){const _0x3a031f=a529_0x5219a2;Object[_0x3a031f(0x162)](_0x29449b,_0x3a031f(0x176),{'enumerable':!![],'value':_0x15e3fd});}:function(_0x5daa2d,_0x2c1124){_0x5daa2d['default']=_0x2c1124;}),__importStar=this&&this[a529_0x5219a2(0x177)]||function(_0x14c5c3){const _0x1a6317=a529_0x5219a2;if(_0x14c5c3&&_0x14c5c3[_0x1a6317(0x179)])return _0x14c5c3;var _0xf205e3={};if(_0x14c5c3!=null){for(var _0x1769d2 in _0x14c5c3)if(_0x1769d2!==_0x1a6317(0x176)&&Object['prototype'][_0x1a6317(0x17a)][_0x1a6317(0x161)](_0x14c5c3,_0x1769d2))__createBinding(_0xf205e3,_0x14c5c3,_0x1769d2);}return __setModuleDefault(_0xf205e3,_0x14c5c3),_0xf205e3;};function a529_0x2c0c(_0x55660f,_0x30f57e){const _0x29c232=a529_0x29c2();return a529_0x2c0c=function(_0x2c0cc2,_0x25863f){_0x2c0cc2=_0x2c0cc2-0x160;let _0x1e5238=_0x29c232[_0x2c0cc2];return _0x1e5238;},a529_0x2c0c(_0x55660f,_0x30f57e);}Object['defineProperty'](exports,a529_0x5219a2(0x179),{'value':!![]}),exports[a529_0x5219a2(0x16e)]=void 0x0;const Sentry=__importStar(require(a529_0x5219a2(0x16c))),logger_1=require(a529_0x5219a2(0x169));function a529_0x29c2(){const _0x1114f5=['9nYtwOS','__esModule','hasOwnProperty','1236918fWVWSo','outputAudio','parameters','92443pzwxcK','projectAgentSessionPath','captureException','boolValue','6537288XWgXLG','74436QHJCbk','configurable','__createBinding','call','defineProperty','2889180OCabtK','queryResult','logger','error','writable','fulfillmentMessages','../../utils/logger','__setModuleDefault','5911633aGdIaz','@sentry/node','create','queryDialogFlow','Error\x20handling\x20whatsapp\x20message:\x20Err:\x20','getOwnPropertyDescriptor','3wRHGvA','fields','20005112TIHvto','length','end_conversation','default','__importStar'];a529_0x29c2=function(){return _0x1114f5;};return a529_0x29c2();}async function detectIntent(_0x319050,_0x1c4077,_0x52df06,_0x2e69c4,_0x4d96ab){const _0x5767c1=a529_0x5219a2,_0x65bdd=_0x319050[_0x5767c1(0x17f)](_0x1c4077,_0x52df06),_0x15b1fa={'session':_0x65bdd,'queryInput':{'text':{'text':_0x2e69c4,'languageCode':_0x4d96ab}}},_0x55934c=await _0x319050['detectIntent'](_0x15b1fa);return _0x55934c[0x0];}async function detectAudioIntent(_0x5b7e0d,_0x2a2c03,_0x299902,_0x3c7c76,_0x441080){const _0x2f7954=a529_0x5219a2,_0x46de34=_0x5b7e0d[_0x2f7954(0x17f)](_0x2a2c03,_0x299902),_0x17ea34=0x6,_0x1bf867=0x3e80,_0x597a84={'session':_0x46de34,'queryInput':{'audioConfig':{'audioEncoding':_0x17ea34,'sampleRateHertz':_0x1bf867,'languageCode':_0x3c7c76}},'inputAudio':_0x441080},_0x58932e=await _0x5b7e0d['detectIntent'](_0x597a84);return _0x58932e[0x0];}async function queryDialogFlow(_0x21aa2b,_0x21008d,_0x4d3c76,_0x22be31,_0x38f6d1,_0x539e59){const _0x528e33=a529_0x5219a2;let _0x5baf91;if(_0x539e59){try{_0x5baf91=await detectAudioIntent(_0x21aa2b,_0x21008d,_0x4d3c76,_0x38f6d1,_0x539e59);const _0x4cfed3=_0x5baf91?.[_0x528e33(0x164)]?.[_0x528e33(0x168)],_0x866fb0=_0x5baf91?.[_0x528e33(0x164)]?.['diagnosticInfo']?.[_0x528e33(0x172)]?.[_0x528e33(0x175)]?.[_0x528e33(0x181)],_0x187eeb=_0x5baf91?.[_0x528e33(0x164)]?.[_0x528e33(0x17d)]?.['fields'],_0x2090c4=_0x5baf91?.[_0x528e33(0x17c)];return _0x4cfed3?.[_0x528e33(0x174)]===0x0?null:{'responses':_0x4cfed3,'endConversation':_0x866fb0,'parameters':_0x187eeb,'encodedAudio':_0x2090c4};}catch(_0xea411a){Sentry[_0x528e33(0x180)](_0xea411a),logger_1['logger'][_0x528e33(0x166)](_0x528e33(0x16f)+_0xea411a);}return null;}else{try{_0x5baf91=await detectIntent(_0x21aa2b,_0x21008d,_0x4d3c76,_0x22be31,_0x38f6d1);const _0x2bb563=_0x5baf91?.[_0x528e33(0x164)]?.[_0x528e33(0x168)],_0x4cf726=_0x5baf91?.['queryResult']?.['diagnosticInfo']?.[_0x528e33(0x172)]?.[_0x528e33(0x175)]?.[_0x528e33(0x181)],_0x33aa1f=_0x5baf91?.['queryResult']?.[_0x528e33(0x17d)]?.[_0x528e33(0x172)],_0x43eb07=_0x5baf91?.['outputAudio'];return _0x2bb563?.[_0x528e33(0x174)]===0x0?null:{'responses':_0x2bb563,'endConversation':_0x4cf726,'parameters':_0x33aa1f,'encodedAudio':_0x43eb07};}catch(_0x149161){Sentry[_0x528e33(0x180)](_0x149161),logger_1[_0x528e33(0x165)]['error']('Error\x20handling\x20whatsapp\x20message:\x20Err:\x20'+_0x149161);}return null;}}exports[a529_0x5219a2(0x16e)]=queryDialogFlow;