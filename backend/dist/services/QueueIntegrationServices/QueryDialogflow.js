'use strict';const a469_0x25cb0d=a469_0x34b3;(function(_0x107608,_0x42c559){const _0x4cec64=a469_0x34b3,_0x4a4fdf=_0x107608();while(!![]){try{const _0xb0d301=parseInt(_0x4cec64(0x117))/0x1+-parseInt(_0x4cec64(0x10c))/0x2*(-parseInt(_0x4cec64(0x12a))/0x3)+-parseInt(_0x4cec64(0x109))/0x4*(parseInt(_0x4cec64(0x12f))/0x5)+-parseInt(_0x4cec64(0x12b))/0x6*(-parseInt(_0x4cec64(0x11d))/0x7)+-parseInt(_0x4cec64(0x10b))/0x8*(parseInt(_0x4cec64(0x10a))/0x9)+parseInt(_0x4cec64(0x127))/0xa*(-parseInt(_0x4cec64(0x114))/0xb)+parseInt(_0x4cec64(0x126))/0xc;if(_0xb0d301===_0x42c559)break;else _0x4a4fdf['push'](_0x4a4fdf['shift']());}catch(_0x428566){_0x4a4fdf['push'](_0x4a4fdf['shift']());}}}(a469_0x3c89,0x25444));var __createBinding=this&&this[a469_0x25cb0d(0x11f)]||(Object[a469_0x25cb0d(0x12d)]?function(_0xd94f5a,_0x11b8db,_0x4e1adc,_0x29f19b){const _0x4c3461=a469_0x25cb0d;if(_0x29f19b===undefined)_0x29f19b=_0x4e1adc;var _0x2b351d=Object[_0x4c3461(0x10d)](_0x11b8db,_0x4e1adc);(!_0x2b351d||(_0x4c3461(0x10e)in _0x2b351d?!_0x11b8db[_0x4c3461(0x111)]:_0x2b351d[_0x4c3461(0x123)]||_0x2b351d['configurable']))&&(_0x2b351d={'enumerable':!![],'get':function(){return _0x11b8db[_0x4e1adc];}}),Object[_0x4c3461(0x11a)](_0xd94f5a,_0x29f19b,_0x2b351d);}:function(_0x278dab,_0x12b513,_0x5c55c3,_0x454a7f){if(_0x454a7f===undefined)_0x454a7f=_0x5c55c3;_0x278dab[_0x454a7f]=_0x12b513[_0x5c55c3];}),__setModuleDefault=this&&this[a469_0x25cb0d(0x11e)]||(Object['create']?function(_0x1ff10b,_0x5602a1){const _0x489a6f=a469_0x25cb0d;Object[_0x489a6f(0x11a)](_0x1ff10b,_0x489a6f(0x11c),{'enumerable':!![],'value':_0x5602a1});}:function(_0x324df3,_0x1a8193){_0x324df3['default']=_0x1a8193;}),__importStar=this&&this[a469_0x25cb0d(0x125)]||function(_0x4dacaf){const _0x4d1058=a469_0x25cb0d;if(_0x4dacaf&&_0x4dacaf[_0x4d1058(0x111)])return _0x4dacaf;var _0x3437c5={};if(_0x4dacaf!=null){for(var _0x4bf7c8 in _0x4dacaf)if(_0x4bf7c8!==_0x4d1058(0x11c)&&Object['prototype'][_0x4d1058(0x120)][_0x4d1058(0x115)](_0x4dacaf,_0x4bf7c8))__createBinding(_0x3437c5,_0x4dacaf,_0x4bf7c8);}return __setModuleDefault(_0x3437c5,_0x4dacaf),_0x3437c5;};Object[a469_0x25cb0d(0x11a)](exports,a469_0x25cb0d(0x111),{'value':!![]}),exports[a469_0x25cb0d(0x130)]=void 0x0;const Sentry=__importStar(require(a469_0x25cb0d(0x119))),logger_1=require('../../utils/logger');function a469_0x3c89(){const _0x391b2e=['__createBinding','hasOwnProperty','captureException','boolValue','writable','outputAudio','__importStar','2495928XWAjPV','1292930KFggtw','projectAgentSessionPath','error','231342ejYAht','1060194LAGayU','length','create','fields','236485KztDrp','queryDialogFlow','24uvwkra','54dCUxNh','256TRCrig','2qYZGVo','getOwnPropertyDescriptor','get','fulfillmentMessages','parameters','__esModule','logger','detectIntent','11jCjFhv','call','Error\x20handling\x20whatsapp\x20message:\x20Err:\x20','104104rJrsvd','diagnosticInfo','@sentry/node','defineProperty','queryResult','default','7pnCaay','__setModuleDefault'];a469_0x3c89=function(){return _0x391b2e;};return a469_0x3c89();}async function detectIntent(_0x1b5a0e,_0x2cd266,_0x32a5aa,_0x45beb5,_0x1fe682){const _0x1f0f58=a469_0x25cb0d,_0x1e9d6b=_0x1b5a0e[_0x1f0f58(0x128)](_0x2cd266,_0x32a5aa),_0x25e576={'session':_0x1e9d6b,'queryInput':{'text':{'text':_0x45beb5,'languageCode':_0x1fe682}}},_0x574520=await _0x1b5a0e[_0x1f0f58(0x113)](_0x25e576);return _0x574520[0x0];}async function detectAudioIntent(_0x1c8645,_0x5d5686,_0x4937c5,_0x3a4d04,_0x46d1c2){const _0x2d2f91=a469_0x25cb0d,_0xb749a8=_0x1c8645[_0x2d2f91(0x128)](_0x5d5686,_0x4937c5),_0x2d5a2f=0x6,_0x353606=0x3e80,_0x3de963={'session':_0xb749a8,'queryInput':{'audioConfig':{'audioEncoding':_0x2d5a2f,'sampleRateHertz':_0x353606,'languageCode':_0x3a4d04}},'inputAudio':_0x46d1c2},_0x3778d5=await _0x1c8645['detectIntent'](_0x3de963);return _0x3778d5[0x0];}async function queryDialogFlow(_0x12fbf0,_0x3afd3d,_0x290181,_0x513208,_0x66e16,_0x21dea7){const _0xd06d72=a469_0x25cb0d;let _0xa4a263;if(_0x21dea7){try{_0xa4a263=await detectAudioIntent(_0x12fbf0,_0x3afd3d,_0x290181,_0x66e16,_0x21dea7);const _0x18890f=_0xa4a263?.['queryResult']?.[_0xd06d72(0x10f)],_0x1c3dc5=_0xa4a263?.[_0xd06d72(0x11b)]?.[_0xd06d72(0x118)]?.[_0xd06d72(0x12e)]?.['end_conversation']?.[_0xd06d72(0x122)],_0x190772=_0xa4a263?.[_0xd06d72(0x11b)]?.[_0xd06d72(0x110)]?.['fields'],_0x567620=_0xa4a263?.[_0xd06d72(0x124)];return _0x18890f?.[_0xd06d72(0x12c)]===0x0?null:{'responses':_0x18890f,'endConversation':_0x1c3dc5,'parameters':_0x190772,'encodedAudio':_0x567620};}catch(_0x1ac2ae){Sentry[_0xd06d72(0x121)](_0x1ac2ae),logger_1[_0xd06d72(0x112)][_0xd06d72(0x129)](_0xd06d72(0x116)+_0x1ac2ae);}return null;}else{try{_0xa4a263=await detectIntent(_0x12fbf0,_0x3afd3d,_0x290181,_0x513208,_0x66e16);const _0x2a1953=_0xa4a263?.[_0xd06d72(0x11b)]?.[_0xd06d72(0x10f)],_0x41af33=_0xa4a263?.[_0xd06d72(0x11b)]?.[_0xd06d72(0x118)]?.[_0xd06d72(0x12e)]?.['end_conversation']?.[_0xd06d72(0x122)],_0x49e63b=_0xa4a263?.[_0xd06d72(0x11b)]?.['parameters']?.[_0xd06d72(0x12e)],_0x940881=_0xa4a263?.['outputAudio'];return _0x2a1953?.[_0xd06d72(0x12c)]===0x0?null:{'responses':_0x2a1953,'endConversation':_0x41af33,'parameters':_0x49e63b,'encodedAudio':_0x940881};}catch(_0x5eff27){Sentry[_0xd06d72(0x121)](_0x5eff27),logger_1[_0xd06d72(0x112)]['error'](_0xd06d72(0x116)+_0x5eff27);}return null;}}function a469_0x34b3(_0x37ea28,_0x3767e4){const _0x3c8927=a469_0x3c89();return a469_0x34b3=function(_0x34b3b7,_0x194e5e){_0x34b3b7=_0x34b3b7-0x109;let _0x10659b=_0x3c8927[_0x34b3b7];return _0x10659b;},a469_0x34b3(_0x37ea28,_0x3767e4);}exports[a469_0x25cb0d(0x130)]=queryDialogFlow;