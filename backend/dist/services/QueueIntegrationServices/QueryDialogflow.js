'use strict';const a484_0x17b76d=a484_0x13ee;(function(_0xdaa141,_0x14b134){const _0x102967=a484_0x13ee,_0x506912=_0xdaa141();while(!![]){try{const _0x2d924b=-parseInt(_0x102967(0xd7))/0x1+-parseInt(_0x102967(0xc7))/0x2+parseInt(_0x102967(0xd1))/0x3+-parseInt(_0x102967(0xdc))/0x4+-parseInt(_0x102967(0xde))/0x5+parseInt(_0x102967(0xce))/0x6+parseInt(_0x102967(0xc6))/0x7;if(_0x2d924b===_0x14b134)break;else _0x506912['push'](_0x506912['shift']());}catch(_0x15d665){_0x506912['push'](_0x506912['shift']());}}}(a484_0x314f,0xe1cfa));function a484_0x13ee(_0x5bd308,_0x137633){const _0x314f32=a484_0x314f();return a484_0x13ee=function(_0x13ee7d,_0x541a4e){_0x13ee7d=_0x13ee7d-0xbc;let _0x190f3e=_0x314f32[_0x13ee7d];return _0x190f3e;},a484_0x13ee(_0x5bd308,_0x137633);}var __createBinding=this&&this[a484_0x17b76d(0xcd)]||(Object[a484_0x17b76d(0xd0)]?function(_0xfa9cb,_0x38ee72,_0x2507f7,_0x546255){const _0x9fee04=a484_0x17b76d;if(_0x546255===undefined)_0x546255=_0x2507f7;var _0x23e49a=Object[_0x9fee04(0xcb)](_0x38ee72,_0x2507f7);(!_0x23e49a||(_0x9fee04(0xdd)in _0x23e49a?!_0x38ee72[_0x9fee04(0xe0)]:_0x23e49a[_0x9fee04(0xd9)]||_0x23e49a[_0x9fee04(0xc5)]))&&(_0x23e49a={'enumerable':!![],'get':function(){return _0x38ee72[_0x2507f7];}}),Object[_0x9fee04(0xd8)](_0xfa9cb,_0x546255,_0x23e49a);}:function(_0x4a178e,_0x3d6340,_0x24a314,_0x4dc32b){if(_0x4dc32b===undefined)_0x4dc32b=_0x24a314;_0x4a178e[_0x4dc32b]=_0x3d6340[_0x24a314];}),__setModuleDefault=this&&this[a484_0x17b76d(0xda)]||(Object[a484_0x17b76d(0xd0)]?function(_0xb0d28e,_0x3e6dc7){const _0x48e645=a484_0x17b76d;Object[_0x48e645(0xd8)](_0xb0d28e,_0x48e645(0xbf),{'enumerable':!![],'value':_0x3e6dc7});}:function(_0x34b02d,_0x362b60){_0x34b02d['default']=_0x362b60;}),__importStar=this&&this[a484_0x17b76d(0xbe)]||function(_0x4c31b1){const _0x93e50d=a484_0x17b76d;if(_0x4c31b1&&_0x4c31b1['__esModule'])return _0x4c31b1;var _0x22f738={};if(_0x4c31b1!=null){for(var _0x5248ae in _0x4c31b1)if(_0x5248ae!=='default'&&Object[_0x93e50d(0xcf)][_0x93e50d(0xdf)][_0x93e50d(0xc1)](_0x4c31b1,_0x5248ae))__createBinding(_0x22f738,_0x4c31b1,_0x5248ae);}return __setModuleDefault(_0x22f738,_0x4c31b1),_0x22f738;};function a484_0x314f(){const _0x15a912=['queryResult','parameters','captureException','boolValue','logger','847412XVDxXt','defineProperty','writable','__setModuleDefault','diagnosticInfo','2504988xCTKxa','get','7729810WUzbei','hasOwnProperty','__esModule','queryDialogFlow','detectIntent','__importStar','default','../../utils/logger','call','@sentry/node','projectAgentSessionPath','Error\x20handling\x20whatsapp\x20message:\x20Err:\x20','configurable','18581773ynCBex','293190dSeCtQ','error','length','fields','getOwnPropertyDescriptor','end_conversation','__createBinding','8318670gATKZC','prototype','create','150462VzrFAs'];a484_0x314f=function(){return _0x15a912;};return a484_0x314f();}Object[a484_0x17b76d(0xd8)](exports,'__esModule',{'value':!![]}),exports[a484_0x17b76d(0xbc)]=void 0x0;const Sentry=__importStar(require(a484_0x17b76d(0xc2))),logger_1=require(a484_0x17b76d(0xc0));async function detectIntent(_0x243f51,_0x41d5a1,_0x359f95,_0x527002,_0x140441){const _0x5c19a4=a484_0x17b76d,_0x4c6884=_0x243f51[_0x5c19a4(0xc3)](_0x41d5a1,_0x359f95),_0x2428fc={'session':_0x4c6884,'queryInput':{'text':{'text':_0x527002,'languageCode':_0x140441}}},_0x344808=await _0x243f51[_0x5c19a4(0xbd)](_0x2428fc);return _0x344808[0x0];}async function detectAudioIntent(_0x263465,_0x540ab6,_0x50b2a4,_0x3e41b6,_0x332176){const _0x21757e=a484_0x17b76d,_0x1ec7bb=_0x263465[_0x21757e(0xc3)](_0x540ab6,_0x50b2a4),_0x3df54d=0x6,_0x564be0=0x3e80,_0x8a2625={'session':_0x1ec7bb,'queryInput':{'audioConfig':{'audioEncoding':_0x3df54d,'sampleRateHertz':_0x564be0,'languageCode':_0x3e41b6}},'inputAudio':_0x332176},_0x3d9e90=await _0x263465[_0x21757e(0xbd)](_0x8a2625);return _0x3d9e90[0x0];}async function queryDialogFlow(_0x3d8220,_0x11da20,_0x3451ad,_0x383104,_0x42b549,_0x17a63b){const _0x4fe505=a484_0x17b76d;let _0x2fc2ea;if(_0x17a63b){try{_0x2fc2ea=await detectAudioIntent(_0x3d8220,_0x11da20,_0x3451ad,_0x42b549,_0x17a63b);const _0x441811=_0x2fc2ea?.[_0x4fe505(0xd2)]?.['fulfillmentMessages'],_0x45ad47=_0x2fc2ea?.[_0x4fe505(0xd2)]?.[_0x4fe505(0xdb)]?.[_0x4fe505(0xca)]?.['end_conversation']?.[_0x4fe505(0xd5)],_0x372b65=_0x2fc2ea?.[_0x4fe505(0xd2)]?.[_0x4fe505(0xd3)]?.[_0x4fe505(0xca)],_0x247da5=_0x2fc2ea?.['outputAudio'];return _0x441811?.[_0x4fe505(0xc9)]===0x0?null:{'responses':_0x441811,'endConversation':_0x45ad47,'parameters':_0x372b65,'encodedAudio':_0x247da5};}catch(_0x1d671b){Sentry[_0x4fe505(0xd4)](_0x1d671b),logger_1[_0x4fe505(0xd6)][_0x4fe505(0xc8)](_0x4fe505(0xc4)+_0x1d671b);}return null;}else{try{_0x2fc2ea=await detectIntent(_0x3d8220,_0x11da20,_0x3451ad,_0x383104,_0x42b549);const _0x259bae=_0x2fc2ea?.[_0x4fe505(0xd2)]?.['fulfillmentMessages'],_0x3ecfd6=_0x2fc2ea?.[_0x4fe505(0xd2)]?.[_0x4fe505(0xdb)]?.[_0x4fe505(0xca)]?.[_0x4fe505(0xcc)]?.[_0x4fe505(0xd5)],_0x2c5c98=_0x2fc2ea?.[_0x4fe505(0xd2)]?.[_0x4fe505(0xd3)]?.[_0x4fe505(0xca)],_0x3de162=_0x2fc2ea?.['outputAudio'];return _0x259bae?.[_0x4fe505(0xc9)]===0x0?null:{'responses':_0x259bae,'endConversation':_0x3ecfd6,'parameters':_0x2c5c98,'encodedAudio':_0x3de162};}catch(_0x133237){Sentry[_0x4fe505(0xd4)](_0x133237),logger_1[_0x4fe505(0xd6)][_0x4fe505(0xc8)](_0x4fe505(0xc4)+_0x133237);}return null;}}exports[a484_0x17b76d(0xbc)]=queryDialogFlow;