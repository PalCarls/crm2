'use strict';const a452_0x3a446e=a452_0x38d6;(function(_0x8e6011,_0x5eaa36){const _0x452199=a452_0x38d6,_0x193128=_0x8e6011();while(!![]){try{const _0x195f44=parseInt(_0x452199(0x159))/0x1*(parseInt(_0x452199(0x15b))/0x2)+-parseInt(_0x452199(0x151))/0x3*(parseInt(_0x452199(0x140))/0x4)+-parseInt(_0x452199(0x14e))/0x5*(parseInt(_0x452199(0x157))/0x6)+parseInt(_0x452199(0x135))/0x7*(-parseInt(_0x452199(0x15a))/0x8)+-parseInt(_0x452199(0x138))/0x9*(parseInt(_0x452199(0x134))/0xa)+parseInt(_0x452199(0x13c))/0xb*(parseInt(_0x452199(0x13a))/0xc)+parseInt(_0x452199(0x156))/0xd;if(_0x195f44===_0x5eaa36)break;else _0x193128['push'](_0x193128['shift']());}catch(_0x211c93){_0x193128['push'](_0x193128['shift']());}}}(a452_0x3ae3,0xafb40));function a452_0x38d6(_0x387079,_0x5d5aaa){const _0x3ae3b9=a452_0x3ae3();return a452_0x38d6=function(_0x38d6df,_0x114546){_0x38d6df=_0x38d6df-0x133;let _0x3a8133=_0x3ae3b9[_0x38d6df];return _0x3a8133;},a452_0x38d6(_0x387079,_0x5d5aaa);}var __createBinding=this&&this[a452_0x3a446e(0x136)]||(Object[a452_0x3a446e(0x147)]?function(_0x390b63,_0x23801d,_0x5cd733,_0x47db9b){const _0x21b493=a452_0x3a446e;if(_0x47db9b===undefined)_0x47db9b=_0x5cd733;var _0x1f4f70=Object[_0x21b493(0x14c)](_0x23801d,_0x5cd733);(!_0x1f4f70||(_0x21b493(0x154)in _0x1f4f70?!_0x23801d['__esModule']:_0x1f4f70[_0x21b493(0x137)]||_0x1f4f70['configurable']))&&(_0x1f4f70={'enumerable':!![],'get':function(){return _0x23801d[_0x5cd733];}}),Object[_0x21b493(0x13e)](_0x390b63,_0x47db9b,_0x1f4f70);}:function(_0x588b31,_0x5b9e19,_0x49b69c,_0x2f204b){if(_0x2f204b===undefined)_0x2f204b=_0x49b69c;_0x588b31[_0x2f204b]=_0x5b9e19[_0x49b69c];}),__setModuleDefault=this&&this[a452_0x3a446e(0x14d)]||(Object[a452_0x3a446e(0x147)]?function(_0xf80fdc,_0x3da9e7){const _0x5705c3=a452_0x3a446e;Object[_0x5705c3(0x13e)](_0xf80fdc,_0x5705c3(0x142),{'enumerable':!![],'value':_0x3da9e7});}:function(_0x317501,_0x1b3a24){const _0x59fa10=a452_0x3a446e;_0x317501[_0x59fa10(0x142)]=_0x1b3a24;}),__importStar=this&&this[a452_0x3a446e(0x14b)]||function(_0x41b82a){const _0x49c42e=a452_0x3a446e;if(_0x41b82a&&_0x41b82a['__esModule'])return _0x41b82a;var _0x4d434b={};if(_0x41b82a!=null){for(var _0x400115 in _0x41b82a)if(_0x400115!==_0x49c42e(0x142)&&Object['prototype']['hasOwnProperty'][_0x49c42e(0x14f)](_0x41b82a,_0x400115))__createBinding(_0x4d434b,_0x41b82a,_0x400115);}return __setModuleDefault(_0x4d434b,_0x41b82a),_0x4d434b;};Object[a452_0x3a446e(0x13e)](exports,a452_0x3a446e(0x152),{'value':!![]}),exports[a452_0x3a446e(0x13d)]=void 0x0;function a452_0x3ae3(){const _0x489665=['../../utils/logger','outputAudio','error','create','projectAgentSessionPath','parameters','queryResult','__importStar','getOwnPropertyDescriptor','__setModuleDefault','5Xhlzcs','call','diagnosticInfo','921lNvcqj','__esModule','fields','get','@sentry/node','38775776ONNhOb','8370006GqKzZQ','length','3244cEHUiT','128iHvYfN','190cPmdoQ','captureException','201560kwsagB','119154NjowLs','__createBinding','writable','531lLIjWE','boolValue','72qJjPjF','Error\x20handling\x20whatsapp\x20message:\x20Err:\x20','2566707DWkphM','queryDialogFlow','defineProperty','end_conversation','14524DFWhXL','detectIntent','default','logger'];a452_0x3ae3=function(){return _0x489665;};return a452_0x3ae3();}const Sentry=__importStar(require(a452_0x3a446e(0x155))),logger_1=require(a452_0x3a446e(0x144));async function detectIntent(_0x3d1569,_0x4fa7e7,_0x106d24,_0x3f3bbc,_0x3dc112){const _0x1c251c=a452_0x3a446e,_0x2c22a0=_0x3d1569[_0x1c251c(0x148)](_0x4fa7e7,_0x106d24),_0x3817d2={'session':_0x2c22a0,'queryInput':{'text':{'text':_0x3f3bbc,'languageCode':_0x3dc112}}},_0x2d67bb=await _0x3d1569[_0x1c251c(0x141)](_0x3817d2);return _0x2d67bb[0x0];}async function detectAudioIntent(_0x357540,_0x5d252c,_0x2e80a5,_0x355887,_0x5b4227){const _0xf19d50=a452_0x3a446e,_0x21053f=_0x357540[_0xf19d50(0x148)](_0x5d252c,_0x2e80a5),_0x12278a=0x6,_0x3d641e=0x3e80,_0x5331ba={'session':_0x21053f,'queryInput':{'audioConfig':{'audioEncoding':_0x12278a,'sampleRateHertz':_0x3d641e,'languageCode':_0x355887}},'inputAudio':_0x5b4227},_0x52a431=await _0x357540[_0xf19d50(0x141)](_0x5331ba);return _0x52a431[0x0];}async function queryDialogFlow(_0xdd0481,_0x17f0de,_0x5315f7,_0x2802c4,_0x3dd3f7,_0x474ef1){const _0x45b56d=a452_0x3a446e;let _0x2d6baa;if(_0x474ef1){try{_0x2d6baa=await detectAudioIntent(_0xdd0481,_0x17f0de,_0x5315f7,_0x3dd3f7,_0x474ef1);const _0x23f145=_0x2d6baa?.['queryResult']?.['fulfillmentMessages'],_0x316af1=_0x2d6baa?.[_0x45b56d(0x14a)]?.[_0x45b56d(0x150)]?.[_0x45b56d(0x153)]?.[_0x45b56d(0x13f)]?.['boolValue'],_0x48fe75=_0x2d6baa?.[_0x45b56d(0x14a)]?.[_0x45b56d(0x149)]?.[_0x45b56d(0x153)],_0xc91f92=_0x2d6baa?.[_0x45b56d(0x145)];return _0x23f145?.[_0x45b56d(0x158)]===0x0?null:{'responses':_0x23f145,'endConversation':_0x316af1,'parameters':_0x48fe75,'encodedAudio':_0xc91f92};}catch(_0xfc9760){Sentry['captureException'](_0xfc9760),logger_1[_0x45b56d(0x143)][_0x45b56d(0x146)](_0x45b56d(0x13b)+_0xfc9760);}return null;}else{try{_0x2d6baa=await detectIntent(_0xdd0481,_0x17f0de,_0x5315f7,_0x2802c4,_0x3dd3f7);const _0x21a595=_0x2d6baa?.[_0x45b56d(0x14a)]?.['fulfillmentMessages'],_0x48d3c7=_0x2d6baa?.[_0x45b56d(0x14a)]?.[_0x45b56d(0x150)]?.[_0x45b56d(0x153)]?.[_0x45b56d(0x13f)]?.[_0x45b56d(0x139)],_0x2df31c=_0x2d6baa?.[_0x45b56d(0x14a)]?.[_0x45b56d(0x149)]?.[_0x45b56d(0x153)],_0x262862=_0x2d6baa?.[_0x45b56d(0x145)];return _0x21a595?.[_0x45b56d(0x158)]===0x0?null:{'responses':_0x21a595,'endConversation':_0x48d3c7,'parameters':_0x2df31c,'encodedAudio':_0x262862};}catch(_0x4932aa){Sentry[_0x45b56d(0x133)](_0x4932aa),logger_1[_0x45b56d(0x143)][_0x45b56d(0x146)](_0x45b56d(0x13b)+_0x4932aa);}return null;}}exports[a452_0x3a446e(0x13d)]=queryDialogFlow;