'use strict';function a521_0x53d0(){const _0x297961=['message','TestSession','string','createDialogflowSession','object','__esModule','4391001gwnQlZ','push','574635uILpHC','18UuiOAP','__importStar','3278872TCKjgM','required','min','queryDialogFlow','2230aAnjZA','__createBinding','__importDefault','__setModuleDefault','configurable','default','prototype','./CreateSessionDialogflow','defineProperty','close','13017zBLxPE','108wQWnOo','268000pFQqBc','1269359hkUOim','yup','responses','getOwnPropertyDescriptor','10JxTvZz','text'];a521_0x53d0=function(){return _0x297961;};return a521_0x53d0();}const a521_0x3ab518=a521_0x4515;(function(_0x571509,_0x2b7a53){const _0x369145=a521_0x4515,_0x385e1d=_0x571509();while(!![]){try{const _0x3b5d0e=-parseInt(_0x369145(0x1cb))/0x1*(-parseInt(_0x369145(0x1dd))/0x2)+-parseInt(_0x369145(0x1dc))/0x3+parseInt(_0x369145(0x1cd))/0x4+-parseInt(_0x369145(0x1c1))/0x5*(parseInt(_0x369145(0x1cc))/0x6)+parseInt(_0x369145(0x1ce))/0x7+-parseInt(_0x369145(0x1bd))/0x8+-parseInt(_0x369145(0x1da))/0x9*(-parseInt(_0x369145(0x1d2))/0xa);if(_0x3b5d0e===_0x2b7a53)break;else _0x385e1d['push'](_0x385e1d['shift']());}catch(_0x53c2ff){_0x385e1d['push'](_0x385e1d['shift']());}}}(a521_0x53d0,0x3b8eb));function a521_0x4515(_0x33b9ae,_0x18a50b){const _0x53d05e=a521_0x53d0();return a521_0x4515=function(_0x4515bf,_0x1188d2){_0x4515bf=_0x4515bf-0x1bc;let _0x1e9ecd=_0x53d05e[_0x4515bf];return _0x1e9ecd;},a521_0x4515(_0x33b9ae,_0x18a50b);}var __createBinding=this&&this[a521_0x3ab518(0x1c2)]||(Object['create']?function(_0x223abd,_0x58e8a2,_0x548414,_0x785285){const _0x2dc29f=a521_0x3ab518;if(_0x785285===undefined)_0x785285=_0x548414;var _0x36dae1=Object[_0x2dc29f(0x1d1)](_0x58e8a2,_0x548414);(!_0x36dae1||('get'in _0x36dae1?!_0x58e8a2[_0x2dc29f(0x1d9)]:_0x36dae1['writable']||_0x36dae1[_0x2dc29f(0x1c5)]))&&(_0x36dae1={'enumerable':!![],'get':function(){return _0x58e8a2[_0x548414];}}),Object[_0x2dc29f(0x1c9)](_0x223abd,_0x785285,_0x36dae1);}:function(_0x12d921,_0x51fdd7,_0x3b9d7a,_0x48b6aa){if(_0x48b6aa===undefined)_0x48b6aa=_0x3b9d7a;_0x12d921[_0x48b6aa]=_0x51fdd7[_0x3b9d7a];}),__setModuleDefault=this&&this[a521_0x3ab518(0x1c4)]||(Object['create']?function(_0x586963,_0x46a6b6){const _0x4c0425=a521_0x3ab518;Object['defineProperty'](_0x586963,_0x4c0425(0x1c6),{'enumerable':!![],'value':_0x46a6b6});}:function(_0x11015d,_0x18eb27){_0x11015d['default']=_0x18eb27;}),__importStar=this&&this[a521_0x3ab518(0x1bc)]||function(_0x4ca96c){const _0xae8c5e=a521_0x3ab518;if(_0x4ca96c&&_0x4ca96c[_0xae8c5e(0x1d9)])return _0x4ca96c;var _0x10a2a1={};if(_0x4ca96c!=null){for(var _0x50e1ca in _0x4ca96c)if(_0x50e1ca!==_0xae8c5e(0x1c6)&&Object[_0xae8c5e(0x1c7)]['hasOwnProperty']['call'](_0x4ca96c,_0x50e1ca))__createBinding(_0x10a2a1,_0x4ca96c,_0x50e1ca);}return __setModuleDefault(_0x10a2a1,_0x4ca96c),_0x10a2a1;},__importDefault=this&&this[a521_0x3ab518(0x1c3)]||function(_0x5c260b){return _0x5c260b&&_0x5c260b['__esModule']?_0x5c260b:{'default':_0x5c260b};};Object['defineProperty'](exports,a521_0x3ab518(0x1d9),{'value':!![]});const Yup=__importStar(require(a521_0x3ab518(0x1cf))),AppError_1=__importDefault(require('../../errors/AppError')),QueryDialogflow_1=require('./QueryDialogflow'),CreateSessionDialogflow_1=require(a521_0x3ab518(0x1c8)),TestDialogflowSession=async({projectName:_0x32bc91,jsonContent:_0x439eac,language:_0x111018})=>{const _0x375a7b=a521_0x3ab518,_0x4503f1=Yup[_0x375a7b(0x1d8)]()['shape']({'projectName':Yup[_0x375a7b(0x1d6)]()['required']()[_0x375a7b(0x1bf)](0x2),'jsonContent':Yup[_0x375a7b(0x1d6)]()[_0x375a7b(0x1be)](),'language':Yup[_0x375a7b(0x1d6)]()[_0x375a7b(0x1be)]()['min'](0x2)});try{await _0x4503f1['validate']({'projectName':_0x32bc91,'jsonContent':_0x439eac,'language':_0x111018});}catch(_0x52a990){throw new AppError_1[(_0x375a7b(0x1c6))](_0x52a990[_0x375a7b(0x1d4)]);}const _0xd413d1=await(0x0,CreateSessionDialogflow_1[_0x375a7b(0x1d7)])(0x3e7,_0x32bc91,_0x439eac);if(!_0xd413d1)throw new AppError_1[(_0x375a7b(0x1c6))]('ERR_TEST_SESSION_DIALOG',0x190);let _0x4354e9=await(0x0,QueryDialogflow_1[_0x375a7b(0x1c0)])(_0xd413d1,_0x32bc91,_0x375a7b(0x1d5),'Ola',_0x111018,undefined);await _0xd413d1[_0x375a7b(0x1ca)]();if(!_0x4354e9)throw new AppError_1[(_0x375a7b(0x1c6))]('ERR_TEST_REPLY_DIALOG',0x190);const _0x2bba14=[];for(let _0x9ca25a of _0x4354e9[_0x375a7b(0x1d0)]){_0x2bba14[_0x375a7b(0x1db)](_0x9ca25a[_0x375a7b(0x1d3)]['text'][0x0]);}return{'messages':_0x2bba14};};exports[a521_0x3ab518(0x1c6)]=TestDialogflowSession;