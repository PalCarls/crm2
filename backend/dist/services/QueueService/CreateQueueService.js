'use strict';const a528_0x43eae4=a528_0x4ca0;(function(_0x25bab2,_0xf28599){const _0x4ee456=a528_0x4ca0,_0x324960=_0x25bab2();while(!![]){try{const _0x2093d1=parseInt(_0x4ee456(0x122))/0x1+-parseInt(_0x4ee456(0x105))/0x2*(parseInt(_0x4ee456(0x109))/0x3)+parseInt(_0x4ee456(0x11c))/0x4*(parseInt(_0x4ee456(0x112))/0x5)+-parseInt(_0x4ee456(0x10f))/0x6+-parseInt(_0x4ee456(0x110))/0x7+parseInt(_0x4ee456(0x115))/0x8*(-parseInt(_0x4ee456(0x123))/0x9)+parseInt(_0x4ee456(0x11d))/0xa;if(_0x2093d1===_0xf28599)break;else _0x324960['push'](_0x324960['shift']());}catch(_0x69b958){_0x324960['push'](_0x324960['shift']());}}}(a528_0x3654,0x82775));var __createBinding=this&&this[a528_0x43eae4(0x126)]||(Object[a528_0x43eae4(0x10d)]?function(_0x4ceb6c,_0x45223e,_0x435283,_0x212433){const _0x27084a=a528_0x43eae4;if(_0x212433===undefined)_0x212433=_0x435283;var _0x49d73d=Object[_0x27084a(0x106)](_0x45223e,_0x435283);(!_0x49d73d||('get'in _0x49d73d?!_0x45223e['__esModule']:_0x49d73d[_0x27084a(0x128)]||_0x49d73d[_0x27084a(0x125)]))&&(_0x49d73d={'enumerable':!![],'get':function(){return _0x45223e[_0x435283];}}),Object[_0x27084a(0xfc)](_0x4ceb6c,_0x212433,_0x49d73d);}:function(_0x316100,_0x214781,_0x238e7b,_0x493a73){if(_0x493a73===undefined)_0x493a73=_0x238e7b;_0x316100[_0x493a73]=_0x214781[_0x238e7b];}),__setModuleDefault=this&&this[a528_0x43eae4(0x11b)]||(Object[a528_0x43eae4(0x10d)]?function(_0x39b730,_0x1a83f9){const _0x313c13=a528_0x43eae4;Object[_0x313c13(0xfc)](_0x39b730,'default',{'enumerable':!![],'value':_0x1a83f9});}:function(_0x498876,_0x1e52e5){const _0x90f8b5=a528_0x43eae4;_0x498876[_0x90f8b5(0xff)]=_0x1e52e5;}),__importStar=this&&this[a528_0x43eae4(0x11f)]||function(_0x4891b4){const _0x5e234a=a528_0x43eae4;if(_0x4891b4&&_0x4891b4[_0x5e234a(0x103)])return _0x4891b4;var _0xbb230c={};if(_0x4891b4!=null){for(var _0x3f9e30 in _0x4891b4)if(_0x3f9e30!==_0x5e234a(0xff)&&Object['prototype'][_0x5e234a(0xfd)]['call'](_0x4891b4,_0x3f9e30))__createBinding(_0xbb230c,_0x4891b4,_0x3f9e30);}return __setModuleDefault(_0xbb230c,_0x4891b4),_0xbb230c;},__importDefault=this&&this[a528_0x43eae4(0x119)]||function(_0x29c62a){const _0x1cbe7c=a528_0x43eae4;return _0x29c62a&&_0x29c62a[_0x1cbe7c(0x103)]?_0x29c62a:{'default':_0x29c62a};};Object[a528_0x43eae4(0xfc)](exports,'__esModule',{'value':!![]});function a528_0x4ca0(_0x379f76,_0x3a9fa2){const _0x3654ea=a528_0x3654();return a528_0x4ca0=function(_0x4ca0c4,_0x48ef9c){_0x4ca0c4=_0x4ca0c4-0xfc;let _0x9e5cb4=_0x3654ea[_0x4ca0c4];return _0x9e5cb4;},a528_0x4ca0(_0x379f76,_0x3a9fa2);}function a528_0x3654(){const _0x4e050f=['asc','__setModuleDefault','144004TqtrfI','665990wHJTyy','object','__importStar','user','ERR_QUEUE_COLOR_ALREADY_EXISTS','896720ytzbcE','549NWJUkJ','../../models/Chatbot','configurable','__createBinding','message','writable','../../models/User','defineProperty','hasOwnProperty','../../models/Company','default','string','chatbots','shape','__esModule','test','2PVYALr','getOwnPropertyDescriptor','Check-unique-name','required','474258rdxCmJ','findOne','plan','ERR_QUEUE_INVALID_NAME','create','ERR_QUEUE_INVALID_COLOR','2047428kKXYGA','3637984QXfCuq','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','135yNSOek','../../models/Queue','validate','50088AbeQEK','yup','../../errors/AppError','ERR_QUEUE_NAME_ALREADY_EXISTS','__importDefault'];a528_0x3654=function(){return _0x4e050f;};return a528_0x3654();}const Yup=__importStar(require(a528_0x43eae4(0x116))),AppError_1=__importDefault(require(a528_0x43eae4(0x117))),Queue_1=__importDefault(require(a528_0x43eae4(0x113))),Company_1=__importDefault(require(a528_0x43eae4(0xfe))),Plan_1=__importDefault(require('../../models/Plan')),Chatbot_1=__importDefault(require(a528_0x43eae4(0x124))),User_1=__importDefault(require(a528_0x43eae4(0x129))),CreateQueueService=async _0x55cafc=>{const _0x532e2d=a528_0x43eae4,{color:_0x105ed8,name:_0x5cf7b0,companyId:_0x3ed547}=_0x55cafc,_0x484312=await Company_1[_0x532e2d(0xff)][_0x532e2d(0x10a)]({'where':{'id':_0x3ed547},'include':[{'model':Plan_1['default'],'as':_0x532e2d(0x10b)}]});if(_0x484312!==null){const _0x4601cc=await Queue_1[_0x532e2d(0xff)]['count']({'where':{'companyId':_0x3ed547}});if(_0x4601cc>=_0x484312[_0x532e2d(0x10b)]['queues'])throw new AppError_1['default'](_0x532e2d(0x111)+_0x4601cc);}const _0x41e618=Yup[_0x532e2d(0x11e)]()[_0x532e2d(0x102)]({'name':Yup[_0x532e2d(0x100)]()['min'](0x2,_0x532e2d(0x10c))[_0x532e2d(0x108)](_0x532e2d(0x10c))['test'](_0x532e2d(0x107),_0x532e2d(0x118),async _0x2e0fc1=>{const _0x271693=_0x532e2d;if(_0x2e0fc1){const _0x4b1b72=await Queue_1[_0x271693(0xff)][_0x271693(0x10a)]({'where':{'name':_0x2e0fc1,'companyId':_0x3ed547}});return!_0x4b1b72;}return![];}),'color':Yup['string']()[_0x532e2d(0x108)](_0x532e2d(0x10e))['test']('Check-color',_0x532e2d(0x10e),async _0x313afb=>{const _0x192b9=_0x532e2d;if(_0x313afb){const _0x5f5626=/^#[0-9a-f]{3,6}$/i;return _0x5f5626[_0x192b9(0x104)](_0x313afb);}return![];})[_0x532e2d(0x104)]('Check-color-exists',_0x532e2d(0x121),async _0x1f46fa=>{const _0x4a34c6=_0x532e2d;if(_0x1f46fa){const _0x4c2511=await Queue_1[_0x4a34c6(0xff)][_0x4a34c6(0x10a)]({'where':{'color':_0x1f46fa,'companyId':_0x3ed547}});return!_0x4c2511;}return![];})});try{await _0x41e618[_0x532e2d(0x114)]({'color':_0x105ed8,'name':_0x5cf7b0});}catch(_0x4829c4){throw new AppError_1[(_0x532e2d(0xff))](_0x4829c4[_0x532e2d(0x127)]);}const _0x4c3b2d=await Queue_1[_0x532e2d(0xff)][_0x532e2d(0x10d)](_0x55cafc,{'include':[{'model':Chatbot_1[_0x532e2d(0xff)],'as':_0x532e2d(0x101),'include':[{'model':User_1['default'],'as':_0x532e2d(0x120)}],'order':[[{'model':Chatbot_1['default'],'as':_0x532e2d(0x101)},'id',_0x532e2d(0x11a)]]}]});return _0x4c3b2d;};exports[a528_0x43eae4(0xff)]=CreateQueueService;