'use strict';const a461_0x358a42=a461_0x1808;(function(_0x257cae,_0x5f1431){const _0x1c4c1f=a461_0x1808,_0x2a23c2=_0x257cae();while(!![]){try{const _0x279252=-parseInt(_0x1c4c1f(0x107))/0x1*(parseInt(_0x1c4c1f(0x10c))/0x2)+-parseInt(_0x1c4c1f(0x11b))/0x3*(parseInt(_0x1c4c1f(0x12a))/0x4)+parseInt(_0x1c4c1f(0x129))/0x5*(-parseInt(_0x1c4c1f(0x119))/0x6)+parseInt(_0x1c4c1f(0x117))/0x7*(parseInt(_0x1c4c1f(0x12b))/0x8)+parseInt(_0x1c4c1f(0x116))/0x9*(parseInt(_0x1c4c1f(0x109))/0xa)+-parseInt(_0x1c4c1f(0x118))/0xb+-parseInt(_0x1c4c1f(0x113))/0xc*(-parseInt(_0x1c4c1f(0x10d))/0xd);if(_0x279252===_0x5f1431)break;else _0x2a23c2['push'](_0x2a23c2['shift']());}catch(_0x73676d){_0x2a23c2['push'](_0x2a23c2['shift']());}}}(a461_0x13cd,0x93825));function a461_0x1808(_0x4d5504,_0x435970){const _0x13cd98=a461_0x13cd();return a461_0x1808=function(_0x1808b5,_0x463725){_0x1808b5=_0x1808b5-0x101;let _0x14f752=_0x13cd98[_0x1808b5];return _0x14f752;},a461_0x1808(_0x4d5504,_0x435970);}var __createBinding=this&&this[a461_0x358a42(0x121)]||(Object[a461_0x358a42(0x12d)]?function(_0x1bc349,_0x12641c,_0x51d8c8,_0x1c4aed){const _0x3230e6=a461_0x358a42;if(_0x1c4aed===undefined)_0x1c4aed=_0x51d8c8;var _0xed2036=Object[_0x3230e6(0x102)](_0x12641c,_0x51d8c8);(!_0xed2036||(_0x3230e6(0x12c)in _0xed2036?!_0x12641c[_0x3230e6(0x10e)]:_0xed2036[_0x3230e6(0x106)]||_0xed2036[_0x3230e6(0x101)]))&&(_0xed2036={'enumerable':!![],'get':function(){return _0x12641c[_0x51d8c8];}}),Object[_0x3230e6(0x10a)](_0x1bc349,_0x1c4aed,_0xed2036);}:function(_0x62d98b,_0x49e145,_0x3d07b8,_0x5786ea){if(_0x5786ea===undefined)_0x5786ea=_0x3d07b8;_0x62d98b[_0x5786ea]=_0x49e145[_0x3d07b8];}),__setModuleDefault=this&&this[a461_0x358a42(0x11c)]||(Object[a461_0x358a42(0x12d)]?function(_0x2332c8,_0x3835a1){const _0x471c7c=a461_0x358a42;Object[_0x471c7c(0x10a)](_0x2332c8,_0x471c7c(0x10b),{'enumerable':!![],'value':_0x3835a1});}:function(_0x18e014,_0x10f0b0){const _0x16b89e=a461_0x358a42;_0x18e014[_0x16b89e(0x10b)]=_0x10f0b0;}),__importStar=this&&this['__importStar']||function(_0x331ba8){const _0x581b56=a461_0x358a42;if(_0x331ba8&&_0x331ba8['__esModule'])return _0x331ba8;var _0x1858ea={};if(_0x331ba8!=null){for(var _0x5ebdfc in _0x331ba8)if(_0x5ebdfc!==_0x581b56(0x10b)&&Object['prototype'][_0x581b56(0x104)][_0x581b56(0x120)](_0x331ba8,_0x5ebdfc))__createBinding(_0x1858ea,_0x331ba8,_0x5ebdfc);}return __setModuleDefault(_0x1858ea,_0x331ba8),_0x1858ea;},__importDefault=this&&this[a461_0x358a42(0x111)]||function(_0x11ae07){const _0x49b472=a461_0x358a42;return _0x11ae07&&_0x11ae07[_0x49b472(0x10e)]?_0x11ae07:{'default':_0x11ae07};};Object[a461_0x358a42(0x10a)](exports,a461_0x358a42(0x10e),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),Queue_1=__importDefault(require('../../models/Queue')),Company_1=__importDefault(require(a461_0x358a42(0x108))),Plan_1=__importDefault(require(a461_0x358a42(0x105))),Chatbot_1=__importDefault(require(a461_0x358a42(0x115))),CreateQueueService=async _0x13c140=>{const _0x2f20f8=a461_0x358a42,{color:_0x47435b,name:_0x505d0c,companyId:_0x1d4218}=_0x13c140,_0x12e1fe=await Company_1[_0x2f20f8(0x10b)]['findOne']({'where':{'id':_0x1d4218},'include':[{'model':Plan_1[_0x2f20f8(0x10b)],'as':_0x2f20f8(0x123)}]});if(_0x12e1fe!==null){const _0x4de347=await Queue_1[_0x2f20f8(0x10b)]['count']({'where':{'companyId':_0x1d4218}});if(_0x4de347>=_0x12e1fe[_0x2f20f8(0x123)][_0x2f20f8(0x11f)])throw new AppError_1[(_0x2f20f8(0x10b))]('Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20'+_0x4de347);}const _0x8dfec8=Yup[_0x2f20f8(0x10f)]()['shape']({'name':Yup[_0x2f20f8(0x125)]()[_0x2f20f8(0x112)](0x2,'ERR_QUEUE_INVALID_NAME')[_0x2f20f8(0x127)](_0x2f20f8(0x128))[_0x2f20f8(0x11d)](_0x2f20f8(0x122),'ERR_QUEUE_NAME_ALREADY_EXISTS',async _0xbd1c50=>{const _0x401a76=_0x2f20f8;if(_0xbd1c50){const _0x41f78e=await Queue_1['default'][_0x401a76(0x124)]({'where':{'name':_0xbd1c50,'companyId':_0x1d4218}});return!_0x41f78e;}return![];}),'color':Yup[_0x2f20f8(0x125)]()[_0x2f20f8(0x127)](_0x2f20f8(0x114))[_0x2f20f8(0x11d)](_0x2f20f8(0x11e),'ERR_QUEUE_INVALID_COLOR',async _0x2e7305=>{const _0x2ddf55=_0x2f20f8;if(_0x2e7305){const _0x317d5e=/^#[0-9a-f]{3,6}$/i;return _0x317d5e[_0x2ddf55(0x11d)](_0x2e7305);}return![];})[_0x2f20f8(0x11d)](_0x2f20f8(0x103),_0x2f20f8(0x11a),async _0x4a5fb8=>{const _0x468715=_0x2f20f8;if(_0x4a5fb8){const _0x52ba80=await Queue_1['default'][_0x468715(0x124)]({'where':{'color':_0x4a5fb8,'companyId':_0x1d4218}});return!_0x52ba80;}return![];})});try{await _0x8dfec8[_0x2f20f8(0x110)]({'color':_0x47435b,'name':_0x505d0c});}catch(_0x435174){throw new AppError_1['default'](_0x435174['message']);}const _0x4db20c=await Queue_1[_0x2f20f8(0x10b)][_0x2f20f8(0x12d)](_0x13c140,{'include':[{'model':Chatbot_1[_0x2f20f8(0x10b)],'as':_0x2f20f8(0x126),'order':[[{'model':Chatbot_1['default'],'as':'chatbots'},'id','asc']]}]});return _0x4db20c;};exports[a461_0x358a42(0x10b)]=CreateQueueService;function a461_0x13cd(){const _0x2e6a5b=['3086290bMcQDn','52EgYRrg','519328CETsGP','get','create','configurable','getOwnPropertyDescriptor','Check-color-exists','hasOwnProperty','../../models/Plan','writable','821ucoKgT','../../models/Company','30RtJmOk','defineProperty','default','866hrjDJN','624949Bgfkbz','__esModule','object','validate','__importDefault','min','456HfFzlt','ERR_QUEUE_INVALID_COLOR','../../models/Chatbot','2719152UDHELn','28Vqaxmn','5640404uWeWZP','6ZwkPmG','ERR_QUEUE_COLOR_ALREADY_EXISTS','208410dyMGGb','__setModuleDefault','test','Check-color','queues','call','__createBinding','Check-unique-name','plan','findOne','string','chatbots','required','ERR_QUEUE_INVALID_NAME'];a461_0x13cd=function(){return _0x2e6a5b;};return a461_0x13cd();}