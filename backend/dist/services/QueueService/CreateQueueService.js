'use strict';const a444_0x10bb68=a444_0xede3;(function(_0x421551,_0x29fe47){const _0x5de891=a444_0xede3,_0x26126b=_0x421551();while(!![]){try{const _0x344e53=parseInt(_0x5de891(0x180))/0x1+parseInt(_0x5de891(0x170))/0x2*(parseInt(_0x5de891(0x171))/0x3)+-parseInt(_0x5de891(0x164))/0x4*(-parseInt(_0x5de891(0x181))/0x5)+parseInt(_0x5de891(0x183))/0x6*(-parseInt(_0x5de891(0x15e))/0x7)+parseInt(_0x5de891(0x158))/0x8+parseInt(_0x5de891(0x17c))/0x9*(parseInt(_0x5de891(0x17e))/0xa)+-parseInt(_0x5de891(0x17f))/0xb*(parseInt(_0x5de891(0x175))/0xc);if(_0x344e53===_0x29fe47)break;else _0x26126b['push'](_0x26126b['shift']());}catch(_0x39ed33){_0x26126b['push'](_0x26126b['shift']());}}}(a444_0x3b75,0x7c9d2));function a444_0x3b75(){const _0x201247=['../../errors/AppError','asc','chatbots','count','1629PFmHgn','Check-color','16570WYOaXc','22sSxxzS','471936AwEutO','20jTQpGi','required','798pfqdHi','ERR_QUEUE_INVALID_NAME','plan','test','Check-color-exists','yup','message','configurable','3350784JgZXqt','ERR_QUEUE_NAME_ALREADY_EXISTS','getOwnPropertyDescriptor','__setModuleDefault','call','get','3556JlrVNF','string','shape','create','../../models/Queue','__importDefault','457056ARQblT','defineProperty','hasOwnProperty','writable','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','ERR_QUEUE_INVALID_COLOR','ERR_QUEUE_COLOR_ALREADY_EXISTS','findOne','__esModule','queues','min','Check-unique-name','358586VgYnyz','3gbZRUp','../../models/Company','../../models/Chatbot','__importStar','7494408eMqHtc','validate','default'];a444_0x3b75=function(){return _0x201247;};return a444_0x3b75();}var __createBinding=this&&this['__createBinding']||(Object[a444_0x10bb68(0x161)]?function(_0x14dd64,_0x5bc2e7,_0x156def,_0x4d30f7){const _0xbd2ea1=a444_0x10bb68;if(_0x4d30f7===undefined)_0x4d30f7=_0x156def;var _0x1f80f1=Object[_0xbd2ea1(0x15a)](_0x5bc2e7,_0x156def);(!_0x1f80f1||(_0xbd2ea1(0x15d)in _0x1f80f1?!_0x5bc2e7['__esModule']:_0x1f80f1[_0xbd2ea1(0x167)]||_0x1f80f1[_0xbd2ea1(0x157)]))&&(_0x1f80f1={'enumerable':!![],'get':function(){return _0x5bc2e7[_0x156def];}}),Object[_0xbd2ea1(0x165)](_0x14dd64,_0x4d30f7,_0x1f80f1);}:function(_0x4ccd0c,_0x297d1e,_0x4a6198,_0x3b0768){if(_0x3b0768===undefined)_0x3b0768=_0x4a6198;_0x4ccd0c[_0x3b0768]=_0x297d1e[_0x4a6198];}),__setModuleDefault=this&&this[a444_0x10bb68(0x15b)]||(Object['create']?function(_0x185ac8,_0xcc44b7){const _0x40d2ac=a444_0x10bb68;Object['defineProperty'](_0x185ac8,_0x40d2ac(0x177),{'enumerable':!![],'value':_0xcc44b7});}:function(_0x4c4efc,_0x459e4e){const _0xa8c5a3=a444_0x10bb68;_0x4c4efc[_0xa8c5a3(0x177)]=_0x459e4e;}),__importStar=this&&this[a444_0x10bb68(0x174)]||function(_0x1d9192){const _0x54a9a6=a444_0x10bb68;if(_0x1d9192&&_0x1d9192[_0x54a9a6(0x16c)])return _0x1d9192;var _0x20acc7={};if(_0x1d9192!=null){for(var _0xa92c2b in _0x1d9192)if(_0xa92c2b!==_0x54a9a6(0x177)&&Object['prototype'][_0x54a9a6(0x166)][_0x54a9a6(0x15c)](_0x1d9192,_0xa92c2b))__createBinding(_0x20acc7,_0x1d9192,_0xa92c2b);}return __setModuleDefault(_0x20acc7,_0x1d9192),_0x20acc7;},__importDefault=this&&this[a444_0x10bb68(0x163)]||function(_0x75a9e9){const _0x360ac4=a444_0x10bb68;return _0x75a9e9&&_0x75a9e9[_0x360ac4(0x16c)]?_0x75a9e9:{'default':_0x75a9e9};};Object[a444_0x10bb68(0x165)](exports,a444_0x10bb68(0x16c),{'value':!![]});function a444_0xede3(_0x1e5a68,_0x4275fe){const _0x3b752d=a444_0x3b75();return a444_0xede3=function(_0xede333,_0x275317){_0xede333=_0xede333-0x157;let _0x38a46e=_0x3b752d[_0xede333];return _0x38a46e;},a444_0xede3(_0x1e5a68,_0x4275fe);}const Yup=__importStar(require(a444_0x10bb68(0x188))),AppError_1=__importDefault(require(a444_0x10bb68(0x178))),Queue_1=__importDefault(require(a444_0x10bb68(0x162))),Company_1=__importDefault(require(a444_0x10bb68(0x172))),Plan_1=__importDefault(require('../../models/Plan')),Chatbot_1=__importDefault(require(a444_0x10bb68(0x173))),CreateQueueService=async _0x21cef5=>{const _0x242e4b=a444_0x10bb68,{color:_0x1979a2,name:_0x4fa1e4,companyId:_0x199588}=_0x21cef5,_0x1b8df7=await Company_1['default'][_0x242e4b(0x16b)]({'where':{'id':_0x199588},'include':[{'model':Plan_1['default'],'as':_0x242e4b(0x185)}]});if(_0x1b8df7!==null){const _0x251ac0=await Queue_1[_0x242e4b(0x177)][_0x242e4b(0x17b)]({'where':{'companyId':_0x199588}});if(_0x251ac0>=_0x1b8df7['plan'][_0x242e4b(0x16d)])throw new AppError_1['default'](_0x242e4b(0x168)+_0x251ac0);}const _0x3b53c4=Yup['object']()[_0x242e4b(0x160)]({'name':Yup[_0x242e4b(0x15f)]()[_0x242e4b(0x16e)](0x2,'ERR_QUEUE_INVALID_NAME')[_0x242e4b(0x182)](_0x242e4b(0x184))[_0x242e4b(0x186)](_0x242e4b(0x16f),_0x242e4b(0x159),async _0x5de1bc=>{const _0x31075d=_0x242e4b;if(_0x5de1bc){const _0x2f39c1=await Queue_1[_0x31075d(0x177)][_0x31075d(0x16b)]({'where':{'name':_0x5de1bc,'companyId':_0x199588}});return!_0x2f39c1;}return![];}),'color':Yup[_0x242e4b(0x15f)]()['required'](_0x242e4b(0x169))[_0x242e4b(0x186)](_0x242e4b(0x17d),_0x242e4b(0x169),async _0x1d5164=>{if(_0x1d5164){const _0x1faba9=/^#[0-9a-f]{3,6}$/i;return _0x1faba9['test'](_0x1d5164);}return![];})[_0x242e4b(0x186)](_0x242e4b(0x187),_0x242e4b(0x16a),async _0x4d58d1=>{const _0x5b0b32=_0x242e4b;if(_0x4d58d1){const _0x568df8=await Queue_1[_0x5b0b32(0x177)][_0x5b0b32(0x16b)]({'where':{'color':_0x4d58d1,'companyId':_0x199588}});return!_0x568df8;}return![];})});try{await _0x3b53c4[_0x242e4b(0x176)]({'color':_0x1979a2,'name':_0x4fa1e4});}catch(_0x4403e5){throw new AppError_1[(_0x242e4b(0x177))](_0x4403e5[_0x242e4b(0x189)]);}const _0x202fb7=await Queue_1[_0x242e4b(0x177)][_0x242e4b(0x161)](_0x21cef5,{'include':[{'model':Chatbot_1[_0x242e4b(0x177)],'as':_0x242e4b(0x17a),'order':[[{'model':Chatbot_1[_0x242e4b(0x177)],'as':_0x242e4b(0x17a)},'id',_0x242e4b(0x179)]]}]});return _0x202fb7;};exports[a444_0x10bb68(0x177)]=CreateQueueService;