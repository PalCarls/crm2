'use strict';const a538_0x1ce204=a538_0x94a7;function a538_0x79d7(){const _0x4c323=['Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','../../models/Chatbot','configurable','846RmCmic','chatbots','__setModuleDefault','2056CrxeRp','4252680kCPtVf','3btbRHt','ERR_QUEUE_NAME_ALREADY_EXISTS','../../models/Queue','3560172XpWAeH','shape','__createBinding','5279538oTfvjV','create','default','plan','get','171174UxfOtO','7ecvNIR','writable','test','call','../../models/User','ERR_QUEUE_INVALID_COLOR','../../errors/AppError','hasOwnProperty','required','yup','3GjjoJw','__importStar','ERR_QUEUE_INVALID_NAME','validate','__esModule','asc','defineProperty','object','1734385cONfrR','findOne','ERR_QUEUE_COLOR_ALREADY_EXISTS','queues','count','../../models/Plan','getOwnPropertyDescriptor','message','../../models/Company','string','902852FbGSJj'];a538_0x79d7=function(){return _0x4c323;};return a538_0x79d7();}function a538_0x94a7(_0x507a39,_0xd6d783){const _0x79d75b=a538_0x79d7();return a538_0x94a7=function(_0x94a7c,_0x499c8d){_0x94a7c=_0x94a7c-0x148;let _0x57fb5d=_0x79d75b[_0x94a7c];return _0x57fb5d;},a538_0x94a7(_0x507a39,_0xd6d783);}(function(_0x1bb5b0,_0x4b8550){const _0x131c6=a538_0x94a7,_0x33e0dd=_0x1bb5b0();while(!![]){try{const _0x54ff54=parseInt(_0x131c6(0x162))/0x1*(-parseInt(_0x131c6(0x16d))/0x2)+parseInt(_0x131c6(0x178))/0x3*(-parseInt(_0x131c6(0x159))/0x4)+parseInt(_0x131c6(0x14f))/0x5+parseInt(_0x131c6(0x165))/0x6*(parseInt(_0x131c6(0x16e))/0x7)+parseInt(_0x131c6(0x160))/0x8*(-parseInt(_0x131c6(0x15d))/0x9)+parseInt(_0x131c6(0x161))/0xa+-parseInt(_0x131c6(0x168))/0xb;if(_0x54ff54===_0x4b8550)break;else _0x33e0dd['push'](_0x33e0dd['shift']());}catch(_0x3c6b46){_0x33e0dd['push'](_0x33e0dd['shift']());}}}(a538_0x79d7,0x5c825));var __createBinding=this&&this[a538_0x1ce204(0x167)]||(Object[a538_0x1ce204(0x169)]?function(_0x37a177,_0x334cde,_0x586dc5,_0x38280e){const _0x2ac4a3=a538_0x1ce204;if(_0x38280e===undefined)_0x38280e=_0x586dc5;var _0x2c4812=Object[_0x2ac4a3(0x155)](_0x334cde,_0x586dc5);(!_0x2c4812||(_0x2ac4a3(0x16c)in _0x2c4812?!_0x334cde['__esModule']:_0x2c4812[_0x2ac4a3(0x16f)]||_0x2c4812[_0x2ac4a3(0x15c)]))&&(_0x2c4812={'enumerable':!![],'get':function(){return _0x334cde[_0x586dc5];}}),Object[_0x2ac4a3(0x14d)](_0x37a177,_0x38280e,_0x2c4812);}:function(_0x1a0a49,_0x35eef7,_0x7b0691,_0x48eb0b){if(_0x48eb0b===undefined)_0x48eb0b=_0x7b0691;_0x1a0a49[_0x48eb0b]=_0x35eef7[_0x7b0691];}),__setModuleDefault=this&&this[a538_0x1ce204(0x15f)]||(Object[a538_0x1ce204(0x169)]?function(_0x1fbcb6,_0x570489){const _0x2d2a66=a538_0x1ce204;Object['defineProperty'](_0x1fbcb6,_0x2d2a66(0x16a),{'enumerable':!![],'value':_0x570489});}:function(_0x3f2779,_0x5d03af){const _0x1e769b=a538_0x1ce204;_0x3f2779[_0x1e769b(0x16a)]=_0x5d03af;}),__importStar=this&&this[a538_0x1ce204(0x148)]||function(_0x1ca66d){const _0x38a090=a538_0x1ce204;if(_0x1ca66d&&_0x1ca66d[_0x38a090(0x14b)])return _0x1ca66d;var _0x5e15d4={};if(_0x1ca66d!=null){for(var _0x27c21b in _0x1ca66d)if(_0x27c21b!==_0x38a090(0x16a)&&Object['prototype'][_0x38a090(0x175)][_0x38a090(0x171)](_0x1ca66d,_0x27c21b))__createBinding(_0x5e15d4,_0x1ca66d,_0x27c21b);}return __setModuleDefault(_0x5e15d4,_0x1ca66d),_0x5e15d4;},__importDefault=this&&this['__importDefault']||function(_0x33963a){const _0x1dfcce=a538_0x1ce204;return _0x33963a&&_0x33963a[_0x1dfcce(0x14b)]?_0x33963a:{'default':_0x33963a};};Object['defineProperty'](exports,a538_0x1ce204(0x14b),{'value':!![]});const Yup=__importStar(require(a538_0x1ce204(0x177))),AppError_1=__importDefault(require(a538_0x1ce204(0x174))),Queue_1=__importDefault(require(a538_0x1ce204(0x164))),Company_1=__importDefault(require(a538_0x1ce204(0x157))),Plan_1=__importDefault(require(a538_0x1ce204(0x154))),Chatbot_1=__importDefault(require(a538_0x1ce204(0x15b))),User_1=__importDefault(require(a538_0x1ce204(0x172))),CreateQueueService=async _0x23e22=>{const _0x41f475=a538_0x1ce204,{color:_0x2030d9,name:_0x721c8,companyId:_0x24d3ef}=_0x23e22,_0x407b03=await Company_1[_0x41f475(0x16a)][_0x41f475(0x150)]({'where':{'id':_0x24d3ef},'include':[{'model':Plan_1['default'],'as':'plan'}]});if(_0x407b03!==null){const _0x313adf=await Queue_1[_0x41f475(0x16a)][_0x41f475(0x153)]({'where':{'companyId':_0x24d3ef}});if(_0x313adf>=_0x407b03[_0x41f475(0x16b)][_0x41f475(0x152)])throw new AppError_1[(_0x41f475(0x16a))](_0x41f475(0x15a)+_0x313adf);}const _0x544f2a=Yup[_0x41f475(0x14e)]()[_0x41f475(0x166)]({'name':Yup[_0x41f475(0x158)]()['min'](0x2,_0x41f475(0x149))[_0x41f475(0x176)](_0x41f475(0x149))[_0x41f475(0x170)]('Check-unique-name',_0x41f475(0x163),async _0x2369e8=>{const _0x1d6663=_0x41f475;if(_0x2369e8){const _0x925251=await Queue_1[_0x1d6663(0x16a)][_0x1d6663(0x150)]({'where':{'name':_0x2369e8,'companyId':_0x24d3ef}});return!_0x925251;}return![];}),'color':Yup[_0x41f475(0x158)]()[_0x41f475(0x176)](_0x41f475(0x173))[_0x41f475(0x170)]('Check-color',_0x41f475(0x173),async _0x142dfd=>{const _0x495576=_0x41f475;if(_0x142dfd){const _0x1a45f7=/^#[0-9a-f]{3,6}$/i;return _0x1a45f7[_0x495576(0x170)](_0x142dfd);}return![];})[_0x41f475(0x170)]('Check-color-exists',_0x41f475(0x151),async _0x2032bf=>{if(_0x2032bf){const _0x1bf5ff=await Queue_1['default']['findOne']({'where':{'color':_0x2032bf,'companyId':_0x24d3ef}});return!_0x1bf5ff;}return![];})});try{await _0x544f2a[_0x41f475(0x14a)]({'color':_0x2030d9,'name':_0x721c8});}catch(_0x15395e){throw new AppError_1[(_0x41f475(0x16a))](_0x15395e[_0x41f475(0x156)]);}const _0x5c87af=await Queue_1[_0x41f475(0x16a)]['create'](_0x23e22,{'include':[{'model':Chatbot_1[_0x41f475(0x16a)],'as':_0x41f475(0x15e),'include':[{'model':User_1[_0x41f475(0x16a)],'as':'user'}],'order':[[{'model':Chatbot_1[_0x41f475(0x16a)],'as':_0x41f475(0x15e)},'id',_0x41f475(0x14c)]]}]});return _0x5c87af;};exports[a538_0x1ce204(0x16a)]=CreateQueueService;