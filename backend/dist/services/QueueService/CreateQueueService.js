<<<<<<< HEAD
'use strict';const a528_0x267b4f=a528_0x152c;(function(_0x342d1e,_0x20a350){const _0xf8984b=a528_0x152c,_0x5432d8=_0x342d1e();while(!![]){try{const _0xb9beee=parseInt(_0xf8984b(0x91))/0x1*(parseInt(_0xf8984b(0x84))/0x2)+-parseInt(_0xf8984b(0x8a))/0x3*(-parseInt(_0xf8984b(0x7c))/0x4)+parseInt(_0xf8984b(0xa4))/0x5+parseInt(_0xf8984b(0xab))/0x6*(-parseInt(_0xf8984b(0xa5))/0x7)+parseInt(_0xf8984b(0x83))/0x8+-parseInt(_0xf8984b(0x90))/0x9*(parseInt(_0xf8984b(0x86))/0xa)+-parseInt(_0xf8984b(0x8d))/0xb;if(_0xb9beee===_0x20a350)break;else _0x5432d8['push'](_0x5432d8['shift']());}catch(_0x311804){_0x5432d8['push'](_0x5432d8['shift']());}}}(a528_0x3c6b,0x2e0cd));function a528_0x3c6b(){const _0x29b974=['Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','shape','1422xlRfRI','12RoDCjw','__importStar','get','test','ERR_QUEUE_NAME_ALREADY_EXISTS','create','__esModule','1326824rjFmCN','157688qIldWW','../../errors/AppError','210fdvLJE','string','__setModuleDefault','writable','351618RkIPIl','../../models/Plan','Check-unique-name','1464749cLfaMY','../../models/Company','user','153522NUCeEv','3yUJiMV','../../models/User','ERR_QUEUE_COLOR_ALREADY_EXISTS','prototype','ERR_QUEUE_INVALID_COLOR','__importDefault','getOwnPropertyDescriptor','plan','default','__createBinding','defineProperty','required','ERR_QUEUE_INVALID_NAME','count','chatbots','min','queues','findOne','../../models/Chatbot','1422880UbgCQT','10591QxCByV','object','call','Check-color'];a528_0x3c6b=function(){return _0x29b974;};return a528_0x3c6b();}var __createBinding=this&&this[a528_0x267b4f(0x9a)]||(Object[a528_0x267b4f(0x81)]?function(_0x5207f6,_0x4a4862,_0x85b73e,_0x582847){const _0xcb65e2=a528_0x267b4f;if(_0x582847===undefined)_0x582847=_0x85b73e;var _0x563919=Object[_0xcb65e2(0x97)](_0x4a4862,_0x85b73e);(!_0x563919||(_0xcb65e2(0x7e)in _0x563919?!_0x4a4862[_0xcb65e2(0x82)]:_0x563919[_0xcb65e2(0x89)]||_0x563919['configurable']))&&(_0x563919={'enumerable':!![],'get':function(){return _0x4a4862[_0x85b73e];}}),Object['defineProperty'](_0x5207f6,_0x582847,_0x563919);}:function(_0x243fb4,_0x1bdc5b,_0x3bd3bf,_0x233213){if(_0x233213===undefined)_0x233213=_0x3bd3bf;_0x243fb4[_0x233213]=_0x1bdc5b[_0x3bd3bf];}),__setModuleDefault=this&&this[a528_0x267b4f(0x88)]||(Object['create']?function(_0x229bcc,_0x4c2f49){const _0x2f0028=a528_0x267b4f;Object[_0x2f0028(0x9b)](_0x229bcc,'default',{'enumerable':!![],'value':_0x4c2f49});}:function(_0x754ea6,_0x3d6cd2){const _0x1302ca=a528_0x267b4f;_0x754ea6[_0x1302ca(0x99)]=_0x3d6cd2;}),__importStar=this&&this[a528_0x267b4f(0x7d)]||function(_0x327050){const _0x36e21b=a528_0x267b4f;if(_0x327050&&_0x327050['__esModule'])return _0x327050;var _0x38610d={};if(_0x327050!=null){for(var _0x3bc5f3 in _0x327050)if(_0x3bc5f3!==_0x36e21b(0x99)&&Object[_0x36e21b(0x94)]['hasOwnProperty'][_0x36e21b(0xa7)](_0x327050,_0x3bc5f3))__createBinding(_0x38610d,_0x327050,_0x3bc5f3);}return __setModuleDefault(_0x38610d,_0x327050),_0x38610d;},__importDefault=this&&this[a528_0x267b4f(0x96)]||function(_0x4cc504){const _0x315748=a528_0x267b4f;return _0x4cc504&&_0x4cc504[_0x315748(0x82)]?_0x4cc504:{'default':_0x4cc504};};Object[a528_0x267b4f(0x9b)](exports,a528_0x267b4f(0x82),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a528_0x267b4f(0x85))),Queue_1=__importDefault(require('../../models/Queue')),Company_1=__importDefault(require(a528_0x267b4f(0x8e))),Plan_1=__importDefault(require(a528_0x267b4f(0x8b))),Chatbot_1=__importDefault(require(a528_0x267b4f(0xa3))),User_1=__importDefault(require(a528_0x267b4f(0x92))),CreateQueueService=async _0x376a22=>{const _0x3b1b74=a528_0x267b4f,{color:_0xd9c7d,name:_0x20ba64,companyId:_0x530451}=_0x376a22,_0xa3810d=await Company_1[_0x3b1b74(0x99)][_0x3b1b74(0xa2)]({'where':{'id':_0x530451},'include':[{'model':Plan_1[_0x3b1b74(0x99)],'as':_0x3b1b74(0x98)}]});if(_0xa3810d!==null){const _0x1d0ab4=await Queue_1[_0x3b1b74(0x99)][_0x3b1b74(0x9e)]({'where':{'companyId':_0x530451}});if(_0x1d0ab4>=_0xa3810d[_0x3b1b74(0x98)][_0x3b1b74(0xa1)])throw new AppError_1[(_0x3b1b74(0x99))](_0x3b1b74(0xa9)+_0x1d0ab4);}const _0x5abf11=Yup[_0x3b1b74(0xa6)]()[_0x3b1b74(0xaa)]({'name':Yup[_0x3b1b74(0x87)]()[_0x3b1b74(0xa0)](0x2,_0x3b1b74(0x9d))[_0x3b1b74(0x9c)]('ERR_QUEUE_INVALID_NAME')[_0x3b1b74(0x7f)](_0x3b1b74(0x8c),_0x3b1b74(0x80),async _0x3ec2d9=>{const _0x329826=_0x3b1b74;if(_0x3ec2d9){const _0x2c5889=await Queue_1[_0x329826(0x99)]['findOne']({'where':{'name':_0x3ec2d9,'companyId':_0x530451}});return!_0x2c5889;}return![];}),'color':Yup['string']()[_0x3b1b74(0x9c)](_0x3b1b74(0x95))[_0x3b1b74(0x7f)](_0x3b1b74(0xa8),_0x3b1b74(0x95),async _0x4fca3e=>{const _0x22d645=_0x3b1b74;if(_0x4fca3e){const _0x40233e=/^#[0-9a-f]{3,6}$/i;return _0x40233e[_0x22d645(0x7f)](_0x4fca3e);}return![];})[_0x3b1b74(0x7f)]('Check-color-exists',_0x3b1b74(0x93),async _0x3606d5=>{const _0x45e81b=_0x3b1b74;if(_0x3606d5){const _0x299065=await Queue_1['default'][_0x45e81b(0xa2)]({'where':{'color':_0x3606d5,'companyId':_0x530451}});return!_0x299065;}return![];})});try{await _0x5abf11['validate']({'color':_0xd9c7d,'name':_0x20ba64});}catch(_0x56a419){throw new AppError_1[(_0x3b1b74(0x99))](_0x56a419['message']);}const _0x184923=await Queue_1['default']['create'](_0x376a22,{'include':[{'model':Chatbot_1[_0x3b1b74(0x99)],'as':_0x3b1b74(0x9f),'include':[{'model':User_1['default'],'as':_0x3b1b74(0x8f)}],'order':[[{'model':Chatbot_1[_0x3b1b74(0x99)],'as':_0x3b1b74(0x9f)},'id','asc']]}]});return _0x184923;};function a528_0x152c(_0x2ac443,_0x69601){const _0x3c6b8f=a528_0x3c6b();return a528_0x152c=function(_0x152c69,_0x6c2312){_0x152c69=_0x152c69-0x7c;let _0x594e37=_0x3c6b8f[_0x152c69];return _0x594e37;},a528_0x152c(_0x2ac443,_0x69601);}exports['default']=CreateQueueService;
=======
'use strict';const a528_0x43eae4=a528_0x4ca0;(function(_0x25bab2,_0xf28599){const _0x4ee456=a528_0x4ca0,_0x324960=_0x25bab2();while(!![]){try{const _0x2093d1=parseInt(_0x4ee456(0x122))/0x1+-parseInt(_0x4ee456(0x105))/0x2*(parseInt(_0x4ee456(0x109))/0x3)+parseInt(_0x4ee456(0x11c))/0x4*(parseInt(_0x4ee456(0x112))/0x5)+-parseInt(_0x4ee456(0x10f))/0x6+-parseInt(_0x4ee456(0x110))/0x7+parseInt(_0x4ee456(0x115))/0x8*(-parseInt(_0x4ee456(0x123))/0x9)+parseInt(_0x4ee456(0x11d))/0xa;if(_0x2093d1===_0xf28599)break;else _0x324960['push'](_0x324960['shift']());}catch(_0x69b958){_0x324960['push'](_0x324960['shift']());}}}(a528_0x3654,0x82775));var __createBinding=this&&this[a528_0x43eae4(0x126)]||(Object[a528_0x43eae4(0x10d)]?function(_0x4ceb6c,_0x45223e,_0x435283,_0x212433){const _0x27084a=a528_0x43eae4;if(_0x212433===undefined)_0x212433=_0x435283;var _0x49d73d=Object[_0x27084a(0x106)](_0x45223e,_0x435283);(!_0x49d73d||('get'in _0x49d73d?!_0x45223e['__esModule']:_0x49d73d[_0x27084a(0x128)]||_0x49d73d[_0x27084a(0x125)]))&&(_0x49d73d={'enumerable':!![],'get':function(){return _0x45223e[_0x435283];}}),Object[_0x27084a(0xfc)](_0x4ceb6c,_0x212433,_0x49d73d);}:function(_0x316100,_0x214781,_0x238e7b,_0x493a73){if(_0x493a73===undefined)_0x493a73=_0x238e7b;_0x316100[_0x493a73]=_0x214781[_0x238e7b];}),__setModuleDefault=this&&this[a528_0x43eae4(0x11b)]||(Object[a528_0x43eae4(0x10d)]?function(_0x39b730,_0x1a83f9){const _0x313c13=a528_0x43eae4;Object[_0x313c13(0xfc)](_0x39b730,'default',{'enumerable':!![],'value':_0x1a83f9});}:function(_0x498876,_0x1e52e5){const _0x90f8b5=a528_0x43eae4;_0x498876[_0x90f8b5(0xff)]=_0x1e52e5;}),__importStar=this&&this[a528_0x43eae4(0x11f)]||function(_0x4891b4){const _0x5e234a=a528_0x43eae4;if(_0x4891b4&&_0x4891b4[_0x5e234a(0x103)])return _0x4891b4;var _0xbb230c={};if(_0x4891b4!=null){for(var _0x3f9e30 in _0x4891b4)if(_0x3f9e30!==_0x5e234a(0xff)&&Object['prototype'][_0x5e234a(0xfd)]['call'](_0x4891b4,_0x3f9e30))__createBinding(_0xbb230c,_0x4891b4,_0x3f9e30);}return __setModuleDefault(_0xbb230c,_0x4891b4),_0xbb230c;},__importDefault=this&&this[a528_0x43eae4(0x119)]||function(_0x29c62a){const _0x1cbe7c=a528_0x43eae4;return _0x29c62a&&_0x29c62a[_0x1cbe7c(0x103)]?_0x29c62a:{'default':_0x29c62a};};Object[a528_0x43eae4(0xfc)](exports,'__esModule',{'value':!![]});function a528_0x4ca0(_0x379f76,_0x3a9fa2){const _0x3654ea=a528_0x3654();return a528_0x4ca0=function(_0x4ca0c4,_0x48ef9c){_0x4ca0c4=_0x4ca0c4-0xfc;let _0x9e5cb4=_0x3654ea[_0x4ca0c4];return _0x9e5cb4;},a528_0x4ca0(_0x379f76,_0x3a9fa2);}function a528_0x3654(){const _0x4e050f=['asc','__setModuleDefault','144004TqtrfI','665990wHJTyy','object','__importStar','user','ERR_QUEUE_COLOR_ALREADY_EXISTS','896720ytzbcE','549NWJUkJ','../../models/Chatbot','configurable','__createBinding','message','writable','../../models/User','defineProperty','hasOwnProperty','../../models/Company','default','string','chatbots','shape','__esModule','test','2PVYALr','getOwnPropertyDescriptor','Check-unique-name','required','474258rdxCmJ','findOne','plan','ERR_QUEUE_INVALID_NAME','create','ERR_QUEUE_INVALID_COLOR','2047428kKXYGA','3637984QXfCuq','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','135yNSOek','../../models/Queue','validate','50088AbeQEK','yup','../../errors/AppError','ERR_QUEUE_NAME_ALREADY_EXISTS','__importDefault'];a528_0x3654=function(){return _0x4e050f;};return a528_0x3654();}const Yup=__importStar(require(a528_0x43eae4(0x116))),AppError_1=__importDefault(require(a528_0x43eae4(0x117))),Queue_1=__importDefault(require(a528_0x43eae4(0x113))),Company_1=__importDefault(require(a528_0x43eae4(0xfe))),Plan_1=__importDefault(require('../../models/Plan')),Chatbot_1=__importDefault(require(a528_0x43eae4(0x124))),User_1=__importDefault(require(a528_0x43eae4(0x129))),CreateQueueService=async _0x55cafc=>{const _0x532e2d=a528_0x43eae4,{color:_0x105ed8,name:_0x5cf7b0,companyId:_0x3ed547}=_0x55cafc,_0x484312=await Company_1[_0x532e2d(0xff)][_0x532e2d(0x10a)]({'where':{'id':_0x3ed547},'include':[{'model':Plan_1['default'],'as':_0x532e2d(0x10b)}]});if(_0x484312!==null){const _0x4601cc=await Queue_1[_0x532e2d(0xff)]['count']({'where':{'companyId':_0x3ed547}});if(_0x4601cc>=_0x484312[_0x532e2d(0x10b)]['queues'])throw new AppError_1['default'](_0x532e2d(0x111)+_0x4601cc);}const _0x41e618=Yup[_0x532e2d(0x11e)]()[_0x532e2d(0x102)]({'name':Yup[_0x532e2d(0x100)]()['min'](0x2,_0x532e2d(0x10c))[_0x532e2d(0x108)](_0x532e2d(0x10c))['test'](_0x532e2d(0x107),_0x532e2d(0x118),async _0x2e0fc1=>{const _0x271693=_0x532e2d;if(_0x2e0fc1){const _0x4b1b72=await Queue_1[_0x271693(0xff)][_0x271693(0x10a)]({'where':{'name':_0x2e0fc1,'companyId':_0x3ed547}});return!_0x4b1b72;}return![];}),'color':Yup['string']()[_0x532e2d(0x108)](_0x532e2d(0x10e))['test']('Check-color',_0x532e2d(0x10e),async _0x313afb=>{const _0x192b9=_0x532e2d;if(_0x313afb){const _0x5f5626=/^#[0-9a-f]{3,6}$/i;return _0x5f5626[_0x192b9(0x104)](_0x313afb);}return![];})[_0x532e2d(0x104)]('Check-color-exists',_0x532e2d(0x121),async _0x1f46fa=>{const _0x4a34c6=_0x532e2d;if(_0x1f46fa){const _0x4c2511=await Queue_1[_0x4a34c6(0xff)][_0x4a34c6(0x10a)]({'where':{'color':_0x1f46fa,'companyId':_0x3ed547}});return!_0x4c2511;}return![];})});try{await _0x41e618[_0x532e2d(0x114)]({'color':_0x105ed8,'name':_0x5cf7b0});}catch(_0x4829c4){throw new AppError_1[(_0x532e2d(0xff))](_0x4829c4[_0x532e2d(0x127)]);}const _0x4c3b2d=await Queue_1[_0x532e2d(0xff)][_0x532e2d(0x10d)](_0x55cafc,{'include':[{'model':Chatbot_1[_0x532e2d(0xff)],'as':_0x532e2d(0x101),'include':[{'model':User_1['default'],'as':_0x532e2d(0x120)}],'order':[[{'model':Chatbot_1['default'],'as':_0x532e2d(0x101)},'id',_0x532e2d(0x11a)]]}]});return _0x4c3b2d;};exports[a528_0x43eae4(0xff)]=CreateQueueService;
>>>>>>> ab722bfbcf394d74dd0b99a984c0dcf6ffbcff7f
