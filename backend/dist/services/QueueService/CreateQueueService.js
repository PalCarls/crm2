'use strict';const a493_0x585123=a493_0x20e2;(function(_0x135105,_0x3ba239){const _0x45b044=a493_0x20e2,_0x2f553e=_0x135105();while(!![]){try{const _0xc55df4=-parseInt(_0x45b044(0xd0))/0x1+parseInt(_0x45b044(0xb1))/0x2*(-parseInt(_0x45b044(0xcc))/0x3)+parseInt(_0x45b044(0xd8))/0x4*(-parseInt(_0x45b044(0xda))/0x5)+-parseInt(_0x45b044(0xae))/0x6+-parseInt(_0x45b044(0xc6))/0x7*(-parseInt(_0x45b044(0xbb))/0x8)+parseInt(_0x45b044(0xd7))/0x9+parseInt(_0x45b044(0xb4))/0xa;if(_0xc55df4===_0x3ba239)break;else _0x2f553e['push'](_0x2f553e['shift']());}catch(_0x4626ab){_0x2f553e['push'](_0x2f553e['shift']());}}}(a493_0x2042,0xd83d8));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x4ef096,_0x459eea,_0x1e2503,_0x5740f9){const _0x2504dc=a493_0x20e2;if(_0x5740f9===undefined)_0x5740f9=_0x1e2503;var _0x583766=Object[_0x2504dc(0xc5)](_0x459eea,_0x1e2503);(!_0x583766||('get'in _0x583766?!_0x459eea[_0x2504dc(0xb2)]:_0x583766[_0x2504dc(0xd2)]||_0x583766[_0x2504dc(0xc9)]))&&(_0x583766={'enumerable':!![],'get':function(){return _0x459eea[_0x1e2503];}}),Object[_0x2504dc(0xbc)](_0x4ef096,_0x5740f9,_0x583766);}:function(_0x2e8da8,_0x53e198,_0x1f7e5a,_0x48796d){if(_0x48796d===undefined)_0x48796d=_0x1f7e5a;_0x2e8da8[_0x48796d]=_0x53e198[_0x1f7e5a];}),__setModuleDefault=this&&this[a493_0x585123(0xc2)]||(Object['create']?function(_0x464855,_0x276101){const _0x26e066=a493_0x585123;Object[_0x26e066(0xbc)](_0x464855,_0x26e066(0xc7),{'enumerable':!![],'value':_0x276101});}:function(_0x1bfa38,_0xc3fd40){const _0x207ad4=a493_0x585123;_0x1bfa38[_0x207ad4(0xc7)]=_0xc3fd40;}),__importStar=this&&this[a493_0x585123(0xcd)]||function(_0x1228c1){const _0x360902=a493_0x585123;if(_0x1228c1&&_0x1228c1[_0x360902(0xb2)])return _0x1228c1;var _0x1e898d={};if(_0x1228c1!=null){for(var _0x2329b8 in _0x1228c1)if(_0x2329b8!==_0x360902(0xc7)&&Object['prototype']['hasOwnProperty'][_0x360902(0xc8)](_0x1228c1,_0x2329b8))__createBinding(_0x1e898d,_0x1228c1,_0x2329b8);}return __setModuleDefault(_0x1e898d,_0x1228c1),_0x1e898d;},__importDefault=this&&this[a493_0x585123(0xb9)]||function(_0xbc4641){const _0x6a9c38=a493_0x585123;return _0xbc4641&&_0xbc4641[_0x6a9c38(0xb2)]?_0xbc4641:{'default':_0xbc4641};};function a493_0x20e2(_0x4fff9b,_0xe0847d){const _0x204255=a493_0x2042();return a493_0x20e2=function(_0x20e29c,_0x5c4cce){_0x20e29c=_0x20e29c-0xae;let _0x390077=_0x204255[_0x20e29c];return _0x390077;},a493_0x20e2(_0x4fff9b,_0xe0847d);}function a493_0x2042(){const _0x56d6ec=['../../models/Plan','min','../../models/Chatbot','validate','shape','__setModuleDefault','yup','test','getOwnPropertyDescriptor','63sAzvWI','default','call','configurable','ERR_QUEUE_INVALID_NAME','ERR_QUEUE_INVALID_COLOR','3NBLApC','__importStar','string','Check-unique-name','112772RbSqgz','chatbots','writable','object','queues','../../models/Company','findOne','3039048PEXZkw','84MkdOUf','count','277930maOXWi','ERR_QUEUE_COLOR_ALREADY_EXISTS','2234574QxhFKk','required','Check-color-exists','2010726FmbEoA','__esModule','plan','14945680MaBXuW','asc','create','ERR_QUEUE_NAME_ALREADY_EXISTS','../../errors/AppError','__importDefault','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','1521200FxRoNo','defineProperty'];a493_0x2042=function(){return _0x56d6ec;};return a493_0x2042();}Object[a493_0x585123(0xbc)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a493_0x585123(0xc3))),AppError_1=__importDefault(require(a493_0x585123(0xb8))),Queue_1=__importDefault(require('../../models/Queue')),Company_1=__importDefault(require(a493_0x585123(0xd5))),Plan_1=__importDefault(require(a493_0x585123(0xbd))),Chatbot_1=__importDefault(require(a493_0x585123(0xbf))),CreateQueueService=async _0x27c224=>{const _0x26d93c=a493_0x585123,{color:_0x5d817,name:_0x2256b8,companyId:_0x491820,ativarRoteador:_0x2dd47e,tempoRoteador:_0x52ebd4}=_0x27c224,_0x14cd0d=await Company_1['default'][_0x26d93c(0xd6)]({'where':{'id':_0x491820},'include':[{'model':Plan_1[_0x26d93c(0xc7)],'as':'plan'}]});if(_0x14cd0d!==null){const _0x1b8663=await Queue_1['default'][_0x26d93c(0xd9)]({'where':{'companyId':_0x491820}});if(_0x1b8663>=_0x14cd0d[_0x26d93c(0xb3)][_0x26d93c(0xd4)])throw new AppError_1[(_0x26d93c(0xc7))](_0x26d93c(0xba)+_0x1b8663);}const _0x53b8e3=Yup[_0x26d93c(0xd3)]()[_0x26d93c(0xc1)]({'name':Yup[_0x26d93c(0xce)]()[_0x26d93c(0xbe)](0x2,'ERR_QUEUE_INVALID_NAME')['required'](_0x26d93c(0xca))[_0x26d93c(0xc4)](_0x26d93c(0xcf),_0x26d93c(0xb7),async _0x7957cd=>{const _0x229988=_0x26d93c;if(_0x7957cd){const _0xc62fa8=await Queue_1['default'][_0x229988(0xd6)]({'where':{'name':_0x7957cd,'companyId':_0x491820}});return!_0xc62fa8;}return![];}),'color':Yup[_0x26d93c(0xce)]()[_0x26d93c(0xaf)]('ERR_QUEUE_INVALID_COLOR')[_0x26d93c(0xc4)]('Check-color',_0x26d93c(0xcb),async _0x2c91fa=>{const _0x478380=_0x26d93c;if(_0x2c91fa){const _0x460405=/^#[0-9a-f]{3,6}$/i;return _0x460405[_0x478380(0xc4)](_0x2c91fa);}return![];})['test'](_0x26d93c(0xb0),_0x26d93c(0xdb),async _0x3eb176=>{const _0x58f488=_0x26d93c;if(_0x3eb176){const _0x5208fe=await Queue_1[_0x58f488(0xc7)][_0x58f488(0xd6)]({'where':{'color':_0x3eb176,'companyId':_0x491820}});return!_0x5208fe;}return![];})});try{await _0x53b8e3[_0x26d93c(0xc0)]({'color':_0x5d817,'name':_0x2256b8});}catch(_0x47392f){throw new AppError_1[(_0x26d93c(0xc7))](_0x47392f['message']);}const _0x1b1cf0=await Queue_1[_0x26d93c(0xc7)][_0x26d93c(0xb6)](_0x27c224,{'include':[{'model':Chatbot_1[_0x26d93c(0xc7)],'as':'chatbots','order':[[{'model':Chatbot_1[_0x26d93c(0xc7)],'as':_0x26d93c(0xd1)},'id',_0x26d93c(0xb5)]]}]});return _0x1b1cf0;};exports[a493_0x585123(0xc7)]=CreateQueueService;