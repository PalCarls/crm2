'use strict';const a448_0x1c2d1a=a448_0x1acf;(function(_0x3da753,_0x2f8b57){const _0x5c0a5d=a448_0x1acf,_0x5b0abf=_0x3da753();while(!![]){try{const _0x3267f1=-parseInt(_0x5c0a5d(0x1ad))/0x1*(-parseInt(_0x5c0a5d(0x1af))/0x2)+-parseInt(_0x5c0a5d(0x1d7))/0x3+-parseInt(_0x5c0a5d(0x1b7))/0x4*(-parseInt(_0x5c0a5d(0x1d3))/0x5)+-parseInt(_0x5c0a5d(0x1b9))/0x6+parseInt(_0x5c0a5d(0x1a8))/0x7*(parseInt(_0x5c0a5d(0x1d4))/0x8)+parseInt(_0x5c0a5d(0x1a6))/0x9*(-parseInt(_0x5c0a5d(0x1bc))/0xa)+-parseInt(_0x5c0a5d(0x1c8))/0xb*(parseInt(_0x5c0a5d(0x1d1))/0xc);if(_0x3267f1===_0x2f8b57)break;else _0x5b0abf['push'](_0x5b0abf['shift']());}catch(_0x1ac072){_0x5b0abf['push'](_0x5b0abf['shift']());}}}(a448_0x13a2,0xadf70));function a448_0x1acf(_0x3bf799,_0x5b9add){const _0x13a2f0=a448_0x13a2();return a448_0x1acf=function(_0x1acf40,_0x417e3e){_0x1acf40=_0x1acf40-0x1a3;let _0x103cb8=_0x13a2f0[_0x1acf40];return _0x103cb8;},a448_0x1acf(_0x3bf799,_0x5b9add);}var __createBinding=this&&this[a448_0x1c2d1a(0x1c9)]||(Object[a448_0x1c2d1a(0x1c6)]?function(_0x2a5f35,_0x468fba,_0x5e43b1,_0x45cda4){const _0x2f1da1=a448_0x1c2d1a;if(_0x45cda4===undefined)_0x45cda4=_0x5e43b1;var _0x1836e7=Object[_0x2f1da1(0x1b5)](_0x468fba,_0x5e43b1);(!_0x1836e7||(_0x2f1da1(0x1d5)in _0x1836e7?!_0x468fba['__esModule']:_0x1836e7[_0x2f1da1(0x1d8)]||_0x1836e7['configurable']))&&(_0x1836e7={'enumerable':!![],'get':function(){return _0x468fba[_0x5e43b1];}}),Object['defineProperty'](_0x2a5f35,_0x45cda4,_0x1836e7);}:function(_0x13036f,_0x1343d1,_0x217f36,_0x3f354a){if(_0x3f354a===undefined)_0x3f354a=_0x217f36;_0x13036f[_0x3f354a]=_0x1343d1[_0x217f36];}),__setModuleDefault=this&&this[a448_0x1c2d1a(0x1ce)]||(Object[a448_0x1c2d1a(0x1c6)]?function(_0x53f054,_0x4c9f43){const _0x2eb92d=a448_0x1c2d1a;Object[_0x2eb92d(0x1bd)](_0x53f054,_0x2eb92d(0x1cb),{'enumerable':!![],'value':_0x4c9f43});}:function(_0x2a5bc3,_0x22c7a7){const _0x1c1e34=a448_0x1c2d1a;_0x2a5bc3[_0x1c1e34(0x1cb)]=_0x22c7a7;}),__importStar=this&&this[a448_0x1c2d1a(0x1ba)]||function(_0x494ef0){const _0x346be9=a448_0x1c2d1a;if(_0x494ef0&&_0x494ef0[_0x346be9(0x1c4)])return _0x494ef0;var _0x471771={};if(_0x494ef0!=null){for(var _0x5b255d in _0x494ef0)if(_0x5b255d!=='default'&&Object['prototype']['hasOwnProperty'][_0x346be9(0x1a3)](_0x494ef0,_0x5b255d))__createBinding(_0x471771,_0x494ef0,_0x5b255d);}return __setModuleDefault(_0x471771,_0x494ef0),_0x471771;},__importDefault=this&&this[a448_0x1c2d1a(0x1b4)]||function(_0xfdaeb8){const _0x23162b=a448_0x1c2d1a;return _0xfdaeb8&&_0xfdaeb8[_0x23162b(0x1c4)]?_0xfdaeb8:{'default':_0xfdaeb8};};Object[a448_0x1c2d1a(0x1bd)](exports,a448_0x1c2d1a(0x1c4),{'value':!![]});const sequelize_1=require(a448_0x1c2d1a(0x1b1)),Yup=__importStar(require(a448_0x1c2d1a(0x1d0))),AppError_1=__importDefault(require(a448_0x1c2d1a(0x1b3))),Chatbot_1=__importDefault(require(a448_0x1c2d1a(0x1ca))),Queue_1=__importDefault(require(a448_0x1c2d1a(0x1a7))),ShowQueueService_1=__importDefault(require(a448_0x1c2d1a(0x1be))),UpdateQueueService=async(_0x3eff86,_0x27d1cd,_0x2a5e3b)=>{const _0x55f8fb=a448_0x1c2d1a,{color:_0x59dfd3,name:_0x30a198,chatbots:_0x325e75}=_0x27d1cd,_0x17949f=Yup[_0x55f8fb(0x1c3)]()[_0x55f8fb(0x1c1)]({'name':Yup[_0x55f8fb(0x1c5)]()[_0x55f8fb(0x1cd)](0x2,_0x55f8fb(0x1b8))[_0x55f8fb(0x1a9)](_0x55f8fb(0x1ae),_0x55f8fb(0x1a4),async _0x5a6a30=>{const _0x417641=_0x55f8fb;if(_0x5a6a30){const _0x30bfa2=await Queue_1[_0x417641(0x1cb)]['findOne']({'where':{'name':_0x5a6a30,'id':{[sequelize_1['Op']['ne']]:_0x3eff86},'companyId':_0x2a5e3b}});return!_0x30bfa2;}return!![];}),'color':Yup[_0x55f8fb(0x1c5)]()[_0x55f8fb(0x1bb)](_0x55f8fb(0x1a5))[_0x55f8fb(0x1a9)]('Check-color',_0x55f8fb(0x1a5),async _0xc1dd90=>{if(_0xc1dd90){const _0x3b02a0=/^#[0-9a-f]{3,6}$/i;return _0x3b02a0['test'](_0xc1dd90);}return!![];})['test']('Check-color-exists','ERR_QUEUE_COLOR_ALREADY_EXISTS',async _0x7c1e9e=>{const _0x62b332=_0x55f8fb;if(_0x7c1e9e){const _0x3f80e9=await Queue_1[_0x62b332(0x1cb)][_0x62b332(0x1c2)]({'where':{'color':_0x7c1e9e,'id':{[sequelize_1['Op']['ne']]:_0x3eff86},'companyId':_0x2a5e3b}});return!_0x3f80e9;}return!![];})});try{await _0x17949f[_0x55f8fb(0x1b0)]({'color':_0x59dfd3,'name':_0x30a198});}catch(_0x14aac4){throw new AppError_1[(_0x55f8fb(0x1cb))](_0x14aac4['message']);}const _0x345897=await(0x0,ShowQueueService_1[_0x55f8fb(0x1cb)])(_0x3eff86,_0x2a5e3b);if(_0x345897[_0x55f8fb(0x1cc)]!==_0x2a5e3b)throw new AppError_1[(_0x55f8fb(0x1cb))]('Não\x20é\x20permitido\x20alterar\x20registros\x20de\x20outra\x20empresa');return _0x325e75&&(await Promise[_0x55f8fb(0x1ac)](_0x325e75[_0x55f8fb(0x1b2)](async _0x32c7eb=>{const _0x5535b4=_0x55f8fb;await Chatbot_1[_0x5535b4(0x1cb)]['upsert']({..._0x32c7eb,'queueId':_0x345897['id']});})),await Promise[_0x55f8fb(0x1ac)](_0x345897[_0x55f8fb(0x1d2)][_0x55f8fb(0x1b2)](async _0x3ca853=>{const _0xbf8ea0=_0x55f8fb,_0x39cde4=_0x325e75[_0xbf8ea0(0x1bf)](_0x920d11=>_0x920d11['id']===_0x3ca853['id']);_0x39cde4===-0x1&&await Chatbot_1[_0xbf8ea0(0x1cb)][_0xbf8ea0(0x1b6)]({'where':{'id':_0x3ca853['id']}});}))),await _0x345897[_0x55f8fb(0x1aa)](_0x27d1cd),await _0x345897[_0x55f8fb(0x1ab)]({'attributes':['id','color',_0x55f8fb(0x1cf),'greetingMessage',_0x55f8fb(0x1d6)],'include':[{'model':Chatbot_1['default'],'as':_0x55f8fb(0x1d2),'order':[[{'model':Chatbot_1[_0x55f8fb(0x1cb)],'as':_0x55f8fb(0x1d2)},'id',_0x55f8fb(0x1c7)],['id',_0x55f8fb(0x1c0)]]}],'order':[[{'model':Chatbot_1[_0x55f8fb(0x1cb)],'as':'chatbots'},'id',_0x55f8fb(0x1c7)],['id','ASC']]}),_0x345897;};exports[a448_0x1c2d1a(0x1cb)]=UpdateQueueService;function a448_0x13a2(){const _0x2e3862=['../../models/Queue','14HBzcIj','test','update','reload','all','2OwaKBc','Check-unique-name','1279734gvxAPb','validate','sequelize','map','../../errors/AppError','__importDefault','getOwnPropertyDescriptor','destroy','714552LKvWCs','ERR_QUEUE_INVALID_NAME','6506634KFZSaS','__importStar','required','2436490BinEfi','defineProperty','./ShowQueueService','findIndex','ASC','shape','findOne','object','__esModule','string','create','asc','5048307bLMAxE','__createBinding','../../models/Chatbot','default','companyId','min','__setModuleDefault','name','yup','12pyRXTT','chatbots','10hMEOUa','4985304Bigelh','get','schedules','420306bvZiFG','writable','call','ERR_QUEUE_NAME_ALREADY_EXISTS','ERR_QUEUE_INVALID_COLOR','18wJnfFh'];a448_0x13a2=function(){return _0x2e3862;};return a448_0x13a2();}