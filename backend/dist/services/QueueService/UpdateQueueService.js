'use strict';function a532_0x50f2(_0x2c9a51,_0x221d02){const _0x146be8=a532_0x146b();return a532_0x50f2=function(_0x50f271,_0x1955ae){_0x50f271=_0x50f271-0x138;let _0x4bf365=_0x146be8[_0x50f271];return _0x4bf365;},a532_0x50f2(_0x2c9a51,_0x221d02);}const a532_0x13afe7=a532_0x50f2;(function(_0x19f18c,_0x4c0971){const _0x1c8e2c=a532_0x50f2,_0x4d13ab=_0x19f18c();while(!![]){try{const _0x44d714=-parseInt(_0x1c8e2c(0x156))/0x1*(parseInt(_0x1c8e2c(0x146))/0x2)+-parseInt(_0x1c8e2c(0x153))/0x3*(-parseInt(_0x1c8e2c(0x15a))/0x4)+parseInt(_0x1c8e2c(0x13c))/0x5+-parseInt(_0x1c8e2c(0x152))/0x6*(parseInt(_0x1c8e2c(0x149))/0x7)+parseInt(_0x1c8e2c(0x155))/0x8*(parseInt(_0x1c8e2c(0x140))/0x9)+parseInt(_0x1c8e2c(0x164))/0xa*(-parseInt(_0x1c8e2c(0x147))/0xb)+-parseInt(_0x1c8e2c(0x160))/0xc*(-parseInt(_0x1c8e2c(0x163))/0xd);if(_0x44d714===_0x4c0971)break;else _0x4d13ab['push'](_0x4d13ab['shift']());}catch(_0x4e868d){_0x4d13ab['push'](_0x4d13ab['shift']());}}}(a532_0x146b,0x387ff));var __createBinding=this&&this['__createBinding']||(Object[a532_0x13afe7(0x13a)]?function(_0x30a027,_0xb27aba,_0x25f9a0,_0x41e33c){const _0xdd231f=a532_0x13afe7;if(_0x41e33c===undefined)_0x41e33c=_0x25f9a0;var _0x1e205c=Object['getOwnPropertyDescriptor'](_0xb27aba,_0x25f9a0);(!_0x1e205c||('get'in _0x1e205c?!_0xb27aba[_0xdd231f(0x15e)]:_0x1e205c['writable']||_0x1e205c[_0xdd231f(0x166)]))&&(_0x1e205c={'enumerable':!![],'get':function(){return _0xb27aba[_0x25f9a0];}}),Object[_0xdd231f(0x14a)](_0x30a027,_0x41e33c,_0x1e205c);}:function(_0x46880e,_0x4b4ce1,_0x3f40b6,_0x579aae){if(_0x579aae===undefined)_0x579aae=_0x3f40b6;_0x46880e[_0x579aae]=_0x4b4ce1[_0x3f40b6];}),__setModuleDefault=this&&this[a532_0x13afe7(0x165)]||(Object[a532_0x13afe7(0x13a)]?function(_0x1edf9c,_0x4b51d2){const _0x4237c4=a532_0x13afe7;Object[_0x4237c4(0x14a)](_0x1edf9c,_0x4237c4(0x154),{'enumerable':!![],'value':_0x4b51d2});}:function(_0x5bda17,_0x4cc56e){_0x5bda17['default']=_0x4cc56e;}),__importStar=this&&this[a532_0x13afe7(0x162)]||function(_0x550336){const _0x2e8cde=a532_0x13afe7;if(_0x550336&&_0x550336[_0x2e8cde(0x15e)])return _0x550336;var _0x3bcccf={};if(_0x550336!=null){for(var _0x28d7b3 in _0x550336)if(_0x28d7b3!=='default'&&Object['prototype']['hasOwnProperty'][_0x2e8cde(0x150)](_0x550336,_0x28d7b3))__createBinding(_0x3bcccf,_0x550336,_0x28d7b3);}return __setModuleDefault(_0x3bcccf,_0x550336),_0x3bcccf;},__importDefault=this&&this['__importDefault']||function(_0x32b75e){return _0x32b75e&&_0x32b75e['__esModule']?_0x32b75e:{'default':_0x32b75e};};Object[a532_0x13afe7(0x14a)](exports,a532_0x13afe7(0x15e),{'value':!![]});const sequelize_1=require(a532_0x13afe7(0x14f)),Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a532_0x13afe7(0x138))),Chatbot_1=__importDefault(require(a532_0x13afe7(0x141))),Queue_1=__importDefault(require(a532_0x13afe7(0x13b))),ShowQueueService_1=__importDefault(require(a532_0x13afe7(0x159))),User_1=__importDefault(require(a532_0x13afe7(0x14e))),UpdateQueueService=async(_0x5dba1f,_0x20a032,_0x39105b)=>{const _0xab5614=a532_0x13afe7,{color:_0x193fe9,name:_0x50256b,chatbots:_0x1d8486}=_0x20a032,_0x5c9e7d=Yup[_0xab5614(0x145)]()['shape']({'name':Yup[_0xab5614(0x139)]()['min'](0x2,'ERR_QUEUE_INVALID_NAME')['test']('Check-unique-name','ERR_QUEUE_NAME_ALREADY_EXISTS',async _0x4d19d2=>{const _0x575b86=_0xab5614;if(_0x4d19d2){const _0x6f9bcf=await Queue_1[_0x575b86(0x154)][_0x575b86(0x15d)]({'where':{'name':_0x4d19d2,'id':{[sequelize_1['Op']['ne']]:_0x5dba1f},'companyId':_0x39105b}});return!_0x6f9bcf;}return!![];}),'color':Yup[_0xab5614(0x139)]()[_0xab5614(0x13e)](_0xab5614(0x15f))[_0xab5614(0x151)](_0xab5614(0x14c),_0xab5614(0x15f),async _0x1b769d=>{const _0x1ebd81=_0xab5614;if(_0x1b769d){const _0x4fedb7=/^#[0-9a-f]{3,6}$/i;return _0x4fedb7[_0x1ebd81(0x151)](_0x1b769d);}return!![];})[_0xab5614(0x151)]('Check-color-exists','ERR_QUEUE_COLOR_ALREADY_EXISTS',async _0x354580=>{const _0x5fc940=_0xab5614;if(_0x354580){const _0x4e08cc=await Queue_1[_0x5fc940(0x154)][_0x5fc940(0x15d)]({'where':{'color':_0x354580,'id':{[sequelize_1['Op']['ne']]:_0x5dba1f},'companyId':_0x39105b}});return!_0x4e08cc;}return!![];})});try{await _0x5c9e7d[_0xab5614(0x144)]({'color':_0x193fe9,'name':_0x50256b});}catch(_0x51ae1b){throw new AppError_1[(_0xab5614(0x154))](_0x51ae1b[_0xab5614(0x157)]);}const _0x59a244=await(0x0,ShowQueueService_1['default'])(_0x5dba1f,_0x39105b);if(_0x59a244[_0xab5614(0x158)]!==_0x39105b)throw new AppError_1[(_0xab5614(0x154))](_0xab5614(0x143));return _0x1d8486&&(await Promise[_0xab5614(0x15b)](_0x1d8486['map'](async _0x1f0aae=>{const _0x234c9a=_0xab5614;await Chatbot_1[_0x234c9a(0x154)]['upsert']({..._0x1f0aae,'queueId':_0x59a244['id']});})),await Promise[_0xab5614(0x15b)](_0x59a244[_0xab5614(0x148)][_0xab5614(0x14b)](async _0x5a9a4f=>{const _0x345130=_0xab5614,_0x38495f=_0x1d8486[_0x345130(0x13f)](_0x5bce5e=>_0x5bce5e['id']===_0x5a9a4f['id']);_0x38495f===-0x1&&await Chatbot_1[_0x345130(0x154)][_0x345130(0x13d)]({'where':{'id':_0x5a9a4f['id']}});}))),await _0x59a244['update'](_0x20a032),await _0x59a244[_0xab5614(0x14d)]({'include':[{'model':Chatbot_1[_0xab5614(0x154)],'as':_0xab5614(0x148),'include':[{'model':User_1[_0xab5614(0x154)],'as':_0xab5614(0x161)}],'order':[[{'model':Chatbot_1[_0xab5614(0x154)],'as':'chatbots'},'id',_0xab5614(0x142)],['id',_0xab5614(0x15c)]]}],'order':[[{'model':Chatbot_1[_0xab5614(0x154)],'as':'chatbots'},'id',_0xab5614(0x142)],['id',_0xab5614(0x15c)]]}),_0x59a244;};exports[a532_0x13afe7(0x154)]=UpdateQueueService;function a532_0x146b(){const _0x157ade=['asc','Não\x20é\x20permitido\x20alterar\x20registros\x20de\x20outra\x20empresa','validate','object','10888exvmDe','4007509tQWyXm','chatbots','1295BlKlgp','defineProperty','map','Check-color','reload','../../models/User','sequelize','call','test','330ETgnLG','472077jeRDfN','default','164248dCByTe','53jvNetM','message','companyId','./ShowQueueService','4tkPWFJ','all','ASC','findOne','__esModule','ERR_QUEUE_INVALID_COLOR','238956HefDKK','user','__importStar','195LsVjxl','10WWJzUf','__setModuleDefault','configurable','../../errors/AppError','string','create','../../models/Queue','1884010xtMdWM','destroy','required','findIndex','27cfRBfu','../../models/Chatbot'];a532_0x146b=function(){return _0x157ade;};return a532_0x146b();}