'use strict';function a408_0x1dc2(_0xa32b46,_0x21cf0d){const _0x240237=a408_0x2402();return a408_0x1dc2=function(_0x1dc2ab,_0x12f232){_0x1dc2ab=_0x1dc2ab-0x1d3;let _0x55d8d4=_0x240237[_0x1dc2ab];return _0x55d8d4;},a408_0x1dc2(_0xa32b46,_0x21cf0d);}const a408_0x6858ba=a408_0x1dc2;function a408_0x2402(){const _0x4607ee=['reload','__esModule','update','shape','__importDefault','7617862loRYgT','default','create','__setModuleDefault','object','validate','findIndex','message','5916744KgIdFC','../../models/FilesOptions','219186xLSyyd','writable','options','6JOslto','get','3262884Xnnskl','./ShowService','667066lYTxJA','name','defineProperty','hasOwnProperty','map','min','call','2724670BSlDFj','upsert','companyId','destroy','all','16835496wMGiql','getOwnPropertyDescriptor','string'];a408_0x2402=function(){return _0x4607ee;};return a408_0x2402();}(function(_0x49f37b,_0x45c094){const _0x3f3359=a408_0x1dc2,_0x4d26f7=_0x49f37b();while(!![]){try{const _0x13053b=parseInt(_0x3f3359(0x1f7))/0x1+parseInt(_0x3f3359(0x1d9))/0x2*(parseInt(_0x3f3359(0x1d5))/0x3)+-parseInt(_0x3f3359(0x1d7))/0x4+parseInt(_0x3f3359(0x1e0))/0x5+parseInt(_0x3f3359(0x1f5))/0x6+parseInt(_0x3f3359(0x1ed))/0x7+-parseInt(_0x3f3359(0x1e5))/0x8;if(_0x13053b===_0x45c094)break;else _0x4d26f7['push'](_0x4d26f7['shift']());}catch(_0x37e3b1){_0x4d26f7['push'](_0x4d26f7['shift']());}}}(a408_0x2402,0x8eeca));var __createBinding=this&&this['__createBinding']||(Object[a408_0x6858ba(0x1ef)]?function(_0x458305,_0x399740,_0x2187f3,_0x96a9fb){const _0x487afd=a408_0x6858ba;if(_0x96a9fb===undefined)_0x96a9fb=_0x2187f3;var _0x35fcb1=Object[_0x487afd(0x1e6)](_0x399740,_0x2187f3);(!_0x35fcb1||(_0x487afd(0x1d6)in _0x35fcb1?!_0x399740['__esModule']:_0x35fcb1[_0x487afd(0x1d3)]||_0x35fcb1['configurable']))&&(_0x35fcb1={'enumerable':!![],'get':function(){return _0x399740[_0x2187f3];}}),Object[_0x487afd(0x1db)](_0x458305,_0x96a9fb,_0x35fcb1);}:function(_0x599977,_0x592454,_0x5eee5d,_0x2d345b){if(_0x2d345b===undefined)_0x2d345b=_0x5eee5d;_0x599977[_0x2d345b]=_0x592454[_0x5eee5d];}),__setModuleDefault=this&&this[a408_0x6858ba(0x1f0)]||(Object[a408_0x6858ba(0x1ef)]?function(_0x2a2b15,_0x2b1f69){Object['defineProperty'](_0x2a2b15,'default',{'enumerable':!![],'value':_0x2b1f69});}:function(_0x4f532f,_0x5ad222){const _0x5c8cd4=a408_0x6858ba;_0x4f532f[_0x5c8cd4(0x1ee)]=_0x5ad222;}),__importStar=this&&this['__importStar']||function(_0x360f15){const _0x2424b6=a408_0x6858ba;if(_0x360f15&&_0x360f15[_0x2424b6(0x1e9)])return _0x360f15;var _0x809a76={};if(_0x360f15!=null){for(var _0x478494 in _0x360f15)if(_0x478494!==_0x2424b6(0x1ee)&&Object['prototype'][_0x2424b6(0x1dc)][_0x2424b6(0x1df)](_0x360f15,_0x478494))__createBinding(_0x809a76,_0x360f15,_0x478494);}return __setModuleDefault(_0x809a76,_0x360f15),_0x809a76;},__importDefault=this&&this[a408_0x6858ba(0x1ec)]||function(_0x4ce608){return _0x4ce608&&_0x4ce608['__esModule']?_0x4ce608:{'default':_0x4ce608};};Object[a408_0x6858ba(0x1db)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),FilesOptions_1=__importDefault(require(a408_0x6858ba(0x1f6))),ShowService_1=__importDefault(require(a408_0x6858ba(0x1d8))),UpdateService=async({fileData:_0x2f70e9,id:_0x1a130a,companyId:_0x38d14f})=>{const _0x176193=a408_0x6858ba,_0x3cf9eb=await(0x0,ShowService_1[_0x176193(0x1ee)])(_0x1a130a,_0x38d14f),_0xfea965=Yup[_0x176193(0x1f1)]()[_0x176193(0x1eb)]({'name':Yup[_0x176193(0x1e7)]()[_0x176193(0x1de)](0x3)}),{name:_0x17ebba,message:_0x3fcc2a,options:_0x110762}=_0x2f70e9;try{await _0xfea965[_0x176193(0x1f2)]({'name':_0x17ebba});}catch(_0x5d9267){throw new AppError_1[(_0x176193(0x1ee))](_0x5d9267[_0x176193(0x1f4)]);}return _0x110762&&(await Promise[_0x176193(0x1e4)](_0x110762[_0x176193(0x1dd)](async _0x1ecc02=>{const _0x57ec0c=_0x176193;await FilesOptions_1['default'][_0x57ec0c(0x1e1)]({..._0x1ecc02,'fileId':_0x3cf9eb['id']});})),await Promise[_0x176193(0x1e4)](_0x3cf9eb['options'][_0x176193(0x1dd)](async _0x3d0521=>{const _0x13fe65=_0x176193,_0x42a90e=_0x110762[_0x13fe65(0x1f3)](_0xe4ed5b=>_0xe4ed5b['id']===_0x3d0521['id']);_0x42a90e===-0x1&&await FilesOptions_1[_0x13fe65(0x1ee)][_0x13fe65(0x1e3)]({'where':{'id':_0x3d0521['id']}});}))),await _0x3cf9eb[_0x176193(0x1ea)]({'name':_0x17ebba,'message':_0x3fcc2a}),await _0x3cf9eb[_0x176193(0x1e8)]({'attributes':['id',_0x176193(0x1da),_0x176193(0x1f4),_0x176193(0x1e2)],'include':[_0x176193(0x1d4)]}),_0x3cf9eb;};exports[a408_0x6858ba(0x1ee)]=UpdateService;