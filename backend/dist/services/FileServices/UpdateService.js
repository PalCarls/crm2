'use strict';function a489_0x15f2(){const _0x319045=['defineProperty','14437XRqyyX','min','2277072aarAtD','../../errors/AppError','companyId','writable','2239825XNMvKx','__setModuleDefault','__createBinding','configurable','1481430VfebIF','__esModule','getOwnPropertyDescriptor','default','destroy','all','create','hasOwnProperty','1246402idbbtV','yup','call','__importStar','update','object','findIndex','2078280VpyLzJ','reload','./ShowService','__importDefault','map','options','validate','string','get','message','prototype','601752KYzTxi'];a489_0x15f2=function(){return _0x319045;};return a489_0x15f2();}const a489_0x182a2c=a489_0x4d27;(function(_0x310f90,_0x1bfcc1){const _0x559c73=a489_0x4d27,_0x1f3fe8=_0x310f90();while(!![]){try{const _0x1849d6=parseInt(_0x559c73(0x1c9))/0x1+parseInt(_0x559c73(0x1db))/0x2+-parseInt(_0x559c73(0x1c7))/0x3+-parseInt(_0x559c73(0x1cb))/0x4+parseInt(_0x559c73(0x1bc))/0x5+-parseInt(_0x559c73(0x1d3))/0x6+parseInt(_0x559c73(0x1cf))/0x7;if(_0x1849d6===_0x1bfcc1)break;else _0x1f3fe8['push'](_0x1f3fe8['shift']());}catch(_0x584f7a){_0x1f3fe8['push'](_0x1f3fe8['shift']());}}}(a489_0x15f2,0x570a0));var __createBinding=this&&this[a489_0x182a2c(0x1d1)]||(Object[a489_0x182a2c(0x1d9)]?function(_0x2fee4a,_0x558df5,_0x29bb46,_0x5c923e){const _0x2c82b1=a489_0x182a2c;if(_0x5c923e===undefined)_0x5c923e=_0x29bb46;var _0x214741=Object[_0x2c82b1(0x1d5)](_0x558df5,_0x29bb46);(!_0x214741||(_0x2c82b1(0x1c4)in _0x214741?!_0x558df5['__esModule']:_0x214741[_0x2c82b1(0x1ce)]||_0x214741[_0x2c82b1(0x1d2)]))&&(_0x214741={'enumerable':!![],'get':function(){return _0x558df5[_0x29bb46];}}),Object[_0x2c82b1(0x1c8)](_0x2fee4a,_0x5c923e,_0x214741);}:function(_0x492262,_0x1812e3,_0x140d2e,_0x4fdb7a){if(_0x4fdb7a===undefined)_0x4fdb7a=_0x140d2e;_0x492262[_0x4fdb7a]=_0x1812e3[_0x140d2e];}),__setModuleDefault=this&&this[a489_0x182a2c(0x1d0)]||(Object[a489_0x182a2c(0x1d9)]?function(_0x2895d7,_0x54de1c){const _0x1a038f=a489_0x182a2c;Object[_0x1a038f(0x1c8)](_0x2895d7,'default',{'enumerable':!![],'value':_0x54de1c});}:function(_0x41e321,_0x162ee4){const _0x2f2fc4=a489_0x182a2c;_0x41e321[_0x2f2fc4(0x1d6)]=_0x162ee4;}),__importStar=this&&this[a489_0x182a2c(0x1b8)]||function(_0x211d4e){const _0x34292f=a489_0x182a2c;if(_0x211d4e&&_0x211d4e[_0x34292f(0x1d4)])return _0x211d4e;var _0x508b85={};if(_0x211d4e!=null){for(var _0x2deb39 in _0x211d4e)if(_0x2deb39!=='default'&&Object[_0x34292f(0x1c6)][_0x34292f(0x1da)][_0x34292f(0x1b7)](_0x211d4e,_0x2deb39))__createBinding(_0x508b85,_0x211d4e,_0x2deb39);}return __setModuleDefault(_0x508b85,_0x211d4e),_0x508b85;},__importDefault=this&&this[a489_0x182a2c(0x1bf)]||function(_0x148309){const _0x4b4d04=a489_0x182a2c;return _0x148309&&_0x148309[_0x4b4d04(0x1d4)]?_0x148309:{'default':_0x148309};};function a489_0x4d27(_0xbd0a88,_0x3b44de){const _0x15f240=a489_0x15f2();return a489_0x4d27=function(_0x4d2774,_0x17e91b){_0x4d2774=_0x4d2774-0x1b6;let _0x4de5f6=_0x15f240[_0x4d2774];return _0x4de5f6;},a489_0x4d27(_0xbd0a88,_0x3b44de);}Object['defineProperty'](exports,a489_0x182a2c(0x1d4),{'value':!![]});const Yup=__importStar(require(a489_0x182a2c(0x1b6))),AppError_1=__importDefault(require(a489_0x182a2c(0x1cc))),FilesOptions_1=__importDefault(require('../../models/FilesOptions')),ShowService_1=__importDefault(require(a489_0x182a2c(0x1be))),UpdateService=async({fileData:_0x4b06b0,id:_0xd9a23b,companyId:_0x1f829e})=>{const _0x5d41bf=a489_0x182a2c,_0x1526f9=await(0x0,ShowService_1['default'])(_0xd9a23b,_0x1f829e),_0x3590e2=Yup[_0x5d41bf(0x1ba)]()['shape']({'name':Yup[_0x5d41bf(0x1c3)]()[_0x5d41bf(0x1ca)](0x3)}),{name:_0xc1ab14,message:_0x2b4641,options:_0x5e620a}=_0x4b06b0;try{await _0x3590e2[_0x5d41bf(0x1c2)]({'name':_0xc1ab14});}catch(_0x582618){throw new AppError_1[(_0x5d41bf(0x1d6))](_0x582618[_0x5d41bf(0x1c5)]);}return _0x5e620a&&(await Promise[_0x5d41bf(0x1d8)](_0x5e620a[_0x5d41bf(0x1c0)](async _0x58b382=>{const _0x5ca675=_0x5d41bf;await FilesOptions_1[_0x5ca675(0x1d6)]['upsert']({..._0x58b382,'fileId':_0x1526f9['id']});})),await Promise[_0x5d41bf(0x1d8)](_0x1526f9[_0x5d41bf(0x1c1)][_0x5d41bf(0x1c0)](async _0x25fe8a=>{const _0x285c57=_0x5d41bf,_0x485153=_0x5e620a[_0x285c57(0x1bb)](_0x504b12=>_0x504b12['id']===_0x25fe8a['id']);_0x485153===-0x1&&await FilesOptions_1['default'][_0x285c57(0x1d7)]({'where':{'id':_0x25fe8a['id']}});}))),await _0x1526f9[_0x5d41bf(0x1b9)]({'name':_0xc1ab14,'message':_0x2b4641}),await _0x1526f9[_0x5d41bf(0x1bd)]({'attributes':['id','name','message',_0x5d41bf(0x1cd)],'include':[_0x5d41bf(0x1c1)]}),_0x1526f9;};exports[a489_0x182a2c(0x1d6)]=UpdateService;