'use strict';function a441_0x1dea(_0x1d68ad,_0x5d41da){const _0x71c332=a441_0x71c3();return a441_0x1dea=function(_0x1dead0,_0x26370b){_0x1dead0=_0x1dead0-0x135;let _0x17132f=_0x71c332[_0x1dead0];return _0x17132f;},a441_0x1dea(_0x1d68ad,_0x5d41da);}const a441_0x14c41c=a441_0x1dea;(function(_0x23620b,_0x45dce5){const _0x47e2b4=a441_0x1dea,_0x5f01ca=_0x23620b();while(!![]){try{const _0x402509=-parseInt(_0x47e2b4(0x137))/0x1+parseInt(_0x47e2b4(0x14c))/0x2+parseInt(_0x47e2b4(0x153))/0x3+-parseInt(_0x47e2b4(0x158))/0x4*(parseInt(_0x47e2b4(0x145))/0x5)+parseInt(_0x47e2b4(0x14e))/0x6*(-parseInt(_0x47e2b4(0x144))/0x7)+parseInt(_0x47e2b4(0x13c))/0x8+parseInt(_0x47e2b4(0x140))/0x9;if(_0x402509===_0x45dce5)break;else _0x5f01ca['push'](_0x5f01ca['shift']());}catch(_0x49f4a5){_0x5f01ca['push'](_0x5f01ca['shift']());}}}(a441_0x71c3,0xc5b7a));var __createBinding=this&&this[a441_0x14c41c(0x143)]||(Object[a441_0x14c41c(0x14d)]?function(_0x1d9c8c,_0x4a909e,_0x121d04,_0x1086d9){const _0x129bb0=a441_0x14c41c;if(_0x1086d9===undefined)_0x1086d9=_0x121d04;var _0x2ead1b=Object[_0x129bb0(0x148)](_0x4a909e,_0x121d04);(!_0x2ead1b||(_0x129bb0(0x142)in _0x2ead1b?!_0x4a909e[_0x129bb0(0x136)]:_0x2ead1b[_0x129bb0(0x13f)]||_0x2ead1b[_0x129bb0(0x141)]))&&(_0x2ead1b={'enumerable':!![],'get':function(){return _0x4a909e[_0x121d04];}}),Object[_0x129bb0(0x149)](_0x1d9c8c,_0x1086d9,_0x2ead1b);}:function(_0x327f7b,_0xc592b0,_0x27cce5,_0x236c8e){if(_0x236c8e===undefined)_0x236c8e=_0x27cce5;_0x327f7b[_0x236c8e]=_0xc592b0[_0x27cce5];}),__setModuleDefault=this&&this[a441_0x14c41c(0x146)]||(Object[a441_0x14c41c(0x14d)]?function(_0x2e8d63,_0x5dc680){const _0x5c77f0=a441_0x14c41c;Object[_0x5c77f0(0x149)](_0x2e8d63,'default',{'enumerable':!![],'value':_0x5dc680});}:function(_0x435297,_0x28b1f3){const _0x2cabab=a441_0x14c41c;_0x435297[_0x2cabab(0x139)]=_0x28b1f3;}),__importStar=this&&this['__importStar']||function(_0x3014a3){const _0x174914=a441_0x14c41c;if(_0x3014a3&&_0x3014a3['__esModule'])return _0x3014a3;var _0x12f3e8={};if(_0x3014a3!=null){for(var _0x26e244 in _0x3014a3)if(_0x26e244!==_0x174914(0x139)&&Object[_0x174914(0x14b)][_0x174914(0x13d)]['call'](_0x3014a3,_0x26e244))__createBinding(_0x12f3e8,_0x3014a3,_0x26e244);}return __setModuleDefault(_0x12f3e8,_0x3014a3),_0x12f3e8;},__importDefault=this&&this[a441_0x14c41c(0x154)]||function(_0x2a0eb4){const _0x25d44a=a441_0x14c41c;return _0x2a0eb4&&_0x2a0eb4[_0x25d44a(0x136)]?_0x2a0eb4:{'default':_0x2a0eb4};};function a441_0x71c3(){const _0x268d29=['__importDefault','all','upsert','../../models/FilesOptions','16PLXgYC','map','message','findIndex','min','__esModule','1403793ZJitEJ','reload','default','string','yup','10646408wNhbxp','hasOwnProperty','companyId','writable','9384399PQXzrU','configurable','get','__createBinding','7JBwZFj','1402465OkocoC','__setModuleDefault','update','getOwnPropertyDescriptor','defineProperty','./ShowService','prototype','2248340FLQJcS','create','6244146bqNQqn','options','object','destroy','../../errors/AppError','2635872algRWO'];a441_0x71c3=function(){return _0x268d29;};return a441_0x71c3();}Object[a441_0x14c41c(0x149)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a441_0x14c41c(0x13b))),AppError_1=__importDefault(require(a441_0x14c41c(0x152))),FilesOptions_1=__importDefault(require(a441_0x14c41c(0x157))),ShowService_1=__importDefault(require(a441_0x14c41c(0x14a))),UpdateService=async({fileData:_0x29fa94,id:_0x13ece0,companyId:_0x50f8e5})=>{const _0x4a2285=a441_0x14c41c,_0x4030ab=await(0x0,ShowService_1[_0x4a2285(0x139)])(_0x13ece0,_0x50f8e5),_0x42e2c5=Yup[_0x4a2285(0x150)]()['shape']({'name':Yup[_0x4a2285(0x13a)]()[_0x4a2285(0x135)](0x3)}),{name:_0x8b1bfe,message:_0x38ee72,options:_0x889c4a}=_0x29fa94;try{await _0x42e2c5['validate']({'name':_0x8b1bfe});}catch(_0x2df0e1){throw new AppError_1[(_0x4a2285(0x139))](_0x2df0e1[_0x4a2285(0x15a)]);}return _0x889c4a&&(await Promise['all'](_0x889c4a[_0x4a2285(0x159)](async _0x5835ae=>{const _0x202889=_0x4a2285;await FilesOptions_1[_0x202889(0x139)][_0x202889(0x156)]({..._0x5835ae,'fileId':_0x4030ab['id']});})),await Promise[_0x4a2285(0x155)](_0x4030ab[_0x4a2285(0x14f)][_0x4a2285(0x159)](async _0x5aee67=>{const _0x13ca73=_0x4a2285,_0x580550=_0x889c4a[_0x13ca73(0x15b)](_0x9e5f36=>_0x9e5f36['id']===_0x5aee67['id']);_0x580550===-0x1&&await FilesOptions_1[_0x13ca73(0x139)][_0x13ca73(0x151)]({'where':{'id':_0x5aee67['id']}});}))),await _0x4030ab[_0x4a2285(0x147)]({'name':_0x8b1bfe,'message':_0x38ee72}),await _0x4030ab[_0x4a2285(0x138)]({'attributes':['id','name',_0x4a2285(0x15a),_0x4a2285(0x13e)],'include':[_0x4a2285(0x14f)]}),_0x4030ab;};exports['default']=UpdateService;