'use strict';function a479_0x5bf8(){const _0x2f4139=['1083725hxNmFO','__esModule','options','__createBinding','companyId','58lKVYdC','440562yalqow','configurable','4896981ZdtKxO','message','../../models/FilesOptions','./ShowService','1235032iOLmeK','create','shape','name','map','default','22bguxMk','8tyyaTA','writable','7dOlhIR','37803iqQmac','669954BTNfMM','min','get','call','__importDefault','validate','object','reload','string','2425830fmAxQK','getOwnPropertyDescriptor','destroy','__setModuleDefault','upsert','defineProperty','all'];a479_0x5bf8=function(){return _0x2f4139;};return a479_0x5bf8();}const a479_0x2ec405=a479_0x5b59;(function(_0x55f6d2,_0x4f9f2f){const _0x97cda6=a479_0x5b59,_0x315a86=_0x55f6d2();while(!![]){try{const _0xdb9f5f=-parseInt(_0x97cda6(0x157))/0x1+-parseInt(_0x97cda6(0x156))/0x2*(-parseInt(_0x97cda6(0x140))/0x3)+parseInt(_0x97cda6(0x15d))/0x4+parseInt(_0x97cda6(0x151))/0x5+-parseInt(_0x97cda6(0x141))/0x6*(parseInt(_0x97cda6(0x13f))/0x7)+parseInt(_0x97cda6(0x13d))/0x8*(-parseInt(_0x97cda6(0x159))/0x9)+-parseInt(_0x97cda6(0x14a))/0xa*(-parseInt(_0x97cda6(0x13c))/0xb);if(_0xdb9f5f===_0x4f9f2f)break;else _0x315a86['push'](_0x315a86['shift']());}catch(_0x1fbaad){_0x315a86['push'](_0x315a86['shift']());}}}(a479_0x5bf8,0x444d8));function a479_0x5b59(_0x181f0a,_0x54146e){const _0x5bf820=a479_0x5bf8();return a479_0x5b59=function(_0x5b59cb,_0x716902){_0x5b59cb=_0x5b59cb-0x137;let _0x4faa1b=_0x5bf820[_0x5b59cb];return _0x4faa1b;},a479_0x5b59(_0x181f0a,_0x54146e);}var __createBinding=this&&this[a479_0x2ec405(0x154)]||(Object[a479_0x2ec405(0x137)]?function(_0x58602b,_0x3fc360,_0x1b33f0,_0x6fc118){const _0x3366ac=a479_0x2ec405;if(_0x6fc118===undefined)_0x6fc118=_0x1b33f0;var _0x24228e=Object[_0x3366ac(0x14b)](_0x3fc360,_0x1b33f0);(!_0x24228e||(_0x3366ac(0x143)in _0x24228e?!_0x3fc360[_0x3366ac(0x152)]:_0x24228e[_0x3366ac(0x13e)]||_0x24228e[_0x3366ac(0x158)]))&&(_0x24228e={'enumerable':!![],'get':function(){return _0x3fc360[_0x1b33f0];}}),Object['defineProperty'](_0x58602b,_0x6fc118,_0x24228e);}:function(_0x2809a3,_0x4ae899,_0x4243d2,_0x4f414e){if(_0x4f414e===undefined)_0x4f414e=_0x4243d2;_0x2809a3[_0x4f414e]=_0x4ae899[_0x4243d2];}),__setModuleDefault=this&&this[a479_0x2ec405(0x14d)]||(Object[a479_0x2ec405(0x137)]?function(_0x46a977,_0x3d9c95){const _0x1fa2f1=a479_0x2ec405;Object[_0x1fa2f1(0x14f)](_0x46a977,_0x1fa2f1(0x13b),{'enumerable':!![],'value':_0x3d9c95});}:function(_0x1cf6f3,_0x221170){const _0x3796ff=a479_0x2ec405;_0x1cf6f3[_0x3796ff(0x13b)]=_0x221170;}),__importStar=this&&this['__importStar']||function(_0x40eb48){const _0x43cb92=a479_0x2ec405;if(_0x40eb48&&_0x40eb48[_0x43cb92(0x152)])return _0x40eb48;var _0x4994b3={};if(_0x40eb48!=null){for(var _0x2c8b3a in _0x40eb48)if(_0x2c8b3a!=='default'&&Object['prototype']['hasOwnProperty'][_0x43cb92(0x144)](_0x40eb48,_0x2c8b3a))__createBinding(_0x4994b3,_0x40eb48,_0x2c8b3a);}return __setModuleDefault(_0x4994b3,_0x40eb48),_0x4994b3;},__importDefault=this&&this[a479_0x2ec405(0x145)]||function(_0x5eccb2){const _0x10ff58=a479_0x2ec405;return _0x5eccb2&&_0x5eccb2[_0x10ff58(0x152)]?_0x5eccb2:{'default':_0x5eccb2};};Object['defineProperty'](exports,a479_0x2ec405(0x152),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),FilesOptions_1=__importDefault(require(a479_0x2ec405(0x15b))),ShowService_1=__importDefault(require(a479_0x2ec405(0x15c))),UpdateService=async({fileData:_0x2dbef0,id:_0x421ca5,companyId:_0x1d101a})=>{const _0x2912b5=a479_0x2ec405,_0x535e4c=await(0x0,ShowService_1['default'])(_0x421ca5,_0x1d101a),_0x5e2c5=Yup[_0x2912b5(0x147)]()[_0x2912b5(0x138)]({'name':Yup[_0x2912b5(0x149)]()[_0x2912b5(0x142)](0x3)}),{name:_0x1037d5,message:_0x17f6ef,options:_0x418786}=_0x2dbef0;try{await _0x5e2c5[_0x2912b5(0x146)]({'name':_0x1037d5});}catch(_0x37be24){throw new AppError_1['default'](_0x37be24[_0x2912b5(0x15a)]);}return _0x418786&&(await Promise['all'](_0x418786['map'](async _0x281e9a=>{const _0x13f69f=_0x2912b5;await FilesOptions_1[_0x13f69f(0x13b)][_0x13f69f(0x14e)]({..._0x281e9a,'fileId':_0x535e4c['id']});})),await Promise[_0x2912b5(0x150)](_0x535e4c[_0x2912b5(0x153)][_0x2912b5(0x13a)](async _0x4e78b8=>{const _0x5aaa32=_0x2912b5,_0x376702=_0x418786['findIndex'](_0x11bbf8=>_0x11bbf8['id']===_0x4e78b8['id']);_0x376702===-0x1&&await FilesOptions_1[_0x5aaa32(0x13b)][_0x5aaa32(0x14c)]({'where':{'id':_0x4e78b8['id']}});}))),await _0x535e4c['update']({'name':_0x1037d5,'message':_0x17f6ef}),await _0x535e4c[_0x2912b5(0x148)]({'attributes':['id',_0x2912b5(0x139),_0x2912b5(0x15a),_0x2912b5(0x155)],'include':[_0x2912b5(0x153)]}),_0x535e4c;};exports[a479_0x2ec405(0x13b)]=UpdateService;