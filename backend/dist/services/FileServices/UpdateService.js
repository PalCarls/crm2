'use strict';function a496_0x186a(){const _0x30e6a8=['defineProperty','destroy','6839046TlLPcG','8fXFSby','10342450KLnpsd','./ShowService','companyId','__setModuleDefault','309351Dggcmg','create','shape','map','__importDefault','message','8608128hQNTiI','264kupKLv','1986297SRlkRz','554652ORSocl','object','prototype','__createBinding','name','options','findIndex','update','../../errors/AppError','5wyuELM','upsert','default','reload','hasOwnProperty','all','575492AdMsjc','call','__importStar','../../models/FilesOptions','__esModule','writable'];a496_0x186a=function(){return _0x30e6a8;};return a496_0x186a();}const a496_0x190a01=a496_0x2081;(function(_0x348c61,_0x4c018d){const _0x39f57a=a496_0x2081,_0x5e3a9a=_0x348c61();while(!![]){try{const _0xe1bc3b=-parseInt(_0x39f57a(0x180))/0x1+-parseInt(_0x39f57a(0x169))/0x2+parseInt(_0x39f57a(0x17f))/0x3*(parseInt(_0x39f57a(0x172))/0x4)+parseInt(_0x39f57a(0x163))/0x5*(parseInt(_0x39f57a(0x17d))/0x6)+-parseInt(_0x39f57a(0x177))/0x7*(parseInt(_0x39f57a(0x17e))/0x8)+-parseInt(_0x39f57a(0x171))/0x9+parseInt(_0x39f57a(0x173))/0xa;if(_0xe1bc3b===_0x4c018d)break;else _0x5e3a9a['push'](_0x5e3a9a['shift']());}catch(_0x40a4b9){_0x5e3a9a['push'](_0x5e3a9a['shift']());}}}(a496_0x186a,0xb2d36));var __createBinding=this&&this[a496_0x190a01(0x15d)]||(Object[a496_0x190a01(0x178)]?function(_0x3e50b4,_0x567c30,_0x46aed3,_0x36396d){const _0x1a7b05=a496_0x190a01;if(_0x36396d===undefined)_0x36396d=_0x46aed3;var _0x3b77e1=Object['getOwnPropertyDescriptor'](_0x567c30,_0x46aed3);(!_0x3b77e1||('get'in _0x3b77e1?!_0x567c30[_0x1a7b05(0x16d)]:_0x3b77e1[_0x1a7b05(0x16e)]||_0x3b77e1['configurable']))&&(_0x3b77e1={'enumerable':!![],'get':function(){return _0x567c30[_0x46aed3];}}),Object[_0x1a7b05(0x16f)](_0x3e50b4,_0x36396d,_0x3b77e1);}:function(_0x4b35a8,_0x36e792,_0x3c91dc,_0x2541b0){if(_0x2541b0===undefined)_0x2541b0=_0x3c91dc;_0x4b35a8[_0x2541b0]=_0x36e792[_0x3c91dc];}),__setModuleDefault=this&&this[a496_0x190a01(0x176)]||(Object[a496_0x190a01(0x178)]?function(_0x15ba65,_0x41bb28){const _0x28db0a=a496_0x190a01;Object[_0x28db0a(0x16f)](_0x15ba65,'default',{'enumerable':!![],'value':_0x41bb28});}:function(_0x145f9d,_0x204c86){const _0x195d20=a496_0x190a01;_0x145f9d[_0x195d20(0x165)]=_0x204c86;}),__importStar=this&&this[a496_0x190a01(0x16b)]||function(_0x1ea728){const _0x5abd42=a496_0x190a01;if(_0x1ea728&&_0x1ea728[_0x5abd42(0x16d)])return _0x1ea728;var _0x1c4b09={};if(_0x1ea728!=null){for(var _0x4b6f87 in _0x1ea728)if(_0x4b6f87!==_0x5abd42(0x165)&&Object[_0x5abd42(0x15c)][_0x5abd42(0x167)][_0x5abd42(0x16a)](_0x1ea728,_0x4b6f87))__createBinding(_0x1c4b09,_0x1ea728,_0x4b6f87);}return __setModuleDefault(_0x1c4b09,_0x1ea728),_0x1c4b09;},__importDefault=this&&this[a496_0x190a01(0x17b)]||function(_0x1d6567){const _0x23f99f=a496_0x190a01;return _0x1d6567&&_0x1d6567[_0x23f99f(0x16d)]?_0x1d6567:{'default':_0x1d6567};};Object[a496_0x190a01(0x16f)](exports,a496_0x190a01(0x16d),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a496_0x190a01(0x162))),FilesOptions_1=__importDefault(require(a496_0x190a01(0x16c))),ShowService_1=__importDefault(require(a496_0x190a01(0x174))),UpdateService=async({fileData:_0xf8a4e4,id:_0x911926,companyId:_0x44a683})=>{const _0x2bf2e7=a496_0x190a01,_0xa9b512=await(0x0,ShowService_1[_0x2bf2e7(0x165)])(_0x911926,_0x44a683),_0x7fc42e=Yup[_0x2bf2e7(0x15b)]()[_0x2bf2e7(0x179)]({'name':Yup['string']()['min'](0x3)}),{name:_0x42daf6,message:_0x4cc4ea,options:_0x10fa25}=_0xf8a4e4;try{await _0x7fc42e['validate']({'name':_0x42daf6});}catch(_0x230e25){throw new AppError_1[(_0x2bf2e7(0x165))](_0x230e25[_0x2bf2e7(0x17c)]);}return _0x10fa25&&(await Promise[_0x2bf2e7(0x168)](_0x10fa25[_0x2bf2e7(0x17a)](async _0x3df6d1=>{const _0x2d1834=_0x2bf2e7;await FilesOptions_1[_0x2d1834(0x165)][_0x2d1834(0x164)]({..._0x3df6d1,'fileId':_0xa9b512['id']});})),await Promise[_0x2bf2e7(0x168)](_0xa9b512[_0x2bf2e7(0x15f)][_0x2bf2e7(0x17a)](async _0x3388d8=>{const _0x37ede0=_0x2bf2e7,_0x3bce6a=_0x10fa25[_0x37ede0(0x160)](_0x99d3b9=>_0x99d3b9['id']===_0x3388d8['id']);_0x3bce6a===-0x1&&await FilesOptions_1[_0x37ede0(0x165)][_0x37ede0(0x170)]({'where':{'id':_0x3388d8['id']}});}))),await _0xa9b512[_0x2bf2e7(0x161)]({'name':_0x42daf6,'message':_0x4cc4ea}),await _0xa9b512[_0x2bf2e7(0x166)]({'attributes':['id',_0x2bf2e7(0x15e),'message',_0x2bf2e7(0x175)],'include':[_0x2bf2e7(0x15f)]}),_0xa9b512;};function a496_0x2081(_0x5bca56,_0x31ca41){const _0x186a41=a496_0x186a();return a496_0x2081=function(_0x208108,_0x586b51){_0x208108=_0x208108-0x15b;let _0xb420dc=_0x186a41[_0x208108];return _0xb420dc;},a496_0x2081(_0x5bca56,_0x31ca41);}exports['default']=UpdateService;