'use strict';const a462_0x80aafa=a462_0x211d;(function(_0x2ac4a2,_0x3268ad){const _0x50dcdb=a462_0x211d,_0x5dbb88=_0x2ac4a2();while(!![]){try{const _0x989a63=parseInt(_0x50dcdb(0x188))/0x1*(-parseInt(_0x50dcdb(0x18b))/0x2)+-parseInt(_0x50dcdb(0x1a4))/0x3+-parseInt(_0x50dcdb(0x1a3))/0x4*(parseInt(_0x50dcdb(0x189))/0x5)+parseInt(_0x50dcdb(0x186))/0x6*(parseInt(_0x50dcdb(0x199))/0x7)+-parseInt(_0x50dcdb(0x19b))/0x8+-parseInt(_0x50dcdb(0x190))/0x9*(parseInt(_0x50dcdb(0x187))/0xa)+-parseInt(_0x50dcdb(0x18f))/0xb*(-parseInt(_0x50dcdb(0x1a2))/0xc);if(_0x989a63===_0x3268ad)break;else _0x5dbb88['push'](_0x5dbb88['shift']());}catch(_0x5d097b){_0x5dbb88['push'](_0x5dbb88['shift']());}}}(a462_0x18d4,0x7dc2e));function a462_0x211d(_0xa3410,_0x4325f4){const _0x18d49c=a462_0x18d4();return a462_0x211d=function(_0x211d50,_0x426412){_0x211d50=_0x211d50-0x181;let _0x42cba1=_0x18d49c[_0x211d50];return _0x42cba1;},a462_0x211d(_0xa3410,_0x4325f4);}var __createBinding=this&&this[a462_0x80aafa(0x193)]||(Object[a462_0x80aafa(0x1a8)]?function(_0x1cb895,_0x38206a,_0x2dbc2e,_0xce1e4){const _0x1a2eef=a462_0x80aafa;if(_0xce1e4===undefined)_0xce1e4=_0x2dbc2e;var _0x1b3946=Object[_0x1a2eef(0x184)](_0x38206a,_0x2dbc2e);(!_0x1b3946||('get'in _0x1b3946?!_0x38206a[_0x1a2eef(0x191)]:_0x1b3946['writable']||_0x1b3946[_0x1a2eef(0x194)]))&&(_0x1b3946={'enumerable':!![],'get':function(){return _0x38206a[_0x2dbc2e];}}),Object[_0x1a2eef(0x198)](_0x1cb895,_0xce1e4,_0x1b3946);}:function(_0x59fa87,_0x18b9c8,_0x7a5616,_0x3b0e75){if(_0x3b0e75===undefined)_0x3b0e75=_0x7a5616;_0x59fa87[_0x3b0e75]=_0x18b9c8[_0x7a5616];}),__setModuleDefault=this&&this[a462_0x80aafa(0x183)]||(Object['create']?function(_0x1b3eb2,_0x4d864f){const _0x24d5eb=a462_0x80aafa;Object[_0x24d5eb(0x198)](_0x1b3eb2,_0x24d5eb(0x19f),{'enumerable':!![],'value':_0x4d864f});}:function(_0x3cc08a,_0x3ec28b){_0x3cc08a['default']=_0x3ec28b;}),__importStar=this&&this[a462_0x80aafa(0x19a)]||function(_0x20d6a3){const _0xdd3b0d=a462_0x80aafa;if(_0x20d6a3&&_0x20d6a3[_0xdd3b0d(0x191)])return _0x20d6a3;var _0x228338={};if(_0x20d6a3!=null){for(var _0x298fa6 in _0x20d6a3)if(_0x298fa6!=='default'&&Object[_0xdd3b0d(0x195)][_0xdd3b0d(0x1a0)][_0xdd3b0d(0x18d)](_0x20d6a3,_0x298fa6))__createBinding(_0x228338,_0x20d6a3,_0x298fa6);}return __setModuleDefault(_0x228338,_0x20d6a3),_0x228338;},__importDefault=this&&this['__importDefault']||function(_0x4fc64f){const _0x3f6fcf=a462_0x80aafa;return _0x4fc64f&&_0x4fc64f[_0x3f6fcf(0x191)]?_0x4fc64f:{'default':_0x4fc64f};};Object['defineProperty'](exports,a462_0x80aafa(0x191),{'value':!![]});function a462_0x18d4(){const _0x20be70=['__importStar','4353688sgnDwk','destroy','./ShowService','../../models/FilesOptions','default','hasOwnProperty','string','36znCnqY','160HHRENF','365694SPoMHp','validate','options','update','create','name','object','__setModuleDefault','getOwnPropertyDescriptor','companyId','6anzYeC','10BJCgUv','999055DxDaAK','56155WWejNL','all','2LVrBVj','map','call','min','9893411nWwSJg','6049494dczCUf','__esModule','message','__createBinding','configurable','prototype','findIndex','shape','defineProperty','4224395HuGYwg'];a462_0x18d4=function(){return _0x20be70;};return a462_0x18d4();}const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),FilesOptions_1=__importDefault(require(a462_0x80aafa(0x19e))),ShowService_1=__importDefault(require(a462_0x80aafa(0x19d))),UpdateService=async({fileData:_0x261609,id:_0x398034,companyId:_0x15dab})=>{const _0x60f7dc=a462_0x80aafa,_0x38a869=await(0x0,ShowService_1[_0x60f7dc(0x19f)])(_0x398034,_0x15dab),_0x46bc08=Yup[_0x60f7dc(0x182)]()[_0x60f7dc(0x197)]({'name':Yup[_0x60f7dc(0x1a1)]()[_0x60f7dc(0x18e)](0x3)}),{name:_0xea6f3,message:_0x3afcc5,options:_0x5c5b21}=_0x261609;try{await _0x46bc08[_0x60f7dc(0x1a5)]({'name':_0xea6f3});}catch(_0x5384c7){throw new AppError_1[(_0x60f7dc(0x19f))](_0x5384c7[_0x60f7dc(0x192)]);}return _0x5c5b21&&(await Promise['all'](_0x5c5b21[_0x60f7dc(0x18c)](async _0x3594b3=>{await FilesOptions_1['default']['upsert']({..._0x3594b3,'fileId':_0x38a869['id']});})),await Promise[_0x60f7dc(0x18a)](_0x38a869[_0x60f7dc(0x1a6)]['map'](async _0x2a9497=>{const _0x322c7f=_0x60f7dc,_0xffad0a=_0x5c5b21[_0x322c7f(0x196)](_0x3f49c1=>_0x3f49c1['id']===_0x2a9497['id']);_0xffad0a===-0x1&&await FilesOptions_1[_0x322c7f(0x19f)][_0x322c7f(0x19c)]({'where':{'id':_0x2a9497['id']}});}))),await _0x38a869[_0x60f7dc(0x1a7)]({'name':_0xea6f3,'message':_0x3afcc5}),await _0x38a869['reload']({'attributes':['id',_0x60f7dc(0x181),_0x60f7dc(0x192),_0x60f7dc(0x185)],'include':[_0x60f7dc(0x1a6)]}),_0x38a869;};exports[a462_0x80aafa(0x19f)]=UpdateService;