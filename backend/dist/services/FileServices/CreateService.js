'use strict';const a435_0x4a3fa2=a435_0x1af2;function a435_0x5431(){const _0x4e211d=['getOwnPropertyDescriptor','../../models/Files','10144032JjKNFo','prototype','defineProperty','create','Check-unique-name','min','object','configurable','string','__createBinding','29897HPdhFr','test','hasOwnProperty','yup','1205363dXeMMC','ERR_RATING_NAME_ALREADY_EXISTS','8865thJOXm','9puRWRC','__esModule','default','../../errors/AppError','__importDefault','../../models/FilesOptions','message','call','__importStar','5543032kSSVmo','4402480eHPnKm','map','2292ebMREt','findOne','length','25496470rWaIDK','writable','122bSCVZh'];a435_0x5431=function(){return _0x4e211d;};return a435_0x5431();}(function(_0x459c8d,_0x11df9e){const _0xc7a187=a435_0x1af2,_0x269f3b=_0x459c8d();while(!![]){try{const _0x199e05=-parseInt(_0xc7a187(0x197))/0x1+-parseInt(_0xc7a187(0x186))/0x2*(-parseInt(_0xc7a187(0x199))/0x3)+parseInt(_0xc7a187(0x1a3))/0x4+parseInt(_0xc7a187(0x1a4))/0x5+parseInt(_0xc7a187(0x1a6))/0x6*(-parseInt(_0xc7a187(0x193))/0x7)+-parseInt(_0xc7a187(0x189))/0x8+parseInt(_0xc7a187(0x19a))/0x9*(parseInt(_0xc7a187(0x184))/0xa);if(_0x199e05===_0x11df9e)break;else _0x269f3b['push'](_0x269f3b['shift']());}catch(_0x416d4a){_0x269f3b['push'](_0x269f3b['shift']());}}}(a435_0x5431,0xd9983));function a435_0x1af2(_0x343dcd,_0x96d7d7){const _0x5431e6=a435_0x5431();return a435_0x1af2=function(_0x1af2a3,_0x1a7c11){_0x1af2a3=_0x1af2a3-0x182;let _0x9f6891=_0x5431e6[_0x1af2a3];return _0x9f6891;},a435_0x1af2(_0x343dcd,_0x96d7d7);}var __createBinding=this&&this[a435_0x4a3fa2(0x192)]||(Object['create']?function(_0x20b460,_0x148b3a,_0x12ec80,_0x1611f7){const _0x94b1f8=a435_0x4a3fa2;if(_0x1611f7===undefined)_0x1611f7=_0x12ec80;var _0x446955=Object[_0x94b1f8(0x187)](_0x148b3a,_0x12ec80);(!_0x446955||('get'in _0x446955?!_0x148b3a['__esModule']:_0x446955[_0x94b1f8(0x185)]||_0x446955[_0x94b1f8(0x190)]))&&(_0x446955={'enumerable':!![],'get':function(){return _0x148b3a[_0x12ec80];}}),Object[_0x94b1f8(0x18b)](_0x20b460,_0x1611f7,_0x446955);}:function(_0x2413e8,_0x46ab25,_0x39185a,_0x13eb90){if(_0x13eb90===undefined)_0x13eb90=_0x39185a;_0x2413e8[_0x13eb90]=_0x46ab25[_0x39185a];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a435_0x4a3fa2(0x18c)]?function(_0x37a38c,_0xb87f3b){const _0x52434b=a435_0x4a3fa2;Object[_0x52434b(0x18b)](_0x37a38c,_0x52434b(0x19c),{'enumerable':!![],'value':_0xb87f3b});}:function(_0xf67cae,_0xbd0103){_0xf67cae['default']=_0xbd0103;}),__importStar=this&&this[a435_0x4a3fa2(0x1a2)]||function(_0x1ed441){const _0x5e0d32=a435_0x4a3fa2;if(_0x1ed441&&_0x1ed441['__esModule'])return _0x1ed441;var _0x45a448={};if(_0x1ed441!=null){for(var _0x883aa2 in _0x1ed441)if(_0x883aa2!=='default'&&Object[_0x5e0d32(0x18a)][_0x5e0d32(0x195)][_0x5e0d32(0x1a1)](_0x1ed441,_0x883aa2))__createBinding(_0x45a448,_0x1ed441,_0x883aa2);}return __setModuleDefault(_0x45a448,_0x1ed441),_0x45a448;},__importDefault=this&&this[a435_0x4a3fa2(0x19e)]||function(_0xb6bd76){const _0x5037d8=a435_0x4a3fa2;return _0xb6bd76&&_0xb6bd76[_0x5037d8(0x19b)]?_0xb6bd76:{'default':_0xb6bd76};};Object[a435_0x4a3fa2(0x18b)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a435_0x4a3fa2(0x196))),AppError_1=__importDefault(require(a435_0x4a3fa2(0x19d))),Files_1=__importDefault(require(a435_0x4a3fa2(0x188))),FilesOptions_1=__importDefault(require(a435_0x4a3fa2(0x19f))),ShowService_1=__importDefault(require('./ShowService')),CreateService=async({name:_0x1bd7f5,message:_0x2db069,companyId:_0x1c7dc4,options:_0x2dd32d})=>{const _0x32f0b8=a435_0x4a3fa2,_0x2ab0fc=Yup[_0x32f0b8(0x18f)]()['shape']({'name':Yup[_0x32f0b8(0x191)]()['required']()[_0x32f0b8(0x18e)](0x3)[_0x32f0b8(0x194)](_0x32f0b8(0x18d),_0x32f0b8(0x198),async _0x320944=>{const _0x255536=_0x32f0b8;if(_0x320944){const _0x339dfe=await Files_1['default'][_0x255536(0x182)]({'where':{'name':_0x320944,'companyId':_0x1c7dc4}});return!_0x339dfe;}return![];})});try{await _0x2ab0fc['validate']({'name':_0x1bd7f5});}catch(_0xc41c0e){throw new AppError_1[(_0x32f0b8(0x19c))](_0xc41c0e[_0x32f0b8(0x1a0)]);}let _0x10d26d=await Files_1['default'][_0x32f0b8(0x18c)]({'name':_0x1bd7f5,'message':_0x2db069,'companyId':_0x1c7dc4});return _0x2dd32d&&_0x2dd32d[_0x32f0b8(0x183)]>0x0&&await Promise['all'](_0x2dd32d[_0x32f0b8(0x1a5)](async _0x2c00d5=>{const _0x44ec38=_0x32f0b8;await FilesOptions_1[_0x44ec38(0x19c)]['upsert']({..._0x2c00d5,'fileId':_0x10d26d['id']});})),_0x10d26d=await(0x0,ShowService_1[_0x32f0b8(0x19c)])(_0x10d26d['id'],_0x1c7dc4),_0x10d26d;};exports[a435_0x4a3fa2(0x19c)]=CreateService;