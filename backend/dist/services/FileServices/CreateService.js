'use strict';const a402_0x343187=a402_0x34b3;(function(_0x5d84fc,_0x43f964){const _0x3a25fd=a402_0x34b3,_0x358497=_0x5d84fc();while(!![]){try{const _0x4db9d2=-parseInt(_0x3a25fd(0x173))/0x1*(-parseInt(_0x3a25fd(0x172))/0x2)+-parseInt(_0x3a25fd(0x197))/0x3+-parseInt(_0x3a25fd(0x18c))/0x4+-parseInt(_0x3a25fd(0x171))/0x5*(parseInt(_0x3a25fd(0x18b))/0x6)+parseInt(_0x3a25fd(0x182))/0x7+-parseInt(_0x3a25fd(0x186))/0x8+parseInt(_0x3a25fd(0x17b))/0x9*(parseInt(_0x3a25fd(0x195))/0xa);if(_0x4db9d2===_0x43f964)break;else _0x358497['push'](_0x358497['shift']());}catch(_0x5840ac){_0x358497['push'](_0x358497['shift']());}}}(a402_0x452a,0x76ccd));var __createBinding=this&&this[a402_0x343187(0x187)]||(Object[a402_0x343187(0x176)]?function(_0xad0e0f,_0x1a876e,_0x2f31aa,_0x29147e){const _0x58e505=a402_0x343187;if(_0x29147e===undefined)_0x29147e=_0x2f31aa;var _0x817d15=Object[_0x58e505(0x193)](_0x1a876e,_0x2f31aa);(!_0x817d15||(_0x58e505(0x188)in _0x817d15?!_0x1a876e[_0x58e505(0x17f)]:_0x817d15['writable']||_0x817d15['configurable']))&&(_0x817d15={'enumerable':!![],'get':function(){return _0x1a876e[_0x2f31aa];}}),Object[_0x58e505(0x185)](_0xad0e0f,_0x29147e,_0x817d15);}:function(_0x3f26a7,_0x5cc8cc,_0xac3b4,_0x369593){if(_0x369593===undefined)_0x369593=_0xac3b4;_0x3f26a7[_0x369593]=_0x5cc8cc[_0xac3b4];}),__setModuleDefault=this&&this[a402_0x343187(0x181)]||(Object[a402_0x343187(0x176)]?function(_0x6e5605,_0x358dc1){Object['defineProperty'](_0x6e5605,'default',{'enumerable':!![],'value':_0x358dc1});}:function(_0x20ab04,_0x512dbd){_0x20ab04['default']=_0x512dbd;}),__importStar=this&&this[a402_0x343187(0x189)]||function(_0x2edfd3){const _0x474387=a402_0x343187;if(_0x2edfd3&&_0x2edfd3[_0x474387(0x17f)])return _0x2edfd3;var _0x2d03e9={};if(_0x2edfd3!=null){for(var _0x2327d6 in _0x2edfd3)if(_0x2327d6!==_0x474387(0x18e)&&Object[_0x474387(0x180)][_0x474387(0x18d)][_0x474387(0x191)](_0x2edfd3,_0x2327d6))__createBinding(_0x2d03e9,_0x2edfd3,_0x2327d6);}return __setModuleDefault(_0x2d03e9,_0x2edfd3),_0x2d03e9;},__importDefault=this&&this[a402_0x343187(0x183)]||function(_0x493722){const _0x5a862e=a402_0x343187;return _0x493722&&_0x493722[_0x5a862e(0x17f)]?_0x493722:{'default':_0x493722};};function a402_0x34b3(_0x3c98e7,_0x477c3f){const _0x452acf=a402_0x452a();return a402_0x34b3=function(_0x34b3cb,_0xc10b46){_0x34b3cb=_0x34b3cb-0x16e;let _0x3c03e9=_0x452acf[_0x34b3cb];return _0x3c03e9;},a402_0x34b3(_0x3c98e7,_0x477c3f);}Object['defineProperty'](exports,a402_0x343187(0x17f),{'value':!![]});const Yup=__importStar(require(a402_0x343187(0x174))),AppError_1=__importDefault(require(a402_0x343187(0x178))),Files_1=__importDefault(require('../../models/Files')),FilesOptions_1=__importDefault(require(a402_0x343187(0x18a))),CreateService=async({name:_0x3a06fa,message:_0x2d5f42,companyId:_0x282c43,options:_0x55eb0f})=>{const _0x4645f6=a402_0x343187,_0x559106=Yup[_0x4645f6(0x177)]()[_0x4645f6(0x17a)]({'name':Yup[_0x4645f6(0x179)]()[_0x4645f6(0x17e)]()[_0x4645f6(0x18f)](0x3)[_0x4645f6(0x184)](_0x4645f6(0x196),'ERR_FILE_NAME_ALREADY_EXISTS',async _0x45c7bb=>{const _0x380f35=_0x4645f6;if(_0x45c7bb){const _0x4a18cc=await Files_1[_0x380f35(0x18e)]['findOne']({'where':{'name':_0x45c7bb}});return!_0x4a18cc;}return![];})});try{await _0x559106[_0x4645f6(0x194)]({'name':_0x3a06fa});}catch(_0x49d1b4){throw new AppError_1[(_0x4645f6(0x18e))](_0x49d1b4[_0x4645f6(0x170)]);}const [_0x29ee99]=await Files_1[_0x4645f6(0x18e)]['findOrCreate']({'where':{'name':_0x3a06fa,'message':_0x2d5f42},'defaults':{'name':_0x3a06fa,'companyId':_0x282c43,'message':_0x2d5f42}});return _0x55eb0f&&_0x55eb0f[_0x4645f6(0x190)]>0x0&&await Promise[_0x4645f6(0x192)](_0x55eb0f[_0x4645f6(0x17d)](async _0x5806bd=>{const _0x373f35=_0x4645f6;await FilesOptions_1[_0x373f35(0x18e)][_0x373f35(0x17c)]({..._0x5806bd,'fileId':_0x29ee99['id']});})),await _0x29ee99['reload']({'attributes':['id',_0x4645f6(0x16e),_0x4645f6(0x170),_0x4645f6(0x16f)],'include':['options',{'model':FilesOptions_1[_0x4645f6(0x18e)],'as':_0x4645f6(0x175),'attributes':['id',_0x4645f6(0x16e),'path']}]}),_0x29ee99;};function a402_0x452a(){const _0x27acb3=['hasOwnProperty','default','min','length','call','all','getOwnPropertyDescriptor','validate','601730OJgGde','Check-unique-name','491994dbEnSE','name','companyId','message','10Deijla','5858ItnRth','274RPijFe','yup','options','create','object','../../errors/AppError','string','shape','45uNzVHa','upsert','map','required','__esModule','prototype','__setModuleDefault','5681949caUplh','__importDefault','test','defineProperty','2945352OctHyb','__createBinding','get','__importStar','../../models/FilesOptions','1682382zPRGfk','1342208PpPDGy'];a402_0x452a=function(){return _0x27acb3;};return a402_0x452a();}exports[a402_0x343187(0x18e)]=CreateService;