'use strict';const a473_0xa7d4a6=a473_0x4e02;(function(_0x59b474,_0x7fb37d){const _0x1a5dd3=a473_0x4e02,_0x45e5c8=_0x59b474();while(!![]){try{const _0x3cb8df=-parseInt(_0x1a5dd3(0xef))/0x1*(-parseInt(_0x1a5dd3(0xea))/0x2)+-parseInt(_0x1a5dd3(0xde))/0x3+-parseInt(_0x1a5dd3(0xdf))/0x4*(-parseInt(_0x1a5dd3(0x101))/0x5)+parseInt(_0x1a5dd3(0xe6))/0x6*(parseInt(_0x1a5dd3(0xe0))/0x7)+parseInt(_0x1a5dd3(0x103))/0x8*(-parseInt(_0x1a5dd3(0x105))/0x9)+parseInt(_0x1a5dd3(0xf8))/0xa*(-parseInt(_0x1a5dd3(0xf5))/0xb)+parseInt(_0x1a5dd3(0xf3))/0xc;if(_0x3cb8df===_0x7fb37d)break;else _0x45e5c8['push'](_0x45e5c8['shift']());}catch(_0x39758b){_0x45e5c8['push'](_0x45e5c8['shift']());}}}(a473_0x26a8,0x4a197));function a473_0x26a8(){const _0x69038c=['defineProperty','3147720ASWIYe','./ShowService','61006IhPfOR','__importStar','create','20zzErbQ','length','message','object','prototype','validate','upsert','Check-unique-name','findOne','112790SFhdcJ','default','248tFGpuW','shape','59742iTaKwn','184812xPlJsG','8PrhYCb','4718hwqKAd','hasOwnProperty','all','required','ERR_RATING_NAME_ALREADY_EXISTS','writable','1014INqKYU','yup','getOwnPropertyDescriptor','__esModule','321306Hxhkzq','map','../../models/Files','get','configurable','1sXQNcp','../../models/FilesOptions','test'];a473_0x26a8=function(){return _0x69038c;};return a473_0x26a8();}var __createBinding=this&&this['__createBinding']||(Object[a473_0xa7d4a6(0xf7)]?function(_0x2599b8,_0x4be970,_0xf7dd97,_0x32afe9){const _0x34555d=a473_0xa7d4a6;if(_0x32afe9===undefined)_0x32afe9=_0xf7dd97;var _0x11fb51=Object[_0x34555d(0xe8)](_0x4be970,_0xf7dd97);(!_0x11fb51||(_0x34555d(0xed)in _0x11fb51?!_0x4be970[_0x34555d(0xe9)]:_0x11fb51[_0x34555d(0xe5)]||_0x11fb51[_0x34555d(0xee)]))&&(_0x11fb51={'enumerable':!![],'get':function(){return _0x4be970[_0xf7dd97];}}),Object['defineProperty'](_0x2599b8,_0x32afe9,_0x11fb51);}:function(_0x2be8a9,_0x551d2e,_0x2fde56,_0xf4b3d4){if(_0xf4b3d4===undefined)_0xf4b3d4=_0x2fde56;_0x2be8a9[_0xf4b3d4]=_0x551d2e[_0x2fde56];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a473_0xa7d4a6(0xf7)]?function(_0x4a3ad8,_0x450815){const _0x59ee7=a473_0xa7d4a6;Object[_0x59ee7(0xf2)](_0x4a3ad8,_0x59ee7(0x102),{'enumerable':!![],'value':_0x450815});}:function(_0x489164,_0x4ec5ec){const _0x3084b7=a473_0xa7d4a6;_0x489164[_0x3084b7(0x102)]=_0x4ec5ec;}),__importStar=this&&this[a473_0xa7d4a6(0xf6)]||function(_0x36a388){const _0x1d7f38=a473_0xa7d4a6;if(_0x36a388&&_0x36a388[_0x1d7f38(0xe9)])return _0x36a388;var _0x2218a8={};if(_0x36a388!=null){for(var _0x5eb4ad in _0x36a388)if(_0x5eb4ad!==_0x1d7f38(0x102)&&Object[_0x1d7f38(0xfc)][_0x1d7f38(0xe1)]['call'](_0x36a388,_0x5eb4ad))__createBinding(_0x2218a8,_0x36a388,_0x5eb4ad);}return __setModuleDefault(_0x2218a8,_0x36a388),_0x2218a8;},__importDefault=this&&this['__importDefault']||function(_0x5aa167){const _0x17ef49=a473_0xa7d4a6;return _0x5aa167&&_0x5aa167[_0x17ef49(0xe9)]?_0x5aa167:{'default':_0x5aa167};};Object[a473_0xa7d4a6(0xf2)](exports,a473_0xa7d4a6(0xe9),{'value':!![]});function a473_0x4e02(_0x5a7c94,_0x43d637){const _0x26a85a=a473_0x26a8();return a473_0x4e02=function(_0x4e0279,_0x3ffc06){_0x4e0279=_0x4e0279-0xde;let _0x3d540a=_0x26a85a[_0x4e0279];return _0x3d540a;},a473_0x4e02(_0x5a7c94,_0x43d637);}const Yup=__importStar(require(a473_0xa7d4a6(0xe7))),AppError_1=__importDefault(require('../../errors/AppError')),Files_1=__importDefault(require(a473_0xa7d4a6(0xec))),FilesOptions_1=__importDefault(require(a473_0xa7d4a6(0xf0))),ShowService_1=__importDefault(require(a473_0xa7d4a6(0xf4))),CreateService=async({name:_0x4b5db4,message:_0x11ef80,companyId:_0x574b76,options:_0x4cc54c})=>{const _0x556837=a473_0xa7d4a6,_0x1d8bf0=Yup[_0x556837(0xfb)]()[_0x556837(0x104)]({'name':Yup['string']()[_0x556837(0xe3)]()['min'](0x3)[_0x556837(0xf1)](_0x556837(0xff),_0x556837(0xe4),async _0x174611=>{const _0x537e94=_0x556837;if(_0x174611){const _0x46671f=await Files_1[_0x537e94(0x102)][_0x537e94(0x100)]({'where':{'name':_0x174611,'companyId':_0x574b76}});return!_0x46671f;}return![];})});try{await _0x1d8bf0[_0x556837(0xfd)]({'name':_0x4b5db4});}catch(_0x50d72e){throw new AppError_1[(_0x556837(0x102))](_0x50d72e[_0x556837(0xfa)]);}let _0x19086d=await Files_1[_0x556837(0x102)][_0x556837(0xf7)]({'name':_0x4b5db4,'message':_0x11ef80,'companyId':_0x574b76});return _0x4cc54c&&_0x4cc54c[_0x556837(0xf9)]>0x0&&await Promise[_0x556837(0xe2)](_0x4cc54c[_0x556837(0xeb)](async _0x2d184d=>{const _0x54cb74=_0x556837;await FilesOptions_1[_0x54cb74(0x102)][_0x54cb74(0xfe)]({..._0x2d184d,'fileId':_0x19086d['id']});})),_0x19086d=await(0x0,ShowService_1[_0x556837(0x102)])(_0x19086d['id'],_0x574b76),_0x19086d;};exports[a473_0xa7d4a6(0x102)]=CreateService;