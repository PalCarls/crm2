'use strict';function a456_0x35c1(){const _0x1a4f1c=['prototype','hasOwnProperty','19568560GPyYsE','195296SWQNFh','5635hUnker','upsert','yup','../../models/Files','1513311ZFGque','findOne','validate','__importDefault','required','object','message','writable','Check-unique-name','min','create','2908680xEiqOG','../../models/FilesOptions','test','133GdDzMl','1BcBRci','call','__setModuleDefault','default','4454352kHRGbt','string','configurable','ERR_RATING_NAME_ALREADY_EXISTS','length','1052FQxVkc','defineProperty','740890EBZOxI','__esModule','all'];a456_0x35c1=function(){return _0x1a4f1c;};return a456_0x35c1();}const a456_0x46f679=a456_0x2f63;(function(_0x2db7d3,_0x5083a9){const _0xa64066=a456_0x2f63,_0x5468cb=_0x2db7d3();while(!![]){try{const _0x3b9573=parseInt(_0xa64066(0xf3))/0x1*(-parseInt(_0xa64066(0xfe))/0x2)+-parseInt(_0xa64066(0xe4))/0x3+-parseInt(_0xa64066(0xfc))/0x4*(parseInt(_0xa64066(0x105))/0x5)+-parseInt(_0xa64066(0xef))/0x6+-parseInt(_0xa64066(0xf2))/0x7*(-parseInt(_0xa64066(0x104))/0x8)+-parseInt(_0xa64066(0xf7))/0x9+parseInt(_0xa64066(0x103))/0xa;if(_0x3b9573===_0x5083a9)break;else _0x5468cb['push'](_0x5468cb['shift']());}catch(_0x636a1){_0x5468cb['push'](_0x5468cb['shift']());}}}(a456_0x35c1,0x41d7d));function a456_0x2f63(_0x3c58a3,_0x304cff){const _0x35c112=a456_0x35c1();return a456_0x2f63=function(_0x2f636b,_0x2de5af){_0x2f636b=_0x2f636b-0xe3;let _0x410296=_0x35c112[_0x2f636b];return _0x410296;},a456_0x2f63(_0x3c58a3,_0x304cff);}var __createBinding=this&&this['__createBinding']||(Object[a456_0x46f679(0xee)]?function(_0x4854cc,_0x194ea3,_0x8efc74,_0x3c5d27){const _0x1ba658=a456_0x46f679;if(_0x3c5d27===undefined)_0x3c5d27=_0x8efc74;var _0xbfc582=Object['getOwnPropertyDescriptor'](_0x194ea3,_0x8efc74);(!_0xbfc582||('get'in _0xbfc582?!_0x194ea3[_0x1ba658(0xff)]:_0xbfc582[_0x1ba658(0xeb)]||_0xbfc582[_0x1ba658(0xf9)]))&&(_0xbfc582={'enumerable':!![],'get':function(){return _0x194ea3[_0x8efc74];}}),Object[_0x1ba658(0xfd)](_0x4854cc,_0x3c5d27,_0xbfc582);}:function(_0x390596,_0x227b9f,_0x2b301b,_0x332046){if(_0x332046===undefined)_0x332046=_0x2b301b;_0x390596[_0x332046]=_0x227b9f[_0x2b301b];}),__setModuleDefault=this&&this[a456_0x46f679(0xf5)]||(Object[a456_0x46f679(0xee)]?function(_0xf803ea,_0x54ad9f){const _0x577905=a456_0x46f679;Object['defineProperty'](_0xf803ea,_0x577905(0xf6),{'enumerable':!![],'value':_0x54ad9f});}:function(_0x3e0194,_0x289f15){const _0x32ff95=a456_0x46f679;_0x3e0194[_0x32ff95(0xf6)]=_0x289f15;}),__importStar=this&&this['__importStar']||function(_0x315049){const _0x3ab143=a456_0x46f679;if(_0x315049&&_0x315049[_0x3ab143(0xff)])return _0x315049;var _0x5e13af={};if(_0x315049!=null){for(var _0x2d2b45 in _0x315049)if(_0x2d2b45!=='default'&&Object[_0x3ab143(0x101)][_0x3ab143(0x102)][_0x3ab143(0xf4)](_0x315049,_0x2d2b45))__createBinding(_0x5e13af,_0x315049,_0x2d2b45);}return __setModuleDefault(_0x5e13af,_0x315049),_0x5e13af;},__importDefault=this&&this[a456_0x46f679(0xe7)]||function(_0x180aa3){const _0x346fab=a456_0x46f679;return _0x180aa3&&_0x180aa3[_0x346fab(0xff)]?_0x180aa3:{'default':_0x180aa3};};Object['defineProperty'](exports,a456_0x46f679(0xff),{'value':!![]});const Yup=__importStar(require(a456_0x46f679(0x107))),AppError_1=__importDefault(require('../../errors/AppError')),Files_1=__importDefault(require(a456_0x46f679(0xe3))),FilesOptions_1=__importDefault(require(a456_0x46f679(0xf0))),ShowService_1=__importDefault(require('./ShowService')),CreateService=async({name:_0x1afee3,message:_0x5cc639,companyId:_0x52ff49,options:_0x183f9f})=>{const _0x4814ec=a456_0x46f679,_0xe1492a=Yup[_0x4814ec(0xe9)]()['shape']({'name':Yup[_0x4814ec(0xf8)]()[_0x4814ec(0xe8)]()[_0x4814ec(0xed)](0x3)[_0x4814ec(0xf1)](_0x4814ec(0xec),_0x4814ec(0xfa),async _0x50f925=>{const _0x50ccec=_0x4814ec;if(_0x50f925){const _0x19a2f2=await Files_1['default'][_0x50ccec(0xe5)]({'where':{'name':_0x50f925,'companyId':_0x52ff49}});return!_0x19a2f2;}return![];})});try{await _0xe1492a[_0x4814ec(0xe6)]({'name':_0x1afee3});}catch(_0x290d89){throw new AppError_1[(_0x4814ec(0xf6))](_0x290d89[_0x4814ec(0xea)]);}let _0x2ebe25=await Files_1[_0x4814ec(0xf6)][_0x4814ec(0xee)]({'name':_0x1afee3,'message':_0x5cc639,'companyId':_0x52ff49});return _0x183f9f&&_0x183f9f[_0x4814ec(0xfb)]>0x0&&await Promise[_0x4814ec(0x100)](_0x183f9f['map'](async _0x1218c8=>{const _0x17c709=_0x4814ec;await FilesOptions_1[_0x17c709(0xf6)][_0x17c709(0x106)]({..._0x1218c8,'fileId':_0x2ebe25['id']});})),_0x2ebe25=await(0x0,ShowService_1[_0x4814ec(0xf6)])(_0x2ebe25['id'],_0x52ff49),_0x2ebe25;};exports['default']=CreateService;