'use strict';function a450_0x14be(){const _0x2539cf=['all','27VNSWIR','58350tiBlgt','map','min','__importDefault','2031073maLNBU','shape','default','configurable','20uGKyKY','__esModule','writable','1028403RpPpmM','getOwnPropertyDescriptor','message','160504uFdNGm','findOne','string','length','ERR_RATING_NAME_ALREADY_EXISTS','1654940GmSefW','4BqCovp','../../models/Files','defineProperty','47118VfDokZ','./ShowService','required','create','../../models/FilesOptions','429330hApUMr','90ofkZSj','hasOwnProperty','get','upsert','test','validate','__createBinding','Check-unique-name','object'];a450_0x14be=function(){return _0x2539cf;};return a450_0x14be();}const a450_0x221287=a450_0x3412;(function(_0x54dad4,_0x4632a7){const _0x4ea901=a450_0x3412,_0x39ad47=_0x54dad4();while(!![]){try{const _0x247ebe=-parseInt(_0x4ea901(0x16d))/0x1+parseInt(_0x4ea901(0x168))/0x2+parseInt(_0x4ea901(0x15c))/0x3*(parseInt(_0x4ea901(0x165))/0x4)+-parseInt(_0x4ea901(0x151))/0x5*(-parseInt(_0x4ea901(0x16e))/0x6)+-parseInt(_0x4ea901(0x164))/0x7+parseInt(_0x4ea901(0x15f))/0x8*(parseInt(_0x4ea901(0x150))/0x9)+parseInt(_0x4ea901(0x159))/0xa*(parseInt(_0x4ea901(0x155))/0xb);if(_0x247ebe===_0x4632a7)break;else _0x39ad47['push'](_0x39ad47['shift']());}catch(_0x4affa9){_0x39ad47['push'](_0x39ad47['shift']());}}}(a450_0x14be,0x4a7ef));var __createBinding=this&&this[a450_0x221287(0x14c)]||(Object[a450_0x221287(0x16b)]?function(_0x42f730,_0xec1ce0,_0x4c1bb1,_0x577d7f){const _0x19b6e2=a450_0x221287;if(_0x577d7f===undefined)_0x577d7f=_0x4c1bb1;var _0x3d8731=Object[_0x19b6e2(0x15d)](_0xec1ce0,_0x4c1bb1);(!_0x3d8731||(_0x19b6e2(0x148)in _0x3d8731?!_0xec1ce0[_0x19b6e2(0x15a)]:_0x3d8731[_0x19b6e2(0x15b)]||_0x3d8731[_0x19b6e2(0x158)]))&&(_0x3d8731={'enumerable':!![],'get':function(){return _0xec1ce0[_0x4c1bb1];}}),Object[_0x19b6e2(0x167)](_0x42f730,_0x577d7f,_0x3d8731);}:function(_0x18a1e3,_0x56e3ec,_0x128c4e,_0x520114){if(_0x520114===undefined)_0x520114=_0x128c4e;_0x18a1e3[_0x520114]=_0x56e3ec[_0x128c4e];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a450_0x221287(0x16b)]?function(_0x483f8c,_0x5865fb){const _0x279ffb=a450_0x221287;Object['defineProperty'](_0x483f8c,_0x279ffb(0x157),{'enumerable':!![],'value':_0x5865fb});}:function(_0x43853b,_0x43302d){const _0x293929=a450_0x221287;_0x43853b[_0x293929(0x157)]=_0x43302d;}),__importStar=this&&this['__importStar']||function(_0x3f808b){const _0x15501c=a450_0x221287;if(_0x3f808b&&_0x3f808b[_0x15501c(0x15a)])return _0x3f808b;var _0x123221={};if(_0x3f808b!=null){for(var _0x5cfade in _0x3f808b)if(_0x5cfade!==_0x15501c(0x157)&&Object['prototype'][_0x15501c(0x16f)]['call'](_0x3f808b,_0x5cfade))__createBinding(_0x123221,_0x3f808b,_0x5cfade);}return __setModuleDefault(_0x123221,_0x3f808b),_0x123221;},__importDefault=this&&this[a450_0x221287(0x154)]||function(_0x2c4646){const _0x2a57ca=a450_0x221287;return _0x2c4646&&_0x2c4646[_0x2a57ca(0x15a)]?_0x2c4646:{'default':_0x2c4646};};Object[a450_0x221287(0x167)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),Files_1=__importDefault(require(a450_0x221287(0x166))),FilesOptions_1=__importDefault(require(a450_0x221287(0x16c))),ShowService_1=__importDefault(require(a450_0x221287(0x169))),CreateService=async({name:_0x519272,message:_0x50cdb9,companyId:_0x299563,options:_0x27b4c5})=>{const _0x4a14fb=a450_0x221287,_0xa62c47=Yup[_0x4a14fb(0x14e)]()[_0x4a14fb(0x156)]({'name':Yup[_0x4a14fb(0x161)]()[_0x4a14fb(0x16a)]()[_0x4a14fb(0x153)](0x3)[_0x4a14fb(0x14a)](_0x4a14fb(0x14d),_0x4a14fb(0x163),async _0x45cdc7=>{const _0x4e161c=_0x4a14fb;if(_0x45cdc7){const _0x1c516a=await Files_1['default'][_0x4e161c(0x160)]({'where':{'name':_0x45cdc7,'companyId':_0x299563}});return!_0x1c516a;}return![];})});try{await _0xa62c47[_0x4a14fb(0x14b)]({'name':_0x519272});}catch(_0x24bbd5){throw new AppError_1['default'](_0x24bbd5[_0x4a14fb(0x15e)]);}let _0x5c2659=await Files_1['default'][_0x4a14fb(0x16b)]({'name':_0x519272,'message':_0x50cdb9,'companyId':_0x299563});return _0x27b4c5&&_0x27b4c5[_0x4a14fb(0x162)]>0x0&&await Promise[_0x4a14fb(0x14f)](_0x27b4c5[_0x4a14fb(0x152)](async _0x2f5267=>{const _0x4960c7=_0x4a14fb;await FilesOptions_1[_0x4960c7(0x157)][_0x4960c7(0x149)]({..._0x2f5267,'fileId':_0x5c2659['id']});})),_0x5c2659=await(0x0,ShowService_1[_0x4a14fb(0x157)])(_0x5c2659['id'],_0x299563),_0x5c2659;};function a450_0x3412(_0x4817ce,_0x1d0eef){const _0x14bead=a450_0x14be();return a450_0x3412=function(_0x3412c2,_0x5ea5a7){_0x3412c2=_0x3412c2-0x148;let _0x39bf89=_0x14bead[_0x3412c2];return _0x39bf89;},a450_0x3412(_0x4817ce,_0x1d0eef);}exports[a450_0x221287(0x157)]=CreateService;