'use strict';const a542_0xb78b1c=a542_0x17be;(function(_0x578efb,_0x4c79ae){const _0x1650e5=a542_0x17be,_0xc14762=_0x578efb();while(!![]){try{const _0x277ad1=parseInt(_0x1650e5(0x1af))/0x1*(parseInt(_0x1650e5(0x1bc))/0x2)+-parseInt(_0x1650e5(0x1a7))/0x3*(parseInt(_0x1650e5(0x197))/0x4)+-parseInt(_0x1650e5(0x1b6))/0x5*(-parseInt(_0x1650e5(0x1bb))/0x6)+parseInt(_0x1650e5(0x19b))/0x7+parseInt(_0x1650e5(0x1c1))/0x8+-parseInt(_0x1650e5(0x1ae))/0x9*(parseInt(_0x1650e5(0x1c5))/0xa)+-parseInt(_0x1650e5(0x1bd))/0xb*(parseInt(_0x1650e5(0x1ba))/0xc);if(_0x277ad1===_0x4c79ae)break;else _0xc14762['push'](_0xc14762['shift']());}catch(_0x478a4b){_0xc14762['push'](_0xc14762['shift']());}}}(a542_0x5c16,0x2af69));function a542_0x17be(_0x1ea492,_0x2b0d26){const _0x5c162f=a542_0x5c16();return a542_0x17be=function(_0x17be1b,_0x1b39d5){_0x17be1b=_0x17be1b-0x196;let _0x3cb6c0=_0x5c162f[_0x17be1b];return _0x3cb6c0;},a542_0x17be(_0x1ea492,_0x2b0d26);}var __createBinding=this&&this[a542_0xb78b1c(0x1cd)]||(Object[a542_0xb78b1c(0x19a)]?function(_0x4fa92c,_0x5700ca,_0x2ea5fa,_0x4b97ef){const _0x325d73=a542_0xb78b1c;if(_0x4b97ef===undefined)_0x4b97ef=_0x2ea5fa;var _0x52793d=Object[_0x325d73(0x1a2)](_0x5700ca,_0x2ea5fa);(!_0x52793d||(_0x325d73(0x1b1)in _0x52793d?!_0x5700ca['__esModule']:_0x52793d[_0x325d73(0x1c0)]||_0x52793d[_0x325d73(0x1a9)]))&&(_0x52793d={'enumerable':!![],'get':function(){return _0x5700ca[_0x2ea5fa];}}),Object[_0x325d73(0x1b0)](_0x4fa92c,_0x4b97ef,_0x52793d);}:function(_0x579d47,_0x13997d,_0x41af79,_0x13a7f6){if(_0x13a7f6===undefined)_0x13a7f6=_0x41af79;_0x579d47[_0x13a7f6]=_0x13997d[_0x41af79];}),__setModuleDefault=this&&this[a542_0xb78b1c(0x196)]||(Object[a542_0xb78b1c(0x19a)]?function(_0x3e8292,_0x22b14c){const _0x3dbce0=a542_0xb78b1c;Object[_0x3dbce0(0x1b0)](_0x3e8292,'default',{'enumerable':!![],'value':_0x22b14c});}:function(_0x35f49a,_0x1f4ac8){_0x35f49a['default']=_0x1f4ac8;}),__importStar=this&&this[a542_0xb78b1c(0x1c2)]||function(_0x4944ed){const _0x238f47=a542_0xb78b1c;if(_0x4944ed&&_0x4944ed[_0x238f47(0x1c8)])return _0x4944ed;var _0x3f834b={};if(_0x4944ed!=null){for(var _0x5d8ee2 in _0x4944ed)if(_0x5d8ee2!==_0x238f47(0x1c7)&&Object['prototype'][_0x238f47(0x1ca)][_0x238f47(0x1b7)](_0x4944ed,_0x5d8ee2))__createBinding(_0x3f834b,_0x4944ed,_0x5d8ee2);}return __setModuleDefault(_0x3f834b,_0x4944ed),_0x3f834b;},__importDefault=this&&this[a542_0xb78b1c(0x1a6)]||function(_0x178f65){const _0x43ec45=a542_0xb78b1c;return _0x178f65&&_0x178f65[_0x43ec45(0x1c8)]?_0x178f65:{'default':_0x178f65};};Object[a542_0xb78b1c(0x1b0)](exports,'__esModule',{'value':!![]});const Sentry=__importStar(require(a542_0xb78b1c(0x19d))),GetDefaultWhatsApp_1=__importDefault(require(a542_0xb78b1c(0x19c))),wbot_1=require(a542_0xb78b1c(0x1bf)),Contact_1=__importDefault(require('../../models/Contact')),logger_1=require(a542_0xb78b1c(0x1b2)),ShowBaileysService_1=__importDefault(require(a542_0xb78b1c(0x199))),CreateContactService_1=__importDefault(require(a542_0xb78b1c(0x1c6))),lodash_1=require(a542_0xb78b1c(0x1a3)),path_1=__importDefault(require('path')),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x32c510=>{const _0x222dd7=a542_0xb78b1c,_0xe73848=await(0x0,GetDefaultWhatsApp_1[_0x222dd7(0x1c7)])(_0x32c510),_0x3470df=(0x0,wbot_1['getWbot'])(_0xe73848['id']);let _0x3c89d6;try{const _0x30cba8=await(0x0,ShowBaileysService_1[_0x222dd7(0x1c7)])(_0x3470df['id']);_0x3c89d6=JSON['parse'](JSON['stringify'](_0x30cba8[_0x222dd7(0x1a5)]));const _0x3b143b=path_1[_0x222dd7(0x1c7)][_0x222dd7(0x1a0)](__dirname,'..','..','..',_0x222dd7(0x1b4)),_0x583c3e=path_1[_0x222dd7(0x1c7)][_0x222dd7(0x1a4)](_0x3b143b,_0x222dd7(0x19e));fs_1[_0x222dd7(0x1c7)][_0x222dd7(0x1b3)](_0x583c3e,JSON[_0x222dd7(0x1b5)](_0x3c89d6,null,0x2),_0x589e15=>{const _0x4d47e3=_0x222dd7;if(_0x589e15){logger_1[_0x4d47e3(0x1cb)][_0x4d47e3(0x1ad)]('Failed\x20to\x20write\x20contacts\x20to\x20file:\x20'+_0x589e15);throw _0x589e15;}console[_0x4d47e3(0x1a8)](_0x4d47e3(0x19f));});}catch(_0x44ea0a){Sentry[_0x222dd7(0x1ac)](_0x44ea0a),logger_1['logger']['error'](_0x222dd7(0x198)+_0x44ea0a);}const _0x3cc8b6=path_1[_0x222dd7(0x1c7)][_0x222dd7(0x1a0)](__dirname,'..','..','..',_0x222dd7(0x1b4)),_0x443509=path_1['default'][_0x222dd7(0x1a4)](_0x3cc8b6,_0x222dd7(0x1be));fs_1[_0x222dd7(0x1c7)]['writeFile'](_0x443509,JSON[_0x222dd7(0x1b5)](_0x3c89d6,null,0x2),_0x1be4f0=>{const _0xb6d9c=_0x222dd7;if(_0x1be4f0){logger_1[_0xb6d9c(0x1cb)][_0xb6d9c(0x1ad)](_0xb6d9c(0x1b8)+_0x1be4f0);throw _0x1be4f0;}console[_0xb6d9c(0x1a8)](_0xb6d9c(0x1aa));});const _0x256e1f=(0x0,lodash_1[_0x222dd7(0x1ab)])(_0x3c89d6)?JSON[_0x222dd7(0x1c3)](_0x3c89d6):_0x3c89d6;(0x0,lodash_1['isArray'])(_0x256e1f)&&_0x256e1f[_0x222dd7(0x1ce)](async({id:_0x251eac,name:_0x638ec4,notify:_0x2730b6})=>{const _0x3dac59=_0x222dd7;if(_0x251eac===_0x3dac59(0x1cc)||_0x251eac[_0x3dac59(0x1b9)]('g.us'))return;const _0x3ff52c=_0x251eac[_0x3dac59(0x1c4)](/\D/g,''),_0x1a6e90=await Contact_1[_0x3dac59(0x1c7)]['findOne']({'where':{'number':_0x3ff52c,'companyId':_0x32c510}});if(_0x1a6e90)_0x1a6e90[_0x3dac59(0x1c9)]=_0x638ec4||_0x2730b6,await _0x1a6e90[_0x3dac59(0x1a1)]();else try{await(0x0,CreateContactService_1[_0x3dac59(0x1c7)])({'number':_0x3ff52c,'name':_0x638ec4||_0x2730b6,'companyId':_0x32c510});}catch(_0x3f1412){Sentry[_0x3dac59(0x1ac)](_0x3f1412),logger_1[_0x3dac59(0x1cb)][_0x3dac59(0x1cf)](_0x3dac59(0x198)+_0x3f1412);}});};exports[a542_0xb78b1c(0x1c7)]=ImportContactsService;function a542_0x5c16(){const _0x45c52c=['parse','replace','287540UXreEb','../ContactServices/CreateContactService','default','__esModule','name','hasOwnProperty','logger','status@broadcast','__createBinding','forEach','warn','__setModuleDefault','633836pjSDUe','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','../BaileysServices/ShowBaileysService','create','1357566CfrzpB','../../helpers/GetDefaultWhatsApp','@sentry/node','contatos_antes.txt','O\x20arquivo\x20contatos_antes.txt\x20foi\x20criado!','resolve','save','getOwnPropertyDescriptor','lodash','join','contacts','__importDefault','6DOqRFu','log','configurable','O\x20arquivo\x20contatos_depois.txt\x20foi\x20criado!','isString','captureException','error','63PWfkqH','7737WMQUZN','defineProperty','get','../../utils/logger','writeFile','public','stringify','381825cUpLOq','call','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','includes','312WyzlZA','6ZEcLMi','44ngxbEq','1639nBAagI','contatos_depois.txt','../../libs/wbot','writable','2060240edAoae','__importStar'];a542_0x5c16=function(){return _0x45c52c;};return a542_0x5c16();}