'use strict';function a558_0x1dbc(_0x4bfefe,_0x3c9e32){const _0x2d691a=a558_0x2d69();return a558_0x1dbc=function(_0x1dbc4e,_0x39ac9e){_0x1dbc4e=_0x1dbc4e-0x119;let _0x146626=_0x2d691a[_0x1dbc4e];return _0x146626;},a558_0x1dbc(_0x4bfefe,_0x3c9e32);}const a558_0x58e027=a558_0x1dbc;(function(_0x5045bf,_0x2d5600){const _0x549bc4=a558_0x1dbc,_0x6ff3c7=_0x5045bf();while(!![]){try{const _0x5179c9=parseInt(_0x549bc4(0x149))/0x1+-parseInt(_0x549bc4(0x13d))/0x2*(-parseInt(_0x549bc4(0x123))/0x3)+parseInt(_0x549bc4(0x136))/0x4*(parseInt(_0x549bc4(0x125))/0x5)+parseInt(_0x549bc4(0x135))/0x6*(-parseInt(_0x549bc4(0x13e))/0x7)+-parseInt(_0x549bc4(0x145))/0x8+parseInt(_0x549bc4(0x14b))/0x9+-parseInt(_0x549bc4(0x14a))/0xa;if(_0x5179c9===_0x2d5600)break;else _0x6ff3c7['push'](_0x6ff3c7['shift']());}catch(_0x1e9f7c){_0x6ff3c7['push'](_0x6ff3c7['shift']());}}}(a558_0x2d69,0xc1aa1));var __createBinding=this&&this['__createBinding']||(Object[a558_0x58e027(0x11b)]?function(_0x18d1fd,_0x49bd0a,_0x5e2e3d,_0x57e5cf){const _0x82d8d5=a558_0x58e027;if(_0x57e5cf===undefined)_0x57e5cf=_0x5e2e3d;var _0x406542=Object['getOwnPropertyDescriptor'](_0x49bd0a,_0x5e2e3d);(!_0x406542||(_0x82d8d5(0x124)in _0x406542?!_0x49bd0a['__esModule']:_0x406542[_0x82d8d5(0x13b)]||_0x406542[_0x82d8d5(0x11d)]))&&(_0x406542={'enumerable':!![],'get':function(){return _0x49bd0a[_0x5e2e3d];}}),Object[_0x82d8d5(0x12c)](_0x18d1fd,_0x57e5cf,_0x406542);}:function(_0x226818,_0x5b35cc,_0x22221c,_0x58ae23){if(_0x58ae23===undefined)_0x58ae23=_0x22221c;_0x226818[_0x58ae23]=_0x5b35cc[_0x22221c];}),__setModuleDefault=this&&this[a558_0x58e027(0x143)]||(Object[a558_0x58e027(0x11b)]?function(_0x3ff3b2,_0x5e16d5){const _0x574948=a558_0x58e027;Object[_0x574948(0x12c)](_0x3ff3b2,_0x574948(0x146),{'enumerable':!![],'value':_0x5e16d5});}:function(_0x182d6c,_0xafdd9a){const _0x1cf959=a558_0x58e027;_0x182d6c[_0x1cf959(0x146)]=_0xafdd9a;}),__importStar=this&&this[a558_0x58e027(0x142)]||function(_0x2e7873){const _0x3fdc48=a558_0x58e027;if(_0x2e7873&&_0x2e7873[_0x3fdc48(0x140)])return _0x2e7873;var _0x2f4c45={};if(_0x2e7873!=null){for(var _0x546ec2 in _0x2e7873)if(_0x546ec2!==_0x3fdc48(0x146)&&Object[_0x3fdc48(0x121)][_0x3fdc48(0x126)]['call'](_0x2e7873,_0x546ec2))__createBinding(_0x2f4c45,_0x2e7873,_0x546ec2);}return __setModuleDefault(_0x2f4c45,_0x2e7873),_0x2f4c45;},__importDefault=this&&this['__importDefault']||function(_0x361e6d){const _0x40d546=a558_0x58e027;return _0x361e6d&&_0x361e6d[_0x40d546(0x140)]?_0x361e6d:{'default':_0x361e6d};};Object['defineProperty'](exports,a558_0x58e027(0x140),{'value':!![]});const Sentry=__importStar(require('@sentry/node')),GetDefaultWhatsApp_1=__importDefault(require(a558_0x58e027(0x148))),wbot_1=require(a558_0x58e027(0x129)),Contact_1=__importDefault(require(a558_0x58e027(0x11c))),logger_1=require(a558_0x58e027(0x141)),ShowBaileysService_1=__importDefault(require('../BaileysServices/ShowBaileysService')),CreateContactService_1=__importDefault(require(a558_0x58e027(0x122))),lodash_1=require(a558_0x58e027(0x13f)),path_1=__importDefault(require('path')),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x3132b8=>{const _0x1e7d6f=a558_0x58e027,_0x394704=await(0x0,GetDefaultWhatsApp_1[_0x1e7d6f(0x146)])(_0x3132b8),_0x54c9a4=(0x0,wbot_1[_0x1e7d6f(0x131)])(_0x394704['id']);let _0x3f132e;try{const _0x24c5a3=await(0x0,ShowBaileysService_1[_0x1e7d6f(0x146)])(_0x54c9a4['id']);_0x3f132e=JSON[_0x1e7d6f(0x13a)](JSON['stringify'](_0x24c5a3[_0x1e7d6f(0x139)]));const _0x2a0b3b=path_1['default'][_0x1e7d6f(0x11a)](__dirname,'..','..','..',_0x1e7d6f(0x132)),_0x1f0f2c=path_1[_0x1e7d6f(0x146)]['join'](_0x2a0b3b,_0x1e7d6f(0x11f));fs_1[_0x1e7d6f(0x146)][_0x1e7d6f(0x133)](_0x1f0f2c,JSON['stringify'](_0x3f132e,null,0x2),_0x4e5d0a=>{const _0xe5948=_0x1e7d6f;if(_0x4e5d0a){logger_1[_0xe5948(0x120)][_0xe5948(0x12a)]('Failed\x20to\x20write\x20contacts\x20to\x20file:\x20'+_0x4e5d0a);throw _0x4e5d0a;}console[_0xe5948(0x12d)](_0xe5948(0x138));});}catch(_0x332e9f){Sentry[_0x1e7d6f(0x134)](_0x332e9f),logger_1[_0x1e7d6f(0x120)][_0x1e7d6f(0x12a)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x332e9f);}const _0x1aa85e=path_1[_0x1e7d6f(0x146)][_0x1e7d6f(0x11a)](__dirname,'..','..','..',_0x1e7d6f(0x132)),_0x293354=path_1[_0x1e7d6f(0x146)][_0x1e7d6f(0x144)](_0x1aa85e,_0x1e7d6f(0x12b));fs_1[_0x1e7d6f(0x146)][_0x1e7d6f(0x133)](_0x293354,JSON[_0x1e7d6f(0x130)](_0x3f132e,null,0x2),_0x3af7d8=>{const _0x1385ad=_0x1e7d6f;if(_0x3af7d8){logger_1[_0x1385ad(0x120)][_0x1385ad(0x12a)](_0x1385ad(0x12f)+_0x3af7d8);throw _0x3af7d8;}console['log']('O\x20arquivo\x20contatos_depois.txt\x20foi\x20criado!');});const _0x1aa41d=(0x0,lodash_1[_0x1e7d6f(0x13c)])(_0x3f132e)?JSON[_0x1e7d6f(0x13a)](_0x3f132e):_0x3f132e;(0x0,lodash_1['isArray'])(_0x1aa41d)&&_0x1aa41d[_0x1e7d6f(0x127)](async({id:_0x10fccc,name:_0x59e889,notify:_0x873991})=>{const _0x27b93e=_0x1e7d6f;if(_0x10fccc==='status@broadcast'||_0x10fccc[_0x27b93e(0x119)]('g.us'))return;const _0x3d4435=_0x10fccc[_0x27b93e(0x147)](/\D/g,''),_0xdc392a=await Contact_1[_0x27b93e(0x146)][_0x27b93e(0x12e)]({'where':{'number':_0x3d4435,'companyId':_0x3132b8}});if(_0xdc392a)_0xdc392a['name']=_0x59e889||_0x873991,await _0xdc392a[_0x27b93e(0x128)]();else try{await(0x0,CreateContactService_1[_0x27b93e(0x146)])({'number':_0x3d4435,'name':_0x59e889||_0x873991,'companyId':_0x3132b8});}catch(_0x1adec2){Sentry[_0x27b93e(0x134)](_0x1adec2),logger_1[_0x27b93e(0x120)][_0x27b93e(0x11e)](_0x27b93e(0x137)+_0x1adec2);}});};exports[a558_0x58e027(0x146)]=ImportContactsService;function a558_0x2d69(){const _0x2201a9=['forEach','save','../../libs/wbot','error','contatos_depois.txt','defineProperty','log','findOne','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','stringify','getWbot','public','writeFile','captureException','6bjOWVn','40676zFKqMe','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','O\x20arquivo\x20contatos_antes.txt\x20foi\x20criado!','contacts','parse','writable','isString','1978AfljAc','7608013dfWorL','lodash','__esModule','../../utils/logger','__importStar','__setModuleDefault','join','4049376anOnXR','default','replace','../../helpers/GetDefaultWhatsApp','963720OQbWSC','6477980OZjqrU','2683755bbqLPX','includes','resolve','create','../../models/Contact','configurable','warn','contatos_antes.txt','logger','prototype','../ContactServices/CreateContactService','4296CzgBfR','get','175jPBtDi','hasOwnProperty'];a558_0x2d69=function(){return _0x2201a9;};return a558_0x2d69();}