'use strict';const a541_0x11f709=a541_0x1509;(function(_0x225a75,_0x1e0a65){const _0xe3285f=a541_0x1509,_0x249ce0=_0x225a75();while(!![]){try{const _0x1c2f68=-parseInt(_0xe3285f(0x184))/0x1+-parseInt(_0xe3285f(0x174))/0x2*(parseInt(_0xe3285f(0x193))/0x3)+parseInt(_0xe3285f(0x1a5))/0x4+parseInt(_0xe3285f(0x190))/0x5+parseInt(_0xe3285f(0x18f))/0x6*(-parseInt(_0xe3285f(0x1a6))/0x7)+-parseInt(_0xe3285f(0x175))/0x8*(-parseInt(_0xe3285f(0x1a0))/0x9)+-parseInt(_0xe3285f(0x180))/0xa;if(_0x1c2f68===_0x1e0a65)break;else _0x249ce0['push'](_0x249ce0['shift']());}catch(_0x3c1e72){_0x249ce0['push'](_0x249ce0['shift']());}}}(a541_0x2489,0xa63bd));var __createBinding=this&&this[a541_0x11f709(0x176)]||(Object['create']?function(_0x220f6a,_0x2ebed6,_0x5af1b4,_0x2d7cca){const _0x355a54=a541_0x11f709;if(_0x2d7cca===undefined)_0x2d7cca=_0x5af1b4;var _0x38f5e2=Object['getOwnPropertyDescriptor'](_0x2ebed6,_0x5af1b4);(!_0x38f5e2||(_0x355a54(0x198)in _0x38f5e2?!_0x2ebed6['__esModule']:_0x38f5e2['writable']||_0x38f5e2['configurable']))&&(_0x38f5e2={'enumerable':!![],'get':function(){return _0x2ebed6[_0x5af1b4];}}),Object[_0x355a54(0x19f)](_0x220f6a,_0x2d7cca,_0x38f5e2);}:function(_0x54d82d,_0xd95fbb,_0x20cd0a,_0x2cb00c){if(_0x2cb00c===undefined)_0x2cb00c=_0x20cd0a;_0x54d82d[_0x2cb00c]=_0xd95fbb[_0x20cd0a];}),__setModuleDefault=this&&this[a541_0x11f709(0x18a)]||(Object[a541_0x11f709(0x187)]?function(_0x54332e,_0x1a20e1){const _0xb3851=a541_0x11f709;Object['defineProperty'](_0x54332e,_0xb3851(0x192),{'enumerable':!![],'value':_0x1a20e1});}:function(_0x457803,_0x34804b){const _0x3a7805=a541_0x11f709;_0x457803[_0x3a7805(0x192)]=_0x34804b;}),__importStar=this&&this['__importStar']||function(_0x14983f){const _0x121831=a541_0x11f709;if(_0x14983f&&_0x14983f[_0x121831(0x178)])return _0x14983f;var _0x389871={};if(_0x14983f!=null){for(var _0x1f5a32 in _0x14983f)if(_0x1f5a32!==_0x121831(0x192)&&Object[_0x121831(0x19c)]['hasOwnProperty'][_0x121831(0x1a4)](_0x14983f,_0x1f5a32))__createBinding(_0x389871,_0x14983f,_0x1f5a32);}return __setModuleDefault(_0x389871,_0x14983f),_0x389871;},__importDefault=this&&this[a541_0x11f709(0x17a)]||function(_0x282645){const _0x5d0963=a541_0x11f709;return _0x282645&&_0x282645[_0x5d0963(0x178)]?_0x282645:{'default':_0x282645};};Object[a541_0x11f709(0x19f)](exports,a541_0x11f709(0x178),{'value':!![]});function a541_0x2489(){const _0xee6d0a=['../BaileysServices/ShowBaileysService','warn','80140mDCbwQ','save','logger','../../helpers/GetDefaultWhatsApp','878097xaNdgH','isArray','log','create','resolve','@sentry/node','__setModuleDefault','stringify','getWbot','forEach','O\x20arquivo\x20contatos_antes.txt\x20foi\x20criado!','24WxvpOF','5021385qyZAVg','O\x20arquivo\x20contatos_depois.txt\x20foi\x20criado!','default','363tSsSLu','../../models/Contact','includes','parse','public','get','../ContactServices/CreateContactService','captureException','writeFile','prototype','name','contacts','defineProperty','9sGfjNi','isString','g.us','join','call','646872EOTJBT','668059cvEMlh','2042vajXtq','7250384Vyiudx','__createBinding','error','__esModule','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','__importDefault','findOne','replace','contatos_antes.txt'];a541_0x2489=function(){return _0xee6d0a;};return a541_0x2489();}const Sentry=__importStar(require(a541_0x11f709(0x189))),GetDefaultWhatsApp_1=__importDefault(require(a541_0x11f709(0x183))),wbot_1=require('../../libs/wbot'),Contact_1=__importDefault(require(a541_0x11f709(0x194))),logger_1=require('../../utils/logger'),ShowBaileysService_1=__importDefault(require(a541_0x11f709(0x17e))),CreateContactService_1=__importDefault(require(a541_0x11f709(0x199))),lodash_1=require('lodash'),path_1=__importDefault(require('path')),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x5b4817=>{const _0x4d91fd=a541_0x11f709,_0x1ebeb5=await(0x0,GetDefaultWhatsApp_1[_0x4d91fd(0x192)])(_0x5b4817),_0x4f8e04=(0x0,wbot_1[_0x4d91fd(0x18c)])(_0x1ebeb5['id']);let _0x128b53;try{const _0x45f6c6=await(0x0,ShowBaileysService_1[_0x4d91fd(0x192)])(_0x4f8e04['id']);_0x128b53=JSON['parse'](JSON[_0x4d91fd(0x18b)](_0x45f6c6[_0x4d91fd(0x19e)]));const _0x30b767=path_1[_0x4d91fd(0x192)][_0x4d91fd(0x188)](__dirname,'..','..','..','public'),_0x3fa5f6=path_1[_0x4d91fd(0x192)][_0x4d91fd(0x1a3)](_0x30b767,_0x4d91fd(0x17d));fs_1[_0x4d91fd(0x192)]['writeFile'](_0x3fa5f6,JSON[_0x4d91fd(0x18b)](_0x128b53,null,0x2),_0x1edc02=>{const _0x435787=_0x4d91fd;if(_0x1edc02){logger_1[_0x435787(0x182)][_0x435787(0x177)](_0x435787(0x179)+_0x1edc02);throw _0x1edc02;}console[_0x435787(0x186)](_0x435787(0x18e));});}catch(_0x7399cf){Sentry[_0x4d91fd(0x19a)](_0x7399cf),logger_1[_0x4d91fd(0x182)][_0x4d91fd(0x177)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x7399cf);}const _0x39fc90=path_1[_0x4d91fd(0x192)]['resolve'](__dirname,'..','..','..',_0x4d91fd(0x197)),_0x6b76ff=path_1['default'][_0x4d91fd(0x1a3)](_0x39fc90,'contatos_depois.txt');fs_1[_0x4d91fd(0x192)][_0x4d91fd(0x19b)](_0x6b76ff,JSON[_0x4d91fd(0x18b)](_0x128b53,null,0x2),_0x299963=>{const _0x59ebd0=_0x4d91fd;if(_0x299963){logger_1['logger'][_0x59ebd0(0x177)](_0x59ebd0(0x179)+_0x299963);throw _0x299963;}console[_0x59ebd0(0x186)](_0x59ebd0(0x191));});const _0x1899c8=(0x0,lodash_1[_0x4d91fd(0x1a1)])(_0x128b53)?JSON[_0x4d91fd(0x196)](_0x128b53):_0x128b53;(0x0,lodash_1[_0x4d91fd(0x185)])(_0x1899c8)&&_0x1899c8[_0x4d91fd(0x18d)](async({id:_0x5e95f1,name:_0x395d46,notify:_0x18fa98})=>{const _0x53457b=_0x4d91fd;if(_0x5e95f1==='status@broadcast'||_0x5e95f1[_0x53457b(0x195)](_0x53457b(0x1a2)))return;const _0x3282ca=_0x5e95f1[_0x53457b(0x17c)](/\D/g,''),_0x1f612f=await Contact_1[_0x53457b(0x192)][_0x53457b(0x17b)]({'where':{'number':_0x3282ca,'companyId':_0x5b4817}});if(_0x1f612f)_0x1f612f[_0x53457b(0x19d)]=_0x395d46||_0x18fa98,await _0x1f612f[_0x53457b(0x181)]();else try{await(0x0,CreateContactService_1['default'])({'number':_0x3282ca,'name':_0x395d46||_0x18fa98,'companyId':_0x5b4817});}catch(_0xd8e819){Sentry['captureException'](_0xd8e819),logger_1['logger'][_0x53457b(0x17f)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0xd8e819);}});};function a541_0x1509(_0x55ecb3,_0x41e34d){const _0x248962=a541_0x2489();return a541_0x1509=function(_0x150914,_0x44b5e8){_0x150914=_0x150914-0x174;let _0x378c0d=_0x248962[_0x150914];return _0x378c0d;},a541_0x1509(_0x55ecb3,_0x41e34d);}exports[a541_0x11f709(0x192)]=ImportContactsService;