'use strict';const a617_0x253704=a617_0x4d49;(function(_0x15a111,_0x2a07b2){const _0x43c91d=a617_0x4d49,_0x4726ae=_0x15a111();while(!![]){try{const _0x1c0843=parseInt(_0x43c91d(0x14d))/0x1*(-parseInt(_0x43c91d(0x158))/0x2)+-parseInt(_0x43c91d(0x152))/0x3*(-parseInt(_0x43c91d(0x15a))/0x4)+-parseInt(_0x43c91d(0x147))/0x5+-parseInt(_0x43c91d(0x15e))/0x6*(parseInt(_0x43c91d(0x150))/0x7)+-parseInt(_0x43c91d(0x15b))/0x8+-parseInt(_0x43c91d(0x163))/0x9*(-parseInt(_0x43c91d(0x16a))/0xa)+-parseInt(_0x43c91d(0x14b))/0xb*(-parseInt(_0x43c91d(0x15d))/0xc);if(_0x1c0843===_0x2a07b2)break;else _0x4726ae['push'](_0x4726ae['shift']());}catch(_0x1d2fa4){_0x4726ae['push'](_0x4726ae['shift']());}}}(a617_0x1019,0x58788));var __createBinding=this&&this[a617_0x253704(0x160)]||(Object[a617_0x253704(0x161)]?function(_0x30c6e8,_0x4f7bc8,_0x10366a,_0x5ed8ae){const _0x5cf2d5=a617_0x253704;if(_0x5ed8ae===undefined)_0x5ed8ae=_0x10366a;var _0x59679f=Object['getOwnPropertyDescriptor'](_0x4f7bc8,_0x10366a);(!_0x59679f||(_0x5cf2d5(0x149)in _0x59679f?!_0x4f7bc8[_0x5cf2d5(0x14a)]:_0x59679f[_0x5cf2d5(0x16d)]||_0x59679f[_0x5cf2d5(0x162)]))&&(_0x59679f={'enumerable':!![],'get':function(){return _0x4f7bc8[_0x10366a];}}),Object[_0x5cf2d5(0x154)](_0x30c6e8,_0x5ed8ae,_0x59679f);}:function(_0x23c702,_0x5dce86,_0x3c5139,_0x48c560){if(_0x48c560===undefined)_0x48c560=_0x3c5139;_0x23c702[_0x48c560]=_0x5dce86[_0x3c5139];}),__setModuleDefault=this&&this[a617_0x253704(0x168)]||(Object[a617_0x253704(0x161)]?function(_0x4866d8,_0xf930a7){const _0x1a6dca=a617_0x253704;Object['defineProperty'](_0x4866d8,_0x1a6dca(0x166),{'enumerable':!![],'value':_0xf930a7});}:function(_0x5a313f,_0x4a7e79){_0x5a313f['default']=_0x4a7e79;}),__importStar=this&&this[a617_0x253704(0x155)]||function(_0x307bdb){const _0x388dea=a617_0x253704;if(_0x307bdb&&_0x307bdb['__esModule'])return _0x307bdb;var _0x2e2c0e={};if(_0x307bdb!=null){for(var _0x105ce4 in _0x307bdb)if(_0x105ce4!==_0x388dea(0x166)&&Object['prototype']['hasOwnProperty'][_0x388dea(0x14f)](_0x307bdb,_0x105ce4))__createBinding(_0x2e2c0e,_0x307bdb,_0x105ce4);}return __setModuleDefault(_0x2e2c0e,_0x307bdb),_0x2e2c0e;},__importDefault=this&&this[a617_0x253704(0x156)]||function(_0x581ea6){return _0x581ea6&&_0x581ea6['__esModule']?_0x581ea6:{'default':_0x581ea6};};function a617_0x4d49(_0x3f39d9,_0x28e125){const _0x1019be=a617_0x1019();return a617_0x4d49=function(_0x4d49f4,_0x4bbc04){_0x4d49f4=_0x4d49f4-0x147;let _0x4cbb66=_0x1019be[_0x4d49f4];return _0x4cbb66;},a617_0x4d49(_0x3f39d9,_0x28e125);}Object[a617_0x253704(0x154)](exports,a617_0x253704(0x14a),{'value':!![]});const Sentry=__importStar(require(a617_0x253704(0x16c))),GetDefaultWhatsApp_1=__importDefault(require(a617_0x253704(0x15c))),wbot_1=require(a617_0x253704(0x148)),Contact_1=__importDefault(require('../../models/Contact')),logger_1=require('../../utils/logger'),ShowBaileysService_1=__importDefault(require(a617_0x253704(0x14e))),CreateContactService_1=__importDefault(require(a617_0x253704(0x16e))),lodash_1=require('lodash'),path_1=__importDefault(require(a617_0x253704(0x15f))),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x101e0c=>{const _0x4950a0=a617_0x253704,_0x36e7f6=await(0x0,GetDefaultWhatsApp_1[_0x4950a0(0x166)])(_0x101e0c),_0x37c525=(0x0,wbot_1['getWbot'])(_0x36e7f6['id']);let _0x2ffd2c;try{const _0x9e26f6=await(0x0,ShowBaileysService_1[_0x4950a0(0x166)])(_0x37c525['id']);_0x2ffd2c=JSON['parse'](JSON[_0x4950a0(0x151)](_0x9e26f6['contacts']));const _0xbbfc46=path_1[_0x4950a0(0x166)][_0x4950a0(0x165)](__dirname,'..','..','..',_0x4950a0(0x157)),_0x30a1e4=path_1[_0x4950a0(0x166)][_0x4950a0(0x16b)](_0xbbfc46,'company'+_0x101e0c,_0x4950a0(0x16f));fs_1[_0x4950a0(0x166)][_0x4950a0(0x172)](_0x30a1e4,JSON[_0x4950a0(0x151)](_0x2ffd2c,null,0x2),_0x8e7747=>{const _0x1d9675=_0x4950a0;if(_0x8e7747){logger_1[_0x1d9675(0x170)][_0x1d9675(0x153)](_0x1d9675(0x171)+_0x8e7747);throw _0x8e7747;}});}catch(_0x27a717){Sentry[_0x4950a0(0x159)](_0x27a717),logger_1[_0x4950a0(0x170)][_0x4950a0(0x153)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x27a717);}const _0x1be0d3=path_1['default'][_0x4950a0(0x165)](__dirname,'..','..','..',_0x4950a0(0x157)),_0x16a137=path_1['default'][_0x4950a0(0x16b)](_0x1be0d3,_0x4950a0(0x164)+_0x101e0c,'contatos_depois.txt');fs_1['default'][_0x4950a0(0x172)](_0x16a137,JSON[_0x4950a0(0x151)](_0x2ffd2c,null,0x2),_0x2d7df3=>{const _0x3918d0=_0x4950a0;if(_0x2d7df3){logger_1['logger'][_0x3918d0(0x153)](_0x3918d0(0x171)+_0x2d7df3);throw _0x2d7df3;}});const _0x566b30=(0x0,lodash_1[_0x4950a0(0x167)])(_0x2ffd2c)?JSON['parse'](_0x2ffd2c):_0x2ffd2c;(0x0,lodash_1['isArray'])(_0x566b30)&&_0x566b30['forEach'](async({id:_0x1f3229,name:_0x7ee1cc,notify:_0x4b2a48})=>{const _0x3dada1=_0x4950a0;if(_0x1f3229==='status@broadcast'||_0x1f3229['includes'](_0x3dada1(0x14c)))return;const _0x2f331b=_0x1f3229['replace'](/\D/g,''),_0x19cef0=await Contact_1[_0x3dada1(0x166)]['findOne']({'where':{'number':_0x2f331b,'companyId':_0x101e0c}});if(_0x19cef0)_0x19cef0['name']=_0x7ee1cc||_0x4b2a48,await _0x19cef0[_0x3dada1(0x169)]();else try{await(0x0,CreateContactService_1[_0x3dada1(0x166)])({'number':_0x2f331b,'name':_0x7ee1cc||_0x4b2a48,'companyId':_0x101e0c});}catch(_0x14daa0){Sentry[_0x3dada1(0x159)](_0x14daa0),logger_1[_0x3dada1(0x170)]['warn']('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x14daa0);}});};function a617_0x1019(){const _0x32cce1=['public','1326546xRyXwQ','captureException','956wEimLG','2922424UNSiby','../../helpers/GetDefaultWhatsApp','12yKGBEo','6WRbICL','path','__createBinding','create','configurable','3582iPFZPa','company','resolve','default','isString','__setModuleDefault','save','14780OpgHVW','join','@sentry/node','writable','../ContactServices/CreateContactService','contatos_antes.txt','logger','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','writeFile','931065sLuQlZ','../../libs/wbot','get','__esModule','8947609VuidIE','g.us','1fAcEND','../BaileysServices/ShowBaileysService','call','526463tjlulj','stringify','3147pBlmkF','error','defineProperty','__importStar','__importDefault'];a617_0x1019=function(){return _0x32cce1;};return a617_0x1019();}exports[a617_0x253704(0x166)]=ImportContactsService;