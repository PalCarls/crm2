'use strict';const a541_0x59b14e=a541_0x1d47;function a541_0x1d47(_0x34178b,_0x3acd6e){const _0x57552c=a541_0x5755();return a541_0x1d47=function(_0x1d4723,_0x10caf7){_0x1d4723=_0x1d4723-0x1ac;let _0x20c907=_0x57552c[_0x1d4723];return _0x20c907;},a541_0x1d47(_0x34178b,_0x3acd6e);}(function(_0x4aeeb5,_0xfd8bb7){const _0x37860e=a541_0x1d47,_0x44866f=_0x4aeeb5();while(!![]){try{const _0x4182cc=parseInt(_0x37860e(0x1dd))/0x1*(-parseInt(_0x37860e(0x1d7))/0x2)+-parseInt(_0x37860e(0x1cf))/0x3*(parseInt(_0x37860e(0x1be))/0x4)+parseInt(_0x37860e(0x1af))/0x5+parseInt(_0x37860e(0x1cc))/0x6*(parseInt(_0x37860e(0x1c5))/0x7)+parseInt(_0x37860e(0x1db))/0x8*(parseInt(_0x37860e(0x1d2))/0x9)+-parseInt(_0x37860e(0x1ba))/0xa+parseInt(_0x37860e(0x1b6))/0xb;if(_0x4182cc===_0xfd8bb7)break;else _0x44866f['push'](_0x44866f['shift']());}catch(_0xb8a6cb){_0x44866f['push'](_0x44866f['shift']());}}}(a541_0x5755,0x812fe));var __createBinding=this&&this['__createBinding']||(Object[a541_0x59b14e(0x1bb)]?function(_0x300dfd,_0xae770a,_0x380e67,_0x3c7d1c){const _0x47fd9f=a541_0x59b14e;if(_0x3c7d1c===undefined)_0x3c7d1c=_0x380e67;var _0x57e6cc=Object['getOwnPropertyDescriptor'](_0xae770a,_0x380e67);(!_0x57e6cc||('get'in _0x57e6cc?!_0xae770a['__esModule']:_0x57e6cc[_0x47fd9f(0x1bc)]||_0x57e6cc[_0x47fd9f(0x1d9)]))&&(_0x57e6cc={'enumerable':!![],'get':function(){return _0xae770a[_0x380e67];}}),Object['defineProperty'](_0x300dfd,_0x3c7d1c,_0x57e6cc);}:function(_0x4185d3,_0xcd835f,_0x3420a8,_0x288f49){if(_0x288f49===undefined)_0x288f49=_0x3420a8;_0x4185d3[_0x288f49]=_0xcd835f[_0x3420a8];}),__setModuleDefault=this&&this[a541_0x59b14e(0x1c0)]||(Object[a541_0x59b14e(0x1bb)]?function(_0x122dcd,_0x413d99){const _0x7997e=a541_0x59b14e;Object[_0x7997e(0x1cd)](_0x122dcd,_0x7997e(0x1e0),{'enumerable':!![],'value':_0x413d99});}:function(_0x15239a,_0x2b6ab3){const _0x212949=a541_0x59b14e;_0x15239a[_0x212949(0x1e0)]=_0x2b6ab3;}),__importStar=this&&this[a541_0x59b14e(0x1bd)]||function(_0x35ea89){const _0x5d1e09=a541_0x59b14e;if(_0x35ea89&&_0x35ea89[_0x5d1e09(0x1c3)])return _0x35ea89;var _0x4e41ce={};if(_0x35ea89!=null){for(var _0x4fac3d in _0x35ea89)if(_0x4fac3d!=='default'&&Object['prototype']['hasOwnProperty'][_0x5d1e09(0x1c8)](_0x35ea89,_0x4fac3d))__createBinding(_0x4e41ce,_0x35ea89,_0x4fac3d);}return __setModuleDefault(_0x4e41ce,_0x35ea89),_0x4e41ce;},__importDefault=this&&this['__importDefault']||function(_0x1c39b0){const _0x482128=a541_0x59b14e;return _0x1c39b0&&_0x1c39b0[_0x482128(0x1c3)]?_0x1c39b0:{'default':_0x1c39b0};};Object['defineProperty'](exports,a541_0x59b14e(0x1c3),{'value':!![]});function a541_0x5755(){const _0x543d0e=['error','957250BRxRVB','../../helpers/GetDefaultWhatsApp','join','forEach','name','warn','save','1552155LQfzub','writeFile','includes','path','7134170AoymOh','create','writable','__importStar','11392ewBwZm','findOne','__setModuleDefault','../../libs/wbot','../ContactServices/CreateContactService','__esModule','O\x20arquivo\x20contatos_antes.txt\x20foi\x20criado!','3304rCcdwe','contatos_antes.txt','captureException','call','log','stringify','public','11796DvbZAx','defineProperty','parse','303QusXLI','../BaileysServices/ShowBaileysService','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','22887zmNOfZ','g.us','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','status@broadcast','resolve','4cmJWgO','../../utils/logger','configurable','isString','2032Sgelxl','contatos_depois.txt','188107DeAneN','isArray','../../models/Contact','default','getWbot','lodash','logger'];a541_0x5755=function(){return _0x543d0e;};return a541_0x5755();}const Sentry=__importStar(require('@sentry/node')),GetDefaultWhatsApp_1=__importDefault(require(a541_0x59b14e(0x1b0))),wbot_1=require(a541_0x59b14e(0x1c1)),Contact_1=__importDefault(require(a541_0x59b14e(0x1df))),logger_1=require(a541_0x59b14e(0x1d8)),ShowBaileysService_1=__importDefault(require(a541_0x59b14e(0x1d0))),CreateContactService_1=__importDefault(require(a541_0x59b14e(0x1c2))),lodash_1=require(a541_0x59b14e(0x1ac)),path_1=__importDefault(require(a541_0x59b14e(0x1b9))),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x4cd136=>{const _0x289ffe=a541_0x59b14e,_0x4aa7b4=await(0x0,GetDefaultWhatsApp_1[_0x289ffe(0x1e0)])(_0x4cd136),_0x316d30=(0x0,wbot_1[_0x289ffe(0x1e1)])(_0x4aa7b4['id']);let _0x15af11;try{const _0x538469=await(0x0,ShowBaileysService_1[_0x289ffe(0x1e0)])(_0x316d30['id']);_0x15af11=JSON[_0x289ffe(0x1ce)](JSON[_0x289ffe(0x1ca)](_0x538469['contacts']));const _0x529ce4=path_1[_0x289ffe(0x1e0)][_0x289ffe(0x1d6)](__dirname,'..','..','..',_0x289ffe(0x1cb)),_0x294626=path_1['default'][_0x289ffe(0x1b1)](_0x529ce4,_0x289ffe(0x1c6));fs_1[_0x289ffe(0x1e0)][_0x289ffe(0x1b7)](_0x294626,JSON['stringify'](_0x15af11,null,0x2),_0x52941c=>{const _0x13ff96=_0x289ffe;if(_0x52941c){logger_1[_0x13ff96(0x1ad)]['error'](_0x13ff96(0x1d1)+_0x52941c);throw _0x52941c;}console[_0x13ff96(0x1c9)](_0x13ff96(0x1c4));});}catch(_0x4c8ab7){Sentry['captureException'](_0x4c8ab7),logger_1[_0x289ffe(0x1ad)]['error'](_0x289ffe(0x1d4)+_0x4c8ab7);}const _0x1efe1a=path_1[_0x289ffe(0x1e0)][_0x289ffe(0x1d6)](__dirname,'..','..','..',_0x289ffe(0x1cb)),_0xd95ff9=path_1['default'][_0x289ffe(0x1b1)](_0x1efe1a,_0x289ffe(0x1dc));fs_1['default'][_0x289ffe(0x1b7)](_0xd95ff9,JSON[_0x289ffe(0x1ca)](_0x15af11,null,0x2),_0x77b136=>{const _0xf345e6=_0x289ffe;if(_0x77b136){logger_1[_0xf345e6(0x1ad)][_0xf345e6(0x1ae)]('Failed\x20to\x20write\x20contacts\x20to\x20file:\x20'+_0x77b136);throw _0x77b136;}console['log']('O\x20arquivo\x20contatos_depois.txt\x20foi\x20criado!');});const _0x2ff5db=(0x0,lodash_1[_0x289ffe(0x1da)])(_0x15af11)?JSON[_0x289ffe(0x1ce)](_0x15af11):_0x15af11;(0x0,lodash_1[_0x289ffe(0x1de)])(_0x2ff5db)&&_0x2ff5db[_0x289ffe(0x1b2)](async({id:_0x3db110,name:_0x56b24c,notify:_0x330dee})=>{const _0x44091c=_0x289ffe;if(_0x3db110===_0x44091c(0x1d5)||_0x3db110[_0x44091c(0x1b8)](_0x44091c(0x1d3)))return;const _0x36ecba=_0x3db110['replace'](/\D/g,''),_0x70d6fe=await Contact_1[_0x44091c(0x1e0)][_0x44091c(0x1bf)]({'where':{'number':_0x36ecba,'companyId':_0x4cd136}});if(_0x70d6fe)_0x70d6fe[_0x44091c(0x1b3)]=_0x56b24c||_0x330dee,await _0x70d6fe[_0x44091c(0x1b5)]();else try{await(0x0,CreateContactService_1[_0x44091c(0x1e0)])({'number':_0x36ecba,'name':_0x56b24c||_0x330dee,'companyId':_0x4cd136});}catch(_0x50cc1d){Sentry[_0x44091c(0x1c7)](_0x50cc1d),logger_1[_0x44091c(0x1ad)][_0x44091c(0x1b4)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x50cc1d);}});};exports[a541_0x59b14e(0x1e0)]=ImportContactsService;