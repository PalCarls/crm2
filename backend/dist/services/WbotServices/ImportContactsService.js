'use strict';const a541_0x5b5608=a541_0x2b02;(function(_0x3cdeeb,_0x3789e0){const _0x5365b1=a541_0x2b02,_0x534dc0=_0x3cdeeb();while(!![]){try{const _0x3d4d63=-parseInt(_0x5365b1(0x105))/0x1+parseInt(_0x5365b1(0x10a))/0x2*(-parseInt(_0x5365b1(0xe2))/0x3)+-parseInt(_0x5365b1(0x111))/0x4*(parseInt(_0x5365b1(0x102))/0x5)+-parseInt(_0x5365b1(0xf7))/0x6*(parseInt(_0x5365b1(0xdf))/0x7)+-parseInt(_0x5365b1(0xfd))/0x8*(-parseInt(_0x5365b1(0x100))/0x9)+parseInt(_0x5365b1(0xeb))/0xa+parseInt(_0x5365b1(0xe1))/0xb;if(_0x3d4d63===_0x3789e0)break;else _0x534dc0['push'](_0x534dc0['shift']());}catch(_0x2693e0){_0x534dc0['push'](_0x534dc0['shift']());}}}(a541_0x3c9c,0x34525));var __createBinding=this&&this['__createBinding']||(Object[a541_0x5b5608(0xf4)]?function(_0x594692,_0x50eeee,_0x4e4324,_0x2930f7){const _0x725699=a541_0x5b5608;if(_0x2930f7===undefined)_0x2930f7=_0x4e4324;var _0x173d95=Object[_0x725699(0x104)](_0x50eeee,_0x4e4324);(!_0x173d95||(_0x725699(0xf2)in _0x173d95?!_0x50eeee[_0x725699(0x110)]:_0x173d95[_0x725699(0x10e)]||_0x173d95[_0x725699(0x107)]))&&(_0x173d95={'enumerable':!![],'get':function(){return _0x50eeee[_0x4e4324];}}),Object[_0x725699(0xea)](_0x594692,_0x2930f7,_0x173d95);}:function(_0x12b86c,_0x12837e,_0x401004,_0x1dd79e){if(_0x1dd79e===undefined)_0x1dd79e=_0x401004;_0x12b86c[_0x1dd79e]=_0x12837e[_0x401004];}),__setModuleDefault=this&&this[a541_0x5b5608(0xef)]||(Object[a541_0x5b5608(0xf4)]?function(_0x56d730,_0x61dc5f){const _0x36eca7=a541_0x5b5608;Object[_0x36eca7(0xea)](_0x56d730,_0x36eca7(0xfe),{'enumerable':!![],'value':_0x61dc5f});}:function(_0x191d3d,_0x44fbce){_0x191d3d['default']=_0x44fbce;}),__importStar=this&&this[a541_0x5b5608(0xe0)]||function(_0x27c03c){const _0x326829=a541_0x5b5608;if(_0x27c03c&&_0x27c03c[_0x326829(0x110)])return _0x27c03c;var _0x46b1b7={};if(_0x27c03c!=null){for(var _0x4e0a87 in _0x27c03c)if(_0x4e0a87!==_0x326829(0xfe)&&Object['prototype'][_0x326829(0x106)]['call'](_0x27c03c,_0x4e0a87))__createBinding(_0x46b1b7,_0x27c03c,_0x4e0a87);}return __setModuleDefault(_0x46b1b7,_0x27c03c),_0x46b1b7;},__importDefault=this&&this[a541_0x5b5608(0xe6)]||function(_0x358631){return _0x358631&&_0x358631['__esModule']?_0x358631:{'default':_0x358631};};Object['defineProperty'](exports,a541_0x5b5608(0x110),{'value':!![]});function a541_0x2b02(_0x2ecc14,_0x10201f){const _0x3c9c7b=a541_0x3c9c();return a541_0x2b02=function(_0x2b02b3,_0x2555d9){_0x2b02b3=_0x2b02b3-0xdd;let _0x2aab4b=_0x3c9c7b[_0x2b02b3];return _0x2aab4b;},a541_0x2b02(_0x2ecc14,_0x10201f);}const Sentry=__importStar(require(a541_0x5b5608(0xe9))),GetDefaultWhatsApp_1=__importDefault(require('../../helpers/GetDefaultWhatsApp')),wbot_1=require(a541_0x5b5608(0xe8)),Contact_1=__importDefault(require(a541_0x5b5608(0xfc))),logger_1=require(a541_0x5b5608(0x10b)),ShowBaileysService_1=__importDefault(require(a541_0x5b5608(0xec))),CreateContactService_1=__importDefault(require(a541_0x5b5608(0xe7))),lodash_1=require(a541_0x5b5608(0xf1)),path_1=__importDefault(require('path')),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x11f55b=>{const _0x2c3f54=a541_0x5b5608,_0x2fee3f=await(0x0,GetDefaultWhatsApp_1[_0x2c3f54(0xfe)])(_0x11f55b),_0x12e805=(0x0,wbot_1[_0x2c3f54(0x10c)])(_0x2fee3f['id']);let _0x512c67;try{const _0x2039dc=await(0x0,ShowBaileysService_1[_0x2c3f54(0xfe)])(_0x12e805['id']);_0x512c67=JSON[_0x2c3f54(0xf5)](JSON[_0x2c3f54(0xff)](_0x2039dc[_0x2c3f54(0x10f)]));const _0xc671e9=path_1[_0x2c3f54(0xfe)][_0x2c3f54(0xe3)](__dirname,'..','..','..',_0x2c3f54(0x109)),_0x4cd3da=path_1[_0x2c3f54(0xfe)][_0x2c3f54(0x103)](_0xc671e9,'contatos_antes.txt');fs_1[_0x2c3f54(0xfe)][_0x2c3f54(0xf3)](_0x4cd3da,JSON['stringify'](_0x512c67,null,0x2),_0x19b85a=>{const _0x570a67=_0x2c3f54;if(_0x19b85a){logger_1[_0x570a67(0xf0)][_0x570a67(0xfb)](_0x570a67(0x10d)+_0x19b85a);throw _0x19b85a;}console['log'](_0x570a67(0x108));});}catch(_0x540d85){Sentry['captureException'](_0x540d85),logger_1[_0x2c3f54(0xf0)][_0x2c3f54(0xfb)](_0x2c3f54(0xde)+_0x540d85);}const _0x249144=path_1['default'][_0x2c3f54(0xe3)](__dirname,'..','..','..','public'),_0x557193=path_1['default'][_0x2c3f54(0x103)](_0x249144,_0x2c3f54(0xf9));fs_1[_0x2c3f54(0xfe)][_0x2c3f54(0xf3)](_0x557193,JSON[_0x2c3f54(0xff)](_0x512c67,null,0x2),_0x3f0ca8=>{const _0x4c1ce8=_0x2c3f54;if(_0x3f0ca8){logger_1[_0x4c1ce8(0xf0)][_0x4c1ce8(0xfb)](_0x4c1ce8(0x10d)+_0x3f0ca8);throw _0x3f0ca8;}console[_0x4c1ce8(0xf8)](_0x4c1ce8(0xed));});const _0x4c3163=(0x0,lodash_1[_0x2c3f54(0xe4)])(_0x512c67)?JSON[_0x2c3f54(0xf5)](_0x512c67):_0x512c67;(0x0,lodash_1['isArray'])(_0x4c3163)&&_0x4c3163[_0x2c3f54(0xf6)](async({id:_0x14c5a7,name:_0x5b4798,notify:_0x2aac51})=>{const _0x4348bf=_0x2c3f54;if(_0x14c5a7==='status@broadcast'||_0x14c5a7[_0x4348bf(0xfa)](_0x4348bf(0xdd)))return;const _0x24203b=_0x14c5a7[_0x4348bf(0x101)](/\D/g,''),_0x42f722=await Contact_1[_0x4348bf(0xfe)]['findOne']({'where':{'number':_0x24203b,'companyId':_0x11f55b}});if(_0x42f722)_0x42f722[_0x4348bf(0xee)]=_0x5b4798||_0x2aac51,await _0x42f722['save']();else try{await(0x0,CreateContactService_1[_0x4348bf(0xfe)])({'number':_0x24203b,'name':_0x5b4798||_0x2aac51,'companyId':_0x11f55b});}catch(_0x11c6db){Sentry['captureException'](_0x11c6db),logger_1[_0x4348bf(0xf0)][_0x4348bf(0xe5)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x11c6db);}});};function a541_0x3c9c(){const _0x3b1625=['3439755BPWByX','770097RDTdZj','resolve','isString','warn','__importDefault','../ContactServices/CreateContactService','../../libs/wbot','@sentry/node','defineProperty','3328090rOEMsq','../BaileysServices/ShowBaileysService','O\x20arquivo\x20contatos_depois.txt\x20foi\x20criado!','name','__setModuleDefault','logger','lodash','get','writeFile','create','parse','forEach','8094dItwqV','log','contatos_depois.txt','includes','error','../../models/Contact','2360ZFYUiU','default','stringify','1071PcForb','replace','261140wTmyEY','join','getOwnPropertyDescriptor','112866uSavpn','hasOwnProperty','configurable','O\x20arquivo\x20contatos_antes.txt\x20foi\x20criado!','public','2EjVrEy','../../utils/logger','getWbot','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','writable','contacts','__esModule','4QbXUag','g.us','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','231wvNhIp','__importStar'];a541_0x3c9c=function(){return _0x3b1625;};return a541_0x3c9c();}exports[a541_0x5b5608(0xfe)]=ImportContactsService;