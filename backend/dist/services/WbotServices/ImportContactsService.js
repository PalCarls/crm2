'use strict';const a625_0x41f436=a625_0x4da4;(function(_0x5a1940,_0x42e2ea){const _0x2d5a6a=a625_0x4da4,_0x4165ee=_0x5a1940();while(!![]){try{const _0x214224=parseInt(_0x2d5a6a(0x157))/0x1*(-parseInt(_0x2d5a6a(0x13a))/0x2)+-parseInt(_0x2d5a6a(0x152))/0x3*(parseInt(_0x2d5a6a(0x136))/0x4)+-parseInt(_0x2d5a6a(0x15b))/0x5+parseInt(_0x2d5a6a(0x131))/0x6*(-parseInt(_0x2d5a6a(0x154))/0x7)+parseInt(_0x2d5a6a(0x12e))/0x8*(parseInt(_0x2d5a6a(0x12c))/0x9)+parseInt(_0x2d5a6a(0x142))/0xa+parseInt(_0x2d5a6a(0x158))/0xb;if(_0x214224===_0x42e2ea)break;else _0x4165ee['push'](_0x4165ee['shift']());}catch(_0x276a16){_0x4165ee['push'](_0x4165ee['shift']());}}}(a625_0x334a,0x7dea2));function a625_0x4da4(_0xe16355,_0x1913f9){const _0x334ad1=a625_0x334a();return a625_0x4da4=function(_0x4da419,_0x36673e){_0x4da419=_0x4da419-0x12c;let _0xbe91a8=_0x334ad1[_0x4da419];return _0xbe91a8;},a625_0x4da4(_0xe16355,_0x1913f9);}function a625_0x334a(){const _0x217fb3=['configurable','453234qBAyCu','defineProperty','__esModule','../../helpers/GetDefaultWhatsApp','call','16yixjOB','path','join','parse','452ffwMtr','isString','hasOwnProperty','__setModuleDefault','includes','name','warn','getWbot','3152220bRFhoo','public','getOwnPropertyDescriptor','contatos_antes.txt','logger','../../libs/wbot','captureException','replace','save','default','writeFile','../../utils/logger','__importStar','@sentry/node','resolve','isArray','116982FfNdqh','company','7uroPqr','../ContactServices/CreateContactService','prototype','3011XcjTdf','9096098OKMBdy','error','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','3439085khIbaU','create','contacts','status@broadcast','52776rPqpLC','../BaileysServices/ShowBaileysService','1328LTLksK','stringify'];a625_0x334a=function(){return _0x217fb3;};return a625_0x334a();}var __createBinding=this&&this['__createBinding']||(Object[a625_0x41f436(0x15c)]?function(_0x29ef2a,_0x377dd0,_0x597cd2,_0x251236){const _0x1fbc07=a625_0x41f436;if(_0x251236===undefined)_0x251236=_0x597cd2;var _0x1669ae=Object[_0x1fbc07(0x144)](_0x377dd0,_0x597cd2);(!_0x1669ae||('get'in _0x1669ae?!_0x377dd0[_0x1fbc07(0x133)]:_0x1669ae['writable']||_0x1669ae[_0x1fbc07(0x130)]))&&(_0x1669ae={'enumerable':!![],'get':function(){return _0x377dd0[_0x597cd2];}}),Object['defineProperty'](_0x29ef2a,_0x251236,_0x1669ae);}:function(_0x5b0ac9,_0x4b4a46,_0x263292,_0x7c81df){if(_0x7c81df===undefined)_0x7c81df=_0x263292;_0x5b0ac9[_0x7c81df]=_0x4b4a46[_0x263292];}),__setModuleDefault=this&&this[a625_0x41f436(0x13d)]||(Object[a625_0x41f436(0x15c)]?function(_0x15fc17,_0x4d356a){const _0x46a795=a625_0x41f436;Object[_0x46a795(0x132)](_0x15fc17,_0x46a795(0x14b),{'enumerable':!![],'value':_0x4d356a});}:function(_0x36138c,_0x22bc50){const _0x336cb8=a625_0x41f436;_0x36138c[_0x336cb8(0x14b)]=_0x22bc50;}),__importStar=this&&this[a625_0x41f436(0x14e)]||function(_0x42d738){const _0x33233c=a625_0x41f436;if(_0x42d738&&_0x42d738['__esModule'])return _0x42d738;var _0xd0d79={};if(_0x42d738!=null){for(var _0x2eec18 in _0x42d738)if(_0x2eec18!==_0x33233c(0x14b)&&Object[_0x33233c(0x156)][_0x33233c(0x13c)][_0x33233c(0x135)](_0x42d738,_0x2eec18))__createBinding(_0xd0d79,_0x42d738,_0x2eec18);}return __setModuleDefault(_0xd0d79,_0x42d738),_0xd0d79;},__importDefault=this&&this['__importDefault']||function(_0x40bc22){const _0x5990e0=a625_0x41f436;return _0x40bc22&&_0x40bc22[_0x5990e0(0x133)]?_0x40bc22:{'default':_0x40bc22};};Object[a625_0x41f436(0x132)](exports,'__esModule',{'value':!![]});const Sentry=__importStar(require(a625_0x41f436(0x14f))),GetDefaultWhatsApp_1=__importDefault(require(a625_0x41f436(0x134))),wbot_1=require(a625_0x41f436(0x147)),Contact_1=__importDefault(require('../../models/Contact')),logger_1=require(a625_0x41f436(0x14d)),ShowBaileysService_1=__importDefault(require(a625_0x41f436(0x12d))),CreateContactService_1=__importDefault(require(a625_0x41f436(0x155))),lodash_1=require('lodash'),path_1=__importDefault(require(a625_0x41f436(0x137))),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x5894fc=>{const _0x4b4e1d=a625_0x41f436,_0x31bbec=await(0x0,GetDefaultWhatsApp_1['default'])(_0x5894fc),_0x5600b5=(0x0,wbot_1[_0x4b4e1d(0x141)])(_0x31bbec['id']);let _0x443303;try{const _0x1df956=await(0x0,ShowBaileysService_1[_0x4b4e1d(0x14b)])(_0x5600b5['id']);_0x443303=JSON[_0x4b4e1d(0x139)](JSON['stringify'](_0x1df956[_0x4b4e1d(0x15d)]));const _0x2e15da=path_1['default'][_0x4b4e1d(0x150)](__dirname,'..','..','..',_0x4b4e1d(0x143)),_0x4932c1=path_1[_0x4b4e1d(0x14b)]['join'](_0x2e15da,_0x4b4e1d(0x153)+_0x5894fc,_0x4b4e1d(0x145));fs_1['default'][_0x4b4e1d(0x14c)](_0x4932c1,JSON[_0x4b4e1d(0x12f)](_0x443303,null,0x2),_0x5add55=>{const _0x376945=_0x4b4e1d;if(_0x5add55){logger_1[_0x376945(0x146)][_0x376945(0x159)](_0x376945(0x15a)+_0x5add55);throw _0x5add55;}});}catch(_0x52b4c8){Sentry['captureException'](_0x52b4c8),logger_1[_0x4b4e1d(0x146)][_0x4b4e1d(0x159)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x52b4c8);}const _0x3fb8e3=path_1[_0x4b4e1d(0x14b)][_0x4b4e1d(0x150)](__dirname,'..','..','..',_0x4b4e1d(0x143)),_0x3fe41f=path_1[_0x4b4e1d(0x14b)][_0x4b4e1d(0x138)](_0x3fb8e3,_0x4b4e1d(0x153)+_0x5894fc,'contatos_depois.txt');fs_1['default'][_0x4b4e1d(0x14c)](_0x3fe41f,JSON[_0x4b4e1d(0x12f)](_0x443303,null,0x2),_0x29618b=>{const _0x1e45ee=_0x4b4e1d;if(_0x29618b){logger_1['logger']['error'](_0x1e45ee(0x15a)+_0x29618b);throw _0x29618b;}});const _0xe8bf09=(0x0,lodash_1[_0x4b4e1d(0x13b)])(_0x443303)?JSON[_0x4b4e1d(0x139)](_0x443303):_0x443303;(0x0,lodash_1[_0x4b4e1d(0x151)])(_0xe8bf09)&&_0xe8bf09['forEach'](async({id:_0x1846c0,name:_0x4416ed,notify:_0x240697})=>{const _0x3d6b0b=_0x4b4e1d;if(_0x1846c0===_0x3d6b0b(0x15e)||_0x1846c0[_0x3d6b0b(0x13e)]('g.us'))return;const _0x212c2a=_0x1846c0[_0x3d6b0b(0x149)](/\D/g,''),_0x42e259=await Contact_1[_0x3d6b0b(0x14b)]['findOne']({'where':{'number':_0x212c2a,'companyId':_0x5894fc}});if(_0x42e259)_0x42e259[_0x3d6b0b(0x13f)]=_0x4416ed||_0x240697,await _0x42e259[_0x3d6b0b(0x14a)]();else try{await(0x0,CreateContactService_1['default'])({'number':_0x212c2a,'name':_0x4416ed||_0x240697,'companyId':_0x5894fc});}catch(_0x1b4196){Sentry[_0x3d6b0b(0x148)](_0x1b4196),logger_1['logger'][_0x3d6b0b(0x140)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x1b4196);}});};exports[a625_0x41f436(0x14b)]=ImportContactsService;