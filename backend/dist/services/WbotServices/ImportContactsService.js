'use strict';const a605_0x422e53=a605_0x5c08;function a605_0x5c08(_0xedd691,_0x3a9fb5){const _0x181f01=a605_0x181f();return a605_0x5c08=function(_0x5c08cc,_0x1e3f13){_0x5c08cc=_0x5c08cc-0x7d;let _0x10de48=_0x181f01[_0x5c08cc];return _0x10de48;},a605_0x5c08(_0xedd691,_0x3a9fb5);}(function(_0x379263,_0x4d1c68){const _0x1a55a6=a605_0x5c08,_0x37a578=_0x379263();while(!![]){try{const _0x339783=-parseInt(_0x1a55a6(0x9b))/0x1+parseInt(_0x1a55a6(0xa7))/0x2+parseInt(_0x1a55a6(0x91))/0x3*(-parseInt(_0x1a55a6(0xb1))/0x4)+parseInt(_0x1a55a6(0xae))/0x5+-parseInt(_0x1a55a6(0x7f))/0x6+parseInt(_0x1a55a6(0x88))/0x7+parseInt(_0x1a55a6(0xa2))/0x8*(parseInt(_0x1a55a6(0xa1))/0x9);if(_0x339783===_0x4d1c68)break;else _0x37a578['push'](_0x37a578['shift']());}catch(_0x37d6eb){_0x37a578['push'](_0x37a578['shift']());}}}(a605_0x181f,0xcc6d3));function a605_0x181f(){const _0x5e6877=['O\x20arquivo\x20contatos_depois.txt\x20foi\x20criado!','error','public','join','configurable','captureException','getWbot','3510815OYetHA','../../libs/wbot','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','findOne','stringify','contatos_depois.txt','logger','resolve','create','385989HckdHm','prototype','../../utils/logger','__importStar','call','__importDefault','log','replace','__esModule','../../models/Contact','403692wcIyUb','lodash','includes','parse','default','warn','18126jBQWPQ','1928mNMcxi','defineProperty','writable','../BaileysServices/ShowBaileysService','contatos_antes.txt','2527246XdiPFR','contacts','__setModuleDefault','../ContactServices/CreateContactService','name','__createBinding','getOwnPropertyDescriptor','7084580IzbCZD','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','hasOwnProperty','28CAwxfE','isArray','status@broadcast','9154764myIOsd','O\x20arquivo\x20contatos_antes.txt\x20foi\x20criado!'];a605_0x181f=function(){return _0x5e6877;};return a605_0x181f();}var __createBinding=this&&this[a605_0x422e53(0xac)]||(Object['create']?function(_0x2e7bdf,_0x61c83d,_0x18f4e1,_0x47145e){const _0x21bfa=a605_0x422e53;if(_0x47145e===undefined)_0x47145e=_0x18f4e1;var _0x3f8f83=Object[_0x21bfa(0xad)](_0x61c83d,_0x18f4e1);(!_0x3f8f83||('get'in _0x3f8f83?!_0x61c83d['__esModule']:_0x3f8f83[_0x21bfa(0xa4)]||_0x3f8f83[_0x21bfa(0x85)]))&&(_0x3f8f83={'enumerable':!![],'get':function(){return _0x61c83d[_0x18f4e1];}}),Object[_0x21bfa(0xa3)](_0x2e7bdf,_0x47145e,_0x3f8f83);}:function(_0xe9bcb5,_0x1b8957,_0x41ee2c,_0x26834d){if(_0x26834d===undefined)_0x26834d=_0x41ee2c;_0xe9bcb5[_0x26834d]=_0x1b8957[_0x41ee2c];}),__setModuleDefault=this&&this[a605_0x422e53(0xa9)]||(Object[a605_0x422e53(0x90)]?function(_0x492389,_0x5457ad){const _0x17f653=a605_0x422e53;Object[_0x17f653(0xa3)](_0x492389,'default',{'enumerable':!![],'value':_0x5457ad});}:function(_0x26d52f,_0x15c325){const _0x4b256d=a605_0x422e53;_0x26d52f[_0x4b256d(0x9f)]=_0x15c325;}),__importStar=this&&this[a605_0x422e53(0x94)]||function(_0x72a160){const _0x3fa259=a605_0x422e53;if(_0x72a160&&_0x72a160[_0x3fa259(0x99)])return _0x72a160;var _0x3cc20a={};if(_0x72a160!=null){for(var _0xc0b381 in _0x72a160)if(_0xc0b381!==_0x3fa259(0x9f)&&Object[_0x3fa259(0x92)][_0x3fa259(0xb0)][_0x3fa259(0x95)](_0x72a160,_0xc0b381))__createBinding(_0x3cc20a,_0x72a160,_0xc0b381);}return __setModuleDefault(_0x3cc20a,_0x72a160),_0x3cc20a;},__importDefault=this&&this[a605_0x422e53(0x96)]||function(_0x58992c){const _0x5a441f=a605_0x422e53;return _0x58992c&&_0x58992c[_0x5a441f(0x99)]?_0x58992c:{'default':_0x58992c};};Object['defineProperty'](exports,a605_0x422e53(0x99),{'value':!![]});const Sentry=__importStar(require('@sentry/node')),GetDefaultWhatsApp_1=__importDefault(require('../../helpers/GetDefaultWhatsApp')),wbot_1=require(a605_0x422e53(0x89)),Contact_1=__importDefault(require(a605_0x422e53(0x9a))),logger_1=require(a605_0x422e53(0x93)),ShowBaileysService_1=__importDefault(require(a605_0x422e53(0xa5))),CreateContactService_1=__importDefault(require(a605_0x422e53(0xaa))),lodash_1=require(a605_0x422e53(0x9c)),path_1=__importDefault(require('path')),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x2cd19b=>{const _0x4c408b=a605_0x422e53,_0x66cf94=await(0x0,GetDefaultWhatsApp_1[_0x4c408b(0x9f)])(_0x2cd19b),_0x8db6c9=(0x0,wbot_1[_0x4c408b(0x87)])(_0x66cf94['id']);let _0x255b77;try{const _0x1ed379=await(0x0,ShowBaileysService_1['default'])(_0x8db6c9['id']);_0x255b77=JSON['parse'](JSON['stringify'](_0x1ed379[_0x4c408b(0xa8)]));const _0x239cc9=path_1[_0x4c408b(0x9f)][_0x4c408b(0x8f)](__dirname,'..','..','..',_0x4c408b(0x83)),_0x498752=path_1[_0x4c408b(0x9f)][_0x4c408b(0x84)](_0x239cc9,_0x4c408b(0xa6));fs_1[_0x4c408b(0x9f)]['writeFile'](_0x498752,JSON[_0x4c408b(0x8c)](_0x255b77,null,0x2),_0x1d2d08=>{const _0x35aa1b=_0x4c408b;if(_0x1d2d08){logger_1[_0x35aa1b(0x8e)]['error'](_0x35aa1b(0x8a)+_0x1d2d08);throw _0x1d2d08;}console[_0x35aa1b(0x97)](_0x35aa1b(0x80));});}catch(_0x1b04a5){Sentry[_0x4c408b(0x86)](_0x1b04a5),logger_1[_0x4c408b(0x8e)][_0x4c408b(0x82)](_0x4c408b(0xaf)+_0x1b04a5);}const _0xa5dfc0=path_1['default'][_0x4c408b(0x8f)](__dirname,'..','..','..',_0x4c408b(0x83)),_0x44fb0c=path_1[_0x4c408b(0x9f)][_0x4c408b(0x84)](_0xa5dfc0,_0x4c408b(0x8d));fs_1[_0x4c408b(0x9f)]['writeFile'](_0x44fb0c,JSON[_0x4c408b(0x8c)](_0x255b77,null,0x2),_0x2da427=>{const _0x3cced2=_0x4c408b;if(_0x2da427){logger_1[_0x3cced2(0x8e)]['error']('Failed\x20to\x20write\x20contacts\x20to\x20file:\x20'+_0x2da427);throw _0x2da427;}console['log'](_0x3cced2(0x81));});const _0x4cbe7e=(0x0,lodash_1['isString'])(_0x255b77)?JSON[_0x4c408b(0x9e)](_0x255b77):_0x255b77;(0x0,lodash_1[_0x4c408b(0x7d)])(_0x4cbe7e)&&_0x4cbe7e['forEach'](async({id:_0x159ee5,name:_0x40bf32,notify:_0x3c8776})=>{const _0x1ff722=_0x4c408b;if(_0x159ee5===_0x1ff722(0x7e)||_0x159ee5[_0x1ff722(0x9d)]('g.us'))return;const _0x188b35=_0x159ee5[_0x1ff722(0x98)](/\D/g,''),_0x5c8ce3=await Contact_1[_0x1ff722(0x9f)][_0x1ff722(0x8b)]({'where':{'number':_0x188b35,'companyId':_0x2cd19b}});if(_0x5c8ce3)_0x5c8ce3[_0x1ff722(0xab)]=_0x40bf32||_0x3c8776,await _0x5c8ce3['save']();else try{await(0x0,CreateContactService_1['default'])({'number':_0x188b35,'name':_0x40bf32||_0x3c8776,'companyId':_0x2cd19b});}catch(_0x4dcfc5){Sentry['captureException'](_0x4dcfc5),logger_1[_0x1ff722(0x8e)][_0x1ff722(0xa0)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x4dcfc5);}});};exports[a605_0x422e53(0x9f)]=ImportContactsService;