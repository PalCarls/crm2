'use strict';function a564_0x4e0d(_0x1d92a2,_0x4706e9){const _0x57934c=a564_0x5793();return a564_0x4e0d=function(_0x4e0da6,_0x47fe23){_0x4e0da6=_0x4e0da6-0x115;let _0xf95d17=_0x57934c[_0x4e0da6];return _0xf95d17;},a564_0x4e0d(_0x1d92a2,_0x4706e9);}const a564_0xce59f7=a564_0x4e0d;function a564_0x5793(){const _0x28210e=['writeFile','104ncKKKJ','32350446wHVlgr','prototype','__setModuleDefault','10975lVgLvg','defineProperty','replace','status@broadcast','logger','get','path','log','error','stringify','getOwnPropertyDescriptor','lodash','3540165OhFEzn','@sentry/node','parse','resolve','warn','86354WDPMwy','../BaileysServices/ShowBaileysService','contatos_antes.txt','call','join','196914ihktFJ','__importDefault','contatos_depois.txt','g.us','captureException','save','name','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','getWbot','../../models/Contact','create','666174zFpkvI','forEach','isString','public','648305SvwCst','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','default','__esModule','O\x20arquivo\x20contatos_antes.txt\x20foi\x20criado!','1228JZwYXq','findOne','../../helpers/GetDefaultWhatsApp','contacts'];a564_0x5793=function(){return _0x28210e;};return a564_0x5793();}(function(_0x3003f1,_0x1a32b6){const _0x20d8f8=a564_0x4e0d,_0xf7b3e3=_0x3003f1();while(!![]){try{const _0x4f4365=parseInt(_0x20d8f8(0x144))/0x1+parseInt(_0x20d8f8(0x116))/0x2+-parseInt(_0x20d8f8(0x13f))/0x3+-parseInt(_0x20d8f8(0x12a))/0x4*(parseInt(_0x20d8f8(0x133))/0x5)+-parseInt(_0x20d8f8(0x121))/0x6+-parseInt(_0x20d8f8(0x125))/0x7*(parseInt(_0x20d8f8(0x12f))/0x8)+parseInt(_0x20d8f8(0x130))/0x9;if(_0x4f4365===_0x1a32b6)break;else _0xf7b3e3['push'](_0xf7b3e3['shift']());}catch(_0x58f9bd){_0xf7b3e3['push'](_0xf7b3e3['shift']());}}}(a564_0x5793,0x95039));var __createBinding=this&&this['__createBinding']||(Object[a564_0xce59f7(0x120)]?function(_0x561b9a,_0xc2bbbe,_0x563230,_0x28067e){const _0x5a0586=a564_0xce59f7;if(_0x28067e===undefined)_0x28067e=_0x563230;var _0x1b9d6b=Object[_0x5a0586(0x13d)](_0xc2bbbe,_0x563230);(!_0x1b9d6b||(_0x5a0586(0x138)in _0x1b9d6b?!_0xc2bbbe['__esModule']:_0x1b9d6b['writable']||_0x1b9d6b['configurable']))&&(_0x1b9d6b={'enumerable':!![],'get':function(){return _0xc2bbbe[_0x563230];}}),Object[_0x5a0586(0x134)](_0x561b9a,_0x28067e,_0x1b9d6b);}:function(_0x57db86,_0xd8d8f9,_0x23d1e1,_0x5142f6){if(_0x5142f6===undefined)_0x5142f6=_0x23d1e1;_0x57db86[_0x5142f6]=_0xd8d8f9[_0x23d1e1];}),__setModuleDefault=this&&this[a564_0xce59f7(0x132)]||(Object[a564_0xce59f7(0x120)]?function(_0x4a074e,_0x13c91e){const _0x31b4c7=a564_0xce59f7;Object[_0x31b4c7(0x134)](_0x4a074e,_0x31b4c7(0x127),{'enumerable':!![],'value':_0x13c91e});}:function(_0x1d1609,_0xb02cd7){const _0x15f888=a564_0xce59f7;_0x1d1609[_0x15f888(0x127)]=_0xb02cd7;}),__importStar=this&&this['__importStar']||function(_0x357c96){const _0x315f73=a564_0xce59f7;if(_0x357c96&&_0x357c96[_0x315f73(0x128)])return _0x357c96;var _0x5ec964={};if(_0x357c96!=null){for(var _0x4c8eb9 in _0x357c96)if(_0x4c8eb9!==_0x315f73(0x127)&&Object[_0x315f73(0x131)]['hasOwnProperty'][_0x315f73(0x147)](_0x357c96,_0x4c8eb9))__createBinding(_0x5ec964,_0x357c96,_0x4c8eb9);}return __setModuleDefault(_0x5ec964,_0x357c96),_0x5ec964;},__importDefault=this&&this[a564_0xce59f7(0x117)]||function(_0x35f96f){const _0x582864=a564_0xce59f7;return _0x35f96f&&_0x35f96f[_0x582864(0x128)]?_0x35f96f:{'default':_0x35f96f};};Object[a564_0xce59f7(0x134)](exports,a564_0xce59f7(0x128),{'value':!![]});const Sentry=__importStar(require(a564_0xce59f7(0x140))),GetDefaultWhatsApp_1=__importDefault(require(a564_0xce59f7(0x12c))),wbot_1=require('../../libs/wbot'),Contact_1=__importDefault(require(a564_0xce59f7(0x11f))),logger_1=require('../../utils/logger'),ShowBaileysService_1=__importDefault(require(a564_0xce59f7(0x145))),CreateContactService_1=__importDefault(require('../ContactServices/CreateContactService')),lodash_1=require(a564_0xce59f7(0x13e)),path_1=__importDefault(require(a564_0xce59f7(0x139))),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x332a1f=>{const _0x2ce2ea=a564_0xce59f7,_0x35ee3d=await(0x0,GetDefaultWhatsApp_1[_0x2ce2ea(0x127)])(_0x332a1f),_0x3f568b=(0x0,wbot_1[_0x2ce2ea(0x11e)])(_0x35ee3d['id']);let _0x40681b;try{const _0x2980d9=await(0x0,ShowBaileysService_1[_0x2ce2ea(0x127)])(_0x3f568b['id']);_0x40681b=JSON[_0x2ce2ea(0x141)](JSON['stringify'](_0x2980d9[_0x2ce2ea(0x12d)]));const _0x36f3cd=path_1[_0x2ce2ea(0x127)][_0x2ce2ea(0x142)](__dirname,'..','..','..',_0x2ce2ea(0x124)),_0x1fae72=path_1[_0x2ce2ea(0x127)]['join'](_0x36f3cd,_0x2ce2ea(0x146));fs_1[_0x2ce2ea(0x127)][_0x2ce2ea(0x12e)](_0x1fae72,JSON[_0x2ce2ea(0x13c)](_0x40681b,null,0x2),_0x40b14c=>{const _0x18c627=_0x2ce2ea;if(_0x40b14c){logger_1[_0x18c627(0x137)]['error'](_0x18c627(0x126)+_0x40b14c);throw _0x40b14c;}console[_0x18c627(0x13a)](_0x18c627(0x129));});}catch(_0x54db56){Sentry[_0x2ce2ea(0x11a)](_0x54db56),logger_1[_0x2ce2ea(0x137)][_0x2ce2ea(0x13b)](_0x2ce2ea(0x11d)+_0x54db56);}const _0x4242f4=path_1[_0x2ce2ea(0x127)][_0x2ce2ea(0x142)](__dirname,'..','..','..','public'),_0x4825c0=path_1[_0x2ce2ea(0x127)][_0x2ce2ea(0x115)](_0x4242f4,_0x2ce2ea(0x118));fs_1['default'][_0x2ce2ea(0x12e)](_0x4825c0,JSON[_0x2ce2ea(0x13c)](_0x40681b,null,0x2),_0x473e09=>{const _0x1e83c5=_0x2ce2ea;if(_0x473e09){logger_1[_0x1e83c5(0x137)]['error'](_0x1e83c5(0x126)+_0x473e09);throw _0x473e09;}console[_0x1e83c5(0x13a)]('O\x20arquivo\x20contatos_depois.txt\x20foi\x20criado!');});const _0x336eda=(0x0,lodash_1[_0x2ce2ea(0x123)])(_0x40681b)?JSON[_0x2ce2ea(0x141)](_0x40681b):_0x40681b;(0x0,lodash_1['isArray'])(_0x336eda)&&_0x336eda[_0x2ce2ea(0x122)](async({id:_0x5ace3d,name:_0x57a3ca,notify:_0x5e6c64})=>{const _0x46bddf=_0x2ce2ea;if(_0x5ace3d===_0x46bddf(0x136)||_0x5ace3d['includes'](_0x46bddf(0x119)))return;const _0x38a5f5=_0x5ace3d[_0x46bddf(0x135)](/\D/g,''),_0x37be0a=await Contact_1[_0x46bddf(0x127)][_0x46bddf(0x12b)]({'where':{'number':_0x38a5f5,'companyId':_0x332a1f}});if(_0x37be0a)_0x37be0a[_0x46bddf(0x11c)]=_0x57a3ca||_0x5e6c64,await _0x37be0a[_0x46bddf(0x11b)]();else try{await(0x0,CreateContactService_1[_0x46bddf(0x127)])({'number':_0x38a5f5,'name':_0x57a3ca||_0x5e6c64,'companyId':_0x332a1f});}catch(_0x5e20bc){Sentry['captureException'](_0x5e20bc),logger_1[_0x46bddf(0x137)][_0x46bddf(0x143)](_0x46bddf(0x11d)+_0x5e20bc);}});};exports[a564_0xce59f7(0x127)]=ImportContactsService;