'use strict';const a523_0x1aa5d4=a523_0x21b8;(function(_0x55445c,_0x16c1a2){const _0x45e16f=a523_0x21b8,_0x24595a=_0x55445c();while(!![]){try{const _0x35ad51=parseInt(_0x45e16f(0x1e7))/0x1+parseInt(_0x45e16f(0x1e4))/0x2*(-parseInt(_0x45e16f(0x1da))/0x3)+parseInt(_0x45e16f(0x1d8))/0x4*(parseInt(_0x45e16f(0x1ed))/0x5)+parseInt(_0x45e16f(0x1e0))/0x6+parseInt(_0x45e16f(0x1ec))/0x7+-parseInt(_0x45e16f(0x1f4))/0x8*(parseInt(_0x45e16f(0x1ef))/0x9)+parseInt(_0x45e16f(0x1f7))/0xa*(-parseInt(_0x45e16f(0x1ea))/0xb);if(_0x35ad51===_0x16c1a2)break;else _0x24595a['push'](_0x24595a['shift']());}catch(_0x45cf1c){_0x24595a['push'](_0x24595a['shift']());}}}(a523_0x517a,0xecc5a));function a523_0x21b8(_0x5408da,_0x189498){const _0x517abf=a523_0x517a();return a523_0x21b8=function(_0x21b8cd,_0x4b80b8){_0x21b8cd=_0x21b8cd-0x1d6;let _0x3190cf=_0x517abf[_0x21b8cd];return _0x3190cf;},a523_0x21b8(_0x5408da,_0x189498);}var __importDefault=this&&this['__importDefault']||function(_0x5d208e){const _0x189cf3=a523_0x21b8;return _0x5d208e&&_0x5d208e[_0x189cf3(0x1f6)]?_0x5d208e:{'default':_0x5d208e};};function a523_0x517a(){const _0x54ffc5=['1656971xraHXM','../../models/Message','contact','151646ylSJqW','ticketId','3044734vfEgbM','5IkivEs','update','1197eqNosi','replace','@c.us','lgpdDeleteMessage','findOne','50656GeVRdF','enabled','__esModule','510USvINU','value','emit','4956956fLHcph','getIO','7239iNrYPh','log','@s.whatsapp.net','Erro\x20ao\x20tentar\x20marcar\x20a\x20mensagem\x20com\x20excluÃ­da','findAll','enableLGPD','4253424ZhZdtj','ðŸš«\x20_Mensagem\x20Apagada_','wid','../SettingServices/ListSettingsServiceOne','1264AoQtNj','default','../../libs/socket'];a523_0x517a=function(){return _0x54ffc5;};return a523_0x517a();}Object['defineProperty'](exports,'__esModule',{'value':!![]});const Message_1=__importDefault(require(a523_0x1aa5d4(0x1e8))),socket_1=require(a523_0x1aa5d4(0x1e6)),ListSettingsServiceOne_1=__importDefault(require(a523_0x1aa5d4(0x1e3))),Ticket_1=__importDefault(require('../../models/Ticket')),UpdateTicketService_1=__importDefault(require('../TicketServices/UpdateTicketService')),MarkDeleteWhatsAppMessage=async(_0x4c35b1,_0x3270c5,_0xd9f89f,_0x54c104)=>{const _0x3d1ef1=a523_0x1aa5d4;_0x4c35b1=_0x4c35b1['replace'](_0x3d1ef1(0x1f1),'')[_0x3d1ef1(0x1f0)](_0x3d1ef1(0x1dc),'');if(_0xd9f89f){const _0x2100cb=await Message_1[_0x3d1ef1(0x1e5)][_0x3d1ef1(0x1de)]({'where':{'wid':_0xd9f89f,'companyId':_0x54c104}});try{const _0x4c5608=await Message_1[_0x3d1ef1(0x1e5)][_0x3d1ef1(0x1f3)]({'where':{'wid':_0x2100cb[0x0][_0x3d1ef1(0x1e2)]},'include':[_0x3d1ef1(0x1e9),{'model':Message_1[_0x3d1ef1(0x1e5)],'as':'quotedMsg','include':['contact']}]});if(_0x4c5608){const _0x2d973b=await(0x0,ListSettingsServiceOne_1[_0x3d1ef1(0x1e5)])({'companyId':_0x54c104,'key':_0x3d1ef1(0x1df)}),_0x112cc0=await(0x0,ListSettingsServiceOne_1['default'])({'companyId':_0x54c104,'key':_0x3d1ef1(0x1f2)}),_0x59be22=await Ticket_1[_0x3d1ef1(0x1e5)][_0x3d1ef1(0x1f3)]({'where':{'id':_0x4c5608[_0x3d1ef1(0x1eb)],'companyId':_0x54c104}});_0x112cc0[_0x3d1ef1(0x1d6)]===_0x3d1ef1(0x1f5)&&_0x2d973b['value']===_0x3d1ef1(0x1f5)?await _0x4c5608[_0x3d1ef1(0x1ee)]({'body':_0x3d1ef1(0x1e1),'isDeleted':!![]}):await _0x4c5608['update']({'isDeleted':!![]});await(0x0,UpdateTicketService_1[_0x3d1ef1(0x1e5)])({'ticketData':{'lastMessage':'ðŸš«\x20_Mensagem\x20Apagada_'},'ticketId':_0x59be22['id'],'companyId':_0x54c104});const _0x52f58a=(0x0,socket_1[_0x3d1ef1(0x1d9)])();_0x52f58a['to'](_0x4c5608[_0x3d1ef1(0x1eb)]['toString']())[_0x3d1ef1(0x1d7)]('appMessage-'+_0x4c5608,{'action':_0x3d1ef1(0x1ee),'message':_0x4c5608});}}catch(_0x26e591){console[_0x3d1ef1(0x1db)](_0x3d1ef1(0x1dd));}return _0x3270c5;};};exports['default']=MarkDeleteWhatsAppMessage;