'use strict';const a542_0x503841=a542_0x5cbe;(function(_0xa8850a,_0x53740b){const _0x33fb97=a542_0x5cbe,_0x4b7b0e=_0xa8850a();while(!![]){try{const _0x298dde=-parseInt(_0x33fb97(0xe0))/0x1*(-parseInt(_0x33fb97(0xfe))/0x2)+-parseInt(_0x33fb97(0xdb))/0x3+-parseInt(_0x33fb97(0xf6))/0x4+parseInt(_0x33fb97(0xf3))/0x5+parseInt(_0x33fb97(0xf4))/0x6*(-parseInt(_0x33fb97(0xfb))/0x7)+parseInt(_0x33fb97(0xfc))/0x8+-parseInt(_0x33fb97(0xfa))/0x9*(-parseInt(_0x33fb97(0xe1))/0xa);if(_0x298dde===_0x53740b)break;else _0x4b7b0e['push'](_0x4b7b0e['shift']());}catch(_0x217117){_0x4b7b0e['push'](_0x4b7b0e['shift']());}}}(a542_0x2453,0x6befc));var __importDefault=this&&this[a542_0x503841(0xf9)]||function(_0x363ac1){const _0x454350=a542_0x503841;return _0x363ac1&&_0x363ac1[_0x454350(0xe2)]?_0x363ac1:{'default':_0x363ac1};};Object[a542_0x503841(0xe5)](exports,a542_0x503841(0xe2),{'value':!![]});function a542_0x2453(){const _0x10bd07=['emit','replace','__importDefault','5316804JSfnjp','7RCOoqa','886640IzKJzl','../TicketServices/UpdateTicketService','22312dGSqBw','../../models/Message','default','2542485BANCnr','contact','Erro\x20ao\x20tentar\x20marcar\x20a\x20mensagem\x20com\x20excluÃ­da','appMessage-','quotedMsg','14ajBVWH','40fBDRmg','__esModule','wid','../SettingServices/ListSettingsServiceOne','defineProperty','findOne','log','@c.us','findAll','update','ðŸš«\x20_Mensagem\x20Apagada_','ticketId','../../models/Ticket','@s.whatsapp.net','getIO','enabled','value','../../libs/socket','27835vGaaVZ','4531902bkFOxS','toString','2362740SvurDE'];a542_0x2453=function(){return _0x10bd07;};return a542_0x2453();}const Message_1=__importDefault(require(a542_0x503841(0xd9))),socket_1=require(a542_0x503841(0xf2)),ListSettingsServiceOne_1=__importDefault(require(a542_0x503841(0xe4))),Ticket_1=__importDefault(require(a542_0x503841(0xed))),UpdateTicketService_1=__importDefault(require(a542_0x503841(0xfd))),MarkDeleteWhatsAppMessage=async(_0x121f96,_0x38cf92,_0x1fe548,_0x2e2e03)=>{const _0x2b9d42=a542_0x503841;_0x121f96=_0x121f96[_0x2b9d42(0xf8)](_0x2b9d42(0xe8),'')[_0x2b9d42(0xf8)](_0x2b9d42(0xee),'');if(_0x1fe548){const _0x614c04=await Message_1[_0x2b9d42(0xda)][_0x2b9d42(0xe9)]({'where':{'wid':_0x1fe548,'companyId':_0x2e2e03}});try{const _0x245479=await Message_1[_0x2b9d42(0xda)]['findOne']({'where':{'wid':_0x614c04[0x0][_0x2b9d42(0xe3)]},'include':[_0x2b9d42(0xdc),{'model':Message_1[_0x2b9d42(0xda)],'as':_0x2b9d42(0xdf),'include':[_0x2b9d42(0xdc)]}]});if(_0x245479){const _0x177dd1=await(0x0,ListSettingsServiceOne_1['default'])({'companyId':_0x2e2e03,'key':'enableLGPD'}),_0x294c78=await(0x0,ListSettingsServiceOne_1[_0x2b9d42(0xda)])({'companyId':_0x2e2e03,'key':'lgpdDeleteMessage'}),_0x3e2428=await Ticket_1['default'][_0x2b9d42(0xe6)]({'where':{'id':_0x245479[_0x2b9d42(0xec)],'companyId':_0x2e2e03}});_0x294c78['value']===_0x2b9d42(0xf0)&&_0x177dd1[_0x2b9d42(0xf1)]===_0x2b9d42(0xf0)?await _0x245479[_0x2b9d42(0xea)]({'body':'ðŸš«\x20_Mensagem\x20Apagada_','isDeleted':!![]}):await _0x245479[_0x2b9d42(0xea)]({'isDeleted':!![]});await(0x0,UpdateTicketService_1['default'])({'ticketData':{'lastMessage':_0x2b9d42(0xeb)},'ticketId':_0x3e2428['id'],'companyId':_0x2e2e03});const _0x4a246b=(0x0,socket_1[_0x2b9d42(0xef)])();_0x4a246b['to'](_0x245479['ticketId'][_0x2b9d42(0xf5)]())[_0x2b9d42(0xf7)](_0x2b9d42(0xde)+_0x245479,{'action':_0x2b9d42(0xea),'message':_0x245479});}}catch(_0x3eb779){console[_0x2b9d42(0xe7)](_0x2b9d42(0xdd));}return _0x38cf92;};};function a542_0x5cbe(_0x1138ce,_0x568ee5){const _0x245395=a542_0x2453();return a542_0x5cbe=function(_0x5cbe72,_0x20cef1){_0x5cbe72=_0x5cbe72-0xd9;let _0x342a54=_0x245395[_0x5cbe72];return _0x342a54;},a542_0x5cbe(_0x1138ce,_0x568ee5);}exports['default']=MarkDeleteWhatsAppMessage;