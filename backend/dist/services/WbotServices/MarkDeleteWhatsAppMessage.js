'use strict';function a542_0x454a(_0x15af29,_0x416dbe){const _0x3f89a3=a542_0x3f89();return a542_0x454a=function(_0x454a59,_0x28f868){_0x454a59=_0x454a59-0x12a;let _0x286140=_0x3f89a3[_0x454a59];return _0x286140;},a542_0x454a(_0x15af29,_0x416dbe);}const a542_0x1e7c46=a542_0x454a;(function(_0x2f3ab9,_0x297447){const _0x31c69c=a542_0x454a,_0x1a565d=_0x2f3ab9();while(!![]){try{const _0x21ff8d=parseInt(_0x31c69c(0x139))/0x1*(-parseInt(_0x31c69c(0x148))/0x2)+-parseInt(_0x31c69c(0x140))/0x3+-parseInt(_0x31c69c(0x12f))/0x4*(parseInt(_0x31c69c(0x146))/0x5)+-parseInt(_0x31c69c(0x13e))/0x6*(-parseInt(_0x31c69c(0x144))/0x7)+-parseInt(_0x31c69c(0x133))/0x8*(parseInt(_0x31c69c(0x145))/0x9)+-parseInt(_0x31c69c(0x137))/0xa+parseInt(_0x31c69c(0x132))/0xb;if(_0x21ff8d===_0x297447)break;else _0x1a565d['push'](_0x1a565d['shift']());}catch(_0x43cad1){_0x1a565d['push'](_0x1a565d['shift']());}}}(a542_0x3f89,0xbf5eb));var __importDefault=this&&this[a542_0x1e7c46(0x14b)]||function(_0x511a6a){return _0x511a6a&&_0x511a6a['__esModule']?_0x511a6a:{'default':_0x511a6a};};Object['defineProperty'](exports,a542_0x1e7c46(0x134),{'value':!![]});const Message_1=__importDefault(require('../../models/Message')),socket_1=require(a542_0x1e7c46(0x147)),ListSettingsServiceOne_1=__importDefault(require('../SettingServices/ListSettingsServiceOne')),Ticket_1=__importDefault(require(a542_0x1e7c46(0x12c))),UpdateTicketService_1=__importDefault(require(a542_0x1e7c46(0x12e))),MarkDeleteWhatsAppMessage=async(_0xbb8c23,_0x4bee33,_0x5725e3,_0x32fb8f)=>{const _0x3920f9=a542_0x1e7c46;_0xbb8c23=_0xbb8c23[_0x3920f9(0x142)](_0x3920f9(0x13d),'')['replace'](_0x3920f9(0x130),'');if(_0x5725e3){const _0x4094c0=await Message_1[_0x3920f9(0x136)][_0x3920f9(0x13f)]({'where':{'wid':_0x5725e3,'companyId':_0x32fb8f}});try{const _0x906ceb=await Message_1[_0x3920f9(0x136)]['findOne']({'where':{'wid':_0x4094c0[0x0][_0x3920f9(0x12a)]},'include':[_0x3920f9(0x12b),{'model':Message_1['default'],'as':'quotedMsg','include':[_0x3920f9(0x12b)]}]});if(_0x906ceb){const _0x45454f=await(0x0,ListSettingsServiceOne_1['default'])({'companyId':_0x32fb8f,'key':'enableLGPD'}),_0x5dc0d8=await(0x0,ListSettingsServiceOne_1['default'])({'companyId':_0x32fb8f,'key':_0x3920f9(0x141)}),_0x904bd7=await Ticket_1[_0x3920f9(0x136)][_0x3920f9(0x13a)]({'where':{'id':_0x906ceb[_0x3920f9(0x14a)],'companyId':_0x32fb8f}});_0x5dc0d8[_0x3920f9(0x138)]===_0x3920f9(0x143)&&_0x45454f[_0x3920f9(0x138)]===_0x3920f9(0x143)?await _0x906ceb[_0x3920f9(0x131)]({'body':_0x3920f9(0x12d),'isDeleted':!![]}):await _0x906ceb[_0x3920f9(0x131)]({'isDeleted':!![]});await(0x0,UpdateTicketService_1['default'])({'ticketData':{'lastMessage':'ðŸš«\x20_Mensagem\x20Apagada_'},'ticketId':_0x904bd7['id'],'companyId':_0x32fb8f});const _0x395523=(0x0,socket_1[_0x3920f9(0x149)])();_0x395523['to'](_0x906ceb['ticketId'][_0x3920f9(0x135)]())[_0x3920f9(0x14c)](_0x3920f9(0x13c)+_0x906ceb,{'action':'update','message':_0x906ceb});}}catch(_0x44bbca){console[_0x3920f9(0x13b)]('Erro\x20ao\x20tentar\x20marcar\x20a\x20mensagem\x20com\x20excluÃ­da');}return _0x4bee33;};};function a542_0x3f89(){const _0x4f5615=['24qVQpwA','__esModule','toString','default','10500000zIBMFR','value','28559kWxjBe','findOne','log','appMessage-','@c.us','192LcaHxA','findAll','2089008YnCLME','lgpdDeleteMessage','replace','enabled','100387ZptqxR','4588047VTYVgQ','2455kNqCCo','../../libs/socket','6eVWVZW','getIO','ticketId','__importDefault','emit','wid','contact','../../models/Ticket','ðŸš«\x20_Mensagem\x20Apagada_','../TicketServices/UpdateTicketService','5264ZgoPZE','@s.whatsapp.net','update','47657027QOjHPV'];a542_0x3f89=function(){return _0x4f5615;};return a542_0x3f89();}exports[a542_0x1e7c46(0x136)]=MarkDeleteWhatsAppMessage;