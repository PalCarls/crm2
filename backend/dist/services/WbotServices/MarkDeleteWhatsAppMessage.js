'use strict';const a606_0x364850=a606_0xfc84;(function(_0x53568d,_0x32ffdc){const _0x42150b=a606_0xfc84,_0x4afcb2=_0x53568d();while(!![]){try{const _0x1218af=-parseInt(_0x42150b(0x8d))/0x1*(parseInt(_0x42150b(0x77))/0x2)+-parseInt(_0x42150b(0x96))/0x3*(-parseInt(_0x42150b(0x81))/0x4)+parseInt(_0x42150b(0x91))/0x5+parseInt(_0x42150b(0x82))/0x6+parseInt(_0x42150b(0x80))/0x7*(parseInt(_0x42150b(0x83))/0x8)+-parseInt(_0x42150b(0x7f))/0x9+-parseInt(_0x42150b(0x79))/0xa;if(_0x1218af===_0x32ffdc)break;else _0x4afcb2['push'](_0x4afcb2['shift']());}catch(_0xf2bba0){_0x4afcb2['push'](_0x4afcb2['shift']());}}}(a606_0xd042,0x19f1a));function a606_0xfc84(_0x2fb6e4,_0x4c7515){const _0xd0429f=a606_0xd042();return a606_0xfc84=function(_0xfc8454,_0x9a1b9d){_0xfc8454=_0xfc8454-0x77;let _0x5ebda2=_0xd0429f[_0xfc8454];return _0x5ebda2;},a606_0xfc84(_0x2fb6e4,_0x4c7515);}function a606_0xd042(){const _0x164f59=['@c.us','../../models/Message','emit','1171692SrGPhG','28wxQyvk','8MnkIVn','1262544NjAhcP','144680rJhUFt','ticketId','../../models/Ticket','findAll','wid','__importDefault','enableLGPD','default','findOne','log','999cVcTLS','../TicketServices/UpdateTicketService','ðŸš«\x20_Mensagem\x20Apagada_','contact','732280gTQoJg','appMessage-','quotedMsg','replace','enabled','38256oiSBxo','324nJcJFL','__esModule','564320TXBHsv','update','@s.whatsapp.net'];a606_0xd042=function(){return _0x164f59;};return a606_0xd042();}var __importDefault=this&&this[a606_0x364850(0x88)]||function(_0x5c7ba5){const _0x4de9ce=a606_0x364850;return _0x5c7ba5&&_0x5c7ba5[_0x4de9ce(0x78)]?_0x5c7ba5:{'default':_0x5c7ba5};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const Message_1=__importDefault(require(a606_0x364850(0x7d))),socket_1=require('../../libs/socket'),Ticket_1=__importDefault(require(a606_0x364850(0x85))),UpdateTicketService_1=__importDefault(require(a606_0x364850(0x8e))),CompaniesSettings_1=__importDefault(require('../../models/CompaniesSettings')),MarkDeleteWhatsAppMessage=async(_0x4f57aa,_0x6b9005,_0x366555,_0x1bbeee)=>{const _0x43df83=a606_0x364850;_0x4f57aa=_0x4f57aa['replace'](_0x43df83(0x7c),'')[_0x43df83(0x94)](_0x43df83(0x7b),'');if(_0x366555){const _0xf82de2=await Message_1['default'][_0x43df83(0x86)]({'where':{'wid':_0x366555,'companyId':_0x1bbeee}});try{const _0x307996=await Message_1[_0x43df83(0x8a)][_0x43df83(0x8b)]({'where':{'wid':_0xf82de2[0x0][_0x43df83(0x87)]},'include':[_0x43df83(0x90),{'model':Message_1[_0x43df83(0x8a)],'as':_0x43df83(0x93),'include':[_0x43df83(0x90)]}]});if(_0x307996){const _0x52f596=await CompaniesSettings_1['default']['findOne']({'where':{'companyId':_0x1bbeee}}),_0x54bc8d=await Ticket_1[_0x43df83(0x8a)][_0x43df83(0x8b)]({'where':{'id':_0x307996[_0x43df83(0x84)],'companyId':_0x1bbeee}});_0x52f596['lgpdDeleteMessage']==='enabled'&&_0x52f596[_0x43df83(0x89)]===_0x43df83(0x95)?await _0x307996[_0x43df83(0x7a)]({'body':'ðŸš«\x20_Mensagem\x20Apagada_','isDeleted':!![]}):await _0x307996['update']({'isDeleted':!![]});await(0x0,UpdateTicketService_1['default'])({'ticketData':{'lastMessage':_0x43df83(0x8f)},'ticketId':_0x54bc8d['id'],'companyId':_0x1bbeee});const _0x3495d9=(0x0,socket_1['getIO'])();_0x3495d9['to'](_0x307996[_0x43df83(0x84)]['toString']())[_0x43df83(0x7e)](_0x43df83(0x92)+_0x307996,{'action':'update','message':_0x307996});}}catch(_0x5ad6a7){console[_0x43df83(0x8c)]('Erro\x20ao\x20tentar\x20marcar\x20a\x20mensagem\x20com\x20excluÃ­da');}return _0x6b9005;};};exports[a606_0x364850(0x8a)]=MarkDeleteWhatsAppMessage;