'use strict';const a559_0x2b8b00=a559_0x1133;(function(_0x46e9cd,_0x5d1302){const _0x3c2d7d=a559_0x1133,_0x181f2a=_0x46e9cd();while(!![]){try{const _0x408acc=parseInt(_0x3c2d7d(0x171))/0x1+-parseInt(_0x3c2d7d(0x176))/0x2*(-parseInt(_0x3c2d7d(0x17a))/0x3)+-parseInt(_0x3c2d7d(0x177))/0x4*(-parseInt(_0x3c2d7d(0x173))/0x5)+-parseInt(_0x3c2d7d(0x166))/0x6+-parseInt(_0x3c2d7d(0x16e))/0x7*(parseInt(_0x3c2d7d(0x179))/0x8)+parseInt(_0x3c2d7d(0x168))/0x9*(-parseInt(_0x3c2d7d(0x17e))/0xa)+-parseInt(_0x3c2d7d(0x161))/0xb*(parseInt(_0x3c2d7d(0x175))/0xc);if(_0x408acc===_0x5d1302)break;else _0x181f2a['push'](_0x181f2a['shift']());}catch(_0x3e8796){_0x181f2a['push'](_0x181f2a['shift']());}}}(a559_0x3a9b,0x700c8));function a559_0x3a9b(){const _0x3d077d=['replace','__esModule','log','toString','82335aYwudm','findAll','quotedMsg','ðŸš«\x20_Mensagem\x20Apagada_','enableLGPD','444678KsEHBw','defineProperty','63srjZAu','../../models/Ticket','default','../../models/CompaniesSettings','../../libs/socket','contact','1568qQrQJO','findOne','lgpdDeleteMessage','505006cikjJL','wid','570noTPwQ','getIO','12GhkBni','2iGJbBD','14412MQWjzq','Erro\x20ao\x20tentar\x20marcar\x20a\x20mensagem\x20com\x20excluÃ­da','11816JRhIWj','1738071YXceYV','update','appMessage-','../../models/Message','891010ePdBHf'];a559_0x3a9b=function(){return _0x3d077d;};return a559_0x3a9b();}function a559_0x1133(_0x250f34,_0x414a12){const _0x3a9b6f=a559_0x3a9b();return a559_0x1133=function(_0x113364,_0x531dd6){_0x113364=_0x113364-0x15f;let _0x513ad4=_0x3a9b6f[_0x113364];return _0x513ad4;},a559_0x1133(_0x250f34,_0x414a12);}var __importDefault=this&&this['__importDefault']||function(_0x5db163){const _0x43a1a1=a559_0x1133;return _0x5db163&&_0x5db163[_0x43a1a1(0x180)]?_0x5db163:{'default':_0x5db163};};Object[a559_0x2b8b00(0x167)](exports,'__esModule',{'value':!![]});const Message_1=__importDefault(require(a559_0x2b8b00(0x17d))),socket_1=require(a559_0x2b8b00(0x16c)),Ticket_1=__importDefault(require(a559_0x2b8b00(0x169))),UpdateTicketService_1=__importDefault(require('../TicketServices/UpdateTicketService')),CompaniesSettings_1=__importDefault(require(a559_0x2b8b00(0x16b))),MarkDeleteWhatsAppMessage=async(_0x2af8b3,_0x4489a6,_0x146513,_0x3aeb21)=>{const _0x2f35f0=a559_0x2b8b00;_0x2af8b3=_0x2af8b3['replace']('@c.us','')[_0x2f35f0(0x17f)]('@s.whatsapp.net','');if(_0x146513){const _0x2cb0fb=await Message_1[_0x2f35f0(0x16a)][_0x2f35f0(0x162)]({'where':{'wid':_0x146513,'companyId':_0x3aeb21}});try{const _0x21be7f=await Message_1[_0x2f35f0(0x16a)]['findOne']({'where':{'wid':_0x2cb0fb[0x0][_0x2f35f0(0x172)]},'include':[_0x2f35f0(0x16d),{'model':Message_1[_0x2f35f0(0x16a)],'as':_0x2f35f0(0x163),'include':[_0x2f35f0(0x16d)]}]});if(_0x21be7f){const _0x10f891=await CompaniesSettings_1[_0x2f35f0(0x16a)]['findOne']({'where':{'companyId':_0x3aeb21}}),_0x4b8e00=await Ticket_1[_0x2f35f0(0x16a)][_0x2f35f0(0x16f)]({'where':{'id':_0x21be7f['ticketId'],'companyId':_0x3aeb21}});_0x10f891[_0x2f35f0(0x170)]==='enabled'&&_0x10f891[_0x2f35f0(0x165)]==='enabled'?await _0x21be7f[_0x2f35f0(0x17b)]({'body':_0x2f35f0(0x164),'isDeleted':!![]}):await _0x21be7f[_0x2f35f0(0x17b)]({'isDeleted':!![]});await(0x0,UpdateTicketService_1[_0x2f35f0(0x16a)])({'ticketData':{'lastMessage':_0x2f35f0(0x164)},'ticketId':_0x4b8e00['id'],'companyId':_0x3aeb21});const _0x560c9a=(0x0,socket_1[_0x2f35f0(0x174)])();_0x560c9a['to'](_0x21be7f['ticketId'][_0x2f35f0(0x160)]())['emit'](_0x2f35f0(0x17c)+_0x21be7f,{'action':_0x2f35f0(0x17b),'message':_0x21be7f});}}catch(_0x357a09){console[_0x2f35f0(0x15f)](_0x2f35f0(0x178));}return _0x4489a6;};};exports['default']=MarkDeleteWhatsAppMessage;