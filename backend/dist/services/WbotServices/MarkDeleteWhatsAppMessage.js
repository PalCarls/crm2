'use strict';function a618_0x5e19(_0x211247,_0x2c6008){const _0x377fa5=a618_0x377f();return a618_0x5e19=function(_0x5e1946,_0x50fb29){_0x5e1946=_0x5e1946-0x72;let _0xa0a0df=_0x377fa5[_0x5e1946];return _0xa0a0df;},a618_0x5e19(_0x211247,_0x2c6008);}const a618_0x3c33c6=a618_0x5e19;(function(_0x18a2a8,_0x1b039e){const _0x29dd73=a618_0x5e19,_0x513bf5=_0x18a2a8();while(!![]){try{const _0x343365=-parseInt(_0x29dd73(0x88))/0x1*(parseInt(_0x29dd73(0x7f))/0x2)+parseInt(_0x29dd73(0x77))/0x3*(-parseInt(_0x29dd73(0x7b))/0x4)+parseInt(_0x29dd73(0x74))/0x5+-parseInt(_0x29dd73(0x87))/0x6*(parseInt(_0x29dd73(0x7a))/0x7)+-parseInt(_0x29dd73(0x81))/0x8*(parseInt(_0x29dd73(0x92))/0x9)+parseInt(_0x29dd73(0x7c))/0xa*(-parseInt(_0x29dd73(0x95))/0xb)+-parseInt(_0x29dd73(0x94))/0xc*(-parseInt(_0x29dd73(0x82))/0xd);if(_0x343365===_0x1b039e)break;else _0x513bf5['push'](_0x513bf5['shift']());}catch(_0x3db4b1){_0x513bf5['push'](_0x513bf5['shift']());}}}(a618_0x377f,0x79c12));var __importDefault=this&&this[a618_0x3c33c6(0x8e)]||function(_0x46bb0f){const _0x54bcc3=a618_0x3c33c6;return _0x46bb0f&&_0x46bb0f[_0x54bcc3(0x8c)]?_0x46bb0f:{'default':_0x46bb0f};};Object[a618_0x3c33c6(0x8a)](exports,a618_0x3c33c6(0x8c),{'value':!![]});const Message_1=__importDefault(require('../../models/Message')),socket_1=require('../../libs/socket'),Ticket_1=__importDefault(require(a618_0x3c33c6(0x93))),UpdateTicketService_1=__importDefault(require(a618_0x3c33c6(0x79))),CompaniesSettings_1=__importDefault(require(a618_0x3c33c6(0x83))),MarkDeleteWhatsAppMessage=async(_0x25edf1,_0x718fc3,_0x213ed1,_0x5c684f)=>{const _0x55cd8f=a618_0x3c33c6;_0x25edf1=_0x25edf1[_0x55cd8f(0x86)](_0x55cd8f(0x7d),'')[_0x55cd8f(0x86)](_0x55cd8f(0x8b),'');if(_0x213ed1){const _0x359ee4=await Message_1['default']['findAll']({'where':{'wid':_0x213ed1,'companyId':_0x5c684f}});try{const _0x21deed=await Message_1[_0x55cd8f(0x78)]['findOne']({'where':{'wid':_0x359ee4[0x0]['wid']},'include':['contact',{'model':Message_1[_0x55cd8f(0x78)],'as':_0x55cd8f(0x8d),'include':[_0x55cd8f(0x90)]}]});if(_0x21deed){const _0xeeaf4=await CompaniesSettings_1['default']['findOne']({'where':{'companyId':_0x5c684f}}),_0x5c6071=await Ticket_1['default'][_0x55cd8f(0x85)]({'where':{'id':_0x21deed[_0x55cd8f(0x75)],'companyId':_0x5c684f}});_0xeeaf4[_0x55cd8f(0x89)]===_0x55cd8f(0x80)&&_0xeeaf4[_0x55cd8f(0x76)]==='enabled'?await _0x21deed[_0x55cd8f(0x8f)]({'body':_0x55cd8f(0x7e),'isDeleted':!![]}):await _0x21deed['update']({'isDeleted':!![]});await(0x0,UpdateTicketService_1[_0x55cd8f(0x78)])({'ticketData':{'lastMessage':_0x55cd8f(0x7e)},'ticketId':_0x5c6071['id'],'companyId':_0x5c684f});const _0x149fa9=(0x0,socket_1['getIO'])();_0x149fa9['to'](_0x21deed['ticketId'][_0x55cd8f(0x72)]())[_0x55cd8f(0x91)]('appMessage-'+_0x21deed,{'action':_0x55cd8f(0x8f),'message':_0x21deed});}}catch(_0x1107da){console[_0x55cd8f(0x84)](_0x55cd8f(0x73));}return _0x718fc3;};};function a618_0x377f(){const _0x398af0=['229123aMSgOS','lgpdDeleteMessage','defineProperty','@s.whatsapp.net','__esModule','quotedMsg','__importDefault','update','contact','emit','26802mxmLJD','../../models/Ticket','385068ltEeVa','55AdZBZO','toString','Erro\x20ao\x20tentar\x20marcar\x20a\x20mensagem\x20com\x20excluÃ­da','763875FyuRql','ticketId','enableLGPD','381sQQADf','default','../TicketServices/UpdateTicketService','42JfxPde','29844unYKCB','1173990BsgGtD','@c.us','ðŸš«\x20_Mensagem\x20Apagada_','2jJRIWY','enabled','1504BFZkly','1482AydweV','../../models/CompaniesSettings','log','findOne','replace','988686suFjpU'];a618_0x377f=function(){return _0x398af0;};return a618_0x377f();}exports[a618_0x3c33c6(0x78)]=MarkDeleteWhatsAppMessage;