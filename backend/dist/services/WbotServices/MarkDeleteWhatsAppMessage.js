'use strict';const a565_0x46790b=a565_0x4b6a;(function(_0x26c157,_0x221f47){const _0x41ee8b=a565_0x4b6a,_0x3b5691=_0x26c157();while(!![]){try{const _0x48a29c=-parseInt(_0x41ee8b(0x19d))/0x1*(parseInt(_0x41ee8b(0x191))/0x2)+parseInt(_0x41ee8b(0x184))/0x3+parseInt(_0x41ee8b(0x199))/0x4+parseInt(_0x41ee8b(0x180))/0x5+-parseInt(_0x41ee8b(0x182))/0x6*(-parseInt(_0x41ee8b(0x19a))/0x7)+parseInt(_0x41ee8b(0x196))/0x8+-parseInt(_0x41ee8b(0x190))/0x9;if(_0x48a29c===_0x221f47)break;else _0x3b5691['push'](_0x3b5691['shift']());}catch(_0x11cadd){_0x3b5691['push'](_0x3b5691['shift']());}}}(a565_0x1970,0x8d1c5));var __importDefault=this&&this[a565_0x46790b(0x1a1)]||function(_0x26ded7){return _0x26ded7&&_0x26ded7['__esModule']?_0x26ded7:{'default':_0x26ded7};};Object[a565_0x46790b(0x18c)](exports,a565_0x46790b(0x189),{'value':!![]});const Message_1=__importDefault(require(a565_0x46790b(0x17f))),socket_1=require(a565_0x46790b(0x198)),Ticket_1=__importDefault(require(a565_0x46790b(0x18f))),UpdateTicketService_1=__importDefault(require(a565_0x46790b(0x194))),CompaniesSettings_1=__importDefault(require(a565_0x46790b(0x19b))),MarkDeleteWhatsAppMessage=async(_0x5d3963,_0x101ee9,_0x1dec91,_0x332bac)=>{const _0x43a38d=a565_0x46790b;_0x5d3963=_0x5d3963[_0x43a38d(0x18e)](_0x43a38d(0x186),'')['replace'](_0x43a38d(0x188),'');if(_0x1dec91){const _0x2bea5c=await Message_1[_0x43a38d(0x192)][_0x43a38d(0x1a3)]({'where':{'wid':_0x1dec91,'companyId':_0x332bac}});try{const _0x173de3=await Message_1['default']['findOne']({'where':{'wid':_0x2bea5c[0x0][_0x43a38d(0x187)]},'include':[_0x43a38d(0x19c),{'model':Message_1[_0x43a38d(0x192)],'as':_0x43a38d(0x19f),'include':['contact']}]});if(_0x173de3){const _0x37a9be=await CompaniesSettings_1['default']['findOne']({'where':{'companyId':_0x332bac}}),_0x5410f4=await Ticket_1[_0x43a38d(0x192)][_0x43a38d(0x18b)]({'where':{'id':_0x173de3[_0x43a38d(0x193)],'companyId':_0x332bac}});_0x37a9be[_0x43a38d(0x19e)]===_0x43a38d(0x18d)&&_0x37a9be[_0x43a38d(0x197)]===_0x43a38d(0x18d)?await _0x173de3[_0x43a38d(0x18a)]({'body':_0x43a38d(0x195),'isDeleted':!![]}):await _0x173de3['update']({'isDeleted':!![]});await(0x0,UpdateTicketService_1[_0x43a38d(0x192)])({'ticketData':{'lastMessage':_0x43a38d(0x195)},'ticketId':_0x5410f4['id'],'companyId':_0x332bac});const _0x24a817=(0x0,socket_1[_0x43a38d(0x1a2)])();_0x24a817['to'](_0x173de3[_0x43a38d(0x193)][_0x43a38d(0x1a0)]())[_0x43a38d(0x185)]('appMessage-'+_0x173de3,{'action':_0x43a38d(0x18a),'message':_0x173de3});}}catch(_0x108b0e){console[_0x43a38d(0x181)](_0x43a38d(0x183));}return _0x101ee9;};};exports[a565_0x46790b(0x192)]=MarkDeleteWhatsAppMessage;function a565_0x4b6a(_0x4cbf04,_0x29343b){const _0x1970b3=a565_0x1970();return a565_0x4b6a=function(_0x4b6aa0,_0x1cc20e){_0x4b6aa0=_0x4b6aa0-0x17f;let _0x587696=_0x1970b3[_0x4b6aa0];return _0x587696;},a565_0x4b6a(_0x4cbf04,_0x29343b);}function a565_0x1970(){const _0x22e1bf=['../../models/Message','786040sxqlUg','log','402NbcFGP','Erro\x20ao\x20tentar\x20marcar\x20a\x20mensagem\x20com\x20excluÃ­da','1170543ghUTcN','emit','@c.us','wid','@s.whatsapp.net','__esModule','update','findOne','defineProperty','enabled','replace','../../models/Ticket','6503454GWUabP','2WjFSaf','default','ticketId','../TicketServices/UpdateTicketService','ðŸš«\x20_Mensagem\x20Apagada_','6781840InULuI','enableLGPD','../../libs/socket','406052piJMLG','1596SsJfsb','../../models/CompaniesSettings','contact','211313yjJhgp','lgpdDeleteMessage','quotedMsg','toString','__importDefault','getIO','findAll'];a565_0x1970=function(){return _0x22e1bf;};return a565_0x1970();}