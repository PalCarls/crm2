'use strict';const a559_0x2c6a60=a559_0x4c01;(function(_0x1ee931,_0x25e7d5){const _0x5a07d2=a559_0x4c01,_0x4f8328=_0x1ee931();while(!![]){try{const _0x963176=parseInt(_0x5a07d2(0xd3))/0x1*(parseInt(_0x5a07d2(0xe1))/0x2)+-parseInt(_0x5a07d2(0xd2))/0x3+parseInt(_0x5a07d2(0xe8))/0x4+-parseInt(_0x5a07d2(0xd6))/0x5*(-parseInt(_0x5a07d2(0xe2))/0x6)+-parseInt(_0x5a07d2(0xd0))/0x7*(-parseInt(_0x5a07d2(0xd1))/0x8)+parseInt(_0x5a07d2(0xe4))/0x9+parseInt(_0x5a07d2(0xdd))/0xa*(-parseInt(_0x5a07d2(0xdf))/0xb);if(_0x963176===_0x25e7d5)break;else _0x4f8328['push'](_0x4f8328['shift']());}catch(_0x342b42){_0x4f8328['push'](_0x4f8328['shift']());}}}(a559_0x3768,0xf3904));var __importDefault=this&&this['__importDefault']||function(_0x33143c){const _0x1c9d89=a559_0x4c01;return _0x33143c&&_0x33143c[_0x1c9d89(0xce)]?_0x33143c:{'default':_0x33143c};};function a559_0x3768(){const _0x5b265f=['default','__esModule','Erro\x20ao\x20tentar\x20marcar\x20a\x20mensagem\x20com\x20excluÃ­da','12208ihbznG','1472vklXdV','4957335ckITyz','450865wXdrmH','ticketId','lgpdDeleteMessage','95iBIRlv','update','../../models/CompaniesSettings','../../libs/socket','wid','enabled','toString','90UyOlIR','quotedMsg','3795649OLdAmP','emit','6XMcCXR','322458zmcjDW','findAll','11333412XCZlKN','replace','appMessage-','@s.whatsapp.net','7206944bnKYLu','getIO','findOne','ðŸš«\x20_Mensagem\x20Apagada_'];a559_0x3768=function(){return _0x5b265f;};return a559_0x3768();}Object['defineProperty'](exports,a559_0x2c6a60(0xce),{'value':!![]});const Message_1=__importDefault(require('../../models/Message')),socket_1=require(a559_0x2c6a60(0xd9)),Ticket_1=__importDefault(require('../../models/Ticket')),UpdateTicketService_1=__importDefault(require('../TicketServices/UpdateTicketService')),CompaniesSettings_1=__importDefault(require(a559_0x2c6a60(0xd8))),MarkDeleteWhatsAppMessage=async(_0x5667d8,_0x273469,_0x466c15,_0x409959)=>{const _0x175ebe=a559_0x2c6a60;_0x5667d8=_0x5667d8[_0x175ebe(0xe5)]('@c.us','')['replace'](_0x175ebe(0xe7),'');if(_0x466c15){const _0x2aaa54=await Message_1[_0x175ebe(0xcd)][_0x175ebe(0xe3)]({'where':{'wid':_0x466c15,'companyId':_0x409959}});try{const _0x532d97=await Message_1[_0x175ebe(0xcd)]['findOne']({'where':{'wid':_0x2aaa54[0x0][_0x175ebe(0xda)]},'include':['contact',{'model':Message_1['default'],'as':_0x175ebe(0xde),'include':['contact']}]});if(_0x532d97){const _0x3c509a=await CompaniesSettings_1[_0x175ebe(0xcd)][_0x175ebe(0xea)]({'where':{'companyId':_0x409959}}),_0x58e5d4=await Ticket_1[_0x175ebe(0xcd)][_0x175ebe(0xea)]({'where':{'id':_0x532d97[_0x175ebe(0xd4)],'companyId':_0x409959}});_0x3c509a[_0x175ebe(0xd5)]===_0x175ebe(0xdb)&&_0x3c509a['enableLGPD']===_0x175ebe(0xdb)?await _0x532d97['update']({'body':_0x175ebe(0xeb),'isDeleted':!![]}):await _0x532d97[_0x175ebe(0xd7)]({'isDeleted':!![]});await(0x0,UpdateTicketService_1[_0x175ebe(0xcd)])({'ticketData':{'lastMessage':'ðŸš«\x20_Mensagem\x20Apagada_'},'ticketId':_0x58e5d4['id'],'companyId':_0x409959});const _0x8669d6=(0x0,socket_1[_0x175ebe(0xe9)])();_0x8669d6['to'](_0x532d97['ticketId'][_0x175ebe(0xdc)]())[_0x175ebe(0xe0)](_0x175ebe(0xe6)+_0x532d97,{'action':'update','message':_0x532d97});}}catch(_0x3ed1bb){console['log'](_0x175ebe(0xcf));}return _0x273469;};};function a559_0x4c01(_0x32f28d,_0x44b4b7){const _0x37686a=a559_0x3768();return a559_0x4c01=function(_0x4c010f,_0x20c076){_0x4c010f=_0x4c010f-0xcd;let _0x1d8ad7=_0x37686a[_0x4c010f];return _0x1d8ad7;},a559_0x4c01(_0x32f28d,_0x44b4b7);}exports[a559_0x2c6a60(0xcd)]=MarkDeleteWhatsAppMessage;