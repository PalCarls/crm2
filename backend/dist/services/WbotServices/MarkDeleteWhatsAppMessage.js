'use strict';const a606_0x1934e9=a606_0x4f1c;(function(_0x44facb,_0x3cde5d){const _0x824edb=a606_0x4f1c,_0x164e84=_0x44facb();while(!![]){try{const _0x1a7aa2=-parseInt(_0x824edb(0x193))/0x1*(-parseInt(_0x824edb(0x190))/0x2)+parseInt(_0x824edb(0x17d))/0x3*(-parseInt(_0x824edb(0x17b))/0x4)+-parseInt(_0x824edb(0x183))/0x5+-parseInt(_0x824edb(0x189))/0x6*(-parseInt(_0x824edb(0x180))/0x7)+-parseInt(_0x824edb(0x188))/0x8+-parseInt(_0x824edb(0x18f))/0x9+parseInt(_0x824edb(0x18a))/0xa;if(_0x1a7aa2===_0x3cde5d)break;else _0x164e84['push'](_0x164e84['shift']());}catch(_0x563cb2){_0x164e84['push'](_0x164e84['shift']());}}}(a606_0x2849,0x3f1e1));function a606_0x4f1c(_0x230f1e,_0x10340c){const _0x284922=a606_0x2849();return a606_0x4f1c=function(_0x4f1c32,_0x5474ce){_0x4f1c32=_0x4f1c32-0x175;let _0x273995=_0x284922[_0x4f1c32];return _0x273995;},a606_0x4f1c(_0x230f1e,_0x10340c);}var __importDefault=this&&this[a606_0x1934e9(0x18e)]||function(_0x49ea6b){const _0x3d4157=a606_0x1934e9;return _0x49ea6b&&_0x49ea6b[_0x3d4157(0x182)]?_0x49ea6b:{'default':_0x49ea6b};};Object[a606_0x1934e9(0x187)](exports,a606_0x1934e9(0x182),{'value':!![]});const Message_1=__importDefault(require('../../models/Message')),socket_1=require(a606_0x1934e9(0x192)),Ticket_1=__importDefault(require(a606_0x1934e9(0x17f))),UpdateTicketService_1=__importDefault(require('../TicketServices/UpdateTicketService')),CompaniesSettings_1=__importDefault(require(a606_0x1934e9(0x17a))),MarkDeleteWhatsAppMessage=async(_0x18bfbe,_0x18ee0c,_0x26671a,_0x3c7ba4)=>{const _0x2d58c3=a606_0x1934e9;_0x18bfbe=_0x18bfbe[_0x2d58c3(0x178)]('@c.us','')['replace'](_0x2d58c3(0x17e),'');if(_0x26671a){const _0x1645e6=await Message_1[_0x2d58c3(0x17c)][_0x2d58c3(0x195)]({'where':{'wid':_0x26671a,'companyId':_0x3c7ba4}});try{const _0x28d592=await Message_1[_0x2d58c3(0x17c)][_0x2d58c3(0x186)]({'where':{'wid':_0x1645e6[0x0][_0x2d58c3(0x194)]},'include':[_0x2d58c3(0x185),{'model':Message_1[_0x2d58c3(0x17c)],'as':_0x2d58c3(0x191),'include':[_0x2d58c3(0x185)]}]});if(_0x28d592){const _0x2d8293=await CompaniesSettings_1[_0x2d58c3(0x17c)]['findOne']({'where':{'companyId':_0x3c7ba4}}),_0x65889b=await Ticket_1['default']['findOne']({'where':{'id':_0x28d592['ticketId'],'companyId':_0x3c7ba4}});_0x2d8293['lgpdDeleteMessage']===_0x2d58c3(0x18c)&&_0x2d8293[_0x2d58c3(0x177)]===_0x2d58c3(0x18c)?await _0x28d592[_0x2d58c3(0x181)]({'body':_0x2d58c3(0x179),'isDeleted':!![]}):await _0x28d592[_0x2d58c3(0x181)]({'isDeleted':!![]});await(0x0,UpdateTicketService_1[_0x2d58c3(0x17c)])({'ticketData':{'lastMessage':_0x2d58c3(0x179)},'ticketId':_0x65889b['id'],'companyId':_0x3c7ba4});const _0x5a828c=(0x0,socket_1[_0x2d58c3(0x175)])();_0x5a828c['to'](_0x28d592[_0x2d58c3(0x18d)][_0x2d58c3(0x18b)]())['emit']('appMessage-'+_0x28d592,{'action':_0x2d58c3(0x181),'message':_0x28d592});}}catch(_0x88157b){console[_0x2d58c3(0x184)](_0x2d58c3(0x176));}return _0x18ee0c;};};exports[a606_0x1934e9(0x17c)]=MarkDeleteWhatsAppMessage;function a606_0x2849(){const _0x39a333=['__importDefault','3405492Eratoh','9148mqaqjz','quotedMsg','../../libs/socket','109UplVtm','wid','findAll','getIO','Erro\x20ao\x20tentar\x20marcar\x20a\x20mensagem\x20com\x20excluÃ­da','enableLGPD','replace','ðŸš«\x20_Mensagem\x20Apagada_','../../models/CompaniesSettings','10108iezJwh','default','57MiJjQD','@s.whatsapp.net','../../models/Ticket','14GuVNOk','update','__esModule','1880875GHuHeS','log','contact','findOne','defineProperty','3116904AtRTlZ','1323492VsbGsa','5109880srcaTb','toString','enabled','ticketId'];a606_0x2849=function(){return _0x39a333;};return a606_0x2849();}