'use strict';function a543_0x3437(){const _0x4d138c=['update','contact','Erro\x20ao\x20tentar\x20marcar\x20a\x20mensagem\x20com\x20excluÃ­da','253wdzzgF','../../models/Message','30279DJfcvt','getIO','@s.whatsapp.net','emit','150424PidIhs','../TicketServices/UpdateTicketService','115815rSzFYP','ticketId','594hDgmDA','wid','168eaiJoF','defineProperty','../SettingServices/ListSettingsServiceOne','findOne','460064idXufk','enabled','enableLGPD','@c.us','default','replace','../../libs/socket','28AZTQOQ','__esModule','findAll','ðŸš«\x20_Mensagem\x20Apagada_','appMessage-','285590cTossX','4348630dyxKHL','quotedMsg','54792CcBNDM'];a543_0x3437=function(){return _0x4d138c;};return a543_0x3437();}const a543_0x2eecd3=a543_0x5aac;(function(_0x5c81b7,_0x59f967){const _0x14edf0=a543_0x5aac,_0x25fde3=_0x5c81b7();while(!![]){try{const _0x3d8f37=parseInt(_0x14edf0(0x1a3))/0x1+-parseInt(_0x14edf0(0x1aa))/0x2*(parseInt(_0x14edf0(0x195))/0x3)+-parseInt(_0x14edf0(0x199))/0x4+parseInt(_0x14edf0(0x1b0))/0x5+parseInt(_0x14edf0(0x19f))/0x6*(-parseInt(_0x14edf0(0x19b))/0x7)+parseInt(_0x14edf0(0x1b2))/0x8*(parseInt(_0x14edf0(0x19d))/0x9)+-parseInt(_0x14edf0(0x1af))/0xa*(parseInt(_0x14edf0(0x193))/0xb);if(_0x3d8f37===_0x59f967)break;else _0x25fde3['push'](_0x25fde3['shift']());}catch(_0x1c33e4){_0x25fde3['push'](_0x25fde3['shift']());}}}(a543_0x3437,0x75def));function a543_0x5aac(_0x504229,_0x1774d2){const _0x3437be=a543_0x3437();return a543_0x5aac=function(_0x5aacbc,_0x588ec9){_0x5aacbc=_0x5aacbc-0x191;let _0x5a3c80=_0x3437be[_0x5aacbc];return _0x5a3c80;},a543_0x5aac(_0x504229,_0x1774d2);}var __importDefault=this&&this['__importDefault']||function(_0x52566e){const _0x33d991=a543_0x5aac;return _0x52566e&&_0x52566e[_0x33d991(0x1ab)]?_0x52566e:{'default':_0x52566e};};Object[a543_0x2eecd3(0x1a0)](exports,a543_0x2eecd3(0x1ab),{'value':!![]});const Message_1=__importDefault(require(a543_0x2eecd3(0x194))),socket_1=require(a543_0x2eecd3(0x1a9)),ListSettingsServiceOne_1=__importDefault(require(a543_0x2eecd3(0x1a1))),Ticket_1=__importDefault(require('../../models/Ticket')),UpdateTicketService_1=__importDefault(require(a543_0x2eecd3(0x19a))),MarkDeleteWhatsAppMessage=async(_0x20f0f7,_0x784005,_0x37549b,_0x5c9098)=>{const _0x3b08e7=a543_0x2eecd3;_0x20f0f7=_0x20f0f7[_0x3b08e7(0x1a8)](_0x3b08e7(0x1a6),'')['replace'](_0x3b08e7(0x197),'');if(_0x37549b){const _0x524a6b=await Message_1[_0x3b08e7(0x1a7)][_0x3b08e7(0x1ac)]({'where':{'wid':_0x37549b,'companyId':_0x5c9098}});try{const _0x394fb4=await Message_1[_0x3b08e7(0x1a7)]['findOne']({'where':{'wid':_0x524a6b[0x0][_0x3b08e7(0x19e)]},'include':['contact',{'model':Message_1[_0x3b08e7(0x1a7)],'as':_0x3b08e7(0x1b1),'include':[_0x3b08e7(0x191)]}]});if(_0x394fb4){const _0x2d260c=await(0x0,ListSettingsServiceOne_1['default'])({'companyId':_0x5c9098,'key':_0x3b08e7(0x1a5)}),_0x13e934=await(0x0,ListSettingsServiceOne_1[_0x3b08e7(0x1a7)])({'companyId':_0x5c9098,'key':'lgpdDeleteMessage'}),_0x339268=await Ticket_1[_0x3b08e7(0x1a7)][_0x3b08e7(0x1a2)]({'where':{'id':_0x394fb4[_0x3b08e7(0x19c)],'companyId':_0x5c9098}});_0x13e934?.['value']===_0x3b08e7(0x1a4)&&_0x2d260c['value']===_0x3b08e7(0x1a4)?await _0x394fb4[_0x3b08e7(0x1b3)]({'body':_0x3b08e7(0x1ad),'isDeleted':!![]}):await _0x394fb4[_0x3b08e7(0x1b3)]({'isDeleted':!![]});await(0x0,UpdateTicketService_1['default'])({'ticketData':{'lastMessage':_0x3b08e7(0x1ad)},'ticketId':_0x339268['id'],'companyId':_0x5c9098});const _0x3e111a=(0x0,socket_1[_0x3b08e7(0x196)])();_0x3e111a['to'](_0x394fb4[_0x3b08e7(0x19c)]['toString']())[_0x3b08e7(0x198)](_0x3b08e7(0x1ae)+_0x394fb4,{'action':_0x3b08e7(0x1b3),'message':_0x394fb4});}}catch(_0x1c93b4){console['log'](_0x3b08e7(0x192));}return _0x784005;};};exports[a543_0x2eecd3(0x1a7)]=MarkDeleteWhatsAppMessage;