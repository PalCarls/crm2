'use strict';const a544_0x4e5944=a544_0x1e35;(function(_0xb27268,_0x27f310){const _0x3e0ebb=a544_0x1e35,_0x2249c7=_0xb27268();while(!![]){try{const _0x246ea3=parseInt(_0x3e0ebb(0x1dc))/0x1*(-parseInt(_0x3e0ebb(0x1ca))/0x2)+parseInt(_0x3e0ebb(0x1d2))/0x3*(-parseInt(_0x3e0ebb(0x1da))/0x4)+parseInt(_0x3e0ebb(0x1d0))/0x5+-parseInt(_0x3e0ebb(0x1c5))/0x6*(parseInt(_0x3e0ebb(0x1ce))/0x7)+parseInt(_0x3e0ebb(0x1be))/0x8*(-parseInt(_0x3e0ebb(0x1c8))/0x9)+parseInt(_0x3e0ebb(0x1bf))/0xa+parseInt(_0x3e0ebb(0x1db))/0xb*(parseInt(_0x3e0ebb(0x1de))/0xc);if(_0x246ea3===_0x27f310)break;else _0x2249c7['push'](_0x2249c7['shift']());}catch(_0x4c482e){_0x2249c7['push'](_0x2249c7['shift']());}}}(a544_0x33b7,0xc4f73));var __importDefault=this&&this[a544_0x4e5944(0x1d8)]||function(_0x10f517){const _0xbc7b87=a544_0x4e5944;return _0x10f517&&_0x10f517[_0xbc7b87(0x1c0)]?_0x10f517:{'default':_0x10f517};};Object[a544_0x4e5944(0x1c1)](exports,a544_0x4e5944(0x1c0),{'value':!![]}),exports['SendAckBYRemoteJid']=exports[a544_0x4e5944(0x1c6)]=void 0x0;const AppError_1=__importDefault(require(a544_0x4e5944(0x1d3))),GetTicketWbot_1=__importDefault(require(a544_0x4e5944(0x1c3))),Ticket_1=__importDefault(require(a544_0x4e5944(0x1cc))),Message_1=__importDefault(require('../../models/Message')),ShowTicketService_1=__importDefault(require(a544_0x4e5944(0x1df))),SendAckBYticketId=async({ticketId:_0x2f3ca2,companyId:_0x4c989a})=>{const _0x496c90=a544_0x4e5944,_0x143b37=await(0x0,ShowTicketService_1[_0x496c90(0x1cd)])(_0x2f3ca2,_0x4c989a);let _0x3adaaf=_0x143b37['unreadMessages'];if(_0x3adaaf>0x0){let _0x2949a6;try{_0x2949a6=await(0x0,GetTicketWbot_1[_0x496c90(0x1cd)])(_0x143b37);}catch(_0x37b8b8){console['log'](_0x496c90(0x1e0));}if(!_0x143b37)throw new AppError_1[(_0x496c90(0x1cd))]('ERR_NO_TICKET_FOUND',0x194);const _0x2a24e1=0x64,{count:_0x2d9908,rows:_0x57624c}=await Message_1[_0x496c90(0x1cd)]['findAndCountAll']({'limit':_0x2a24e1,'include':[_0x496c90(0x1d5),{'model':Message_1[_0x496c90(0x1cd)],'as':'quotedMsg','include':[_0x496c90(0x1d5)]},{'model':Ticket_1[_0x496c90(0x1cd)],'where':{'contactId':_0x143b37['contactId']},'required':!![]}],'order':[[_0x496c90(0x1cf),'DESC']]});_0x57624c['forEach'](async _0x38e8c0=>{const _0x2be6e5=_0x496c90;if(_0x2949a6){const _0x518984=_0x2949a6[_0x2be6e5(0x1d9)][_0x2be6e5(0x1c7)][_0x2be6e5(0x1c9)](_0x38e8c0[_0x2be6e5(0x1d6)]);_0x2949a6['readMessages']([_0x38e8c0]);let _0x239d54=_0x38e8c0['remoteJid'],_0x549fcf=_0x38e8c0[_0x2be6e5(0x1c4)];_0x549fcf[_0x2be6e5(0x1e2)]({'unreadMessages':0x0});_0x239d54&&_0x518984?.['unreadCount']>0x0&&(_0x2949a6['store'][_0x2be6e5(0x1c7)]['deleteById'](_0x239d54),_0x2949a6['sendPresenceUpdate'](_0x2be6e5(0x1d4)),setTimeout(()=>{const _0x5682f4=_0x2be6e5;_0x2949a6[_0x5682f4(0x1e1)](_0x5682f4(0x1d1));},0x1388));try{return!![];}catch(_0x55fea2){throw new AppError_1['default'](_0x2be6e5(0x1c2));}}});return;}};exports[a544_0x4e5944(0x1c6)]=SendAckBYticketId;function a544_0x1e35(_0x4ced12,_0xf06461){const _0x33b7ed=a544_0x33b7();return a544_0x1e35=function(_0x1e3504,_0x25d5d5){_0x1e3504=_0x1e3504-0x1be;let _0x8d17e4=_0x33b7ed[_0x1e3504];return _0x8d17e4;},a544_0x1e35(_0x4ced12,_0xf06461);}function a544_0x33b7(){const _0x32504a=['store','5348SIfSNA','11APrfVY','181NCMWmv','forEach','9651372jDtLbF','../TicketServices/ShowTicketService','nÃ£o\x20consegui\x20pegar\x20o\x20wbot','sendPresenceUpdate','update','22832wgiKdu','10972020UZDSrg','__esModule','defineProperty','ERR_SENDING_WAPP_MSG','../../helpers/GetTicketWbot','ticket','18MAVMXI','SendAckBYticketId','chats','927HWPJjj','get','10844CNgXsY','ticketId','../../models/Ticket','default','1301111vUUgvf','createdAt','5375875unVhcy','unavailable','756PeaqtE','../../errors/AppError','available','contact','remoteJid','SendAckBYRemoteJid','__importDefault'];a544_0x33b7=function(){return _0x32504a;};return a544_0x33b7();}const SendAckBYRemoteJid=async({remoteJid:_0x413518,companyId:_0x51472b})=>{const _0xa1a073=a544_0x4e5944,{rows:_0x456837}=await Message_1['default']['findAndCountAll']({'limit':0x1,'order':[[_0xa1a073(0x1cf),'DESC']],'where':{'remoteJid':_0x413518,'ack':0x0,'companyId':_0x51472b}});_0x456837[_0xa1a073(0x1dd)](async _0x4f6777=>{const _0x465d29=_0xa1a073;let _0x56e70c=_0x4f6777[_0x465d29(0x1cb)];});return;};exports[a544_0x4e5944(0x1d7)]=SendAckBYRemoteJid;