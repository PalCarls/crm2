'use strict';const a560_0x153991=a560_0x1f67;(function(_0x5e4a4f,_0x309ef4){const _0x5db104=a560_0x1f67,_0x5c6f4e=_0x5e4a4f();while(!![]){try{const _0x1e5bdb=-parseInt(_0x5db104(0x187))/0x1*(-parseInt(_0x5db104(0x177))/0x2)+-parseInt(_0x5db104(0x188))/0x3*(-parseInt(_0x5db104(0x16e))/0x4)+parseInt(_0x5db104(0x18f))/0x5*(parseInt(_0x5db104(0x173))/0x6)+-parseInt(_0x5db104(0x179))/0x7*(parseInt(_0x5db104(0x176))/0x8)+parseInt(_0x5db104(0x18b))/0x9+parseInt(_0x5db104(0x184))/0xa*(parseInt(_0x5db104(0x16d))/0xb)+-parseInt(_0x5db104(0x171))/0xc;if(_0x1e5bdb===_0x309ef4)break;else _0x5c6f4e['push'](_0x5c6f4e['shift']());}catch(_0x13870f){_0x5c6f4e['push'](_0x5c6f4e['shift']());}}}(a560_0x5a35,0x6ebc7));var __importDefault=this&&this[a560_0x153991(0x174)]||function(_0x4438c8){const _0x25c527=a560_0x153991;return _0x4438c8&&_0x4438c8[_0x25c527(0x168)]?_0x4438c8:{'default':_0x4438c8};};function a560_0x1f67(_0x62896f,_0x4cad44){const _0x5a350a=a560_0x5a35();return a560_0x1f67=function(_0x1f676c,_0x5a8712){_0x1f676c=_0x1f676c-0x168;let _0x52710d=_0x5a350a[_0x1f676c];return _0x52710d;},a560_0x1f67(_0x62896f,_0x4cad44);}Object[a560_0x153991(0x18a)](exports,a560_0x153991(0x168),{'value':!![]}),exports[a560_0x153991(0x172)]=exports['SendAckBYticketId']=void 0x0;const AppError_1=__importDefault(require(a560_0x153991(0x185))),GetTicketWbot_1=__importDefault(require(a560_0x153991(0x16b))),Ticket_1=__importDefault(require('../../models/Ticket')),Message_1=__importDefault(require('../../models/Message')),ShowTicketService_1=__importDefault(require(a560_0x153991(0x16f))),SendAckBYticketId=async({ticketId:_0x349774,companyId:_0xd46dfe})=>{const _0x1524bf=a560_0x153991,_0x3a1453=await(0x0,ShowTicketService_1[_0x1524bf(0x18e)])(_0x349774,_0xd46dfe);let _0x394c9b=_0x3a1453[_0x1524bf(0x170)];if(_0x394c9b>0x0){let _0x5a646f;try{_0x5a646f=await(0x0,GetTicketWbot_1['default'])(_0x3a1453);}catch(_0x4db6ba){console['log'](_0x1524bf(0x18d));}if(!_0x3a1453)throw new AppError_1[(_0x1524bf(0x18e))](_0x1524bf(0x17a),0x194);const _0x304e28=0x64,{count:_0x4bda79,rows:_0x4394da}=await Message_1[_0x1524bf(0x18e)][_0x1524bf(0x182)]({'limit':_0x304e28,'include':[_0x1524bf(0x169),{'model':Message_1[_0x1524bf(0x18e)],'as':_0x1524bf(0x189),'include':[_0x1524bf(0x169)]},{'model':Ticket_1['default'],'where':{'contactId':_0x3a1453['contactId']},'required':!![]}],'order':[[_0x1524bf(0x17c),_0x1524bf(0x16a)]]});_0x4394da[_0x1524bf(0x186)](async _0x43ea6f=>{const _0x4ba31d=_0x1524bf;if(_0x5a646f){const _0x2ac420=_0x5a646f[_0x4ba31d(0x17d)]['chats']['get'](_0x43ea6f[_0x4ba31d(0x18c)]);_0x5a646f['readMessages']([_0x43ea6f]);let _0x203937=_0x43ea6f[_0x4ba31d(0x18c)],_0x562653=_0x43ea6f['ticket'];_0x562653[_0x4ba31d(0x17b)]({'unreadMessages':0x0});_0x203937&&_0x2ac420?.[_0x4ba31d(0x16c)]>0x0&&(_0x5a646f['store'][_0x4ba31d(0x175)][_0x4ba31d(0x17f)](_0x203937),_0x5a646f[_0x4ba31d(0x183)](_0x4ba31d(0x180)),setTimeout(()=>{const _0x4663d9=_0x4ba31d;_0x5a646f[_0x4663d9(0x183)](_0x4663d9(0x178));},0x1388));try{return!![];}catch(_0x38cf66){throw new AppError_1['default'](_0x4ba31d(0x17e));}}});return;}};exports[a560_0x153991(0x181)]=SendAckBYticketId;const SendAckBYRemoteJid=async({remoteJid:_0x1b13dc,companyId:_0x36be7b})=>{const _0x7ba7e5=a560_0x153991,{rows:_0x5c41ab}=await Message_1[_0x7ba7e5(0x18e)][_0x7ba7e5(0x182)]({'limit':0x1,'order':[[_0x7ba7e5(0x17c),_0x7ba7e5(0x16a)]],'where':{'remoteJid':_0x1b13dc,'ack':0x0,'companyId':_0x36be7b}});_0x5c41ab[_0x7ba7e5(0x186)](async _0x291e7f=>{let _0x13cdb3=_0x291e7f['ticketId'];});return;};function a560_0x5a35(){const _0x513a4d=['unreadCount','11TpxOvt','3213020egeGJx','../TicketServices/ShowTicketService','unreadMessages','14598144gOKFKy','SendAckBYRemoteJid','1437114YUVeWp','__importDefault','chats','40JWIHqN','8qVuTcA','unavailable','740180zLutqN','ERR_NO_TICKET_FOUND','update','createdAt','store','ERR_SENDING_WAPP_MSG','deleteById','available','SendAckBYticketId','findAndCountAll','sendPresenceUpdate','712430SvNpLe','../../errors/AppError','forEach','27259UQhAwT','3XTXNTr','quotedMsg','defineProperty','6625935zdqzGk','remoteJid','n√£o\x20consegui\x20pegar\x20o\x20wbot','default','10GKNqbu','__esModule','contact','DESC','../../helpers/GetTicketWbot'];a560_0x5a35=function(){return _0x513a4d;};return a560_0x5a35();}exports[a560_0x153991(0x172)]=SendAckBYRemoteJid;