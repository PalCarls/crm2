'use strict';const a543_0x2bc905=a543_0x5960;(function(_0x54fefd,_0x3691c9){const _0x1c6c4b=a543_0x5960,_0x81cef1=_0x54fefd();while(!![]){try{const _0x4315bc=parseInt(_0x1c6c4b(0x141))/0x1+parseInt(_0x1c6c4b(0x147))/0x2*(-parseInt(_0x1c6c4b(0x157))/0x3)+-parseInt(_0x1c6c4b(0x156))/0x4+parseInt(_0x1c6c4b(0x13e))/0x5+parseInt(_0x1c6c4b(0x155))/0x6+parseInt(_0x1c6c4b(0x150))/0x7+parseInt(_0x1c6c4b(0x15a))/0x8*(-parseInt(_0x1c6c4b(0x15b))/0x9);if(_0x4315bc===_0x3691c9)break;else _0x81cef1['push'](_0x81cef1['shift']());}catch(_0x11515f){_0x81cef1['push'](_0x81cef1['shift']());}}}(a543_0x4083,0x2e21c));var __importDefault=this&&this[a543_0x2bc905(0x144)]||function(_0x181dac){const _0x1aa8fb=a543_0x2bc905;return _0x181dac&&_0x181dac[_0x1aa8fb(0x15d)]?_0x181dac:{'default':_0x181dac};};Object[a543_0x2bc905(0x15c)](exports,a543_0x2bc905(0x15d),{'value':!![]}),exports[a543_0x2bc905(0x143)]=exports[a543_0x2bc905(0x152)]=void 0x0;const AppError_1=__importDefault(require(a543_0x2bc905(0x14b))),GetTicketWbot_1=__importDefault(require(a543_0x2bc905(0x13f))),Ticket_1=__importDefault(require(a543_0x2bc905(0x151))),Message_1=__importDefault(require(a543_0x2bc905(0x14c))),ShowTicketService_1=__importDefault(require(a543_0x2bc905(0x14f))),SendAckBYticketId=async({ticketId:_0x547ca3,companyId:_0x50eafd})=>{const _0x391bca=a543_0x2bc905,_0x29b860=await(0x0,ShowTicketService_1['default'])(_0x547ca3,_0x50eafd);let _0x2fc60d=_0x29b860[_0x391bca(0x154)];if(_0x2fc60d>0x0){let _0x1c58a7;try{_0x1c58a7=await(0x0,GetTicketWbot_1[_0x391bca(0x14a)])(_0x29b860);}catch(_0x2dfc36){console['log']('nÃ£o\x20consegui\x20pegar\x20o\x20wbot');}if(!_0x29b860)throw new AppError_1[(_0x391bca(0x14a))]('ERR_NO_TICKET_FOUND',0x194);const _0x58bb45=0x64,{count:_0x56d520,rows:_0x471be8}=await Message_1['default'][_0x391bca(0x15e)]({'limit':_0x58bb45,'include':[_0x391bca(0x140),{'model':Message_1['default'],'as':'quotedMsg','include':['contact']},{'model':Ticket_1[_0x391bca(0x14a)],'where':{'contactId':_0x29b860[_0x391bca(0x13c)]},'required':!![]}],'order':[[_0x391bca(0x149),_0x391bca(0x153)]]});_0x471be8[_0x391bca(0x14e)](async _0x3f3aae=>{const _0x1df5c3=_0x391bca;if(_0x1c58a7){const _0x577784=_0x1c58a7['store'][_0x1df5c3(0x14d)]['get'](_0x3f3aae[_0x1df5c3(0x159)]);_0x1c58a7['readMessages']([_0x3f3aae]);let _0x57661c=_0x3f3aae[_0x1df5c3(0x159)],_0x41f3f1=_0x3f3aae[_0x1df5c3(0x142)];_0x41f3f1['update']({'unreadMessages':0x0});_0x57661c&&_0x577784?.[_0x1df5c3(0x13d)]>0x0&&(_0x1c58a7[_0x1df5c3(0x158)][_0x1df5c3(0x14d)]['deleteById'](_0x57661c),_0x1c58a7[_0x1df5c3(0x145)]('available'),setTimeout(()=>{_0x1c58a7['sendPresenceUpdate']('unavailable');},0x1388));try{return!![];}catch(_0x2c95fa){throw new AppError_1['default'](_0x1df5c3(0x146));}}});return;}};function a543_0x5960(_0x3a9592,_0x394ce4){const _0x408356=a543_0x4083();return a543_0x5960=function(_0x59605f,_0x3dbe43){_0x59605f=_0x59605f-0x13c;let _0x2ba06c=_0x408356[_0x59605f];return _0x2ba06c;},a543_0x5960(_0x3a9592,_0x394ce4);}exports[a543_0x2bc905(0x152)]=SendAckBYticketId;const SendAckBYRemoteJid=async({remoteJid:_0xb047a,companyId:_0x227632})=>{const _0x41311d=a543_0x2bc905,{rows:_0x274273}=await Message_1['default'][_0x41311d(0x15e)]({'limit':0x1,'order':[[_0x41311d(0x149),'DESC']],'where':{'remoteJid':_0xb047a,'ack':0x0,'companyId':_0x227632}});_0x274273[_0x41311d(0x14e)](async _0x1c8a59=>{const _0x352d93=_0x41311d;let _0x34b7dd=_0x1c8a59[_0x352d93(0x148)];});return;};exports['SendAckBYRemoteJid']=SendAckBYRemoteJid;function a543_0x4083(){const _0x8d6080=['../../errors/AppError','../../models/Message','chats','forEach','../TicketServices/ShowTicketService','755027yluyZm','../../models/Ticket','SendAckBYticketId','DESC','unreadMessages','18306rHFoKH','664088nBHDms','63RMJYdT','store','remoteJid','5160Ddgzbk','522zZPqmF','defineProperty','__esModule','findAndCountAll','contactId','unreadCount','1349685NVHUhm','../../helpers/GetTicketWbot','contact','98815dSyQLR','ticket','SendAckBYRemoteJid','__importDefault','sendPresenceUpdate','ERR_SENDING_WAPP_MSG','8312sGulOb','ticketId','createdAt','default'];a543_0x4083=function(){return _0x8d6080;};return a543_0x4083();}