<<<<<<< HEAD
'use strict';const a608_0x5949f6=a608_0x5c1c;(function(_0x5b08d5,_0x2b8820){const _0x204694=a608_0x5c1c,_0x50476b=_0x5b08d5();while(!![]){try{const _0xd45a9c=parseInt(_0x204694(0x92))/0x1*(parseInt(_0x204694(0xc7))/0x2)+-parseInt(_0x204694(0xad))/0x3+parseInt(_0x204694(0x8c))/0x4+parseInt(_0x204694(0xb0))/0x5*(-parseInt(_0x204694(0xa0))/0x6)+parseInt(_0x204694(0xa1))/0x7*(-parseInt(_0x204694(0xc9))/0x8)+parseInt(_0x204694(0x8d))/0x9+-parseInt(_0x204694(0x8b))/0xa*(-parseInt(_0x204694(0xbe))/0xb);if(_0xd45a9c===_0x2b8820)break;else _0x50476b['push'](_0x50476b['shift']());}catch(_0x4421df){_0x50476b['push'](_0x50476b['shift']());}}}(a608_0xbdc5,0xea926));function a608_0xbdc5(){const _0x195474=['PVT','contactId','373542JaZtBF','238yFjYTX','__setModuleDefault','unlinkSync','../../models/Contact','child_process','getWbot','__importDefault','defineProperty','companyId','sendMessage','\x20-vn\x20-ar\x2044100\x20-ac\x202\x20-b:a\x20192k\x20','getMessageOptions','5090625gofpeC','exec','ðŸ“‚\x20Documento','25NkJKrx','captureException','audio/mp4','split','ðŸŽ¥\x20Arquivo\x20de\x20vÃ­deo','toString','__esModule','\x20-i\x20','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-f\x20ipod\x20','__createBinding','text','application','readFileSync','whatsappId','275EbvtIm','ERR_SENDING_WAPP_MSG','audio','resolve','public','../MessageServices/CreateMessageService','isGroup','.mp3','includes','62moSpXM','Invalid\x20mimetype','369640tNFrkc','../../errors/AppError','document','hasOwnProperty','../../helpers/Mustache','findByPk','filename','replace','default','log','/company','video','ðŸ“Ž\x20Outros\x20anexos','substring','@ffmpeg-installer/ffmpeg','\x20-y','1353310GTKMVW','2415452aagJMX','3288069iHFaSP','originalname','getTime','configurable','ðŸŽµ\x20Arquivo\x20de\x20Ã¡udio','6047cjbmIp','create','path','__importStar','s.whatsapp.net','prototype','get','number','mimetype','@sentry/node','remoteJid','writable'];a608_0xbdc5=function(){return _0x195474;};return a608_0xbdc5();}var __createBinding=this&&this[a608_0x5949f6(0xb9)]||(Object[a608_0x5949f6(0x93)]?function(_0x2837a5,_0x40f0d2,_0x548943,_0x5355ca){const _0x222622=a608_0x5949f6;if(_0x5355ca===undefined)_0x5355ca=_0x548943;var _0x4adddb=Object['getOwnPropertyDescriptor'](_0x40f0d2,_0x548943);(!_0x4adddb||(_0x222622(0x98)in _0x4adddb?!_0x40f0d2[_0x222622(0xb6)]:_0x4adddb[_0x222622(0x9d)]||_0x4adddb[_0x222622(0x90)]))&&(_0x4adddb={'enumerable':!![],'get':function(){return _0x40f0d2[_0x548943];}}),Object[_0x222622(0xa8)](_0x2837a5,_0x5355ca,_0x4adddb);}:function(_0xb93520,_0x29385f,_0x1efedc,_0xd34152){if(_0xd34152===undefined)_0xd34152=_0x1efedc;_0xb93520[_0xd34152]=_0x29385f[_0x1efedc];}),__setModuleDefault=this&&this[a608_0x5949f6(0xa2)]||(Object[a608_0x5949f6(0x93)]?function(_0x2a3483,_0x37cbac){const _0x58df70=a608_0x5949f6;Object[_0x58df70(0xa8)](_0x2a3483,'default',{'enumerable':!![],'value':_0x37cbac});}:function(_0x3ee511,_0x4e05f5){_0x3ee511['default']=_0x4e05f5;}),__importStar=this&&this[a608_0x5949f6(0x95)]||function(_0x5e109f){const _0x34a046=a608_0x5949f6;if(_0x5e109f&&_0x5e109f[_0x34a046(0xb6)])return _0x5e109f;var _0x55d8b3={};if(_0x5e109f!=null){for(var _0x4ff79c in _0x5e109f)if(_0x4ff79c!=='default'&&Object[_0x34a046(0x97)][_0x34a046(0xcc)]['call'](_0x5e109f,_0x4ff79c))__createBinding(_0x55d8b3,_0x5e109f,_0x4ff79c);}return __setModuleDefault(_0x55d8b3,_0x5e109f),_0x55d8b3;},__importDefault=this&&this[a608_0x5949f6(0xa7)]||function(_0xdbb975){return _0xdbb975&&_0xdbb975['__esModule']?_0xdbb975:{'default':_0xdbb975};};function a608_0x5c1c(_0x143d88,_0x4b2534){const _0xbdc5c9=a608_0xbdc5();return a608_0x5c1c=function(_0x5c1c27,_0x55071e){_0x5c1c27=_0x5c1c27-0x87;let _0x553cdc=_0xbdc5c9[_0x5c1c27];return _0x553cdc;},a608_0x5c1c(_0x143d88,_0x4b2534);}Object[a608_0x5949f6(0xa8)](exports,a608_0x5949f6(0xb6),{'value':!![]}),exports['getMessageOptions']=void 0x0;const Sentry=__importStar(require(a608_0x5949f6(0x9b))),fs_1=__importStar(require('fs')),child_process_1=require(a608_0x5949f6(0xa5)),path_1=__importDefault(require('path')),ffmpeg_1=__importDefault(require(a608_0x5949f6(0x89))),AppError_1=__importDefault(require(a608_0x5949f6(0xca))),mime_types_1=__importDefault(require('mime-types')),Contact_1=__importDefault(require(a608_0x5949f6(0xa4))),wbot_1=require('../../libs/wbot'),CreateMessageService_1=__importDefault(require(a608_0x5949f6(0xc3))),Mustache_1=__importDefault(require(a608_0x5949f6(0xcd))),publicFolder=path_1[a608_0x5949f6(0xd1)][a608_0x5949f6(0xc1)](__dirname,'..','..','..',a608_0x5949f6(0xc2)),processAudio=async(_0x591f80,_0x3aa826)=>{const _0x485f91=a608_0x5949f6,_0xddc17f=publicFolder+_0x485f91(0xd3)+_0x3aa826+'/'+new Date()[_0x485f91(0x8f)]()+_0x485f91(0xc5);return new Promise((_0x1117ad,_0x21ff5c)=>{const _0x14383c=_0x485f91;(0x0,child_process_1[_0x14383c(0xae)])(ffmpeg_1[_0x14383c(0xd1)]['path']+_0x14383c(0xb7)+_0x591f80+_0x14383c(0xb8)+_0xddc17f+_0x14383c(0x8a),(_0x29713e,_0x2e1527,_0x8297f3)=>{if(_0x29713e)_0x21ff5c(_0x29713e);_0x1117ad(_0xddc17f);});});},processAudioFile=async(_0x521508,_0x4ea88b)=>{const _0x344a5d=a608_0x5949f6,_0x3bfbc4=publicFolder+_0x344a5d(0xd3)+_0x4ea88b+'/'+new Date()[_0x344a5d(0x8f)]()+_0x344a5d(0xc5);return new Promise((_0x46850c,_0x24f8fc)=>{const _0x3d4803=_0x344a5d;(0x0,child_process_1[_0x3d4803(0xae)])(ffmpeg_1[_0x3d4803(0xd1)]['path']+'\x20-i\x20'+_0x521508+_0x3d4803(0xab)+_0x3bfbc4,(_0x7eafc4,_0x31c105,_0x2a9b3a)=>{if(_0x7eafc4)_0x24f8fc(_0x7eafc4);_0x46850c(_0x3bfbc4);});});},getMessageOptions=async(_0x221bbd,_0x2843b8,_0x1c62cf,_0x154bb0)=>{const _0x2b078a=a608_0x5949f6,_0xadb9c3=mime_types_1['default']['lookup'](_0x2843b8),_0x9df5a7=_0xadb9c3['split']('/')[0x0];try{if(!_0xadb9c3)throw new Error(_0x2b078a(0xc8));let _0x38d535;if(_0x9df5a7===_0x2b078a(0xd4))_0x38d535={'video':fs_1[_0x2b078a(0xd1)]['readFileSync'](_0x2843b8),'caption':_0x154bb0?_0x154bb0:null,'fileName':_0x221bbd};else{if(_0x9df5a7===_0x2b078a(0xc0)){const _0x317f31=!![],_0x560fd4=await processAudio(_0x2843b8,_0x1c62cf);_0x317f31?_0x38d535={'audio':fs_1[_0x2b078a(0xd1)][_0x2b078a(0xbc)](_0x560fd4),'mimetype':'audio/mp4','ptt':!![]}:_0x38d535={'audio':fs_1[_0x2b078a(0xd1)][_0x2b078a(0xbc)](_0x560fd4),'mimetype':_0x317f31?_0x2b078a(0xb2):_0xadb9c3,'ptt':!![]};}else{if(_0x9df5a7===_0x2b078a(0xcb))_0x38d535={'document':fs_1[_0x2b078a(0xd1)][_0x2b078a(0xbc)](_0x2843b8),'caption':_0x154bb0?_0x154bb0:null,'fileName':_0x221bbd,'mimetype':_0xadb9c3};else _0x9df5a7===_0x2b078a(0xbb)?_0x38d535={'document':fs_1['default']['readFileSync'](_0x2843b8),'caption':_0x154bb0?_0x154bb0:null,'fileName':_0x221bbd,'mimetype':_0xadb9c3}:_0x38d535={'image':fs_1[_0x2b078a(0xd1)][_0x2b078a(0xbc)](_0x2843b8),'caption':_0x154bb0?_0x154bb0:_0x221bbd};}}return _0x38d535;}catch(_0x3a4ca5){return Sentry[_0x2b078a(0xb1)](_0x3a4ca5),console[_0x2b078a(0xd2)](_0x3a4ca5),null;}};exports[a608_0x5949f6(0xac)]=getMessageOptions;const SendWhatsAppMedia=async({media:_0x211a1b,ticket:_0x802609,body:_0x12142c,isPrivate:_0x4dcdcc,isForwarded:isForwarded=![]})=>{const _0x5576d4=a608_0x5949f6;try{const _0x3a1f6c=await(0x0,wbot_1[_0x5576d4(0xa6)])(_0x802609[_0x5576d4(0xbd)]),_0x433b18=_0x802609[_0x5576d4(0xa9)][_0x5576d4(0xb5)](),_0xaddb81=_0x211a1b[_0x5576d4(0x94)],_0x13bd37=_0x211a1b[_0x5576d4(0x9a)][_0x5576d4(0xb3)]('/')[0x0];let _0x20ebf5,_0x5100a8='';const _0xd1626c=_0x802609?(0x0,Mustache_1[_0x5576d4(0xd1)])(_0x12142c,_0x802609):_0x12142c;if(_0x13bd37==='video')_0x20ebf5={'video':fs_1[_0x5576d4(0xd1)][_0x5576d4(0xbc)](_0xaddb81),'caption':_0xd1626c,'fileName':_0x211a1b[_0x5576d4(0x8e)][_0x5576d4(0xd0)]('/','-'),'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},_0x5100a8=_0x5576d4(0xb4);else{if(_0x13bd37===_0x5576d4(0xc0)){const _0x1c6b1b=!![];if(_0x1c6b1b){const _0x3c2338=await processAudio(_0x211a1b[_0x5576d4(0x94)],_0x433b18);_0x20ebf5={'audio':fs_1[_0x5576d4(0xd1)][_0x5576d4(0xbc)](_0x3c2338),'mimetype':_0x1c6b1b?'audio/mp4':_0x211a1b['mimetype'],'ptt':!![],'caption':_0xd1626c,'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},(0x0,fs_1[_0x5576d4(0xa3)])(_0x3c2338);}else{const _0x160f8c=await processAudio(_0x211a1b[_0x5576d4(0x94)],_0x433b18);_0x20ebf5={'audio':fs_1[_0x5576d4(0xd1)]['readFileSync'](_0x160f8c),'mimetype':_0x5576d4(0xb2),'ptt':!![],'caption':_0xd1626c,'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},(0x0,fs_1[_0x5576d4(0xa3)])(_0x160f8c);}_0x5100a8=_0x5576d4(0x91);}else{if(_0x13bd37==='document'||_0x13bd37===_0x5576d4(0xba))_0x20ebf5={'document':fs_1[_0x5576d4(0xd1)][_0x5576d4(0xbc)](_0xaddb81),'caption':_0xd1626c,'fileName':_0x211a1b[_0x5576d4(0x8e)][_0x5576d4(0xd0)]('/','-'),'mimetype':_0x211a1b['mimetype'],'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},_0x5100a8=_0x5576d4(0xaf);else _0x13bd37===_0x5576d4(0xbb)?(_0x20ebf5={'document':fs_1['default'][_0x5576d4(0xbc)](_0xaddb81),'caption':_0xd1626c,'fileName':_0x211a1b['originalname'][_0x5576d4(0xd0)]('/','-'),'mimetype':_0x211a1b[_0x5576d4(0x9a)],'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},_0x5100a8=_0x5576d4(0x87)):(_0x20ebf5={'image':fs_1[_0x5576d4(0xd1)]['readFileSync'](_0xaddb81),'caption':_0xd1626c,'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},_0x5100a8=_0x5576d4(0x87));}}if(_0x4dcdcc){const _0x3aa020={'wid':_0x5576d4(0x9e)+_0x433b18+_0x802609['id']+_0x12142c[_0x5576d4(0x88)](0x0,0x6),'ticketId':_0x802609['id'],'contactId':undefined,'body':_0xd1626c,'fromMe':!![],'mediaUrl':_0x211a1b[_0x5576d4(0xcf)],'mediaType':_0x211a1b[_0x5576d4(0x9a)]['split']('/')[0x0],'read':!![],'quotedMsgId':null,'ack':0x2,'remoteJid':null,'participant':null,'dataJson':null,'ticketTrakingId':null,'isPrivate':_0x4dcdcc};await(0x0,CreateMessageService_1[_0x5576d4(0xd1)])({'messageData':_0x3aa020,'companyId':_0x802609[_0x5576d4(0xa9)]});return;}const _0x21b783=await Contact_1['default'][_0x5576d4(0xce)](_0x802609[_0x5576d4(0x9f)]);let _0x233854;_0x21b783[_0x5576d4(0x9c)]&&_0x21b783[_0x5576d4(0x9c)]!==''&&_0x21b783[_0x5576d4(0x9c)][_0x5576d4(0xc6)]('@')?_0x233854=_0x21b783['remoteJid']:_0x233854=_0x21b783[_0x5576d4(0x99)]+'@'+(_0x802609[_0x5576d4(0xc4)]?'g.us':_0x5576d4(0x96));const _0x569a5f=await _0x3a1f6c[_0x5576d4(0xaa)](_0x233854,{..._0x20ebf5});return await _0x802609['update']({'lastMessage':_0x12142c!==_0x211a1b[_0x5576d4(0xcf)]?_0x12142c:_0xd1626c,'imported':null}),_0x569a5f;}catch(_0x3a877c){Sentry[_0x5576d4(0xb1)](_0x3a877c),console[_0x5576d4(0xd2)](_0x3a877c);throw new AppError_1[(_0x5576d4(0xd1))](_0x5576d4(0xbf));}};exports[a608_0x5949f6(0xd1)]=SendWhatsAppMedia;
=======
'use strict';const a607_0x56727b=a607_0x2983;(function(_0x7d9524,_0x57c5be){const _0x48ed5e=a607_0x2983,_0x4ff14e=_0x7d9524();while(!![]){try{const _0x539ce3=parseInt(_0x48ed5e(0x177))/0x1*(-parseInt(_0x48ed5e(0x188))/0x2)+parseInt(_0x48ed5e(0x17a))/0x3+parseInt(_0x48ed5e(0x17f))/0x4*(parseInt(_0x48ed5e(0x197))/0x5)+parseInt(_0x48ed5e(0x191))/0x6+parseInt(_0x48ed5e(0x189))/0x7*(parseInt(_0x48ed5e(0x17c))/0x8)+parseInt(_0x48ed5e(0x1a5))/0x9*(parseInt(_0x48ed5e(0x190))/0xa)+-parseInt(_0x48ed5e(0x19b))/0xb*(parseInt(_0x48ed5e(0x199))/0xc);if(_0x539ce3===_0x57c5be)break;else _0x4ff14e['push'](_0x4ff14e['shift']());}catch(_0x73096d){_0x4ff14e['push'](_0x4ff14e['shift']());}}}(a607_0x26c0,0x6248e));var __createBinding=this&&this[a607_0x56727b(0x18a)]||(Object[a607_0x56727b(0x1a6)]?function(_0x346a72,_0x2ce2a8,_0x364c67,_0x476496){const _0x35df83=a607_0x56727b;if(_0x476496===undefined)_0x476496=_0x364c67;var _0x2a823a=Object[_0x35df83(0x183)](_0x2ce2a8,_0x364c67);(!_0x2a823a||(_0x35df83(0x17d)in _0x2a823a?!_0x2ce2a8[_0x35df83(0x185)]:_0x2a823a[_0x35df83(0x19d)]||_0x2a823a['configurable']))&&(_0x2a823a={'enumerable':!![],'get':function(){return _0x2ce2a8[_0x364c67];}}),Object[_0x35df83(0x173)](_0x346a72,_0x476496,_0x2a823a);}:function(_0x46e147,_0x2e0448,_0x50a0e7,_0x3be42e){if(_0x3be42e===undefined)_0x3be42e=_0x50a0e7;_0x46e147[_0x3be42e]=_0x2e0448[_0x50a0e7];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a607_0x56727b(0x1a6)]?function(_0x1e8bdc,_0x4607dc){const _0x59e97=a607_0x56727b;Object[_0x59e97(0x173)](_0x1e8bdc,_0x59e97(0x172),{'enumerable':!![],'value':_0x4607dc});}:function(_0x35256e,_0x462e4c){const _0x5810b4=a607_0x56727b;_0x35256e[_0x5810b4(0x172)]=_0x462e4c;}),__importStar=this&&this['__importStar']||function(_0x570526){const _0x13000b=a607_0x56727b;if(_0x570526&&_0x570526[_0x13000b(0x185)])return _0x570526;var _0x15c1e9={};if(_0x570526!=null){for(var _0x3b18c8 in _0x570526)if(_0x3b18c8!==_0x13000b(0x172)&&Object['prototype'][_0x13000b(0x161)][_0x13000b(0x15e)](_0x570526,_0x3b18c8))__createBinding(_0x15c1e9,_0x570526,_0x3b18c8);}return __setModuleDefault(_0x15c1e9,_0x570526),_0x15c1e9;},__importDefault=this&&this[a607_0x56727b(0x178)]||function(_0x500585){return _0x500585&&_0x500585['__esModule']?_0x500585:{'default':_0x500585};};function a607_0x26c0(){const _0x5bb385=['log','writable','ðŸŽ¥\x20Arquivo\x20de\x20vÃ­deo','g.us','getWbot','companyId','ðŸ“‚\x20Documento','audio','.mp3','4621509dIABGK','create','video','substring','whatsappId','mimetype','call','document','../MessageServices/CreateMessageService','hasOwnProperty','filename','number','mime-types','originalname','path','\x20-y','split','child_process','application','getTime','\x20-i\x20','@ffmpeg-installer/ffmpeg','isGroup','includes','public','/company','default','defineProperty','ERR_SENDING_WAPP_MSG','exec','../../libs/wbot','46zcIcUf','__importDefault','unlinkSync','1626981dOGVJj','toString','176oNZOAv','get','audio/mp4','20aUPZmW','../../helpers/Mustache','readFileSync','contactId','getOwnPropertyDescriptor','\x20-vn\x20-ar\x2044100\x20-ac\x202\x20-b:a\x20192k\x20','__esModule','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-f\x20ipod\x20','@sentry/node','12004QNyykd','160853tbiqZa','__createBinding','remoteJid','captureException','../../errors/AppError','resolve','PVT','10DsFoGV','1418724QLdlvP','getMessageOptions','findByPk','replace','sendMessage','text','129235pFiuvl','../../models/Contact','2364RUvgcn','ðŸ“Ž\x20Outros\x20anexos','69707FnFfwU'];a607_0x26c0=function(){return _0x5bb385;};return a607_0x26c0();}Object[a607_0x56727b(0x173)](exports,a607_0x56727b(0x185),{'value':!![]}),exports[a607_0x56727b(0x192)]=void 0x0;function a607_0x2983(_0x427287,_0x58a52a){const _0x26c046=a607_0x26c0();return a607_0x2983=function(_0x298335,_0x27e9f1){_0x298335=_0x298335-0x15e;let _0x22f859=_0x26c046[_0x298335];return _0x22f859;},a607_0x2983(_0x427287,_0x58a52a);}const Sentry=__importStar(require(a607_0x56727b(0x187))),fs_1=__importStar(require('fs')),child_process_1=require(a607_0x56727b(0x169)),path_1=__importDefault(require(a607_0x56727b(0x166))),ffmpeg_1=__importDefault(require(a607_0x56727b(0x16d))),AppError_1=__importDefault(require(a607_0x56727b(0x18d))),mime_types_1=__importDefault(require(a607_0x56727b(0x164))),Contact_1=__importDefault(require(a607_0x56727b(0x198))),wbot_1=require(a607_0x56727b(0x176)),CreateMessageService_1=__importDefault(require(a607_0x56727b(0x160))),Mustache_1=__importDefault(require(a607_0x56727b(0x180))),publicFolder=path_1[a607_0x56727b(0x172)][a607_0x56727b(0x18e)](__dirname,'..','..','..',a607_0x56727b(0x170)),processAudio=async(_0x5a5727,_0x17e0bf)=>{const _0x13a32c=a607_0x56727b,_0x19d912=publicFolder+_0x13a32c(0x171)+_0x17e0bf+'/'+new Date()[_0x13a32c(0x16b)]()+_0x13a32c(0x1a4);return new Promise((_0x350b4d,_0xe01f7b)=>{const _0x5bb020=_0x13a32c;(0x0,child_process_1[_0x5bb020(0x175)])(ffmpeg_1[_0x5bb020(0x172)][_0x5bb020(0x166)]+_0x5bb020(0x16c)+_0x5a5727+_0x5bb020(0x186)+_0x19d912+_0x5bb020(0x167),(_0x4aa2cf,_0x3ed51f,_0x383651)=>{if(_0x4aa2cf)_0xe01f7b(_0x4aa2cf);_0x350b4d(_0x19d912);});});},processAudioFile=async(_0x18c088,_0xcaa128)=>{const _0x334bc4=a607_0x56727b,_0x1e6739=publicFolder+'/company'+_0xcaa128+'/'+new Date()[_0x334bc4(0x16b)]()+'.mp3';return new Promise((_0x1c5a1b,_0x1bedee)=>{const _0x4f3cad=_0x334bc4;(0x0,child_process_1['exec'])(ffmpeg_1[_0x4f3cad(0x172)]['path']+_0x4f3cad(0x16c)+_0x18c088+_0x4f3cad(0x184)+_0x1e6739,(_0x55634,_0x2212f4,_0x431af4)=>{if(_0x55634)_0x1bedee(_0x55634);_0x1c5a1b(_0x1e6739);});});},getMessageOptions=async(_0x99b78d,_0x147c59,_0x5a2b86,_0x497376)=>{const _0xf300ae=a607_0x56727b,_0x46a4a3=mime_types_1[_0xf300ae(0x172)]['lookup'](_0x147c59),_0x2cb121=_0x46a4a3['split']('/')[0x0];try{if(!_0x46a4a3)throw new Error('Invalid\x20mimetype');let _0x76a51;if(_0x2cb121===_0xf300ae(0x1a7))_0x76a51={'video':fs_1[_0xf300ae(0x172)][_0xf300ae(0x181)](_0x147c59),'caption':_0x497376?_0x497376:null,'fileName':_0x99b78d};else{if(_0x2cb121===_0xf300ae(0x1a3)){const _0x5752c7=!![],_0x5c46c6=await processAudio(_0x147c59,_0x5a2b86);_0x5752c7?_0x76a51={'audio':fs_1[_0xf300ae(0x172)][_0xf300ae(0x181)](_0x5c46c6),'mimetype':_0xf300ae(0x17e),'ptt':!![]}:_0x76a51={'audio':fs_1[_0xf300ae(0x172)][_0xf300ae(0x181)](_0x5c46c6),'mimetype':_0x5752c7?_0xf300ae(0x17e):_0x46a4a3,'ptt':!![]};}else{if(_0x2cb121==='document')_0x76a51={'document':fs_1[_0xf300ae(0x172)][_0xf300ae(0x181)](_0x147c59),'caption':_0x497376?_0x497376:null,'fileName':_0x99b78d,'mimetype':_0x46a4a3};else _0x2cb121===_0xf300ae(0x16a)?_0x76a51={'document':fs_1[_0xf300ae(0x172)][_0xf300ae(0x181)](_0x147c59),'caption':_0x497376?_0x497376:null,'fileName':_0x99b78d,'mimetype':_0x46a4a3}:_0x76a51={'image':fs_1[_0xf300ae(0x172)][_0xf300ae(0x181)](_0x147c59),'caption':_0x497376?_0x497376:_0x99b78d};}}return _0x76a51;}catch(_0xaa6d71){return Sentry[_0xf300ae(0x18c)](_0xaa6d71),console[_0xf300ae(0x19c)](_0xaa6d71),null;}};exports['getMessageOptions']=getMessageOptions;const SendWhatsAppMedia=async({media:_0x52ef18,ticket:_0x3c7967,body:_0x4f0000,isPrivate:_0x5976c2,isForwarded:isForwarded=![]})=>{const _0x27598e=a607_0x56727b;try{const _0x5db159=await(0x0,wbot_1[_0x27598e(0x1a0)])(_0x3c7967[_0x27598e(0x1a9)]),_0x5af2e1=_0x3c7967[_0x27598e(0x1a1)][_0x27598e(0x17b)](),_0x2176c1=_0x52ef18[_0x27598e(0x166)],_0x4b6b1a=_0x52ef18[_0x27598e(0x1aa)][_0x27598e(0x168)]('/')[0x0];let _0x433336,_0x17d631='';const _0xf5e798=_0x3c7967?(0x0,Mustache_1[_0x27598e(0x172)])(_0x4f0000,_0x3c7967):_0x4f0000;if(_0x4b6b1a===_0x27598e(0x1a7))_0x433336={'video':fs_1['default'][_0x27598e(0x181)](_0x2176c1),'caption':_0xf5e798,'fileName':_0x52ef18[_0x27598e(0x165)][_0x27598e(0x194)]('/','-'),'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},_0x17d631=_0x27598e(0x19e);else{if(_0x4b6b1a===_0x27598e(0x1a3)){const _0x2d791f=!![];if(_0x2d791f){const _0x254353=await processAudio(_0x52ef18[_0x27598e(0x166)],_0x5af2e1);_0x433336={'audio':fs_1[_0x27598e(0x172)][_0x27598e(0x181)](_0x254353),'mimetype':_0x2d791f?_0x27598e(0x17e):_0x52ef18['mimetype'],'ptt':!![],'caption':_0xf5e798,'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},(0x0,fs_1[_0x27598e(0x179)])(_0x254353);}else{const _0x3326e3=await processAudio(_0x52ef18[_0x27598e(0x166)],_0x5af2e1);_0x433336={'audio':fs_1[_0x27598e(0x172)][_0x27598e(0x181)](_0x3326e3),'mimetype':'audio/mp4','ptt':!![],'caption':_0xf5e798,'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},(0x0,fs_1[_0x27598e(0x179)])(_0x3326e3);}_0x17d631='ðŸŽµ\x20Arquivo\x20de\x20Ã¡udio';}else{if(_0x4b6b1a===_0x27598e(0x15f)||_0x4b6b1a===_0x27598e(0x196))_0x433336={'document':fs_1[_0x27598e(0x172)]['readFileSync'](_0x2176c1),'caption':_0xf5e798,'fileName':_0x52ef18[_0x27598e(0x165)]['replace']('/','-'),'mimetype':_0x52ef18[_0x27598e(0x1aa)],'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},_0x17d631=_0x27598e(0x1a2);else _0x4b6b1a==='application'?(_0x433336={'document':fs_1['default'][_0x27598e(0x181)](_0x2176c1),'caption':_0xf5e798,'fileName':_0x52ef18[_0x27598e(0x165)]['replace']('/','-'),'mimetype':_0x52ef18[_0x27598e(0x1aa)],'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},_0x17d631='ðŸ“Ž\x20Outros\x20anexos'):(_0x433336={'image':fs_1[_0x27598e(0x172)]['readFileSync'](_0x2176c1),'caption':_0xf5e798,'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded}},_0x17d631=_0x27598e(0x19a));}}if(_0x5976c2){const _0x956b5d={'wid':_0x27598e(0x18f)+_0x5af2e1+_0x3c7967['id']+_0x4f0000[_0x27598e(0x1a8)](0x0,0x6),'ticketId':_0x3c7967['id'],'contactId':undefined,'body':_0xf5e798,'fromMe':!![],'mediaUrl':_0x52ef18[_0x27598e(0x162)],'mediaType':_0x52ef18[_0x27598e(0x1aa)]['split']('/')[0x0],'read':!![],'quotedMsgId':null,'ack':0x2,'remoteJid':null,'participant':null,'dataJson':null,'ticketTrakingId':null,'isPrivate':_0x5976c2};await(0x0,CreateMessageService_1[_0x27598e(0x172)])({'messageData':_0x956b5d,'companyId':_0x3c7967[_0x27598e(0x1a1)]});return;}const _0x3b0fe9=await Contact_1[_0x27598e(0x172)][_0x27598e(0x193)](_0x3c7967[_0x27598e(0x182)]);let _0xf613b8;_0x3b0fe9['remoteJid']&&_0x3b0fe9[_0x27598e(0x18b)]!==''&&_0x3b0fe9['remoteJid'][_0x27598e(0x16f)]('@')?_0xf613b8=_0x3b0fe9['remoteJid']:_0xf613b8=_0x3b0fe9[_0x27598e(0x163)]+'@'+(_0x3c7967[_0x27598e(0x16e)]?_0x27598e(0x19f):'s.whatsapp.net');const _0x140e70=await _0x5db159[_0x27598e(0x195)](_0xf613b8,{..._0x433336});return await _0x3c7967['update']({'lastMessage':_0x4f0000!==_0x52ef18[_0x27598e(0x162)]?_0x4f0000:_0xf5e798,'imported':null}),_0x140e70;}catch(_0x163b48){Sentry[_0x27598e(0x18c)](_0x163b48),console[_0x27598e(0x19c)](_0x163b48);throw new AppError_1[(_0x27598e(0x172))](_0x27598e(0x174));}};exports[a607_0x56727b(0x172)]=SendWhatsAppMedia;
>>>>>>> ab722bfbcf394d74dd0b99a984c0dcf6ffbcff7f
