'use strict';const a620_0x24124c=a620_0x3b1e;(function(_0x44fce2,_0x4f8d94){const _0x264473=a620_0x3b1e,_0x1a2f5a=_0x44fce2();while(!![]){try{const _0x52e361=parseInt(_0x264473(0x17b))/0x1*(-parseInt(_0x264473(0x170))/0x2)+-parseInt(_0x264473(0x152))/0x3*(parseInt(_0x264473(0x155))/0x4)+parseInt(_0x264473(0x159))/0x5*(-parseInt(_0x264473(0x176))/0x6)+-parseInt(_0x264473(0x17f))/0x7*(-parseInt(_0x264473(0x179))/0x8)+-parseInt(_0x264473(0x16d))/0x9+parseInt(_0x264473(0x15a))/0xa+parseInt(_0x264473(0x166))/0xb*(parseInt(_0x264473(0x15f))/0xc);if(_0x52e361===_0x4f8d94)break;else _0x1a2f5a['push'](_0x1a2f5a['shift']());}catch(_0x5c105d){_0x1a2f5a['push'](_0x1a2f5a['shift']());}}}(a620_0x14f7,0xb1cdd));var __createBinding=this&&this['__createBinding']||(Object[a620_0x24124c(0x162)]?function(_0x517d70,_0x49f018,_0x49b774,_0x30ea27){const _0x1389c3=a620_0x24124c;if(_0x30ea27===undefined)_0x30ea27=_0x49b774;var _0x2c44ab=Object[_0x1389c3(0x174)](_0x49f018,_0x49b774);(!_0x2c44ab||(_0x1389c3(0x181)in _0x2c44ab?!_0x49f018[_0x1389c3(0x16c)]:_0x2c44ab[_0x1389c3(0x187)]||_0x2c44ab[_0x1389c3(0x16b)]))&&(_0x2c44ab={'enumerable':!![],'get':function(){return _0x49f018[_0x49b774];}}),Object[_0x1389c3(0x168)](_0x517d70,_0x30ea27,_0x2c44ab);}:function(_0x43acd2,_0x28fd29,_0x170b02,_0x20be46){if(_0x20be46===undefined)_0x20be46=_0x170b02;_0x43acd2[_0x20be46]=_0x28fd29[_0x170b02];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a620_0x24124c(0x162)]?function(_0x5ab6bd,_0x5b4f3f){const _0x3149b4=a620_0x24124c;Object[_0x3149b4(0x168)](_0x5ab6bd,_0x3149b4(0x180),{'enumerable':!![],'value':_0x5b4f3f});}:function(_0x43957c,_0x4ceeba){const _0xe6c139=a620_0x24124c;_0x43957c[_0xe6c139(0x180)]=_0x4ceeba;}),__importStar=this&&this[a620_0x24124c(0x169)]||function(_0xc593e3){const _0x81de9c=a620_0x24124c;if(_0xc593e3&&_0xc593e3[_0x81de9c(0x16c)])return _0xc593e3;var _0x20d38b={};if(_0xc593e3!=null){for(var _0x66619 in _0xc593e3)if(_0x66619!==_0x81de9c(0x180)&&Object[_0x81de9c(0x15d)]['hasOwnProperty'][_0x81de9c(0x173)](_0xc593e3,_0x66619))__createBinding(_0x20d38b,_0xc593e3,_0x66619);}return __setModuleDefault(_0x20d38b,_0xc593e3),_0x20d38b;},__importDefault=this&&this[a620_0x24124c(0x177)]||function(_0x51599d){const _0x57c5a4=a620_0x24124c;return _0x51599d&&_0x51599d[_0x57c5a4(0x16c)]?_0x51599d:{'default':_0x51599d};};function a620_0x14f7(){const _0x347c94=['lodash','sendMessage','create','key','extendedTextMessage','contactId','753731RbuYFN','update','defineProperty','__importStar','number','configurable','__esModule','3876876qchSQY','name','@sentry/node','2493782zDQVdB','s.whatsapp.net','ERR_SENDING_WAPP_MSG','call','getOwnPropertyDescriptor','isGroup','20460JxGwdB','__importDefault','message','296LYuPZc','TEL;type=CELL;waid=','1mxeWyn','BEGIN:VCARD\x0a','captureException','../../models/Message','194117RlNHur','default','get','END:VCARD','findByPk','VERSION:3.0\x0a','includes','FN:','writable','3PaXJkC','g.us','split','1475956nwVuzP','../../helpers/GetTicketWbot','delay','@whiskeysockets/baileys','1075KmQoaV','9745700FfhCiw','remoteJid','log','prototype','../../helpers/Mustache','264rFwFdx'];a620_0x14f7=function(){return _0x347c94;};return a620_0x14f7();}Object['defineProperty'](exports,a620_0x24124c(0x16c),{'value':!![]});function a620_0x3b1e(_0x2c0d5b,_0xaea906){const _0x14f764=a620_0x14f7();return a620_0x3b1e=function(_0x3b1eb1,_0x4e6197){_0x3b1eb1=_0x3b1eb1-0x152;let _0x20dad3=_0x14f764[_0x3b1eb1];return _0x20dad3;},a620_0x3b1e(_0x2c0d5b,_0xaea906);}const baileys_1=require(a620_0x24124c(0x158)),Sentry=__importStar(require(a620_0x24124c(0x16f))),AppError_1=__importDefault(require('../../errors/AppError')),GetTicketWbot_1=__importDefault(require(a620_0x24124c(0x156))),Message_1=__importDefault(require(a620_0x24124c(0x17e))),Contact_1=__importDefault(require('../../models/Contact')),lodash_1=require(a620_0x24124c(0x160)),Mustache_1=__importDefault(require(a620_0x24124c(0x15e))),SendWhatsAppMessage=async({body:_0x2e95d6,ticket:_0x3fdf06,quotedMsg:_0x2aab2f,msdelay:_0x1fad6d,vCard:_0x5a1b2f,isForwarded:isForwarded=![]})=>{const _0x1a11d3=a620_0x24124c;let _0x3a7669={};const _0x906cd8=await(0x0,GetTicketWbot_1[_0x1a11d3(0x180)])(_0x3fdf06),_0x16c73=await Contact_1[_0x1a11d3(0x180)][_0x1a11d3(0x183)](_0x3fdf06[_0x1a11d3(0x165)]);let _0x5d8802;_0x16c73[_0x1a11d3(0x15b)]&&_0x16c73[_0x1a11d3(0x15b)]!==''&&_0x16c73[_0x1a11d3(0x15b)][_0x1a11d3(0x185)]('@')?_0x5d8802=_0x16c73[_0x1a11d3(0x15b)]:_0x5d8802=_0x16c73['number']+'@'+(_0x3fdf06[_0x1a11d3(0x175)]?_0x1a11d3(0x153):_0x1a11d3(0x171));if(_0x2aab2f){const _0x52ab44=await Message_1[_0x1a11d3(0x180)]['findOne']({'where':{'id':_0x2aab2f['id']}});if(_0x52ab44){const _0x382bb1=JSON['parse'](_0x52ab44['dataJson']);_0x382bb1[_0x1a11d3(0x178)][_0x1a11d3(0x164)]!==undefined?_0x3a7669={'quoted':{'key':_0x382bb1['key'],'message':{'extendedTextMessage':_0x382bb1[_0x1a11d3(0x178)][_0x1a11d3(0x164)]}}}:_0x3a7669={'quoted':{'key':_0x382bb1[_0x1a11d3(0x163)],'message':{'conversation':_0x382bb1[_0x1a11d3(0x178)]['conversation']}}};}}if(!(0x0,lodash_1['isNil'])(_0x5a1b2f)){const _0x3fa6a2=_0x5a1b2f[_0x1a11d3(0x16a)],_0x421a16=_0x5a1b2f[_0x1a11d3(0x16e)][_0x1a11d3(0x154)]('\x20')[0x0],_0x3dec7b=String(_0x5a1b2f[_0x1a11d3(0x16e)])['replace'](_0x5a1b2f['name']['split']('\x20')[0x0],''),_0x366a4b=_0x1a11d3(0x17c)+_0x1a11d3(0x184)+('N:'+_0x3dec7b+';'+_0x421a16+';;;\x0a')+(_0x1a11d3(0x186)+_0x5a1b2f[_0x1a11d3(0x16e)]+'\x0a')+(_0x1a11d3(0x17a)+_0x3fa6a2+':+'+_0x3fa6a2+'\x0a')+_0x1a11d3(0x182);try{await(0x0,baileys_1[_0x1a11d3(0x157)])(_0x1fad6d);const _0x1ef37b=await _0x906cd8['sendMessage'](_0x5d8802,{'contacts':{'displayName':''+_0x5a1b2f[_0x1a11d3(0x16e)],'contacts':[{'vcard':_0x366a4b}]}});return await _0x3fdf06[_0x1a11d3(0x167)]({'lastMessage':(0x0,Mustache_1['default'])(_0x366a4b,_0x3fdf06),'imported':null}),_0x1ef37b;}catch(_0x2bdb92){Sentry[_0x1a11d3(0x17d)](_0x2bdb92),console[_0x1a11d3(0x15c)](_0x2bdb92);throw new AppError_1[(_0x1a11d3(0x180))](_0x1a11d3(0x172));}};try{await(0x0,baileys_1[_0x1a11d3(0x157)])(_0x1fad6d);const _0x768ff3=await _0x906cd8[_0x1a11d3(0x161)](_0x5d8802,{'text':(0x0,Mustache_1[_0x1a11d3(0x180)])(_0x2e95d6,_0x3fdf06),'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded?!![]:![]}},{..._0x3a7669});return await _0x3fdf06[_0x1a11d3(0x167)]({'lastMessage':(0x0,Mustache_1[_0x1a11d3(0x180)])(_0x2e95d6,_0x3fdf06),'imported':null}),_0x768ff3;}catch(_0x12393c){Sentry[_0x1a11d3(0x17d)](_0x12393c),console['log'](_0x12393c);throw new AppError_1[(_0x1a11d3(0x180))]('ERR_SENDING_WAPP_MSG');}};exports[a620_0x24124c(0x180)]=SendWhatsAppMessage;