'use strict';const a620_0x52867d=a620_0x2ad2;(function(_0x26f934,_0x34d916){const _0x390f87=a620_0x2ad2,_0x258c4d=_0x26f934();while(!![]){try{const _0x25b012=-parseInt(_0x390f87(0x15f))/0x1+-parseInt(_0x390f87(0x173))/0x2+-parseInt(_0x390f87(0x152))/0x3*(parseInt(_0x390f87(0x166))/0x4)+parseInt(_0x390f87(0x180))/0x5+parseInt(_0x390f87(0x184))/0x6*(-parseInt(_0x390f87(0x15c))/0x7)+parseInt(_0x390f87(0x16c))/0x8*(-parseInt(_0x390f87(0x17b))/0x9)+parseInt(_0x390f87(0x161))/0xa;if(_0x25b012===_0x34d916)break;else _0x258c4d['push'](_0x258c4d['shift']());}catch(_0x1a39c7){_0x258c4d['push'](_0x258c4d['shift']());}}}(a620_0x1cdc,0xabc32));var __createBinding=this&&this['__createBinding']||(Object[a620_0x52867d(0x155)]?function(_0x1bb287,_0x58fa0d,_0x48281b,_0x480681){const _0x5df3cc=a620_0x52867d;if(_0x480681===undefined)_0x480681=_0x48281b;var _0x4aae97=Object['getOwnPropertyDescriptor'](_0x58fa0d,_0x48281b);(!_0x4aae97||(_0x5df3cc(0x170)in _0x4aae97?!_0x58fa0d[_0x5df3cc(0x17f)]:_0x4aae97['writable']||_0x4aae97[_0x5df3cc(0x15e)]))&&(_0x4aae97={'enumerable':!![],'get':function(){return _0x58fa0d[_0x48281b];}}),Object[_0x5df3cc(0x178)](_0x1bb287,_0x480681,_0x4aae97);}:function(_0x312e1e,_0x4b514c,_0xf87d4e,_0x4cdcf2){if(_0x4cdcf2===undefined)_0x4cdcf2=_0xf87d4e;_0x312e1e[_0x4cdcf2]=_0x4b514c[_0xf87d4e];}),__setModuleDefault=this&&this[a620_0x52867d(0x16a)]||(Object[a620_0x52867d(0x155)]?function(_0x2cd5d7,_0x4b2a7e){const _0x2a603c=a620_0x52867d;Object[_0x2a603c(0x178)](_0x2cd5d7,_0x2a603c(0x176),{'enumerable':!![],'value':_0x4b2a7e});}:function(_0x5612de,_0x33a6a9){_0x5612de['default']=_0x33a6a9;}),__importStar=this&&this['__importStar']||function(_0x30a140){const _0x2813ba=a620_0x52867d;if(_0x30a140&&_0x30a140['__esModule'])return _0x30a140;var _0x35dc8c={};if(_0x30a140!=null){for(var _0x16d04b in _0x30a140)if(_0x16d04b!=='default'&&Object['prototype'][_0x2813ba(0x167)][_0x2813ba(0x160)](_0x30a140,_0x16d04b))__createBinding(_0x35dc8c,_0x30a140,_0x16d04b);}return __setModuleDefault(_0x35dc8c,_0x30a140),_0x35dc8c;},__importDefault=this&&this[a620_0x52867d(0x164)]||function(_0x4e7410){const _0x5981a7=a620_0x52867d;return _0x4e7410&&_0x4e7410[_0x5981a7(0x17f)]?_0x4e7410:{'default':_0x4e7410};};function a620_0x2ad2(_0x11c054,_0x5c8b29){const _0x1cdcb1=a620_0x1cdc();return a620_0x2ad2=function(_0x2ad2d1,_0x207578){_0x2ad2d1=_0x2ad2d1-0x152;let _0x7d0e5c=_0x1cdcb1[_0x2ad2d1];return _0x7d0e5c;},a620_0x2ad2(_0x11c054,_0x5c8b29);}function a620_0x1cdc(){const _0x24028c=['defineProperty','key','log','8362737SfvTGK','number','@whiskeysockets/baileys',';;;\x0a','__esModule','2181475HAHRJB','isGroup','../../models/Contact','ERR_SENDING_WAPP_MSG','960BfUycq','3gWZZze','BEGIN:VCARD\x0a','lodash','create','split','contactId','sendMessage','../../helpers/GetTicketWbot','message','../../helpers/Mustache','44107lZZBnY','../../errors/AppError','configurable','127680TwbYCm','call','37286090DzAMUw','VERSION:3.0\x0a','update','__importDefault','g.us','3242860fpiASH','hasOwnProperty','dataJson','captureException','__setModuleDefault','extendedTextMessage','8fRSGii','FN:','@sentry/node','replace','get','delay','../../models/Message','1171236VZVrhO','name','findOne','default','remoteJid'];a620_0x1cdc=function(){return _0x24028c;};return a620_0x1cdc();}Object['defineProperty'](exports,'__esModule',{'value':!![]});const baileys_1=require(a620_0x52867d(0x17d)),Sentry=__importStar(require(a620_0x52867d(0x16e))),AppError_1=__importDefault(require(a620_0x52867d(0x15d))),GetTicketWbot_1=__importDefault(require(a620_0x52867d(0x159))),Message_1=__importDefault(require(a620_0x52867d(0x172))),Contact_1=__importDefault(require(a620_0x52867d(0x182))),lodash_1=require(a620_0x52867d(0x154)),Mustache_1=__importDefault(require(a620_0x52867d(0x15b))),SendWhatsAppMessage=async({body:_0x50f12c,ticket:_0x1dc5b5,quotedMsg:_0x489e83,msdelay:_0x2a2551,vCard:_0x48ce8e,isForwarded:isForwarded=![]})=>{const _0x59e5c4=a620_0x52867d;let _0x9e2a09={};const _0x15cb76=await(0x0,GetTicketWbot_1[_0x59e5c4(0x176)])(_0x1dc5b5),_0x3d602c=await Contact_1[_0x59e5c4(0x176)]['findByPk'](_0x1dc5b5[_0x59e5c4(0x157)]);let _0x572c17;_0x3d602c[_0x59e5c4(0x177)]&&_0x3d602c[_0x59e5c4(0x177)]!==''&&_0x3d602c[_0x59e5c4(0x177)]['includes']('@')?_0x572c17=_0x3d602c[_0x59e5c4(0x177)]:_0x572c17=_0x3d602c['number']+'@'+(_0x1dc5b5[_0x59e5c4(0x181)]?_0x59e5c4(0x165):'s.whatsapp.net');if(_0x489e83){const _0x5e6e18=await Message_1['default'][_0x59e5c4(0x175)]({'where':{'id':_0x489e83['id']}});if(_0x5e6e18){const _0x516f37=JSON['parse'](_0x5e6e18[_0x59e5c4(0x168)]);_0x516f37[_0x59e5c4(0x15a)][_0x59e5c4(0x16b)]!==undefined?_0x9e2a09={'quoted':{'key':_0x516f37['key'],'message':{'extendedTextMessage':_0x516f37['message'][_0x59e5c4(0x16b)]}}}:_0x9e2a09={'quoted':{'key':_0x516f37[_0x59e5c4(0x179)],'message':{'conversation':_0x516f37['message']['conversation']}}};}}if(!(0x0,lodash_1['isNil'])(_0x48ce8e)){const _0x86b3cb=_0x48ce8e[_0x59e5c4(0x17c)],_0x2cd90b=_0x48ce8e[_0x59e5c4(0x174)][_0x59e5c4(0x156)]('\x20')[0x0],_0x17f9b3=String(_0x48ce8e[_0x59e5c4(0x174)])[_0x59e5c4(0x16f)](_0x48ce8e[_0x59e5c4(0x174)][_0x59e5c4(0x156)]('\x20')[0x0],''),_0x19c175=_0x59e5c4(0x153)+_0x59e5c4(0x162)+('N:'+_0x17f9b3+';'+_0x2cd90b+_0x59e5c4(0x17e))+(_0x59e5c4(0x16d)+_0x48ce8e[_0x59e5c4(0x174)]+'\x0a')+('TEL;type=CELL;waid='+_0x86b3cb+':+'+_0x86b3cb+'\x0a')+'END:VCARD';try{await(0x0,baileys_1[_0x59e5c4(0x171)])(_0x2a2551);const _0x2d9cb6=await _0x15cb76['sendMessage'](_0x572c17,{'contacts':{'displayName':''+_0x48ce8e[_0x59e5c4(0x174)],'contacts':[{'vcard':_0x19c175}]}});return await _0x1dc5b5['update']({'lastMessage':(0x0,Mustache_1['default'])(_0x19c175,_0x1dc5b5),'imported':null}),_0x2d9cb6;}catch(_0x5ce333){Sentry[_0x59e5c4(0x169)](_0x5ce333),console['log'](_0x5ce333);throw new AppError_1[(_0x59e5c4(0x176))]('ERR_SENDING_WAPP_MSG');}};try{await(0x0,baileys_1[_0x59e5c4(0x171)])(_0x2a2551);const _0x14b8a8=await _0x15cb76[_0x59e5c4(0x158)](_0x572c17,{'text':(0x0,Mustache_1[_0x59e5c4(0x176)])(_0x50f12c,_0x1dc5b5),'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded?!![]:![]}},{..._0x9e2a09});return await _0x1dc5b5[_0x59e5c4(0x163)]({'lastMessage':(0x0,Mustache_1['default'])(_0x50f12c,_0x1dc5b5),'imported':null}),_0x14b8a8;}catch(_0x13b20d){Sentry[_0x59e5c4(0x169)](_0x13b20d),console[_0x59e5c4(0x17a)](_0x13b20d);throw new AppError_1[(_0x59e5c4(0x176))](_0x59e5c4(0x183));}};exports[a620_0x52867d(0x176)]=SendWhatsAppMessage;