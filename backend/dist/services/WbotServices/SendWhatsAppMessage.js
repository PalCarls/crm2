<<<<<<< HEAD
'use strict';function a609_0x3fe1(_0x5143a3,_0x2362a0){const _0x46a92e=a609_0x46a9();return a609_0x3fe1=function(_0x3fe163,_0xbaa88d){_0x3fe163=_0x3fe163-0x1ef;let _0x5f45f7=_0x46a92e[_0x3fe163];return _0x5f45f7;},a609_0x3fe1(_0x5143a3,_0x2362a0);}function a609_0x46a9(){const _0x56b3ac=['__createBinding','__esModule','ERR_SENDING_WAPP_MSG','captureException','196368kUDjNp','message','s.whatsapp.net','isGroup','name','findOne','contactId','sendMessage','defineProperty','15856wwFFwj','1RkKRQQ','__setModuleDefault','../../helpers/Mustache','143550UkOwRr','update','call','416830qiDmak','../../models/Contact','FN:','configurable','prototype','number','g.us','includes','conversation','230QESoDu','extendedTextMessage','../../helpers/GetTicketWbot','lodash','7veQhPc','462116IpeSNL','END:VCARD','log','writable','36jTbJaj','remoteJid','getOwnPropertyDescriptor','300030PgeEUM','VERSION:3.0\x0a','@sentry/node','@whiskeysockets/baileys','dataJson','2484iXbSlB','create','default'];a609_0x46a9=function(){return _0x56b3ac;};return a609_0x46a9();}const a609_0x2b540b=a609_0x3fe1;(function(_0x4a9636,_0x4efd00){const _0x5da382=a609_0x3fe1,_0x2cf524=_0x4a9636();while(!![]){try{const _0x13870c=parseInt(_0x5da382(0x217))/0x1*(parseInt(_0x5da382(0x21d))/0x2)+parseInt(_0x5da382(0x20d))/0x3+parseInt(_0x5da382(0x1fa))/0x4+parseInt(_0x5da382(0x201))/0x5+-parseInt(_0x5da382(0x206))/0x6*(-parseInt(_0x5da382(0x1f9))/0x7)+parseInt(_0x5da382(0x216))/0x8*(parseInt(_0x5da382(0x1fe))/0x9)+parseInt(_0x5da382(0x1f5))/0xa*(-parseInt(_0x5da382(0x21a))/0xb);if(_0x13870c===_0x4efd00)break;else _0x2cf524['push'](_0x2cf524['shift']());}catch(_0xb88b7f){_0x2cf524['push'](_0x2cf524['shift']());}}}(a609_0x46a9,0x2679e));var __createBinding=this&&this[a609_0x2b540b(0x209)]||(Object['create']?function(_0x440866,_0x38dc0f,_0x3b95b5,_0x6d0d77){const _0x2615f8=a609_0x2b540b;if(_0x6d0d77===undefined)_0x6d0d77=_0x3b95b5;var _0x3bb04f=Object[_0x2615f8(0x200)](_0x38dc0f,_0x3b95b5);(!_0x3bb04f||('get'in _0x3bb04f?!_0x38dc0f[_0x2615f8(0x20a)]:_0x3bb04f[_0x2615f8(0x1fd)]||_0x3bb04f[_0x2615f8(0x1ef)]))&&(_0x3bb04f={'enumerable':!![],'get':function(){return _0x38dc0f[_0x3b95b5];}}),Object[_0x2615f8(0x215)](_0x440866,_0x6d0d77,_0x3bb04f);}:function(_0x2c3999,_0x16844f,_0x406584,_0x150c74){if(_0x150c74===undefined)_0x150c74=_0x406584;_0x2c3999[_0x150c74]=_0x16844f[_0x406584];}),__setModuleDefault=this&&this[a609_0x2b540b(0x218)]||(Object[a609_0x2b540b(0x207)]?function(_0x8209e0,_0x455ffc){const _0x549d80=a609_0x2b540b;Object[_0x549d80(0x215)](_0x8209e0,_0x549d80(0x208),{'enumerable':!![],'value':_0x455ffc});}:function(_0x34e61c,_0x589cae){_0x34e61c['default']=_0x589cae;}),__importStar=this&&this['__importStar']||function(_0x5bb5d0){const _0x2fc0c1=a609_0x2b540b;if(_0x5bb5d0&&_0x5bb5d0[_0x2fc0c1(0x20a)])return _0x5bb5d0;var _0x59d6fd={};if(_0x5bb5d0!=null){for(var _0x13e83e in _0x5bb5d0)if(_0x13e83e!=='default'&&Object[_0x2fc0c1(0x1f0)]['hasOwnProperty'][_0x2fc0c1(0x21c)](_0x5bb5d0,_0x13e83e))__createBinding(_0x59d6fd,_0x5bb5d0,_0x13e83e);}return __setModuleDefault(_0x59d6fd,_0x5bb5d0),_0x59d6fd;},__importDefault=this&&this['__importDefault']||function(_0x23529c){return _0x23529c&&_0x23529c['__esModule']?_0x23529c:{'default':_0x23529c};};Object[a609_0x2b540b(0x215)](exports,a609_0x2b540b(0x20a),{'value':!![]});const baileys_1=require(a609_0x2b540b(0x204)),Sentry=__importStar(require(a609_0x2b540b(0x203))),AppError_1=__importDefault(require('../../errors/AppError')),GetTicketWbot_1=__importDefault(require(a609_0x2b540b(0x1f7))),Message_1=__importDefault(require('../../models/Message')),Contact_1=__importDefault(require(a609_0x2b540b(0x21e))),lodash_1=require(a609_0x2b540b(0x1f8)),Mustache_1=__importDefault(require(a609_0x2b540b(0x219))),SendWhatsAppMessage=async({body:_0x2b4deb,ticket:_0x5e41a8,quotedMsg:_0xd241a8,msdelay:_0x3182f1,isPrivate:_0x19fbe4,vCard:_0x1b2bf0,isForwarded:isForwarded=![]})=>{const _0xf5d54=a609_0x2b540b;let _0x3fae72={};const _0x5a0512=await(0x0,GetTicketWbot_1['default'])(_0x5e41a8),_0x3f348e=await Contact_1[_0xf5d54(0x208)]['findByPk'](_0x5e41a8[_0xf5d54(0x213)]);let _0x44892d;_0x3f348e[_0xf5d54(0x1ff)]&&_0x3f348e[_0xf5d54(0x1ff)]!==''&&_0x3f348e[_0xf5d54(0x1ff)][_0xf5d54(0x1f3)]('@')?_0x44892d=_0x3f348e[_0xf5d54(0x1ff)]:_0x44892d=_0x3f348e[_0xf5d54(0x1f1)]+'@'+(_0x5e41a8[_0xf5d54(0x210)]?_0xf5d54(0x1f2):_0xf5d54(0x20f));if(_0xd241a8){const _0x2017d7=await Message_1[_0xf5d54(0x208)][_0xf5d54(0x212)]({'where':{'id':_0xd241a8['id']}});if(_0x2017d7){const _0x2a59fa=JSON['parse'](_0x2017d7[_0xf5d54(0x205)]);_0x2a59fa[_0xf5d54(0x20e)][_0xf5d54(0x1f6)]!==undefined?_0x3fae72={'quoted':{'key':_0x2a59fa['key'],'message':{'extendedTextMessage':_0x2a59fa[_0xf5d54(0x20e)]['extendedTextMessage']}}}:_0x3fae72={'quoted':{'key':_0x2a59fa['key'],'message':{'conversation':_0x2a59fa['message'][_0xf5d54(0x1f4)]}}};}}if(!(0x0,lodash_1['isNil'])(_0x1b2bf0)){const _0x221db1=_0x1b2bf0[_0xf5d54(0x1f1)],_0x49d737=_0x1b2bf0[_0xf5d54(0x211)]['split']('\x20')[0x0],_0x3bf33a=String(_0x1b2bf0[_0xf5d54(0x211)])['replace'](_0x1b2bf0[_0xf5d54(0x211)]['split']('\x20')[0x0],''),_0xe46f7='BEGIN:VCARD\x0a'+_0xf5d54(0x202)+('N:'+_0x3bf33a+';'+_0x49d737+';;;\x0a')+(_0xf5d54(0x21f)+_0x1b2bf0[_0xf5d54(0x211)]+'\x0a')+('TEL;type=CELL;waid='+_0x221db1+':+'+_0x221db1+'\x0a')+_0xf5d54(0x1fb);try{await(0x0,baileys_1['delay'])(_0x3182f1);const _0x53678c=await _0x5a0512[_0xf5d54(0x214)](_0x44892d,{'contacts':{'displayName':''+_0x1b2bf0[_0xf5d54(0x211)],'contacts':[{'vcard':_0xe46f7}]}});return await _0x5e41a8[_0xf5d54(0x21b)]({'lastMessage':(0x0,Mustache_1['default'])(_0xe46f7,_0x5e41a8),'imported':null}),_0x53678c;}catch(_0x3dd31f){Sentry[_0xf5d54(0x20c)](_0x3dd31f),console[_0xf5d54(0x1fc)](_0x3dd31f);throw new AppError_1[(_0xf5d54(0x208))](_0xf5d54(0x20b));}};try{await(0x0,baileys_1['delay'])(_0x3182f1);const _0x46f8ec=await _0x5a0512[_0xf5d54(0x214)](_0x44892d,{'text':(0x0,Mustache_1[_0xf5d54(0x208)])(_0x2b4deb,_0x5e41a8),'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded?!![]:![]}},{..._0x3fae72});return await _0x5e41a8[_0xf5d54(0x21b)]({'lastMessage':(0x0,Mustache_1[_0xf5d54(0x208)])(_0x2b4deb,_0x5e41a8),'imported':null}),_0x46f8ec;}catch(_0x3e8a5f){Sentry[_0xf5d54(0x20c)](_0x3e8a5f),console[_0xf5d54(0x1fc)](_0x3e8a5f);throw new AppError_1[(_0xf5d54(0x208))](_0xf5d54(0x20b));}};exports[a609_0x2b540b(0x208)]=SendWhatsAppMessage;
=======
'use strict';function a608_0x2f4b(){const _0x351b6a=['conversation','log','1130448sKzBCN','default','call','captureException','get','../../models/Message','@whiskeysockets/baileys','parse','__setModuleDefault','240630uoRqhK','delay','sendMessage','150630eumeRt','remoteJid','replace','250GXajeO','writable','64BqwFuG','668XprASv','includes','1833CBToFJ','40018SWJdSo','isGroup','5COjMvx','@sentry/node','extendedTextMessage','../../models/Contact','name','FN:','__esModule','TEL;type=CELL;waid=','findOne','s.whatsapp.net','defineProperty','number','update','2002167uprABq','lodash','END:VCARD','../../errors/AppError','18767iENmue','__importStar','BEGIN:VCARD\x0a','split','g.us','message','key','prototype','hasOwnProperty','create','configurable','__importDefault'];a608_0x2f4b=function(){return _0x351b6a;};return a608_0x2f4b();}const a608_0x18bf76=a608_0x1aee;(function(_0x430c83,_0x11d159){const _0x538f53=a608_0x1aee,_0x9c4601=_0x430c83();while(!![]){try{const _0x3cc2ef=-parseInt(_0x538f53(0xb7))/0x1+parseInt(_0x538f53(0x87))/0x2*(parseInt(_0x538f53(0x89))/0x3)+parseInt(_0x538f53(0xab))/0x4+-parseInt(_0x538f53(0x8c))/0x5*(parseInt(_0x538f53(0xb4))/0x6)+parseInt(_0x538f53(0x9d))/0x7*(-parseInt(_0x538f53(0x86))/0x8)+-parseInt(_0x538f53(0x99))/0x9+parseInt(_0x538f53(0x84))/0xa*(parseInt(_0x538f53(0x8a))/0xb);if(_0x3cc2ef===_0x11d159)break;else _0x9c4601['push'](_0x9c4601['shift']());}catch(_0x2eb939){_0x9c4601['push'](_0x9c4601['shift']());}}}(a608_0x2f4b,0x22e8e));var __createBinding=this&&this['__createBinding']||(Object[a608_0x18bf76(0xa6)]?function(_0x39fc0f,_0x1608fd,_0x36a9e4,_0x42d90e){const _0xb06e6d=a608_0x18bf76;if(_0x42d90e===undefined)_0x42d90e=_0x36a9e4;var _0x56a711=Object['getOwnPropertyDescriptor'](_0x1608fd,_0x36a9e4);(!_0x56a711||(_0xb06e6d(0xaf)in _0x56a711?!_0x1608fd[_0xb06e6d(0x92)]:_0x56a711[_0xb06e6d(0x85)]||_0x56a711[_0xb06e6d(0xa7)]))&&(_0x56a711={'enumerable':!![],'get':function(){return _0x1608fd[_0x36a9e4];}}),Object[_0xb06e6d(0x96)](_0x39fc0f,_0x42d90e,_0x56a711);}:function(_0x46905a,_0x564ab4,_0x4ec477,_0x12206a){if(_0x12206a===undefined)_0x12206a=_0x4ec477;_0x46905a[_0x12206a]=_0x564ab4[_0x4ec477];}),__setModuleDefault=this&&this[a608_0x18bf76(0xb3)]||(Object[a608_0x18bf76(0xa6)]?function(_0x553faa,_0x54d1cf){const _0x2c6e1b=a608_0x18bf76;Object[_0x2c6e1b(0x96)](_0x553faa,'default',{'enumerable':!![],'value':_0x54d1cf});}:function(_0x40401d,_0x30870a){_0x40401d['default']=_0x30870a;}),__importStar=this&&this[a608_0x18bf76(0x9e)]||function(_0x5aac36){const _0x1bce86=a608_0x18bf76;if(_0x5aac36&&_0x5aac36[_0x1bce86(0x92)])return _0x5aac36;var _0x374ee7={};if(_0x5aac36!=null){for(var _0x4488cb in _0x5aac36)if(_0x4488cb!=='default'&&Object[_0x1bce86(0xa4)][_0x1bce86(0xa5)][_0x1bce86(0xad)](_0x5aac36,_0x4488cb))__createBinding(_0x374ee7,_0x5aac36,_0x4488cb);}return __setModuleDefault(_0x374ee7,_0x5aac36),_0x374ee7;},__importDefault=this&&this[a608_0x18bf76(0xa8)]||function(_0x3e95e6){return _0x3e95e6&&_0x3e95e6['__esModule']?_0x3e95e6:{'default':_0x3e95e6};};Object['defineProperty'](exports,a608_0x18bf76(0x92),{'value':!![]});function a608_0x1aee(_0x5efda2,_0x196e8b){const _0x2f4bbf=a608_0x2f4b();return a608_0x1aee=function(_0x1aee61,_0x35c5e1){_0x1aee61=_0x1aee61-0x84;let _0x211f2b=_0x2f4bbf[_0x1aee61];return _0x211f2b;},a608_0x1aee(_0x5efda2,_0x196e8b);}const baileys_1=require(a608_0x18bf76(0xb1)),Sentry=__importStar(require(a608_0x18bf76(0x8d))),AppError_1=__importDefault(require(a608_0x18bf76(0x9c))),GetTicketWbot_1=__importDefault(require('../../helpers/GetTicketWbot')),Message_1=__importDefault(require(a608_0x18bf76(0xb0))),Contact_1=__importDefault(require(a608_0x18bf76(0x8f))),lodash_1=require(a608_0x18bf76(0x9a)),Mustache_1=__importDefault(require('../../helpers/Mustache')),SendWhatsAppMessage=async({body:_0x1615c2,ticket:_0x20cd0b,quotedMsg:_0x2d8a04,msdelay:_0x39fce1,isPrivate:_0x1aa08d,vCard:_0x3a2cc2,isForwarded:isForwarded=![]})=>{const _0xd7b2c3=a608_0x18bf76;let _0x4a665c={};const _0x18712e=await(0x0,GetTicketWbot_1[_0xd7b2c3(0xac)])(_0x20cd0b),_0x198f34=await Contact_1[_0xd7b2c3(0xac)]['findByPk'](_0x20cd0b['contactId']);let _0x2c96b2;_0x198f34[_0xd7b2c3(0xb8)]&&_0x198f34[_0xd7b2c3(0xb8)]!==''&&_0x198f34[_0xd7b2c3(0xb8)][_0xd7b2c3(0x88)]('@')?_0x2c96b2=_0x198f34[_0xd7b2c3(0xb8)]:_0x2c96b2=_0x198f34[_0xd7b2c3(0x97)]+'@'+(_0x20cd0b[_0xd7b2c3(0x8b)]?_0xd7b2c3(0xa1):_0xd7b2c3(0x95));if(_0x2d8a04){const _0x57bf64=await Message_1[_0xd7b2c3(0xac)][_0xd7b2c3(0x94)]({'where':{'id':_0x2d8a04['id']}});if(_0x57bf64){const _0x761ed5=JSON[_0xd7b2c3(0xb2)](_0x57bf64['dataJson']);_0x761ed5[_0xd7b2c3(0xa2)][_0xd7b2c3(0x8e)]!==undefined?_0x4a665c={'quoted':{'key':_0x761ed5[_0xd7b2c3(0xa3)],'message':{'extendedTextMessage':_0x761ed5['message'][_0xd7b2c3(0x8e)]}}}:_0x4a665c={'quoted':{'key':_0x761ed5[_0xd7b2c3(0xa3)],'message':{'conversation':_0x761ed5['message'][_0xd7b2c3(0xa9)]}}};}}if(!(0x0,lodash_1['isNil'])(_0x3a2cc2)){const _0x159257=_0x3a2cc2[_0xd7b2c3(0x97)],_0x2bb2af=_0x3a2cc2[_0xd7b2c3(0x90)][_0xd7b2c3(0xa0)]('\x20')[0x0],_0xe44259=String(_0x3a2cc2[_0xd7b2c3(0x90)])[_0xd7b2c3(0xb9)](_0x3a2cc2['name']['split']('\x20')[0x0],''),_0x444b0d=_0xd7b2c3(0x9f)+'VERSION:3.0\x0a'+('N:'+_0xe44259+';'+_0x2bb2af+';;;\x0a')+(_0xd7b2c3(0x91)+_0x3a2cc2[_0xd7b2c3(0x90)]+'\x0a')+(_0xd7b2c3(0x93)+_0x159257+':+'+_0x159257+'\x0a')+_0xd7b2c3(0x9b);try{await(0x0,baileys_1[_0xd7b2c3(0xb5)])(_0x39fce1);const _0x60d9f7=await _0x18712e[_0xd7b2c3(0xb6)](_0x2c96b2,{'contacts':{'displayName':''+_0x3a2cc2[_0xd7b2c3(0x90)],'contacts':[{'vcard':_0x444b0d}]}});return await _0x20cd0b['update']({'lastMessage':(0x0,Mustache_1['default'])(_0x444b0d,_0x20cd0b),'imported':null}),_0x60d9f7;}catch(_0x39f9ad){Sentry[_0xd7b2c3(0xae)](_0x39f9ad),console[_0xd7b2c3(0xaa)](_0x39f9ad);throw new AppError_1[(_0xd7b2c3(0xac))]('ERR_SENDING_WAPP_MSG');}};try{await(0x0,baileys_1[_0xd7b2c3(0xb5)])(_0x39fce1);const _0x63e08a=await _0x18712e[_0xd7b2c3(0xb6)](_0x2c96b2,{'text':(0x0,Mustache_1['default'])(_0x1615c2,_0x20cd0b),'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded?!![]:![]}},{..._0x4a665c});return await _0x20cd0b[_0xd7b2c3(0x98)]({'lastMessage':(0x0,Mustache_1[_0xd7b2c3(0xac)])(_0x1615c2,_0x20cd0b),'imported':null}),_0x63e08a;}catch(_0x12754d){Sentry[_0xd7b2c3(0xae)](_0x12754d),console['log'](_0x12754d);throw new AppError_1[(_0xd7b2c3(0xac))]('ERR_SENDING_WAPP_MSG');}};exports[a608_0x18bf76(0xac)]=SendWhatsAppMessage;
>>>>>>> ab722bfbcf394d74dd0b99a984c0dcf6ffbcff7f
