'use strict';const a608_0x43ae01=a608_0x45df;(function(_0x5a6ca0,_0x414a17){const _0x46da3f=a608_0x45df,_0x1ddb2d=_0x5a6ca0();while(!![]){try{const _0x52f4e6=-parseInt(_0x46da3f(0x1eb))/0x1+-parseInt(_0x46da3f(0x1ea))/0x2+-parseInt(_0x46da3f(0x1dd))/0x3+parseInt(_0x46da3f(0x1cd))/0x4+-parseInt(_0x46da3f(0x1d7))/0x5+-parseInt(_0x46da3f(0x1d0))/0x6+parseInt(_0x46da3f(0x1e6))/0x7;if(_0x52f4e6===_0x414a17)break;else _0x1ddb2d['push'](_0x1ddb2d['shift']());}catch(_0x1eb5c5){_0x1ddb2d['push'](_0x1ddb2d['shift']());}}}(a608_0x4445,0x9b43f));var __createBinding=this&&this[a608_0x43ae01(0x1e5)]||(Object['create']?function(_0x11b6c5,_0x3d3abf,_0x117427,_0x5c65c2){const _0x59bcfa=a608_0x43ae01;if(_0x5c65c2===undefined)_0x5c65c2=_0x117427;var _0x814e4f=Object[_0x59bcfa(0x1db)](_0x3d3abf,_0x117427);(!_0x814e4f||(_0x59bcfa(0x1cb)in _0x814e4f?!_0x3d3abf[_0x59bcfa(0x1e8)]:_0x814e4f['writable']||_0x814e4f[_0x59bcfa(0x1d5)]))&&(_0x814e4f={'enumerable':!![],'get':function(){return _0x3d3abf[_0x117427];}}),Object[_0x59bcfa(0x1e4)](_0x11b6c5,_0x5c65c2,_0x814e4f);}:function(_0x3d1dc1,_0x44bf9c,_0x3c87a4,_0x2ff23d){if(_0x2ff23d===undefined)_0x2ff23d=_0x3c87a4;_0x3d1dc1[_0x2ff23d]=_0x44bf9c[_0x3c87a4];}),__setModuleDefault=this&&this[a608_0x43ae01(0x1ed)]||(Object[a608_0x43ae01(0x1f5)]?function(_0xcaf2c3,_0xe14895){const _0x5e4d98=a608_0x43ae01;Object[_0x5e4d98(0x1e4)](_0xcaf2c3,_0x5e4d98(0x1cc),{'enumerable':!![],'value':_0xe14895});}:function(_0x12a0f5,_0x1557ec){const _0xf76977=a608_0x43ae01;_0x12a0f5[_0xf76977(0x1cc)]=_0x1557ec;}),__importStar=this&&this[a608_0x43ae01(0x1da)]||function(_0x1d19f2){const _0x591d18=a608_0x43ae01;if(_0x1d19f2&&_0x1d19f2['__esModule'])return _0x1d19f2;var _0x4aba5a={};if(_0x1d19f2!=null){for(var _0x1e01a2 in _0x1d19f2)if(_0x1e01a2!==_0x591d18(0x1cc)&&Object[_0x591d18(0x1d6)]['hasOwnProperty']['call'](_0x1d19f2,_0x1e01a2))__createBinding(_0x4aba5a,_0x1d19f2,_0x1e01a2);}return __setModuleDefault(_0x4aba5a,_0x1d19f2),_0x4aba5a;},__importDefault=this&&this['__importDefault']||function(_0x4e1083){return _0x4e1083&&_0x4e1083['__esModule']?_0x4e1083:{'default':_0x4e1083};};Object[a608_0x43ae01(0x1e4)](exports,a608_0x43ae01(0x1e8),{'value':!![]});const baileys_1=require('@whiskeysockets/baileys'),Sentry=__importStar(require(a608_0x43ae01(0x1d8))),AppError_1=__importDefault(require(a608_0x43ae01(0x1f6))),GetTicketWbot_1=__importDefault(require(a608_0x43ae01(0x1dc))),Message_1=__importDefault(require(a608_0x43ae01(0x1f0))),Contact_1=__importDefault(require(a608_0x43ae01(0x1e0))),lodash_1=require(a608_0x43ae01(0x1de)),Mustache_1=__importDefault(require('../../helpers/Mustache')),SendWhatsAppMessage=async({body:_0x2471d6,ticket:_0x28462d,quotedMsg:_0x3016c1,msdelay:_0xf19643,isPrivate:_0x35fb37,vCard:_0x1cd1d1,isForwarded:isForwarded=![]})=>{const _0x3cc365=a608_0x43ae01;let _0x2e94f2={};const _0x1558e3=await(0x0,GetTicketWbot_1[_0x3cc365(0x1cc)])(_0x28462d),_0x32f862=await Contact_1[_0x3cc365(0x1cc)]['findByPk'](_0x28462d['contactId']);let _0x2c2981;_0x32f862['remoteJid']&&_0x32f862[_0x3cc365(0x1f3)]!==''&&_0x32f862[_0x3cc365(0x1f3)][_0x3cc365(0x1cf)]('@')?_0x2c2981=_0x32f862[_0x3cc365(0x1f3)]:_0x2c2981=_0x32f862[_0x3cc365(0x1f1)]+'@'+(_0x28462d['isGroup']?_0x3cc365(0x1e7):_0x3cc365(0x1ca));if(_0x3016c1){const _0x1e502d=await Message_1[_0x3cc365(0x1cc)][_0x3cc365(0x1ee)]({'where':{'id':_0x3016c1['id']}});if(_0x1e502d){const _0x3b4ac9=JSON['parse'](_0x1e502d[_0x3cc365(0x1f2)]);_0x3b4ac9[_0x3cc365(0x1e2)][_0x3cc365(0x1f4)]!==undefined?_0x2e94f2={'quoted':{'key':_0x3b4ac9['key'],'message':{'extendedTextMessage':_0x3b4ac9[_0x3cc365(0x1e2)][_0x3cc365(0x1f4)]}}}:_0x2e94f2={'quoted':{'key':_0x3b4ac9['key'],'message':{'conversation':_0x3b4ac9[_0x3cc365(0x1e2)][_0x3cc365(0x1ef)]}}};}}if(!(0x0,lodash_1[_0x3cc365(0x1df)])(_0x1cd1d1)){const _0x4e6057=_0x1cd1d1['number'],_0x405a99=_0x1cd1d1['name']['split']('\x20')[0x0],_0x584d96=String(_0x1cd1d1[_0x3cc365(0x1d1)])['replace'](_0x1cd1d1['name']['split']('\x20')[0x0],''),_0x216031=_0x3cc365(0x1c9)+_0x3cc365(0x1e9)+('N:'+_0x584d96+';'+_0x405a99+_0x3cc365(0x1d2))+(_0x3cc365(0x1f7)+_0x1cd1d1['name']+'\x0a')+(_0x3cc365(0x1ec)+_0x4e6057+':+'+_0x4e6057+'\x0a')+_0x3cc365(0x1ce);try{await(0x0,baileys_1[_0x3cc365(0x1e1)])(_0xf19643);const _0x31d6f0=await _0x1558e3['sendMessage'](_0x2c2981,{'contacts':{'displayName':''+_0x1cd1d1[_0x3cc365(0x1d1)],'contacts':[{'vcard':_0x216031}]}});return await _0x28462d[_0x3cc365(0x1e3)]({'lastMessage':(0x0,Mustache_1[_0x3cc365(0x1cc)])(_0x216031,_0x28462d),'imported':null}),_0x31d6f0;}catch(_0xd9d96d){Sentry[_0x3cc365(0x1d3)](_0xd9d96d),console['log'](_0xd9d96d);throw new AppError_1[(_0x3cc365(0x1cc))](_0x3cc365(0x1d4));}};try{await(0x0,baileys_1[_0x3cc365(0x1e1)])(_0xf19643);const _0x4542a5=await _0x1558e3['sendMessage'](_0x2c2981,{'text':(0x0,Mustache_1[_0x3cc365(0x1cc)])(_0x2471d6,_0x28462d),'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded?!![]:![]}},{..._0x2e94f2});return await _0x28462d[_0x3cc365(0x1e3)]({'lastMessage':(0x0,Mustache_1[_0x3cc365(0x1cc)])(_0x2471d6,_0x28462d),'imported':null}),_0x4542a5;}catch(_0x245066){Sentry[_0x3cc365(0x1d3)](_0x245066),console[_0x3cc365(0x1d9)](_0x245066);throw new AppError_1['default'](_0x3cc365(0x1d4));}};function a608_0x45df(_0x5cc96c,_0x5ab600){const _0x44454f=a608_0x4445();return a608_0x45df=function(_0x45df80,_0xeee0d9){_0x45df80=_0x45df80-0x1c9;let _0x4aa5c1=_0x44454f[_0x45df80];return _0x4aa5c1;},a608_0x45df(_0x5cc96c,_0x5ab600);}function a608_0x4445(){const _0xe2aaa1=['update','defineProperty','__createBinding','26495749RmQjcG','g.us','__esModule','VERSION:3.0\x0a','2448130scbCZj','267040QHbupi','TEL;type=CELL;waid=','__setModuleDefault','findOne','conversation','../../models/Message','number','dataJson','remoteJid','extendedTextMessage','create','../../errors/AppError','FN:','BEGIN:VCARD\x0a','s.whatsapp.net','get','default','4564488tpRsMs','END:VCARD','includes','6682866oUWMOk','name',';;;\x0a','captureException','ERR_SENDING_WAPP_MSG','configurable','prototype','5101080NVWadk','@sentry/node','log','__importStar','getOwnPropertyDescriptor','../../helpers/GetTicketWbot','1995390QhHSlW','lodash','isNil','../../models/Contact','delay','message'];a608_0x4445=function(){return _0xe2aaa1;};return a608_0x4445();}exports[a608_0x43ae01(0x1cc)]=SendWhatsAppMessage;