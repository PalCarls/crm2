'use strict';const a509_0x389103=a509_0x350e;function a509_0x350e(_0xb0a3f0,_0x16cf22){const _0x282138=a509_0x2821();return a509_0x350e=function(_0x350edd,_0x530253){_0x350edd=_0x350edd-0x9a;let _0xf08942=_0x282138[_0x350edd];return _0xf08942;},a509_0x350e(_0xb0a3f0,_0x16cf22);}(function(_0x20a1a9,_0x3c5eec){const _0x222cbd=a509_0x350e,_0x56e263=_0x20a1a9();while(!![]){try{const _0x3c7ee2=parseInt(_0x222cbd(0xac))/0x1+-parseInt(_0x222cbd(0xb1))/0x2+-parseInt(_0x222cbd(0xc1))/0x3*(parseInt(_0x222cbd(0x9d))/0x4)+parseInt(_0x222cbd(0xab))/0x5*(parseInt(_0x222cbd(0xb5))/0x6)+-parseInt(_0x222cbd(0xbc))/0x7*(parseInt(_0x222cbd(0xba))/0x8)+-parseInt(_0x222cbd(0xa0))/0x9+parseInt(_0x222cbd(0xc6))/0xa;if(_0x3c7ee2===_0x3c5eec)break;else _0x56e263['push'](_0x56e263['shift']());}catch(_0x11cf7a){_0x56e263['push'](_0x56e263['shift']());}}}(a509_0x2821,0x544a5));var __createBinding=this&&this[a509_0x389103(0xb7)]||(Object['create']?function(_0x32b2c8,_0x33223c,_0x3ccac7,_0x4dc817){const _0x50c780=a509_0x389103;if(_0x4dc817===undefined)_0x4dc817=_0x3ccac7;var _0x15c11f=Object['getOwnPropertyDescriptor'](_0x33223c,_0x3ccac7);(!_0x15c11f||(_0x50c780(0xad)in _0x15c11f?!_0x33223c[_0x50c780(0xa8)]:_0x15c11f[_0x50c780(0xa6)]||_0x15c11f['configurable']))&&(_0x15c11f={'enumerable':!![],'get':function(){return _0x33223c[_0x3ccac7];}}),Object[_0x50c780(0x9b)](_0x32b2c8,_0x4dc817,_0x15c11f);}:function(_0x774f38,_0x1bec8b,_0x218367,_0x200294){if(_0x200294===undefined)_0x200294=_0x218367;_0x774f38[_0x200294]=_0x1bec8b[_0x218367];}),__setModuleDefault=this&&this[a509_0x389103(0xc4)]||(Object[a509_0x389103(0xb0)]?function(_0x245c9a,_0x277461){const _0x270f93=a509_0x389103;Object[_0x270f93(0x9b)](_0x245c9a,_0x270f93(0xb4),{'enumerable':!![],'value':_0x277461});}:function(_0x5ae52b,_0x40d780){const _0x59218c=a509_0x389103;_0x5ae52b[_0x59218c(0xb4)]=_0x40d780;}),__importStar=this&&this[a509_0x389103(0xc0)]||function(_0x75f3bb){const _0x3cd1a8=a509_0x389103;if(_0x75f3bb&&_0x75f3bb['__esModule'])return _0x75f3bb;var _0x478bb7={};if(_0x75f3bb!=null){for(var _0x33d554 in _0x75f3bb)if(_0x33d554!=='default'&&Object[_0x3cd1a8(0xa5)][_0x3cd1a8(0xa3)][_0x3cd1a8(0xbf)](_0x75f3bb,_0x33d554))__createBinding(_0x478bb7,_0x75f3bb,_0x33d554);}return __setModuleDefault(_0x478bb7,_0x75f3bb),_0x478bb7;},__importDefault=this&&this[a509_0x389103(0xbd)]||function(_0x4ca728){const _0x46d846=a509_0x389103;return _0x4ca728&&_0x4ca728[_0x46d846(0xa8)]?_0x4ca728:{'default':_0x4ca728};};Object['defineProperty'](exports,a509_0x389103(0xa8),{'value':!![]});const baileys_1=require('@whiskeysockets/baileys'),Sentry=__importStar(require(a509_0x389103(0xbb))),AppError_1=__importDefault(require(a509_0x389103(0xbe))),GetTicketWbot_1=__importDefault(require(a509_0x389103(0xc7))),Message_1=__importDefault(require(a509_0x389103(0xca))),Contact_1=__importDefault(require(a509_0x389103(0xaa))),lodash_1=require(a509_0x389103(0xa2)),Mustache_1=__importDefault(require(a509_0x389103(0xb8))),SendWhatsAppMessage=async({body:_0x3d1366,ticket:_0x1efe47,quotedMsg:_0x4897bd,msdelay:_0x328680,isPrivate:_0x47b9f2,vCard:_0x46c2e3})=>{const _0x312e79=a509_0x389103;let _0x5ed5ae={};const _0x410e69=await(0x0,GetTicketWbot_1[_0x312e79(0xb4)])(_0x1efe47),_0x789371=await Contact_1[_0x312e79(0xb4)]['findByPk'](_0x1efe47[_0x312e79(0xc5)]);let _0x174904;_0x789371['remoteJid']&&_0x789371['remoteJid']!==''&&_0x789371[_0x312e79(0xaf)][_0x312e79(0xb9)]('@')?_0x174904=_0x789371['remoteJid']:_0x174904=_0x789371[_0x312e79(0xcb)]+'@'+(_0x1efe47[_0x312e79(0xa4)]?_0x312e79(0xc9):'s.whatsapp.net');if(_0x4897bd){const _0x951695=await Message_1['default']['findOne']({'where':{'id':_0x4897bd['id']}});if(_0x951695){const _0x504d04=JSON[_0x312e79(0xb2)](_0x951695[_0x312e79(0xcd)]);_0x5ed5ae={'quoted':{'key':_0x504d04[_0x312e79(0x9c)],'message':{'extendedTextMessage':_0x504d04[_0x312e79(0x9e)][_0x312e79(0xc2)]}}};}}if(!(0x0,lodash_1['isNil'])(_0x46c2e3)){const _0x5c3fdf=_0x46c2e3[_0x312e79(0xcb)],_0x391be4=_0x46c2e3[_0x312e79(0xcc)][_0x312e79(0xc3)]('\x20')[0x0],_0x11023b=String(_0x46c2e3[_0x312e79(0xcc)])['replace'](_0x46c2e3['name'][_0x312e79(0xc3)]('\x20')[0x0],''),_0x4d3651='BEGIN:VCARD\x0a'+_0x312e79(0x9f)+('N:'+_0x11023b+';'+_0x391be4+';;;\x0a')+(_0x312e79(0xc8)+_0x46c2e3[_0x312e79(0xcc)]+'\x0a')+('TEL;type=CELL;waid='+_0x5c3fdf+':+'+_0x5c3fdf+'\x0a')+_0x312e79(0xa9);console[_0x312e79(0xa7)](_0x4d3651);try{await(0x0,baileys_1['delay'])(_0x328680);const _0x24c78e=await _0x410e69[_0x312e79(0x9a)](_0x174904,{'contacts':{'displayName':''+_0x46c2e3['name'],'contacts':[{'vcard':_0x4d3651}]}});return await _0x1efe47[_0x312e79(0xae)]({'lastMessage':(0x0,Mustache_1[_0x312e79(0xb4)])(_0x4d3651,_0x1efe47)}),_0x24c78e;}catch(_0x5c4d42){Sentry[_0x312e79(0xa1)](_0x5c4d42),console[_0x312e79(0xa7)](_0x5c4d42);throw new AppError_1[(_0x312e79(0xb4))](_0x312e79(0xb6));}};try{await(0x0,baileys_1[_0x312e79(0xb3)])(_0x328680);const _0x5ddf2e=await _0x410e69[_0x312e79(0x9a)](_0x174904,{'text':(0x0,Mustache_1['default'])(_0x47b9f2?'‚Äç'+_0x3d1366:_0x3d1366,_0x1efe47)},{..._0x5ed5ae});return await _0x1efe47[_0x312e79(0xae)]({'lastMessage':(0x0,Mustache_1[_0x312e79(0xb4)])(_0x3d1366,_0x1efe47)}),_0x5ddf2e;}catch(_0x2ef4a5){Sentry[_0x312e79(0xa1)](_0x2ef4a5),console['log'](_0x2ef4a5);throw new AppError_1['default'](_0x312e79(0xb6));}};function a509_0x2821(){const _0x223d7e=['remoteJid','create','673076EEpZha','parse','delay','default','5196NUdOgg','ERR_SENDING_WAPP_MSG','__createBinding','../../helpers/Mustache','includes','32YQFEAd','@sentry/node','927703PHGOuM','__importDefault','../../errors/AppError','call','__importStar','957207IkchXP','extendedTextMessage','split','__setModuleDefault','contactId','14868030RRuNFW','../../helpers/GetTicketWbot','FN:','g.us','../../models/Message','number','name','dataJson','sendMessage','defineProperty','key','8oRhuaO','message','VERSION:3.0\x0a','1076994gLMukx','captureException','lodash','hasOwnProperty','isGroup','prototype','writable','log','__esModule','END:VCARD','../../models/Contact','335WPnpaK','424886YpOocB','get','update'];a509_0x2821=function(){return _0x223d7e;};return a509_0x2821();}exports['default']=SendWhatsAppMessage;