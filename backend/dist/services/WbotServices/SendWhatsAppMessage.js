'use strict';const a562_0x434b0a=a562_0x4efb;(function(_0x4896d6,_0x460b9a){const _0x304b1e=a562_0x4efb,_0x5644bb=_0x4896d6();while(!![]){try{const _0x30a710=-parseInt(_0x304b1e(0xdb))/0x1*(-parseInt(_0x304b1e(0xd5))/0x2)+-parseInt(_0x304b1e(0xf4))/0x3*(parseInt(_0x304b1e(0xd8))/0x4)+-parseInt(_0x304b1e(0xf1))/0x5*(parseInt(_0x304b1e(0xf0))/0x6)+parseInt(_0x304b1e(0xec))/0x7+parseInt(_0x304b1e(0x104))/0x8*(parseInt(_0x304b1e(0x105))/0x9)+parseInt(_0x304b1e(0xdf))/0xa+-parseInt(_0x304b1e(0xe6))/0xb*(parseInt(_0x304b1e(0xd6))/0xc);if(_0x30a710===_0x460b9a)break;else _0x5644bb['push'](_0x5644bb['shift']());}catch(_0x4a395a){_0x5644bb['push'](_0x5644bb['shift']());}}}(a562_0x44e3,0x53a70));function a562_0x4efb(_0x1cb9bf,_0x280d59){const _0x44e31b=a562_0x44e3();return a562_0x4efb=function(_0x4efb25,_0x20ee3d){_0x4efb25=_0x4efb25-0xd3;let _0x47ffbe=_0x44e31b[_0x4efb25];return _0x47ffbe;},a562_0x4efb(_0x1cb9bf,_0x280d59);}var __createBinding=this&&this[a562_0x434b0a(0xfb)]||(Object[a562_0x434b0a(0xd3)]?function(_0x1bd906,_0x1efe53,_0x2b48c4,_0x1aa8f4){const _0x456658=a562_0x434b0a;if(_0x1aa8f4===undefined)_0x1aa8f4=_0x2b48c4;var _0x555f72=Object[_0x456658(0xf2)](_0x1efe53,_0x2b48c4);(!_0x555f72||('get'in _0x555f72?!_0x1efe53[_0x456658(0x102)]:_0x555f72[_0x456658(0x100)]||_0x555f72[_0x456658(0xf9)]))&&(_0x555f72={'enumerable':!![],'get':function(){return _0x1efe53[_0x2b48c4];}}),Object[_0x456658(0xf7)](_0x1bd906,_0x1aa8f4,_0x555f72);}:function(_0x541bfa,_0x3bf1c9,_0x45fd64,_0x2b8ba5){if(_0x2b8ba5===undefined)_0x2b8ba5=_0x45fd64;_0x541bfa[_0x2b8ba5]=_0x3bf1c9[_0x45fd64];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x934390,_0x5e832f){const _0x6f3060=a562_0x434b0a;Object[_0x6f3060(0xf7)](_0x934390,_0x6f3060(0xd9),{'enumerable':!![],'value':_0x5e832f});}:function(_0xeb80ad,_0xbf6f10){const _0x3a4003=a562_0x434b0a;_0xeb80ad[_0x3a4003(0xd9)]=_0xbf6f10;}),__importStar=this&&this[a562_0x434b0a(0xf3)]||function(_0x23d402){const _0x3fafd1=a562_0x434b0a;if(_0x23d402&&_0x23d402[_0x3fafd1(0x102)])return _0x23d402;var _0x4f901c={};if(_0x23d402!=null){for(var _0x3b0733 in _0x23d402)if(_0x3b0733!==_0x3fafd1(0xd9)&&Object['prototype'][_0x3fafd1(0xea)]['call'](_0x23d402,_0x3b0733))__createBinding(_0x4f901c,_0x23d402,_0x3b0733);}return __setModuleDefault(_0x4f901c,_0x23d402),_0x4f901c;},__importDefault=this&&this[a562_0x434b0a(0xde)]||function(_0x3f8b0e){return _0x3f8b0e&&_0x3f8b0e['__esModule']?_0x3f8b0e:{'default':_0x3f8b0e};};Object['defineProperty'](exports,a562_0x434b0a(0x102),{'value':!![]});const baileys_1=require(a562_0x434b0a(0xda)),Sentry=__importStar(require(a562_0x434b0a(0x101))),AppError_1=__importDefault(require('../../errors/AppError')),GetTicketWbot_1=__importDefault(require(a562_0x434b0a(0xe2))),Message_1=__importDefault(require('../../models/Message')),Contact_1=__importDefault(require(a562_0x434b0a(0xf5))),lodash_1=require(a562_0x434b0a(0xef)),Mustache_1=__importDefault(require(a562_0x434b0a(0xf6))),SendWhatsAppMessage=async({body:_0x4479e3,ticket:_0x523a7c,quotedMsg:_0x33c4ac,msdelay:_0x47b889,isPrivate:_0x569c65,vCard:_0x5f1cbc,isForwarded:isForwarded=![]})=>{const _0x404b01=a562_0x434b0a;let _0x4389e5={};const _0x765042=await(0x0,GetTicketWbot_1['default'])(_0x523a7c),_0x344390=await Contact_1[_0x404b01(0xd9)]['findByPk'](_0x523a7c[_0x404b01(0x103)]);let _0x556d0b;_0x344390[_0x404b01(0xe9)]&&_0x344390[_0x404b01(0xe9)]!==''&&_0x344390[_0x404b01(0xe9)]['includes']('@')?_0x556d0b=_0x344390['remoteJid']:_0x556d0b=_0x344390[_0x404b01(0xfd)]+'@'+(_0x523a7c['isGroup']?_0x404b01(0xe8):_0x404b01(0xfc));if(_0x33c4ac){const _0x2c7b8d=await Message_1[_0x404b01(0xd9)]['findOne']({'where':{'id':_0x33c4ac['id']}});if(_0x2c7b8d){const _0x35c8cd=JSON[_0x404b01(0xff)](_0x2c7b8d[_0x404b01(0xfa)]);_0x35c8cd[_0x404b01(0xdd)][_0x404b01(0xe4)]!==undefined?_0x4389e5={'quoted':{'key':_0x35c8cd[_0x404b01(0xf8)],'message':{'extendedTextMessage':_0x35c8cd[_0x404b01(0xdd)][_0x404b01(0xe4)]}}}:_0x4389e5={'quoted':{'key':_0x35c8cd['key'],'message':{'conversation':_0x35c8cd['message']['conversation']}}};}}if(!(0x0,lodash_1['isNil'])(_0x5f1cbc)){const _0x1d1026=_0x5f1cbc[_0x404b01(0xfd)],_0x758883=_0x5f1cbc[_0x404b01(0xee)][_0x404b01(0xed)]('\x20')[0x0],_0x440b41=String(_0x5f1cbc[_0x404b01(0xee)])['replace'](_0x5f1cbc[_0x404b01(0xee)][_0x404b01(0xed)]('\x20')[0x0],''),_0x462bdc=_0x404b01(0xd4)+_0x404b01(0xe0)+('N:'+_0x440b41+';'+_0x758883+';;;\x0a')+(_0x404b01(0xe7)+_0x5f1cbc[_0x404b01(0xee)]+'\x0a')+(_0x404b01(0xdc)+_0x1d1026+':+'+_0x1d1026+'\x0a')+'END:VCARD';console[_0x404b01(0xeb)](_0x462bdc);try{await(0x0,baileys_1[_0x404b01(0xe5)])(_0x47b889);const _0x269101=await _0x765042[_0x404b01(0xe1)](_0x556d0b,{'contacts':{'displayName':''+_0x5f1cbc[_0x404b01(0xee)],'contacts':[{'vcard':_0x462bdc}]}});return await _0x523a7c[_0x404b01(0xfe)]({'lastMessage':(0x0,Mustache_1[_0x404b01(0xd9)])(_0x462bdc,_0x523a7c),'imported':null}),_0x269101;}catch(_0x5569fd){Sentry[_0x404b01(0xd7)](_0x5569fd),console[_0x404b01(0xeb)](_0x5569fd);throw new AppError_1[(_0x404b01(0xd9))](_0x404b01(0xe3));}};try{await(0x0,baileys_1['delay'])(_0x47b889);const _0x35b46f=await _0x765042[_0x404b01(0xe1)](_0x556d0b,{'text':(0x0,Mustache_1[_0x404b01(0xd9)])(_0x569c65?'‚Äç'+_0x4479e3:_0x4479e3,_0x523a7c),'contextInfo':{'forwardingScore':isForwarded?0x2:0x0,'isForwarded':isForwarded?!![]:![]}},{..._0x4389e5});return await _0x523a7c[_0x404b01(0xfe)]({'lastMessage':(0x0,Mustache_1['default'])(_0x4479e3,_0x523a7c),'imported':null}),_0x35b46f;}catch(_0x2a7b54){Sentry[_0x404b01(0xd7)](_0x2a7b54),console['log'](_0x2a7b54);throw new AppError_1[(_0x404b01(0xd9))](_0x404b01(0xe3));}};exports[a562_0x434b0a(0xd9)]=SendWhatsAppMessage;function a562_0x44e3(){const _0x20c900=['hasOwnProperty','log','2693607fHMHhc','split','name','lodash','24606xCIPIj','15Jyxrpa','getOwnPropertyDescriptor','__importStar','1553799MPaYDL','../../models/Contact','../../helpers/Mustache','defineProperty','key','configurable','dataJson','__createBinding','s.whatsapp.net','number','update','parse','writable','@sentry/node','__esModule','contactId','16XFDJHr','2916783aUwzbA','create','BEGIN:VCARD\x0a','64726OJQrZD','5040036ZwCScS','captureException','4ouCIox','default','@whiskeysockets/baileys','2yEopiK','TEL;type=CELL;waid=','message','__importDefault','1951780pZvghZ','VERSION:3.0\x0a','sendMessage','../../helpers/GetTicketWbot','ERR_SENDING_WAPP_MSG','extendedTextMessage','delay','11ZHoQOb','FN:','g.us','remoteJid'];a562_0x44e3=function(){return _0x20c900;};return a562_0x44e3();}