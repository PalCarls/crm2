'use strict';const a611_0x527fae=a611_0x2f53;function a611_0x39e9(){const _0x1db449=['2143578XWQjDq','sendMessage','sendPresenceUpdate','floor','.png','contactId','2TNzKuU','158811Jhbxnp','4023344DaaxDt','delay','720950mFsFkc','../../models/Contact','3020346neTLEc','random','3RRWHHU','../../helpers/Mustache','number','image/jpeg','@whiskeysockets/baileys','313900XlbZBB','charAt','g.us','../../helpers/GetTicketWbot','__importDefault','public','default','__esModule','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','includes','unavailable','remoteJid','s.whatsapp.net','2675813nTHsGr','isGroup','10BCsTOk','path','defineProperty'];a611_0x39e9=function(){return _0x1db449;};return a611_0x39e9();}(function(_0x82c37b,_0x5cf06c){const _0x4d0b5e=a611_0x2f53,_0x13ad95=_0x82c37b();while(!![]){try{const _0x14d303=-parseInt(_0x4d0b5e(0xe0))/0x1*(-parseInt(_0x4d0b5e(0xdf))/0x2)+parseInt(_0x4d0b5e(0xe7))/0x3*(-parseInt(_0x4d0b5e(0xc7))/0x4)+parseInt(_0x4d0b5e(0xe3))/0x5+-parseInt(_0x4d0b5e(0xd9))/0x6+-parseInt(_0x4d0b5e(0xd4))/0x7+parseInt(_0x4d0b5e(0xe1))/0x8+-parseInt(_0x4d0b5e(0xe5))/0x9*(-parseInt(_0x4d0b5e(0xd6))/0xa);if(_0x14d303===_0x5cf06c)break;else _0x13ad95['push'](_0x13ad95['shift']());}catch(_0xad699a){_0x13ad95['push'](_0x13ad95['shift']());}}}(a611_0x39e9,0x4efbc));var __importDefault=this&&this[a611_0x527fae(0xcb)]||function(_0x3fdbcb){const _0x5a5b97=a611_0x527fae;return _0x3fdbcb&&_0x3fdbcb[_0x5a5b97(0xce)]?_0x3fdbcb:{'default':_0x3fdbcb};};Object[a611_0x527fae(0xd8)](exports,a611_0x527fae(0xce),{'value':!![]});const baileys_1=require(a611_0x527fae(0xc6)),AppError_1=__importDefault(require('../../errors/AppError')),GetTicketWbot_1=__importDefault(require(a611_0x527fae(0xca))),Mustache_1=__importDefault(require(a611_0x527fae(0xe8))),Contact_1=__importDefault(require(a611_0x527fae(0xe4))),path_1=__importDefault(require(a611_0x527fae(0xd7))),fs_1=__importDefault(require('fs'));function a611_0x2f53(_0x32aa56,_0x2401c5){const _0x39e938=a611_0x39e9();return a611_0x2f53=function(_0x2f53fb,_0x3b63e4){_0x2f53fb=_0x2f53fb-0xc4;let _0x580da0=_0x39e938[_0x2f53fb];return _0x580da0;},a611_0x2f53(_0x32aa56,_0x2401c5);}function makeid(_0x43e38){const _0x3b257d=a611_0x527fae;var _0x17cc02='',_0x7efa71=_0x3b257d(0xcf),_0x2ff7e9=_0x7efa71['length'];for(var _0x2c1a50=0x0;_0x2c1a50<_0x43e38;_0x2c1a50++){_0x17cc02+=_0x7efa71[_0x3b257d(0xc8)](Math[_0x3b257d(0xdc)](Math[_0x3b257d(0xe6)]()*_0x2ff7e9));}return _0x17cc02;}const publicFolder=path_1['default']['resolve'](__dirname,'..','..','..',a611_0x527fae(0xcc)),SendWhatsAppMediaImage=async({ticket:_0xcced7f,url:_0xefbdec,caption:_0x1cf194,msdelay:_0x3624de})=>{const _0x4201ae=a611_0x527fae,_0x119c2a=await(0x0,GetTicketWbot_1[_0x4201ae(0xcd)])(_0xcced7f),_0x47fd65=await Contact_1[_0x4201ae(0xcd)]['findByPk'](_0xcced7f[_0x4201ae(0xde)]);let _0x19af1d;_0x47fd65[_0x4201ae(0xd2)]&&_0x47fd65['remoteJid']!==''&&_0x47fd65[_0x4201ae(0xd2)][_0x4201ae(0xd0)]('@')?_0x19af1d=_0x47fd65[_0x4201ae(0xd2)]:_0x19af1d=_0x47fd65[_0x4201ae(0xc4)]+'@'+(_0xcced7f[_0x4201ae(0xd5)]?_0x4201ae(0xc9):_0x4201ae(0xd3));try{_0x119c2a[_0x4201ae(0xdb)]('available'),await(0x0,baileys_1[_0x4201ae(0xe2)])(_0x3624de);const _0x1ce749=await _0x119c2a[_0x4201ae(0xda)](''+_0x19af1d,{'image':_0xefbdec?{'url':_0xefbdec}:fs_1[_0x4201ae(0xcd)]['readFileSync'](publicFolder+'/company'+_0xcced7f['companyId']+'/'+_0x1cf194+'-'+makeid(0x5)+_0x4201ae(0xdd)),'caption':(0x0,Mustache_1[_0x4201ae(0xcd)])(''+_0x1cf194,_0xcced7f),'mimetype':_0x4201ae(0xc5)});return _0x119c2a[_0x4201ae(0xdb)](_0x4201ae(0xd1)),_0x1ce749;}catch(_0x1fe654){throw new AppError_1[(_0x4201ae(0xcd))]('ERR_SENDING_WAPP_MSG');}};exports['default']=SendWhatsAppMediaImage;