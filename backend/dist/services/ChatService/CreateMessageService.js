'use strict';const a374_0x3c97f5=a374_0x5ed2;(function(_0x2afb90,_0x4d8b39){const _0x3639a1=a374_0x5ed2,_0x523044=_0x2afb90();while(!![]){try{const _0x5497ca=-parseInt(_0x3639a1(0xc7))/0x1+-parseInt(_0x3639a1(0xcf))/0x2*(parseInt(_0x3639a1(0xc8))/0x3)+parseInt(_0x3639a1(0xca))/0x4*(-parseInt(_0x3639a1(0xd2))/0x5)+-parseInt(_0x3639a1(0xbf))/0x6*(parseInt(_0x3639a1(0xc5))/0x7)+parseInt(_0x3639a1(0xce))/0x8*(parseInt(_0x3639a1(0xc1))/0x9)+parseInt(_0x3639a1(0xd7))/0xa*(-parseInt(_0x3639a1(0xd3))/0xb)+parseInt(_0x3639a1(0xc2))/0xc;if(_0x5497ca===_0x4d8b39)break;else _0x523044['push'](_0x523044['shift']());}catch(_0x35f69d){_0x523044['push'](_0x523044['shift']());}}}(a374_0x1a33,0xb3bad));var __importDefault=this&&this[a374_0x3c97f5(0xcb)]||function(_0x421073){const _0x4e5449=a374_0x3c97f5;return _0x421073&&_0x421073[_0x4e5449(0xbe)]?_0x421073:{'default':_0x421073};};Object['defineProperty'](exports,a374_0x3c97f5(0xbe),{'value':!![]});const Chat_1=__importDefault(require(a374_0x3c97f5(0xc3))),ChatMessage_1=__importDefault(require(a374_0x3c97f5(0xd8))),ChatUser_1=__importDefault(require('../../models/ChatUser')),User_1=__importDefault(require(a374_0x3c97f5(0xc6)));function a374_0x5ed2(_0x50a1e5,_0x31255f){const _0x1a3311=a374_0x1a33();return a374_0x5ed2=function(_0x5ed28a,_0x23858b){_0x5ed28a=_0x5ed28a-0xbe;let _0x1ae2db=_0x1a3311[_0x5ed28a];return _0x1ae2db;},a374_0x5ed2(_0x50a1e5,_0x31255f);}async function CreateMessageService({senderId:_0x3c1273,chatId:_0x310eec,message:_0x300510}){const _0x126fbb=a374_0x3c97f5,_0x1730ff=await ChatMessage_1[_0x126fbb(0xd0)][_0x126fbb(0xcd)]({'senderId':_0x3c1273,'chatId':_0x310eec,'message':_0x300510});await _0x1730ff['reload']({'include':[{'model':User_1[_0x126fbb(0xd0)],'as':'sender','attributes':['id',_0x126fbb(0xd4)]},{'model':Chat_1[_0x126fbb(0xd0)],'as':_0x126fbb(0xd5),'include':[{'model':ChatUser_1['default'],'as':_0x126fbb(0xc9)}]}]});const _0x4880a7=await User_1[_0x126fbb(0xd0)][_0x126fbb(0xc4)](_0x3c1273);await _0x1730ff['chat'][_0x126fbb(0xcc)]({'lastMessage':_0x4880a7[_0x126fbb(0xd4)]+':\x20'+_0x300510});const _0x4cc48c=await ChatUser_1[_0x126fbb(0xd0)][_0x126fbb(0xd6)]({'where':{'chatId':_0x310eec}});for(let _0x124c09 of _0x4cc48c){_0x124c09[_0x126fbb(0xd1)]===_0x3c1273?await _0x124c09[_0x126fbb(0xcc)]({'unreads':0x0}):await _0x124c09[_0x126fbb(0xcc)]({'unreads':_0x124c09[_0x126fbb(0xc0)]+0x1});}return _0x1730ff;}function a374_0x1a33(){const _0x2e414f=['users','16vHQISE','__importDefault','update','create','2128tOQEwF','1250TLCdAE','default','userId','262160EBCotx','176737PruFOv','name','chat','findAll','790nDmanK','../../models/ChatMessage','__esModule','18WsbrTx','unreads','32931rtuwCL','40875864ncnoqZ','../../models/Chat','findByPk','1107631Akesfh','../../models/User','1156598DYzins','2559AZfnCg'];a374_0x1a33=function(){return _0x2e414f;};return a374_0x1a33();}exports[a374_0x3c97f5(0xd0)]=CreateMessageService;