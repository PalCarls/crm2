'use strict';function a413_0xcd7f(){const _0x24a655=['27OUCIqj','2760056oBvcca','__importDefault','defineProperty','12dqhzhx','4GPDGhL','sortBy','77MJonHm','104116XuyrEa','4719845arWkwK','534048HVhigY','ASC','../../models/User','50TwSxWS','../../models/ChatMessage','527170cXSKWv','findAndCountAll','sender','../../errors/AppError','1799636OaToVy','__esModule','createdAt','DESC','3tzXEcm','count','UNAUTHORIZED','default','6177934oNOhrm','length','../../models/ChatUser'];a413_0xcd7f=function(){return _0x24a655;};return a413_0xcd7f();}const a413_0x3e3377=a413_0x2b87;(function(_0x3c572e,_0x57a848){const _0x256bb6=a413_0x2b87,_0x52723a=_0x3c572e();while(!![]){try{const _0x34b5f6=parseInt(_0x256bb6(0xa0))/0x1*(-parseInt(_0x256bb6(0xa3))/0x2)+-parseInt(_0x256bb6(0xb2))/0x3*(-parseInt(_0x256bb6(0xae))/0x4)+parseInt(_0x256bb6(0xa8))/0x5*(-parseInt(_0x256bb6(0xa5))/0x6)+parseInt(_0x256bb6(0x98))/0x7+parseInt(_0x256bb6(0x9c))/0x8*(parseInt(_0x256bb6(0x9b))/0x9)+-parseInt(_0x256bb6(0xaa))/0xa*(parseInt(_0x256bb6(0xa2))/0xb)+-parseInt(_0x256bb6(0x9f))/0xc*(parseInt(_0x256bb6(0xa4))/0xd);if(_0x34b5f6===_0x57a848)break;else _0x52723a['push'](_0x52723a['shift']());}catch(_0x1075b5){_0x52723a['push'](_0x52723a['shift']());}}}(a413_0xcd7f,0x83208));var __importDefault=this&&this[a413_0x3e3377(0x9d)]||function(_0x39bc1){const _0x23bb7e=a413_0x3e3377;return _0x39bc1&&_0x39bc1[_0x23bb7e(0xaf)]?_0x39bc1:{'default':_0x39bc1};};Object[a413_0x3e3377(0x9e)](exports,a413_0x3e3377(0xaf),{'value':!![]});const AppError_1=__importDefault(require(a413_0x3e3377(0xad))),ChatMessage_1=__importDefault(require(a413_0x3e3377(0xa9))),ChatUser_1=__importDefault(require(a413_0x3e3377(0x9a))),User_1=__importDefault(require(a413_0x3e3377(0xa7))),lodash_1=require('lodash'),FindMessages=async({chatId:_0x5c56ec,ownerId:_0x1612fa,pageNumber:pageNumber='1'})=>{const _0x2dd31d=a413_0x3e3377,_0x1b8e44=await ChatUser_1[_0x2dd31d(0x97)][_0x2dd31d(0xb3)]({'where':{'chatId':_0x5c56ec,'userId':_0x1612fa}});if(_0x1b8e44===0x0)throw new AppError_1[(_0x2dd31d(0x97))](_0x2dd31d(0x96),0x190);const _0x4fb10b=0x14,_0x5ba505=_0x4fb10b*(+pageNumber-0x1),{count:_0x3fa755,rows:_0x5a99b4}=await ChatMessage_1['default'][_0x2dd31d(0xab)]({'where':{'chatId':_0x5c56ec},'include':[{'model':User_1[_0x2dd31d(0x97)],'as':_0x2dd31d(0xac),'attributes':['id','name']}],'limit':_0x4fb10b,'offset':_0x5ba505,'order':[[_0x2dd31d(0xb0),_0x2dd31d(0xb1)]]}),_0x53aeb6=_0x3fa755>_0x5ba505+_0x5a99b4[_0x2dd31d(0x99)],_0x203e3b=(0x0,lodash_1[_0x2dd31d(0xa1)])(_0x5a99b4,['id',_0x2dd31d(0xa6)]);return{'records':_0x203e3b,'count':_0x3fa755,'hasMore':_0x53aeb6};};function a413_0x2b87(_0x117619,_0x22df52){const _0xcd7fdb=a413_0xcd7f();return a413_0x2b87=function(_0x2b87d1,_0x5ae683){_0x2b87d1=_0x2b87d1-0x96;let _0x12c9f3=_0xcd7fdb[_0x2b87d1];return _0x12c9f3;},a413_0x2b87(_0x117619,_0x22df52);}exports['default']=FindMessages;