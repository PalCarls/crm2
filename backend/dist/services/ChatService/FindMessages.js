'use strict';const a422_0x4dd50e=a422_0x231d;(function(_0x3c931b,_0x15b204){const _0x8f15a1=a422_0x231d,_0x2b7b06=_0x3c931b();while(!![]){try{const _0x1b7b07=-parseInt(_0x8f15a1(0xed))/0x1*(-parseInt(_0x8f15a1(0xdd))/0x2)+-parseInt(_0x8f15a1(0xef))/0x3+parseInt(_0x8f15a1(0xf1))/0x4*(parseInt(_0x8f15a1(0xde))/0x5)+-parseInt(_0x8f15a1(0xe7))/0x6*(-parseInt(_0x8f15a1(0xd8))/0x7)+-parseInt(_0x8f15a1(0xd9))/0x8+parseInt(_0x8f15a1(0xea))/0x9*(parseInt(_0x8f15a1(0xe4))/0xa)+-parseInt(_0x8f15a1(0xda))/0xb;if(_0x1b7b07===_0x15b204)break;else _0x2b7b06['push'](_0x2b7b06['shift']());}catch(_0x52c93f){_0x2b7b06['push'](_0x2b7b06['shift']());}}}(a422_0x25c9,0xcc0e2));function a422_0x25c9(){const _0x60eb50=['../../models/ChatUser','17562oWKKrm','365UArrEu','defineProperty','createdAt','../../models/ChatMessage','ASC','length','10oghrmg','lodash','count','6jPLuQu','__importDefault','name','3620196qhVcbg','UNAUTHORIZED','default','127yqkGYa','sender','2235453cdTUWn','sortBy','80260lquFYK','findAndCountAll','__esModule','../../errors/AppError','../../models/User','5308009ieLaiv','9706856EfaFFY','10407595iJWCrd','DESC'];a422_0x25c9=function(){return _0x60eb50;};return a422_0x25c9();}function a422_0x231d(_0x4c3496,_0x789c77){const _0x25c9bf=a422_0x25c9();return a422_0x231d=function(_0x231d05,_0x43351d){_0x231d05=_0x231d05-0xd4;let _0x395a0c=_0x25c9bf[_0x231d05];return _0x395a0c;},a422_0x231d(_0x4c3496,_0x789c77);}var __importDefault=this&&this[a422_0x4dd50e(0xe8)]||function(_0x4ed36d){const _0x507467=a422_0x4dd50e;return _0x4ed36d&&_0x4ed36d[_0x507467(0xd5)]?_0x4ed36d:{'default':_0x4ed36d};};Object[a422_0x4dd50e(0xdf)](exports,a422_0x4dd50e(0xd5),{'value':!![]});const AppError_1=__importDefault(require(a422_0x4dd50e(0xd6))),ChatMessage_1=__importDefault(require(a422_0x4dd50e(0xe1))),ChatUser_1=__importDefault(require(a422_0x4dd50e(0xdc))),User_1=__importDefault(require(a422_0x4dd50e(0xd7))),lodash_1=require(a422_0x4dd50e(0xe5)),FindMessages=async({chatId:_0x1ebbd8,ownerId:_0xed1071,pageNumber:pageNumber='1'})=>{const _0xb63ab0=a422_0x4dd50e,_0x1951ee=await ChatUser_1[_0xb63ab0(0xec)][_0xb63ab0(0xe6)]({'where':{'chatId':_0x1ebbd8,'userId':_0xed1071}});if(_0x1951ee===0x0)throw new AppError_1['default'](_0xb63ab0(0xeb),0x190);const _0x590b91=0x14,_0x1eb50c=_0x590b91*(+pageNumber-0x1),{count:_0x2db0ad,rows:_0x1ce4a1}=await ChatMessage_1['default'][_0xb63ab0(0xd4)]({'where':{'chatId':_0x1ebbd8},'include':[{'model':User_1[_0xb63ab0(0xec)],'as':_0xb63ab0(0xee),'attributes':['id',_0xb63ab0(0xe9)]}],'limit':_0x590b91,'offset':_0x1eb50c,'order':[[_0xb63ab0(0xe0),_0xb63ab0(0xdb)]]}),_0x9709b5=_0x2db0ad>_0x1eb50c+_0x1ce4a1[_0xb63ab0(0xe3)],_0x2608d9=(0x0,lodash_1[_0xb63ab0(0xf0)])(_0x1ce4a1,['id',_0xb63ab0(0xe2)]);return{'records':_0x2608d9,'count':_0x2db0ad,'hasMore':_0x9709b5};};exports[a422_0x4dd50e(0xec)]=FindMessages;