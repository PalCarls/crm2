'use strict';const a396_0x18c2d5=a396_0x3cdc;function a396_0x3cdc(_0x418f05,_0x477d14){const _0xe26ade=a396_0xe26a();return a396_0x3cdc=function(_0x3cdc5b,_0x56fefd){_0x3cdc5b=_0x3cdc5b-0x16b;let _0xee1bf5=_0xe26ade[_0x3cdc5b];return _0xee1bf5;},a396_0x3cdc(_0x418f05,_0x477d14);}(function(_0x4d386e,_0x30be0f){const _0x310f03=a396_0x3cdc,_0x3c3a10=_0x4d386e();while(!![]){try{const _0x39f0ea=-parseInt(_0x310f03(0x17e))/0x1*(parseInt(_0x310f03(0x175))/0x2)+-parseInt(_0x310f03(0x172))/0x3*(-parseInt(_0x310f03(0x16b))/0x4)+-parseInt(_0x310f03(0x179))/0x5*(parseInt(_0x310f03(0x176))/0x6)+-parseInt(_0x310f03(0x17a))/0x7*(-parseInt(_0x310f03(0x17d))/0x8)+parseInt(_0x310f03(0x181))/0x9+parseInt(_0x310f03(0x17c))/0xa*(parseInt(_0x310f03(0x16e))/0xb)+-parseInt(_0x310f03(0x170))/0xc;if(_0x39f0ea===_0x30be0f)break;else _0x3c3a10['push'](_0x3c3a10['shift']());}catch(_0x5a9cb6){_0x3c3a10['push'](_0x3c3a10['shift']());}}}(a396_0xe26a,0x65a00));function a396_0xe26a(){const _0x24268a=['99cZobAz','name','2313036tGnLuG','sortBy','9IjAmhp','../../models/ChatMessage','count','2hLOJlW','6dBpsXm','findAndCountAll','__importDefault','619295xlBqsn','329546rDjQlp','../../errors/AppError','608250PstMnZ','56cjYVFF','359012gDlRcT','defineProperty','createdAt','1602162pucKun','../../models/ChatUser','DESC','../../models/User','default','length','49188iAHsYx','lodash','__esModule'];a396_0xe26a=function(){return _0x24268a;};return a396_0xe26a();}var __importDefault=this&&this[a396_0x18c2d5(0x178)]||function(_0x4332bd){const _0x1e0209=a396_0x18c2d5;return _0x4332bd&&_0x4332bd[_0x1e0209(0x16d)]?_0x4332bd:{'default':_0x4332bd};};Object[a396_0x18c2d5(0x17f)](exports,a396_0x18c2d5(0x16d),{'value':!![]});const AppError_1=__importDefault(require(a396_0x18c2d5(0x17b))),ChatMessage_1=__importDefault(require(a396_0x18c2d5(0x173))),ChatUser_1=__importDefault(require(a396_0x18c2d5(0x182))),User_1=__importDefault(require(a396_0x18c2d5(0x184))),lodash_1=require(a396_0x18c2d5(0x16c)),FindMessages=async({chatId:_0xa5d422,ownerId:_0x9119ad,pageNumber:pageNumber='1'})=>{const _0x35d8f2=a396_0x18c2d5,_0x4fd5ab=await ChatUser_1['default'][_0x35d8f2(0x174)]({'where':{'chatId':_0xa5d422,'userId':_0x9119ad}});if(_0x4fd5ab===0x0)throw new AppError_1[(_0x35d8f2(0x185))]('UNAUTHORIZED',0x190);const _0x1238ab=0x14,_0x28e7d0=_0x1238ab*(+pageNumber-0x1),{count:_0x589c56,rows:_0x543c5a}=await ChatMessage_1[_0x35d8f2(0x185)][_0x35d8f2(0x177)]({'where':{'chatId':_0xa5d422},'include':[{'model':User_1[_0x35d8f2(0x185)],'as':'sender','attributes':['id',_0x35d8f2(0x16f)]}],'limit':_0x1238ab,'offset':_0x28e7d0,'order':[[_0x35d8f2(0x180),_0x35d8f2(0x183)]]}),_0x184a5d=_0x589c56>_0x28e7d0+_0x543c5a[_0x35d8f2(0x186)],_0x203afb=(0x0,lodash_1[_0x35d8f2(0x171)])(_0x543c5a,['id','ASC']);return{'records':_0x203afb,'count':_0x589c56,'hasMore':_0x184a5d};};exports[a396_0x18c2d5(0x185)]=FindMessages;