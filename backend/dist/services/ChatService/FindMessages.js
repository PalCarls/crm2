'use strict';const a363_0x311924=a363_0x1f55;(function(_0x384cfe,_0xcb497){const _0x545f92=a363_0x1f55,_0x13683f=_0x384cfe();while(!![]){try{const _0x610487=parseInt(_0x545f92(0x17c))/0x1+parseInt(_0x545f92(0x16e))/0x2*(parseInt(_0x545f92(0x169))/0x3)+-parseInt(_0x545f92(0x172))/0x4*(-parseInt(_0x545f92(0x16c))/0x5)+parseInt(_0x545f92(0x16f))/0x6*(parseInt(_0x545f92(0x170))/0x7)+-parseInt(_0x545f92(0x173))/0x8*(-parseInt(_0x545f92(0x179))/0x9)+-parseInt(_0x545f92(0x16b))/0xa*(parseInt(_0x545f92(0x178))/0xb)+parseInt(_0x545f92(0x17b))/0xc*(-parseInt(_0x545f92(0x182))/0xd);if(_0x610487===_0xcb497)break;else _0x13683f['push'](_0x13683f['shift']());}catch(_0x2e4cbc){_0x13683f['push'](_0x13683f['shift']());}}}(a363_0x23a1,0x8dcba));function a363_0x1f55(_0x5dc3bb,_0x4daff9){const _0x23a15a=a363_0x23a1();return a363_0x1f55=function(_0x1f5581,_0x383ea3){_0x1f5581=_0x1f5581-0x169;let _0x447287=_0x23a15a[_0x1f5581];return _0x447287;},a363_0x1f55(_0x5dc3bb,_0x4daff9);}function a363_0x23a1(){const _0x4c469f=['../../models/ChatMessage','count','34411DzHMiB','name','387wcUflL','default','9767710kFFmzs','5790585IOdfFQ','defineProperty','9314ImwsJa','18ZPfOsj','392133yCCObG','../../errors/AppError','4yYOkKG','1097640PVjPlW','../../models/User','__esModule','ASC','lodash','11LsnPrp','63JaIDDF','../../models/ChatUser','7572vLuXxu','340460FaUYSq','__importDefault','findAndCountAll','sortBy'];a363_0x23a1=function(){return _0x4c469f;};return a363_0x23a1();}var __importDefault=this&&this[a363_0x311924(0x17d)]||function(_0x404012){const _0x176b5e=a363_0x311924;return _0x404012&&_0x404012[_0x176b5e(0x175)]?_0x404012:{'default':_0x404012};};Object[a363_0x311924(0x16d)](exports,a363_0x311924(0x175),{'value':!![]});const AppError_1=__importDefault(require(a363_0x311924(0x171))),ChatMessage_1=__importDefault(require(a363_0x311924(0x180))),ChatUser_1=__importDefault(require(a363_0x311924(0x17a))),User_1=__importDefault(require(a363_0x311924(0x174))),lodash_1=require(a363_0x311924(0x177)),FindMessages=async({chatId:_0x20f418,ownerId:_0x195bc3,pageNumber:pageNumber='1'})=>{const _0x17eff9=a363_0x311924,_0x4ee06b=await ChatUser_1[_0x17eff9(0x16a)][_0x17eff9(0x181)]({'where':{'chatId':_0x20f418,'userId':_0x195bc3}});if(_0x4ee06b===0x0)throw new AppError_1['default']('UNAUTHORIZED',0x190);const _0x280d62=0x14,_0x40c0d5=_0x280d62*(+pageNumber-0x1),{count:_0x1b88c0,rows:_0x14ea43}=await ChatMessage_1[_0x17eff9(0x16a)][_0x17eff9(0x17e)]({'where':{'chatId':_0x20f418},'include':[{'model':User_1[_0x17eff9(0x16a)],'as':'sender','attributes':['id',_0x17eff9(0x183)]}],'limit':_0x280d62,'offset':_0x40c0d5,'order':[['createdAt','DESC']]}),_0x5ea75c=_0x1b88c0>_0x40c0d5+_0x14ea43['length'],_0x437697=(0x0,lodash_1[_0x17eff9(0x17f)])(_0x14ea43,['id',_0x17eff9(0x176)]);return{'records':_0x437697,'count':_0x1b88c0,'hasMore':_0x5ea75c};};exports[a363_0x311924(0x16a)]=FindMessages;