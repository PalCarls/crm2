'use strict';const a422_0x3ca136=a422_0x3927;(function(_0xc7bcd9,_0x3f1ec2){const _0x274224=a422_0x3927,_0x1b68fe=_0xc7bcd9();while(!![]){try{const _0x202a60=parseInt(_0x274224(0x1e1))/0x1+-parseInt(_0x274224(0x1eb))/0x2+parseInt(_0x274224(0x1ee))/0x3*(-parseInt(_0x274224(0x1e6))/0x4)+parseInt(_0x274224(0x1e5))/0x5+parseInt(_0x274224(0x1ef))/0x6+parseInt(_0x274224(0x1f1))/0x7+-parseInt(_0x274224(0x1e9))/0x8*(-parseInt(_0x274224(0x1e4))/0x9);if(_0x202a60===_0x3f1ec2)break;else _0x1b68fe['push'](_0x1b68fe['shift']());}catch(_0x5b18a6){_0x1b68fe['push'](_0x1b68fe['shift']());}}}(a422_0x335b,0x96c24));function a422_0x3927(_0x52c028,_0x290735){const _0x335b0b=a422_0x335b();return a422_0x3927=function(_0x39272f,_0x4f7832){_0x39272f=_0x39272f-0x1de;let _0x510081=_0x335b0b[_0x39272f];return _0x510081;},a422_0x3927(_0x52c028,_0x290735);}var __importDefault=this&&this['__importDefault']||function(_0x112886){const _0x19a06c=a422_0x3927;return _0x112886&&_0x112886[_0x19a06c(0x1e2)]?_0x112886:{'default':_0x112886};};function a422_0x335b(){const _0x631f1f=['createdAt','3944xhrudW','../../errors/AppError','1250886RBDHpv','default','UNAUTHORIZED','2314131vxPgWk','5747124iitVQH','count','1351196qScdKR','lodash','../../models/User','sortBy','DESC','333628YUIHRs','__esModule','length','1773GfGQpl','2163485yITZbc','4JmvtCb','findAndCountAll'];a422_0x335b=function(){return _0x631f1f;};return a422_0x335b();}Object['defineProperty'](exports,a422_0x3ca136(0x1e2),{'value':!![]});const AppError_1=__importDefault(require(a422_0x3ca136(0x1ea))),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require('../../models/ChatUser')),User_1=__importDefault(require(a422_0x3ca136(0x1de))),lodash_1=require(a422_0x3ca136(0x1f2)),FindMessages=async({chatId:_0x27b86a,ownerId:_0x341730,pageNumber:pageNumber='1'})=>{const _0x3bc9f1=a422_0x3ca136,_0x51dcdd=await ChatUser_1['default'][_0x3bc9f1(0x1f0)]({'where':{'chatId':_0x27b86a,'userId':_0x341730}});if(_0x51dcdd===0x0)throw new AppError_1[(_0x3bc9f1(0x1ec))](_0x3bc9f1(0x1ed),0x190);const _0x1a196f=0x14,_0xd8296=_0x1a196f*(+pageNumber-0x1),{count:_0x4ccb8e,rows:_0xe70024}=await ChatMessage_1['default'][_0x3bc9f1(0x1e7)]({'where':{'chatId':_0x27b86a},'include':[{'model':User_1['default'],'as':'sender','attributes':['id','name']}],'limit':_0x1a196f,'offset':_0xd8296,'order':[[_0x3bc9f1(0x1e8),_0x3bc9f1(0x1e0)]]}),_0x1f2c11=_0x4ccb8e>_0xd8296+_0xe70024[_0x3bc9f1(0x1e3)],_0x1affa3=(0x0,lodash_1[_0x3bc9f1(0x1df)])(_0xe70024,['id','ASC']);return{'records':_0x1affa3,'count':_0x4ccb8e,'hasMore':_0x1f2c11};};exports[a422_0x3ca136(0x1ec)]=FindMessages;