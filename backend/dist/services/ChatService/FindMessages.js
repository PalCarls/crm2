'use strict';const a413_0x3499fb=a413_0x1b75;(function(_0xc29c57,_0x873f28){const _0x4ecc42=a413_0x1b75,_0x23a5f7=_0xc29c57();while(!![]){try{const _0x483bb4=parseInt(_0x4ecc42(0x1e2))/0x1+parseInt(_0x4ecc42(0x1d8))/0x2+parseInt(_0x4ecc42(0x1db))/0x3+parseInt(_0x4ecc42(0x1e6))/0x4*(-parseInt(_0x4ecc42(0x1e8))/0x5)+-parseInt(_0x4ecc42(0x1e7))/0x6+-parseInt(_0x4ecc42(0x1de))/0x7+-parseInt(_0x4ecc42(0x1da))/0x8;if(_0x483bb4===_0x873f28)break;else _0x23a5f7['push'](_0x23a5f7['shift']());}catch(_0x4dafb6){_0x23a5f7['push'](_0x23a5f7['shift']());}}}(a413_0x3b3a,0x44db0));function a413_0x1b75(_0x5b22da,_0x1632f2){const _0x3b3acf=a413_0x3b3a();return a413_0x1b75=function(_0x1b7522,_0x4cc214){_0x1b7522=_0x1b7522-0x1d6;let _0x1b0ce8=_0x3b3acf[_0x1b7522];return _0x1b0ce8;},a413_0x1b75(_0x5b22da,_0x1632f2);}var __importDefault=this&&this['__importDefault']||function(_0x37348d){const _0x5e1b63=a413_0x1b75;return _0x37348d&&_0x37348d[_0x5e1b63(0x1e1)]?_0x37348d:{'default':_0x37348d};};function a413_0x3b3a(){const _0x48e5ec=['478000jYhEOp','length','5917912xdDuft','1103586RvGojR','defineProperty','sender','25522xJdMZF','UNAUTHORIZED','sortBy','__esModule','532515dalClb','ASC','createdAt','../../models/User','20xzKngv','410490kiHQJx','45545HrWMJh','name','default','lodash','findAndCountAll'];a413_0x3b3a=function(){return _0x48e5ec;};return a413_0x3b3a();}Object[a413_0x3499fb(0x1dc)](exports,a413_0x3499fb(0x1e1),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require('../../models/ChatUser')),User_1=__importDefault(require(a413_0x3499fb(0x1e5))),lodash_1=require(a413_0x3499fb(0x1d6)),FindMessages=async({chatId:_0x93cfd3,ownerId:_0x263814,pageNumber:pageNumber='1'})=>{const _0x8d22ef=a413_0x3499fb,_0x8d34b=await ChatUser_1['default']['count']({'where':{'chatId':_0x93cfd3,'userId':_0x263814}});if(_0x8d34b===0x0)throw new AppError_1[(_0x8d22ef(0x1ea))](_0x8d22ef(0x1df),0x190);const _0xf30ab5=0x14,_0xedb0a7=_0xf30ab5*(+pageNumber-0x1),{count:_0x35f2fa,rows:_0x1dac59}=await ChatMessage_1[_0x8d22ef(0x1ea)][_0x8d22ef(0x1d7)]({'where':{'chatId':_0x93cfd3},'include':[{'model':User_1['default'],'as':_0x8d22ef(0x1dd),'attributes':['id',_0x8d22ef(0x1e9)]}],'limit':_0xf30ab5,'offset':_0xedb0a7,'order':[[_0x8d22ef(0x1e4),'DESC']]}),_0x3e0e86=_0x35f2fa>_0xedb0a7+_0x1dac59[_0x8d22ef(0x1d9)],_0x3f3d30=(0x0,lodash_1[_0x8d22ef(0x1e0)])(_0x1dac59,['id',_0x8d22ef(0x1e3)]);return{'records':_0x3f3d30,'count':_0x35f2fa,'hasMore':_0x3e0e86};};exports['default']=FindMessages;