'use strict';function a429_0x34d9(){const _0x45bec4=['1481013AAUfVS','643662sFXchG','4xVtnHD','default','1852135qeEXnW','UNAUTHORIZED','DESC','lodash','createdAt','findAndCountAll','18945EmdFCn','14612480yVrbfO','../../models/User','__esModule','name','../../models/ChatUser','84VlEMDg','count','1263953lVCTcM','sender','../../errors/AppError','__importDefault','863434stJucy','1240DXnSFx','sortBy','defineProperty'];a429_0x34d9=function(){return _0x45bec4;};return a429_0x34d9();}const a429_0x270a42=a429_0x420e;(function(_0x2d15fb,_0x1543dd){const _0x41a97d=a429_0x420e,_0x5b5ecb=_0x2d15fb();while(!![]){try{const _0x1d382b=-parseInt(_0x41a97d(0x17d))/0x1+parseInt(_0x41a97d(0x181))/0x2+-parseInt(_0x41a97d(0x185))/0x3+-parseInt(_0x41a97d(0x16d))/0x4*(parseInt(_0x41a97d(0x16f))/0x5)+-parseInt(_0x41a97d(0x186))/0x6*(-parseInt(_0x41a97d(0x17b))/0x7)+parseInt(_0x41a97d(0x182))/0x8*(-parseInt(_0x41a97d(0x175))/0x9)+parseInt(_0x41a97d(0x176))/0xa;if(_0x1d382b===_0x1543dd)break;else _0x5b5ecb['push'](_0x5b5ecb['shift']());}catch(_0x5489fc){_0x5b5ecb['push'](_0x5b5ecb['shift']());}}}(a429_0x34d9,0xb13cb));var __importDefault=this&&this[a429_0x270a42(0x180)]||function(_0xa51723){return _0xa51723&&_0xa51723['__esModule']?_0xa51723:{'default':_0xa51723};};function a429_0x420e(_0x389f88,_0x10c640){const _0x34d95e=a429_0x34d9();return a429_0x420e=function(_0x420e10,_0x86823){_0x420e10=_0x420e10-0x16d;let _0x13a320=_0x34d95e[_0x420e10];return _0x13a320;},a429_0x420e(_0x389f88,_0x10c640);}Object[a429_0x270a42(0x184)](exports,a429_0x270a42(0x178),{'value':!![]});const AppError_1=__importDefault(require(a429_0x270a42(0x17f))),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require(a429_0x270a42(0x17a))),User_1=__importDefault(require(a429_0x270a42(0x177))),lodash_1=require(a429_0x270a42(0x172)),FindMessages=async({chatId:_0x14abaf,ownerId:_0x3b70d4,pageNumber:pageNumber='1'})=>{const _0x465650=a429_0x270a42,_0x2beaeb=await ChatUser_1[_0x465650(0x16e)][_0x465650(0x17c)]({'where':{'chatId':_0x14abaf,'userId':_0x3b70d4}});if(_0x2beaeb===0x0)throw new AppError_1[(_0x465650(0x16e))](_0x465650(0x170),0x190);const _0x2fe53e=0x14,_0x11c17e=_0x2fe53e*(+pageNumber-0x1),{count:_0x2f36c4,rows:_0x5bb0ae}=await ChatMessage_1['default'][_0x465650(0x174)]({'where':{'chatId':_0x14abaf},'include':[{'model':User_1['default'],'as':_0x465650(0x17e),'attributes':['id',_0x465650(0x179)]}],'limit':_0x2fe53e,'offset':_0x11c17e,'order':[[_0x465650(0x173),_0x465650(0x171)]]}),_0x362f21=_0x2f36c4>_0x11c17e+_0x5bb0ae['length'],_0x584dae=(0x0,lodash_1[_0x465650(0x183)])(_0x5bb0ae,['id','ASC']);return{'records':_0x584dae,'count':_0x2f36c4,'hasMore':_0x362f21};};exports[a429_0x270a42(0x16e)]=FindMessages;