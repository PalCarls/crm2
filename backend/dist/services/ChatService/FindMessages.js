'use strict';const a391_0x1e5632=a391_0x3f58;(function(_0x3a64cd,_0x4582f3){const _0x3e3909=a391_0x3f58,_0x1fc1b0=_0x3a64cd();while(!![]){try{const _0x519b87=parseInt(_0x3e3909(0xeb))/0x1*(-parseInt(_0x3e3909(0xdb))/0x2)+parseInt(_0x3e3909(0xe2))/0x3+-parseInt(_0x3e3909(0xf2))/0x4*(-parseInt(_0x3e3909(0xec))/0x5)+-parseInt(_0x3e3909(0xe3))/0x6*(-parseInt(_0x3e3909(0xe8))/0x7)+-parseInt(_0x3e3909(0xdd))/0x8*(-parseInt(_0x3e3909(0xd9))/0x9)+parseInt(_0x3e3909(0xe5))/0xa+-parseInt(_0x3e3909(0xda))/0xb*(parseInt(_0x3e3909(0xdc))/0xc);if(_0x519b87===_0x4582f3)break;else _0x1fc1b0['push'](_0x1fc1b0['shift']());}catch(_0x2251d6){_0x1fc1b0['push'](_0x1fc1b0['shift']());}}}(a391_0x4efb,0x2f868));function a391_0x4efb(){const _0x5d555e=['length','sender','count','68MolUuO','9603AaAgpC','11kTBBpl','113576krGdAO','7877688mPVnWa','2408MfqFCf','../../errors/AppError','UNAUTHORIZED','createdAt','__esModule','452640kSfMUS','21492JTAVYm','DESC','652780sfHNut','ASC','../../models/ChatUser','679HHIjvZ','../../models/User','../../models/ChatMessage','4fgMICC','56915YDhPHV','__importDefault','default'];a391_0x4efb=function(){return _0x5d555e;};return a391_0x4efb();}var __importDefault=this&&this[a391_0x1e5632(0xed)]||function(_0x56c690){const _0x34663b=a391_0x1e5632;return _0x56c690&&_0x56c690[_0x34663b(0xe1)]?_0x56c690:{'default':_0x56c690};};Object['defineProperty'](exports,'__esModule',{'value':!![]});function a391_0x3f58(_0x5ec9c5,_0x2a7aac){const _0x4efb3e=a391_0x4efb();return a391_0x3f58=function(_0x3f5847,_0x35a129){_0x3f5847=_0x3f5847-0xd9;let _0x3c0d10=_0x4efb3e[_0x3f5847];return _0x3c0d10;},a391_0x3f58(_0x5ec9c5,_0x2a7aac);}const AppError_1=__importDefault(require(a391_0x1e5632(0xde))),ChatMessage_1=__importDefault(require(a391_0x1e5632(0xea))),ChatUser_1=__importDefault(require(a391_0x1e5632(0xe7))),User_1=__importDefault(require(a391_0x1e5632(0xe9))),lodash_1=require('lodash'),FindMessages=async({chatId:_0x1978cb,ownerId:_0x4671e0,pageNumber:pageNumber='1'})=>{const _0x3f93a1=a391_0x1e5632,_0x3c892c=await ChatUser_1[_0x3f93a1(0xee)][_0x3f93a1(0xf1)]({'where':{'chatId':_0x1978cb,'userId':_0x4671e0}});if(_0x3c892c===0x0)throw new AppError_1['default'](_0x3f93a1(0xdf),0x190);const _0x56faec=0x14,_0x421b5f=_0x56faec*(+pageNumber-0x1),{count:_0x310479,rows:_0x5b01ce}=await ChatMessage_1[_0x3f93a1(0xee)]['findAndCountAll']({'where':{'chatId':_0x1978cb},'include':[{'model':User_1[_0x3f93a1(0xee)],'as':_0x3f93a1(0xf0),'attributes':['id','name']}],'limit':_0x56faec,'offset':_0x421b5f,'order':[[_0x3f93a1(0xe0),_0x3f93a1(0xe4)]]}),_0x1a9afe=_0x310479>_0x421b5f+_0x5b01ce[_0x3f93a1(0xef)],_0x5b3597=(0x0,lodash_1['sortBy'])(_0x5b01ce,['id',_0x3f93a1(0xe6)]);return{'records':_0x5b3597,'count':_0x310479,'hasMore':_0x1a9afe};};exports[a391_0x1e5632(0xee)]=FindMessages;