'use strict';const a378_0x304ac2=a378_0x286e;function a378_0x5082(){const _0x441535=['__importDefault','sortBy','../../models/User','1010dKTQIX','sender','13vAPrGi','1069209suLKam','name','12905568uSArOf','defineProperty','DESC','1939LEoxiG','9626622gIsQNv','195604uBpRrv','lodash','ASC','count','69121110XlOtft','32024qBBnMn','createdAt','findAndCountAll','length','__esModule','default','14488lzZZkH'];a378_0x5082=function(){return _0x441535;};return a378_0x5082();}(function(_0x1bf00d,_0x53fc83){const _0x276bab=a378_0x286e,_0x4ce35e=_0x1bf00d();while(!![]){try{const _0x597dea=parseInt(_0x276bab(0x1fb))/0x1*(-parseInt(_0x276bab(0x203))/0x2)+parseInt(_0x276bab(0x1fc))/0x3+parseInt(_0x276bab(0x1ef))/0x4*(-parseInt(_0x276bab(0x1f9))/0x5)+-parseInt(_0x276bab(0x202))/0x6+parseInt(_0x276bab(0x201))/0x7*(-parseInt(_0x276bab(0x1f5))/0x8)+-parseInt(_0x276bab(0x1fe))/0x9+parseInt(_0x276bab(0x1ee))/0xa;if(_0x597dea===_0x53fc83)break;else _0x4ce35e['push'](_0x4ce35e['shift']());}catch(_0xfba988){_0x4ce35e['push'](_0x4ce35e['shift']());}}}(a378_0x5082,0xcd0a0));var __importDefault=this&&this[a378_0x304ac2(0x1f6)]||function(_0xa28c10){const _0x1ba514=a378_0x304ac2;return _0xa28c10&&_0xa28c10[_0x1ba514(0x1f3)]?_0xa28c10:{'default':_0xa28c10};};Object[a378_0x304ac2(0x1ff)](exports,a378_0x304ac2(0x1f3),{'value':!![]});function a378_0x286e(_0x4cb214,_0x3b4df4){const _0x50821b=a378_0x5082();return a378_0x286e=function(_0x286eee,_0x231caf){_0x286eee=_0x286eee-0x1ee;let _0x481214=_0x50821b[_0x286eee];return _0x481214;},a378_0x286e(_0x4cb214,_0x3b4df4);}const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require('../../models/ChatUser')),User_1=__importDefault(require(a378_0x304ac2(0x1f8))),lodash_1=require(a378_0x304ac2(0x204)),FindMessages=async({chatId:_0x2daf0e,ownerId:_0x2e07f9,pageNumber:pageNumber='1'})=>{const _0x36f312=a378_0x304ac2,_0x3c7fe8=await ChatUser_1[_0x36f312(0x1f4)][_0x36f312(0x206)]({'where':{'chatId':_0x2daf0e,'userId':_0x2e07f9}});if(_0x3c7fe8===0x0)throw new AppError_1['default']('UNAUTHORIZED',0x190);const _0xbf0e34=0x14,_0x3f6fd7=_0xbf0e34*(+pageNumber-0x1),{count:_0x50b37b,rows:_0x435680}=await ChatMessage_1['default'][_0x36f312(0x1f1)]({'where':{'chatId':_0x2daf0e},'include':[{'model':User_1['default'],'as':_0x36f312(0x1fa),'attributes':['id',_0x36f312(0x1fd)]}],'limit':_0xbf0e34,'offset':_0x3f6fd7,'order':[[_0x36f312(0x1f0),_0x36f312(0x200)]]}),_0x282d3b=_0x50b37b>_0x3f6fd7+_0x435680[_0x36f312(0x1f2)],_0x45a676=(0x0,lodash_1[_0x36f312(0x1f7)])(_0x435680,['id',_0x36f312(0x205)]);return{'records':_0x45a676,'count':_0x50b37b,'hasMore':_0x282d3b};};exports[a378_0x304ac2(0x1f4)]=FindMessages;