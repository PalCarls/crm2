'use strict';const a378_0x392302=a378_0x28a4;function a378_0x28a4(_0x31cd2f,_0x3f2228){const _0x312da2=a378_0x312d();return a378_0x28a4=function(_0x28a4c4,_0x5a893d){_0x28a4c4=_0x28a4c4-0x11b;let _0x3ba1b8=_0x312da2[_0x28a4c4];return _0x3ba1b8;},a378_0x28a4(_0x31cd2f,_0x3f2228);}(function(_0x48f26b,_0x3c4ae6){const _0x35507=a378_0x28a4,_0x4f4e8c=_0x48f26b();while(!![]){try{const _0xa49825=-parseInt(_0x35507(0x11e))/0x1*(-parseInt(_0x35507(0x125))/0x2)+-parseInt(_0x35507(0x124))/0x3*(parseInt(_0x35507(0x126))/0x4)+-parseInt(_0x35507(0x12c))/0x5+parseInt(_0x35507(0x11b))/0x6+parseInt(_0x35507(0x11c))/0x7*(parseInt(_0x35507(0x121))/0x8)+-parseInt(_0x35507(0x11f))/0x9+parseInt(_0x35507(0x123))/0xa;if(_0xa49825===_0x3c4ae6)break;else _0x4f4e8c['push'](_0x4f4e8c['shift']());}catch(_0x38e230){_0x4f4e8c['push'](_0x4f4e8c['shift']());}}}(a378_0x312d,0x1c8ff));function a378_0x312d(){const _0x17b43c=['sender','defineProperty','sortBy','../../models/ChatUser','1050085FiQBgM','createdAt','default','__esModule','name','count','735054imDSGP','86226GdFPXm','lodash','36742mSeMxn','1262763mLznJM','length','128gCEXnR','findAndCountAll','11290EfRyfg','3lyxDXD','10bswpaC','148484zhoVoQ','UNAUTHORIZED'];a378_0x312d=function(){return _0x17b43c;};return a378_0x312d();}var __importDefault=this&&this['__importDefault']||function(_0x44e669){const _0xc3cdc1=a378_0x28a4;return _0x44e669&&_0x44e669[_0xc3cdc1(0x12f)]?_0x44e669:{'default':_0x44e669};};Object[a378_0x392302(0x129)](exports,a378_0x392302(0x12f),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require(a378_0x392302(0x12b))),User_1=__importDefault(require('../../models/User')),lodash_1=require(a378_0x392302(0x11d)),FindMessages=async({chatId:_0xe5611c,ownerId:_0x4cce6d,pageNumber:pageNumber='1'})=>{const _0x2720bc=a378_0x392302,_0x2d2e6b=await ChatUser_1[_0x2720bc(0x12e)][_0x2720bc(0x131)]({'where':{'chatId':_0xe5611c,'userId':_0x4cce6d}});if(_0x2d2e6b===0x0)throw new AppError_1['default'](_0x2720bc(0x127),0x190);const _0x143a2e=0x14,_0x337106=_0x143a2e*(+pageNumber-0x1),{count:_0x39f004,rows:_0xddeca}=await ChatMessage_1[_0x2720bc(0x12e)][_0x2720bc(0x122)]({'where':{'chatId':_0xe5611c},'include':[{'model':User_1['default'],'as':_0x2720bc(0x128),'attributes':['id',_0x2720bc(0x130)]}],'limit':_0x143a2e,'offset':_0x337106,'order':[[_0x2720bc(0x12d),'DESC']]}),_0x2bcffa=_0x39f004>_0x337106+_0xddeca[_0x2720bc(0x120)],_0x270be8=(0x0,lodash_1[_0x2720bc(0x12a)])(_0xddeca,['id','ASC']);return{'records':_0x270be8,'count':_0x39f004,'hasMore':_0x2bcffa};};exports[a378_0x392302(0x12e)]=FindMessages;