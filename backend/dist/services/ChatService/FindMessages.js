'use strict';const a379_0x3c91ef=a379_0x5b16;(function(_0x7c368a,_0xc5047b){const _0x128768=a379_0x5b16,_0x15c554=_0x7c368a();while(!![]){try{const _0x461883=parseInt(_0x128768(0x191))/0x1+parseInt(_0x128768(0x189))/0x2+parseInt(_0x128768(0x183))/0x3*(parseInt(_0x128768(0x182))/0x4)+parseInt(_0x128768(0x190))/0x5*(parseInt(_0x128768(0x197))/0x6)+parseInt(_0x128768(0x193))/0x7+parseInt(_0x128768(0x186))/0x8+parseInt(_0x128768(0x198))/0x9*(-parseInt(_0x128768(0x18b))/0xa);if(_0x461883===_0xc5047b)break;else _0x15c554['push'](_0x15c554['shift']());}catch(_0x282f6b){_0x15c554['push'](_0x15c554['shift']());}}}(a379_0x3e77,0x30a1b));var __importDefault=this&&this[a379_0x3c91ef(0x196)]||function(_0x4c94aa){const _0x58c84b=a379_0x3c91ef;return _0x4c94aa&&_0x4c94aa[_0x58c84b(0x18d)]?_0x4c94aa:{'default':_0x4c94aa};};Object[a379_0x3c91ef(0x185)](exports,a379_0x3c91ef(0x18d),{'value':!![]});function a379_0x5b16(_0x2c2b2e,_0x987bd2){const _0x3e77bb=a379_0x3e77();return a379_0x5b16=function(_0x5b16c9,_0x2fafe5){_0x5b16c9=_0x5b16c9-0x182;let _0x10aaed=_0x3e77bb[_0x5b16c9];return _0x10aaed;},a379_0x5b16(_0x2c2b2e,_0x987bd2);}function a379_0x3e77(){const _0x554107=['name','defineProperty','2817936KpjzrD','sortBy','count','681106Coljuc','UNAUTHORIZED','210QGxtxJ','default','__esModule','ASC','findAndCountAll','30eZjzKr','127811QqBhJE','../../errors/AppError','707770vBftla','length','../../models/ChatUser','__importDefault','146394AQNyrG','534015aexYpJ','sender','../../models/ChatMessage','4VLkwZS','1131360pzTYKZ'];a379_0x3e77=function(){return _0x554107;};return a379_0x3e77();}const AppError_1=__importDefault(require(a379_0x3c91ef(0x192))),ChatMessage_1=__importDefault(require(a379_0x3c91ef(0x19a))),ChatUser_1=__importDefault(require(a379_0x3c91ef(0x195))),User_1=__importDefault(require('../../models/User')),lodash_1=require('lodash'),FindMessages=async({chatId:_0x30cb8a,ownerId:_0x40f9f0,pageNumber:pageNumber='1'})=>{const _0x1b9ea4=a379_0x3c91ef,_0x32cd18=await ChatUser_1['default'][_0x1b9ea4(0x188)]({'where':{'chatId':_0x30cb8a,'userId':_0x40f9f0}});if(_0x32cd18===0x0)throw new AppError_1[(_0x1b9ea4(0x18c))](_0x1b9ea4(0x18a),0x190);const _0xf7b2a7=0x14,_0x5a8c89=_0xf7b2a7*(+pageNumber-0x1),{count:_0x10011d,rows:_0x1ad66a}=await ChatMessage_1[_0x1b9ea4(0x18c)][_0x1b9ea4(0x18f)]({'where':{'chatId':_0x30cb8a},'include':[{'model':User_1['default'],'as':_0x1b9ea4(0x199),'attributes':['id',_0x1b9ea4(0x184)]}],'limit':_0xf7b2a7,'offset':_0x5a8c89,'order':[['createdAt','DESC']]}),_0x4482ab=_0x10011d>_0x5a8c89+_0x1ad66a[_0x1b9ea4(0x194)],_0x5c25d4=(0x0,lodash_1[_0x1b9ea4(0x187)])(_0x1ad66a,['id',_0x1b9ea4(0x18e)]);return{'records':_0x5c25d4,'count':_0x10011d,'hasMore':_0x4482ab};};exports['default']=FindMessages;