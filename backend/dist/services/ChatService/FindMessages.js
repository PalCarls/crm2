'use strict';const a391_0x1aa18f=a391_0x3419;function a391_0x3419(_0x5c9a7f,_0x2263e4){const _0x42bf6b=a391_0x42bf();return a391_0x3419=function(_0x3419c7,_0x49655b){_0x3419c7=_0x3419c7-0x13c;let _0xfa3eea=_0x42bf6b[_0x3419c7];return _0xfa3eea;},a391_0x3419(_0x5c9a7f,_0x2263e4);}function a391_0x42bf(){const _0x2f71c0=['lodash','../../models/ChatUser','../../errors/AppError','4716WoGIyo','9KNACFi','__esModule','1640562NCalqr','8fAKTCa','505tXheou','3522930EUDqHc','name','6898eJMlNH','ASC','5530950oGZttT','count','12380665BOpjrp','sortBy','sender','createdAt','default','159yvejYN','785665zVqvHF','UNAUTHORIZED','length','defineProperty','__importDefault','findAndCountAll'];a391_0x42bf=function(){return _0x2f71c0;};return a391_0x42bf();}(function(_0x27252c,_0x3d3b53){const _0x3838c9=a391_0x3419,_0x7bdf65=_0x27252c();while(!![]){try{const _0x3ba8c9=parseInt(_0x3838c9(0x14b))/0x1+parseInt(_0x3838c9(0x141))/0x2*(parseInt(_0x3838c9(0x14a))/0x3)+-parseInt(_0x3838c9(0x154))/0x4*(parseInt(_0x3838c9(0x13e))/0x5)+-parseInt(_0x3838c9(0x143))/0x6+parseInt(_0x3838c9(0x13c))/0x7*(-parseInt(_0x3838c9(0x13d))/0x8)+-parseInt(_0x3838c9(0x155))/0x9*(parseInt(_0x3838c9(0x13f))/0xa)+parseInt(_0x3838c9(0x145))/0xb;if(_0x3ba8c9===_0x3d3b53)break;else _0x7bdf65['push'](_0x7bdf65['shift']());}catch(_0xdbecdc){_0x7bdf65['push'](_0x7bdf65['shift']());}}}(a391_0x42bf,0x71dee));var __importDefault=this&&this[a391_0x1aa18f(0x14f)]||function(_0x36f7ad){const _0x27e241=a391_0x1aa18f;return _0x36f7ad&&_0x36f7ad[_0x27e241(0x156)]?_0x36f7ad:{'default':_0x36f7ad};};Object[a391_0x1aa18f(0x14e)](exports,a391_0x1aa18f(0x156),{'value':!![]});const AppError_1=__importDefault(require(a391_0x1aa18f(0x153))),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require(a391_0x1aa18f(0x152))),User_1=__importDefault(require('../../models/User')),lodash_1=require(a391_0x1aa18f(0x151)),FindMessages=async({chatId:_0x5ca889,ownerId:_0x1f27a6,pageNumber:pageNumber='1'})=>{const _0x1d4f96=a391_0x1aa18f,_0x3a3782=await ChatUser_1['default'][_0x1d4f96(0x144)]({'where':{'chatId':_0x5ca889,'userId':_0x1f27a6}});if(_0x3a3782===0x0)throw new AppError_1[(_0x1d4f96(0x149))](_0x1d4f96(0x14c),0x190);const _0x44acd3=0x14,_0x3675f1=_0x44acd3*(+pageNumber-0x1),{count:_0x2b7849,rows:_0x7780cb}=await ChatMessage_1[_0x1d4f96(0x149)][_0x1d4f96(0x150)]({'where':{'chatId':_0x5ca889},'include':[{'model':User_1[_0x1d4f96(0x149)],'as':_0x1d4f96(0x147),'attributes':['id',_0x1d4f96(0x140)]}],'limit':_0x44acd3,'offset':_0x3675f1,'order':[[_0x1d4f96(0x148),'DESC']]}),_0x49be04=_0x2b7849>_0x3675f1+_0x7780cb[_0x1d4f96(0x14d)],_0x17ad3a=(0x0,lodash_1[_0x1d4f96(0x146)])(_0x7780cb,['id',_0x1d4f96(0x142)]);return{'records':_0x17ad3a,'count':_0x2b7849,'hasMore':_0x49be04};};exports[a391_0x1aa18f(0x149)]=FindMessages;