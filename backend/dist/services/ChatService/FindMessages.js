<<<<<<< HEAD
'use strict';const a413_0x4995e9=a413_0x5776;function a413_0x5c1b(){const _0x2d4cdd=['sortBy','4132851AWnJiY','DESC','27387866KnxfAM','../../errors/AppError','__importDefault','12rhhaEC','name','277vHIvvw','sender','default','findAndCountAll','UNAUTHORIZED','lodash','../../models/ChatUser','ASC','1099170udBFgz','1542516qkJWVF','8VcGSUH','length','7IaHSDp','2083180hydluU','1914995ThVTPC','__esModule','../../models/User','3542MvAjNY','createdAt'];a413_0x5c1b=function(){return _0x2d4cdd;};return a413_0x5c1b();}(function(_0x3d141c,_0x394dbd){const _0x42b1b2=a413_0x5776,_0x4911af=_0x3d141c();while(!![]){try{const _0x47c609=parseInt(_0x42b1b2(0x110))/0x1*(parseInt(_0x42b1b2(0x106))/0x2)+parseInt(_0x42b1b2(0x109))/0x3+parseInt(_0x42b1b2(0x10e))/0x4*(parseInt(_0x42b1b2(0x103))/0x5)+parseInt(_0x42b1b2(0xfe))/0x6*(parseInt(_0x42b1b2(0x101))/0x7)+parseInt(_0x42b1b2(0xff))/0x8*(parseInt(_0x42b1b2(0xfd))/0x9)+-parseInt(_0x42b1b2(0x102))/0xa+-parseInt(_0x42b1b2(0x10b))/0xb;if(_0x47c609===_0x394dbd)break;else _0x4911af['push'](_0x4911af['shift']());}catch(_0x5aaacd){_0x4911af['push'](_0x4911af['shift']());}}}(a413_0x5c1b,0xaa7a1));var __importDefault=this&&this[a413_0x4995e9(0x10d)]||function(_0x10e543){return _0x10e543&&_0x10e543['__esModule']?_0x10e543:{'default':_0x10e543};};Object['defineProperty'](exports,a413_0x4995e9(0x104),{'value':!![]});function a413_0x5776(_0x1aee0e,_0x22a78e){const _0x5c1b71=a413_0x5c1b();return a413_0x5776=function(_0x577671,_0x12a828){_0x577671=_0x577671-0xfb;let _0x38090c=_0x5c1b71[_0x577671];return _0x38090c;},a413_0x5776(_0x1aee0e,_0x22a78e);}const AppError_1=__importDefault(require(a413_0x4995e9(0x10c))),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require(a413_0x4995e9(0xfb))),User_1=__importDefault(require(a413_0x4995e9(0x105))),lodash_1=require(a413_0x4995e9(0x115)),FindMessages=async({chatId:_0x17305d,ownerId:_0x354243,pageNumber:pageNumber='1'})=>{const _0x47ed07=a413_0x4995e9,_0x18a4a8=await ChatUser_1['default']['count']({'where':{'chatId':_0x17305d,'userId':_0x354243}});if(_0x18a4a8===0x0)throw new AppError_1[(_0x47ed07(0x112))](_0x47ed07(0x114),0x190);const _0x42a4e4=0x14,_0x3e48e6=_0x42a4e4*(+pageNumber-0x1),{count:_0x5c6339,rows:_0x2cc8a9}=await ChatMessage_1[_0x47ed07(0x112)][_0x47ed07(0x113)]({'where':{'chatId':_0x17305d},'include':[{'model':User_1['default'],'as':_0x47ed07(0x111),'attributes':['id',_0x47ed07(0x10f)]}],'limit':_0x42a4e4,'offset':_0x3e48e6,'order':[[_0x47ed07(0x107),_0x47ed07(0x10a)]]}),_0x13e325=_0x5c6339>_0x3e48e6+_0x2cc8a9[_0x47ed07(0x100)],_0x17ac3b=(0x0,lodash_1[_0x47ed07(0x108)])(_0x2cc8a9,['id',_0x47ed07(0xfc)]);return{'records':_0x17ac3b,'count':_0x5c6339,'hasMore':_0x13e325};};exports[a413_0x4995e9(0x112)]=FindMessages;
=======
'use strict';function a413_0xcd7f(){const _0x24a655=['27OUCIqj','2760056oBvcca','__importDefault','defineProperty','12dqhzhx','4GPDGhL','sortBy','77MJonHm','104116XuyrEa','4719845arWkwK','534048HVhigY','ASC','../../models/User','50TwSxWS','../../models/ChatMessage','527170cXSKWv','findAndCountAll','sender','../../errors/AppError','1799636OaToVy','__esModule','createdAt','DESC','3tzXEcm','count','UNAUTHORIZED','default','6177934oNOhrm','length','../../models/ChatUser'];a413_0xcd7f=function(){return _0x24a655;};return a413_0xcd7f();}const a413_0x3e3377=a413_0x2b87;(function(_0x3c572e,_0x57a848){const _0x256bb6=a413_0x2b87,_0x52723a=_0x3c572e();while(!![]){try{const _0x34b5f6=parseInt(_0x256bb6(0xa0))/0x1*(-parseInt(_0x256bb6(0xa3))/0x2)+-parseInt(_0x256bb6(0xb2))/0x3*(-parseInt(_0x256bb6(0xae))/0x4)+parseInt(_0x256bb6(0xa8))/0x5*(-parseInt(_0x256bb6(0xa5))/0x6)+parseInt(_0x256bb6(0x98))/0x7+parseInt(_0x256bb6(0x9c))/0x8*(parseInt(_0x256bb6(0x9b))/0x9)+-parseInt(_0x256bb6(0xaa))/0xa*(parseInt(_0x256bb6(0xa2))/0xb)+-parseInt(_0x256bb6(0x9f))/0xc*(parseInt(_0x256bb6(0xa4))/0xd);if(_0x34b5f6===_0x57a848)break;else _0x52723a['push'](_0x52723a['shift']());}catch(_0x1075b5){_0x52723a['push'](_0x52723a['shift']());}}}(a413_0xcd7f,0x83208));var __importDefault=this&&this[a413_0x3e3377(0x9d)]||function(_0x39bc1){const _0x23bb7e=a413_0x3e3377;return _0x39bc1&&_0x39bc1[_0x23bb7e(0xaf)]?_0x39bc1:{'default':_0x39bc1};};Object[a413_0x3e3377(0x9e)](exports,a413_0x3e3377(0xaf),{'value':!![]});const AppError_1=__importDefault(require(a413_0x3e3377(0xad))),ChatMessage_1=__importDefault(require(a413_0x3e3377(0xa9))),ChatUser_1=__importDefault(require(a413_0x3e3377(0x9a))),User_1=__importDefault(require(a413_0x3e3377(0xa7))),lodash_1=require('lodash'),FindMessages=async({chatId:_0x5c56ec,ownerId:_0x1612fa,pageNumber:pageNumber='1'})=>{const _0x2dd31d=a413_0x3e3377,_0x1b8e44=await ChatUser_1[_0x2dd31d(0x97)][_0x2dd31d(0xb3)]({'where':{'chatId':_0x5c56ec,'userId':_0x1612fa}});if(_0x1b8e44===0x0)throw new AppError_1[(_0x2dd31d(0x97))](_0x2dd31d(0x96),0x190);const _0x4fb10b=0x14,_0x5ba505=_0x4fb10b*(+pageNumber-0x1),{count:_0x3fa755,rows:_0x5a99b4}=await ChatMessage_1['default'][_0x2dd31d(0xab)]({'where':{'chatId':_0x5c56ec},'include':[{'model':User_1[_0x2dd31d(0x97)],'as':_0x2dd31d(0xac),'attributes':['id','name']}],'limit':_0x4fb10b,'offset':_0x5ba505,'order':[[_0x2dd31d(0xb0),_0x2dd31d(0xb1)]]}),_0x53aeb6=_0x3fa755>_0x5ba505+_0x5a99b4[_0x2dd31d(0x99)],_0x203e3b=(0x0,lodash_1[_0x2dd31d(0xa1)])(_0x5a99b4,['id',_0x2dd31d(0xa6)]);return{'records':_0x203e3b,'count':_0x3fa755,'hasMore':_0x53aeb6};};function a413_0x2b87(_0x117619,_0x22df52){const _0xcd7fdb=a413_0xcd7f();return a413_0x2b87=function(_0x2b87d1,_0x5ae683){_0x2b87d1=_0x2b87d1-0x96;let _0x12c9f3=_0xcd7fdb[_0x2b87d1];return _0x12c9f3;},a413_0x2b87(_0x117619,_0x22df52);}exports['default']=FindMessages;
>>>>>>> ab722bfbcf394d74dd0b99a984c0dcf6ffbcff7f
