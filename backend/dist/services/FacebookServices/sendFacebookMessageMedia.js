'use strict';const a489_0x1e6966=a489_0x470f;(function(_0x4bf82c,_0x4027b9){const _0x20f0c5=a489_0x470f,_0x4b2c07=_0x4bf82c();while(!![]){try{const _0x4dd6ae=parseInt(_0x20f0c5(0x162))/0x1+parseInt(_0x20f0c5(0x15e))/0x2+parseInt(_0x20f0c5(0x177))/0x3+-parseInt(_0x20f0c5(0x17f))/0x4*(-parseInt(_0x20f0c5(0x183))/0x5)+-parseInt(_0x20f0c5(0x179))/0x6+-parseInt(_0x20f0c5(0x166))/0x7+parseInt(_0x20f0c5(0x16c))/0x8*(-parseInt(_0x20f0c5(0x160))/0x9);if(_0x4dd6ae===_0x4027b9)break;else _0x4b2c07['push'](_0x4b2c07['shift']());}catch(_0x3306db){_0x4b2c07['push'](_0x4b2c07['shift']());}}}(a489_0x2621,0x8a09e));var __importDefault=this&&this[a489_0x1e6966(0x164)]||function(_0x1b2e76){const _0x13d0f0=a489_0x1e6966;return _0x1b2e76&&_0x1b2e76[_0x13d0f0(0x165)]?_0x1b2e76:{'default':_0x1b2e76};};Object[a489_0x1e6966(0x16a)](exports,a489_0x1e6966(0x165),{'value':!![]}),exports[a489_0x1e6966(0x17e)]=exports[a489_0x1e6966(0x17b)]=exports[a489_0x1e6966(0x161)]=exports[a489_0x1e6966(0x15f)]=void 0x0;const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require(a489_0x1e6966(0x176))),graphAPI_1=require('./graphAPI'),typeAttachment=_0x5a6806=>{const _0x3fed5d=a489_0x1e6966;if(_0x5a6806['mimetype'][_0x3fed5d(0x169)](_0x3fed5d(0x167)))return'image';if(_0x5a6806['mimetype']['includes'](_0x3fed5d(0x170)))return _0x3fed5d(0x170);if(_0x5a6806['mimetype'][_0x3fed5d(0x169)]('audio'))return _0x3fed5d(0x172);return _0x3fed5d(0x15c);};exports[a489_0x1e6966(0x15f)]=typeAttachment;const sendFacebookMessageMedia=async({media:_0x523dc4,ticket:_0x87eef6,body:_0xd54801})=>{const _0x2999e6=a489_0x1e6966;try{const _0x5ad40d=(0x0,exports[_0x2999e6(0x15f)])(_0x523dc4),_0x33d281=process[_0x2999e6(0x185)][_0x2999e6(0x17a)]+_0x2999e6(0x182)+_0x87eef6[_0x2999e6(0x15d)]+'/'+_0x523dc4['filename'],_0x9018ef=await(0x0,graphAPI_1['sendAttachmentFromUrl'])(_0x87eef6[_0x2999e6(0x178)][_0x2999e6(0x171)],_0x33d281,_0x5ad40d,_0x87eef6[_0x2999e6(0x175)][_0x2999e6(0x180)]);return await _0x87eef6['update']({'lastMessage':_0x523dc4[_0x2999e6(0x184)]}),fs_1['default'][_0x2999e6(0x17c)](_0x523dc4[_0x2999e6(0x173)]),_0x9018ef;}catch(_0x1b64a9){throw new AppError_1[(_0x2999e6(0x16e))](_0x2999e6(0x181));}};function a489_0x2621(){const _0x597ebb=['whatsapp','../../errors/AppError','3028746fXlQlV','contact','5527902GjHivK','BACKEND_URL','sendFacebookMessageMediaExternal','unlinkSync','sendAttachmentFromUrl','sendFacebookMessageFileExternal','1516944AChdPe','facebookUserToken','ERR_SENDING_FACEBOOK_MSG','/public/company','10cRrhbZ','filename','env','file','companyId','931164fFkPCx','typeAttachment','9afmtec','sendFacebookMessageMedia','542498XSqOVm','random','__importDefault','__esModule','2790655KFQEpN','image','substring','includes','defineProperty','update','7125968yEMTif','.jpg}','default','toString','video','number','audio','path','.pdf}'];a489_0x2621=function(){return _0x597ebb;};return a489_0x2621();}function a489_0x470f(_0x5e3209,_0x2fc9b6){const _0x262156=a489_0x2621();return a489_0x470f=function(_0x470fcf,_0x2c00f7){_0x470fcf=_0x470fcf-0x15c;let _0x58feb3=_0x262156[_0x470fcf];return _0x58feb3;},a489_0x470f(_0x5e3209,_0x2fc9b6);}exports[a489_0x1e6966(0x161)]=sendFacebookMessageMedia;const sendFacebookMessageMediaExternal=async({url:_0x3aa3d9,ticket:_0x1eca11,body:_0x565f8f})=>{const _0x269394=a489_0x1e6966;try{const _0x2bc268=_0x269394(0x167),_0x1437dc=await(0x0,graphAPI_1['sendAttachmentFromUrl'])(_0x1eca11[_0x269394(0x178)][_0x269394(0x171)],_0x3aa3d9,_0x2bc268,_0x1eca11[_0x269394(0x175)]['facebookUserToken']),_0x1a560d=Math['random']()[_0x269394(0x16f)](0x24)[_0x269394(0x168)](0x7);return await _0x1eca11['update']({'lastMessage':_0x565f8f||_0x1a560d+_0x269394(0x16d)}),_0x1437dc;}catch(_0x527c42){throw new AppError_1[(_0x269394(0x16e))]('ERR_SENDING_FACEBOOK_MSG');}};exports['sendFacebookMessageMediaExternal']=sendFacebookMessageMediaExternal;const sendFacebookMessageFileExternal=async({url:_0x220b87,ticket:_0x32143e,body:_0x55f23c})=>{const _0xf66477=a489_0x1e6966;try{const _0x416d6b=_0xf66477(0x15c),_0x240983=await(0x0,graphAPI_1[_0xf66477(0x17d)])(_0x32143e[_0xf66477(0x178)]['number'],_0x220b87,_0x416d6b,_0x32143e['whatsapp'][_0xf66477(0x180)]),_0x49ac6d=Math[_0xf66477(0x163)]()[_0xf66477(0x16f)](0x24)[_0xf66477(0x168)](0x7);return await _0x32143e[_0xf66477(0x16b)]({'lastMessage':_0x55f23c||_0x49ac6d+_0xf66477(0x174)}),_0x240983;}catch(_0x57aba5){throw new AppError_1[(_0xf66477(0x16e))](_0xf66477(0x181));}};exports['sendFacebookMessageFileExternal']=sendFacebookMessageFileExternal;