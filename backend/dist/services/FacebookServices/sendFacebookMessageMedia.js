'use strict';const a472_0x4f4f56=a472_0x357b;(function(_0x33cf1d,_0x32ee3e){const _0x1a2a37=a472_0x357b,_0x5b015f=_0x33cf1d();while(!![]){try{const _0x29cce0=parseInt(_0x1a2a37(0x103))/0x1*(-parseInt(_0x1a2a37(0x106))/0x2)+-parseInt(_0x1a2a37(0xf0))/0x3*(-parseInt(_0x1a2a37(0x101))/0x4)+parseInt(_0x1a2a37(0xf9))/0x5+-parseInt(_0x1a2a37(0x100))/0x6*(-parseInt(_0x1a2a37(0xfa))/0x7)+parseInt(_0x1a2a37(0xf4))/0x8*(parseInt(_0x1a2a37(0xe4))/0x9)+-parseInt(_0x1a2a37(0xf5))/0xa*(-parseInt(_0x1a2a37(0xe9))/0xb)+-parseInt(_0x1a2a37(0xe6))/0xc;if(_0x29cce0===_0x32ee3e)break;else _0x5b015f['push'](_0x5b015f['shift']());}catch(_0x5ab874){_0x5b015f['push'](_0x5b015f['shift']());}}}(a472_0x2532,0x94c81));var __importDefault=this&&this[a472_0x4f4f56(0x104)]||function(_0x4c3a02){const _0x48e636=a472_0x4f4f56;return _0x4c3a02&&_0x4c3a02[_0x48e636(0xe2)]?_0x4c3a02:{'default':_0x4c3a02};};Object[a472_0x4f4f56(0xe7)](exports,a472_0x4f4f56(0xe2),{'value':!![]}),exports[a472_0x4f4f56(0xf3)]=exports[a472_0x4f4f56(0xfd)]=exports[a472_0x4f4f56(0x102)]=exports[a472_0x4f4f56(0xff)]=void 0x0;function a472_0x357b(_0x2414db,_0x27ba42){const _0x253273=a472_0x2532();return a472_0x357b=function(_0x357b20,_0x4ad894){_0x357b20=_0x357b20-0xe2;let _0x5bdf95=_0x253273[_0x357b20];return _0x5bdf95;},a472_0x357b(_0x2414db,_0x27ba42);}function a472_0x2532(){const _0x3ab0fc=['sendAttachmentFromUrl','facebookUserToken','number','filename','__esModule','random','9TBeiVT','includes','30664356XFLQit','defineProperty','ERR_SENDING_FACEBOOK_MSG','5839284Mgwgae','file','update','companyId','../../errors/AppError','/public/company','audio','12168YaweTQ','whatsapp','.jpg}','sendFacebookMessageFileExternal','4710136xjcIaY','20ywBHkJ','video','.pdf}','BACKEND_URL','1970350SRtHXl','8170463ATXqil','toString','env','sendFacebookMessageMediaExternal','contact','typeAttachment','6rslmEk','352WbwhdG','sendFacebookMessageMedia','30IkowHP','__importDefault','default','26926ivllcd','path','image','substring'];a472_0x2532=function(){return _0x3ab0fc;};return a472_0x2532();}const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require(a472_0x4f4f56(0xed))),graphAPI_1=require('./graphAPI'),typeAttachment=_0x1e91f3=>{const _0xa22443=a472_0x4f4f56;if(_0x1e91f3['mimetype'][_0xa22443(0xe5)](_0xa22443(0x108)))return _0xa22443(0x108);if(_0x1e91f3['mimetype'][_0xa22443(0xe5)](_0xa22443(0xf6)))return'video';if(_0x1e91f3['mimetype'][_0xa22443(0xe5)]('audio'))return _0xa22443(0xef);return _0xa22443(0xea);};exports[a472_0x4f4f56(0xff)]=typeAttachment;const sendFacebookMessageMedia=async({media:_0x327bab,ticket:_0x5b52a6,body:_0x1209cb})=>{const _0x4d65e3=a472_0x4f4f56;try{const _0x200809=(0x0,exports[_0x4d65e3(0xff)])(_0x327bab),_0x26d9ed=process[_0x4d65e3(0xfc)][_0x4d65e3(0xf8)]+_0x4d65e3(0xee)+_0x5b52a6[_0x4d65e3(0xec)]+'/'+_0x327bab[_0x4d65e3(0x10d)],_0x332f10=await(0x0,graphAPI_1[_0x4d65e3(0x10a)])(_0x5b52a6[_0x4d65e3(0xfe)]['number'],_0x26d9ed,_0x200809,_0x5b52a6[_0x4d65e3(0xf1)][_0x4d65e3(0x10b)]);return await _0x5b52a6[_0x4d65e3(0xeb)]({'lastMessage':_0x327bab[_0x4d65e3(0x10d)]}),fs_1[_0x4d65e3(0x105)]['unlinkSync'](_0x327bab[_0x4d65e3(0x107)]),_0x332f10;}catch(_0x2d14eb){throw new AppError_1['default'](_0x4d65e3(0xe8));}};exports[a472_0x4f4f56(0x102)]=sendFacebookMessageMedia;const sendFacebookMessageMediaExternal=async({url:_0x386d6e,ticket:_0x47dacb,body:_0xd06ee})=>{const _0x4092f9=a472_0x4f4f56;try{const _0xaf7282=_0x4092f9(0x108),_0xfef551=await(0x0,graphAPI_1['sendAttachmentFromUrl'])(_0x47dacb[_0x4092f9(0xfe)][_0x4092f9(0x10c)],_0x386d6e,_0xaf7282,_0x47dacb[_0x4092f9(0xf1)]['facebookUserToken']),_0x44c7b0=Math['random']()[_0x4092f9(0xfb)](0x24)['substring'](0x7);return await _0x47dacb[_0x4092f9(0xeb)]({'lastMessage':_0xd06ee||_0x44c7b0+_0x4092f9(0xf2)}),_0xfef551;}catch(_0x394bc1){throw new AppError_1[(_0x4092f9(0x105))](_0x4092f9(0xe8));}};exports[a472_0x4f4f56(0xfd)]=sendFacebookMessageMediaExternal;const sendFacebookMessageFileExternal=async({url:_0x50a32,ticket:_0x4f311d,body:_0x19e6b0})=>{const _0x589c19=a472_0x4f4f56;try{const _0x28690d='file',_0x30e3d7=await(0x0,graphAPI_1[_0x589c19(0x10a)])(_0x4f311d['contact']['number'],_0x50a32,_0x28690d,_0x4f311d[_0x589c19(0xf1)][_0x589c19(0x10b)]),_0x49407c=Math[_0x589c19(0xe3)]()['toString'](0x24)[_0x589c19(0x109)](0x7);return await _0x4f311d[_0x589c19(0xeb)]({'lastMessage':_0x19e6b0||_0x49407c+_0x589c19(0xf7)}),_0x30e3d7;}catch(_0x1091c2){throw new AppError_1[(_0x589c19(0x105))](_0x589c19(0xe8));}};exports[a472_0x4f4f56(0xf3)]=sendFacebookMessageFileExternal;