'use strict';const a472_0x414ff0=a472_0x4ac4;(function(_0xdda697,_0x56dbde){const _0x55f7d1=a472_0x4ac4,_0x5ae6f6=_0xdda697();while(!![]){try{const _0x552a82=-parseInt(_0x55f7d1(0x115))/0x1*(parseInt(_0x55f7d1(0x113))/0x2)+-parseInt(_0x55f7d1(0x110))/0x3*(parseInt(_0x55f7d1(0x10a))/0x4)+parseInt(_0x55f7d1(0xfb))/0x5+parseInt(_0x55f7d1(0x11b))/0x6+parseInt(_0x55f7d1(0x105))/0x7+parseInt(_0x55f7d1(0xfd))/0x8*(parseInt(_0x55f7d1(0x10d))/0x9)+-parseInt(_0x55f7d1(0x112))/0xa*(parseInt(_0x55f7d1(0x114))/0xb);if(_0x552a82===_0x56dbde)break;else _0x5ae6f6['push'](_0x5ae6f6['shift']());}catch(_0x5654a9){_0x5ae6f6['push'](_0x5ae6f6['shift']());}}}(a472_0x50fd,0xeac10));function a472_0x4ac4(_0x819618,_0x9a1123){const _0x50fd71=a472_0x50fd();return a472_0x4ac4=function(_0x4ac463,_0x23c443){_0x4ac463=_0x4ac463-0xf0;let _0x26842e=_0x50fd71[_0x4ac463];return _0x26842e;},a472_0x4ac4(_0x819618,_0x9a1123);}var __importDefault=this&&this[a472_0x414ff0(0x101)]||function(_0x5274b7){const _0x2a6b55=a472_0x414ff0;return _0x5274b7&&_0x5274b7[_0x2a6b55(0x10b)]?_0x5274b7:{'default':_0x5274b7};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a472_0x414ff0(0xf4)]=exports[a472_0x414ff0(0x117)]=exports[a472_0x414ff0(0xf1)]=exports[a472_0x414ff0(0xf8)]=void 0x0;const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require(a472_0x414ff0(0xf6))),graphAPI_1=require(a472_0x414ff0(0x119)),typeAttachment=_0x231485=>{const _0x4e6741=a472_0x414ff0;if(_0x231485['mimetype'][_0x4e6741(0x11a)](_0x4e6741(0xfa)))return'image';if(_0x231485['mimetype']['includes']('video'))return _0x4e6741(0x102);if(_0x231485[_0x4e6741(0x116)][_0x4e6741(0x11a)]('audio'))return _0x4e6741(0x109);return _0x4e6741(0x10f);};function a472_0x50fd(){const _0x5ef143=['default','5575325alOtuD','.pdf}','whatsapp','ERR_SENDING_FACEBOOK_MSG','audio','68lTOMjB','__esModule','companyId','9BLtWQu','random','file','46821HoHqqu','unlinkSync','1450FrWYgb','8gvyMwH','16885YfiGPy','283378zLCcWz','mimetype','sendFacebookMessageMediaExternal','contact','./graphAPI','includes','3614394AJMtAl','number','sendFacebookMessageMedia','env','sendAttachmentFromUrl','sendFacebookMessageFileExternal','/public/company','../../errors/AppError','facebookUserToken','typeAttachment','BACKEND_URL','image','4064925fJNipL','update','2968792nfbwuy','.jpg}','path','toString','__importDefault','video','filename'];a472_0x50fd=function(){return _0x5ef143;};return a472_0x50fd();}exports[a472_0x414ff0(0xf8)]=typeAttachment;const sendFacebookMessageMedia=async({media:_0x3d0b28,ticket:_0x3f8209,body:_0x1cedf7})=>{const _0x1cb0ea=a472_0x414ff0;try{const _0x3ae20c=(0x0,exports[_0x1cb0ea(0xf8)])(_0x3d0b28),_0x36f304=process[_0x1cb0ea(0xf2)][_0x1cb0ea(0xf9)]+_0x1cb0ea(0xf5)+_0x3f8209[_0x1cb0ea(0x10c)]+'/'+_0x3d0b28[_0x1cb0ea(0x103)],_0x7ea413=await(0x0,graphAPI_1[_0x1cb0ea(0xf3)])(_0x3f8209[_0x1cb0ea(0x118)][_0x1cb0ea(0xf0)],_0x36f304,_0x3ae20c,_0x3f8209[_0x1cb0ea(0x107)][_0x1cb0ea(0xf7)]);return await _0x3f8209[_0x1cb0ea(0xfc)]({'lastMessage':_0x3d0b28[_0x1cb0ea(0x103)]}),fs_1[_0x1cb0ea(0x104)][_0x1cb0ea(0x111)](_0x3d0b28[_0x1cb0ea(0xff)]),_0x7ea413;}catch(_0x5457b7){throw new AppError_1[(_0x1cb0ea(0x104))](_0x1cb0ea(0x108));}};exports[a472_0x414ff0(0xf1)]=sendFacebookMessageMedia;const sendFacebookMessageMediaExternal=async({url:_0x5edb80,ticket:_0x343c33,body:_0x557688})=>{const _0x620178=a472_0x414ff0;try{const _0x29ccf2=_0x620178(0xfa),_0x4d6ea4=await(0x0,graphAPI_1[_0x620178(0xf3)])(_0x343c33[_0x620178(0x118)][_0x620178(0xf0)],_0x5edb80,_0x29ccf2,_0x343c33['whatsapp'][_0x620178(0xf7)]),_0x46ce7f=Math[_0x620178(0x10e)]()['toString'](0x24)['substring'](0x7);return await _0x343c33['update']({'lastMessage':_0x557688||_0x46ce7f+_0x620178(0xfe)}),_0x4d6ea4;}catch(_0x4301f3){throw new AppError_1[(_0x620178(0x104))](_0x620178(0x108));}};exports[a472_0x414ff0(0x117)]=sendFacebookMessageMediaExternal;const sendFacebookMessageFileExternal=async({url:_0x18abe8,ticket:_0x1b50ab,body:_0x239572})=>{const _0x2445ac=a472_0x414ff0;try{const _0x42a827='file',_0x340098=await(0x0,graphAPI_1['sendAttachmentFromUrl'])(_0x1b50ab['contact'][_0x2445ac(0xf0)],_0x18abe8,_0x42a827,_0x1b50ab['whatsapp']['facebookUserToken']),_0x9979dd=Math[_0x2445ac(0x10e)]()[_0x2445ac(0x100)](0x24)['substring'](0x7);return await _0x1b50ab[_0x2445ac(0xfc)]({'lastMessage':_0x239572||_0x9979dd+_0x2445ac(0x106)}),_0x340098;}catch(_0x16c4cf){throw new AppError_1[(_0x2445ac(0x104))](_0x2445ac(0x108));}};exports[a472_0x414ff0(0xf4)]=sendFacebookMessageFileExternal;