'use strict';const a435_0x1a2ebf=a435_0x4a32;(function(_0x2bedef,_0x365a0a){const _0x339970=a435_0x4a32,_0x915438=_0x2bedef();while(!![]){try{const _0x162199=parseInt(_0x339970(0x147))/0x1*(-parseInt(_0x339970(0x13c))/0x2)+parseInt(_0x339970(0x141))/0x3+-parseInt(_0x339970(0x13f))/0x4+-parseInt(_0x339970(0x157))/0x5+parseInt(_0x339970(0x154))/0x6+-parseInt(_0x339970(0x13b))/0x7+parseInt(_0x339970(0x14b))/0x8*(parseInt(_0x339970(0x149))/0x9);if(_0x162199===_0x365a0a)break;else _0x915438['push'](_0x915438['shift']());}catch(_0x50df1f){_0x915438['push'](_0x915438['shift']());}}}(a435_0x45d9,0xcfa0e));function a435_0x4a32(_0x295fdd,_0x58b6e9){const _0x45d98c=a435_0x45d9();return a435_0x4a32=function(_0x4a3239,_0x325436){_0x4a3239=_0x4a3239-0x139;let _0x503690=_0x45d98c[_0x4a3239];return _0x503690;},a435_0x4a32(_0x295fdd,_0x58b6e9);}var __importDefault=this&&this[a435_0x1a2ebf(0x13a)]||function(_0x272cc1){const _0x4ac420=a435_0x1a2ebf;return _0x272cc1&&_0x272cc1[_0x4ac420(0x14c)]?_0x272cc1:{'default':_0x272cc1};};function a435_0x45d9(){const _0x3933f9=['BACKEND_URL','24IKEpPq','__esModule','mimetype','companyId','typeAttachment','env','default','number','includes','3527406taEque','../../errors/AppError','path','3412925JJfYGG','image','__importDefault','182462IBWtBG','808aPudcw','ERR_SENDING_FACEBOOK_MSG','./graphAPI','6312896akJEhu','./facebookMessageListener','808896BwRwVK','filename','file','audio','video','contact','2752uvJQqC','/public/company','10174788cTZNlA'];a435_0x45d9=function(){return _0x3933f9;};return a435_0x45d9();}Object['defineProperty'](exports,a435_0x1a2ebf(0x14c),{'value':!![]}),exports[a435_0x1a2ebf(0x14f)]=void 0x0;const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require(a435_0x1a2ebf(0x155))),graphAPI_1=require(a435_0x1a2ebf(0x13e)),facebookMessageListener_1=require(a435_0x1a2ebf(0x140)),typeAttachment=_0x46512b=>{const _0x46ab69=a435_0x1a2ebf;if(_0x46512b[_0x46ab69(0x14d)]['includes'](_0x46ab69(0x139)))return _0x46ab69(0x139);if(_0x46512b[_0x46ab69(0x14d)]['includes'](_0x46ab69(0x145)))return _0x46ab69(0x145);if(_0x46512b[_0x46ab69(0x14d)][_0x46ab69(0x153)]('audio'))return _0x46ab69(0x144);return _0x46ab69(0x143);};exports['typeAttachment']=typeAttachment;const sendFacebookMessageMedia=async({media:_0x317e5a,url:_0x36aa70,ticket:_0x5ee4d9,body:_0x48a3b2})=>{const _0x2ab2e9=a435_0x1a2ebf;try{const _0x4994af=(0x0,exports['typeAttachment'])(_0x317e5a),_0x551d74=await(0x0,graphAPI_1['sendAttachmentFromUrl'])(_0x5ee4d9[_0x2ab2e9(0x146)][_0x2ab2e9(0x152)],process[_0x2ab2e9(0x150)][_0x2ab2e9(0x14a)]+_0x2ab2e9(0x148)+_0x5ee4d9[_0x2ab2e9(0x14e)]+'/'+_0x317e5a[_0x2ab2e9(0x142)],_0x4994af,_0x5ee4d9['whatsapp']['facebookUserToken']);return await _0x5ee4d9['update']({'lastMessage':_0x48a3b2||_0x317e5a[_0x2ab2e9(0x142)]}),fs_1['default']['unlinkSync'](_0x317e5a[_0x2ab2e9(0x156)]),await(0x0,facebookMessageListener_1['verifyMessage'])(_0x551d74,_0x48a3b2||_0x317e5a['filename'],_0x5ee4d9,_0x5ee4d9[_0x2ab2e9(0x146)]),_0x551d74;}catch(_0x412e35){throw new AppError_1[(_0x2ab2e9(0x151))](_0x2ab2e9(0x13d));}};exports[a435_0x1a2ebf(0x151)]=sendFacebookMessageMedia;