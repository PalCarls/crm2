'use strict';const a482_0x730477=a482_0x1bff;(function(_0x145ffd,_0x2e7a50){const _0x15a11d=a482_0x1bff,_0x3d3917=_0x145ffd();while(!![]){try{const _0x585ce3=-parseInt(_0x15a11d(0x16f))/0x1*(parseInt(_0x15a11d(0x17d))/0x2)+-parseInt(_0x15a11d(0x179))/0x3*(parseInt(_0x15a11d(0x17c))/0x4)+-parseInt(_0x15a11d(0x166))/0x5*(parseInt(_0x15a11d(0x171))/0x6)+-parseInt(_0x15a11d(0x169))/0x7*(parseInt(_0x15a11d(0x17b))/0x8)+-parseInt(_0x15a11d(0x17f))/0x9+parseInt(_0x15a11d(0x186))/0xa*(parseInt(_0x15a11d(0x16c))/0xb)+parseInt(_0x15a11d(0x183))/0xc;if(_0x585ce3===_0x2e7a50)break;else _0x3d3917['push'](_0x3d3917['shift']());}catch(_0x783b3e){_0x3d3917['push'](_0x3d3917['shift']());}}}(a482_0x56f9,0x25483));function a482_0x56f9(){const _0x376115=['filename','471220pWOFBL','sendAttachmentFromUrl','../../errors/AppError','1211wFIYum','sendFacebookMessageFileExternal','image','22NdTfDO','sendFacebookMessageMediaExternal','path','11419HLViCa','file','6GithCL','env','/public/company','whatsapp','contact','random','facebookUserToken','mimetype','37551bxNQoQ','ERR_SENDING_FACEBOOK_MSG','12136tuzspl','52AwQcGn','34RvECFS','toString','2192823xOgnoN','__importDefault','defineProperty','.jpg}','12044892HVXxLR','includes','number','530710dINagq','default','__esModule','sendFacebookMessageMedia','unlinkSync','video','BACKEND_URL','substring','update','audio','typeAttachment'];a482_0x56f9=function(){return _0x376115;};return a482_0x56f9();}var __importDefault=this&&this[a482_0x730477(0x180)]||function(_0x3c0ef8){const _0x438997=a482_0x730477;return _0x3c0ef8&&_0x3c0ef8[_0x438997(0x188)]?_0x3c0ef8:{'default':_0x3c0ef8};};Object[a482_0x730477(0x181)](exports,a482_0x730477(0x188),{'value':!![]}),exports[a482_0x730477(0x16a)]=exports[a482_0x730477(0x16d)]=exports[a482_0x730477(0x189)]=exports['typeAttachment']=void 0x0;const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require(a482_0x730477(0x168))),graphAPI_1=require('./graphAPI'),typeAttachment=_0x366d9c=>{const _0x87e3a7=a482_0x730477;if(_0x366d9c[_0x87e3a7(0x178)][_0x87e3a7(0x184)](_0x87e3a7(0x16b)))return _0x87e3a7(0x16b);if(_0x366d9c['mimetype']['includes'](_0x87e3a7(0x18b)))return _0x87e3a7(0x18b);if(_0x366d9c[_0x87e3a7(0x178)][_0x87e3a7(0x184)](_0x87e3a7(0x18f)))return _0x87e3a7(0x18f);return _0x87e3a7(0x170);};exports[a482_0x730477(0x190)]=typeAttachment;function a482_0x1bff(_0x2f70d0,_0x3d7f23){const _0x56f9d4=a482_0x56f9();return a482_0x1bff=function(_0x1bff26,_0x37073f){_0x1bff26=_0x1bff26-0x166;let _0x137511=_0x56f9d4[_0x1bff26];return _0x137511;},a482_0x1bff(_0x2f70d0,_0x3d7f23);}const sendFacebookMessageMedia=async({media:_0x48ea60,ticket:_0x247bea,body:_0x2763bc})=>{const _0x5dc34a=a482_0x730477;try{const _0x17eabb=(0x0,exports[_0x5dc34a(0x190)])(_0x48ea60),_0x114c90=process[_0x5dc34a(0x172)][_0x5dc34a(0x18c)]+_0x5dc34a(0x173)+_0x247bea['companyId']+'/'+_0x48ea60[_0x5dc34a(0x191)],_0x409907=await(0x0,graphAPI_1[_0x5dc34a(0x167)])(_0x247bea[_0x5dc34a(0x175)]['number'],_0x114c90,_0x17eabb,_0x247bea['whatsapp'][_0x5dc34a(0x177)]);return await _0x247bea[_0x5dc34a(0x18e)]({'lastMessage':_0x48ea60[_0x5dc34a(0x191)]}),fs_1['default'][_0x5dc34a(0x18a)](_0x48ea60[_0x5dc34a(0x16e)]),_0x409907;}catch(_0x55447f){throw new AppError_1[(_0x5dc34a(0x187))](_0x5dc34a(0x17a));}};exports['sendFacebookMessageMedia']=sendFacebookMessageMedia;const sendFacebookMessageMediaExternal=async({url:_0x959218,ticket:_0x5dfdaf,body:_0x405dac})=>{const _0x1838cf=a482_0x730477;try{const _0x45f2cf=_0x1838cf(0x16b),_0x217427=await(0x0,graphAPI_1[_0x1838cf(0x167)])(_0x5dfdaf[_0x1838cf(0x175)][_0x1838cf(0x185)],_0x959218,_0x45f2cf,_0x5dfdaf[_0x1838cf(0x174)][_0x1838cf(0x177)]),_0x4d3ddb=Math[_0x1838cf(0x176)]()[_0x1838cf(0x17e)](0x24)[_0x1838cf(0x18d)](0x7);return await _0x5dfdaf['update']({'lastMessage':_0x405dac||_0x4d3ddb+_0x1838cf(0x182)}),_0x217427;}catch(_0x21e255){throw new AppError_1[(_0x1838cf(0x187))](_0x1838cf(0x17a));}};exports[a482_0x730477(0x16d)]=sendFacebookMessageMediaExternal;const sendFacebookMessageFileExternal=async({url:_0x360301,ticket:_0x5654c7,body:_0x5e06b3})=>{const _0x4b5e45=a482_0x730477;try{const _0x5a04ac=_0x4b5e45(0x170),_0x292deb=await(0x0,graphAPI_1[_0x4b5e45(0x167)])(_0x5654c7['contact'][_0x4b5e45(0x185)],_0x360301,_0x5a04ac,_0x5654c7[_0x4b5e45(0x174)]['facebookUserToken']),_0xa0e2e7=Math[_0x4b5e45(0x176)]()[_0x4b5e45(0x17e)](0x24)['substring'](0x7);return await _0x5654c7[_0x4b5e45(0x18e)]({'lastMessage':_0x5e06b3||_0xa0e2e7+'.pdf}'}),_0x292deb;}catch(_0x804ae2){throw new AppError_1[(_0x4b5e45(0x187))](_0x4b5e45(0x17a));}};exports['sendFacebookMessageFileExternal']=sendFacebookMessageFileExternal;