'use strict';function a434_0x5407(){const _0x486b88=['/public/company','contact','typeAttachment','960aYeUvL','1489848YYDNRE','file','path','1526jedEXH','1608123ZWKRxs','defineProperty','7872cSTemH','unlinkSync','filename','default','2qMsliA','9ExDLHk','174993kvfReJ','update','18243omNyWt','24uPSSUG','./graphAPI','includes','companyId','number','285825wqfsFb','10NfTwSQ','./facebookMessageListener','385040RbvKEj','facebookUserToken','__esModule','env','video','__importDefault','ERR_SENDING_FACEBOOK_MSG','verifyMessage','mimetype','audio','image','whatsapp'];a434_0x5407=function(){return _0x486b88;};return a434_0x5407();}const a434_0x32cda2=a434_0x5a8e;(function(_0x4473fb,_0x2a3834){const _0x70b12e=a434_0x5a8e,_0x328f87=_0x4473fb();while(!![]){try{const _0x1fdfba=-parseInt(_0x70b12e(0x14f))/0x1*(parseInt(_0x70b12e(0x145))/0x2)+-parseInt(_0x70b12e(0x149))/0x3*(parseInt(_0x70b12e(0x14a))/0x4)+parseInt(_0x70b12e(0x152))/0x5+-parseInt(_0x70b12e(0x141))/0x6*(parseInt(_0x70b12e(0x13e))/0x7)+-parseInt(_0x70b12e(0x13b))/0x8*(parseInt(_0x70b12e(0x146))/0x9)+-parseInt(_0x70b12e(0x150))/0xa*(parseInt(_0x70b12e(0x13f))/0xb)+parseInt(_0x70b12e(0x13a))/0xc*(parseInt(_0x70b12e(0x147))/0xd);if(_0x1fdfba===_0x2a3834)break;else _0x328f87['push'](_0x328f87['shift']());}catch(_0x1cbc52){_0x328f87['push'](_0x328f87['shift']());}}}(a434_0x5407,0x34091));var __importDefault=this&&this[a434_0x32cda2(0x130)]||function(_0x453da3){const _0xe49b55=a434_0x32cda2;return _0x453da3&&_0x453da3[_0xe49b55(0x154)]?_0x453da3:{'default':_0x453da3};};Object[a434_0x32cda2(0x140)](exports,a434_0x32cda2(0x154),{'value':!![]}),exports[a434_0x32cda2(0x139)]=void 0x0;const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require('../../errors/AppError')),graphAPI_1=require(a434_0x32cda2(0x14b)),facebookMessageListener_1=require(a434_0x32cda2(0x151)),typeAttachment=_0x3cebae=>{const _0x9c17bd=a434_0x32cda2;if(_0x3cebae[_0x9c17bd(0x133)]['includes'](_0x9c17bd(0x135)))return _0x9c17bd(0x135);if(_0x3cebae['mimetype'][_0x9c17bd(0x14c)](_0x9c17bd(0x12f)))return _0x9c17bd(0x12f);if(_0x3cebae[_0x9c17bd(0x133)]['includes']('audio'))return _0x9c17bd(0x134);return _0x9c17bd(0x13c);};exports[a434_0x32cda2(0x139)]=typeAttachment;const sendFacebookMessageMedia=async({media:_0x3e5f7f,url:_0x570761,ticket:_0x2a7200,body:_0x20159a})=>{const _0x55c1ab=a434_0x32cda2;try{const _0x3da182=(0x0,exports[_0x55c1ab(0x139)])(_0x3e5f7f),_0x3ea046=await(0x0,graphAPI_1['sendAttachmentFromUrl'])(_0x2a7200[_0x55c1ab(0x138)][_0x55c1ab(0x14e)],process[_0x55c1ab(0x12e)]['BACKEND_URL']+_0x55c1ab(0x137)+_0x2a7200[_0x55c1ab(0x14d)]+'/'+_0x3e5f7f[_0x55c1ab(0x143)],_0x3da182,_0x2a7200[_0x55c1ab(0x136)][_0x55c1ab(0x153)]);return await _0x2a7200[_0x55c1ab(0x148)]({'lastMessage':_0x20159a||_0x3e5f7f[_0x55c1ab(0x143)]}),fs_1['default'][_0x55c1ab(0x142)](_0x3e5f7f[_0x55c1ab(0x13d)]),await(0x0,facebookMessageListener_1[_0x55c1ab(0x132)])(_0x3ea046,_0x20159a||_0x3e5f7f[_0x55c1ab(0x143)],_0x2a7200,_0x2a7200[_0x55c1ab(0x138)]),_0x3ea046;}catch(_0x4c29ca){throw new AppError_1[(_0x55c1ab(0x144))](_0x55c1ab(0x131));}};function a434_0x5a8e(_0x12e5a8,_0x4a6610){const _0x540780=a434_0x5407();return a434_0x5a8e=function(_0x5a8e18,_0x4d8b45){_0x5a8e18=_0x5a8e18-0x12e;let _0x1ab6e8=_0x540780[_0x5a8e18];return _0x1ab6e8;},a434_0x5a8e(_0x12e5a8,_0x4a6610);}exports[a434_0x32cda2(0x144)]=sendFacebookMessageMedia;