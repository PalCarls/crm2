'use strict';const a449_0xbf53f3=a449_0x563e;(function(_0x52c232,_0x345a33){const _0x1727e6=a449_0x563e,_0x37b1b2=_0x52c232();while(!![]){try{const _0x264d20=parseInt(_0x1727e6(0x91))/0x1+parseInt(_0x1727e6(0x8e))/0x2+-parseInt(_0x1727e6(0x8b))/0x3+-parseInt(_0x1727e6(0x87))/0x4*(parseInt(_0x1727e6(0x83))/0x5)+-parseInt(_0x1727e6(0x85))/0x6+-parseInt(_0x1727e6(0x86))/0x7+parseInt(_0x1727e6(0x89))/0x8;if(_0x264d20===_0x345a33)break;else _0x37b1b2['push'](_0x37b1b2['shift']());}catch(_0x2d4b21){_0x37b1b2['push'](_0x37b1b2['shift']());}}}(a449_0x3c2e,0x45613));function a449_0x3c2e(){const _0x12418e=['filename','85ifjdop','BACKEND_URL','588780aMHAQj','179634ozUxwj','38084qDCQvE','image','1692744kOyDxP','/public/company','1396947tKrtTs','audio','./graphAPI','854090bNiFFn','includes','__importDefault','396839RJvbny','defineProperty','mimetype','verifyMessage','facebookUserToken','contact','typeAttachment','video','env','number','./facebookMessageListener','../../errors/AppError','default','companyId','file','ERR_SENDING_FACEBOOK_MSG'];a449_0x3c2e=function(){return _0x12418e;};return a449_0x3c2e();}function a449_0x563e(_0x140176,_0x59b54f){const _0x3c2e16=a449_0x3c2e();return a449_0x563e=function(_0x563ed7,_0x369efd){_0x563ed7=_0x563ed7-0x83;let _0x59910a=_0x3c2e16[_0x563ed7];return _0x59910a;},a449_0x563e(_0x140176,_0x59b54f);}var __importDefault=this&&this[a449_0xbf53f3(0x90)]||function(_0x513a16){return _0x513a16&&_0x513a16['__esModule']?_0x513a16:{'default':_0x513a16};};Object[a449_0xbf53f3(0x92)](exports,'__esModule',{'value':!![]}),exports[a449_0xbf53f3(0x97)]=void 0x0;const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require(a449_0xbf53f3(0x9c))),graphAPI_1=require(a449_0xbf53f3(0x8d)),facebookMessageListener_1=require(a449_0xbf53f3(0x9b)),typeAttachment=_0xc598a3=>{const _0x255e3e=a449_0xbf53f3;if(_0xc598a3[_0x255e3e(0x93)][_0x255e3e(0x8f)](_0x255e3e(0x88)))return'image';if(_0xc598a3[_0x255e3e(0x93)][_0x255e3e(0x8f)](_0x255e3e(0x98)))return'video';if(_0xc598a3[_0x255e3e(0x93)][_0x255e3e(0x8f)]('audio'))return _0x255e3e(0x8c);return _0x255e3e(0x9f);};exports[a449_0xbf53f3(0x97)]=typeAttachment;const sendFacebookMessageMedia=async({media:_0x4cf810,url:_0x594ef2,ticket:_0x4f3cda,body:_0xa5aade})=>{const _0x355dd9=a449_0xbf53f3;try{const _0x2a49b8=(0x0,exports[_0x355dd9(0x97)])(_0x4cf810),_0x2f0d87=await(0x0,graphAPI_1['sendAttachmentFromUrl'])(_0x4f3cda[_0x355dd9(0x96)][_0x355dd9(0x9a)],process[_0x355dd9(0x99)][_0x355dd9(0x84)]+_0x355dd9(0x8a)+_0x4f3cda[_0x355dd9(0x9e)]+'/'+_0x4cf810['filename'],_0x2a49b8,_0x4f3cda['whatsapp'][_0x355dd9(0x95)]);return await _0x4f3cda['update']({'lastMessage':_0xa5aade||_0x4cf810[_0x355dd9(0xa1)]}),fs_1[_0x355dd9(0x9d)]['unlinkSync'](_0x4cf810['path']),await(0x0,facebookMessageListener_1[_0x355dd9(0x94)])(_0x2f0d87,_0xa5aade||_0x4cf810[_0x355dd9(0xa1)],_0x4f3cda,_0x4f3cda[_0x355dd9(0x96)]),_0x2f0d87;}catch(_0x212287){throw new AppError_1['default'](_0x355dd9(0xa0));}};exports[a449_0xbf53f3(0x9d)]=sendFacebookMessageMedia;