'use strict';const a434_0x23932b=a434_0x4fc4;(function(_0x2c0166,_0x15afc4){const _0x4c70ae=a434_0x4fc4,_0x775681=_0x2c0166();while(!![]){try{const _0x229c8f=-parseInt(_0x4c70ae(0x101))/0x1*(-parseInt(_0x4c70ae(0x107))/0x2)+parseInt(_0x4c70ae(0x104))/0x3+-parseInt(_0x4c70ae(0xf7))/0x4*(-parseInt(_0x4c70ae(0xee))/0x5)+-parseInt(_0x4c70ae(0xf0))/0x6+-parseInt(_0x4c70ae(0xf9))/0x7*(parseInt(_0x4c70ae(0x103))/0x8)+-parseInt(_0x4c70ae(0xfa))/0x9+-parseInt(_0x4c70ae(0x10c))/0xa;if(_0x229c8f===_0x15afc4)break;else _0x775681['push'](_0x775681['shift']());}catch(_0x4bbd70){_0x775681['push'](_0x775681['shift']());}}}(a434_0x4bdd,0xce635));var __importDefault=this&&this[a434_0x23932b(0x10d)]||function(_0xef7eba){const _0x26af47=a434_0x23932b;return _0xef7eba&&_0xef7eba[_0x26af47(0xff)]?_0xef7eba:{'default':_0xef7eba};};function a434_0x4bdd(){const _0x8e61f5=['file','7831663IxVzUG','3842397WntBsO','path','image','defineProperty','number','__esModule','contact','58jtbhFG','companyId','8nzunHD','4697874Nwrxky','default','ERR_SENDING_FACEBOOK_MSG','56218kmZWvp','unlinkSync','whatsapp','sendAttachmentFromUrl','video','3089490pMFgxV','__importDefault','/public/company','BACKEND_URL','verifyMessage','typeAttachment','440635pdMSJJ','facebookUserToken','8264964ZDzSYj','update','mimetype','includes','audio','env','filename','40XzIVUs'];a434_0x4bdd=function(){return _0x8e61f5;};return a434_0x4bdd();}Object[a434_0x23932b(0xfd)](exports,a434_0x23932b(0xff),{'value':!![]}),exports[a434_0x23932b(0xed)]=void 0x0;const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require('../../errors/AppError')),graphAPI_1=require('./graphAPI'),facebookMessageListener_1=require('./facebookMessageListener'),typeAttachment=_0x254641=>{const _0x336144=a434_0x23932b;if(_0x254641[_0x336144(0xf2)][_0x336144(0xf3)](_0x336144(0xfc)))return'image';if(_0x254641[_0x336144(0xf2)]['includes'](_0x336144(0x10b)))return _0x336144(0x10b);if(_0x254641['mimetype'][_0x336144(0xf3)](_0x336144(0xf4)))return _0x336144(0xf4);return _0x336144(0xf8);};exports[a434_0x23932b(0xed)]=typeAttachment;const sendFacebookMessageMedia=async({media:_0x116777,url:_0x498a95,ticket:_0x56581a,body:_0x31d518})=>{const _0xf4092a=a434_0x23932b;try{const _0x6044b3=(0x0,exports['typeAttachment'])(_0x116777),_0x4cfe23=await(0x0,graphAPI_1[_0xf4092a(0x10a)])(_0x56581a[_0xf4092a(0x100)][_0xf4092a(0xfe)],process[_0xf4092a(0xf5)][_0xf4092a(0x10f)]+_0xf4092a(0x10e)+_0x56581a[_0xf4092a(0x102)]+'/'+_0x116777[_0xf4092a(0xf6)],_0x6044b3,_0x56581a[_0xf4092a(0x109)][_0xf4092a(0xef)]);return await _0x56581a[_0xf4092a(0xf1)]({'lastMessage':_0x31d518||_0x116777['filename']}),fs_1[_0xf4092a(0x105)][_0xf4092a(0x108)](_0x116777[_0xf4092a(0xfb)]),await(0x0,facebookMessageListener_1[_0xf4092a(0x110)])(_0x4cfe23,_0x31d518||_0x116777[_0xf4092a(0xf6)],_0x56581a,_0x56581a[_0xf4092a(0x100)]),_0x4cfe23;}catch(_0x4e8e69){throw new AppError_1['default'](_0xf4092a(0x106));}};function a434_0x4fc4(_0x2aa0a4,_0x592ca7){const _0x4bddf6=a434_0x4bdd();return a434_0x4fc4=function(_0x4fc4b5,_0x51e22f){_0x4fc4b5=_0x4fc4b5-0xed;let _0x34d474=_0x4bddf6[_0x4fc4b5];return _0x34d474;},a434_0x4fc4(_0x2aa0a4,_0x592ca7);}exports[a434_0x23932b(0x105)]=sendFacebookMessageMedia;