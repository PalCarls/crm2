'use strict';function a418_0x1045(){const _0x2163d4=['4605237qDdYRW','number','7573347YkjZsF','../../errors/AppError','__esModule','7924405PTWjhE','facebookUserToken','2724608XCqAWF','audio','companyId','__importDefault','./graphAPI','defineProperty','image','mimetype','30216yzMqgf','ERR_SENDING_FACEBOOK_MSG','env','4745888vYFpcP','30WuHKsR','whatsapp','722543mrRxhG','file','verifyMessage','path','/public/company','2gQwpoz','typeAttachment','update','includes','unlinkSync','203GxxpSf','contact','default','filename','./facebookMessageListener','video'];a418_0x1045=function(){return _0x2163d4;};return a418_0x1045();}const a418_0x4c100c=a418_0x1b48;function a418_0x1b48(_0x147236,_0x2adbd8){const _0x104545=a418_0x1045();return a418_0x1b48=function(_0x1b4893,_0x159893){_0x1b4893=_0x1b4893-0xeb;let _0x2f4283=_0x104545[_0x1b4893];return _0x2f4283;},a418_0x1b48(_0x147236,_0x2adbd8);}(function(_0x5885c2,_0x2a6c77){const _0x53c454=a418_0x1b48,_0x282f90=_0x5885c2();while(!![]){try{const _0x1c2e04=-parseInt(_0x53c454(0x106))/0x1*(parseInt(_0x53c454(0x10b))/0x2)+-parseInt(_0x53c454(0xf1))/0x3+-parseInt(_0x53c454(0x103))/0x4+parseInt(_0x53c454(0xf6))/0x5+parseInt(_0x53c454(0x100))/0x6*(-parseInt(_0x53c454(0xeb))/0x7)+parseInt(_0x53c454(0xf8))/0x8+-parseInt(_0x53c454(0xf3))/0x9*(-parseInt(_0x53c454(0x104))/0xa);if(_0x1c2e04===_0x2a6c77)break;else _0x282f90['push'](_0x282f90['shift']());}catch(_0x2aba15){_0x282f90['push'](_0x282f90['shift']());}}}(a418_0x1045,0xd1e78));var __importDefault=this&&this[a418_0x4c100c(0xfb)]||function(_0x25d930){const _0x4ee578=a418_0x4c100c;return _0x25d930&&_0x25d930[_0x4ee578(0xf5)]?_0x25d930:{'default':_0x25d930};};Object[a418_0x4c100c(0xfd)](exports,a418_0x4c100c(0xf5),{'value':!![]}),exports[a418_0x4c100c(0x10c)]=void 0x0;const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require(a418_0x4c100c(0xf4))),graphAPI_1=require(a418_0x4c100c(0xfc)),facebookMessageListener_1=require(a418_0x4c100c(0xef)),typeAttachment=_0x52e8b5=>{const _0x247eaf=a418_0x4c100c;if(_0x52e8b5[_0x247eaf(0xff)][_0x247eaf(0x10e)](_0x247eaf(0xfe)))return'image';if(_0x52e8b5[_0x247eaf(0xff)]['includes'](_0x247eaf(0xf0)))return'video';if(_0x52e8b5[_0x247eaf(0xff)][_0x247eaf(0x10e)](_0x247eaf(0xf9)))return _0x247eaf(0xf9);return _0x247eaf(0x107);};exports['typeAttachment']=typeAttachment;const sendFacebookMessageMedia=async({media:_0x33e603,url:_0x150843,ticket:_0x119164,body:_0x5bfac7})=>{const _0x319920=a418_0x4c100c;try{const _0x2e769b=(0x0,exports[_0x319920(0x10c)])(_0x33e603),_0x2e18e1=await(0x0,graphAPI_1['sendAttachmentFromUrl'])(_0x119164['contact'][_0x319920(0xf2)],process[_0x319920(0x102)]['BACKEND_URL']+_0x319920(0x10a)+_0x119164[_0x319920(0xfa)]+'/'+_0x33e603[_0x319920(0xee)],_0x2e769b,_0x119164[_0x319920(0x105)][_0x319920(0xf7)]);return await _0x119164[_0x319920(0x10d)]({'lastMessage':_0x5bfac7||_0x33e603[_0x319920(0xee)]}),fs_1[_0x319920(0xed)][_0x319920(0x10f)](_0x33e603[_0x319920(0x109)]),await(0x0,facebookMessageListener_1[_0x319920(0x108)])(_0x2e18e1,_0x5bfac7||_0x33e603['filename'],_0x119164,_0x119164[_0x319920(0xec)]),_0x2e18e1;}catch(_0x53e585){throw new AppError_1[(_0x319920(0xed))](_0x319920(0x101));}};exports[a418_0x4c100c(0xed)]=sendFacebookMessageMedia;