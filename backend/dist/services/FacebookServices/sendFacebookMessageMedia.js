'use strict';const a482_0x187791=a482_0x77b3;function a482_0x77b3(_0x542dce,_0x5ba500){const _0x12b84e=a482_0x12b8();return a482_0x77b3=function(_0x77b33a,_0x1c7d99){_0x77b33a=_0x77b33a-0x1ca;let _0x5b246f=_0x12b84e[_0x77b33a];return _0x5b246f;},a482_0x77b3(_0x542dce,_0x5ba500);}(function(_0x406daf,_0x1244ef){const _0xe09d9a=a482_0x77b3,_0xdde96d=_0x406daf();while(!![]){try{const _0x492344=parseInt(_0xe09d9a(0x1e3))/0x1*(parseInt(_0xe09d9a(0x1ca))/0x2)+parseInt(_0xe09d9a(0x1cf))/0x3*(-parseInt(_0xe09d9a(0x1d4))/0x4)+-parseInt(_0xe09d9a(0x1e7))/0x5*(-parseInt(_0xe09d9a(0x1e1))/0x6)+-parseInt(_0xe09d9a(0x1ce))/0x7*(-parseInt(_0xe09d9a(0x1db))/0x8)+parseInt(_0xe09d9a(0x1dc))/0x9*(parseInt(_0xe09d9a(0x1e5))/0xa)+parseInt(_0xe09d9a(0x1d6))/0xb*(-parseInt(_0xe09d9a(0x1f3))/0xc)+-parseInt(_0xe09d9a(0x1f4))/0xd;if(_0x492344===_0x1244ef)break;else _0xdde96d['push'](_0xdde96d['shift']());}catch(_0x2a544d){_0xdde96d['push'](_0xdde96d['shift']());}}}(a482_0x12b8,0xa2580));var __importDefault=this&&this[a482_0x187791(0x1d8)]||function(_0x403a60){return _0x403a60&&_0x403a60['__esModule']?_0x403a60:{'default':_0x403a60};};Object['defineProperty'](exports,a482_0x187791(0x1de),{'value':!![]}),exports['sendFacebookMessageFileExternal']=exports[a482_0x187791(0x1e6)]=exports['sendFacebookMessageMedia']=exports[a482_0x187791(0x1df)]=void 0x0;const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require('../../errors/AppError')),graphAPI_1=require(a482_0x187791(0x1d3)),typeAttachment=_0x4a116b=>{const _0x9e1f84=a482_0x187791;if(_0x4a116b[_0x9e1f84(0x1d5)][_0x9e1f84(0x1f0)](_0x9e1f84(0x1d9)))return _0x9e1f84(0x1d9);if(_0x4a116b[_0x9e1f84(0x1d5)]['includes'](_0x9e1f84(0x1d1)))return'video';if(_0x4a116b[_0x9e1f84(0x1d5)][_0x9e1f84(0x1f0)](_0x9e1f84(0x1cd)))return _0x9e1f84(0x1cd);return _0x9e1f84(0x1eb);};function a482_0x12b8(){const _0x567c52=['companyId','574159psaHDR','default','1570810hRrvnl','sendFacebookMessageMediaExternal','20sMlphv','update','facebookUserToken','contact','file','number','toString','BACKEND_URL','random','includes','unlinkSync','/public/company','1525404iGtmRe','11733241Wxapvi','.jpg}','4XjxDzv','sendFacebookMessageMedia','env','audio','3433535iuPtpM','3801351FAqBRX','path','video','ERR_SENDING_FACEBOOK_MSG','./graphAPI','4seSUDa','mimetype','77mHkXFv','sendAttachmentFromUrl','__importDefault','image','filename','8zsuOEE','54XHNwLs','whatsapp','__esModule','typeAttachment','sendFacebookMessageFileExternal','1714716AsiheM'];a482_0x12b8=function(){return _0x567c52;};return a482_0x12b8();}exports[a482_0x187791(0x1df)]=typeAttachment;const sendFacebookMessageMedia=async({media:_0x4c376d,ticket:_0x2ffd86,body:_0x4fd23d})=>{const _0x262a3a=a482_0x187791;try{const _0x154de7=(0x0,exports[_0x262a3a(0x1df)])(_0x4c376d),_0x4f00f7=process[_0x262a3a(0x1cc)][_0x262a3a(0x1ee)]+_0x262a3a(0x1f2)+_0x2ffd86[_0x262a3a(0x1e2)]+'/'+_0x4c376d[_0x262a3a(0x1da)],_0x62eb08=await(0x0,graphAPI_1[_0x262a3a(0x1d7)])(_0x2ffd86['contact']['number'],_0x4f00f7,_0x154de7,_0x2ffd86[_0x262a3a(0x1dd)][_0x262a3a(0x1e9)]);return await _0x2ffd86[_0x262a3a(0x1e8)]({'lastMessage':_0x4c376d[_0x262a3a(0x1da)]}),fs_1[_0x262a3a(0x1e4)][_0x262a3a(0x1f1)](_0x4c376d[_0x262a3a(0x1d0)]),_0x62eb08;}catch(_0x3238d6){throw new AppError_1[(_0x262a3a(0x1e4))](_0x262a3a(0x1d2));}};exports[a482_0x187791(0x1cb)]=sendFacebookMessageMedia;const sendFacebookMessageMediaExternal=async({url:_0x2fe190,ticket:_0x35de95,body:_0x13cfcb})=>{const _0x184cd7=a482_0x187791;try{const _0x38a84b=_0x184cd7(0x1d9),_0x3f8f14=await(0x0,graphAPI_1[_0x184cd7(0x1d7)])(_0x35de95['contact'][_0x184cd7(0x1ec)],_0x2fe190,_0x38a84b,_0x35de95[_0x184cd7(0x1dd)][_0x184cd7(0x1e9)]),_0x29ddb2=Math[_0x184cd7(0x1ef)]()[_0x184cd7(0x1ed)](0x24)['substring'](0x7);return await _0x35de95[_0x184cd7(0x1e8)]({'lastMessage':_0x13cfcb||_0x29ddb2+_0x184cd7(0x1f5)}),_0x3f8f14;}catch(_0xdb830b){throw new AppError_1[(_0x184cd7(0x1e4))](_0x184cd7(0x1d2));}};exports[a482_0x187791(0x1e6)]=sendFacebookMessageMediaExternal;const sendFacebookMessageFileExternal=async({url:_0x1b62e8,ticket:_0x1ce2ab,body:_0x163b68})=>{const _0x392fab=a482_0x187791;try{const _0x3016c4=_0x392fab(0x1eb),_0x4b2ea3=await(0x0,graphAPI_1[_0x392fab(0x1d7)])(_0x1ce2ab[_0x392fab(0x1ea)][_0x392fab(0x1ec)],_0x1b62e8,_0x3016c4,_0x1ce2ab[_0x392fab(0x1dd)][_0x392fab(0x1e9)]),_0x515e92=Math[_0x392fab(0x1ef)]()[_0x392fab(0x1ed)](0x24)['substring'](0x7);return await _0x1ce2ab[_0x392fab(0x1e8)]({'lastMessage':_0x163b68||_0x515e92+'.pdf}'}),_0x4b2ea3;}catch(_0x5dbbaf){throw new AppError_1[(_0x392fab(0x1e4))](_0x392fab(0x1d2));}};exports[a482_0x187791(0x1e0)]=sendFacebookMessageFileExternal;