'use strict';function a455_0xc3ba(){const _0x58cc30=['companyId','47278900KszZLj','7IyhkTC','/public/company','filename','facebookUserToken','image','sendAttachmentFromUrl','BACKEND_URL','__esModule','includes','audio','default','5ZXkuyE','./graphAPI','3010620GGGkqY','typeAttachment','unlinkSync','update','8161552nelhNA','../../errors/AppError','./facebookMessageListener','4518ikPZPJ','video','file','contact','path','number','verifyMessageFace','812Jswjuf','defineProperty','mimetype','4065804kmipwB','__importDefault','6772776shOGYU','whatsapp','1425865DkvaaY'];a455_0xc3ba=function(){return _0x58cc30;};return a455_0xc3ba();}const a455_0x5703eb=a455_0x4a4a;(function(_0x1b384e,_0x571401){const _0x55bf81=a455_0x4a4a,_0x558842=_0x1b384e();while(!![]){try{const _0x28048c=-parseInt(_0x55bf81(0xf7))/0x1+parseInt(_0x55bf81(0xf0))/0x2*(-parseInt(_0x55bf81(0xe9))/0x3)+parseInt(_0x55bf81(0x107))/0x4+parseInt(_0x55bf81(0x105))/0x5*(-parseInt(_0x55bf81(0xf5))/0x6)+parseInt(_0x55bf81(0xfa))/0x7*(-parseInt(_0x55bf81(0xe6))/0x8)+-parseInt(_0x55bf81(0xf3))/0x9+parseInt(_0x55bf81(0xf9))/0xa;if(_0x28048c===_0x571401)break;else _0x558842['push'](_0x558842['shift']());}catch(_0x4e38d2){_0x558842['push'](_0x558842['shift']());}}}(a455_0xc3ba,0xcdb02));function a455_0x4a4a(_0xb990d7,_0x170fd6){const _0xc3ba7f=a455_0xc3ba();return a455_0x4a4a=function(_0x4a4a38,_0x58f340){_0x4a4a38=_0x4a4a38-0xe4;let _0x1a4ec6=_0xc3ba7f[_0x4a4a38];return _0x1a4ec6;},a455_0x4a4a(_0xb990d7,_0x170fd6);}var __importDefault=this&&this[a455_0x5703eb(0xf4)]||function(_0x4ae390){const _0x4c6931=a455_0x5703eb;return _0x4ae390&&_0x4ae390[_0x4c6931(0x101)]?_0x4ae390:{'default':_0x4ae390};};Object[a455_0x5703eb(0xf1)](exports,a455_0x5703eb(0x101),{'value':!![]}),exports[a455_0x5703eb(0x108)]=void 0x0;const fs_1=__importDefault(require('fs')),AppError_1=__importDefault(require(a455_0x5703eb(0xe7))),graphAPI_1=require(a455_0x5703eb(0x106)),facebookMessageListener_1=require(a455_0x5703eb(0xe8)),typeAttachment=_0x2e0f96=>{const _0x1716a5=a455_0x5703eb;if(_0x2e0f96[_0x1716a5(0xf2)][_0x1716a5(0x102)](_0x1716a5(0xfe)))return'image';if(_0x2e0f96[_0x1716a5(0xf2)][_0x1716a5(0x102)](_0x1716a5(0xea)))return'video';if(_0x2e0f96[_0x1716a5(0xf2)][_0x1716a5(0x102)](_0x1716a5(0x103)))return _0x1716a5(0x103);return _0x1716a5(0xeb);};exports[a455_0x5703eb(0x108)]=typeAttachment;const sendFacebookMessageMedia=async({media:_0x143074,url:_0x4f22eb,ticket:_0x237847,body:_0x5f59e3})=>{const _0x3dfae8=a455_0x5703eb;try{const _0x36919f=(0x0,exports[_0x3dfae8(0x108)])(_0x143074),_0xb67812=await(0x0,graphAPI_1[_0x3dfae8(0xff)])(_0x237847[_0x3dfae8(0xec)][_0x3dfae8(0xee)],process['env'][_0x3dfae8(0x100)]+_0x3dfae8(0xfb)+_0x237847[_0x3dfae8(0xf8)]+'/'+_0x143074['filename'],_0x36919f,_0x237847[_0x3dfae8(0xf6)][_0x3dfae8(0xfd)]);return await _0x237847[_0x3dfae8(0xe5)]({'lastMessage':_0x5f59e3||_0x143074[_0x3dfae8(0xfc)]}),fs_1['default'][_0x3dfae8(0xe4)](_0x143074[_0x3dfae8(0xed)]),await(0x0,facebookMessageListener_1[_0x3dfae8(0xef)])(_0xb67812,_0x5f59e3||_0x143074[_0x3dfae8(0xfc)],_0x237847,_0x237847[_0x3dfae8(0xec)]),_0xb67812;}catch(_0x116d13){throw new AppError_1[(_0x3dfae8(0x104))]('ERR_SENDING_FACEBOOK_MSG');}};exports[a455_0x5703eb(0x104)]=sendFacebookMessageMedia;