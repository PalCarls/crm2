'use strict';const a270_0x263e4c=a270_0x5fc0;function a270_0x55f2(){const _0x395f2a=['19489580pJEszQ','update','verify','secret','4104045YeIHAH','810knRGRk','defineProperty','getIO','ERR_SESSION_EXPIRED','split','default','headers','Invalid\x20token.\x20We\x27ll\x20try\x20to\x20assign\x20a\x20new\x20one\x20on\x20next\x20request','user','__esModule','10162DsPANN','../libs/socket','statusCode','emit','111807fVSUGf','84573EfCyvW','__importDefault','12256uVgzhj','84bbQFMD','jsonwebtoken','../config/auth','165oaKAbA','message','companyId','reload','../services/UserServices/ShowUserService','3169866TjhjLa','12QwqUzw','133ibaXsN','online','updatedAt','authorization'];a270_0x55f2=function(){return _0x395f2a;};return a270_0x55f2();}(function(_0x146f24,_0x1be4dc){const _0xbb0a8d=a270_0x5fc0,_0x18ff9a=_0x146f24();while(!![]){try{const _0x36df64=parseInt(_0xbb0a8d(0x8b))/0x1*(-parseInt(_0xbb0a8d(0xa5))/0x2)+-parseInt(_0xbb0a8d(0xa9))/0x3*(parseInt(_0xbb0a8d(0xad))/0x4)+-parseInt(_0xbb0a8d(0x9a))/0x5+parseInt(_0xbb0a8d(0x90))/0x6+-parseInt(_0xbb0a8d(0x92))/0x7*(parseInt(_0xbb0a8d(0xac))/0x8)+parseInt(_0xbb0a8d(0xaa))/0x9*(parseInt(_0xbb0a8d(0x9b))/0xa)+parseInt(_0xbb0a8d(0x96))/0xb*(parseInt(_0xbb0a8d(0x91))/0xc);if(_0x36df64===_0x1be4dc)break;else _0x18ff9a['push'](_0x18ff9a['shift']());}catch(_0x518cde){_0x18ff9a['push'](_0x18ff9a['shift']());}}}(a270_0x55f2,0x901ed));function a270_0x5fc0(_0x1e4b04,_0x50f41b){const _0x55f244=a270_0x55f2();return a270_0x5fc0=function(_0x5fc097,_0xf42647){_0x5fc097=_0x5fc097-0x8b;let _0x2931cf=_0x55f244[_0x5fc097];return _0x2931cf;},a270_0x5fc0(_0x1e4b04,_0x50f41b);}var __importDefault=this&&this[a270_0x263e4c(0xab)]||function(_0x376f24){const _0x4b49bf=a270_0x263e4c;return _0x376f24&&_0x376f24[_0x4b49bf(0xa4)]?_0x376f24:{'default':_0x376f24};};Object[a270_0x263e4c(0x9c)](exports,a270_0x263e4c(0xa4),{'value':!![]});const jsonwebtoken_1=require(a270_0x263e4c(0xae)),AppError_1=__importDefault(require('../errors/AppError')),auth_1=__importDefault(require(a270_0x263e4c(0xaf))),socket_1=require(a270_0x263e4c(0xa6)),ShowUserService_1=__importDefault(require(a270_0x263e4c(0x8f))),updateUser=async _0x4e7f4b=>{const _0xb814f=a270_0x263e4c,_0x5bbb8c=await(0x0,ShowUserService_1[_0xb814f(0xa0)])(_0x4e7f4b);_0x5bbb8c['changed'](_0xb814f(0x94),!![]);let _0x4136ae=null;_0x4136ae={'updatedAt':new Date()};if(!_0x5bbb8c[_0xb814f(0x93)]){_0x4136ae={..._0x4136ae,'online':!![]},await _0x5bbb8c[_0xb814f(0x97)](_0x4136ae),await _0x5bbb8c[_0xb814f(0x8e)]();const _0x346a60=(0x0,socket_1[_0xb814f(0x9d)])();_0x346a60[_0xb814f(0xa8)]('user'+_0x5bbb8c[_0xb814f(0x8d)],{'action':_0xb814f(0x97),'user':_0x5bbb8c});}else await _0x5bbb8c['update'](_0x4136ae);},isAuth=async(_0x539ca0,_0x30a94b,_0x329092)=>{const _0x440847=a270_0x263e4c,_0x3b99bf=_0x539ca0[_0x440847(0xa1)][_0x440847(0x95)];if(!_0x3b99bf)throw new AppError_1[(_0x440847(0xa0))](_0x440847(0x9e),0x191);const [,_0x58bbd5]=_0x3b99bf[_0x440847(0x9f)]('\x20');try{const _0x5e07e9=(0x0,jsonwebtoken_1[_0x440847(0x98)])(_0x58bbd5,auth_1[_0x440847(0xa0)][_0x440847(0x99)]),{id:_0x50122e,profile:_0x28875a,companyId:_0x55ec4c}=_0x5e07e9;updateUser(_0x50122e),_0x539ca0[_0x440847(0xa3)]={'id':_0x50122e,'profile':_0x28875a,'companyId':_0x55ec4c};}catch(_0x1508d1){if(_0x1508d1[_0x440847(0x8c)]===_0x440847(0x9e)&&_0x1508d1[_0x440847(0xa7)]===0x191)throw new AppError_1[(_0x440847(0xa0))](_0x1508d1[_0x440847(0x8c)],0x191);else throw new AppError_1['default'](_0x440847(0xa2),0x193);}return _0x329092();};exports[a270_0x263e4c(0xa0)]=isAuth;