'use strict';const a261_0x47246d=a261_0x2ab3;(function(_0x1e0275,_0x5d8ee3){const _0x24c0d0=a261_0x2ab3,_0x15402a=_0x1e0275();while(!![]){try{const _0x1c323a=-parseInt(_0x24c0d0(0x195))/0x1*(-parseInt(_0x24c0d0(0x186))/0x2)+parseInt(_0x24c0d0(0x184))/0x3+parseInt(_0x24c0d0(0x18d))/0x4*(-parseInt(_0x24c0d0(0x18b))/0x5)+parseInt(_0x24c0d0(0x18a))/0x6+parseInt(_0x24c0d0(0x196))/0x7*(-parseInt(_0x24c0d0(0x190))/0x8)+parseInt(_0x24c0d0(0x198))/0x9*(-parseInt(_0x24c0d0(0x191))/0xa)+parseInt(_0x24c0d0(0x183))/0xb;if(_0x1c323a===_0x5d8ee3)break;else _0x15402a['push'](_0x15402a['shift']());}catch(_0x174238){_0x15402a['push'](_0x15402a['shift']());}}}(a261_0x14cf,0x57189));var __importDefault=this&&this[a261_0x47246d(0x185)]||function(_0x30c995){return _0x30c995&&_0x30c995['__esModule']?_0x30c995:{'default':_0x30c995};};function a261_0x2ab3(_0x4802ca,_0x3a7759){const _0x14cf18=a261_0x14cf();return a261_0x2ab3=function(_0x2ab351,_0x4c4080){_0x2ab351=_0x2ab351-0x17e;let _0x13ab8b=_0x14cf18[_0x2ab351];return _0x13ab8b;},a261_0x2ab3(_0x4802ca,_0x3a7759);}Object['defineProperty'](exports,a261_0x47246d(0x182),{'value':!![]});function a261_0x14cf(){const _0x12858a=['39450KiLmEE','companyId','message','../services/UserServices/ShowUserService','2141178HqjQsd','60ULzXQw','updatedAt','38660NKRBFP','../errors/AppError','default','1424bkczIJ','850RjzuLx','secret','changed','update','16skVFPM','19271ukZUaU','verify','17469lUBeSQ','user','statusCode','ERR_SESSION_EXPIRED','getIO','../libs/socket','authorization','__esModule','4417369BmWknR','161106BIwozS','__importDefault'];a261_0x14cf=function(){return _0x12858a;};return a261_0x14cf();}const jsonwebtoken_1=require('jsonwebtoken'),AppError_1=__importDefault(require(a261_0x47246d(0x18e))),auth_1=__importDefault(require('../config/auth')),socket_1=require(a261_0x47246d(0x180)),ShowUserService_1=__importDefault(require(a261_0x47246d(0x189))),updateUser=async _0x45aac4=>{const _0x120aaa=a261_0x47246d,_0x1c771a=await(0x0,ShowUserService_1[_0x120aaa(0x18f)])(_0x45aac4);_0x1c771a[_0x120aaa(0x193)](_0x120aaa(0x18c),!![]);let _0x4d3bbf=null;_0x4d3bbf={'updatedAt':new Date()};if(!_0x1c771a['online']){_0x4d3bbf={..._0x4d3bbf,'online':!![]},await _0x1c771a['update'](_0x4d3bbf),await _0x1c771a['reload']();const _0xca2039=(0x0,socket_1[_0x120aaa(0x17f)])();_0xca2039['emit'](_0x120aaa(0x199)+_0x1c771a[_0x120aaa(0x187)],{'action':'update','user':_0x1c771a});}else await _0x1c771a[_0x120aaa(0x194)](_0x4d3bbf);},isAuth=async(_0xed0916,_0x288f9e,_0xf11fc3)=>{const _0x134304=a261_0x47246d,_0x4c680b=_0xed0916['headers'][_0x134304(0x181)];if(!_0x4c680b)throw new AppError_1[(_0x134304(0x18f))]('ERR_SESSION_EXPIRED',0x191);const [,_0x4514e1]=_0x4c680b['split']('\x20');try{const _0x49e8a8=(0x0,jsonwebtoken_1[_0x134304(0x197)])(_0x4514e1,auth_1[_0x134304(0x18f)][_0x134304(0x192)]),{id:_0x1f9688,profile:_0x4bfea8,companyId:_0x596f4a}=_0x49e8a8;updateUser(_0x1f9688),_0xed0916[_0x134304(0x199)]={'id':_0x1f9688,'profile':_0x4bfea8,'companyId':_0x596f4a};}catch(_0x28ffd9){if(_0x28ffd9[_0x134304(0x188)]===_0x134304(0x17e)&&_0x28ffd9[_0x134304(0x19a)]===0x191)throw new AppError_1[(_0x134304(0x18f))](_0x28ffd9['message'],0x191);else throw new AppError_1[(_0x134304(0x18f))]('Invalid\x20token.\x20We\x27ll\x20try\x20to\x20assign\x20a\x20new\x20one\x20on\x20next\x20request',0x193);}return _0xf11fc3();};exports['default']=isAuth;