'use strict';const a288_0x526767=a288_0x3501;function a288_0x3501(_0x496596,_0x68fce0){const _0x4fae1e=a288_0x4fae();return a288_0x3501=function(_0x3501f6,_0x5bbe01){_0x3501f6=_0x3501f6-0x1b5;let _0x2369b1=_0x4fae1e[_0x3501f6];return _0x2369b1;},a288_0x3501(_0x496596,_0x68fce0);}(function(_0x53034a,_0x22bf72){const _0x37e0f6=a288_0x3501,_0x2f1a70=_0x53034a();while(!![]){try{const _0x2fa037=-parseInt(_0x37e0f6(0x1c0))/0x1+-parseInt(_0x37e0f6(0x1c4))/0x2+parseInt(_0x37e0f6(0x1b8))/0x3+parseInt(_0x37e0f6(0x1bb))/0x4*(-parseInt(_0x37e0f6(0x1c9))/0x5)+-parseInt(_0x37e0f6(0x1c3))/0x6+-parseInt(_0x37e0f6(0x1ce))/0x7+parseInt(_0x37e0f6(0x1c8))/0x8;if(_0x2fa037===_0x22bf72)break;else _0x2f1a70['push'](_0x2f1a70['shift']());}catch(_0x40f431){_0x2f1a70['push'](_0x2f1a70['shift']());}}}(a288_0x4fae,0xad692));var __importDefault=this&&this[a288_0x526767(0x1d1)]||function(_0x60c00f){const _0x13da33=a288_0x526767;return _0x60c00f&&_0x60c00f[_0x13da33(0x1d3)]?_0x60c00f:{'default':_0x60c00f};};function a288_0x4fae(){const _0x245e99=['ERR_SESSION_EXPIRED','../errors/AppError','../libs/socket','default','headers','1871775PpCvYp','online','../services/UserServices/ShowUserService','32axLhFm','updatedAt','defineProperty','emit','verify','923734uioQSw','getIO','Invalid\x20token.\x20We\x27ll\x20try\x20to\x20assign\x20a\x20new\x20one\x20on\x20next\x20request','3562284nMemBa','2097704UCXqsA','changed','jsonwebtoken','update','32738992NHrBJn','67135nCEGDm','user','reload','split','authorization','9326051mOozsn','secret','statusCode','__importDefault','message','__esModule'];a288_0x4fae=function(){return _0x245e99;};return a288_0x4fae();}Object[a288_0x526767(0x1bd)](exports,a288_0x526767(0x1d3),{'value':!![]});const jsonwebtoken_1=require(a288_0x526767(0x1c6)),AppError_1=__importDefault(require(a288_0x526767(0x1d5))),auth_1=__importDefault(require('../config/auth')),socket_1=require(a288_0x526767(0x1b5)),ShowUserService_1=__importDefault(require(a288_0x526767(0x1ba))),updateUser=async(_0x47d1ca,_0x10b027)=>{const _0x5e6c8f=a288_0x526767,_0x26e0c6=await(0x0,ShowUserService_1['default'])(_0x47d1ca,_0x10b027);_0x26e0c6[_0x5e6c8f(0x1c5)](_0x5e6c8f(0x1bc),!![]);let _0x483ace=null;_0x483ace={'updatedAt':new Date()};if(!_0x26e0c6[_0x5e6c8f(0x1b9)]){_0x483ace={..._0x483ace,'online':!![]},await _0x26e0c6[_0x5e6c8f(0x1c7)](_0x483ace),await _0x26e0c6[_0x5e6c8f(0x1cb)]();const _0x2f072a=(0x0,socket_1[_0x5e6c8f(0x1c1)])();_0x2f072a[_0x5e6c8f(0x1be)](_0x5e6c8f(0x1ca)+_0x26e0c6['companyId'],{'action':_0x5e6c8f(0x1c7),'user':_0x26e0c6});}else await _0x26e0c6[_0x5e6c8f(0x1c7)](_0x483ace);},isAuth=async(_0x26b7db,_0x3efc94,_0x1cba18)=>{const _0x5aef69=a288_0x526767,_0x4a97d9=_0x26b7db[_0x5aef69(0x1b7)][_0x5aef69(0x1cd)];if(!_0x4a97d9)throw new AppError_1[(_0x5aef69(0x1b6))](_0x5aef69(0x1d4),0x191);const [,_0x564e30]=_0x4a97d9[_0x5aef69(0x1cc)]('\x20');try{const _0x1a1de1=(0x0,jsonwebtoken_1[_0x5aef69(0x1bf)])(_0x564e30,auth_1[_0x5aef69(0x1b6)][_0x5aef69(0x1cf)]),{id:_0x111113,profile:_0x378cc1,companyId:_0x3c069f}=_0x1a1de1;updateUser(_0x111113,_0x3c069f),_0x26b7db[_0x5aef69(0x1ca)]={'id':_0x111113,'profile':_0x378cc1,'companyId':_0x3c069f};}catch(_0x3e8dff){if(_0x3e8dff[_0x5aef69(0x1d2)]===_0x5aef69(0x1d4)&&_0x3e8dff[_0x5aef69(0x1d0)]===0x191)throw new AppError_1[(_0x5aef69(0x1b6))](_0x3e8dff[_0x5aef69(0x1d2)],0x191);else throw new AppError_1[(_0x5aef69(0x1b6))](_0x5aef69(0x1c2),0x193);}return _0x1cba18();};exports['default']=isAuth;