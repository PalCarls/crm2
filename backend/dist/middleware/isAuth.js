'use strict';const a260_0x2110aa=a260_0x194f;function a260_0x194f(_0x596cc2,_0x3051d7){const _0x1a2a5f=a260_0x1a2a();return a260_0x194f=function(_0x194fb2,_0x469628){_0x194fb2=_0x194fb2-0x13d;let _0x43b2fe=_0x1a2a5f[_0x194fb2];return _0x43b2fe;},a260_0x194f(_0x596cc2,_0x3051d7);}(function(_0x213a75,_0xc5f4a8){const _0x4b2cc2=a260_0x194f,_0x5b97b8=_0x213a75();while(!![]){try{const _0x4f76e4=-parseInt(_0x4b2cc2(0x14f))/0x1+-parseInt(_0x4b2cc2(0x151))/0x2*(-parseInt(_0x4b2cc2(0x149))/0x3)+-parseInt(_0x4b2cc2(0x141))/0x4+-parseInt(_0x4b2cc2(0x148))/0x5+parseInt(_0x4b2cc2(0x14a))/0x6+-parseInt(_0x4b2cc2(0x152))/0x7+parseInt(_0x4b2cc2(0x140))/0x8*(parseInt(_0x4b2cc2(0x142))/0x9);if(_0x4f76e4===_0xc5f4a8)break;else _0x5b97b8['push'](_0x5b97b8['shift']());}catch(_0x51b680){_0x5b97b8['push'](_0x5b97b8['shift']());}}}(a260_0x1a2a,0x548c4));var __importDefault=this&&this['__importDefault']||function(_0x5cbdd0){const _0x5f4d5f=a260_0x194f;return _0x5cbdd0&&_0x5cbdd0[_0x5f4d5f(0x153)]?_0x5cbdd0:{'default':_0x5cbdd0};};Object[a260_0x2110aa(0x155)](exports,a260_0x2110aa(0x153),{'value':!![]});function a260_0x1a2a(){const _0x25eeb3=['../services/UserServices/ShowUserService','8yAauZy','2471408mpabeB','6515307YXMSpN','Invalid\x20token.\x20We\x27ll\x20try\x20to\x20assign\x20a\x20new\x20one\x20on\x20next\x20request','message','updatedAt','companyId','default','291320IhiZvf','1897566jQMjfl','1571076KEzOks','update','ERR_SESSION_EXPIRED','online','reload','452605nfxIQv','getIO','2MAphsr','1002834dTeZTp','__esModule','user','defineProperty','split','emit','verify','statusCode'];a260_0x1a2a=function(){return _0x25eeb3;};return a260_0x1a2a();}const jsonwebtoken_1=require('jsonwebtoken'),AppError_1=__importDefault(require('../errors/AppError')),auth_1=__importDefault(require('../config/auth')),socket_1=require('../libs/socket'),ShowUserService_1=__importDefault(require(a260_0x2110aa(0x13f))),updateUser=async _0x2f2de4=>{const _0x1291b2=a260_0x2110aa,_0x56d504=await(0x0,ShowUserService_1[_0x1291b2(0x147)])(_0x2f2de4);_0x56d504['changed'](_0x1291b2(0x145),!![]);let _0x248c93=null;_0x248c93={'updatedAt':new Date()};if(!_0x56d504[_0x1291b2(0x14d)]){_0x248c93={..._0x248c93,'online':!![]},await _0x56d504[_0x1291b2(0x14b)](_0x248c93),await _0x56d504[_0x1291b2(0x14e)]();const _0x10f7e8=(0x0,socket_1[_0x1291b2(0x150)])();_0x10f7e8[_0x1291b2(0x157)](_0x1291b2(0x154)+_0x56d504[_0x1291b2(0x146)],{'action':_0x1291b2(0x14b),'user':_0x56d504});}else await _0x56d504[_0x1291b2(0x14b)](_0x248c93);},isAuth=async(_0x57bb96,_0x2e14b4,_0x364153)=>{const _0x523b68=a260_0x2110aa,_0x44a418=_0x57bb96['headers']['authorization'];if(!_0x44a418)throw new AppError_1[(_0x523b68(0x147))](_0x523b68(0x14c),0x191);const [,_0x226490]=_0x44a418[_0x523b68(0x156)]('\x20');try{const _0x45a186=(0x0,jsonwebtoken_1[_0x523b68(0x13d)])(_0x226490,auth_1['default']['secret']),{id:_0x5ae53c,profile:_0x2972d7,companyId:_0x202bfd}=_0x45a186;updateUser(_0x5ae53c),_0x57bb96[_0x523b68(0x154)]={'id':_0x5ae53c,'profile':_0x2972d7,'companyId':_0x202bfd};}catch(_0x53d018){if(_0x53d018['message']==='ERR_SESSION_EXPIRED'&&_0x53d018[_0x523b68(0x13e)]===0x191)throw new AppError_1[(_0x523b68(0x147))](_0x53d018[_0x523b68(0x144)],0x191);else throw new AppError_1[(_0x523b68(0x147))](_0x523b68(0x143),0x193);}return _0x364153();};exports[a260_0x2110aa(0x147)]=isAuth;