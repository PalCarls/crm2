'use strict';const a296_0x21ac80=a296_0x3ff0;(function(_0x4dfcee,_0x2e4a05){const _0x32cfa4=a296_0x3ff0,_0xf858b=_0x4dfcee();while(!![]){try{const _0x141717=-parseInt(_0x32cfa4(0x1b1))/0x1+parseInt(_0x32cfa4(0x1a3))/0x2*(-parseInt(_0x32cfa4(0x19a))/0x3)+parseInt(_0x32cfa4(0x1af))/0x4*(-parseInt(_0x32cfa4(0x1b5))/0x5)+parseInt(_0x32cfa4(0x199))/0x6*(parseInt(_0x32cfa4(0x1a0))/0x7)+-parseInt(_0x32cfa4(0x1b6))/0x8+parseInt(_0x32cfa4(0x196))/0x9*(parseInt(_0x32cfa4(0x1a6))/0xa)+parseInt(_0x32cfa4(0x1ad))/0xb;if(_0x141717===_0x2e4a05)break;else _0xf858b['push'](_0xf858b['shift']());}catch(_0x41eb83){_0xf858b['push'](_0xf858b['shift']());}}}(a296_0x32ea,0xc2702));var __importDefault=this&&this[a296_0x21ac80(0x1b4)]||function(_0xe3f2fc){const _0x5e4d33=a296_0x21ac80;return _0xe3f2fc&&_0xe3f2fc[_0x5e4d33(0x1a1)]?_0xe3f2fc:{'default':_0xe3f2fc};};function a296_0x3ff0(_0x309b14,_0x1bef05){const _0x32ea17=a296_0x32ea();return a296_0x3ff0=function(_0x3ff03a,_0x2f616f){_0x3ff03a=_0x3ff03a-0x196;let _0x49ccd9=_0x32ea17[_0x3ff03a];return _0x49ccd9;},a296_0x3ff0(_0x309b14,_0x1bef05);}Object[a296_0x21ac80(0x1a9)](exports,'__esModule',{'value':!![]});const jsonwebtoken_1=require('jsonwebtoken'),AppError_1=__importDefault(require('../errors/AppError')),auth_1=__importDefault(require(a296_0x21ac80(0x1b2))),socket_1=require(a296_0x21ac80(0x19f)),ShowUserService_1=__importDefault(require(a296_0x21ac80(0x197))),updateUser=async(_0x11020f,_0x4bc903)=>{const _0x1da932=a296_0x21ac80,_0x4c1242=await(0x0,ShowUserService_1[_0x1da932(0x1b7)])(_0x11020f,_0x4bc903);_0x4c1242[_0x1da932(0x1ae)](_0x1da932(0x1a4),!![]);let _0x35cd4f=null;_0x35cd4f={'updatedAt':new Date()};if(!_0x4c1242[_0x1da932(0x1ab)]){_0x35cd4f={..._0x35cd4f,'online':!![]},await _0x4c1242[_0x1da932(0x1a8)](_0x35cd4f),await _0x4c1242['reload']();const _0x1d8982=(0x0,socket_1[_0x1da932(0x1b3)])();_0x1d8982[_0x1da932(0x1a5)](_0x1da932(0x1a7)+_0x4c1242[_0x1da932(0x19e)],{'action':_0x1da932(0x1a8),'user':_0x4c1242});}else await _0x4c1242[_0x1da932(0x1a8)](_0x35cd4f);},isAuth=async(_0x791a0c,_0x30a09c,_0x54f224)=>{const _0x18ff1e=a296_0x21ac80,_0x3e1d45=_0x791a0c[_0x18ff1e(0x198)]['authorization'];if(!_0x3e1d45)throw new AppError_1[(_0x18ff1e(0x1b7))](_0x18ff1e(0x19b),0x191);const [,_0x3272d8]=_0x3e1d45[_0x18ff1e(0x1aa)]('\x20');try{const _0x2941a8=(0x0,jsonwebtoken_1[_0x18ff1e(0x1a2)])(_0x3272d8,auth_1['default'][_0x18ff1e(0x19d)]),{id:_0x4c5f5a,profile:_0x16c8ef,companyId:_0x247396}=_0x2941a8;updateUser(_0x4c5f5a,_0x247396),_0x791a0c['user']={'id':_0x4c5f5a,'profile':_0x16c8ef,'companyId':_0x247396};}catch(_0x10acc7){if(_0x10acc7['message']==='ERR_SESSION_EXPIRED'&&_0x10acc7[_0x18ff1e(0x19c)]===0x191)throw new AppError_1[(_0x18ff1e(0x1b7))](_0x10acc7[_0x18ff1e(0x1ac)],0x191);else throw new AppError_1[(_0x18ff1e(0x1b7))](_0x18ff1e(0x1b0),0x193);}return _0x54f224();};exports[a296_0x21ac80(0x1b7)]=isAuth;function a296_0x32ea(){const _0x18b94f=['6NMjyjx','2123466giWRrw','ERR_SESSION_EXPIRED','statusCode','secret','companyId','../libs/socket','1343013teOnUN','__esModule','verify','2AVkYpJ','updatedAt','emit','200EcDblI','user','update','defineProperty','split','online','message','36650493BtWkKs','changed','120zlzHaP','Invalid\x20token.\x20We\x27ll\x20try\x20to\x20assign\x20a\x20new\x20one\x20on\x20next\x20request','900698wLRyah','../config/auth','getIO','__importDefault','170455qANVvP','5945552vlPTNi','default','291213gEekJY','../services/UserServices/ShowUserService','headers'];a296_0x32ea=function(){return _0x18b94f;};return a296_0x32ea();}