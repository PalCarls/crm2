'use strict';const a270_0x1fc075=a270_0xc06a;(function(_0x23f5d9,_0x90e8eb){const _0x7f4350=a270_0xc06a,_0x30fc61=_0x23f5d9();while(!![]){try{const _0x27d54c=parseInt(_0x7f4350(0x16d))/0x1*(parseInt(_0x7f4350(0x179))/0x2)+parseInt(_0x7f4350(0x17d))/0x3+-parseInt(_0x7f4350(0x16a))/0x4*(-parseInt(_0x7f4350(0x17a))/0x5)+-parseInt(_0x7f4350(0x17f))/0x6*(parseInt(_0x7f4350(0x176))/0x7)+parseInt(_0x7f4350(0x187))/0x8*(-parseInt(_0x7f4350(0x170))/0x9)+parseInt(_0x7f4350(0x188))/0xa*(parseInt(_0x7f4350(0x16f))/0xb)+parseInt(_0x7f4350(0x16b))/0xc*(-parseInt(_0x7f4350(0x184))/0xd);if(_0x27d54c===_0x90e8eb)break;else _0x30fc61['push'](_0x30fc61['shift']());}catch(_0xc12be6){_0x30fc61['push'](_0x30fc61['shift']());}}}(a270_0xa451,0x535b7));var __importDefault=this&&this[a270_0x1fc075(0x182)]||function(_0x34f30f){const _0x3b27be=a270_0x1fc075;return _0x34f30f&&_0x34f30f[_0x3b27be(0x16c)]?_0x34f30f:{'default':_0x34f30f};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const jsonwebtoken_1=require(a270_0x1fc075(0x177)),AppError_1=__importDefault(require('../errors/AppError')),auth_1=__importDefault(require('../config/auth')),socket_1=require(a270_0x1fc075(0x189)),ShowUserService_1=__importDefault(require(a270_0x1fc075(0x174))),updateUser=async _0x44af60=>{const _0x40dc84=a270_0x1fc075,_0x702781=await(0x0,ShowUserService_1[_0x40dc84(0x180)])(_0x44af60);_0x702781['changed']('updatedAt',!![]);let _0xc1509b=null;_0xc1509b={'updatedAt':new Date()};if(!_0x702781[_0x40dc84(0x186)]){_0xc1509b={..._0xc1509b,'online':!![]},await _0x702781[_0x40dc84(0x17e)](_0xc1509b),await _0x702781[_0x40dc84(0x169)]();const _0x1c2a60=(0x0,socket_1[_0x40dc84(0x171)])();_0x1c2a60['emit'](_0x40dc84(0x172)+_0x702781[_0x40dc84(0x185)],{'action':_0x40dc84(0x17e),'user':_0x702781});}else await _0x702781[_0x40dc84(0x17e)](_0xc1509b);},isAuth=async(_0x3cd569,_0x18c889,_0xeb3ed5)=>{const _0x5b5a68=a270_0x1fc075,_0x56b203=_0x3cd569['headers'][_0x5b5a68(0x16e)];if(!_0x56b203)throw new AppError_1[(_0x5b5a68(0x180))]('ERR_SESSION_EXPIRED',0x191);const [,_0xb59633]=_0x56b203[_0x5b5a68(0x175)]('\x20');try{const _0x47f76a=(0x0,jsonwebtoken_1[_0x5b5a68(0x181)])(_0xb59633,auth_1['default'][_0x5b5a68(0x178)]),{id:_0x2a68d1,profile:_0x180efa,companyId:_0x4e745b}=_0x47f76a;updateUser(_0x2a68d1),_0x3cd569[_0x5b5a68(0x172)]={'id':_0x2a68d1,'profile':_0x180efa,'companyId':_0x4e745b};}catch(_0x5e5f27){if(_0x5e5f27[_0x5b5a68(0x17b)]===_0x5b5a68(0x183)&&_0x5e5f27[_0x5b5a68(0x173)]===0x191)throw new AppError_1[(_0x5b5a68(0x180))](_0x5e5f27[_0x5b5a68(0x17b)],0x191);else throw new AppError_1[(_0x5b5a68(0x180))](_0x5b5a68(0x17c),0x193);}return _0xeb3ed5();};function a270_0xa451(){const _0x1c1131=['426591JNYGGV','update','150nPoKMo','default','verify','__importDefault','ERR_SESSION_EXPIRED','3225833XmCwbc','companyId','online','578408BWMzJT','10xyFCdy','../libs/socket','reload','16gTkIAA','12QhLokt','__esModule','26957jhGeQL','authorization','6880049UDrvXF','81lrOHOY','getIO','user','statusCode','../services/UserServices/ShowUserService','split','64652vBfIqv','jsonwebtoken','secret','18knSWlQ','576140pOfSIA','message','Invalid\x20token.\x20We\x27ll\x20try\x20to\x20assign\x20a\x20new\x20one\x20on\x20next\x20request'];a270_0xa451=function(){return _0x1c1131;};return a270_0xa451();}function a270_0xc06a(_0x12ca80,_0x3c206e){const _0xa451ba=a270_0xa451();return a270_0xc06a=function(_0xc06a6e,_0x21b681){_0xc06a6e=_0xc06a6e-0x169;let _0x1cdeb0=_0xa451ba[_0xc06a6e];return _0x1cdeb0;},a270_0xc06a(_0x12ca80,_0x3c206e);}exports[a270_0x1fc075(0x180)]=isAuth;