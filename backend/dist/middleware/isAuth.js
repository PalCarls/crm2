'use strict';function a245_0xaa6c(_0x527152,_0x55f0a2){const _0x4a095f=a245_0x4a09();return a245_0xaa6c=function(_0xaa6cff,_0x47b01f){_0xaa6cff=_0xaa6cff-0x1c5;let _0x52e9a9=_0x4a095f[_0xaa6cff];return _0x52e9a9;},a245_0xaa6c(_0x527152,_0x55f0a2);}function a245_0x4a09(){const _0x5148a7=['9YRrryA','../config/auth','ERR_SESSION_EXPIRED','getIO','14474500gcFZpH','331320bcfzzJ','../libs/socket','1020jTKJWV','__esModule','secret','defineProperty','emit','message','verify','reload','statusCode','default','5546345pMDSDh','../services/UserServices/ShowUserService','authorization','185FFBsNG','../errors/AppError','Invalid\x20token.\x20We\x27ll\x20try\x20to\x20assign\x20a\x20new\x20one\x20on\x20next\x20request','update','38195cwwbNV','3262312onzdsA','user','10334704IYgWFW','jsonwebtoken','changed','8634FYJjGa','split'];a245_0x4a09=function(){return _0x5148a7;};return a245_0x4a09();}const a245_0x1d874f=a245_0xaa6c;(function(_0x2102f5,_0x1826ce){const _0x131505=a245_0xaa6c,_0x52cec7=_0x2102f5();while(!![]){try{const _0x1b968b=parseInt(_0x131505(0x1dc))/0x1*(-parseInt(_0x131505(0x1c6))/0x2)+parseInt(_0x131505(0x1cd))/0x3+parseInt(_0x131505(0x1e1))/0x4+parseInt(_0x131505(0x1e0))/0x5*(parseInt(_0x131505(0x1cf))/0x6)+-parseInt(_0x131505(0x1d9))/0x7+parseInt(_0x131505(0x1e3))/0x8*(-parseInt(_0x131505(0x1c8))/0x9)+parseInt(_0x131505(0x1cc))/0xa;if(_0x1b968b===_0x1826ce)break;else _0x52cec7['push'](_0x52cec7['shift']());}catch(_0x5b0c69){_0x52cec7['push'](_0x52cec7['shift']());}}}(a245_0x4a09,0xc0b20));var __importDefault=this&&this['__importDefault']||function(_0x476d29){const _0x55f3dd=a245_0xaa6c;return _0x476d29&&_0x476d29[_0x55f3dd(0x1d0)]?_0x476d29:{'default':_0x476d29};};Object[a245_0x1d874f(0x1d2)](exports,a245_0x1d874f(0x1d0),{'value':!![]});const jsonwebtoken_1=require(a245_0x1d874f(0x1e4)),AppError_1=__importDefault(require(a245_0x1d874f(0x1dd))),auth_1=__importDefault(require(a245_0x1d874f(0x1c9))),socket_1=require(a245_0x1d874f(0x1ce)),ShowUserService_1=__importDefault(require(a245_0x1d874f(0x1da))),updateUser=async _0x381be8=>{const _0x2f2aaa=a245_0x1d874f,_0x568a80=await(0x0,ShowUserService_1[_0x2f2aaa(0x1d8)])(_0x381be8);_0x568a80[_0x2f2aaa(0x1c5)]('updatedAt',!![]);let _0x351f95=null;_0x351f95={'updatedAt':new Date()};if(!_0x568a80['online']){_0x351f95={..._0x351f95,'online':!![]},await _0x568a80[_0x2f2aaa(0x1df)](_0x351f95),await _0x568a80[_0x2f2aaa(0x1d6)]();const _0x2cd14b=(0x0,socket_1[_0x2f2aaa(0x1cb)])();_0x2cd14b[_0x2f2aaa(0x1d3)]('user'+_0x568a80['companyId'],{'action':_0x2f2aaa(0x1df),'user':_0x568a80});}else await _0x568a80[_0x2f2aaa(0x1df)](_0x351f95);},isAuth=async(_0x3a88da,_0x3e0e04,_0x39e19f)=>{const _0x566b34=a245_0x1d874f,_0x37bac7=_0x3a88da['headers'][_0x566b34(0x1db)];if(!_0x37bac7)throw new AppError_1[(_0x566b34(0x1d8))](_0x566b34(0x1ca),0x191);const [,_0x18e5d0]=_0x37bac7[_0x566b34(0x1c7)]('\x20');try{const _0xe7b9f=(0x0,jsonwebtoken_1[_0x566b34(0x1d5)])(_0x18e5d0,auth_1[_0x566b34(0x1d8)][_0x566b34(0x1d1)]),{id:_0x3174a9,profile:_0x2117e9,companyId:_0x47590d}=_0xe7b9f;updateUser(_0x3174a9),_0x3a88da[_0x566b34(0x1e2)]={'id':_0x3174a9,'profile':_0x2117e9,'companyId':_0x47590d};}catch(_0xc3fd9c){if(_0xc3fd9c[_0x566b34(0x1d4)]===_0x566b34(0x1ca)&&_0xc3fd9c[_0x566b34(0x1d7)]===0x191)throw new AppError_1['default'](_0xc3fd9c[_0x566b34(0x1d4)],0x191);else throw new AppError_1[(_0x566b34(0x1d8))](_0x566b34(0x1de),0x193);}return _0x39e19f();};exports[a245_0x1d874f(0x1d8)]=isAuth;