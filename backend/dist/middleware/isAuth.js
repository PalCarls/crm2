'use strict';function a288_0x92db(_0x1629b3,_0x13b3a3){const _0x38ca35=a288_0x38ca();return a288_0x92db=function(_0x92db05,_0x4e1ddf){_0x92db05=_0x92db05-0xf3;let _0x5250b5=_0x38ca35[_0x92db05];return _0x5250b5;},a288_0x92db(_0x1629b3,_0x13b3a3);}const a288_0x26e8c6=a288_0x92db;(function(_0x307feb,_0x89db79){const _0x25b55a=a288_0x92db,_0x467998=_0x307feb();while(!![]){try{const _0x3a023f=parseInt(_0x25b55a(0x10e))/0x1+parseInt(_0x25b55a(0xf5))/0x2*(-parseInt(_0x25b55a(0xf6))/0x3)+parseInt(_0x25b55a(0x104))/0x4+-parseInt(_0x25b55a(0xf8))/0x5+parseInt(_0x25b55a(0xfa))/0x6+parseInt(_0x25b55a(0xf9))/0x7*(parseInt(_0x25b55a(0xfd))/0x8)+-parseInt(_0x25b55a(0x101))/0x9*(parseInt(_0x25b55a(0xfc))/0xa);if(_0x3a023f===_0x89db79)break;else _0x467998['push'](_0x467998['shift']());}catch(_0x2f2694){_0x467998['push'](_0x467998['shift']());}}}(a288_0x38ca,0xe0b38));var __importDefault=this&&this['__importDefault']||function(_0xd62c7d){return _0xd62c7d&&_0xd62c7d['__esModule']?_0xd62c7d:{'default':_0xd62c7d};};Object['defineProperty'](exports,a288_0x26e8c6(0x10a),{'value':!![]});function a288_0x38ca(){const _0x23e21f=['10sAxFeG','46416EScqTC','verify','default','emit','11283633fIiCYO','update','secret','4790964DWvOjD','reload','statusCode','changed','message','Invalid\x20token.\x20We\x27ll\x20try\x20to\x20assign\x20a\x20new\x20one\x20on\x20next\x20request','__esModule','../services/UserServices/ShowUserService','headers','companyId','1321873zOxAVO','getIO','../errors/AppError','online','2reLUsL','2324775Eegypg','../libs/socket','4986905qrbmTj','1099bLMPbh','3095346BZuymk','user'];a288_0x38ca=function(){return _0x23e21f;};return a288_0x38ca();}const jsonwebtoken_1=require('jsonwebtoken'),AppError_1=__importDefault(require(a288_0x26e8c6(0xf3))),auth_1=__importDefault(require('../config/auth')),socket_1=require(a288_0x26e8c6(0xf7)),ShowUserService_1=__importDefault(require(a288_0x26e8c6(0x10b))),updateUser=async(_0xe7d96a,_0x5b0449)=>{const _0xd27494=a288_0x26e8c6,_0x25b736=await(0x0,ShowUserService_1[_0xd27494(0xff)])(_0xe7d96a,_0x5b0449);_0x25b736[_0xd27494(0x107)]('updatedAt',!![]);let _0x587312=null;_0x587312={'updatedAt':new Date()};if(!_0x25b736[_0xd27494(0xf4)]){_0x587312={..._0x587312,'online':!![]},await _0x25b736[_0xd27494(0x102)](_0x587312),await _0x25b736[_0xd27494(0x105)]();const _0x460da7=(0x0,socket_1[_0xd27494(0x10f)])();_0x460da7[_0xd27494(0x100)](_0xd27494(0xfb)+_0x25b736[_0xd27494(0x10d)],{'action':_0xd27494(0x102),'user':_0x25b736});}else await _0x25b736[_0xd27494(0x102)](_0x587312);},isAuth=async(_0x32717d,_0x1f1c6d,_0x1ef359)=>{const _0x1e831e=a288_0x26e8c6,_0x23265e=_0x32717d[_0x1e831e(0x10c)]['authorization'];if(!_0x23265e)throw new AppError_1[(_0x1e831e(0xff))]('ERR_SESSION_EXPIRED',0x191);const [,_0x2445f3]=_0x23265e['split']('\x20');try{const _0x42d95e=(0x0,jsonwebtoken_1[_0x1e831e(0xfe)])(_0x2445f3,auth_1[_0x1e831e(0xff)][_0x1e831e(0x103)]),{id:_0x984016,profile:_0x1bc83e,companyId:_0x450735}=_0x42d95e;updateUser(_0x984016,_0x450735),_0x32717d['user']={'id':_0x984016,'profile':_0x1bc83e,'companyId':_0x450735};}catch(_0x20ffc6){if(_0x20ffc6[_0x1e831e(0x108)]==='ERR_SESSION_EXPIRED'&&_0x20ffc6[_0x1e831e(0x106)]===0x191)throw new AppError_1[(_0x1e831e(0xff))](_0x20ffc6[_0x1e831e(0x108)],0x191);else throw new AppError_1[(_0x1e831e(0xff))](_0x1e831e(0x109),0x193);}return _0x1ef359();};exports[a288_0x26e8c6(0xff)]=isAuth;