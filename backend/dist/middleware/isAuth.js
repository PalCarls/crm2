'use strict';const a296_0x38ecba=a296_0x264d;(function(_0x3f48d6,_0x4ae5c9){const _0x26e20d=a296_0x264d,_0x10828c=_0x3f48d6();while(!![]){try{const _0x155df0=parseInt(_0x26e20d(0xba))/0x1*(parseInt(_0x26e20d(0xbd))/0x2)+-parseInt(_0x26e20d(0xc7))/0x3*(parseInt(_0x26e20d(0xbb))/0x4)+parseInt(_0x26e20d(0xd7))/0x5+-parseInt(_0x26e20d(0xc2))/0x6+parseInt(_0x26e20d(0xd4))/0x7*(parseInt(_0x26e20d(0xc0))/0x8)+-parseInt(_0x26e20d(0xb8))/0x9*(-parseInt(_0x26e20d(0xc5))/0xa)+-parseInt(_0x26e20d(0xd5))/0xb;if(_0x155df0===_0x4ae5c9)break;else _0x10828c['push'](_0x10828c['shift']());}catch(_0x14e8f2){_0x10828c['push'](_0x10828c['shift']());}}}(a296_0x3032,0x405ef));function a296_0x264d(_0x4d2e9f,_0x307577){const _0x3032c9=a296_0x3032();return a296_0x264d=function(_0x264df6,_0x435bf6){_0x264df6=_0x264df6-0xb7;let _0x300953=_0x3032c9[_0x264df6];return _0x300953;},a296_0x264d(_0x4d2e9f,_0x307577);}function a296_0x3032(){const _0x3313c8=['460208dlJvvt','authorization','8eMdLFu','jsonwebtoken','Invalid\x20token.\x20We\x27ll\x20try\x20to\x20assign\x20a\x20new\x20one\x20on\x20next\x20request','8QLWVYZ','update','182922voyZxF','__esModule','__importDefault','75210CweSos','getIO','3vzqgeH','../libs/socket','../config/auth','changed','defineProperty','secret','split','statusCode','user','message','headers','ERR_SESSION_EXPIRED','online','2372041WRhCEO','14315510YSqwvD','default','2071690VedwHE','../services/UserServices/ShowUserService','531MzvnjX','reload','128418mWOhEw'];a296_0x3032=function(){return _0x3313c8;};return a296_0x3032();}var __importDefault=this&&this[a296_0x38ecba(0xc4)]||function(_0x248503){return _0x248503&&_0x248503['__esModule']?_0x248503:{'default':_0x248503};};Object[a296_0x38ecba(0xcb)](exports,a296_0x38ecba(0xc3),{'value':!![]});const jsonwebtoken_1=require(a296_0x38ecba(0xbe)),AppError_1=__importDefault(require('../errors/AppError')),auth_1=__importDefault(require(a296_0x38ecba(0xc9))),socket_1=require(a296_0x38ecba(0xc8)),ShowUserService_1=__importDefault(require(a296_0x38ecba(0xb7))),updateUser=async(_0x1431ee,_0x3f25c7)=>{const _0x321936=a296_0x38ecba,_0x5ca46e=await(0x0,ShowUserService_1[_0x321936(0xd6)])(_0x1431ee,_0x3f25c7);_0x5ca46e[_0x321936(0xca)]('updatedAt',!![]);let _0x3e488c=null;_0x3e488c={'updatedAt':new Date()};if(!_0x5ca46e[_0x321936(0xd3)]){_0x3e488c={..._0x3e488c,'online':!![]},await _0x5ca46e[_0x321936(0xc1)](_0x3e488c),await _0x5ca46e[_0x321936(0xb9)]();const _0x5bb76b=(0x0,socket_1[_0x321936(0xc6)])();_0x5bb76b['emit'](_0x321936(0xcf)+_0x5ca46e['companyId'],{'action':'update','user':_0x5ca46e});}else await _0x5ca46e['update'](_0x3e488c);},isAuth=async(_0x2e9cd9,_0x4348ca,_0x46d15b)=>{const _0x4bfb03=a296_0x38ecba,_0x38ad3a=_0x2e9cd9[_0x4bfb03(0xd1)][_0x4bfb03(0xbc)];if(!_0x38ad3a)throw new AppError_1[(_0x4bfb03(0xd6))](_0x4bfb03(0xd2),0x191);const [,_0x336c63]=_0x38ad3a[_0x4bfb03(0xcd)]('\x20');try{const _0x588df1=(0x0,jsonwebtoken_1['verify'])(_0x336c63,auth_1[_0x4bfb03(0xd6)][_0x4bfb03(0xcc)]),{id:_0x5934a8,profile:_0x5e8fcd,companyId:_0x43c8dc}=_0x588df1;updateUser(_0x5934a8,_0x43c8dc),_0x2e9cd9['user']={'id':_0x5934a8,'profile':_0x5e8fcd,'companyId':_0x43c8dc};}catch(_0x257523){if(_0x257523[_0x4bfb03(0xd0)]===_0x4bfb03(0xd2)&&_0x257523[_0x4bfb03(0xce)]===0x191)throw new AppError_1['default'](_0x257523['message'],0x191);else throw new AppError_1[(_0x4bfb03(0xd6))](_0x4bfb03(0xbf),0x193);}return _0x46d15b();};exports['default']=isAuth;