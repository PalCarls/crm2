'use strict';const a280_0x3bbc1d=a280_0x3178;(function(_0x59e322,_0x1bf32d){const _0x7a9961=a280_0x3178,_0x446933=_0x59e322();while(!![]){try{const _0x5d3c8e=-parseInt(_0x7a9961(0x171))/0x1+parseInt(_0x7a9961(0x163))/0x2*(parseInt(_0x7a9961(0x17c))/0x3)+parseInt(_0x7a9961(0x167))/0x4*(-parseInt(_0x7a9961(0x151))/0x5)+-parseInt(_0x7a9961(0x154))/0x6*(parseInt(_0x7a9961(0x174))/0x7)+parseInt(_0x7a9961(0x176))/0x8+-parseInt(_0x7a9961(0x16b))/0x9+parseInt(_0x7a9961(0x169))/0xa;if(_0x5d3c8e===_0x1bf32d)break;else _0x446933['push'](_0x446933['shift']());}catch(_0x3d0a3d){_0x446933['push'](_0x446933['shift']());}}}(a280_0x32c7,0xe3c2b));var __importDefault=this&&this[a280_0x3bbc1d(0x16c)]||function(_0x394143){const _0x449337=a280_0x3bbc1d;return _0x394143&&_0x394143[_0x449337(0x161)]?_0x394143:{'default':_0x394143};};Object[a280_0x3bbc1d(0x170)](exports,'__esModule',{'value':!![]}),exports[a280_0x3bbc1d(0x162)]=void 0x0;const Message_1=__importDefault(require('../models/Message')),Ticket_1=__importDefault(require(a280_0x3bbc1d(0x15d))),sequelize_1=require(a280_0x3bbc1d(0x157)),socket_1=require(a280_0x3bbc1d(0x179)),Contact_1=__importDefault(require(a280_0x3bbc1d(0x177))),User_1=__importDefault(require(a280_0x3bbc1d(0x15a))),Queue_1=__importDefault(require('../models/Queue')),Whatsapp_1=__importDefault(require(a280_0x3bbc1d(0x15c))),Tag_1=__importDefault(require('../models/Tag')),updateTicketByRemoteJid=async(_0x2ac65d,_0x19f86d,_0x4b5003,_0x200018,_0x426999)=>{const _0x43b42b=a280_0x3bbc1d,{rows:_0x47fa58}=await Message_1[_0x43b42b(0x173)][_0x43b42b(0x159)]({'limit':0x1,'order':[[_0x43b42b(0x16f),'DESC']],'where':{'remoteJid':{[sequelize_1['Op'][_0x43b42b(0x155)]]:'%'+_0x2ac65d+'%'}}});_0x47fa58[_0x43b42b(0x158)](async _0x41639b=>{const _0x59edab=_0x43b42b;let _0x2e0b52=_0x41639b[_0x59edab(0x16e)],_0x2a5886=await Ticket_1[_0x59edab(0x173)]['findOne']({'where':{'id':_0x2e0b52},'include':[{'model':Contact_1['default'],'as':_0x59edab(0x16a),'attributes':['id','name',_0x59edab(0x15f),'profilePicUrl',_0x59edab(0x168),_0x59edab(0x152)],'include':[_0x59edab(0x15b),_0x59edab(0x178),_0x59edab(0x175)]},{'model':User_1['default'],'as':_0x59edab(0x160),'attributes':['id',_0x59edab(0x165)]},{'model':Queue_1[_0x59edab(0x173)],'as':'queue','attributes':['id',_0x59edab(0x165),_0x59edab(0x16d)]},{'model':Whatsapp_1[_0x59edab(0x173)],'as':_0x59edab(0x164),'attributes':[_0x59edab(0x165)]},{'model':Tag_1[_0x59edab(0x173)],'as':_0x59edab(0x175),'attributes':['id',_0x59edab(0x165),'color']}]});const _0x59aaf4=_0x2a5886[_0x59edab(0x15e)],_0x405666=_0x2a5886[_0x59edab(0x160)]?.['id'];await _0x2a5886[_0x59edab(0x17a)]({'status':_0x200018,'queueId':_0x19f86d,'userId':_0x4b5003,'unreadMessages':_0x426999});const _0x257214=(0x0,socket_1[_0x59edab(0x17b)])();_0x257214['to'](_0x2a5886['id'][_0x59edab(0x156)]())[_0x59edab(0x166)](_0x59edab(0x172)+_0x2a5886[_0x59edab(0x168)]+_0x59edab(0x153),{'action':_0x59edab(0x17a),'ticket':_0x2a5886});});return;};function a280_0x32c7(){const _0x7941ec=['-ticket','24IZRoWY','like','toString','sequelize','forEach','findAndCountAll','../models/User','extraInfo','../models/Whatsapp','../models/Ticket','status','number','user','__esModule','updateTicketByRemoteJid','928964JLKlgH','whatsapp','name','emit','4xJFZdr','companyId','18625060gSGNbQ','contact','789651CYQJVi','__importDefault','color','ticketId','createdAt','defineProperty','163518hjeZRc','company-','default','2775724viAMYX','tags','7139840ykFISn','../models/Contact','contactTags','../libs/socket','update','getIO','12zyDPcN','9213110pLtHMC','urlPicture'];a280_0x32c7=function(){return _0x7941ec;};return a280_0x32c7();}function a280_0x3178(_0x362c15,_0x1c6eca){const _0x32c71a=a280_0x32c7();return a280_0x3178=function(_0x31788f,_0x58ae28){_0x31788f=_0x31788f-0x151;let _0x4f0842=_0x32c71a[_0x31788f];return _0x4f0842;},a280_0x3178(_0x362c15,_0x1c6eca);}exports[a280_0x3bbc1d(0x162)]=updateTicketByRemoteJid;