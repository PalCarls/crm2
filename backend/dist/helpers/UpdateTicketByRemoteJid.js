'use strict';const a288_0x386b53=a288_0x41c7;(function(_0x523ce5,_0x437c22){const _0x3f8afc=a288_0x41c7,_0x314504=_0x523ce5();while(!![]){try{const _0x228a51=parseInt(_0x3f8afc(0x19c))/0x1*(parseInt(_0x3f8afc(0x193))/0x2)+parseInt(_0x3f8afc(0x1a7))/0x3*(-parseInt(_0x3f8afc(0x1a6))/0x4)+parseInt(_0x3f8afc(0x196))/0x5*(parseInt(_0x3f8afc(0x19e))/0x6)+-parseInt(_0x3f8afc(0x192))/0x7+parseInt(_0x3f8afc(0x1b9))/0x8+parseInt(_0x3f8afc(0x19a))/0x9+-parseInt(_0x3f8afc(0x1bb))/0xa;if(_0x228a51===_0x437c22)break;else _0x314504['push'](_0x314504['shift']());}catch(_0xa89460){_0x314504['push'](_0x314504['shift']());}}}(a288_0x2c8a,0x4d194));function a288_0x41c7(_0x2b6818,_0x39e2ce){const _0x2c8ae1=a288_0x2c8a();return a288_0x41c7=function(_0x41c7e2,_0xddc19c){_0x41c7e2=_0x41c7e2-0x192;let _0x4d2777=_0x2c8ae1[_0x41c7e2];return _0x4d2777;},a288_0x41c7(_0x2b6818,_0x39e2ce);}function a288_0x2c8a(){const _0x29d4fe=['color','../models/User','number','like','../libs/socket','defineProperty','user','../models/Tag','whatsapp','extraInfo','findOne','__esModule','emit','__importDefault','tags','profilePicUrl','getIO','3802896vkcvRS','DESC','5984480Aqbqif','-ticket','2211720dOcrrd','2usTzqh','createdAt','name','110dTqEKP','update','default','status','5303097WqNQSf','companyId','163609agETdy','../models/Message','134364lojdQm','contactTags','sequelize','ticketId','queue','updateTicketByRemoteJid','../models/Ticket','company-','8fyqMAB','736002KYyJkg'];a288_0x2c8a=function(){return _0x29d4fe;};return a288_0x2c8a();}var __importDefault=this&&this[a288_0x386b53(0x1b5)]||function(_0x314630){const _0x5daf74=a288_0x386b53;return _0x314630&&_0x314630[_0x5daf74(0x1b3)]?_0x314630:{'default':_0x314630};};Object[a288_0x386b53(0x1ad)](exports,a288_0x386b53(0x1b3),{'value':!![]}),exports[a288_0x386b53(0x1a3)]=void 0x0;const Message_1=__importDefault(require(a288_0x386b53(0x19d))),Ticket_1=__importDefault(require(a288_0x386b53(0x1a4))),sequelize_1=require(a288_0x386b53(0x1a0)),socket_1=require(a288_0x386b53(0x1ac)),Contact_1=__importDefault(require('../models/Contact')),User_1=__importDefault(require(a288_0x386b53(0x1a9))),Queue_1=__importDefault(require('../models/Queue')),Whatsapp_1=__importDefault(require('../models/Whatsapp')),Tag_1=__importDefault(require(a288_0x386b53(0x1af))),updateTicketByRemoteJid=async(_0x3ecc86,_0xfd3d2e,_0x366673,_0x1331e3,_0x38db09)=>{const _0x544021=a288_0x386b53,{rows:_0x19acb0}=await Message_1['default']['findAndCountAll']({'limit':0x1,'order':[[_0x544021(0x194),_0x544021(0x1ba)]],'where':{'remoteJid':{[sequelize_1['Op'][_0x544021(0x1ab)]]:'%'+_0x3ecc86+'%'}}});_0x19acb0['forEach'](async _0x4e71a6=>{const _0xb6fdb9=_0x544021;let _0x9bebfa=_0x4e71a6[_0xb6fdb9(0x1a1)],_0x525c45=await Ticket_1[_0xb6fdb9(0x198)][_0xb6fdb9(0x1b2)]({'where':{'id':_0x9bebfa},'include':[{'model':Contact_1[_0xb6fdb9(0x198)],'as':'contact','attributes':['id','name',_0xb6fdb9(0x1aa),_0xb6fdb9(0x1b7),_0xb6fdb9(0x19b),'urlPicture'],'include':[_0xb6fdb9(0x1b1),_0xb6fdb9(0x19f),_0xb6fdb9(0x1b6),{'association':'wallets','attributes':['id',_0xb6fdb9(0x195)]}]},{'model':User_1[_0xb6fdb9(0x198)],'as':_0xb6fdb9(0x1ae),'attributes':['id',_0xb6fdb9(0x195)]},{'model':Queue_1[_0xb6fdb9(0x198)],'as':_0xb6fdb9(0x1a2),'attributes':['id',_0xb6fdb9(0x195),_0xb6fdb9(0x1a8)]},{'model':Whatsapp_1['default'],'as':_0xb6fdb9(0x1b0),'attributes':[_0xb6fdb9(0x195)]},{'model':Tag_1[_0xb6fdb9(0x198)],'as':'tags','attributes':['id',_0xb6fdb9(0x195),_0xb6fdb9(0x1a8)]}]});const _0x2ad5bc=_0x525c45[_0xb6fdb9(0x199)],_0x336086=_0x525c45[_0xb6fdb9(0x1ae)]?.['id'];await _0x525c45[_0xb6fdb9(0x197)]({'status':_0x1331e3,'queueId':_0xfd3d2e,'userId':_0x366673,'unreadMessages':_0x38db09});const _0x43ba51=(0x0,socket_1[_0xb6fdb9(0x1b8)])();_0x43ba51['to'](_0x525c45['id']['toString']())[_0xb6fdb9(0x1b4)](_0xb6fdb9(0x1a5)+_0x525c45['companyId']+_0xb6fdb9(0x1bc),{'action':_0xb6fdb9(0x197),'ticket':_0x525c45});});return;};exports[a288_0x386b53(0x1a3)]=updateTicketByRemoteJid;