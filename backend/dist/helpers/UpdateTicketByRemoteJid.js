'use strict';const a295_0xe987c5=a295_0x153e;(function(_0xad3595,_0x4ff514){const _0x4edfea=a295_0x153e,_0x1f41ea=_0xad3595();while(!![]){try{const _0x54bb01=parseInt(_0x4edfea(0xf3))/0x1+parseInt(_0x4edfea(0xf1))/0x2*(-parseInt(_0x4edfea(0x110))/0x3)+parseInt(_0x4edfea(0xf0))/0x4+-parseInt(_0x4edfea(0x111))/0x5*(-parseInt(_0x4edfea(0xee))/0x6)+-parseInt(_0x4edfea(0x10f))/0x7*(parseInt(_0x4edfea(0x103))/0x8)+parseInt(_0x4edfea(0x116))/0x9+parseInt(_0x4edfea(0xec))/0xa;if(_0x54bb01===_0x4ff514)break;else _0x1f41ea['push'](_0x1f41ea['shift']());}catch(_0x1459a9){_0x1f41ea['push'](_0x1f41ea['shift']());}}}(a295_0x1c5f,0x73ff0));function a295_0x153e(_0x221651,_0x2a7c3a){const _0x1c5f79=a295_0x1c5f();return a295_0x153e=function(_0x153e7c,_0x40595c){_0x153e7c=_0x153e7c-0xe9;let _0x4c4414=_0x1c5f79[_0x153e7c];return _0x4c4414;},a295_0x153e(_0x221651,_0x2a7c3a);}var __importDefault=this&&this[a295_0xe987c5(0x108)]||function(_0x369139){return _0x369139&&_0x369139['__esModule']?_0x369139:{'default':_0x369139};};Object[a295_0xe987c5(0xf9)](exports,a295_0xe987c5(0x10a),{'value':!![]}),exports[a295_0xe987c5(0xe9)]=void 0x0;const Message_1=__importDefault(require(a295_0xe987c5(0x113))),Ticket_1=__importDefault(require(a295_0xe987c5(0x106))),sequelize_1=require(a295_0xe987c5(0xf7)),socket_1=require('../libs/socket'),Contact_1=__importDefault(require(a295_0xe987c5(0x100))),User_1=__importDefault(require('../models/User')),Queue_1=__importDefault(require(a295_0xe987c5(0xf8))),Whatsapp_1=__importDefault(require(a295_0xe987c5(0xf2))),Tag_1=__importDefault(require(a295_0xe987c5(0x10b))),updateTicketByRemoteJid=async(_0xadb892,_0x323d2a,_0x953763,_0x391137,_0x304b60)=>{const _0x5ad6eb=a295_0xe987c5,{rows:_0xc9d31}=await Message_1[_0x5ad6eb(0x10e)][_0x5ad6eb(0xfa)]({'limit':0x1,'order':[[_0x5ad6eb(0xf6),_0x5ad6eb(0xef)]],'where':{'remoteJid':{[sequelize_1['Op'][_0x5ad6eb(0x101)]]:'%'+_0xadb892+'%'}}});_0xc9d31[_0x5ad6eb(0x105)](async _0x379465=>{const _0x2362f4=_0x5ad6eb;let _0x446243=_0x379465[_0x2362f4(0xf5)],_0x1002b4=await Ticket_1[_0x2362f4(0x10e)][_0x2362f4(0x104)]({'where':{'id':_0x446243},'include':[{'model':Contact_1['default'],'as':_0x2362f4(0xfe),'attributes':['id','name',_0x2362f4(0x112),_0x2362f4(0x10d),_0x2362f4(0xed),_0x2362f4(0x117)],'include':['extraInfo',_0x2362f4(0xfc),_0x2362f4(0x119),{'association':_0x2362f4(0xea),'attributes':['id','name']}]},{'model':User_1['default'],'as':_0x2362f4(0xff),'attributes':['id',_0x2362f4(0x118)]},{'model':Queue_1[_0x2362f4(0x10e)],'as':_0x2362f4(0xfb),'attributes':['id',_0x2362f4(0x118),_0x2362f4(0x115)]},{'model':Whatsapp_1[_0x2362f4(0x10e)],'as':_0x2362f4(0x107),'attributes':['name']},{'model':Tag_1[_0x2362f4(0x10e)],'as':_0x2362f4(0x119),'attributes':['id',_0x2362f4(0x118),_0x2362f4(0x115)]}]});const _0xa1b5fc=_0x1002b4[_0x2362f4(0x109)],_0x255d70=_0x1002b4[_0x2362f4(0xff)]?.['id'];await _0x1002b4[_0x2362f4(0xf4)]({'status':_0x391137,'queueId':_0x323d2a,'userId':_0x953763,'unreadMessages':_0x304b60});const _0x1a533b=(0x0,socket_1[_0x2362f4(0x114)])();_0x1a533b['to'](_0x1002b4['id'][_0x2362f4(0xeb)]())[_0x2362f4(0xfd)](_0x2362f4(0x102)+_0x1002b4[_0x2362f4(0xed)]+_0x2362f4(0x10c),{'action':_0x2362f4(0xf4),'ticket':_0x1002b4});});return;};function a295_0x1c5f(){const _0x3bfa79=['companyId','344814hYZavZ','DESC','1032256Ujspmd','18614rmVJAv','../models/Whatsapp','93263copNAi','update','ticketId','createdAt','sequelize','../models/Queue','defineProperty','findAndCountAll','queue','contactTags','emit','contact','user','../models/Contact','like','company-','136hbMLpl','findOne','forEach','../models/Ticket','whatsapp','__importDefault','status','__esModule','../models/Tag','-ticket','profilePicUrl','default','62552Aapwxb','21PCxcIi','15btCklo','number','../models/Message','getIO','color','1469709bmfjHJ','urlPicture','name','tags','updateTicketByRemoteJid','wallets','toString','51460gLSYtF'];a295_0x1c5f=function(){return _0x3bfa79;};return a295_0x1c5f();}exports['updateTicketByRemoteJid']=updateTicketByRemoteJid;