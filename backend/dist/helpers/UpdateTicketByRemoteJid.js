'use strict';const a253_0x17cb3b=a253_0x411c;(function(_0x5316b2,_0x3ad455){const _0x543065=a253_0x411c,_0x44ee9f=_0x5316b2();while(!![]){try{const _0x2cbf84=parseInt(_0x543065(0x175))/0x1*(-parseInt(_0x543065(0x181))/0x2)+parseInt(_0x543065(0x17d))/0x3*(-parseInt(_0x543065(0x182))/0x4)+parseInt(_0x543065(0x172))/0x5*(parseInt(_0x543065(0x176))/0x6)+-parseInt(_0x543065(0x174))/0x7+parseInt(_0x543065(0x18d))/0x8*(-parseInt(_0x543065(0x180))/0x9)+parseInt(_0x543065(0x191))/0xa+parseInt(_0x543065(0x16e))/0xb;if(_0x2cbf84===_0x3ad455)break;else _0x44ee9f['push'](_0x44ee9f['shift']());}catch(_0x13768e){_0x44ee9f['push'](_0x44ee9f['shift']());}}}(a253_0x1a2e,0xc336b));var __importDefault=this&&this['__importDefault']||function(_0x302ffb){return _0x302ffb&&_0x302ffb['__esModule']?_0x302ffb:{'default':_0x302ffb};};function a253_0x411c(_0x4e071c,_0x5d8533){const _0x1a2e66=a253_0x1a2e();return a253_0x411c=function(_0x411ccd,_0x110943){_0x411ccd=_0x411ccd-0x16e;let _0x1b6a18=_0x1a2e66[_0x411ccd];return _0x1b6a18;},a253_0x411c(_0x4e071c,_0x5d8533);}Object[a253_0x17cb3b(0x173)](exports,a253_0x17cb3b(0x171),{'value':!![]}),exports[a253_0x17cb3b(0x192)]=void 0x0;function a253_0x1a2e(){const _0x805885=['../models/Ticket','tags','default','../models/User','toString','findOne','24VvJKCc','sequelize','../models/Contact','user','15915540iyMoBz','updateTicketByRemoteJid','DESC','../models/Whatsapp','log','../models/Message','ticketId','update','22521488ReIwBP','../models/Queue','../models/Tag','__esModule','299270HQHmup','defineProperty','6232982hcTwjF','1PUbPdF','54HiqpTZ','emit','getIO','-ticket','name','color','forEach','103749QRTqCL','queue','whatsapp','2049489KidBuD','1741446bPhniK','108VynkbF','../libs/socket','findAndCountAll','status','contact'];a253_0x1a2e=function(){return _0x805885;};return a253_0x1a2e();}const Message_1=__importDefault(require(a253_0x17cb3b(0x196))),Ticket_1=__importDefault(require(a253_0x17cb3b(0x187))),sequelize_1=require(a253_0x17cb3b(0x18e)),socket_1=require(a253_0x17cb3b(0x183)),Contact_1=__importDefault(require(a253_0x17cb3b(0x18f))),User_1=__importDefault(require(a253_0x17cb3b(0x18a))),Queue_1=__importDefault(require(a253_0x17cb3b(0x16f))),Whatsapp_1=__importDefault(require(a253_0x17cb3b(0x194))),Tag_1=__importDefault(require(a253_0x17cb3b(0x170))),updateTicketByRemoteJid=async(_0x353602,_0x4b186e,_0x4375e1,_0x347914,_0x40c9bc)=>{const _0x1e5f27=a253_0x17cb3b,{rows:_0x23c1cc}=await Message_1[_0x1e5f27(0x189)][_0x1e5f27(0x184)]({'limit':0x1,'order':[['createdAt',_0x1e5f27(0x193)]],'where':{'remoteJid':{[sequelize_1['Op']['like']]:'%'+_0x353602+'%'}}});console[_0x1e5f27(0x195)](_0x23c1cc),_0x23c1cc[_0x1e5f27(0x17c)](async _0x234637=>{const _0x30bc40=_0x1e5f27;let _0x293274=_0x234637[_0x30bc40(0x197)],_0x443ab4=await Ticket_1['default'][_0x30bc40(0x18c)]({'where':{'id':_0x293274},'include':[{'model':Contact_1['default'],'as':_0x30bc40(0x186),'attributes':['id',_0x30bc40(0x17a),'number','profilePicUrl'],'include':['extraInfo']},{'model':User_1['default'],'as':'user','attributes':['id','name']},{'model':Queue_1[_0x30bc40(0x189)],'as':_0x30bc40(0x17e),'attributes':['id',_0x30bc40(0x17a),_0x30bc40(0x17b)]},{'model':Whatsapp_1['default'],'as':_0x30bc40(0x17f),'attributes':[_0x30bc40(0x17a)]},{'model':Tag_1[_0x30bc40(0x189)],'as':_0x30bc40(0x188),'attributes':['id',_0x30bc40(0x17a),_0x30bc40(0x17b)]}]});const _0xd3604d=_0x443ab4[_0x30bc40(0x185)],_0x9f7a14=_0x443ab4[_0x30bc40(0x190)]?.['id'];await _0x443ab4[_0x30bc40(0x198)]({'status':_0x347914,'queueId':_0x4b186e,'userId':_0x4375e1,'unreadMessages':_0x40c9bc});const _0x39422f=(0x0,socket_1[_0x30bc40(0x178)])();_0x39422f['to'](_0x443ab4['id'][_0x30bc40(0x18b)]())[_0x30bc40(0x177)]('company-'+_0x443ab4['companyId']+_0x30bc40(0x179),{'action':_0x30bc40(0x198),'ticket':_0x443ab4});});return;};exports[a253_0x17cb3b(0x192)]=updateTicketByRemoteJid;