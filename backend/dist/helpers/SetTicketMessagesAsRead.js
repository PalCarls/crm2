'use strict';const a260_0x115ba4=a260_0x37c6;(function(_0x3deefa,_0x5907c5){const _0x4364ec=a260_0x37c6,_0x5d0a6f=_0x3deefa();while(!![]){try{const _0x4d0dd8=-parseInt(_0x4364ec(0x174))/0x1+parseInt(_0x4364ec(0x17b))/0x2*(parseInt(_0x4364ec(0x170))/0x3)+parseInt(_0x4364ec(0x17d))/0x4+-parseInt(_0x4364ec(0x189))/0x5+-parseInt(_0x4364ec(0x18c))/0x6+-parseInt(_0x4364ec(0x17f))/0x7+parseInt(_0x4364ec(0x176))/0x8;if(_0x4d0dd8===_0x5907c5)break;else _0x5d0a6f['push'](_0x5d0a6f['shift']());}catch(_0x21c0c9){_0x5d0a6f['push'](_0x5d0a6f['shift']());}}}(a260_0x2106,0x880c4));var __importDefault=this&&this[a260_0x115ba4(0x191)]||function(_0x4f16bf){return _0x4f16bf&&_0x4f16bf['__esModule']?_0x4f16bf:{'default':_0x4f16bf};};Object[a260_0x115ba4(0x16d)](exports,a260_0x115ba4(0x180),{'value':!![]});const cache_1=__importDefault(require(a260_0x115ba4(0x18a))),socket_1=require(a260_0x115ba4(0x18e)),Message_1=__importDefault(require(a260_0x115ba4(0x190))),logger_1=require(a260_0x115ba4(0x192)),GetTicketWbot_1=__importDefault(require(a260_0x115ba4(0x179))),SetTicketMessagesAsRead=async _0x233af2=>{const _0x3458ae=a260_0x115ba4;!_0x233af2[_0x3458ae(0x17e)]&&_0x233af2[_0x3458ae(0x183)]&&(await _0x233af2['update']({'unreadMessages':0x0}),await cache_1['default'][_0x3458ae(0x18f)](_0x3458ae(0x187)+_0x233af2[_0x3458ae(0x177)]+':unreads','0'));if(_0x233af2['channel']===_0x3458ae(0x16c))try{const _0x32f6cd=await(0x0,GetTicketWbot_1['default'])(_0x233af2),_0x2b4699=await Message_1[_0x3458ae(0x185)][_0x3458ae(0x193)]({'where':{'ticketId':_0x233af2['id'],'fromMe':![],'read':![]},'order':[[_0x3458ae(0x18d),_0x3458ae(0x172)]]});_0x2b4699['length']>0x0&&_0x2b4699['forEach'](async _0x4dfdc2=>{const _0x2ed510=_0x3458ae,_0x36e0e9=JSON['parse'](_0x4dfdc2[_0x2ed510(0x188)]);_0x36e0e9[_0x2ed510(0x16f)]&&_0x36e0e9[_0x2ed510(0x16f)][_0x2ed510(0x182)]===![]&&!_0x233af2[_0x2ed510(0x17e)]&&_0x233af2[_0x2ed510(0x183)]&&await _0x32f6cd[_0x2ed510(0x181)]([_0x36e0e9[_0x2ed510(0x16f)]]);}),!_0x233af2[_0x3458ae(0x17e)]&&_0x233af2['userId']&&await Message_1[_0x3458ae(0x185)][_0x3458ae(0x184)]({'read':!![]},{'where':{'ticketId':_0x233af2['id'],'read':![]}});}catch(_0x4bb6f7){console[_0x3458ae(0x175)](_0x4bb6f7),logger_1['logger'][_0x3458ae(0x16e)](_0x3458ae(0x17c)+_0x4bb6f7);}const _0x424e6b=(0x0,socket_1[_0x3458ae(0x17a)])();_0x424e6b['to'](_0x233af2[_0x3458ae(0x18b)])['to'](_0x3458ae(0x16b))[_0x3458ae(0x186)](_0x3458ae(0x171)+_0x233af2[_0x3458ae(0x173)]+'-ticket',{'action':_0x3458ae(0x178),'ticketId':_0x233af2['id']});};function a260_0x2106(){const _0xfc917d=['Could\x20not\x20mark\x20messages\x20as\x20read.\x20Maybe\x20whatsapp\x20session\x20disconnected?\x20Err:\x20','1230672BXEHyZ','isBot','3002671AZyuDD','__esModule','readMessages','fromMe','userId','update','default','emit','contacts:','dataJson','4013890LXdIUf','../libs/cache','status','4676232SfIRjt','createdAt','../libs/socket','set','../models/Message','__importDefault','../utils/logger','findAll','notification','whatsapp','defineProperty','warn','key','1953cxsOFr','company-','DESC','companyId','323352cjfVRU','log','13334240XcoCGQ','contactId','updateUnread','./GetTicketWbot','getIO','2818usdXDH'];a260_0x2106=function(){return _0xfc917d;};return a260_0x2106();}function a260_0x37c6(_0x580d37,_0x205f60){const _0x21069c=a260_0x2106();return a260_0x37c6=function(_0x37c6fa,_0x4d68d4){_0x37c6fa=_0x37c6fa-0x16b;let _0x3c2bba=_0x21069c[_0x37c6fa];return _0x3c2bba;},a260_0x37c6(_0x580d37,_0x205f60);}exports[a260_0x115ba4(0x185)]=SetTicketMessagesAsRead;