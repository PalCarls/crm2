'use strict';const a0_0x4bd072=a0_0x18f8;function a0_0x18f8(_0x4c137d,_0x44a0a5){const _0x148816=a0_0x1488();return a0_0x18f8=function(_0x18f869,_0x17e37b){_0x18f869=_0x18f869-0xba;let _0x53a8ee=_0x148816[_0x18f869];return _0x53a8ee;},a0_0x18f8(_0x4c137d,_0x44a0a5);}function a0_0x1488(){const _0x297d4d=['3320390FuUtUJ','warn','env','FRONTEND_URL','__importStar','849289lnWbOd','__createBinding','errorHandler','./utils/logger','use','./config/upload','logger','directory','reflect-metadata','get','error','init','create','./queues','status','express-async-errors','express','cors','3593943fbSSiB','message','json','statusCode','17758006cKczaD','defineProperty','./database','default','/public','SENTRY_DSN','messageQueue','static','2339468dnLfKZ','cookie-parser','prototype','./bootstrap','sendScheduledMessages','getOwnPropertyDescriptor','1241486ozyaqx','call','__esModule','5243490Ezuhcd'];a0_0x1488=function(){return _0x297d4d;};return a0_0x1488();}(function(_0x18bc9f,_0x513079){const _0x1abeff=a0_0x18f8,_0x56647d=_0x18bc9f();while(!![]){try{const _0x2d4306=parseInt(_0x1abeff(0xc2))/0x1+-parseInt(_0x1abeff(0xe6))/0x2+-parseInt(_0x1abeff(0xd4))/0x3+parseInt(_0x1abeff(0xe0))/0x4+-parseInt(_0x1abeff(0xbd))/0x5+-parseInt(_0x1abeff(0xbc))/0x6+parseInt(_0x1abeff(0xd8))/0x7;if(_0x2d4306===_0x513079)break;else _0x56647d['push'](_0x56647d['shift']());}catch(_0x4b87bb){_0x56647d['push'](_0x56647d['shift']());}}}(a0_0x1488,0x95f99));var __createBinding=this&&this[a0_0x4bd072(0xc3)]||(Object['create']?function(_0x4ac50a,_0x4ef8ad,_0xeb90d4,_0x4256a0){const _0x2fc3bd=a0_0x4bd072;if(_0x4256a0===undefined)_0x4256a0=_0xeb90d4;var _0x247777=Object[_0x2fc3bd(0xe5)](_0x4ef8ad,_0xeb90d4);(!_0x247777||(_0x2fc3bd(0xcb)in _0x247777?!_0x4ef8ad[_0x2fc3bd(0xbb)]:_0x247777['writable']||_0x247777['configurable']))&&(_0x247777={'enumerable':!![],'get':function(){return _0x4ef8ad[_0xeb90d4];}}),Object['defineProperty'](_0x4ac50a,_0x4256a0,_0x247777);}:function(_0x1719f8,_0x431349,_0x1fbbf8,_0x523c6b){if(_0x523c6b===undefined)_0x523c6b=_0x1fbbf8;_0x1719f8[_0x523c6b]=_0x431349[_0x1fbbf8];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a0_0x4bd072(0xce)]?function(_0x3aa4e6,_0x1e7bdd){const _0x5f3a72=a0_0x4bd072;Object['defineProperty'](_0x3aa4e6,_0x5f3a72(0xdb),{'enumerable':!![],'value':_0x1e7bdd});}:function(_0x50bfca,_0x4a8bb5){const _0x3dde69=a0_0x4bd072;_0x50bfca[_0x3dde69(0xdb)]=_0x4a8bb5;}),__importStar=this&&this[a0_0x4bd072(0xc1)]||function(_0xe64027){const _0x3d8733=a0_0x4bd072;if(_0xe64027&&_0xe64027[_0x3d8733(0xbb)])return _0xe64027;var _0x1846f5={};if(_0xe64027!=null){for(var _0x340268 in _0xe64027)if(_0x340268!==_0x3d8733(0xdb)&&Object[_0x3d8733(0xe2)]['hasOwnProperty'][_0x3d8733(0xba)](_0xe64027,_0x340268))__createBinding(_0x1846f5,_0xe64027,_0x340268);}return __setModuleDefault(_0x1846f5,_0xe64027),_0x1846f5;},__importDefault=this&&this['__importDefault']||function(_0x191442){return _0x191442&&_0x191442['__esModule']?_0x191442:{'default':_0x191442};};Object[a0_0x4bd072(0xd9)](exports,'__esModule',{'value':!![]}),require(a0_0x4bd072(0xe3)),require(a0_0x4bd072(0xca)),require(a0_0x4bd072(0xd1));const express_1=__importDefault(require(a0_0x4bd072(0xd2))),cors_1=__importDefault(require(a0_0x4bd072(0xd3))),cookie_parser_1=__importDefault(require(a0_0x4bd072(0xe1))),Sentry=__importStar(require('@sentry/node'));require(a0_0x4bd072(0xda));const upload_1=__importDefault(require(a0_0x4bd072(0xc7))),AppError_1=__importDefault(require('./errors/AppError')),routes_1=__importDefault(require('./routes')),logger_1=require(a0_0x4bd072(0xc5)),queues_1=require(a0_0x4bd072(0xcf));Sentry[a0_0x4bd072(0xcd)]({'dsn':process[a0_0x4bd072(0xbf)][a0_0x4bd072(0xdd)]});const app=(0x0,express_1[a0_0x4bd072(0xdb)])();app['set']('queues',{'messageQueue':queues_1[a0_0x4bd072(0xde)],'sendScheduledMessages':queues_1[a0_0x4bd072(0xe4)]});const allowedOrigins=[process['env'][a0_0x4bd072(0xc0)],'https://pps.whatsapp.net/'];app['use']((0x0,cors_1['default'])({'credentials':!![],'origin':allowedOrigins})),app[a0_0x4bd072(0xc6)]((0x0,cookie_parser_1['default'])()),app[a0_0x4bd072(0xc6)](express_1['default'][a0_0x4bd072(0xd6)]()),app[a0_0x4bd072(0xc6)](Sentry['Handlers']['requestHandler']()),app[a0_0x4bd072(0xc6)](a0_0x4bd072(0xdc),express_1[a0_0x4bd072(0xdb)][a0_0x4bd072(0xdf)](upload_1[a0_0x4bd072(0xdb)][a0_0x4bd072(0xc9)])),app[a0_0x4bd072(0xc6)](routes_1[a0_0x4bd072(0xdb)]),app[a0_0x4bd072(0xc6)](Sentry['Handlers'][a0_0x4bd072(0xc4)]()),app[a0_0x4bd072(0xc6)](async(_0x437e20,_0x478d94,_0xad4224,_0x2ce4a1)=>{const _0x3e6bce=a0_0x4bd072;if(_0x437e20 instanceof AppError_1[_0x3e6bce(0xdb)])return logger_1[_0x3e6bce(0xc8)][_0x3e6bce(0xbe)](_0x437e20),_0xad4224[_0x3e6bce(0xd0)](_0x437e20[_0x3e6bce(0xd7)])[_0x3e6bce(0xd6)]({'error':_0x437e20[_0x3e6bce(0xd5)]});return logger_1[_0x3e6bce(0xc8)][_0x3e6bce(0xcc)](_0x437e20),_0xad4224['status'](0x1f4)[_0x3e6bce(0xd6)]({'error':'Internal\x20server\x20error'});}),exports[a0_0x4bd072(0xdb)]=app;